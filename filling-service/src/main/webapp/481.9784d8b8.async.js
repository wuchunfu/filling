var Vs=Math.pow;(self.webpackChunkfilling_web=self.webpackChunkfilling_web||[]).push([[481],{36329:function(pr,bi,fn){"use strict";fn.d(bi,{Z:function(){return y}});var In=fn(906),je=fn(59301),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 280h416c4.4 0 8-3.6 8-8 0-40-8.8-76.7-25.9-108.1a184.31 184.31 0 00-74-74C596.7 72.8 560 64 520 64h-16c-40 0-76.7 8.8-108.1 25.9a184.31 184.31 0 00-74 74C304.8 195.3 296 232 296 272c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M940 512H792V412c76.8 0 139-62.2 139-139 0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8a63 63 0 01-63 63H232a63 63 0 01-63-63c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 76.8 62.2 139 139 139v100H84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h148v96c0 6.5.2 13 .7 19.3C164.1 728.6 116 796.7 116 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-44.2 23.9-82.9 59.6-103.7a273 273 0 0022.7 49c24.3 41.5 59 76.2 100.5 100.5 28.9 16.9 61 28.8 95.3 34.5 4.4 0 8-3.6 8-8V484c0-4.4 3.6-8 8-8h60c4.4 0 8 3.6 8 8v464.2c0 4.4 3.6 8 8 8 34.3-5.7 66.4-17.6 95.3-34.5a281.38 281.38 0 00123.2-149.5A120.4 120.4 0 01836 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-79.3-48.1-147.4-116.7-176.7.4-6.4.7-12.8.7-19.3v-96h148c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"bug",theme:"filled"},Z=w,f=fn(95860),g=function(M,E){return je.createElement(f.Z,(0,In.Z)((0,In.Z)({},M),{},{ref:E,icon:Z}))};g.displayName="BugFilled";var y=je.forwardRef(g)},1120:function(pr,bi,fn){"use strict";fn.d(bi,{Z:function(){return y}});var In=fn(906),je=fn(59301),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},Z=w,f=fn(95860),g=function(M,E){return je.createElement(f.Z,(0,In.Z)((0,In.Z)({},M),{},{ref:E,icon:Z}))};g.displayName="CopyOutlined";var y=je.forwardRef(g)},67169:function(pr,bi,fn){"use strict";fn.d(bi,{Z:function(){return y}});var In=fn(906),je=fn(59301),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"},Z=w,f=fn(95860),g=function(M,E){return je.createElement(f.Z,(0,In.Z)((0,In.Z)({},M),{},{ref:E,icon:Z}))};g.displayName="DeleteFilled";var y=je.forwardRef(g)},1030:function(pr,bi,fn){"use strict";fn.d(bi,{Z:function(){return y}});var In=fn(906),je=fn(59301),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},Z=w,f=fn(95860),g=function(M,E){return je.createElement(f.Z,(0,In.Z)((0,In.Z)({},M),{},{ref:E,icon:Z}))};g.displayName="DownloadOutlined";var y=je.forwardRef(g)},55828:function(pr,bi,fn){"use strict";fn.d(bi,{Z:function(){return y}});var In=fn(906),je=fn(59301),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"},Z=w,f=fn(95860),g=function(M,E){return je.createElement(f.Z,(0,In.Z)((0,In.Z)({},M),{},{ref:E,icon:Z}))};g.displayName="FormOutlined";var y=je.forwardRef(g)},43799:function(pr,bi,fn){"use strict";fn.d(bi,{Z:function(){return y}});var In=fn(906),je=fn(59301),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M384 912h496c17.7 0 32-14.3 32-32V340H384v572zm496-800H384v164h528V144c0-17.7-14.3-32-32-32zm-768 32v736c0 17.7 14.3 32 32 32h176V112H144c-17.7 0-32 14.3-32 32z"}}]},name:"layout",theme:"filled"},Z=w,f=fn(95860),g=function(M,E){return je.createElement(f.Z,(0,In.Z)((0,In.Z)({},M),{},{ref:E,icon:Z}))};g.displayName="LayoutFilled";var y=je.forwardRef(g)},7492:function(pr,bi,fn){"use strict";fn.d(bi,{Z:function(){return y}});var In=fn(906),je=fn(59301),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-80 600c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V360c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v304zm224 0c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V360c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v304z"}}]},name:"pause-circle",theme:"filled"},Z=w,f=fn(95860),g=function(M,E){return je.createElement(f.Z,(0,In.Z)((0,In.Z)({},M),{},{ref:E,icon:Z}))};g.displayName="PauseCircleFilled";var y=je.forwardRef(g)},64815:function(pr,bi,fn){"use strict";fn.d(bi,{Z:function(){return y}});var In=fn(906),je=fn(59301),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm144.1 454.9L437.7 677.8a8.02 8.02 0 01-12.7-6.5V353.7a8 8 0 0112.7-6.5L656.1 506a7.9 7.9 0 010 12.9z"}}]},name:"play-circle",theme:"filled"},Z=w,f=fn(95860),g=function(M,E){return je.createElement(f.Z,(0,In.Z)((0,In.Z)({},M),{},{ref:E,icon:Z}))};g.displayName="PlayCircleFilled";var y=je.forwardRef(g)},45704:function(pr,bi,fn){"use strict";fn.d(bi,{Z:function(){return y}});var In=fn(906),je=fn(59301),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},Z=w,f=fn(95860),g=function(M,E){return je.createElement(f.Z,(0,In.Z)((0,In.Z)({},M),{},{ref:E,icon:Z}))};g.displayName="RedoOutlined";var y=je.forwardRef(g)},83991:function(pr,bi,fn){"use strict";fn.d(bi,{Z:function(){return y}});var In=fn(906),je=fn(59301),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-12-12-28.3-18.7-45.3-18.7H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 176h256v112H384V176zm128 554c-79.5 0-144-64.5-144-144s64.5-144 144-144 144 64.5 144 144-64.5 144-144 144zm0-224c-44.2 0-80 35.8-80 80s35.8 80 80 80 80-35.8 80-80-35.8-80-80-80z"}}]},name:"save",theme:"filled"},Z=w,f=fn(95860),g=function(M,E){return je.createElement(f.Z,(0,In.Z)((0,In.Z)({},M),{},{ref:E,icon:Z}))};g.displayName="SaveFilled";var y=je.forwardRef(g)},38298:function(pr,bi,fn){"use strict";fn.d(bi,{Z:function(){return y}});var In=fn(906),je=fn(59301),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h360c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H184V184h656v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V144c0-17.7-14.3-32-32-32zM653.3 599.4l52.2-52.2a8.01 8.01 0 00-4.7-13.6l-179.4-21c-5.1-.6-9.5 3.7-8.9 8.9l21 179.4c.8 6.6 8.9 9.4 13.6 4.7l52.4-52.4 256.2 256.2c3.1 3.1 8.2 3.1 11.3 0l42.4-42.4c3.1-3.1 3.1-8.2 0-11.3L653.3 599.4z"}}]},name:"select",theme:"outlined"},Z=w,f=fn(95860),g=function(M,E){return je.createElement(f.Z,(0,In.Z)((0,In.Z)({},M),{},{ref:E,icon:Z}))};g.displayName="SelectOutlined";var y=je.forwardRef(g)},59848:function(pr,bi,fn){"use strict";fn.d(bi,{Z:function(){return y}});var In=fn(906),je=fn(59301),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"}}]},name:"undo",theme:"outlined"},Z=w,f=fn(95860),g=function(M,E){return je.createElement(f.Z,(0,In.Z)((0,In.Z)({},M),{},{ref:E,icon:Z}))};g.displayName="UndoOutlined";var y=je.forwardRef(g)},56764:function(pr,bi,fn){"use strict";var In=fn(59301),je=fn(73510),w=["fieldProps","min","proFieldProps","max"];function Z(){return Z=Object.assign||function(C){for(var D=1;D<arguments.length;D++){var L=arguments[D];for(var O in L)Object.prototype.hasOwnProperty.call(L,O)&&(C[O]=L[O])}return C},Z.apply(this,arguments)}function f(C,D){var L=Object.keys(C);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(C);D&&(O=O.filter(function(R){return Object.getOwnPropertyDescriptor(C,R).enumerable})),L.push.apply(L,O)}return L}function g(C){for(var D=1;D<arguments.length;D++){var L=arguments[D]!=null?arguments[D]:{};D%2?f(Object(L),!0).forEach(function(O){y(C,O,L[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(L)):f(Object(L)).forEach(function(O){Object.defineProperty(C,O,Object.getOwnPropertyDescriptor(L,O))})}return C}function y(C,D,L){return D in C?Object.defineProperty(C,D,{value:L,enumerable:!0,configurable:!0,writable:!0}):C[D]=L,C}function A(C,D){if(C==null)return{};var L=M(C,D),O,R;if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(C);for(R=0;R<W.length;R++)O=W[R],!(D.indexOf(O)>=0)&&(!Object.prototype.propertyIsEnumerable.call(C,O)||(L[O]=C[O]))}return L}function M(C,D){if(C==null)return{};var L={},O=Object.keys(C),R,W;for(W=0;W<O.length;W++)R=O[W],!(D.indexOf(R)>=0)&&(L[R]=C[R]);return L}var E=function(D,L){var O=D.fieldProps,R=D.min,W=D.proFieldProps,G=D.max,ie=A(D,w);return In.createElement(je.Z,Z({mode:"edit",valueType:"digit",fieldProps:g({min:R,max:G},O),ref:L,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:W},ie))};bi.Z=In.forwardRef(E)},15269:function(pr,bi,fn){"use strict";var In=fn(59301),je=fn(73510),w=fn(83460),Z=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],f=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"];function g(){return g=Object.assign||function(G){for(var ie=1;ie<arguments.length;ie++){var q=arguments[ie];for(var we in q)Object.prototype.hasOwnProperty.call(q,we)&&(G[we]=q[we])}return G},g.apply(this,arguments)}function y(G,ie){var q=Object.keys(G);if(Object.getOwnPropertySymbols){var we=Object.getOwnPropertySymbols(G);ie&&(we=we.filter(function(de){return Object.getOwnPropertyDescriptor(G,de).enumerable})),q.push.apply(q,we)}return q}function A(G){for(var ie=1;ie<arguments.length;ie++){var q=arguments[ie]!=null?arguments[ie]:{};ie%2?y(Object(q),!0).forEach(function(we){M(G,we,q[we])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(q)):y(Object(q)).forEach(function(we){Object.defineProperty(G,we,Object.getOwnPropertyDescriptor(q,we))})}return G}function M(G,ie,q){return ie in G?Object.defineProperty(G,ie,{value:q,enumerable:!0,configurable:!0,writable:!0}):G[ie]=q,G}function E(G,ie){if(G==null)return{};var q=C(G,ie),we,de;if(Object.getOwnPropertySymbols){var fe=Object.getOwnPropertySymbols(G);for(de=0;de<fe.length;de++)we=fe[de],!(ie.indexOf(we)>=0)&&(!Object.prototype.propertyIsEnumerable.call(G,we)||(q[we]=G[we]))}return q}function C(G,ie){if(G==null)return{};var q={},we=Object.keys(G),de,fe;for(fe=0;fe<we.length;fe++)de=we[fe],!(ie.indexOf(de)>=0)&&(q[de]=G[de]);return q}var D=In.forwardRef(function(G,ie){var q=G.fieldProps,we=G.children,de=G.params,fe=G.proFieldProps,F=G.mode,be=G.valueEnum,pe=G.request,ae=G.showSearch,Q=G.options,I=E(G,Z);return In.createElement(je.Z,g({mode:"edit",valueEnum:(0,w.h)(be),request:pe,params:de,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:A({options:Q,mode:F,showSearch:ae},q),ref:ie,proFieldProps:fe},I),we)}),L=In.forwardRef(function(G,ie){var q=G.fieldProps,we=G.children,de=G.params,fe=G.proFieldProps,F=G.mode,be=G.valueEnum,pe=G.request,ae=G.options,Q=E(G,f),I=A({options:ae,mode:F||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label",filterOption:!1},q);return In.createElement(je.Z,g({mode:"edit",valueEnum:(0,w.h)(be),request:pe,params:de,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:I,ref:ie,proFieldProps:fe},Q),we)}),O=D,R=L,W=O;W.SearchSelect=R,bi.Z=W},66474:function(pr,bi,fn){"use strict";var In=fn(59301),je=fn(73510),w=["fieldProps","proFieldProps"],Z=["fieldProps","proFieldProps"];function f(){return f=Object.assign||function(R){for(var W=1;W<arguments.length;W++){var G=arguments[W];for(var ie in G)Object.prototype.hasOwnProperty.call(G,ie)&&(R[ie]=G[ie])}return R},f.apply(this,arguments)}function g(R,W){var G=Object.keys(R);if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(R);W&&(ie=ie.filter(function(q){return Object.getOwnPropertyDescriptor(R,q).enumerable})),G.push.apply(G,ie)}return G}function y(R){for(var W=1;W<arguments.length;W++){var G=arguments[W]!=null?arguments[W]:{};W%2?g(Object(G),!0).forEach(function(ie){A(R,ie,G[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(G)):g(Object(G)).forEach(function(ie){Object.defineProperty(R,ie,Object.getOwnPropertyDescriptor(G,ie))})}return R}function A(R,W,G){return W in R?Object.defineProperty(R,W,{value:G,enumerable:!0,configurable:!0,writable:!0}):R[W]=G,R}function M(R,W){if(R==null)return{};var G=E(R,W),ie,q;if(Object.getOwnPropertySymbols){var we=Object.getOwnPropertySymbols(R);for(q=0;q<we.length;q++)ie=we[q],!(W.indexOf(ie)>=0)&&(!Object.prototype.propertyIsEnumerable.call(R,ie)||(G[ie]=R[ie]))}return G}function E(R,W){if(R==null)return{};var G={},ie=Object.keys(R),q,we;for(we=0;we<ie.length;we++)q=ie[we],!(W.indexOf(q)>=0)&&(G[q]=R[q]);return G}var C="text",D=function(W){var G=W.fieldProps,ie=W.proFieldProps,q=M(W,w);return In.createElement(je.Z,f({mode:"edit",valueType:C,fieldProps:y(y({},G),{},{onChange:function(){for(var de,fe,F=arguments.length,be=new Array(F),pe=0;pe<F;pe++)be[pe]=arguments[pe];G==null||(de=G.onChange)===null||de===void 0||de.call.apply(de,[G].concat(be)),q==null||(fe=q.onChange)===null||fe===void 0||fe.call.apply(fe,[q].concat(be))}}),filedConfig:{valueType:C},proFieldProps:ie},q))},L=function(W){var G=W.fieldProps,ie=W.proFieldProps,q=M(W,Z);return In.createElement(je.Z,f({mode:"edit",valueType:"password",fieldProps:G,proFieldProps:ie,filedConfig:{valueType:C}},q))},O=D;O.Password=L,bi.Z=O},88259:function(pr,bi,fn){"use strict";var In=fn(59301),je=fn(73510),w=["fieldProps","proFieldProps"];function Z(){return Z=Object.assign||function(C){for(var D=1;D<arguments.length;D++){var L=arguments[D];for(var O in L)Object.prototype.hasOwnProperty.call(L,O)&&(C[O]=L[O])}return C},Z.apply(this,arguments)}function f(C,D){var L=Object.keys(C);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(C);D&&(O=O.filter(function(R){return Object.getOwnPropertyDescriptor(C,R).enumerable})),L.push.apply(L,O)}return L}function g(C){for(var D=1;D<arguments.length;D++){var L=arguments[D]!=null?arguments[D]:{};D%2?f(Object(L),!0).forEach(function(O){y(C,O,L[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(L)):f(Object(L)).forEach(function(O){Object.defineProperty(C,O,Object.getOwnPropertyDescriptor(L,O))})}return C}function y(C,D,L){return D in C?Object.defineProperty(C,D,{value:L,enumerable:!0,configurable:!0,writable:!0}):C[D]=L,C}function A(C,D){if(C==null)return{};var L=M(C,D),O,R;if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(C);for(R=0;R<W.length;R++)O=W[R],!(D.indexOf(O)>=0)&&(!Object.prototype.propertyIsEnumerable.call(C,O)||(L[O]=C[O]))}return L}function M(C,D){if(C==null)return{};var L={},O=Object.keys(C),R,W;for(W=0;W<O.length;W++)R=O[W],!(D.indexOf(R)>=0)&&(L[R]=C[R]);return L}var E=function(D,L){var O=D.fieldProps,R=D.proFieldProps,W=A(D,w);return In.createElement(je.Z,Z({ref:L,mode:"edit",valueType:"textarea",fieldProps:g(g({},O),{},{onChange:function(){for(var ie,q,we=arguments.length,de=new Array(we),fe=0;fe<we;fe++)de[fe]=arguments[fe];O==null||(ie=O.onChange)===null||ie===void 0||ie.call.apply(ie,[O].concat(de)),W==null||(q=W.onChange)===null||q===void 0||q.call.apply(q,[W].concat(de))}}),proFieldProps:R},W))};bi.Z=In.forwardRef(E)},69076:function(pr,bi,fn){"use strict";fn.d(bi,{Z:function(){return je}});var In=fn(48718);function je(w,Z){var f=typeof Symbol!="undefined"&&w[Symbol.iterator]||w["@@iterator"];if(!f){if(Array.isArray(w)||(f=(0,In.Z)(w))||Z&&w&&typeof w.length=="number"){f&&(w=f);var g=0,y=function(){};return{s:y,n:function(){return g>=w.length?{done:!0}:{done:!1,value:w[g++]}},e:function(D){throw D},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A=!0,M=!1,E;return{s:function(){f=f.call(w)},n:function(){var D=f.next();return A=D.done,D},e:function(D){M=!0,E=D},f:function(){try{!A&&f.return!=null&&f.return()}finally{if(M)throw E}}}}},66366:function(pr,bi,fn){"use strict";fn.d(bi,{Z:function(){return w}});var In=fn(74415);function je(Z,f){for(;!Object.prototype.hasOwnProperty.call(Z,f)&&(Z=(0,In.Z)(Z),Z!==null););return Z}function w(Z,f,g){return typeof Reflect!="undefined"&&Reflect.get?w=Reflect.get:w=function(A,M,E){var C=je(A,M);if(!!C){var D=Object.getOwnPropertyDescriptor(C,M);return D.get?D.get.call(E):D.value}},w(Z,f,g||Z)}},18924:function(){},50372:function(pr,bi,fn){"use strict";fn.d(bi,{Z:function(){return In}});function In(je){return Object.keys(je).reduce(function(w,Z){return(Z.substr(0,5)==="data-"||Z.substr(0,5)==="aria-"||Z==="role")&&Z.substr(0,7)!=="data-__"&&(w[Z]=je[Z]),w},{})}},34636:function(pr,bi,fn){"use strict";var In=fn(34047);bi.Z=In.Z},52916:function(pr,bi,fn){"use strict";var In=fn(98797),je=fn.n(In),w=fn(50028)},62110:function(pr,bi,fn){"use strict";var In=fn(59301),je=(0,In.createContext)({});bi.Z=je},34047:function(pr,bi,fn){"use strict";var In=fn(19297),je=fn(87062),w=fn(53383),Z=fn(59301),f=fn(92691),g=fn.n(f),y=fn(62110),A=fn(3181),M=function(L,O){var R={};for(var W in L)Object.prototype.hasOwnProperty.call(L,W)&&O.indexOf(W)<0&&(R[W]=L[W]);if(L!=null&&typeof Object.getOwnPropertySymbols=="function")for(var G=0,W=Object.getOwnPropertySymbols(L);G<W.length;G++)O.indexOf(W[G])<0&&Object.prototype.propertyIsEnumerable.call(L,W[G])&&(R[W[G]]=L[W[G]]);return R};function E(L){return typeof L=="number"?"".concat(L," ").concat(L," auto"):/^\d+(\.\d+)?(px|em|rem|%)$/.test(L)?"0 0 ".concat(L):L}var C=["xs","sm","md","lg","xl","xxl"],D=Z.forwardRef(function(L,O){var R,W=Z.useContext(A.E_),G=W.getPrefixCls,ie=W.direction,q=Z.useContext(y.Z),we=q.gutter,de=q.wrap,fe=q.supportFlexGap,F=L.prefixCls,be=L.span,pe=L.order,ae=L.offset,Q=L.push,I=L.pull,oe=L.className,te=L.children,ue=L.flex,De=L.style,ve=M(L,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),Ne=G("col",F),Ge={};C.forEach(function(kt){var Tt,Jt={},Mn=L[kt];typeof Mn=="number"?Jt.span=Mn:(0,w.Z)(Mn)==="object"&&(Jt=Mn||{}),delete ve[kt],Ge=(0,je.Z)((0,je.Z)({},Ge),(Tt={},(0,In.Z)(Tt,"".concat(Ne,"-").concat(kt,"-").concat(Jt.span),Jt.span!==void 0),(0,In.Z)(Tt,"".concat(Ne,"-").concat(kt,"-order-").concat(Jt.order),Jt.order||Jt.order===0),(0,In.Z)(Tt,"".concat(Ne,"-").concat(kt,"-offset-").concat(Jt.offset),Jt.offset||Jt.offset===0),(0,In.Z)(Tt,"".concat(Ne,"-").concat(kt,"-push-").concat(Jt.push),Jt.push||Jt.push===0),(0,In.Z)(Tt,"".concat(Ne,"-").concat(kt,"-pull-").concat(Jt.pull),Jt.pull||Jt.pull===0),(0,In.Z)(Tt,"".concat(Ne,"-rtl"),ie==="rtl"),Tt))});var $e=g()(Ne,(R={},(0,In.Z)(R,"".concat(Ne,"-").concat(be),be!==void 0),(0,In.Z)(R,"".concat(Ne,"-order-").concat(pe),pe),(0,In.Z)(R,"".concat(Ne,"-offset-").concat(ae),ae),(0,In.Z)(R,"".concat(Ne,"-push-").concat(Q),Q),(0,In.Z)(R,"".concat(Ne,"-pull-").concat(I),I),R),oe,Ge),Be={};if(we&&we[0]>0){var mt=we[0]/2;Be.paddingLeft=mt,Be.paddingRight=mt}if(we&&we[1]>0&&!fe){var Ot=we[1]/2;Be.paddingTop=Ot,Be.paddingBottom=Ot}return ue&&(Be.flex=E(ue),ue==="auto"&&de===!1&&!Be.minWidth&&(Be.minWidth=0)),Z.createElement("div",(0,je.Z)({},ve,{style:(0,je.Z)((0,je.Z)({},Be),De),className:$e,ref:O}),te)});D.displayName="Col",bi.Z=D},46728:function(pr,bi,fn){"use strict";var In=fn(87062),je=fn(19297),w=fn(53383),Z=fn(83405),f=fn(59301),g=fn(92691),y=fn.n(g),A=fn(3181),M=fn(62110),E=fn(42442),C=fn(60291),D=fn(15754),L=function(G,ie){var q={};for(var we in G)Object.prototype.hasOwnProperty.call(G,we)&&ie.indexOf(we)<0&&(q[we]=G[we]);if(G!=null&&typeof Object.getOwnPropertySymbols=="function")for(var de=0,we=Object.getOwnPropertySymbols(G);de<we.length;de++)ie.indexOf(we[de])<0&&Object.prototype.propertyIsEnumerable.call(G,we[de])&&(q[we[de]]=G[we[de]]);return q},O=(0,E.b)("top","middle","bottom","stretch"),R=(0,E.b)("start","end","center","space-around","space-between"),W=f.forwardRef(function(G,ie){var q,we=G.prefixCls,de=G.justify,fe=G.align,F=G.className,be=G.style,pe=G.children,ae=G.gutter,Q=ae===void 0?0:ae,I=G.wrap,oe=L(G,["prefixCls","justify","align","className","style","children","gutter","wrap"]),te=f.useContext(A.E_),ue=te.getPrefixCls,De=te.direction,ve=f.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),Ne=(0,Z.Z)(ve,2),Ge=Ne[0],$e=Ne[1],Be=(0,D.Z)(),mt=f.useRef(Q);f.useEffect(function(){var Gt=C.ZP.subscribe(function(Ft){var zt=mt.current||0;(!Array.isArray(zt)&&(0,w.Z)(zt)==="object"||Array.isArray(zt)&&((0,w.Z)(zt[0])==="object"||(0,w.Z)(zt[1])==="object"))&&$e(Ft)});return function(){return C.ZP.unsubscribe(Gt)}},[]);var Ot=function(){var Ft=[0,0],zt=Array.isArray(Q)?Q:[Q,0];return zt.forEach(function(en,Bt){if((0,w.Z)(en)==="object")for(var an=0;an<C.c4.length;an++){var Di=C.c4[an];if(Ge[Di]&&en[Di]!==void 0){Ft[Bt]=en[Di];break}}else Ft[Bt]=en||0}),Ft},kt=ue("row",we),Tt=Ot(),Jt=y()(kt,(q={},(0,je.Z)(q,"".concat(kt,"-no-wrap"),I===!1),(0,je.Z)(q,"".concat(kt,"-").concat(de),de),(0,je.Z)(q,"".concat(kt,"-").concat(fe),fe),(0,je.Z)(q,"".concat(kt,"-rtl"),De==="rtl"),q),F),Mn={},Yt=Tt[0]>0?Tt[0]/-2:void 0,pn=Tt[1]>0?Tt[1]/-2:void 0;if(Yt&&(Mn.marginLeft=Yt,Mn.marginRight=Yt),Be){var gt=(0,Z.Z)(Tt,2);Mn.rowGap=gt[1]}else pn&&(Mn.marginTop=pn,Mn.marginBottom=pn);var _t=f.useMemo(function(){return{gutter:Tt,wrap:I,supportFlexGap:Be}},[Tt,I,Be]);return f.createElement(M.Z.Provider,{value:_t},f.createElement("div",(0,In.Z)({},oe,{className:Jt,style:(0,In.Z)((0,In.Z)({},Mn),be),ref:ie}),pe))});W.displayName="Row",bi.Z=W},50028:function(pr,bi,fn){"use strict";var In=fn(98797),je=fn.n(In),w=fn(18924),Z=fn.n(w)},4701:function(pr,bi,fn){"use strict";var In=fn(46728);bi.Z=In.Z},17051:function(pr,bi,fn){"use strict";var In=fn(98797),je=fn.n(In),w=fn(50028)},86251:function(pr,bi){"use strict";bi.byteLength=y,bi.toByteArray=M,bi.fromByteArray=D;for(var fn=[],In=[],je=typeof Uint8Array!="undefined"?Uint8Array:Array,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Z=0,f=w.length;Z<f;++Z)fn[Z]=w[Z],In[w.charCodeAt(Z)]=Z;In["-".charCodeAt(0)]=62,In["_".charCodeAt(0)]=63;function g(L){var O=L.length;if(O%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var R=L.indexOf("=");R===-1&&(R=O);var W=R===O?0:4-R%4;return[R,W]}function y(L){var O=g(L),R=O[0],W=O[1];return(R+W)*3/4-W}function A(L,O,R){return(O+R)*3/4-R}function M(L){var O,R=g(L),W=R[0],G=R[1],ie=new je(A(L,W,G)),q=0,we=G>0?W-4:W,de;for(de=0;de<we;de+=4)O=In[L.charCodeAt(de)]<<18|In[L.charCodeAt(de+1)]<<12|In[L.charCodeAt(de+2)]<<6|In[L.charCodeAt(de+3)],ie[q++]=O>>16&255,ie[q++]=O>>8&255,ie[q++]=O&255;return G===2&&(O=In[L.charCodeAt(de)]<<2|In[L.charCodeAt(de+1)]>>4,ie[q++]=O&255),G===1&&(O=In[L.charCodeAt(de)]<<10|In[L.charCodeAt(de+1)]<<4|In[L.charCodeAt(de+2)]>>2,ie[q++]=O>>8&255,ie[q++]=O&255),ie}function E(L){return fn[L>>18&63]+fn[L>>12&63]+fn[L>>6&63]+fn[L&63]}function C(L,O,R){for(var W,G=[],ie=O;ie<R;ie+=3)W=(L[ie]<<16&16711680)+(L[ie+1]<<8&65280)+(L[ie+2]&255),G.push(E(W));return G.join("")}function D(L){for(var O,R=L.length,W=R%3,G=[],ie=16383,q=0,we=R-W;q<we;q+=ie)G.push(C(L,q,q+ie>we?we:q+ie));return W===1?(O=L[R-1],G.push(fn[O>>2]+fn[O<<4&63]+"==")):W===2&&(O=(L[R-2]<<8)+L[R-1],G.push(fn[O>>10]+fn[O>>4&63]+fn[O<<2&63]+"=")),G.join("")}},692:function(pr,bi,fn){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const In=fn(86251),je=fn(67467),w=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;bi.Buffer=y,bi.SlowBuffer=ie,bi.INSPECT_MAX_BYTES=50;const Z=2147483647;bi.kMaxLength=Z,y.TYPED_ARRAY_SUPPORT=f(),!y.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const Ae=new Uint8Array(1),le={foo:function(){return 42}};return Object.setPrototypeOf(le,Uint8Array.prototype),Object.setPrototypeOf(Ae,le),Ae.foo()===42}catch(Ae){return!1}}Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(!!y.isBuffer(this))return this.buffer}}),Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(!!y.isBuffer(this))return this.byteOffset}});function g(Ae){if(Ae>Z)throw new RangeError('The value "'+Ae+'" is invalid for option "size"');const le=new Uint8Array(Ae);return Object.setPrototypeOf(le,y.prototype),le}function y(Ae,le,ne){if(typeof Ae=="number"){if(typeof le=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(Ae)}return A(Ae,le,ne)}y.poolSize=8192;function A(Ae,le,ne){if(typeof Ae=="string")return D(Ae,le);if(ArrayBuffer.isView(Ae))return O(Ae);if(Ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ae);if(Pt(Ae,ArrayBuffer)||Ae&&Pt(Ae.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Pt(Ae,SharedArrayBuffer)||Ae&&Pt(Ae.buffer,SharedArrayBuffer)))return R(Ae,le,ne);if(typeof Ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const B=Ae.valueOf&&Ae.valueOf();if(B!=null&&B!==Ae)return y.from(B,le,ne);const Me=W(Ae);if(Me)return Me;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof Ae[Symbol.toPrimitive]=="function")return y.from(Ae[Symbol.toPrimitive]("string"),le,ne);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ae)}y.from=function(Ae,le,ne){return A(Ae,le,ne)},Object.setPrototypeOf(y.prototype,Uint8Array.prototype),Object.setPrototypeOf(y,Uint8Array);function M(Ae){if(typeof Ae!="number")throw new TypeError('"size" argument must be of type number');if(Ae<0)throw new RangeError('The value "'+Ae+'" is invalid for option "size"')}function E(Ae,le,ne){return M(Ae),Ae<=0?g(Ae):le!==void 0?typeof ne=="string"?g(Ae).fill(le,ne):g(Ae).fill(le):g(Ae)}y.alloc=function(Ae,le,ne){return E(Ae,le,ne)};function C(Ae){return M(Ae),g(Ae<0?0:G(Ae)|0)}y.allocUnsafe=function(Ae){return C(Ae)},y.allocUnsafeSlow=function(Ae){return C(Ae)};function D(Ae,le){if((typeof le!="string"||le==="")&&(le="utf8"),!y.isEncoding(le))throw new TypeError("Unknown encoding: "+le);const ne=q(Ae,le)|0;let B=g(ne);const Me=B.write(Ae,le);return Me!==ne&&(B=B.slice(0,Me)),B}function L(Ae){const le=Ae.length<0?0:G(Ae.length)|0,ne=g(le);for(let B=0;B<le;B+=1)ne[B]=Ae[B]&255;return ne}function O(Ae){if(Pt(Ae,Uint8Array)){const le=new Uint8Array(Ae);return R(le.buffer,le.byteOffset,le.byteLength)}return L(Ae)}function R(Ae,le,ne){if(le<0||Ae.byteLength<le)throw new RangeError('"offset" is outside of buffer bounds');if(Ae.byteLength<le+(ne||0))throw new RangeError('"length" is outside of buffer bounds');let B;return le===void 0&&ne===void 0?B=new Uint8Array(Ae):ne===void 0?B=new Uint8Array(Ae,le):B=new Uint8Array(Ae,le,ne),Object.setPrototypeOf(B,y.prototype),B}function W(Ae){if(y.isBuffer(Ae)){const le=G(Ae.length)|0,ne=g(le);return ne.length===0||Ae.copy(ne,0,0,le),ne}if(Ae.length!==void 0)return typeof Ae.length!="number"||et(Ae.length)?g(0):L(Ae);if(Ae.type==="Buffer"&&Array.isArray(Ae.data))return L(Ae.data)}function G(Ae){if(Ae>=Z)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Z.toString(16)+" bytes");return Ae|0}function ie(Ae){return+Ae!=Ae&&(Ae=0),y.alloc(+Ae)}y.isBuffer=function(le){return le!=null&&le._isBuffer===!0&&le!==y.prototype},y.compare=function(le,ne){if(Pt(le,Uint8Array)&&(le=y.from(le,le.offset,le.byteLength)),Pt(ne,Uint8Array)&&(ne=y.from(ne,ne.offset,ne.byteLength)),!y.isBuffer(le)||!y.isBuffer(ne))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(le===ne)return 0;let B=le.length,Me=ne.length;for(let Ce=0,lt=Math.min(B,Me);Ce<lt;++Ce)if(le[Ce]!==ne[Ce]){B=le[Ce],Me=ne[Ce];break}return B<Me?-1:Me<B?1:0},y.isEncoding=function(le){switch(String(le).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(le,ne){if(!Array.isArray(le))throw new TypeError('"list" argument must be an Array of Buffers');if(le.length===0)return y.alloc(0);let B;if(ne===void 0)for(ne=0,B=0;B<le.length;++B)ne+=le[B].length;const Me=y.allocUnsafe(ne);let Ce=0;for(B=0;B<le.length;++B){let lt=le[B];if(Pt(lt,Uint8Array))Ce+lt.length>Me.length?(y.isBuffer(lt)||(lt=y.from(lt)),lt.copy(Me,Ce)):Uint8Array.prototype.set.call(Me,lt,Ce);else if(y.isBuffer(lt))lt.copy(Me,Ce);else throw new TypeError('"list" argument must be an Array of Buffers');Ce+=lt.length}return Me};function q(Ae,le){if(y.isBuffer(Ae))return Ae.length;if(ArrayBuffer.isView(Ae)||Pt(Ae,ArrayBuffer))return Ae.byteLength;if(typeof Ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ae);const ne=Ae.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&ne===0)return 0;let Me=!1;for(;;)switch(le){case"ascii":case"latin1":case"binary":return ne;case"utf8":case"utf-8":return an(Ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne*2;case"hex":return ne>>>1;case"base64":return wi(Ae).length;default:if(Me)return B?-1:an(Ae).length;le=(""+le).toLowerCase(),Me=!0}}y.byteLength=q;function we(Ae,le,ne){let B=!1;if((le===void 0||le<0)&&(le=0),le>this.length||((ne===void 0||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0,le>>>=0,ne<=le))return"";for(Ae||(Ae="utf8");;)switch(Ae){case"hex":return Ge(this,le,ne);case"utf8":case"utf-8":return te(this,le,ne);case"ascii":return ve(this,le,ne);case"latin1":case"binary":return Ne(this,le,ne);case"base64":return oe(this,le,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $e(this,le,ne);default:if(B)throw new TypeError("Unknown encoding: "+Ae);Ae=(Ae+"").toLowerCase(),B=!0}}y.prototype._isBuffer=!0;function de(Ae,le,ne){const B=Ae[le];Ae[le]=Ae[ne],Ae[ne]=B}y.prototype.swap16=function(){const le=this.length;if(le%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ne=0;ne<le;ne+=2)de(this,ne,ne+1);return this},y.prototype.swap32=function(){const le=this.length;if(le%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ne=0;ne<le;ne+=4)de(this,ne,ne+3),de(this,ne+1,ne+2);return this},y.prototype.swap64=function(){const le=this.length;if(le%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ne=0;ne<le;ne+=8)de(this,ne,ne+7),de(this,ne+1,ne+6),de(this,ne+2,ne+5),de(this,ne+3,ne+4);return this},y.prototype.toString=function(){const le=this.length;return le===0?"":arguments.length===0?te(this,0,le):we.apply(this,arguments)},y.prototype.toLocaleString=y.prototype.toString,y.prototype.equals=function(le){if(!y.isBuffer(le))throw new TypeError("Argument must be a Buffer");return this===le?!0:y.compare(this,le)===0},y.prototype.inspect=function(){let le="";const ne=bi.INSPECT_MAX_BYTES;return le=this.toString("hex",0,ne).replace(/(.{2})/g,"$1 ").trim(),this.length>ne&&(le+=" ... "),"<Buffer "+le+">"},w&&(y.prototype[w]=y.prototype.inspect),y.prototype.compare=function(le,ne,B,Me,Ce){if(Pt(le,Uint8Array)&&(le=y.from(le,le.offset,le.byteLength)),!y.isBuffer(le))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof le);if(ne===void 0&&(ne=0),B===void 0&&(B=le?le.length:0),Me===void 0&&(Me=0),Ce===void 0&&(Ce=this.length),ne<0||B>le.length||Me<0||Ce>this.length)throw new RangeError("out of range index");if(Me>=Ce&&ne>=B)return 0;if(Me>=Ce)return-1;if(ne>=B)return 1;if(ne>>>=0,B>>>=0,Me>>>=0,Ce>>>=0,this===le)return 0;let lt=Ce-Me,vt=B-ne;const ft=Math.min(lt,vt),ot=this.slice(Me,Ce),yt=le.slice(ne,B);for(let Ut=0;Ut<ft;++Ut)if(ot[Ut]!==yt[Ut]){lt=ot[Ut],vt=yt[Ut];break}return lt<vt?-1:vt<lt?1:0};function fe(Ae,le,ne,B,Me){if(Ae.length===0)return-1;if(typeof ne=="string"?(B=ne,ne=0):ne>2147483647?ne=2147483647:ne<-2147483648&&(ne=-2147483648),ne=+ne,et(ne)&&(ne=Me?0:Ae.length-1),ne<0&&(ne=Ae.length+ne),ne>=Ae.length){if(Me)return-1;ne=Ae.length-1}else if(ne<0)if(Me)ne=0;else return-1;if(typeof le=="string"&&(le=y.from(le,B)),y.isBuffer(le))return le.length===0?-1:F(Ae,le,ne,B,Me);if(typeof le=="number")return le=le&255,typeof Uint8Array.prototype.indexOf=="function"?Me?Uint8Array.prototype.indexOf.call(Ae,le,ne):Uint8Array.prototype.lastIndexOf.call(Ae,le,ne):F(Ae,[le],ne,B,Me);throw new TypeError("val must be string, number or Buffer")}function F(Ae,le,ne,B,Me){let Ce=1,lt=Ae.length,vt=le.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(Ae.length<2||le.length<2)return-1;Ce=2,lt/=2,vt/=2,ne/=2}function ft(yt,Ut){return Ce===1?yt[Ut]:yt.readUInt16BE(Ut*Ce)}let ot;if(Me){let yt=-1;for(ot=ne;ot<lt;ot++)if(ft(Ae,ot)===ft(le,yt===-1?0:ot-yt)){if(yt===-1&&(yt=ot),ot-yt+1===vt)return yt*Ce}else yt!==-1&&(ot-=ot-yt),yt=-1}else for(ne+vt>lt&&(ne=lt-vt),ot=ne;ot>=0;ot--){let yt=!0;for(let Ut=0;Ut<vt;Ut++)if(ft(Ae,ot+Ut)!==ft(le,Ut)){yt=!1;break}if(yt)return ot}return-1}y.prototype.includes=function(le,ne,B){return this.indexOf(le,ne,B)!==-1},y.prototype.indexOf=function(le,ne,B){return fe(this,le,ne,B,!0)},y.prototype.lastIndexOf=function(le,ne,B){return fe(this,le,ne,B,!1)};function be(Ae,le,ne,B){ne=Number(ne)||0;const Me=Ae.length-ne;B?(B=Number(B),B>Me&&(B=Me)):B=Me;const Ce=le.length;B>Ce/2&&(B=Ce/2);let lt;for(lt=0;lt<B;++lt){const vt=parseInt(le.substr(lt*2,2),16);if(et(vt))return lt;Ae[ne+lt]=vt}return lt}function pe(Ae,le,ne,B){return On(an(le,Ae.length-ne),Ae,ne,B)}function ae(Ae,le,ne,B){return On(Di(le),Ae,ne,B)}function Q(Ae,le,ne,B){return On(wi(le),Ae,ne,B)}function I(Ae,le,ne,B){return On(_i(le,Ae.length-ne),Ae,ne,B)}y.prototype.write=function(le,ne,B,Me){if(ne===void 0)Me="utf8",B=this.length,ne=0;else if(B===void 0&&typeof ne=="string")Me=ne,B=this.length,ne=0;else if(isFinite(ne))ne=ne>>>0,isFinite(B)?(B=B>>>0,Me===void 0&&(Me="utf8")):(Me=B,B=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ce=this.length-ne;if((B===void 0||B>Ce)&&(B=Ce),le.length>0&&(B<0||ne<0)||ne>this.length)throw new RangeError("Attempt to write outside buffer bounds");Me||(Me="utf8");let lt=!1;for(;;)switch(Me){case"hex":return be(this,le,ne,B);case"utf8":case"utf-8":return pe(this,le,ne,B);case"ascii":case"latin1":case"binary":return ae(this,le,ne,B);case"base64":return Q(this,le,ne,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,le,ne,B);default:if(lt)throw new TypeError("Unknown encoding: "+Me);Me=(""+Me).toLowerCase(),lt=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function oe(Ae,le,ne){return le===0&&ne===Ae.length?In.fromByteArray(Ae):In.fromByteArray(Ae.slice(le,ne))}function te(Ae,le,ne){ne=Math.min(Ae.length,ne);const B=[];let Me=le;for(;Me<ne;){const Ce=Ae[Me];let lt=null,vt=Ce>239?4:Ce>223?3:Ce>191?2:1;if(Me+vt<=ne){let ft,ot,yt,Ut;switch(vt){case 1:Ce<128&&(lt=Ce);break;case 2:ft=Ae[Me+1],(ft&192)==128&&(Ut=(Ce&31)<<6|ft&63,Ut>127&&(lt=Ut));break;case 3:ft=Ae[Me+1],ot=Ae[Me+2],(ft&192)==128&&(ot&192)==128&&(Ut=(Ce&15)<<12|(ft&63)<<6|ot&63,Ut>2047&&(Ut<55296||Ut>57343)&&(lt=Ut));break;case 4:ft=Ae[Me+1],ot=Ae[Me+2],yt=Ae[Me+3],(ft&192)==128&&(ot&192)==128&&(yt&192)==128&&(Ut=(Ce&15)<<18|(ft&63)<<12|(ot&63)<<6|yt&63,Ut>65535&&Ut<1114112&&(lt=Ut))}}lt===null?(lt=65533,vt=1):lt>65535&&(lt-=65536,B.push(lt>>>10&1023|55296),lt=56320|lt&1023),B.push(lt),Me+=vt}return De(B)}const ue=4096;function De(Ae){const le=Ae.length;if(le<=ue)return String.fromCharCode.apply(String,Ae);let ne="",B=0;for(;B<le;)ne+=String.fromCharCode.apply(String,Ae.slice(B,B+=ue));return ne}function ve(Ae,le,ne){let B="";ne=Math.min(Ae.length,ne);for(let Me=le;Me<ne;++Me)B+=String.fromCharCode(Ae[Me]&127);return B}function Ne(Ae,le,ne){let B="";ne=Math.min(Ae.length,ne);for(let Me=le;Me<ne;++Me)B+=String.fromCharCode(Ae[Me]);return B}function Ge(Ae,le,ne){const B=Ae.length;(!le||le<0)&&(le=0),(!ne||ne<0||ne>B)&&(ne=B);let Me="";for(let Ce=le;Ce<ne;++Ce)Me+=Ci[Ae[Ce]];return Me}function $e(Ae,le,ne){const B=Ae.slice(le,ne);let Me="";for(let Ce=0;Ce<B.length-1;Ce+=2)Me+=String.fromCharCode(B[Ce]+B[Ce+1]*256);return Me}y.prototype.slice=function(le,ne){const B=this.length;le=~~le,ne=ne===void 0?B:~~ne,le<0?(le+=B,le<0&&(le=0)):le>B&&(le=B),ne<0?(ne+=B,ne<0&&(ne=0)):ne>B&&(ne=B),ne<le&&(ne=le);const Me=this.subarray(le,ne);return Object.setPrototypeOf(Me,y.prototype),Me};function Be(Ae,le,ne){if(Ae%1!=0||Ae<0)throw new RangeError("offset is not uint");if(Ae+le>ne)throw new RangeError("Trying to access beyond buffer length")}y.prototype.readUintLE=y.prototype.readUIntLE=function(le,ne,B){le=le>>>0,ne=ne>>>0,B||Be(le,ne,this.length);let Me=this[le],Ce=1,lt=0;for(;++lt<ne&&(Ce*=256);)Me+=this[le+lt]*Ce;return Me},y.prototype.readUintBE=y.prototype.readUIntBE=function(le,ne,B){le=le>>>0,ne=ne>>>0,B||Be(le,ne,this.length);let Me=this[le+--ne],Ce=1;for(;ne>0&&(Ce*=256);)Me+=this[le+--ne]*Ce;return Me},y.prototype.readUint8=y.prototype.readUInt8=function(le,ne){return le=le>>>0,ne||Be(le,1,this.length),this[le]},y.prototype.readUint16LE=y.prototype.readUInt16LE=function(le,ne){return le=le>>>0,ne||Be(le,2,this.length),this[le]|this[le+1]<<8},y.prototype.readUint16BE=y.prototype.readUInt16BE=function(le,ne){return le=le>>>0,ne||Be(le,2,this.length),this[le]<<8|this[le+1]},y.prototype.readUint32LE=y.prototype.readUInt32LE=function(le,ne){return le=le>>>0,ne||Be(le,4,this.length),(this[le]|this[le+1]<<8|this[le+2]<<16)+this[le+3]*16777216},y.prototype.readUint32BE=y.prototype.readUInt32BE=function(le,ne){return le=le>>>0,ne||Be(le,4,this.length),this[le]*16777216+(this[le+1]<<16|this[le+2]<<8|this[le+3])},y.prototype.readBigUInt64LE=li(function(le){le=le>>>0,Ft(le,"offset");const ne=this[le],B=this[le+7];(ne===void 0||B===void 0)&&zt(le,this.length-8);const Me=ne+this[++le]*Vs(2,8)+this[++le]*Vs(2,16)+this[++le]*Vs(2,24),Ce=this[++le]+this[++le]*Vs(2,8)+this[++le]*Vs(2,16)+B*Vs(2,24);return BigInt(Me)+(BigInt(Ce)<<BigInt(32))}),y.prototype.readBigUInt64BE=li(function(le){le=le>>>0,Ft(le,"offset");const ne=this[le],B=this[le+7];(ne===void 0||B===void 0)&&zt(le,this.length-8);const Me=ne*Vs(2,24)+this[++le]*Vs(2,16)+this[++le]*Vs(2,8)+this[++le],Ce=this[++le]*Vs(2,24)+this[++le]*Vs(2,16)+this[++le]*Vs(2,8)+B;return(BigInt(Me)<<BigInt(32))+BigInt(Ce)}),y.prototype.readIntLE=function(le,ne,B){le=le>>>0,ne=ne>>>0,B||Be(le,ne,this.length);let Me=this[le],Ce=1,lt=0;for(;++lt<ne&&(Ce*=256);)Me+=this[le+lt]*Ce;return Ce*=128,Me>=Ce&&(Me-=Math.pow(2,8*ne)),Me},y.prototype.readIntBE=function(le,ne,B){le=le>>>0,ne=ne>>>0,B||Be(le,ne,this.length);let Me=ne,Ce=1,lt=this[le+--Me];for(;Me>0&&(Ce*=256);)lt+=this[le+--Me]*Ce;return Ce*=128,lt>=Ce&&(lt-=Math.pow(2,8*ne)),lt},y.prototype.readInt8=function(le,ne){return le=le>>>0,ne||Be(le,1,this.length),this[le]&128?(255-this[le]+1)*-1:this[le]},y.prototype.readInt16LE=function(le,ne){le=le>>>0,ne||Be(le,2,this.length);const B=this[le]|this[le+1]<<8;return B&32768?B|4294901760:B},y.prototype.readInt16BE=function(le,ne){le=le>>>0,ne||Be(le,2,this.length);const B=this[le+1]|this[le]<<8;return B&32768?B|4294901760:B},y.prototype.readInt32LE=function(le,ne){return le=le>>>0,ne||Be(le,4,this.length),this[le]|this[le+1]<<8|this[le+2]<<16|this[le+3]<<24},y.prototype.readInt32BE=function(le,ne){return le=le>>>0,ne||Be(le,4,this.length),this[le]<<24|this[le+1]<<16|this[le+2]<<8|this[le+3]},y.prototype.readBigInt64LE=li(function(le){le=le>>>0,Ft(le,"offset");const ne=this[le],B=this[le+7];(ne===void 0||B===void 0)&&zt(le,this.length-8);const Me=this[le+4]+this[le+5]*Vs(2,8)+this[le+6]*Vs(2,16)+(B<<24);return(BigInt(Me)<<BigInt(32))+BigInt(ne+this[++le]*Vs(2,8)+this[++le]*Vs(2,16)+this[++le]*Vs(2,24))}),y.prototype.readBigInt64BE=li(function(le){le=le>>>0,Ft(le,"offset");const ne=this[le],B=this[le+7];(ne===void 0||B===void 0)&&zt(le,this.length-8);const Me=(ne<<24)+this[++le]*Vs(2,16)+this[++le]*Vs(2,8)+this[++le];return(BigInt(Me)<<BigInt(32))+BigInt(this[++le]*Vs(2,24)+this[++le]*Vs(2,16)+this[++le]*Vs(2,8)+B)}),y.prototype.readFloatLE=function(le,ne){return le=le>>>0,ne||Be(le,4,this.length),je.read(this,le,!0,23,4)},y.prototype.readFloatBE=function(le,ne){return le=le>>>0,ne||Be(le,4,this.length),je.read(this,le,!1,23,4)},y.prototype.readDoubleLE=function(le,ne){return le=le>>>0,ne||Be(le,8,this.length),je.read(this,le,!0,52,8)},y.prototype.readDoubleBE=function(le,ne){return le=le>>>0,ne||Be(le,8,this.length),je.read(this,le,!1,52,8)};function mt(Ae,le,ne,B,Me,Ce){if(!y.isBuffer(Ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(le>Me||le<Ce)throw new RangeError('"value" argument is out of bounds');if(ne+B>Ae.length)throw new RangeError("Index out of range")}y.prototype.writeUintLE=y.prototype.writeUIntLE=function(le,ne,B,Me){if(le=+le,ne=ne>>>0,B=B>>>0,!Me){const vt=Math.pow(2,8*B)-1;mt(this,le,ne,B,vt,0)}let Ce=1,lt=0;for(this[ne]=le&255;++lt<B&&(Ce*=256);)this[ne+lt]=le/Ce&255;return ne+B},y.prototype.writeUintBE=y.prototype.writeUIntBE=function(le,ne,B,Me){if(le=+le,ne=ne>>>0,B=B>>>0,!Me){const vt=Math.pow(2,8*B)-1;mt(this,le,ne,B,vt,0)}let Ce=B-1,lt=1;for(this[ne+Ce]=le&255;--Ce>=0&&(lt*=256);)this[ne+Ce]=le/lt&255;return ne+B},y.prototype.writeUint8=y.prototype.writeUInt8=function(le,ne,B){return le=+le,ne=ne>>>0,B||mt(this,le,ne,1,255,0),this[ne]=le&255,ne+1},y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(le,ne,B){return le=+le,ne=ne>>>0,B||mt(this,le,ne,2,65535,0),this[ne]=le&255,this[ne+1]=le>>>8,ne+2},y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(le,ne,B){return le=+le,ne=ne>>>0,B||mt(this,le,ne,2,65535,0),this[ne]=le>>>8,this[ne+1]=le&255,ne+2},y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(le,ne,B){return le=+le,ne=ne>>>0,B||mt(this,le,ne,4,4294967295,0),this[ne+3]=le>>>24,this[ne+2]=le>>>16,this[ne+1]=le>>>8,this[ne]=le&255,ne+4},y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(le,ne,B){return le=+le,ne=ne>>>0,B||mt(this,le,ne,4,4294967295,0),this[ne]=le>>>24,this[ne+1]=le>>>16,this[ne+2]=le>>>8,this[ne+3]=le&255,ne+4};function Ot(Ae,le,ne,B,Me){Gt(le,B,Me,Ae,ne,7);let Ce=Number(le&BigInt(4294967295));Ae[ne++]=Ce,Ce=Ce>>8,Ae[ne++]=Ce,Ce=Ce>>8,Ae[ne++]=Ce,Ce=Ce>>8,Ae[ne++]=Ce;let lt=Number(le>>BigInt(32)&BigInt(4294967295));return Ae[ne++]=lt,lt=lt>>8,Ae[ne++]=lt,lt=lt>>8,Ae[ne++]=lt,lt=lt>>8,Ae[ne++]=lt,ne}function kt(Ae,le,ne,B,Me){Gt(le,B,Me,Ae,ne,7);let Ce=Number(le&BigInt(4294967295));Ae[ne+7]=Ce,Ce=Ce>>8,Ae[ne+6]=Ce,Ce=Ce>>8,Ae[ne+5]=Ce,Ce=Ce>>8,Ae[ne+4]=Ce;let lt=Number(le>>BigInt(32)&BigInt(4294967295));return Ae[ne+3]=lt,lt=lt>>8,Ae[ne+2]=lt,lt=lt>>8,Ae[ne+1]=lt,lt=lt>>8,Ae[ne]=lt,ne+8}y.prototype.writeBigUInt64LE=li(function(le,ne=0){return Ot(this,le,ne,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeBigUInt64BE=li(function(le,ne=0){return kt(this,le,ne,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeIntLE=function(le,ne,B,Me){if(le=+le,ne=ne>>>0,!Me){const ft=Math.pow(2,8*B-1);mt(this,le,ne,B,ft-1,-ft)}let Ce=0,lt=1,vt=0;for(this[ne]=le&255;++Ce<B&&(lt*=256);)le<0&&vt===0&&this[ne+Ce-1]!==0&&(vt=1),this[ne+Ce]=(le/lt>>0)-vt&255;return ne+B},y.prototype.writeIntBE=function(le,ne,B,Me){if(le=+le,ne=ne>>>0,!Me){const ft=Math.pow(2,8*B-1);mt(this,le,ne,B,ft-1,-ft)}let Ce=B-1,lt=1,vt=0;for(this[ne+Ce]=le&255;--Ce>=0&&(lt*=256);)le<0&&vt===0&&this[ne+Ce+1]!==0&&(vt=1),this[ne+Ce]=(le/lt>>0)-vt&255;return ne+B},y.prototype.writeInt8=function(le,ne,B){return le=+le,ne=ne>>>0,B||mt(this,le,ne,1,127,-128),le<0&&(le=255+le+1),this[ne]=le&255,ne+1},y.prototype.writeInt16LE=function(le,ne,B){return le=+le,ne=ne>>>0,B||mt(this,le,ne,2,32767,-32768),this[ne]=le&255,this[ne+1]=le>>>8,ne+2},y.prototype.writeInt16BE=function(le,ne,B){return le=+le,ne=ne>>>0,B||mt(this,le,ne,2,32767,-32768),this[ne]=le>>>8,this[ne+1]=le&255,ne+2},y.prototype.writeInt32LE=function(le,ne,B){return le=+le,ne=ne>>>0,B||mt(this,le,ne,4,2147483647,-2147483648),this[ne]=le&255,this[ne+1]=le>>>8,this[ne+2]=le>>>16,this[ne+3]=le>>>24,ne+4},y.prototype.writeInt32BE=function(le,ne,B){return le=+le,ne=ne>>>0,B||mt(this,le,ne,4,2147483647,-2147483648),le<0&&(le=4294967295+le+1),this[ne]=le>>>24,this[ne+1]=le>>>16,this[ne+2]=le>>>8,this[ne+3]=le&255,ne+4},y.prototype.writeBigInt64LE=li(function(le,ne=0){return Ot(this,le,ne,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeBigInt64BE=li(function(le,ne=0){return kt(this,le,ne,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Tt(Ae,le,ne,B,Me,Ce){if(ne+B>Ae.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("Index out of range")}function Jt(Ae,le,ne,B,Me){return le=+le,ne=ne>>>0,Me||Tt(Ae,le,ne,4,34028234663852886e22,-34028234663852886e22),je.write(Ae,le,ne,B,23,4),ne+4}y.prototype.writeFloatLE=function(le,ne,B){return Jt(this,le,ne,!0,B)},y.prototype.writeFloatBE=function(le,ne,B){return Jt(this,le,ne,!1,B)};function Mn(Ae,le,ne,B,Me){return le=+le,ne=ne>>>0,Me||Tt(Ae,le,ne,8,17976931348623157e292,-17976931348623157e292),je.write(Ae,le,ne,B,52,8),ne+8}y.prototype.writeDoubleLE=function(le,ne,B){return Mn(this,le,ne,!0,B)},y.prototype.writeDoubleBE=function(le,ne,B){return Mn(this,le,ne,!1,B)},y.prototype.copy=function(le,ne,B,Me){if(!y.isBuffer(le))throw new TypeError("argument should be a Buffer");if(B||(B=0),!Me&&Me!==0&&(Me=this.length),ne>=le.length&&(ne=le.length),ne||(ne=0),Me>0&&Me<B&&(Me=B),Me===B||le.length===0||this.length===0)return 0;if(ne<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(Me<0)throw new RangeError("sourceEnd out of bounds");Me>this.length&&(Me=this.length),le.length-ne<Me-B&&(Me=le.length-ne+B);const Ce=Me-B;return this===le&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ne,B,Me):Uint8Array.prototype.set.call(le,this.subarray(B,Me),ne),Ce},y.prototype.fill=function(le,ne,B,Me){if(typeof le=="string"){if(typeof ne=="string"?(Me=ne,ne=0,B=this.length):typeof B=="string"&&(Me=B,B=this.length),Me!==void 0&&typeof Me!="string")throw new TypeError("encoding must be a string");if(typeof Me=="string"&&!y.isEncoding(Me))throw new TypeError("Unknown encoding: "+Me);if(le.length===1){const lt=le.charCodeAt(0);(Me==="utf8"&&lt<128||Me==="latin1")&&(le=lt)}}else typeof le=="number"?le=le&255:typeof le=="boolean"&&(le=Number(le));if(ne<0||this.length<ne||this.length<B)throw new RangeError("Out of range index");if(B<=ne)return this;ne=ne>>>0,B=B===void 0?this.length:B>>>0,le||(le=0);let Ce;if(typeof le=="number")for(Ce=ne;Ce<B;++Ce)this[Ce]=le;else{const lt=y.isBuffer(le)?le:y.from(le,Me),vt=lt.length;if(vt===0)throw new TypeError('The value "'+le+'" is invalid for argument "value"');for(Ce=0;Ce<B-ne;++Ce)this[Ce+ne]=lt[Ce%vt]}return this};const Yt={};function pn(Ae,le,ne){Yt[Ae]=class extends ne{constructor(){super();Object.defineProperty(this,"message",{value:le.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ae}]`,this.stack,delete this.name}get code(){return Ae}set code(Me){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Me,writable:!0})}toString(){return`${this.name} [${Ae}]: ${this.message}`}}}pn("ERR_BUFFER_OUT_OF_BOUNDS",function(Ae){return Ae?`${Ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pn("ERR_INVALID_ARG_TYPE",function(Ae,le){return`The "${Ae}" argument must be of type number. Received type ${typeof le}`},TypeError),pn("ERR_OUT_OF_RANGE",function(Ae,le,ne){let B=`The value of "${Ae}" is out of range.`,Me=ne;return Number.isInteger(ne)&&Math.abs(ne)>Vs(2,32)?Me=gt(String(ne)):typeof ne=="bigint"&&(Me=String(ne),(ne>Vs(BigInt(2),BigInt(32))||ne<-Vs(BigInt(2),BigInt(32)))&&(Me=gt(Me)),Me+="n"),B+=` It must be ${le}. Received ${Me}`,B},RangeError);function gt(Ae){let le="",ne=Ae.length;const B=Ae[0]==="-"?1:0;for(;ne>=B+4;ne-=3)le=`_${Ae.slice(ne-3,ne)}${le}`;return`${Ae.slice(0,ne)}${le}`}function _t(Ae,le,ne){Ft(le,"offset"),(Ae[le]===void 0||Ae[le+ne]===void 0)&&zt(le,Ae.length-(ne+1))}function Gt(Ae,le,ne,B,Me,Ce){if(Ae>ne||Ae<le){const lt=typeof le=="bigint"?"n":"";let vt;throw Ce>3?le===0||le===BigInt(0)?vt=`>= 0${lt} and < 2${lt} ** ${(Ce+1)*8}${lt}`:vt=`>= -(2${lt} ** ${(Ce+1)*8-1}${lt}) and < 2 ** ${(Ce+1)*8-1}${lt}`:vt=`>= ${le}${lt} and <= ${ne}${lt}`,new Yt.ERR_OUT_OF_RANGE("value",vt,Ae)}_t(B,Me,Ce)}function Ft(Ae,le){if(typeof Ae!="number")throw new Yt.ERR_INVALID_ARG_TYPE(le,"number",Ae)}function zt(Ae,le,ne){throw Math.floor(Ae)!==Ae?(Ft(Ae,ne),new Yt.ERR_OUT_OF_RANGE(ne||"offset","an integer",Ae)):le<0?new Yt.ERR_BUFFER_OUT_OF_BOUNDS:new Yt.ERR_OUT_OF_RANGE(ne||"offset",`>= ${ne?1:0} and <= ${le}`,Ae)}const en=/[^+/0-9A-Za-z-_]/g;function Bt(Ae){if(Ae=Ae.split("=")[0],Ae=Ae.trim().replace(en,""),Ae.length<2)return"";for(;Ae.length%4!=0;)Ae=Ae+"=";return Ae}function an(Ae,le){le=le||Infinity;let ne;const B=Ae.length;let Me=null;const Ce=[];for(let lt=0;lt<B;++lt){if(ne=Ae.charCodeAt(lt),ne>55295&&ne<57344){if(!Me){if(ne>56319){(le-=3)>-1&&Ce.push(239,191,189);continue}else if(lt+1===B){(le-=3)>-1&&Ce.push(239,191,189);continue}Me=ne;continue}if(ne<56320){(le-=3)>-1&&Ce.push(239,191,189),Me=ne;continue}ne=(Me-55296<<10|ne-56320)+65536}else Me&&(le-=3)>-1&&Ce.push(239,191,189);if(Me=null,ne<128){if((le-=1)<0)break;Ce.push(ne)}else if(ne<2048){if((le-=2)<0)break;Ce.push(ne>>6|192,ne&63|128)}else if(ne<65536){if((le-=3)<0)break;Ce.push(ne>>12|224,ne>>6&63|128,ne&63|128)}else if(ne<1114112){if((le-=4)<0)break;Ce.push(ne>>18|240,ne>>12&63|128,ne>>6&63|128,ne&63|128)}else throw new Error("Invalid code point")}return Ce}function Di(Ae){const le=[];for(let ne=0;ne<Ae.length;++ne)le.push(Ae.charCodeAt(ne)&255);return le}function _i(Ae,le){let ne,B,Me;const Ce=[];for(let lt=0;lt<Ae.length&&!((le-=2)<0);++lt)ne=Ae.charCodeAt(lt),B=ne>>8,Me=ne%256,Ce.push(Me),Ce.push(B);return Ce}function wi(Ae){return In.toByteArray(Bt(Ae))}function On(Ae,le,ne,B){let Me;for(Me=0;Me<B&&!(Me+ne>=le.length||Me>=Ae.length);++Me)le[Me+ne]=Ae[Me];return Me}function Pt(Ae,le){return Ae instanceof le||Ae!=null&&Ae.constructor!=null&&Ae.constructor.name!=null&&Ae.constructor.name===le.name}function et(Ae){return Ae!==Ae}const Ci=function(){const Ae="0123456789abcdef",le=new Array(256);for(let ne=0;ne<16;++ne){const B=ne*16;for(let Me=0;Me<16;++Me)le[B+Me]=Ae[ne]+Ae[Me]}return le}();function li(Ae){return typeof BigInt=="undefined"?kn:Ae}function kn(){throw new Error("BigInt not supported")}},15839:function(pr){(function(fn,In){if(!0)pr.exports=In();else var je,w})(self,function(){return(()=>{var bi={526:function(w){(function(f,g){w.exports=g()})(typeof self!="undefined"?self:this,function(){return function(Z){var f={};function g(y){if(f[y])return f[y].exports;var A=f[y]={i:y,l:!1,exports:{}};return Z[y].call(A.exports,A,A.exports,g),A.l=!0,A.exports}return g.m=Z,g.c=f,g.d=function(y,A,M){g.o(y,A)||Object.defineProperty(y,A,{configurable:!1,enumerable:!0,get:M})},g.n=function(y){var A=y&&y.__esModule?function(){return y.default}:function(){return y};return g.d(A,"a",A),A},g.o=function(y,A){return Object.prototype.hasOwnProperty.call(y,A)},g.p="",g(g.s=31)}([function(Z,f,g){"use strict";var y=g(4);f.a=function(A){return Array.isArray?Array.isArray(A):Object(y.a)(A,"Array")}},function(Z,f,g){"use strict";var y=function(A){return A!==null&&typeof A!="function"&&isFinite(A.length)};f.a=y},function(Z,f,g){"use strict";var y=g(0),A=g(13);function M(E,C){if(!!E){var D;if(Object(y.a)(E))for(var L=0,O=E.length;L<O&&(D=C(E[L],L),D!==!1);L++);else if(Object(A.a)(E)){for(var R in E)if(E.hasOwnProperty(R)&&(D=C(E[R],R),D===!1))break}}}f.a=M},function(Z,f,g){"use strict";var y=g(4);f.a=function(A){return Object(y.a)(A,"Function")}},function(Z,f,g){"use strict";var y={}.toString,A=function(M,E){return y.call(M)==="[object "+E+"]"};f.a=A},function(Z,f,g){"use strict";var y=g(4),A=function(M){return Object(y.a)(M,"Number")};f.a=A},function(Z,f,g){"use strict";var y=function(A){return A==null};f.a=y},function(Z,f,g){var y=g(33),A=y.mix;Z.exports={assign:A}},function(Z,f,g){"use strict";var y=g(4);f.a=function(A){return Object(y.a)(A,"String")}},function(Z,f,g){"use strict";var y=g(15),A=g(4),M=function(E){if(!Object(y.a)(E)||!Object(A.a)(E,"Object"))return!1;if(Object.getPrototypeOf(E)===null)return!0;for(var C=E;Object.getPrototypeOf(C)!==null;)C=Object.getPrototypeOf(C);return Object.getPrototypeOf(E)===C};f.a=M},function(Z,f,g){"use strict";var y=g(6);f.a=function(A){return Object(y.a)(A)?"":A.toString()}},function(Z,f,g){var y=g(18),A=function(){function M(C,D){D===void 0&&(D={});var L=this;L.options=D,L.rootNode=y(C,D)}var E=M.prototype;return E.execute=function(){throw new Error("please override this method")},M}();Z.exports=A},function(Z,f,g){"use strict";var y=g(1),A=function(M,E){return Object(y.a)(M)?M.indexOf(E)>-1:!1};f.a=A},function(Z,f,g){"use strict";f.a=function(y){var A=typeof y;return y!==null&&A==="object"||A==="function"}},function(Z,f,g){"use strict";var y=g(2),A=g(1),M=function(E,C){if(!Object(A.a)(E))return E;var D=[];return Object(y.a)(E,function(L,O){C(L,O)&&D.push(L)}),D};f.a=M},function(Z,f,g){"use strict";var y=function(A){return typeof A=="object"&&A!==null};f.a=y},function(Z,f,g){"use strict";f.a=A;function y(M,E){for(var C in E)E.hasOwnProperty(C)&&C!=="constructor"&&E[C]!==void 0&&(M[C]=E[C])}function A(M,E,C,D){return E&&y(M,E),C&&y(M,C),D&&y(M,D),M}},function(Z,f,g){var y=g(30),A=["LR","RL","TB","BT","H","V"],M=["LR","RL","H"],E=function(L){return M.indexOf(L)>-1},C=A[0];Z.exports=function(D,L,O){var R=L.direction||C;if(L.isHorizontal=E(R),R&&A.indexOf(R)===-1)throw new TypeError("Invalid direction: "+R);if(R===A[0])O(D,L);else if(R===A[1])O(D,L),D.right2left();else if(R===A[2])O(D,L);else if(R===A[3])O(D,L),D.bottom2top();else if(R===A[4]||R===A[5]){var W=y(D,L),G=W.left,ie=W.right;O(G,L),O(ie,L),L.isHorizontal?G.right2left():G.bottom2top(),ie.translate(G.x-ie.x,G.y-ie.y),D.x=G.x,D.y=ie.y;var q=D.getBoundingBox();L.isHorizontal?q.top<0&&D.translate(0,-q.top):q.left<0&&D.translate(-q.left,0)}var we=L.fixedRoot;return we===void 0&&(we=!0),we&&D.translate(-(D.x+D.width/2+D.hgap),-(D.y+D.height/2+D.vgap)),D}},function(Z,f,g){var y=g(7),A=18,M=A*2,E=A,C={getId:function(R){return R.id||R.name},getPreH:function(R){return R.preH||0},getPreV:function(R){return R.preV||0},getHGap:function(R){return R.hgap||E},getVGap:function(R){return R.vgap||E},getChildren:function(R){return R.children},getHeight:function(R){return R.height||M},getWidth:function(R){var W=R.label||" ";return R.width||W.split("").length*A}};function D(O,R){var W=this;if(W.vgap=W.hgap=0,O instanceof D)return O;W.data=O;var G=R.getHGap(O),ie=R.getVGap(O);return W.preH=R.getPreH(O),W.preV=R.getPreV(O),W.width=R.getWidth(O),W.height=R.getHeight(O),W.width+=W.preH,W.height+=W.preV,W.id=R.getId(O),W.x=W.y=0,W.depth=0,W.children||(W.children=[]),W.addGap(G,ie),W}y.assign(D.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(R,W){var G=this;G.hgap+=R,G.vgap+=W,G.width+=2*R,G.height+=2*W},eachNode:function(R){for(var W=this,G=[W],ie;ie=G.shift();)R(ie),G=ie.children.concat(G)},DFTraverse:function(R){this.eachNode(R)},BFTraverse:function(R){for(var W=this,G=[W],ie;ie=G.shift();)R(ie),G=G.concat(ie.children)},getBoundingBox:function(){var R={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(W){R.left=Math.min(R.left,W.x),R.top=Math.min(R.top,W.y),R.width=Math.max(R.width,W.x+W.width),R.height=Math.max(R.height,W.y+W.height)}),R},translate:function(R,W){R===void 0&&(R=0),W===void 0&&(W=0),this.eachNode(function(G){G.x+=R,G.y+=W,G.x+=G.preH,G.y+=G.preV})},right2left:function(){var R=this,W=R.getBoundingBox();R.eachNode(function(G){G.x=G.x-(G.x-W.left)*2-G.width}),R.translate(W.width,0)},bottom2top:function(){var R=this,W=R.getBoundingBox();R.eachNode(function(G){G.y=G.y-(G.y-W.top)*2-G.height}),R.translate(0,W.height)}});function L(O,R,W){R===void 0&&(R={}),R=y.assign({},C,R);var G=new D(O,R),ie=[G],q;if(!W&&!O.collapsed){for(;q=ie.shift();)if(!q.data.collapsed){var we=R.getChildren(q.data),de=we?we.length:0;if(q.children=new Array(de),we&&de)for(var fe=0;fe<de;fe++){var F=new D(we[fe],R);q.children[fe]=F,ie.push(F),F.parent=q,F.depth=q.depth+1}}}return G}Z.exports=L},function(Z,f,g){"use strict";var y=g(6),A=g(20);function M(E,C){var D=Object(A.a)(C),L=D.length;if(Object(y.a)(E))return!L;for(var O=0;O<L;O+=1){var R=D[O];if(C[R]!==E[R]||!(R in E))return!1}return!0}f.a=M},function(Z,f,g){"use strict";var y=g(2),A=g(3),M=Object.keys?function(E){return Object.keys(E)}:function(E){var C=[];return Object(y.a)(E,function(D,L){Object(A.a)(E)&&L==="prototype"||C.push(L)}),C};f.a=M},function(Z,f,g){"use strict";var y=g(1),A=Array.prototype.splice,M=function(C,D){if(!Object(y.a)(C))return[];for(var L=C?D.length:0,O=L-1;L--;){var R=void 0,W=D[L];(L===O||W!==R)&&(R=W,A.call(C,W,1))}return C};f.a=M},function(Z,f,g){"use strict";var y=g(12),A=g(2),M=function(E){var C=[];return Object(A.a)(E,function(D){Object(y.a)(C,D)||C.push(D)}),C};f.a=M},function(Z,f,g){"use strict";var y=g(0),A=g(3),M=g(24),E=function(C,D){if(!D)return{0:C};if(!Object(A.a)(D)){var L=Object(y.a)(D)?D:D.replace(/\s+/g,"").split("*");D=function(R){for(var W="_",G=0,ie=L.length;G<ie;G++)W+=R[L[G]]&&R[L[G]].toString();return W}}var O=Object(M.a)(C,D);return O};f.a=E},function(Z,f,g){"use strict";var y=g(2),A=g(0),M=g(3),E=Object.prototype.hasOwnProperty;function C(D,L){if(!L||!Object(A.a)(D))return{};var O={},R=Object(M.a)(L)?L:function(G){return G[L]},W;return Object(y.a)(D,function(G){W=R(G),E.call(O,W)?O[W].push(G):O[W]=[G]}),O}f.a=C},function(Z,f,g){"use strict";f.a=function(y,A){return y.hasOwnProperty(A)}},function(Z,f,g){"use strict";var y=g(2),A=g(3),M=Object.values?function(E){return Object.values(E)}:function(E){var C=[];return Object(y.a)(E,function(D,L){Object(A.a)(E)&&L==="prototype"||C.push(D)}),C};f.a=M},function(Z,f,g){"use strict";var y={}.toString,A=function(M){return y.call(M).replace(/^\[object /,"").replace(/]$/,"")};f.a=A},function(Z,f,g){"use strict";var y=Object.prototype,A=function(M){var E=M&&M.constructor,C=typeof E=="function"&&E.prototype||y;return M===C};f.a=A},function(Z,f,g){"use strict";var y=g(15),A=g(1),M=g(8),E=function(C,D){if(C===D)return!0;if(!C||!D||Object(M.a)(C)||Object(M.a)(D))return!1;if(Object(A.a)(C)||Object(A.a)(D)){if(C.length!==D.length)return!1;for(var L=!0,O=0;O<C.length&&(L=E(C[O],D[O]),!!L);O++);return L}if(Object(y.a)(C)||Object(y.a)(D)){var R=Object.keys(C),W=Object.keys(D);if(R.length!==W.length)return!1;for(var L=!0,O=0;O<R.length&&(L=E(C[R[O]],D[R[O]]),!!L);O++);return L}return!1};f.a=E},function(Z,f,g){var y=g(18);Z.exports=function(A,M){for(var E=y(A.data,M,!0),C=y(A.data,M,!0),D=A.children.length,L=Math.round(D/2),O=M.getSide||function(ie,q){return q<L?"right":"left"},R=0;R<D;R++){var W=A.children[R],G=O(W,R);G==="right"?C.children.push(W):E.children.push(W)}return E.eachNode(function(ie){ie.isRoot()||(ie.side="left")}),C.eachNode(function(ie){ie.isRoot()||(ie.side="right")}),{left:E,right:C}}},function(Z,f,g){var y={compactBox:g(32),dendrogram:g(114),indented:g(116),mindmap:g(118)};Z.exports=y},function(Z,f,g){function y(R,W){R.prototype=Object.create(W.prototype),R.prototype.constructor=R,R.__proto__=W}var A=g(11),M=g(113),E=g(17),C=g(7),D=function(R){y(W,R);function W(){return R.apply(this,arguments)||this}var G=W.prototype;return G.execute=function(){var q=this;return E(q.rootNode,q.options,M)},W}(A),L={};function O(R,W){return W=C.assign({},L,W),new D(R,W).execute()}Z.exports=O},function(Z,f,g){"use strict";Object.defineProperty(f,"__esModule",{value:!0});var y=g(12);g.d(f,"contains",function(){return y.a}),g.d(f,"includes",function(){return y.a});var A=g(34);g.d(f,"difference",function(){return A.a});var M=g(35);g.d(f,"find",function(){return M.a});var E=g(36);g.d(f,"findIndex",function(){return E.a});var C=g(37);g.d(f,"firstValue",function(){return C.a});var D=g(38);g.d(f,"flatten",function(){return D.a});var L=g(39);g.d(f,"flattenDeep",function(){return L.a});var O=g(40);g.d(f,"getRange",function(){return O.a});var R=g(41);g.d(f,"pull",function(){return R.a});var W=g(21);g.d(f,"pullAt",function(){return W.a});var G=g(42);g.d(f,"reduce",function(){return G.a});var ie=g(43);g.d(f,"remove",function(){return ie.a});var q=g(44);g.d(f,"sortBy",function(){return q.a});var we=g(45);g.d(f,"union",function(){return we.a});var de=g(22);g.d(f,"uniq",function(){return de.a});var fe=g(46);g.d(f,"valuesOfKey",function(){return fe.a});var F=g(47);g.d(f,"head",function(){return F.a});var be=g(48);g.d(f,"last",function(){return be.a});var pe=g(49);g.d(f,"startsWith",function(){return pe.a});var ae=g(50);g.d(f,"endsWith",function(){return ae.a});var Q=g(14);g.d(f,"filter",function(){return Q.a});var I=g(51);g.d(f,"every",function(){return I.a});var oe=g(52);g.d(f,"some",function(){return oe.a});var te=g(53);g.d(f,"group",function(){return te.a});var ue=g(24);g.d(f,"groupBy",function(){return ue.a});var De=g(23);g.d(f,"groupToMap",function(){return De.a});var ve=g(54);g.d(f,"getWrapBehavior",function(){return ve.a});var Ne=g(55);g.d(f,"wrapBehavior",function(){return Ne.a});var Ge=g(56);g.d(f,"number2color",function(){return Ge.a});var $e=g(57);g.d(f,"parseRadius",function(){return $e.a});var Be=g(58);g.d(f,"clamp",function(){return Be.a});var mt=g(59);g.d(f,"fixedBase",function(){return mt.a});var Ot=g(60);g.d(f,"isDecimal",function(){return Ot.a});var kt=g(61);g.d(f,"isEven",function(){return kt.a});var Tt=g(62);g.d(f,"isInteger",function(){return Tt.a});var Jt=g(63);g.d(f,"isNegative",function(){return Jt.a});var Mn=g(64);g.d(f,"isNumberEqual",function(){return Mn.a});var Yt=g(65);g.d(f,"isOdd",function(){return Yt.a});var pn=g(66);g.d(f,"isPositive",function(){return pn.a});var gt=g(67);g.d(f,"maxBy",function(){return gt.a});var _t=g(68);g.d(f,"minBy",function(){return _t.a});var Gt=g(69);g.d(f,"mod",function(){return Gt.a});var Ft=g(70);g.d(f,"toDegree",function(){return Ft.a});var zt=g(71);g.d(f,"toInteger",function(){return zt.a});var en=g(72);g.d(f,"toRadian",function(){return en.a});var Bt=g(73);g.d(f,"forIn",function(){return Bt.a});var an=g(25);g.d(f,"has",function(){return an.a});var Di=g(74);g.d(f,"hasKey",function(){return Di.a});var _i=g(75);g.d(f,"hasValue",function(){return _i.a});var wi=g(20);g.d(f,"keys",function(){return wi.a});var On=g(19);g.d(f,"isMatch",function(){return On.a});var Pt=g(26);g.d(f,"values",function(){return Pt.a});var et=g(76);g.d(f,"lowerCase",function(){return et.a});var Ci=g(77);g.d(f,"lowerFirst",function(){return Ci.a});var li=g(78);g.d(f,"substitute",function(){return li.a});var kn=g(79);g.d(f,"upperCase",function(){return kn.a});var Ae=g(80);g.d(f,"upperFirst",function(){return Ae.a});var le=g(27);g.d(f,"getType",function(){return le.a});var ne=g(81);g.d(f,"isArguments",function(){return ne.a});var B=g(0);g.d(f,"isArray",function(){return B.a});var Me=g(1);g.d(f,"isArrayLike",function(){return Me.a});var Ce=g(82);g.d(f,"isBoolean",function(){return Ce.a});var lt=g(83);g.d(f,"isDate",function(){return lt.a});var vt=g(84);g.d(f,"isError",function(){return vt.a});var ft=g(3);g.d(f,"isFunction",function(){return ft.a});var ot=g(85);g.d(f,"isFinite",function(){return ot.a});var yt=g(6);g.d(f,"isNil",function(){return yt.a});var Ut=g(86);g.d(f,"isNull",function(){return Ut.a});var Fn=g(5);g.d(f,"isNumber",function(){return Fn.a});var Qn=g(13);g.d(f,"isObject",function(){return Qn.a});var Fe=g(15);g.d(f,"isObjectLike",function(){return Fe.a});var ct=g(9);g.d(f,"isPlainObject",function(){return ct.a});var ut=g(28);g.d(f,"isPrototype",function(){return ut.a});var jt=g(87);g.d(f,"isRegExp",function(){return jt.a});var qt=g(8);g.d(f,"isString",function(){return qt.a});var Dt=g(4);g.d(f,"isType",function(){return Dt.a});var hn=g(88);g.d(f,"isUndefined",function(){return hn.a});var Rt=g(89);g.d(f,"isElement",function(){return Rt.a});var nn=g(90);g.d(f,"requestAnimationFrame",function(){return nn.a});var ln=g(91);g.d(f,"clearAnimationFrame",function(){return ln.a});var _e=g(92);g.d(f,"augment",function(){return _e.a});var V=g(93);g.d(f,"clone",function(){return V.a});var H=g(94);g.d(f,"debounce",function(){return H.a});var T=g(95);g.d(f,"memoize",function(){return T.a});var z=g(96);g.d(f,"deepMix",function(){return z.a});var J=g(2);g.d(f,"each",function(){return J.a});var Pe=g(97);g.d(f,"extend",function(){return Pe.a});var Oe=g(98);g.d(f,"indexOf",function(){return Oe.a});var Ue=g(99);g.d(f,"isEmpty",function(){return Ue.a});var qe=g(29);g.d(f,"isEqual",function(){return qe.a});var Ct=g(100);g.d(f,"isEqualWith",function(){return Ct.a});var dt=g(101);g.d(f,"map",function(){return dt.a});var Et=g(102);g.d(f,"mapValues",function(){return Et.a});var Cn=g(16);g.d(f,"mix",function(){return Cn.a}),g.d(f,"assign",function(){return Cn.a});var st=g(103);g.d(f,"get",function(){return st.a});var Zt=g(104);g.d(f,"set",function(){return Zt.a});var zn=g(105);g.d(f,"pick",function(){return zn.a});var Lt=g(106);g.d(f,"throttle",function(){return Lt.a});var En=g(107);g.d(f,"toArray",function(){return En.a});var qn=g(10);g.d(f,"toString",function(){return qn.a});var ui=g(108);g.d(f,"uniqueId",function(){return ui.a});var Ai=g(109);g.d(f,"noop",function(){return Ai.a});var or=g(110);g.d(f,"identity",function(){return or.a});var Hn=g(111);g.d(f,"size",function(){return Hn.a});var Jn=g(112);g.d(f,"Cache",function(){return Jn.a})},function(Z,f,g){"use strict";var y=g(14),A=g(12),M=function(E,C){return C===void 0&&(C=[]),Object(y.a)(E,function(D){return!Object(A.a)(C,D)})};f.a=M},function(Z,f,g){"use strict";var y=g(3),A=g(19),M=g(0),E=g(9);function C(D,L){if(!Object(M.a)(D))return null;var O;if(Object(y.a)(L)&&(O=L),Object(E.a)(L)&&(O=function(W){return Object(A.a)(W,L)}),O){for(var R=0;R<D.length;R+=1)if(O(D[R]))return D[R]}return null}f.a=C},function(Z,f,g){"use strict";function y(A,M,E){E===void 0&&(E=0);for(var C=E;C<A.length;C++)if(M(A[C],C))return C;return-1}f.a=y},function(Z,f,g){"use strict";var y=g(6),A=g(0),M=function(E,C){for(var D=null,L=0;L<E.length;L++){var O=E[L],R=O[C];if(!Object(y.a)(R)){Object(A.a)(R)?D=R[0]:D=R;break}}return D};f.a=M},function(Z,f,g){"use strict";var y=g(0),A=function(M){if(!Object(y.a)(M))return[];for(var E=[],C=0;C<M.length;C++)E=E.concat(M[C]);return E};f.a=A},function(Z,f,g){"use strict";var y=g(0),A=function(M,E){if(E===void 0&&(E=[]),!Object(y.a)(M))E.push(M);else for(var C=0;C<M.length;C+=1)A(M[C],E);return E};f.a=A},function(Z,f,g){"use strict";var y=g(0),A=g(14),M=function(E){if(E=Object(A.a)(E,function(R){return!isNaN(R)}),!E.length)return{min:0,max:0};if(Object(y.a)(E[0])){for(var C=[],D=0;D<E.length;D++)C=C.concat(E[D]);E=C}var L=Math.max.apply(null,E),O=Math.min.apply(null,E);return{min:O,max:L}};f.a=M},function(Z,f,g){"use strict";var y=Array.prototype,A=y.splice,M=y.indexOf,E=function(C){for(var D=[],L=1;L<arguments.length;L++)D[L-1]=arguments[L];for(var O=0;O<D.length;O++)for(var R=D[O],W=-1;(W=M.call(C,R))>-1;)A.call(C,W,1);return C};f.a=E},function(Z,f,g){"use strict";var y=g(2),A=g(0),M=g(9),E=function(C,D,L){if(!Object(A.a)(C)&&!Object(M.a)(C))return C;var O=L;return Object(y.a)(C,function(R,W){O=D(O,R,W)}),O};f.a=E},function(Z,f,g){"use strict";var y=g(1),A=g(21),M=function(E,C){var D=[];if(!Object(y.a)(E))return D;for(var L=-1,O=[],R=E.length;++L<R;){var W=E[L];C(W,L,E)&&(D.push(W),O.push(L))}return Object(A.a)(E,O),D};f.a=M},function(Z,f,g){"use strict";var y=g(0),A=g(8),M=g(3);function E(C,D){var L;if(Object(M.a)(D))L=function(R,W){return D(R)-D(W)};else{var O=[];Object(A.a)(D)?O.push(D):Object(y.a)(D)&&(O=D),L=function(R,W){for(var G=0;G<O.length;G+=1){var ie=O[G];if(R[ie]>W[ie])return 1;if(R[ie]<W[ie])return-1}return 0}}return C.sort(L),C}f.a=E},function(Z,f,g){"use strict";var y=g(22),A=function(){for(var M=[],E=0;E<arguments.length;E++)M[E]=arguments[E];return Object(y.a)([].concat.apply([],M))};f.a=A},function(Z,f,g){"use strict";var y=g(2),A=g(0),M=g(6);f.a=function(E,C){var D=[],L={};return E.forEach(function(O){var R=O[C];Object(M.a)(R)||(Object(A.a)(R)||(R=[R]),Object(y.a)(R,function(W){L[W]||(D.push(W),L[W]=!0)}))}),D}},function(Z,f,g){"use strict";f.a=A;var y=g(1);function A(M){if(Object(y.a)(M))return M[0]}},function(Z,f,g){"use strict";f.a=A;var y=g(1);function A(M){if(Object(y.a)(M)){var E=M;return E[E.length-1]}}},function(Z,f,g){"use strict";var y=g(0),A=g(8);function M(E,C){return Object(y.a)(E)||Object(A.a)(E)?E[0]===C:!1}f.a=M},function(Z,f,g){"use strict";var y=g(0),A=g(8);function M(E,C){return Object(y.a)(E)||Object(A.a)(E)?E[E.length-1]===C:!1}f.a=M},function(Z,f,g){"use strict";var y=function(A,M){for(var E=0;E<A.length;E++)if(!M(A[E],E))return!1;return!0};f.a=y},function(Z,f,g){"use strict";var y=function(A,M){for(var E=0;E<A.length;E++)if(M(A[E],E))return!0;return!1};f.a=y},function(Z,f,g){"use strict";var y=g(23);f.a=function(A,M){if(!M)return[A];var E=Object(y.a)(A,M),C=[];for(var D in E)C.push(E[D]);return C}},function(Z,f,g){"use strict";function y(A,M){return A["_wrap_"+M]}f.a=y},function(Z,f,g){"use strict";function y(A,M){if(A["_wrap_"+M])return A["_wrap_"+M];var E=function(C){A[M](C)};return A["_wrap_"+M]=E,E}f.a=y},function(Z,f,g){"use strict";var y={};function A(M){var E=y[M];if(!E){for(var C=M.toString(16),D=C.length;D<6;D++)C="0"+C;E="#"+C,y[M]=E}return E}f.a=A},function(Z,f,g){"use strict";var y=g(0);function A(M){var E=0,C=0,D=0,L=0;return Object(y.a)(M)?M.length===1?E=C=D=L=M[0]:M.length===2?(E=D=M[0],C=L=M[1]):M.length===3?(E=M[0],C=L=M[1],D=M[2]):(E=M[0],C=M[1],D=M[2],L=M[3]):E=C=D=L=M,{r1:E,r2:C,r3:D,r4:L}}f.a=A},function(Z,f,g){"use strict";var y=function(A,M,E){return A<M?M:A>E?E:A};f.a=y},function(Z,f,g){"use strict";var y=function(A,M){var E=M.toString(),C=E.indexOf(".");if(C===-1)return Math.round(A);var D=E.substr(C+1).length;return D>20&&(D=20),parseFloat(A.toFixed(D))};f.a=y},function(Z,f,g){"use strict";var y=g(5),A=function(M){return Object(y.a)(M)&&M%1!=0};f.a=A},function(Z,f,g){"use strict";var y=g(5),A=function(M){return Object(y.a)(M)&&M%2==0};f.a=A},function(Z,f,g){"use strict";var y=g(5),A=Number.isInteger?Number.isInteger:function(M){return Object(y.a)(M)&&M%1==0};f.a=A},function(Z,f,g){"use strict";var y=g(5),A=function(M){return Object(y.a)(M)&&M<0};f.a=A},function(Z,f,g){"use strict";f.a=A;var y=1e-5;function A(M,E,C){return C===void 0&&(C=y),Math.abs(M-E)<C}},function(Z,f,g){"use strict";var y=g(5),A=function(M){return Object(y.a)(M)&&M%2!=0};f.a=A},function(Z,f,g){"use strict";var y=g(5),A=function(M){return Object(y.a)(M)&&M>0};f.a=A},function(Z,f,g){"use strict";var y=g(2),A=g(0),M=g(3);f.a=function(E,C){if(!!Object(A.a)(E)){var D=E[0],L;Object(M.a)(C)?L=C(E[0]):L=E[0][C];var O;return Object(y.a)(E,function(R){Object(M.a)(C)?O=C(R):O=R[C],O>L&&(D=R,L=O)}),D}}},function(Z,f,g){"use strict";var y=g(2),A=g(0),M=g(3);f.a=function(E,C){if(!!Object(A.a)(E)){var D=E[0],L;Object(M.a)(C)?L=C(E[0]):L=E[0][C];var O;return Object(y.a)(E,function(R){Object(M.a)(C)?O=C(R):O=R[C],O<L&&(D=R,L=O)}),D}}},function(Z,f,g){"use strict";var y=function(A,M){return(A%M+M)%M};f.a=y},function(Z,f,g){"use strict";var y=180/Math.PI,A=function(M){return y*M};f.a=A},function(Z,f,g){"use strict";f.a=parseInt},function(Z,f,g){"use strict";var y=Math.PI/180,A=function(M){return y*M};f.a=A},function(Z,f,g){"use strict";var y=g(2);f.a=y.a},function(Z,f,g){"use strict";var y=g(25);f.a=y.a},function(Z,f,g){"use strict";var y=g(12),A=g(26);f.a=function(M,E){return Object(y.a)(Object(A.a)(M),E)}},function(Z,f,g){"use strict";var y=g(10),A=function(M){return Object(y.a)(M).toLowerCase()};f.a=A},function(Z,f,g){"use strict";var y=g(10),A=function(M){var E=Object(y.a)(M);return E.charAt(0).toLowerCase()+E.substring(1)};f.a=A},function(Z,f,g){"use strict";function y(A,M){return!A||!M?A:A.replace(/\\?\{([^{}]+)\}/g,function(E,C){return E.charAt(0)==="\\"?E.slice(1):M[C]===void 0?"":M[C]})}f.a=y},function(Z,f,g){"use strict";var y=g(10),A=function(M){return Object(y.a)(M).toUpperCase()};f.a=A},function(Z,f,g){"use strict";var y=g(10),A=function(M){var E=Object(y.a)(M);return E.charAt(0).toUpperCase()+E.substring(1)};f.a=A},function(Z,f,g){"use strict";var y=g(4),A=function(M){return Object(y.a)(M,"Arguments")};f.a=A},function(Z,f,g){"use strict";var y=g(4),A=function(M){return Object(y.a)(M,"Boolean")};f.a=A},function(Z,f,g){"use strict";var y=g(4),A=function(M){return Object(y.a)(M,"Date")};f.a=A},function(Z,f,g){"use strict";var y=g(4),A=function(M){return Object(y.a)(M,"Error")};f.a=A},function(Z,f,g){"use strict";var y=g(5);f.a=function(A){return Object(y.a)(A)&&isFinite(A)}},function(Z,f,g){"use strict";var y=function(A){return A===null};f.a=y},function(Z,f,g){"use strict";var y=g(4),A=function(M){return Object(y.a)(M,"RegExp")};f.a=A},function(Z,f,g){"use strict";var y=function(A){return A===void 0};f.a=y},function(Z,f,g){"use strict";var y=function(A){return A instanceof Element||A instanceof HTMLDocument};f.a=y},function(Z,f,g){"use strict";f.a=y;function y(A){var M=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(E){return setTimeout(E,16)};return M(A)}},function(Z,f,g){"use strict";f.a=y;function y(A){var M=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;M(A)}},function(Z,f,g){"use strict";var y=g(16),A=g(3),M=function(){for(var E=[],C=0;C<arguments.length;C++)E[C]=arguments[C];for(var D=E[0],L=1;L<E.length;L++){var O=E[L];Object(A.a)(O)&&(O=O.prototype),Object(y.a)(D.prototype,O)}};f.a=M},function(Z,f,g){"use strict";var y=g(0),A=function(M){if(typeof M!="object"||M===null)return M;var E;if(Object(y.a)(M)){E=[];for(var C=0,D=M.length;C<D;C++)typeof M[C]=="object"&&M[C]!=null?E[C]=A(M[C]):E[C]=M[C]}else{E={};for(var L in M)typeof M[L]=="object"&&M[L]!=null?E[L]=A(M[L]):E[L]=M[L]}return E};f.a=A},function(Z,f,g){"use strict";function y(A,M,E){var C;return function(){var D=this,L=arguments,O=function(){C=null,E||A.apply(D,L)},R=E&&!C;clearTimeout(C),C=setTimeout(O,M),R&&A.apply(D,L)}}f.a=y},function(Z,f,g){"use strict";var y=g(3);f.a=function(A,M){if(!Object(y.a)(A))throw new TypeError("Expected a function");var E=function(){for(var C=[],D=0;D<arguments.length;D++)C[D]=arguments[D];var L=M?M.apply(this,C):C[0],O=E.cache;if(O.has(L))return O.get(L);var R=A.apply(this,C);return O.set(L,R),R};return E.cache=new Map,E}},function(Z,f,g){"use strict";var y=g(0),A=g(9),M=5;function E(D,L,O,R){O=O||0,R=R||M;for(var W in L)if(L.hasOwnProperty(W)){var G=L[W];G!==null&&Object(A.a)(G)?(Object(A.a)(D[W])||(D[W]={}),O<R?E(D[W],G,O+1,R):D[W]=L[W]):Object(y.a)(G)?(D[W]=[],D[W]=D[W].concat(G)):G!==void 0&&(D[W]=G)}}var C=function(D){for(var L=[],O=1;O<arguments.length;O++)L[O-1]=arguments[O];for(var R=0;R<L.length;R+=1)E(D,L[R]);return D};f.a=C},function(Z,f,g){"use strict";var y=g(16),A=g(3),M=function(E,C,D,L){Object(A.a)(C)||(D=C,C=E,E=function(){});var O=Object.create?function(W,G){return Object.create(W,{constructor:{value:G}})}:function(W,G){function ie(){}ie.prototype=W;var q=new ie;return q.constructor=G,q},R=O(C.prototype,E);return E.prototype=Object(y.a)(R,E.prototype),E.superclass=O(C.prototype,C),Object(y.a)(R,D),Object(y.a)(E,L),E};f.a=M},function(Z,f,g){"use strict";var y=g(1),A=function(M,E){if(!Object(y.a)(M))return-1;var C=Array.prototype.indexOf;if(C)return C.call(M,E);for(var D=-1,L=0;L<M.length;L++)if(M[L]===E){D=L;break}return D};f.a=A},function(Z,f,g){"use strict";var y=g(6),A=g(1),M=g(27),E=g(28),C=Object.prototype.hasOwnProperty;function D(L){if(Object(y.a)(L))return!0;if(Object(A.a)(L))return!L.length;var O=Object(M.a)(L);if(O==="Map"||O==="Set")return!L.size;if(Object(E.a)(L))return!Object.keys(L).length;for(var R in L)if(C.call(L,R))return!1;return!0}f.a=D},function(Z,f,g){"use strict";var y=g(3),A=g(29);f.a=function(M,E,C){return Object(y.a)(C)?!!C(M,E):Object(A.a)(M,E)}},function(Z,f,g){"use strict";var y=g(2),A=g(1),M=function(E,C){if(!Object(A.a)(E))return E;var D=[];return Object(y.a)(E,function(L,O){D.push(C(L,O))}),D};f.a=M},function(Z,f,g){"use strict";var y=g(6),A=g(13),M=function(E){return E};f.a=function(E,C){C===void 0&&(C=M);var D={};return Object(A.a)(E)&&!Object(y.a)(E)&&Object.keys(E).forEach(function(L){D[L]=C(E[L],L)}),D}},function(Z,f,g){"use strict";var y=g(8);f.a=function(A,M,E){for(var C=0,D=Object(y.a)(M)?M.split("."):M;A&&C<D.length;)A=A[D[C++]];return A===void 0||C<D.length?E:A}},function(Z,f,g){"use strict";var y=g(13),A=g(8),M=g(5);f.a=function(E,C,D){var L=E,O=Object(A.a)(C)?C.split("."):C;return O.forEach(function(R,W){W<O.length-1?(Object(y.a)(L[R])||(L[R]=Object(M.a)(O[W+1])?[]:{}),L=L[R]):L[R]=D}),E}},function(Z,f,g){"use strict";var y=g(2),A=g(9),M=Object.prototype.hasOwnProperty;f.a=function(E,C){if(E===null||!Object(A.a)(E))return{};var D={};return Object(y.a)(C,function(L){M.call(E,L)&&(D[L]=E[L])}),D}},function(Z,f,g){"use strict";f.a=function(y,A,M){var E,C,D,L,O=0;M||(M={});var R=function(){O=M.leading===!1?0:Date.now(),E=null,L=y.apply(C,D),E||(C=D=null)},W=function(){var G=Date.now();!O&&M.leading===!1&&(O=G);var ie=A-(G-O);return C=this,D=arguments,ie<=0||ie>A?(E&&(clearTimeout(E),E=null),O=G,L=y.apply(C,D),E||(C=D=null)):!E&&M.trailing!==!1&&(E=setTimeout(R,ie)),L};return W.cancel=function(){clearTimeout(E),O=0,E=C=D=null},W}},function(Z,f,g){"use strict";var y=g(1);f.a=function(A){return Object(y.a)(A)?Array.prototype.slice.call(A):[]}},function(Z,f,g){"use strict";var y={};f.a=function(A){return A=A||"g",y[A]?y[A]+=1:y[A]=1,A+y[A]}},function(Z,f,g){"use strict";f.a=function(){}},function(Z,f,g){"use strict";f.a=function(y){return y}},function(Z,f,g){"use strict";f.a=M;var y=g(6),A=g(1);function M(E){return Object(y.a)(E)?0:Object(A.a)(E)?E.length:Object.keys(E).length}},function(Z,f,g){"use strict";var y=function(){function A(){this.map={}}return A.prototype.has=function(M){return this.map[M]!==void 0},A.prototype.get=function(M,E){var C=this.map[M];return C===void 0?E:C},A.prototype.set=function(M,E){this.map[M]=E},A.prototype.clear=function(){this.map={}},A.prototype.delete=function(M){delete this.map[M]},A.prototype.size=function(){return Object.keys(this.map).length},A}();f.a=y},function(Z,f){function g(D,L,O,R){R===void 0&&(R=[]);var W=this;W.w=D||0,W.h=L||0,W.y=O||0,W.x=0,W.c=R||[],W.cs=R.length,W.prelim=0,W.mod=0,W.shift=0,W.change=0,W.tl=null,W.tr=null,W.el=null,W.er=null,W.msel=0,W.mser=0}g.fromNode=function(D,L){if(!D)return null;var O=[];return D.children.forEach(function(R){O.push(g.fromNode(R,L))}),L?new g(D.height,D.width,D.x,O):new g(D.width,D.height,D.y,O)};function y(D,L,O){O?D.y+=L:D.x+=L,D.children.forEach(function(R){y(R,L,O)})}function A(D,L){var O=L?D.y:D.x;return D.children.forEach(function(R){O=Math.min(A(R,L),O)}),O}function M(D,L){var O=A(D,L);y(D,-O,L)}function E(D,L,O){O?L.y=D.x:L.x=D.x,D.c.forEach(function(R,W){E(R,L.children[W],O)})}function C(D,L,O){O===void 0&&(O=0),L?(D.x=O,O+=D.width):(D.y=O,O+=D.height),D.children.forEach(function(R){C(R,L,O)})}Z.exports=function(D,L){L===void 0&&(L={});var O=L.isHorizontal;function R(te){if(te.cs===0){W(te);return}R(te.c[0]);for(var ue=I(de(te.c[0].el),0,null),De=1;De<te.cs;++De){R(te.c[De]);var ve=de(te.c[De].er);G(te,De,ue),ue=I(ve,De,ue)}be(te),W(te)}function W(te){te.cs===0?(te.el=te,te.er=te,te.msel=te.mser=0):(te.el=te.c[0].el,te.msel=te.c[0].msel,te.er=te.c[te.cs-1].er,te.mser=te.c[te.cs-1].mser)}function G(te,ue,De){for(var ve=te.c[ue-1],Ne=ve.mod,Ge=te.c[ue],$e=Ge.mod;ve!==null&&Ge!==null;){de(ve)>De.low&&(De=De.nxt);var Be=Ne+ve.prelim+ve.w-($e+Ge.prelim);Be>0&&($e+=Be,ie(te,ue,De.index,Be));var mt=de(ve),Ot=de(Ge);mt<=Ot&&(ve=we(ve),ve!==null&&(Ne+=ve.mod)),mt>=Ot&&(Ge=q(Ge),Ge!==null&&($e+=Ge.mod))}!ve&&!!Ge?fe(te,ue,Ge,$e):!!ve&&!Ge&&F(te,ue,ve,Ne)}function ie(te,ue,De,ve){te.c[ue].mod+=ve,te.c[ue].msel+=ve,te.c[ue].mser+=ve,ae(te,ue,De,ve)}function q(te){return te.cs===0?te.tl:te.c[0]}function we(te){return te.cs===0?te.tr:te.c[te.cs-1]}function de(te){return te.y+te.h}function fe(te,ue,De,ve){var Ne=te.c[0].el;Ne.tl=De;var Ge=ve-De.mod-te.c[0].msel;Ne.mod+=Ge,Ne.prelim-=Ge,te.c[0].el=te.c[ue].el,te.c[0].msel=te.c[ue].msel}function F(te,ue,De,ve){var Ne=te.c[ue].er;Ne.tr=De;var Ge=ve-De.mod-te.c[ue].mser;Ne.mod+=Ge,Ne.prelim-=Ge,te.c[ue].er=te.c[ue-1].er,te.c[ue].mser=te.c[ue-1].mser}function be(te){te.prelim=(te.c[0].prelim+te.c[0].mod+te.c[te.cs-1].mod+te.c[te.cs-1].prelim+te.c[te.cs-1].w)/2-te.w/2}function pe(te,ue){ue+=te.mod,te.x=te.prelim+ue,Q(te);for(var De=0;De<te.cs;De++)pe(te.c[De],ue)}function ae(te,ue,De,ve){if(De!==ue-1){var Ne=ue-De;te.c[De+1].shift+=ve/Ne,te.c[ue].shift-=ve/Ne,te.c[ue].change-=ve-ve/Ne}}function Q(te){for(var ue=0,De=0,ve=0;ve<te.cs;ve++)ue+=te.c[ve].shift,De+=ue+te.c[ve].change,te.c[ve].mod+=De}function I(te,ue,De){for(;De!==null&&te>=De.low;)De=De.nxt;return{low:te,index:ue,nxt:De}}C(D,O);var oe=g.fromNode(D,O);return R(oe),pe(oe,0),E(oe,D,O),M(D,O),D}},function(Z,f,g){function y(R,W){R.prototype=Object.create(W.prototype),R.prototype.constructor=R,R.__proto__=W}var A=g(11),M=g(115),E=g(17),C=g(7),D=function(R){y(W,R);function W(){return R.apply(this,arguments)||this}var G=W.prototype;return G.execute=function(){var q=this;return q.rootNode.width=0,E(q.rootNode,q.options,M)},W}(A),L={};function O(R,W){return W=C.assign({},L,W),new D(R,W).execute()}Z.exports=O},function(Z,f,g){var y=g(7);function A(C,D){C===void 0&&(C=0),D===void 0&&(D=[]);var L=this;L.x=L.y=0,L.leftChild=L.rightChild=null,L.height=0,L.children=D}var M={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function E(C,D,L){L?(D.x=C.x,D.y=C.y):(D.x=C.y,D.y=C.x),C.children.forEach(function(O,R){E(O,D.children[R],L)})}Z.exports=function(C,D){D===void 0&&(D={}),D=y.assign({},M,D);var L=0;function O(q){if(!q)return null;q.width=0,q.depth&&q.depth>L&&(L=q.depth);var we=q.children,de=we.length,fe=new A(q.height,[]);return we.forEach(function(F,be){var pe=O(F);fe.children.push(pe),be===0&&(fe.leftChild=pe),be===de-1&&(fe.rightChild=pe)}),fe.originNode=q,fe.isLeaf=q.isLeaf(),fe}function R(q){if(q.isLeaf||q.children.length===0)q.drawingDepth=L;else{var we=q.children.map(function(fe){return R(fe)}),de=Math.min.apply(null,we);q.drawingDepth=de-1}return q.drawingDepth}var W;function G(q){q.x=q.drawingDepth*D.rankSep,q.isLeaf?(q.y=0,W&&(q.y=W.y+W.height+D.nodeSep,q.originNode.parent!==W.originNode.parent&&(q.y+=D.subTreeSep)),W=q):(q.children.forEach(function(we){G(we)}),q.y=(q.leftChild.y+q.rightChild.y)/2)}var ie=O(C);return R(ie),G(ie),E(ie,C,D.isHorizontal),C}},function(Z,f,g){function y(G,ie){G.prototype=Object.create(ie.prototype),G.prototype.constructor=G,G.__proto__=ie}var A=g(11),M=g(117),E=g(30),C=g(7),D=["LR","RL","H"],L=D[0],O=function(G){y(ie,G);function ie(){return G.apply(this,arguments)||this}var q=ie.prototype;return q.execute=function(){var de=this,fe=de.options,F=de.rootNode;fe.isHorizontal=!0;var be=fe.indent,pe=be===void 0?20:be,ae=fe.dropCap,Q=ae===void 0?!0:ae,I=fe.direction||L;if(I&&D.indexOf(I)===-1)throw new TypeError("Invalid direction: "+I);if(I===D[0])M(F,pe,Q);else if(I===D[1])M(F,pe,Q),F.right2left();else if(I===D[2]){var oe=E(F,fe),te=oe.left,ue=oe.right;M(te,pe,Q),te.right2left(),M(ue,pe,Q);var De=te.getBoundingBox();ue.translate(De.width,0),F.x=ue.x-F.width/2}return F},ie}(A),R={};function W(G,ie){return ie=C.assign({},R,ie),new O(G,ie).execute()}Z.exports=W},function(Z,f){function g(y,A,M,E){var C=typeof M=="function"?M(y):M*y.depth;if(!E)try{if(y.id===y.parent.children[0].id){y.x+=C,y.y=A?A.y:0;return}}catch(D){}y.x+=C,y.y=A?A.y+A.height:0}Z.exports=function(y,A,M){var E=null;y.eachNode(function(C){g(C,E,A,M),E=C})}},function(Z,f,g){function y(R,W){R.prototype=Object.create(W.prototype),R.prototype.constructor=R,R.__proto__=W}var A=g(11),M=g(119),E=g(17),C=g(7),D=function(R){y(W,R);function W(){return R.apply(this,arguments)||this}var G=W.prototype;return G.execute=function(){var q=this;return E(q.rootNode,q.options,M)},W}(A),L={};function O(R,W){return W=C.assign({},L,W),new D(R,W).execute()}Z.exports=O},function(Z,f,g){var y=g(7);function A(C,D){var L=0;return C.children.length?C.children.forEach(function(O){L+=A(O,D)}):L=C.height,C._subTreeSep=D.getSubTreeSep(C.data),C.totalHeight=Math.max(C.height,L)+2*C._subTreeSep,C.totalHeight}function M(C){var D=C.children,L=D.length;if(L){D.forEach(function(q){M(q)});var O=D[0],R=D[L-1],W=R.y-O.y+R.height,G=0;if(D.forEach(function(q){G+=q.totalHeight}),W>C.height)C.y=O.y+W/2-C.height/2;else if(D.length!==1||C.height>G){var ie=C.y+(C.height-W)/2-O.y;D.forEach(function(q){q.translate(0,ie)})}else C.y=(O.y+O.height/2+R.y+R.height/2)/2-C.height/2}}var E={getSubTreeSep:function(){return 0}};Z.exports=function(C,D){D===void 0&&(D={}),D=y.assign({},E,D),C.parent={x:0,width:0,height:0,y:0},C.BFTraverse(function(L){L.x=L.parent.x+L.parent.width}),C.parent=null,A(C,D),C.startY=0,C.y=C.totalHeight/2-C.height/2,C.eachNode(function(L){var O=L.children,R=O.length;if(R){var W=O[0];if(W.startY=L.startY+L._subTreeSep,R===1)W.y=L.y+L.height/2-W.height/2;else{W.y=W.startY+W.totalHeight/2-W.height/2;for(var G=1;G<R;G++){var ie=O[G];ie.startY=O[G-1].startY+O[G-1].totalHeight,ie.y=ie.startY+ie.totalHeight/2-ie.height/2}}}}),M(C)}}])})},6340:(w,Z,f)=>{"use strict";f.r(Z),f.d(Z,{ext:()=>M,mat3:()=>g,vec2:()=>y,vec3:()=>A});var g={};f.r(g),f.d(g,{add:()=>Tt,adjoint:()=>ae,clone:()=>q,copy:()=>we,create:()=>G,determinant:()=>Q,equals:()=>gt,exactEquals:()=>pn,frob:()=>kt,fromMat2d:()=>Ge,fromMat4:()=>ie,fromQuat:()=>$e,fromRotation:()=>ve,fromScaling:()=>Ne,fromTranslation:()=>De,fromValues:()=>de,identity:()=>F,invert:()=>pe,mul:()=>_t,multiply:()=>I,multiplyScalar:()=>Mn,multiplyScalarAndAdd:()=>Yt,normalFromMat4:()=>Be,projection:()=>mt,rotate:()=>te,scale:()=>ue,set:()=>fe,str:()=>Ot,sub:()=>Gt,subtract:()=>Jt,translate:()=>oe,transpose:()=>be});var y={};f.r(y),f.d(y,{add:()=>Di,angle:()=>qt,ceil:()=>Pt,clone:()=>zt,copy:()=>Bt,create:()=>Ft,cross:()=>yt,dist:()=>T,distance:()=>ne,div:()=>H,divide:()=>On,dot:()=>ot,equals:()=>nn,exactEquals:()=>Rt,floor:()=>et,forEach:()=>Pe,fromValues:()=>en,inverse:()=>vt,len:()=>ln,length:()=>Me,lerp:()=>Ut,max:()=>li,min:()=>Ci,mul:()=>V,multiply:()=>wi,negate:()=>lt,normalize:()=>ft,random:()=>Fn,rotate:()=>jt,round:()=>kn,scale:()=>Ae,scaleAndAdd:()=>le,set:()=>an,sqrDist:()=>z,sqrLen:()=>J,squaredDistance:()=>B,squaredLength:()=>Ce,str:()=>hn,sub:()=>_e,subtract:()=>_i,transformMat2:()=>Qn,transformMat2d:()=>Fe,transformMat3:()=>ct,transformMat4:()=>ut,zero:()=>Dt});var A={};f.r(A),f.d(A,{add:()=>Cn,angle:()=>mr,bezier:()=>lr,ceil:()=>Lt,clone:()=>Ue,copy:()=>dt,create:()=>Oe,cross:()=>Bi,dist:()=>Oa,distance:()=>Jn,div:()=>Lo,divide:()=>zn,dot:()=>Kn,equals:()=>va,exactEquals:()=>Jo,floor:()=>En,forEach:()=>Ls,fromValues:()=>Ct,hermite:()=>Vi,inverse:()=>Bn,len:()=>ao,length:()=>qe,lerp:()=>br,max:()=>ui,min:()=>qn,mul:()=>$t,multiply:()=>Zt,negate:()=>Ht,normalize:()=>Xn,random:()=>Qi,rotateX:()=>Ss,rotateY:()=>Si,rotateZ:()=>Lr,round:()=>Ai,scale:()=>or,scaleAndAdd:()=>Hn,set:()=>Et,sqrDist:()=>ea,sqrLen:()=>_a,squaredDistance:()=>Ii,squaredLength:()=>ti,str:()=>ei,sub:()=>Es,subtract:()=>st,transformMat3:()=>Rn,transformMat4:()=>gi,transformQuat:()=>vs,zero:()=>Wr});var M={};f.r(M),f.d(M,{angleTo:()=>Ya,direction:()=>Ga,leftRotate:()=>ya,leftScale:()=>Ka,leftTranslate:()=>ta,transform:()=>Pl,vertical:()=>bc});var E=1e-6,C=typeof Float32Array!="undefined"?Float32Array:Array,D=Math.random;function L(se){C=se}var O=Math.PI/180;function R(se){return se*O}function W(se,Ie){return Math.abs(se-Ie)<=E*Math.max(1,Math.abs(se),Math.abs(Ie))}Math.hypot||(Math.hypot=function(){for(var se=0,Ie=arguments.length;Ie--;)se+=arguments[Ie]*arguments[Ie];return Math.sqrt(se)});function G(){var se=new C(9);return C!=Float32Array&&(se[1]=0,se[2]=0,se[3]=0,se[5]=0,se[6]=0,se[7]=0),se[0]=1,se[4]=1,se[8]=1,se}function ie(se,Ie){return se[0]=Ie[0],se[1]=Ie[1],se[2]=Ie[2],se[3]=Ie[4],se[4]=Ie[5],se[5]=Ie[6],se[6]=Ie[8],se[7]=Ie[9],se[8]=Ie[10],se}function q(se){var Ie=new C(9);return Ie[0]=se[0],Ie[1]=se[1],Ie[2]=se[2],Ie[3]=se[3],Ie[4]=se[4],Ie[5]=se[5],Ie[6]=se[6],Ie[7]=se[7],Ie[8]=se[8],Ie}function we(se,Ie){return se[0]=Ie[0],se[1]=Ie[1],se[2]=Ie[2],se[3]=Ie[3],se[4]=Ie[4],se[5]=Ie[5],se[6]=Ie[6],se[7]=Ie[7],se[8]=Ie[8],se}function de(se,Ie,Je,Wt,gn,Nn,$n,Un,Ei){var Ti=new C(9);return Ti[0]=se,Ti[1]=Ie,Ti[2]=Je,Ti[3]=Wt,Ti[4]=gn,Ti[5]=Nn,Ti[6]=$n,Ti[7]=Un,Ti[8]=Ei,Ti}function fe(se,Ie,Je,Wt,gn,Nn,$n,Un,Ei,Ti){return se[0]=Ie,se[1]=Je,se[2]=Wt,se[3]=gn,se[4]=Nn,se[5]=$n,se[6]=Un,se[7]=Ei,se[8]=Ti,se}function F(se){return se[0]=1,se[1]=0,se[2]=0,se[3]=0,se[4]=1,se[5]=0,se[6]=0,se[7]=0,se[8]=1,se}function be(se,Ie){if(se===Ie){var Je=Ie[1],Wt=Ie[2],gn=Ie[5];se[1]=Ie[3],se[2]=Ie[6],se[3]=Je,se[5]=Ie[7],se[6]=Wt,se[7]=gn}else se[0]=Ie[0],se[1]=Ie[3],se[2]=Ie[6],se[3]=Ie[1],se[4]=Ie[4],se[5]=Ie[7],se[6]=Ie[2],se[7]=Ie[5],se[8]=Ie[8];return se}function pe(se,Ie){var Je=Ie[0],Wt=Ie[1],gn=Ie[2],Nn=Ie[3],$n=Ie[4],Un=Ie[5],Ei=Ie[6],Ti=Ie[7],Hi=Ie[8],Mi=Hi*$n-Un*Ti,xi=-Hi*Nn+Un*Ei,Ir=Ti*Nn-$n*Ei,xr=Je*Mi+Wt*xi+gn*Ir;return xr?(xr=1/xr,se[0]=Mi*xr,se[1]=(-Hi*Wt+gn*Ti)*xr,se[2]=(Un*Wt-gn*$n)*xr,se[3]=xi*xr,se[4]=(Hi*Je-gn*Ei)*xr,se[5]=(-Un*Je+gn*Nn)*xr,se[6]=Ir*xr,se[7]=(-Ti*Je+Wt*Ei)*xr,se[8]=($n*Je-Wt*Nn)*xr,se):null}function ae(se,Ie){var Je=Ie[0],Wt=Ie[1],gn=Ie[2],Nn=Ie[3],$n=Ie[4],Un=Ie[5],Ei=Ie[6],Ti=Ie[7],Hi=Ie[8];return se[0]=$n*Hi-Un*Ti,se[1]=gn*Ti-Wt*Hi,se[2]=Wt*Un-gn*$n,se[3]=Un*Ei-Nn*Hi,se[4]=Je*Hi-gn*Ei,se[5]=gn*Nn-Je*Un,se[6]=Nn*Ti-$n*Ei,se[7]=Wt*Ei-Je*Ti,se[8]=Je*$n-Wt*Nn,se}function Q(se){var Ie=se[0],Je=se[1],Wt=se[2],gn=se[3],Nn=se[4],$n=se[5],Un=se[6],Ei=se[7],Ti=se[8];return Ie*(Ti*Nn-$n*Ei)+Je*(-Ti*gn+$n*Un)+Wt*(Ei*gn-Nn*Un)}function I(se,Ie,Je){var Wt=Ie[0],gn=Ie[1],Nn=Ie[2],$n=Ie[3],Un=Ie[4],Ei=Ie[5],Ti=Ie[6],Hi=Ie[7],Mi=Ie[8],xi=Je[0],Ir=Je[1],xr=Je[2],Or=Je[3],x=Je[4],$=Je[5],re=Je[6],ge=Je[7],Re=Je[8];return se[0]=xi*Wt+Ir*$n+xr*Ti,se[1]=xi*gn+Ir*Un+xr*Hi,se[2]=xi*Nn+Ir*Ei+xr*Mi,se[3]=Or*Wt+x*$n+$*Ti,se[4]=Or*gn+x*Un+$*Hi,se[5]=Or*Nn+x*Ei+$*Mi,se[6]=re*Wt+ge*$n+Re*Ti,se[7]=re*gn+ge*Un+Re*Hi,se[8]=re*Nn+ge*Ei+Re*Mi,se}function oe(se,Ie,Je){var Wt=Ie[0],gn=Ie[1],Nn=Ie[2],$n=Ie[3],Un=Ie[4],Ei=Ie[5],Ti=Ie[6],Hi=Ie[7],Mi=Ie[8],xi=Je[0],Ir=Je[1];return se[0]=Wt,se[1]=gn,se[2]=Nn,se[3]=$n,se[4]=Un,se[5]=Ei,se[6]=xi*Wt+Ir*$n+Ti,se[7]=xi*gn+Ir*Un+Hi,se[8]=xi*Nn+Ir*Ei+Mi,se}function te(se,Ie,Je){var Wt=Ie[0],gn=Ie[1],Nn=Ie[2],$n=Ie[3],Un=Ie[4],Ei=Ie[5],Ti=Ie[6],Hi=Ie[7],Mi=Ie[8],xi=Math.sin(Je),Ir=Math.cos(Je);return se[0]=Ir*Wt+xi*$n,se[1]=Ir*gn+xi*Un,se[2]=Ir*Nn+xi*Ei,se[3]=Ir*$n-xi*Wt,se[4]=Ir*Un-xi*gn,se[5]=Ir*Ei-xi*Nn,se[6]=Ti,se[7]=Hi,se[8]=Mi,se}function ue(se,Ie,Je){var Wt=Je[0],gn=Je[1];return se[0]=Wt*Ie[0],se[1]=Wt*Ie[1],se[2]=Wt*Ie[2],se[3]=gn*Ie[3],se[4]=gn*Ie[4],se[5]=gn*Ie[5],se[6]=Ie[6],se[7]=Ie[7],se[8]=Ie[8],se}function De(se,Ie){return se[0]=1,se[1]=0,se[2]=0,se[3]=0,se[4]=1,se[5]=0,se[6]=Ie[0],se[7]=Ie[1],se[8]=1,se}function ve(se,Ie){var Je=Math.sin(Ie),Wt=Math.cos(Ie);return se[0]=Wt,se[1]=Je,se[2]=0,se[3]=-Je,se[4]=Wt,se[5]=0,se[6]=0,se[7]=0,se[8]=1,se}function Ne(se,Ie){return se[0]=Ie[0],se[1]=0,se[2]=0,se[3]=0,se[4]=Ie[1],se[5]=0,se[6]=0,se[7]=0,se[8]=1,se}function Ge(se,Ie){return se[0]=Ie[0],se[1]=Ie[1],se[2]=0,se[3]=Ie[2],se[4]=Ie[3],se[5]=0,se[6]=Ie[4],se[7]=Ie[5],se[8]=1,se}function $e(se,Ie){var Je=Ie[0],Wt=Ie[1],gn=Ie[2],Nn=Ie[3],$n=Je+Je,Un=Wt+Wt,Ei=gn+gn,Ti=Je*$n,Hi=Wt*$n,Mi=Wt*Un,xi=gn*$n,Ir=gn*Un,xr=gn*Ei,Or=Nn*$n,x=Nn*Un,$=Nn*Ei;return se[0]=1-Mi-xr,se[3]=Hi-$,se[6]=xi+x,se[1]=Hi+$,se[4]=1-Ti-xr,se[7]=Ir-Or,se[2]=xi-x,se[5]=Ir+Or,se[8]=1-Ti-Mi,se}function Be(se,Ie){var Je=Ie[0],Wt=Ie[1],gn=Ie[2],Nn=Ie[3],$n=Ie[4],Un=Ie[5],Ei=Ie[6],Ti=Ie[7],Hi=Ie[8],Mi=Ie[9],xi=Ie[10],Ir=Ie[11],xr=Ie[12],Or=Ie[13],x=Ie[14],$=Ie[15],re=Je*Un-Wt*$n,ge=Je*Ei-gn*$n,Re=Je*Ti-Nn*$n,m=Wt*Ei-gn*Un,S=Wt*Ti-Nn*Un,j=gn*Ti-Nn*Ei,Y=Hi*Or-Mi*xr,he=Hi*x-xi*xr,ye=Hi*$-Ir*xr,ke=Mi*x-xi*Or,Ve=Mi*$-Ir*Or,Xe=xi*$-Ir*x,wt=re*Xe-ge*Ve+Re*ke+m*ye-S*he+j*Y;return wt?(wt=1/wt,se[0]=(Un*Xe-Ei*Ve+Ti*ke)*wt,se[1]=(Ei*ye-$n*Xe-Ti*he)*wt,se[2]=($n*Ve-Un*ye+Ti*Y)*wt,se[3]=(gn*Ve-Wt*Xe-Nn*ke)*wt,se[4]=(Je*Xe-gn*ye+Nn*he)*wt,se[5]=(Wt*ye-Je*Ve-Nn*Y)*wt,se[6]=(Or*j-x*S+$*m)*wt,se[7]=(x*Re-xr*j-$*ge)*wt,se[8]=(xr*S-Or*Re+$*re)*wt,se):null}function mt(se,Ie,Je){return se[0]=2/Ie,se[1]=0,se[2]=0,se[3]=0,se[4]=-2/Je,se[5]=0,se[6]=-1,se[7]=1,se[8]=1,se}function Ot(se){return"mat3("+se[0]+", "+se[1]+", "+se[2]+", "+se[3]+", "+se[4]+", "+se[5]+", "+se[6]+", "+se[7]+", "+se[8]+")"}function kt(se){return Math.hypot(se[0],se[1],se[2],se[3],se[4],se[5],se[6],se[7],se[8])}function Tt(se,Ie,Je){return se[0]=Ie[0]+Je[0],se[1]=Ie[1]+Je[1],se[2]=Ie[2]+Je[2],se[3]=Ie[3]+Je[3],se[4]=Ie[4]+Je[4],se[5]=Ie[5]+Je[5],se[6]=Ie[6]+Je[6],se[7]=Ie[7]+Je[7],se[8]=Ie[8]+Je[8],se}function Jt(se,Ie,Je){return se[0]=Ie[0]-Je[0],se[1]=Ie[1]-Je[1],se[2]=Ie[2]-Je[2],se[3]=Ie[3]-Je[3],se[4]=Ie[4]-Je[4],se[5]=Ie[5]-Je[5],se[6]=Ie[6]-Je[6],se[7]=Ie[7]-Je[7],se[8]=Ie[8]-Je[8],se}function Mn(se,Ie,Je){return se[0]=Ie[0]*Je,se[1]=Ie[1]*Je,se[2]=Ie[2]*Je,se[3]=Ie[3]*Je,se[4]=Ie[4]*Je,se[5]=Ie[5]*Je,se[6]=Ie[6]*Je,se[7]=Ie[7]*Je,se[8]=Ie[8]*Je,se}function Yt(se,Ie,Je,Wt){return se[0]=Ie[0]+Je[0]*Wt,se[1]=Ie[1]+Je[1]*Wt,se[2]=Ie[2]+Je[2]*Wt,se[3]=Ie[3]+Je[3]*Wt,se[4]=Ie[4]+Je[4]*Wt,se[5]=Ie[5]+Je[5]*Wt,se[6]=Ie[6]+Je[6]*Wt,se[7]=Ie[7]+Je[7]*Wt,se[8]=Ie[8]+Je[8]*Wt,se}function pn(se,Ie){return se[0]===Ie[0]&&se[1]===Ie[1]&&se[2]===Ie[2]&&se[3]===Ie[3]&&se[4]===Ie[4]&&se[5]===Ie[5]&&se[6]===Ie[6]&&se[7]===Ie[7]&&se[8]===Ie[8]}function gt(se,Ie){var Je=se[0],Wt=se[1],gn=se[2],Nn=se[3],$n=se[4],Un=se[5],Ei=se[6],Ti=se[7],Hi=se[8],Mi=Ie[0],xi=Ie[1],Ir=Ie[2],xr=Ie[3],Or=Ie[4],x=Ie[5],$=Ie[6],re=Ie[7],ge=Ie[8];return Math.abs(Je-Mi)<=E*Math.max(1,Math.abs(Je),Math.abs(Mi))&&Math.abs(Wt-xi)<=E*Math.max(1,Math.abs(Wt),Math.abs(xi))&&Math.abs(gn-Ir)<=E*Math.max(1,Math.abs(gn),Math.abs(Ir))&&Math.abs(Nn-xr)<=E*Math.max(1,Math.abs(Nn),Math.abs(xr))&&Math.abs($n-Or)<=E*Math.max(1,Math.abs($n),Math.abs(Or))&&Math.abs(Un-x)<=E*Math.max(1,Math.abs(Un),Math.abs(x))&&Math.abs(Ei-$)<=E*Math.max(1,Math.abs(Ei),Math.abs($))&&Math.abs(Ti-re)<=E*Math.max(1,Math.abs(Ti),Math.abs(re))&&Math.abs(Hi-ge)<=E*Math.max(1,Math.abs(Hi),Math.abs(ge))}var _t=I,Gt=Jt;function Ft(){var se=new C(2);return C!=Float32Array&&(se[0]=0,se[1]=0),se}function zt(se){var Ie=new C(2);return Ie[0]=se[0],Ie[1]=se[1],Ie}function en(se,Ie){var Je=new C(2);return Je[0]=se,Je[1]=Ie,Je}function Bt(se,Ie){return se[0]=Ie[0],se[1]=Ie[1],se}function an(se,Ie,Je){return se[0]=Ie,se[1]=Je,se}function Di(se,Ie,Je){return se[0]=Ie[0]+Je[0],se[1]=Ie[1]+Je[1],se}function _i(se,Ie,Je){return se[0]=Ie[0]-Je[0],se[1]=Ie[1]-Je[1],se}function wi(se,Ie,Je){return se[0]=Ie[0]*Je[0],se[1]=Ie[1]*Je[1],se}function On(se,Ie,Je){return se[0]=Ie[0]/Je[0],se[1]=Ie[1]/Je[1],se}function Pt(se,Ie){return se[0]=Math.ceil(Ie[0]),se[1]=Math.ceil(Ie[1]),se}function et(se,Ie){return se[0]=Math.floor(Ie[0]),se[1]=Math.floor(Ie[1]),se}function Ci(se,Ie,Je){return se[0]=Math.min(Ie[0],Je[0]),se[1]=Math.min(Ie[1],Je[1]),se}function li(se,Ie,Je){return se[0]=Math.max(Ie[0],Je[0]),se[1]=Math.max(Ie[1],Je[1]),se}function kn(se,Ie){return se[0]=Math.round(Ie[0]),se[1]=Math.round(Ie[1]),se}function Ae(se,Ie,Je){return se[0]=Ie[0]*Je,se[1]=Ie[1]*Je,se}function le(se,Ie,Je,Wt){return se[0]=Ie[0]+Je[0]*Wt,se[1]=Ie[1]+Je[1]*Wt,se}function ne(se,Ie){var Je=Ie[0]-se[0],Wt=Ie[1]-se[1];return Math.hypot(Je,Wt)}function B(se,Ie){var Je=Ie[0]-se[0],Wt=Ie[1]-se[1];return Je*Je+Wt*Wt}function Me(se){var Ie=se[0],Je=se[1];return Math.hypot(Ie,Je)}function Ce(se){var Ie=se[0],Je=se[1];return Ie*Ie+Je*Je}function lt(se,Ie){return se[0]=-Ie[0],se[1]=-Ie[1],se}function vt(se,Ie){return se[0]=1/Ie[0],se[1]=1/Ie[1],se}function ft(se,Ie){var Je=Ie[0],Wt=Ie[1],gn=Je*Je+Wt*Wt;return gn>0&&(gn=1/Math.sqrt(gn)),se[0]=Ie[0]*gn,se[1]=Ie[1]*gn,se}function ot(se,Ie){return se[0]*Ie[0]+se[1]*Ie[1]}function yt(se,Ie,Je){var Wt=Ie[0]*Je[1]-Ie[1]*Je[0];return se[0]=se[1]=0,se[2]=Wt,se}function Ut(se,Ie,Je,Wt){var gn=Ie[0],Nn=Ie[1];return se[0]=gn+Wt*(Je[0]-gn),se[1]=Nn+Wt*(Je[1]-Nn),se}function Fn(se,Ie){Ie=Ie||1;var Je=D()*2*Math.PI;return se[0]=Math.cos(Je)*Ie,se[1]=Math.sin(Je)*Ie,se}function Qn(se,Ie,Je){var Wt=Ie[0],gn=Ie[1];return se[0]=Je[0]*Wt+Je[2]*gn,se[1]=Je[1]*Wt+Je[3]*gn,se}function Fe(se,Ie,Je){var Wt=Ie[0],gn=Ie[1];return se[0]=Je[0]*Wt+Je[2]*gn+Je[4],se[1]=Je[1]*Wt+Je[3]*gn+Je[5],se}function ct(se,Ie,Je){var Wt=Ie[0],gn=Ie[1];return se[0]=Je[0]*Wt+Je[3]*gn+Je[6],se[1]=Je[1]*Wt+Je[4]*gn+Je[7],se}function ut(se,Ie,Je){var Wt=Ie[0],gn=Ie[1];return se[0]=Je[0]*Wt+Je[4]*gn+Je[12],se[1]=Je[1]*Wt+Je[5]*gn+Je[13],se}function jt(se,Ie,Je,Wt){var gn=Ie[0]-Je[0],Nn=Ie[1]-Je[1],$n=Math.sin(Wt),Un=Math.cos(Wt);return se[0]=gn*Un-Nn*$n+Je[0],se[1]=gn*$n+Nn*Un+Je[1],se}function qt(se,Ie){var Je=se[0],Wt=se[1],gn=Ie[0],Nn=Ie[1],$n=Math.sqrt(Je*Je+Wt*Wt)*Math.sqrt(gn*gn+Nn*Nn),Un=$n&&(Je*gn+Wt*Nn)/$n;return Math.acos(Math.min(Math.max(Un,-1),1))}function Dt(se){return se[0]=0,se[1]=0,se}function hn(se){return"vec2("+se[0]+", "+se[1]+")"}function Rt(se,Ie){return se[0]===Ie[0]&&se[1]===Ie[1]}function nn(se,Ie){var Je=se[0],Wt=se[1],gn=Ie[0],Nn=Ie[1];return Math.abs(Je-gn)<=E*Math.max(1,Math.abs(Je),Math.abs(gn))&&Math.abs(Wt-Nn)<=E*Math.max(1,Math.abs(Wt),Math.abs(Nn))}var ln=Me,_e=_i,V=wi,H=On,T=ne,z=B,J=Ce,Pe=function(){var se=Ft();return function(Ie,Je,Wt,gn,Nn,$n){var Un,Ei;for(Je||(Je=2),Wt||(Wt=0),gn?Ei=Math.min(gn*Je+Wt,Ie.length):Ei=Ie.length,Un=Wt;Un<Ei;Un+=Je)se[0]=Ie[Un],se[1]=Ie[Un+1],Nn(se,se,$n),Ie[Un]=se[0],Ie[Un+1]=se[1];return Ie}}();function Oe(){var se=new C(3);return C!=Float32Array&&(se[0]=0,se[1]=0,se[2]=0),se}function Ue(se){var Ie=new C(3);return Ie[0]=se[0],Ie[1]=se[1],Ie[2]=se[2],Ie}function qe(se){var Ie=se[0],Je=se[1],Wt=se[2];return Math.hypot(Ie,Je,Wt)}function Ct(se,Ie,Je){var Wt=new C(3);return Wt[0]=se,Wt[1]=Ie,Wt[2]=Je,Wt}function dt(se,Ie){return se[0]=Ie[0],se[1]=Ie[1],se[2]=Ie[2],se}function Et(se,Ie,Je,Wt){return se[0]=Ie,se[1]=Je,se[2]=Wt,se}function Cn(se,Ie,Je){return se[0]=Ie[0]+Je[0],se[1]=Ie[1]+Je[1],se[2]=Ie[2]+Je[2],se}function st(se,Ie,Je){return se[0]=Ie[0]-Je[0],se[1]=Ie[1]-Je[1],se[2]=Ie[2]-Je[2],se}function Zt(se,Ie,Je){return se[0]=Ie[0]*Je[0],se[1]=Ie[1]*Je[1],se[2]=Ie[2]*Je[2],se}function zn(se,Ie,Je){return se[0]=Ie[0]/Je[0],se[1]=Ie[1]/Je[1],se[2]=Ie[2]/Je[2],se}function Lt(se,Ie){return se[0]=Math.ceil(Ie[0]),se[1]=Math.ceil(Ie[1]),se[2]=Math.ceil(Ie[2]),se}function En(se,Ie){return se[0]=Math.floor(Ie[0]),se[1]=Math.floor(Ie[1]),se[2]=Math.floor(Ie[2]),se}function qn(se,Ie,Je){return se[0]=Math.min(Ie[0],Je[0]),se[1]=Math.min(Ie[1],Je[1]),se[2]=Math.min(Ie[2],Je[2]),se}function ui(se,Ie,Je){return se[0]=Math.max(Ie[0],Je[0]),se[1]=Math.max(Ie[1],Je[1]),se[2]=Math.max(Ie[2],Je[2]),se}function Ai(se,Ie){return se[0]=Math.round(Ie[0]),se[1]=Math.round(Ie[1]),se[2]=Math.round(Ie[2]),se}function or(se,Ie,Je){return se[0]=Ie[0]*Je,se[1]=Ie[1]*Je,se[2]=Ie[2]*Je,se}function Hn(se,Ie,Je,Wt){return se[0]=Ie[0]+Je[0]*Wt,se[1]=Ie[1]+Je[1]*Wt,se[2]=Ie[2]+Je[2]*Wt,se}function Jn(se,Ie){var Je=Ie[0]-se[0],Wt=Ie[1]-se[1],gn=Ie[2]-se[2];return Math.hypot(Je,Wt,gn)}function Ii(se,Ie){var Je=Ie[0]-se[0],Wt=Ie[1]-se[1],gn=Ie[2]-se[2];return Je*Je+Wt*Wt+gn*gn}function ti(se){var Ie=se[0],Je=se[1],Wt=se[2];return Ie*Ie+Je*Je+Wt*Wt}function Ht(se,Ie){return se[0]=-Ie[0],se[1]=-Ie[1],se[2]=-Ie[2],se}function Bn(se,Ie){return se[0]=1/Ie[0],se[1]=1/Ie[1],se[2]=1/Ie[2],se}function Xn(se,Ie){var Je=Ie[0],Wt=Ie[1],gn=Ie[2],Nn=Je*Je+Wt*Wt+gn*gn;return Nn>0&&(Nn=1/Math.sqrt(Nn)),se[0]=Ie[0]*Nn,se[1]=Ie[1]*Nn,se[2]=Ie[2]*Nn,se}function Kn(se,Ie){return se[0]*Ie[0]+se[1]*Ie[1]+se[2]*Ie[2]}function Bi(se,Ie,Je){var Wt=Ie[0],gn=Ie[1],Nn=Ie[2],$n=Je[0],Un=Je[1],Ei=Je[2];return se[0]=gn*Ei-Nn*Un,se[1]=Nn*$n-Wt*Ei,se[2]=Wt*Un-gn*$n,se}function br(se,Ie,Je,Wt){var gn=Ie[0],Nn=Ie[1],$n=Ie[2];return se[0]=gn+Wt*(Je[0]-gn),se[1]=Nn+Wt*(Je[1]-Nn),se[2]=$n+Wt*(Je[2]-$n),se}function Vi(se,Ie,Je,Wt,gn,Nn){var $n=Nn*Nn,Un=$n*(2*Nn-3)+1,Ei=$n*(Nn-2)+Nn,Ti=$n*(Nn-1),Hi=$n*(3-2*Nn);return se[0]=Ie[0]*Un+Je[0]*Ei+Wt[0]*Ti+gn[0]*Hi,se[1]=Ie[1]*Un+Je[1]*Ei+Wt[1]*Ti+gn[1]*Hi,se[2]=Ie[2]*Un+Je[2]*Ei+Wt[2]*Ti+gn[2]*Hi,se}function lr(se,Ie,Je,Wt,gn,Nn){var $n=1-Nn,Un=$n*$n,Ei=Nn*Nn,Ti=Un*$n,Hi=3*Nn*Un,Mi=3*Ei*$n,xi=Ei*Nn;return se[0]=Ie[0]*Ti+Je[0]*Hi+Wt[0]*Mi+gn[0]*xi,se[1]=Ie[1]*Ti+Je[1]*Hi+Wt[1]*Mi+gn[1]*xi,se[2]=Ie[2]*Ti+Je[2]*Hi+Wt[2]*Mi+gn[2]*xi,se}function Qi(se,Ie){Ie=Ie||1;var Je=D()*2*Math.PI,Wt=D()*2-1,gn=Math.sqrt(1-Wt*Wt)*Ie;return se[0]=Math.cos(Je)*gn,se[1]=Math.sin(Je)*gn,se[2]=Wt*Ie,se}function gi(se,Ie,Je){var Wt=Ie[0],gn=Ie[1],Nn=Ie[2],$n=Je[3]*Wt+Je[7]*gn+Je[11]*Nn+Je[15];return $n=$n||1,se[0]=(Je[0]*Wt+Je[4]*gn+Je[8]*Nn+Je[12])/$n,se[1]=(Je[1]*Wt+Je[5]*gn+Je[9]*Nn+Je[13])/$n,se[2]=(Je[2]*Wt+Je[6]*gn+Je[10]*Nn+Je[14])/$n,se}function Rn(se,Ie,Je){var Wt=Ie[0],gn=Ie[1],Nn=Ie[2];return se[0]=Wt*Je[0]+gn*Je[3]+Nn*Je[6],se[1]=Wt*Je[1]+gn*Je[4]+Nn*Je[7],se[2]=Wt*Je[2]+gn*Je[5]+Nn*Je[8],se}function vs(se,Ie,Je){var Wt=Je[0],gn=Je[1],Nn=Je[2],$n=Je[3],Un=Ie[0],Ei=Ie[1],Ti=Ie[2],Hi=gn*Ti-Nn*Ei,Mi=Nn*Un-Wt*Ti,xi=Wt*Ei-gn*Un,Ir=gn*xi-Nn*Mi,xr=Nn*Hi-Wt*xi,Or=Wt*Mi-gn*Hi,x=$n*2;return Hi*=x,Mi*=x,xi*=x,Ir*=2,xr*=2,Or*=2,se[0]=Un+Hi+Ir,se[1]=Ei+Mi+xr,se[2]=Ti+xi+Or,se}function Ss(se,Ie,Je,Wt){var gn=[],Nn=[];return gn[0]=Ie[0]-Je[0],gn[1]=Ie[1]-Je[1],gn[2]=Ie[2]-Je[2],Nn[0]=gn[0],Nn[1]=gn[1]*Math.cos(Wt)-gn[2]*Math.sin(Wt),Nn[2]=gn[1]*Math.sin(Wt)+gn[2]*Math.cos(Wt),se[0]=Nn[0]+Je[0],se[1]=Nn[1]+Je[1],se[2]=Nn[2]+Je[2],se}function Si(se,Ie,Je,Wt){var gn=[],Nn=[];return gn[0]=Ie[0]-Je[0],gn[1]=Ie[1]-Je[1],gn[2]=Ie[2]-Je[2],Nn[0]=gn[2]*Math.sin(Wt)+gn[0]*Math.cos(Wt),Nn[1]=gn[1],Nn[2]=gn[2]*Math.cos(Wt)-gn[0]*Math.sin(Wt),se[0]=Nn[0]+Je[0],se[1]=Nn[1]+Je[1],se[2]=Nn[2]+Je[2],se}function Lr(se,Ie,Je,Wt){var gn=[],Nn=[];return gn[0]=Ie[0]-Je[0],gn[1]=Ie[1]-Je[1],gn[2]=Ie[2]-Je[2],Nn[0]=gn[0]*Math.cos(Wt)-gn[1]*Math.sin(Wt),Nn[1]=gn[0]*Math.sin(Wt)+gn[1]*Math.cos(Wt),Nn[2]=gn[2],se[0]=Nn[0]+Je[0],se[1]=Nn[1]+Je[1],se[2]=Nn[2]+Je[2],se}function mr(se,Ie){var Je=se[0],Wt=se[1],gn=se[2],Nn=Ie[0],$n=Ie[1],Un=Ie[2],Ei=Math.sqrt(Je*Je+Wt*Wt+gn*gn),Ti=Math.sqrt(Nn*Nn+$n*$n+Un*Un),Hi=Ei*Ti,Mi=Hi&&Kn(se,Ie)/Hi;return Math.acos(Math.min(Math.max(Mi,-1),1))}function Wr(se){return se[0]=0,se[1]=0,se[2]=0,se}function ei(se){return"vec3("+se[0]+", "+se[1]+", "+se[2]+")"}function Jo(se,Ie){return se[0]===Ie[0]&&se[1]===Ie[1]&&se[2]===Ie[2]}function va(se,Ie){var Je=se[0],Wt=se[1],gn=se[2],Nn=Ie[0],$n=Ie[1],Un=Ie[2];return Math.abs(Je-Nn)<=E*Math.max(1,Math.abs(Je),Math.abs(Nn))&&Math.abs(Wt-$n)<=E*Math.max(1,Math.abs(Wt),Math.abs($n))&&Math.abs(gn-Un)<=E*Math.max(1,Math.abs(gn),Math.abs(Un))}var Es=st,$t=Zt,Lo=zn,Oa=Jn,ea=Ii,ao=qe,_a=ti,Ls=function(){var se=Oe();return function(Ie,Je,Wt,gn,Nn,$n){var Un,Ei;for(Je||(Je=3),Wt||(Wt=0),gn?Ei=Math.min(gn*Je+Wt,Ie.length):Ei=Ie.length,Un=Wt;Un<Ei;Un+=Je)se[0]=Ie[Un],se[1]=Ie[Un+1],se[2]=Ie[Un+2],Nn(se,se,$n),Ie[Un]=se[0],Ie[Un+1]=se[1],Ie[Un+2]=se[2];return Ie}}();function ta(se,Ie,Je){var Wt=[0,0,0,0,0,0,0,0,0];return De(Wt,Je),I(se,Wt,Ie)}function ya(se,Ie,Je){var Wt=[0,0,0,0,0,0,0,0,0];return ve(Wt,Je),I(se,Wt,Ie)}function Ka(se,Ie,Je){var Wt=[0,0,0,0,0,0,0,0,0];return Ne(Wt,Je),I(se,Wt,Ie)}function fl(se,Ie,Je){return I(se,Je,Ie)}function Pl(se,Ie){for(var Je=se?[].concat(se):[1,0,0,0,1,0,0,0,1],Wt=0,gn=Ie.length;Wt<gn;Wt++){var Nn=Ie[Wt];switch(Nn[0]){case"t":ta(Je,Je,[Nn[1],Nn[2]]);break;case"s":Ka(Je,Je,[Nn[1],Nn[2]]);break;case"r":ya(Je,Je,Nn[1]);break;case"m":fl(Je,Je,Nn[1]);break;default:break}}return Je}function Ga(se,Ie){return se[0]*Ie[1]-Ie[0]*se[1]}function Ya(se,Ie,Je){var Wt=qt(se,Ie),gn=Ga(se,Ie)>=0;return Je?gn?Math.PI*2-Wt:Wt:gn?Wt:Math.PI*2-Wt}function bc(se,Ie,Je){return Je?(se[0]=Ie[1],se[1]=-1*Ie[0]):(se[0]=-1*Ie[1],se[1]=Ie[0]),se}},7150:(w,Z,f)=>{"use strict";var g=f(3067),y=I(g),A=f(7270),M=I(A),E=f(9398),C=I(E),D=f(4773),L=I(D),O=f(3839),R=I(O),W=f(2903),G=I(W),ie=f(2981),q=I(ie),we=f(7616),de=I(we),fe=f(3736),F=I(fe),be=f(6414),pe=I(be),ae=f(9507),Q=I(ae);f(6097);function I(ue){return ue&&ue.__esModule?ue:{default:ue}}var oe=f(9392),te={Canvas:y.default,TreeCanvas:M.default,Edge:C.default,Endpoint:L.default,Group:R.default,Node:G.default,TreeNode:q.default,Minimap:de.default,Tips:F.default,Layout:pe.default,Arrow:Q.default};window.Butterfly=te,w.exports=te},3067:(w,Z,f)=>{"use strict";function g(kn){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(le){return typeof le}:g=function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},g(kn)}Object.defineProperty(Z,"__esModule",{value:!0});var y=f(2733),A=ve(y),M=f(2903),E=ve(M),C=f(9398),D=ve(C),L=f(3839),O=ve(L),R=f(4773),W=ve(R),G=f(6414),ie=ve(G),q=f(3357),we=ve(q),de=f(8786),fe=ve(de),F=f(9131),be=ve(F),pe=f(7430),ae=ve(pe),Q=f(3481),I=ve(Q),oe=f(7616),te=ve(oe),ue=f(9471),De=ve(ue);f(3168);function ve(kn){return kn&&kn.__esModule?kn:{default:kn}}function Ne(kn,Ae){var le=typeof Symbol!="undefined"&&kn[Symbol.iterator]||kn["@@iterator"];if(!le){if(Array.isArray(kn)||(le=Mn(kn))||Ae&&kn&&typeof kn.length=="number"){le&&(kn=le);var ne=0,B=function(){};return{s:B,n:function(){return ne>=kn.length?{done:!0}:{done:!1,value:kn[ne++]}},e:function(ft){throw ft},f:B}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Me=!0,Ce=!1,lt;return{s:function(){le=le.call(kn)},n:function(){var ft=le.next();return Me=ft.done,ft},e:function(ft){Ce=!0,lt=ft},f:function(){try{!Me&&le.return!=null&&le.return()}finally{if(Ce)throw lt}}}}function Ge(kn,Ae){var le=Object.keys(kn);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(kn);Ae&&(ne=ne.filter(function(B){return Object.getOwnPropertyDescriptor(kn,B).enumerable})),le.push.apply(le,ne)}return le}function $e(kn){for(var Ae=1;Ae<arguments.length;Ae++){var le=arguments[Ae]!=null?arguments[Ae]:{};Ae%2?Ge(Object(le),!0).forEach(function(ne){_t(kn,ne,le[ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(kn,Object.getOwnPropertyDescriptors(le)):Ge(Object(le)).forEach(function(ne){Object.defineProperty(kn,ne,Object.getOwnPropertyDescriptor(le,ne))})}return kn}function Be(kn,Ae){return kt(kn)||Ot(kn,Ae)||Mn(kn,Ae)||mt()}function mt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ot(kn,Ae){var le=kn==null?null:typeof Symbol!="undefined"&&kn[Symbol.iterator]||kn["@@iterator"];if(le!=null){var ne=[],B=!0,Me=!1,Ce,lt;try{for(le=le.call(kn);!(B=(Ce=le.next()).done)&&(ne.push(Ce.value),!(Ae&&ne.length===Ae));B=!0);}catch(vt){Me=!0,lt=vt}finally{try{!B&&le.return!=null&&le.return()}finally{if(Me)throw lt}}return ne}}function kt(kn){if(Array.isArray(kn))return kn}function Tt(kn){return pn(kn)||Yt(kn)||Mn(kn)||Jt()}function Jt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mn(kn,Ae){if(!!kn){if(typeof kn=="string")return gt(kn,Ae);var le=Object.prototype.toString.call(kn).slice(8,-1);if(le==="Object"&&kn.constructor&&(le=kn.constructor.name),le==="Map"||le==="Set")return Array.from(kn);if(le==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(le))return gt(kn,Ae)}}function Yt(kn){if(typeof Symbol!="undefined"&&kn[Symbol.iterator]!=null||kn["@@iterator"]!=null)return Array.from(kn)}function pn(kn){if(Array.isArray(kn))return gt(kn)}function gt(kn,Ae){(Ae==null||Ae>kn.length)&&(Ae=kn.length);for(var le=0,ne=new Array(Ae);le<Ae;le++)ne[le]=kn[le];return ne}function _t(kn,Ae,le){return Ae in kn?Object.defineProperty(kn,Ae,{value:le,enumerable:!0,configurable:!0,writable:!0}):kn[Ae]=le,kn}function Gt(kn,Ae){if(!(kn instanceof Ae))throw new TypeError("Cannot call a class as a function")}function Ft(kn,Ae){for(var le=0;le<Ae.length;le++){var ne=Ae[le];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(kn,ne.key,ne)}}function zt(kn,Ae,le){return Ae&&Ft(kn.prototype,Ae),le&&Ft(kn,le),kn}function en(kn,Ae){if(typeof Ae!="function"&&Ae!==null)throw new TypeError("Super expression must either be null or a function");kn.prototype=Object.create(Ae&&Ae.prototype,{constructor:{value:kn,writable:!0,configurable:!0}}),Ae&&Bt(kn,Ae)}function Bt(kn,Ae){return Bt=Object.setPrototypeOf||function(ne,B){return ne.__proto__=B,ne},Bt(kn,Ae)}function an(kn){var Ae=wi();return function(){var ne=On(kn),B;if(Ae){var Me=On(this).constructor;B=Reflect.construct(ne,arguments,Me)}else B=ne.apply(this,arguments);return Di(this,B)}}function Di(kn,Ae){if(Ae&&(g(Ae)==="object"||typeof Ae=="function"))return Ae;if(Ae!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _i(kn)}function _i(kn){if(kn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return kn}function wi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(kn){return!1}}function On(kn){return On=Object.setPrototypeOf?Object.getPrototypeOf:function(le){return le.__proto__||Object.getPrototypeOf(le)},On(kn)}var Pt=f(8092),et=f(9392),Ci=f(4572),li=function(kn){en(le,kn);var Ae=an(le);function le(ne){var B;return Gt(this,le),B=Ae.call(this,ne),B.root=ne.root,B.layout=ne.layout,B.zoomable=ne.zoomable||!1,B.moveable=ne.moveable||!1,B.draggable=ne.draggable||!1,B.linkable=ne.linkable||!1,B.disLinkable=ne.disLinkable||!1,B.theme={group:{type:et.get(ne,"theme.group.type")||"normal",includeGroups:et.get(ne,"theme.group.includeGroups",!1)},edge:{type:et.get(ne,"theme.edge.type")||"node",shapeType:et.get(ne,"theme.edge.shapeType")||"Straight",Class:et.get(ne,"theme.edge.Class")||D.default,arrow:et.get(ne,"theme.edge.arrow"),arrowShapeType:et.get(ne,"theme.edge.arrowShapeType","default"),arrowPosition:et.get(ne,"theme.edge.arrowPosition"),arrowOffset:et.get(ne,"theme.edge.arrowOffset"),draggable:et.get(ne,"theme.edge.draggable"),label:et.get(ne,"theme.edge.label"),labelPosition:et.get(ne,"theme.edge.labelPosition"),labelOffset:et.get(ne,"theme.edge.labelOffset"),labelUpdateInterval:et.get(ne,"theme.edge.labelUpdateInterval",20),isRepeat:et.get(ne,"theme.edge.isRepeat")||!1,isLinkMyself:et.get(ne,"theme.edge.isLinkMyself")||!1,isExpandWidth:et.get(ne,"theme.edge.isExpandWidth")||!1,defaultAnimate:et.get(ne,"theme.edge.defaultAnimate")||!1},endpoint:{linkableHighlight:et.get(ne,"theme.endpoint.linkableHighlight")||!1,limitNum:et.get(ne,"theme.endpoint.limitNum"),expandArea:{left:et.get(ne,"theme.endpoint.expandArea.left")===void 0?10:et.get(ne,"theme.endpoint.expandArea.left"),right:et.get(ne,"theme.endpoint.expandArea.right")===void 0?10:et.get(ne,"theme.endpoint.expandArea.right"),top:et.get(ne,"theme.endpoint.expandArea.top")===void 0?10:et.get(ne,"theme.endpoint.expandArea.top"),bottom:et.get(ne,"theme.endpoint.expandArea.bottom")===void 0?10:et.get(ne,"theme.endpoint.expandArea.bottom")}},zoomGap:et.get(ne,"theme.zoomGap")||.001,autoFixCanvas:{enable:et.get(ne,"theme.autoFixCanvas.enable",!1),autoMovePadding:et.get(ne,"theme.autoFixCanvas.autoMovePadding")||[20,20,20,20]},autoResizeRootSize:et.get(ne,"theme.autoResizeRootSize",!0)},B.global=et.get(ne,"global",{isScopeStrict:et.get(ne,"global.isScopeStrict"),limitQueueLen:5,isCloneDeep:et.get(ne,"global.isCloneDeep",!0)}),B._zoomData=1,B._moveData=[0,0],B._zoomTimer=null,B.groups=[],B.nodes=[],B.edges=[],B.isSelectMode=!1,B.selecContents=[],B.selecMode="include",B.selectItem={nodes:[],edges:[],groups:[],endpoints:[]},B._remarkZoom=void 0,B._remarkMove=void 0,B.svg=null,B.wrapper=null,B.canvasWrapper=null,B._dragGroupZIndex=50,B._dragNodeZIndex=250,B._dragEdgeZindex=499,B._genWrapper(),B._genSvgWrapper(),B._genCanvasWrapper(),De.default.init(B.svg),B._dragType=null,B._dragNode=null,B._dragEndpoint=null,B._dragEdges=[],B._dragPathEdge=null,B._dragGroup=null,B._rootWidth=Pt(B.root).width(),B._rootHeight=Pt(B.root).height(),Pt(B.root).css("overflow","hidden"),Pt(B.root).css("position")==="static"&&Pt(B.root).css("position","relative"),B._hoverGroupQueue=[],B._hoverGroupObj=void 0,B._hoverGroupTimer=void 0,B._gridService=new ae.default({root:B.root,canvas:_i(B)}),B._gridObjQueue=[],B._gridObj=void 0,B._gridTimer=void 0,B._guidelineService=new I.default({root:B.root,canvas:_i(B)}),B._guideObjQueue=[],B._guideObj=void 0,B._guideTimer=void 0,B._coordinateService=new fe.default({canvas:_i(B),terOffsetX:Pt(B.root).offset().left,terOffsetY:Pt(B.root).offset().top,terWidth:Pt(B.root).width(),terHeight:Pt(B.root).height(),canOffsetX:B._moveData[0],canOffsetY:B._moveData[1],scale:B._zoomData}),B._addEventListener(),B._unionData={__system:{nodes:[],edges:[],groups:[],endpoints:[]}},B._NodeClass=E.default,B.actionQueue=[],B.actionQueueIndex=-1,B._autoMoveDir=[],B._autoMoveTimer=null,B._hasInited=!1,B._updateInterval=setInterval(function(){B.nodes.forEach(function(Me){Me._isForceUpdateSize=!0})},5e3),B._cache={nodes:{}},B}return zt(le,[{key:"draw",value:function(B,Me){var Ce=this,lt=B.groups||[],vt=B.nodes||[],ft=B.edges||[];this.layout&&this._autoLayout({groups:lt,nodes:vt,edges:ft});var ot=new Promise(function(yt,Ut){setTimeout(function(){Ce.addGroups(lt),yt()})}).then(function(){return new Promise(function(yt,Ut){setTimeout(function(){Ce.addNodes(vt),yt()},10)})}).then(function(yt){return new Promise(function(Ut,Fn){setTimeout(function(){Ce.addEdges(ft),Ut()},20)})});ot.then(function(){Ce.actionQueue=[],Ce.actionQueueIndex=-1,Me&&Me({nodes:Ce.nodes,edges:Ce.edges,groups:Ce.groups}),Ce._hasInited=!0})}},{key:"redraw",value:function(B,Me){this.removeNodes(this.nodes.map(function(Ce){return Ce.id})||[]),this.removeGroups(this.groups.map(function(Ce){return Ce.id})||[]),this.clearActionQueue(),this.draw(B||{},Me)}},{key:"getDataMap",value:function(){return{nodes:this.nodes,edges:this.edges,groups:this.groups}}},{key:"autoLayout",value:function(B,Me){var Ce=this;this.layout=et.assign({},this.layout,{type:B,options:Me});var lt=this.nodes,vt=this.groups,ft=this.edges,ot=lt.map(function(Fn){return Fn.options}),yt=vt.map(function(Fn){return Fn.options}),Ut=ft.map(function(Fn){return{source:et.get(Fn,"sourceNode.id"),target:et.get(Fn,"targetNode.id")}});this._autoLayout({groups:yt,nodes:ot,edges:Ut}),ot.forEach(function(Fn,Qn){Ce.nodes[Qn].moveTo(Fn.left,Fn.top)})}},{key:"_genSvgWrapper",value:function(){function B(){var Fn=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i,/Electron/i];return Fn.some(function(Qn){return window.navigator.userAgent.match(Qn)})}var Me=B(),Ce="100%",lt="100%",vt=function(){var Qn=0,Fe=window.screen,ct=window.navigator.userAgent.toLowerCase();return window.devicePixelRatio!==void 0?Qn=window.devicePixelRatio:~ct.indexOf("msie")?Fe.deviceXDPI&&Fe.logicalXDPI&&(Qn=Fe.deviceXDPI/Fe.logicalXDPI):window.outerWidth!==void 0&&window.innerWidth!==void 0&&(Qn=window.outerWidth/window.innerWidth),Qn&&(Qn=Math.round(Qn*100)),Qn};if(!Me){var ft=1/(vt()/200);Ce=1*ft+"px",lt=1*ft+"px"}var ot=Pt(document.createElementNS("http://www.w3.org/2000/svg","svg")).attr("class","butterfly-svg").attr("width",Ce).attr("height",lt).attr("version","1.1").attr("xmlns","http://www.w3.org/2000/svg").css("z-index",this._dragEdgeZindex).appendTo(this.wrapper);if(!Me){window.onresize=function(){var Fn=1/(vt()/200);ot.attr("width",1*Fn+"px").attr("height",1*Fn+"px")};var yt=Pt(this.wrapper)[0].getBoundingClientRect(),Ut=ot[0].getBoundingClientRect();ot.css("top",yt.top-Ut.top+"px").css("left",yt.left-Ut.left+"px")}return this.svg=ot}},{key:"_genWrapper",value:function(){var B=Pt('<div class="butterfly-wrapper"></div>').appendTo(this.root);return this.wrapper=B[0]}},{key:"_genCanvasWrapper",value:function(){this.canvasWrapper=new we.default,this.canvasWrapper.init({root:this.root,_on:this.on.bind(this),_emit:this.emit.bind(this)})}},{key:"_addEventListener",value:function(){var B=this;this.zoomable&&this.setZoomable(!0),this.moveable&&this.setMoveable(!0);var Me=/Chrome/.test(window.navigator.userAgent)&&/Google Inc/.test(window.navigator.vendor),Ce=function(){var ot=window.navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return ot?parseInt(ot[2],10):!1},lt=Me&&Ce()>=64;if(lt&&window.ResizeObserver&&this.theme.autoResizeRootSize){var vt=new ResizeObserver(function(ft){B._rootWidth=Pt(B.root).width(),B._rootHeight=Pt(B.root).height(),B._coordinateService._changeCanvasInfo({terOffsetX:Pt(B.root).offset().left,terOffsetY:Pt(B.root).offset().top,terWidth:Pt(B.root).width(),terHeight:Pt(B.root).height()}),B.canvasWrapper.resize({root:B.root}),B.setGridMode(!0,void 0,!0)});vt.observe(this.root)}else window.addEventListener("resize",function(){B._rootWidth=Pt(B.root).width(),B._rootHeight=Pt(B.root).height(),B._coordinateService._changeCanvasInfo({terOffsetX:Pt(B.root).offset().left,terOffsetY:Pt(B.root).offset().top,terWidth:Pt(B.root).width(),terHeight:Pt(B.root).height()}),B.canvasWrapper.resize({root:B.root}),B.setGridMode(!0,void 0,!0)});this.on("InnerEvents",function(ft){if(ft.type==="node:addEndpoint")B._addEndpoint(ft.data,"node",ft.isInited);else if(ft.type==="node:removeEndpoint"){var ot=ft.data,yt=B.edges.filter(function(ut){return ut.sourceNode.id===ot.nodeId&&ut.sourceEndpoint.id===ot.id||ut.targetNode.id===ot.nodeId&&ut.targetEndpoint.id===ot.id});B.removeEdges(yt)}else if(ft.type==="group:addEndpoint")B._addEndpoint(ft.data,"group",ft.isInited);else if(ft.type==="node:dragBegin")B._dragType="node:drag",B._dragNode=ft.data;else if(ft.type==="node:mouseDown")B._dragType="node:mouseDown";else if(ft.type==="group:dragBegin")B._dragType="group:drag",B._dragNode=ft.data;else if(ft.type==="endpoint:drag")B._dragType="endpoint:drag",B._dragEndpoint=ft.data;else if(ft.type==="node:move")B._moveNode(ft.node,ft.x,ft.y,ft.isNotEventEmit);else if(ft.type==="group:move")B._moveGroup(ft.group,ft.x,ft.y,ft.isNotEventEmit);else if(ft.type==="link:mouseDown")B._dragType="link:mouseDown";else if(ft.type==="link:dragBegin")B._dragType="link:drag",B._dragPathEdge={edge:ft.edge,path:ft.path};else if(ft.type==="multiple:select"){var Ut=B._selectMultiplyItem(ft.range,ft.toDirection);et.assign(B._unionData.__system,B.selectItem),B.emit("system.multiple.select",{data:Ut}),B.emit("events",{type:"multiple:select",data:Ut}),B.selectItem={nodes:[],edges:[],endpoints:[]}}else if(ft.type==="node:resize")B._dragType="node:resize",B._dragNode=ft.node;else if(ft.type==="group:resize")B._dragType="group:resize",B._dragGroup=ft.group;else if(ft.type==="node:delete")B.removeNode(ft.data.id);else if(ft.type==="edge:delete")B.removeEdge(ft.data);else if(ft.type==="group:delete")B.removeGroup(ft.data.id);else if(ft.type==="group:addNodes")et.get(ft,"nodes",[]).forEach(function(ut){var jt=et.find(B.nodes,function(nn){return ut.id===nn.id});if(!jt)B.addNode(ut);else{var qt=[],Dt=B.removeNode(ut.id,!0,!0),hn=Dt.nodes[0],Rt=ft.group;qt=Dt.edges,hn._init({top:ut.top-Rt.top,left:ut.left-Rt.left,dom:hn.dom,group:Rt.id}),B.addNode(hn,!0)}}),ft.isNotEventEmit||(B.emit("events",{type:"system.group.addMembers",nodes:ft.nodes,group:ft.group}),B.emit("system.group.addMembers",{nodes:ft.nodes,group:ft.group}));else if(ft.type==="group:removeNodes"){var Fn=ft.group;et.get(ft,"nodes",[]).forEach(function(ut){B.removeNode(ut.id,!0,!0),ut._init({group:void 0,left:ut.left+Fn.left,top:ut.top+Fn.top,dom:ut.dom,_isDeleteGroup:!0}),B.addNode(ut,!0)})}else if(ft.type==="edge:updateLabel"){var Qn=ft.data.labelDom;Pt(B.wrapper).append(Qn)}else if(ft.type==="edge:setZIndex")B.setEdgeZIndex([ft.edge],ft.index);else if(ft.type==="endpoint:updatePos"){var Fe=ft.point,ct=B.getNeighborEdgesByEndpoint(Fe.nodeId,Fe.id);ct.forEach(function(ut){ut.redraw()})}}),this._attachMouseDownEvent()}},{key:"_attachMouseDownEvent",value:function(){var B=this,Me={x:0,y:0},Ce={x:0,y:0},lt=!1,vt=[],ft=function(Dt){if(!lt){var hn=B._getAllEndpoints();hn.forEach(function(Rt){if(!(Dt===Rt||Rt.type==="source"||Rt._tmpType==="source")){if(Rt.canLink&&Rt.canLink(Dt)){Rt.linkable&&(Rt.linkable(),Rt._linkable=!0);return}if((0,be.default)(Dt.scope,Rt.scope)){Rt.linkable&&(Rt.linkable(),Rt._linkable=!0),vt.push(Rt);return}}}),lt=!0}},ot=function(){lt=!1,vt.forEach(function(Dt){Dt.unLinkable&&Dt.unLinkable(),Dt.unHoverLinkable&&Dt.unHoverLinkable(),Dt._linkable=!1}),vt=[]},yt=null,Ut=!1,Fn=function(Dt,hn){Ut||(Ut=!0,setTimeout(function(){var Rt=B._getAllEndpoints(),nn=B._coordinateService._terminal2canvas("x",Dt),ln=B._coordinateService._terminal2canvas("y",hn),_e=null;Rt.forEach(function(V){var H=V._posLeft+V._width+(et.get(V,"expandArea.right")||B.theme.endpoint.expandArea.right),T=V._posTop+V._height+(et.get(V,"expandArea.bottom")||B.theme.endpoint.expandArea.bottom),z=V._posLeft-(et.get(V,"expandArea.left")||B.theme.endpoint.expandArea.left),J=V._posTop-(et.get(V,"expandArea.top")||B.theme.endpoint.expandArea.top);nn>z&&nn<H&&ln>J&&ln<T&&(_e=V)}),_e?_e!==yt&&(_e.hoverLinkable&&_e.hoverLinkable(),yt=_e):yt&&(yt.unHoverLinkable&&yt.unHoverLinkable(),yt=null),Ut=!1},100))},Qn=function(){B._dragType=null,B._dragNode=null,B._dragEndpoint=null,B._dragGroup=null,B._dragPathEdge=null,B._dragEdges=[],Ce={x:0,y:0},Me={x:0,y:0},B._autoMoveDir=[],B._guidelineService.isActive&&B._guidelineService.clearCanvas()},Fe=function(Dt){var hn=0;if(Dt.button===hn){if(!B._dragType&&B.moveable&&(B._dragType="canvas:drag"),(Dt.target===B.svg[0]||Dt.target===B.root)&&B.isSelectMode){B.canvasWrapper.active(),B.canvasWrapper.dom.dispatchEvent(new MouseEvent("mousedown",{clientX:Dt.clientX,clientY:Dt.clientY}));return}Me={x:Dt.clientX,y:Dt.clientY},B._dragNode&&B._dragNode.__type=="node"&&(Pt(B._dragNode.dom).css("z-index",++B._dragNodeZIndex*2-1),et.get(B._dragNode,"endpoints").forEach(function(Rt){Pt(Rt.dom).css("z-index",B._dragNodeZIndex*2)})),B._dragNode&&B._dragNode.__type=="group"&&(Pt(B._dragNode.dom).css("z-index",++B._dragGroupZIndex*2-1),et.get(B._dragNode,"endpoints").forEach(function(Rt){Pt(Rt.dom).css("z-index",B._dragGroupZIndex*2)})),B.emit("system.drag.start",{dragType:B._dragType,dragNode:B._dragNode,dragEndpoint:B._dragEndpoint,dragEdges:B._dragEdges,dragGroup:B._dragGroup,position:{clientX:Dt.clientX,clientY:Dt.clientY,canvasX:B._coordinateService._terminal2canvas("x",Dt.clientX),canvasY:B._coordinateService._terminal2canvas("y",Dt.clientY)}}),B.emit("events",{type:"drag:start",dragType:B._dragType,dragNode:B._dragNode,dragEndpoint:B._dragEndpoint,dragEdges:B._dragEdges,dragGroup:B._dragGroup,position:{clientX:Dt.clientX,clientY:Dt.clientY,canvasX:B._coordinateService._terminal2canvas("x",Dt.clientX),canvasY:B._coordinateService._terminal2canvas("y",Dt.clientY)}}),B._autoMoveDir=[]}},ct=function(Dt){var hn=0;if(Dt.button===hn&&B._dragType){var Rt=B._coordinateService._terminal2canvas("x",Dt.clientX),nn=B._coordinateService._terminal2canvas("y",Dt.clientY),ln=Dt.clientX-Me.x,_e=Dt.clientY-Me.y;if(B._dragType==="canvas:drag")B.move([ln+B._moveData[0],_e+B._moveData[1]]),Me={x:Dt.clientX,y:Dt.clientY};else if(B._dragType==="node:drag"){if(Ce.x===0&&Ce.y===0){Ce={x:Rt,y:nn};return}if(B._dragNode){var V=[B._dragNode],H=B._findUnion("nodes",B._dragNode);H&&H.length>0?(H.forEach(function(Hn){V=V.concat(B._unionData[Hn].nodes)}),V=et.uniqBy(V,"id")):B._rmSystemUnion(),Pt(B.svg).css("visibility","hidden"),Pt(B.wrapper).css("visibility","hidden"),V.forEach(function(Hn){B._moveNode(Hn,Hn.left+(Rt-Ce.x),Hn.top+(nn-Ce.y)),B._guidelineService.isActive&&B._guidelineService.draw(Hn,"node")}),Pt(B.svg).css("visibility","visible"),Pt(B.wrapper).css("visibility","visible"),Ce={x:Rt,y:nn},B._hoverGroup(B._dragNode),B.emit("system.node.move",{nodes:V}),B.emit("events",{type:"node:move",nodes:V}),B._autoMoveCanvas(Dt.clientX,Dt.clientY,{type:"node:drag",nodes:V},function(Hn){Ce.x+=Hn[0],Ce.y+=Hn[1]})}}else if(B._dragType==="group:drag"){if(Ce.x===0&&Ce.y===0){Ce={x:Rt,y:nn};return}if(B._dragNode){Pt(B.svg).css("visibility","hidden"),Pt(B.wrapper).css("visibility","hidden");var T=B._dragNode;B._moveGroup(T,T.left+(Rt-Ce.x),T.top+(nn-Ce.y)),B._guidelineService.isActive&&B._guidelineService.draw(T,"group"),Pt(B.svg).css("visibility","visible"),Pt(B.wrapper).css("visibility","visible"),Ce={x:Rt,y:nn},B.emit("system.group.move",{group:T}),B.emit("events",{type:"group:move",group:T}),B._autoMoveCanvas(Dt.clientX,Dt.clientY,{type:"group:drag",group:T},function(Hn){Ce.x+=Hn[0],Ce.y+=Hn[1]})}}else if(B._dragType==="endpoint:drag"){var z=B._coordinateService._terminal2canvas("x",Dt.clientX),J=B._coordinateService._terminal2canvas("y",Dt.clientY),Pe=B._dragEndpoint.type==="source"||B._dragEndpoint.type==="onlyConnect"||!B._dragEndpoint.type&&(!B._dragEndpoint._tmpType||B._dragEndpoint._tmpType==="source"),Oe=(B._dragEndpoint.type==="target"||!B._dragEndpoint.type&&B._dragEndpoint._tmpType==="target")&&B._dragEndpoint.type!=="onlyConnect";if(Pe&&B.linkable){var Ue=B._findUnion("endpoints",B._dragEndpoint),qe=[];if(!B._dragEdges||B._dragEdges.length===0){var Ct=B.theme.edge.Class,dt=[];Ue&&Ue.length>0?(Ue.forEach(function(Hn){dt=dt.concat(B._unionData[Hn].endpoints)}),dt=et.uniqBy(dt,function(Hn){return Hn.nodeId+"||"+Hn.id})):dt=[B._dragEndpoint],dt.forEach(function(Hn){var Jn,Ii=Hn.nodeType==="node"?B.getNode(Hn.nodeId):B.getGroup(Hn.nodeId),ti=Hn,Ht=(Jn={type:"endpoint"},_t(Jn,"type",B.theme.edge.type),_t(Jn,"shapeType",B.theme.edge.shapeType),_t(Jn,"orientationLimit",B.theme.endpoint.position),_t(Jn,"_sourceType",Hn.nodeType),_t(Jn,"sourceNode",Ii),_t(Jn,"sourceEndpoint",ti),_t(Jn,"arrow",B.theme.edge.arrow),_t(Jn,"arrowShapeType",B.theme.edge.arrowShapeType),_t(Jn,"arrowPosition",B.theme.edge.arrowPosition),_t(Jn,"arrowOffset",B.theme.edge.arrowOffset),_t(Jn,"draggable",B.theme.edge.draggable),_t(Jn,"label",B.theme.edge.label),_t(Jn,"labelPosition",B.theme.edge.labelPosition),_t(Jn,"labelOffset",B.theme.edge.labelOffset),_t(Jn,"labelUpdateInterval",B.theme.edge.labelUpdateInterval),_t(Jn,"isExpandWidth",B.theme.edge.isExpandWidth),Jn);Ht.options=et.assign({},Ht,{sourceNode:Ii.id,sourceEndpoint:ti.id});var Bn=B.edges.filter(function(Kn){return Kn.sourceEndpoint.id===Hn.id}).length+1;if(Bn>Hn.limitNum){console.warn("id\u4E3A".concat(Hn.id,"\u7684\u951A\u70B9\u9650\u5236\u4E86").concat(Hn.limitNum,"\u6761\u8FDE\u7EBF"));return}var Xn=new Ct(et.assign(Ht,{_global:B.global,_on:B.on.bind(B),_emit:B.emit.bind(B)}));Xn._init({_coordinateService:B._coordinateService}),Pt(B.svg).append(Xn.dom),Xn.labelDom&&Pt(B.wrapper).append(Xn.labelDom),Xn.arrowDom&&Pt(B.svg).append(Xn.arrowDom),qe.push(Xn)}),B._dragEdges=qe}else qe=B._dragEdges;Pt(B.svg).css("visibility","hidden"),Pt(B.wrapper).css("visibility","hidden");var Et={pos:[z,J]};qe.forEach(function(Hn){var Jn=Hn.sourceEndpoint._posLeft+Hn.sourceEndpoint._width/2,Ii=Hn.sourceEndpoint._posTop+Hn.sourceEndpoint._height/2,ti={pos:[Jn,Ii],orientation:Hn.sourceEndpoint.orientation};Hn.redraw(ti,Et)}),Pt(B.svg).css("visibility","visible"),Pt(B.wrapper).css("visibility","visible"),B.theme.endpoint.linkableHighlight&&(ft(B._dragEndpoint),Fn(Dt.clientX,Dt.clientY)),B._autoMoveCanvas(Dt.clientX,Dt.clientY,{type:"endpoint:drag",edges:qe},function(Hn){qe.forEach(function(Jn){var Ii=Jn.sourceEndpoint._posLeft+Jn.sourceEndpoint._width/2,ti=Jn.sourceEndpoint._posTop+Jn.sourceEndpoint._height/2,Ht={pos:[Ii,ti],orientation:Jn.sourceEndpoint.orientation};Et.pos[0]+=Hn[0],Et.pos[1]+=Hn[1],Jn.redraw(Ht,Et)})}),B.emit("system.drag.move",{dragType:B._dragType,pos:[Dt.clientX,Dt.clientY],dragNode:B._dragNode,dragEndpoint:B._dragEndpoint,dragEdges:qe}),B.emit("events",{type:"drag:move",dragType:B._dragType,pos:[Dt.clientX,Dt.clientY],dragNode:B._dragNode,dragEndpoint:B._dragEndpoint,dragEdges:qe})}else if(Oe&&B.disLinkable){for(var Cn=null,st=B.edges.length-1;st>=0;st--)if(B._dragEndpoint.id===et.get(B.edges,[st,"targetEndpoint","id"])&&B._dragEndpoint.nodeId===et.get(B.edges,[st,"targetNode","id"])){Cn=B.edges[st];break}if(Cn&&B._dragEdges.length===0&&(Cn._isDeletingEdge=!0,B._dragEdges=[Cn]),B._dragEdges.length!==0){var Zt=B._dragEdges[0],zn=Zt.sourceEndpoint._posLeft+Zt.sourceEndpoint._width/2,Lt=Zt.sourceEndpoint._posTop+Zt.sourceEndpoint._height/2,En={pos:[zn,Lt],orientation:Zt.sourceEndpoint.orientation},qn={pos:[z,J]};Zt.redraw(En,qn)}B.theme.endpoint.linkableHighlight&&(ft(B._dragEndpoint),Fn(Dt.clientX,Dt.clientY))}}else if(B._dragType==="link:drag")B._dragPathEdge.edge._updatePath(B._dragPathEdge.path,{x:Rt,y:nn});else if(B._dragType==="node:resize")B._dragNode.resize(Rt,nn);else if(B._dragType==="group:resize"){var ui=B._getGroupPos(B._dragGroup),Ai=Rt-ui.left,or=nn-ui.top;B._dragGroup.setSize(Ai,or)}}},ut=function(Dt){var hn=0;if(Dt.button===hn){var Rt=[];if(ot(),B._dragType==="endpoint:drag"&&B._dragEdges&&B._dragEdges.length!==0){var nn=B._coordinateService._terminal2canvas("x",Dt.clientX),ln=B._coordinateService._terminal2canvas("y",Dt.clientY),_e=null,V=et.concat(B.nodes,B.groups);V.forEach(function(Et){Et.endpoints&&Et.endpoints.forEach(function(Cn){var st=Cn._posLeft+Cn._width+(et.get(Cn,"expandArea.right")||B.theme.endpoint.expandArea.right),Zt=Cn._posTop+Cn._height+(et.get(Cn,"expandArea.bottom")||B.theme.endpoint.expandArea.bottom),zn=Cn._posLeft-(et.get(Cn,"expandArea.left")||B.theme.endpoint.expandArea.left),Lt=Cn._posTop-(et.get(Cn,"expandArea.top")||B.theme.endpoint.expandArea.top);nn>zn&&nn<st&&ln>Lt&&ln<Zt&&(_e=Cn)})});var H=!1;if((!_e||_e.type==="source"||_e._tmpType==="source")&&(H=!0),H||(H=et.some(B._dragEdges,function(Et){return!(0,be.default)(Et.sourceEndpoint.scope,_e.scope,et.get(B,"global.isScopeStrict"))})),_e&&_e.limitNum!==void 0){var T=B.edges.filter(function(Et){return Et.targetEndpoint.id===_e.id}).length+B._dragEdges.length;T>_e.limitNum&&(console.warn("id\u4E3A".concat(_e.id,"\u7684\u951A\u70B9\u9650\u5236\u4E86").concat(_e.limitNum,"\u6761\u8FDE\u7EBF")),H=!0)}if(H)B._dragEdges.forEach(function(Et){Et._isDeletingEdge?B.removeEdge(Et):Et.destroy(!Et._isDeletingEdge)}),B._dragEdges.forEach(function(Et){if(et.get(Et,"sourceEndpoint._tmpType")==="source"){var Cn=et.some(B.edges,function(Zt){return Et.sourceNode.id===Zt.sourceNode.id&&Et.sourceEndpoint.id===Zt.sourceEndpoint.id});!Cn&&(Et.sourceEndpoint._tmpType=void 0)}if(et.get(Et,"targetEndpoint._tmpType")==="target"){var st=et.some(B.edges,function(Zt){return Et.targetNode.id===Zt.targetNode.id&&Et.targetEndpoint.id===Zt.targetEndpoint.id});!st&&(Et.targetEndpoint._tmpType=void 0)}});else{var z=[],J=[],Pe=B._dragEdges.filter(function(Et){if(!B.theme.edge.isRepeat){var Cn=et.some(B.edges,function(qn){var ui=!1;return Et.sourceNode&&(qn.type==="node"?ui=Et.sourceNode.id===qn.sourceNode.id:ui=Et.sourceNode.id===qn.sourceNode.id&&Et.sourceEndpoint.id===qn.sourceEndpoint.id),_e.nodeId&&(qn.type==="node"?ui=ui&&et.get(Et,"targetNode.id")===et.get(qn,"targetNode.id"):ui=ui&&_e.nodeId===et.get(qn,"targetNode.id")&&_e.id===et.get(qn,"targetEndpoint.id")),ui&&Et._isDeletingEdge&&(ui=!1),ui});if(Cn)return console.warn("id\u4E3A".concat(Et.sourceEndpoint.id,"-").concat(_e.id,"\u7684\u7EBF\u6761\u8FDE\u63A5\u91CD\u590D\uFF0C\u8BF7\u68C0\u67E5")),Et.destroy(),!1}var st=et.get(Et,"targetNode.id"),Zt=et.get(Et,"targetEndpoint.id"),zn=_e.nodeType==="node"?B.getNode(_e.nodeId):B.getGroup(_e.nodeId),Lt=_e;st&&Zt&&"".concat(st,"||").concat(Zt)!=="".concat(zn.id,"||").concat(Lt.id)?(z.push(et.cloneDeep(Et)),J.push({edge:Et,preTargetNodeId:st,preTargetPointId:Zt,currentTargetNodeId:zn.id,currentTargetPointId:Lt.id}),Et.targetEndpoint.connectedNum-=1,_e.connectedNum+=1):(Et.sourceEndpoint.connectedNum+=1,_e.connectedNum+=1),Et._create({id:Et.id&&!Et._isDeletingEdge?Et.id:"".concat(Et.sourceEndpoint.id,"-").concat(_e.id),targetNode:zn,_targetType:_e.nodeType,targetEndpoint:Lt,type:"endpoint"});var En=Et.isConnect?Et.isConnect():!0;return En?(Et._isDeletingEdge?delete Et._isDeletingEdge:(Et.mounted&&Et.mounted(),B.edges.push(Et)),Et.type==="endpoint"&&!et.get(Et,"sourceEndpoint.type")&&!et.get(Et,"sourceEndpoint._tmpType")&&(Et.sourceEndpoint._tmpType="source"),Et.type==="endpoint"&&!et.get(Et,"targetEndpoint.type")&&!et.get(Et,"targetEndpoint._tmpType")&&(Et.targetEndpoint._tmpType="target"),st&&Zt&&"".concat(st,"||").concat(Zt)==="".concat(zn.id,"||").concat(Lt.id)?!1:Et):(console.warn("id\u4E3A".concat(Et.sourceEndpoint.id,"-").concat(_e.id,"\u7684\u7EBF\u6761\u65E0\u6CD5\u8FDE\u63A5\uFF0C\u8BF7\u68C0\u67E5")),Et.destroy(),!1)});z.length!==0&&Pe.length!==0?(B.pushActionQueue({type:"system:reconnectEdges",data:{delLinks:z,addLinks:Pe,info:J}}),B.emit("system.link.reconnect",{delLinks:z,addLinks:Pe,info:J}),B.emit("events",{type:"link:reconnect",delLinks:z,addLinks:Pe,info:J})):(z.length!==0&&z.forEach(function(Et){B.pushActionQueue({type:"system:removeEdges",data:z}),B.emit("system.link.delete",{link:Et}),B.emit("events",{type:"link:delete",link:Et})}),Pe.length!==0&&(B.pushActionQueue({type:"system:addEdges",data:B._dragEdges}),B.emit("system.link.connect",{links:B._dragEdges}),B.emit("events",{type:"link:connect",links:B._dragEdges})))}}if((B._dragType==="node:drag"||B._dragType==="group:drag")&&B._dragNode){var Oe=B._dragType==="node:drag"?"node":"group",Ue=B._dragNode,qe=function(Cn){var st=null,Zt=null,zn=Cn.left,Lt=Cn.left+Cn.getWidth(),En=Cn.top,qn=Cn.top+Cn.getHeight();if(Cn.group){var ui=B.getGroup(Cn.group),Ai=ui.left,or=ui.top;Lt<0||zn>ui.getWidth()||qn<0||En>ui.getHeight()?(zn+=Ai,En+=or,Lt+=Ai,qn+=or,st=ui):(st=ui,Zt=ui)}B._hoverGroup(Ue),Zt||(Ue.__type!=="group"||B.theme.group.includeGroups)&&(Zt=B._findGroupByCoordinates(Cn,zn,En,Lt,qn));var Hn=[];if(st){if(st!==Zt){var Jn=Oe==="node"?B.removeNode(Ue.id,!0,!0):B.removeGroup(Ue.id,!0),Ii=Oe==="node"?Jn.nodes[0]:Jn.group;Hn=Jn.edges;var ti={top:En,left:zn,dom:Ii.dom,_isDeleteGroup:!0},Ht=B.actionQueue[B.actionQueueIndex];Ht.type==="system:moveNodes"&&(Ht.data._isDraging=!0),B.pushActionQueue({type:"system:groupRemoveMembers",data:{group:st,nodes:Oe==="node"?[Ii]:[],groups:Oe==="group"?[Ii]:[],_isDraging:!0}}),B.emit("events",{type:"system.group.removeMembers",group:st,nodes:Oe==="node"?[Ii]:[],groups:Oe==="group"?[Ii]:[]}),B.emit("system.group.removeMembers",{group:st,nodes:Oe==="node"?[Ii]:[],groups:Oe==="group"?[Ii]:[]}),Zt&&((0,be.default)(Ue.scope,Zt.scope,et.get(B,"global.isScopeStrict"))?(ti.top-=Zt.top,ti.left-=Zt.left,ti.group=Zt.id,ti._isDeleteGroup=!1,B.popActionQueue(),B.pushActionQueue({type:"system:groupAddMembers",data:{sourceGroup:st,targetGroup:Zt,nodes:Oe==="node"?[Ii]:[],groups:Oe==="group"?[Ii]:[],_isDraging:!0}}),B.emit("events",{type:"system.group.addMembers",nodes:Oe==="node"?[Ii]:[],groups:Oe==="group"?[Ii]:[],group:Zt}),B.emit("system.group.addMembers",{nodes:Oe==="node"?[Ii]:[],groups:Oe==="group"?[Ii]:[],group:Zt}),B._clearHoverGroup(Zt)):console.warn("nodeId\u4E3A".concat(dragNode.id,"\u7684\u8282\u70B9\u548CgroupId").concat(Zt.id,"\u7684\u8282\u70B9\u7EC4scope\u503C\u4E0D\u7B26\uFF0C\u65E0\u6CD5\u52A0\u5165"))),Ii._init(ti),Oe==="node"?B.addNode(Ii,!0):(B.addGroup(Ii,Jn.groups.concat(Jn.nodes),{notResize:!0,notAdaptorPos:!0},!0),Jn.edges.length>0&&B.addEdges(Jn.edges,!0))}}else if(Zt)if((0,be.default)(Ue.scope,Zt.scope,et.get(B,"global.isScopeStrict"))){var Bn=Oe==="node"?B.removeNode(Ue.id,!0,!0):B.removeGroup(Ue.id,!0),Xn=Oe==="node"?Bn.nodes[0]:Bn.group;Hn=Bn.edges,Xn._init({top:En-Zt.top,left:zn-Zt.left,dom:Xn.dom,group:Zt.id}),Oe==="node"?B.addNode(Xn,!0):(B.addGroup(Xn,Bn.groups.concat(Bn.nodes),{notResize:!0,notAdaptorPos:!0,posType:"absolute"},!0),Bn.edges.length>0&&B.addEdges(Bn.edges,!0));var Kn=B.actionQueue[B.actionQueueIndex];Kn.type==="system:moveNodes"&&(Kn.data._isDraging=!0),B.pushActionQueue({type:"system:groupAddMembers",data:{sourceGroup:void 0,targetGroup:Zt,nodes:Oe==="node"?[Xn]:[],groups:Oe==="group"?[Xn]:[],_isDraging:!0}}),B.emit("events",{type:"system.group.addMembers",nodes:Oe==="node"?[Xn]:[],groups:Oe==="group"?[Xn]:[],group:Zt}),B.emit("system.group.addMembers",{nodes:Oe==="node"?[Xn]:[],groups:Oe==="group"?[Xn]:[],group:Zt}),B._clearHoverGroup(Zt)}else console.warn("nodeId\u4E3A".concat(dragNode.id,"\u7684\u8282\u70B9\u548CgroupId").concat(Zt.id,"\u7684\u8282\u70B9\u7EC4scope\u503C\u4E0D\u7B26\uFF0C\u65E0\u6CD5\u52A0\u5165"));Hn.forEach(function(Bi){Bi.redraw()}),Ue.endpoints.forEach(function(Bi){Bi.updatePos&&Bi.updatePos()}),Ue._isMoving=!1},Ct=[Ue],dt=B._findUnion("".concat(Oe,"s"),Ue);dt&&dt.length>0&&(dt.forEach(function(Et){Ct=Ct.concat(B._unionData[Et]["".concat(Oe,"s")])}),Ct=et.uniqBy(Ct,"id")),Ct.forEach(function(Et){qe(Et)}),Rt=Ct,B._rmSystemUnion()}B._dragType==="group:resize"&&B._dragGroup&&(B.emit("events",{type:"system.group.resize",group:B._dragGroup}),B.emit("system.group.resize",{group:B._dragGroup})),(B._dragType==="canvas:drag"||!B._dragType)&&!B.isSelectMode&&(B.emit("system.canvas.click"),B.emit("events",{type:"canvas:click"})),(B._dragType==="node:drag"||B._dragType==="group:drag")&&B.pushActionQueue({type:"_system:dragNodeEnd"}),B.emit("system.drag.end",{dragType:B._dragType,dragNode:B._dragNode,dragEndpoint:B._dragEndpoint,dragEdges:B._dragEdges,dragGroup:B._dragGroup,unionItems:Rt}),B.emit("events",{type:"drag:end",dragType:B._dragType,dragNode:B._dragNode,dragEndpoint:B._dragEndpoint,dragEdges:B._dragEdges,dragGroup:B._dragGroup,unionItems:Rt}),Qn()}},jt=function(Dt){B._dragEdges&&B._dragEdges.length>0&&B._dragEdges.forEach(function(hn){hn._isDeletingEdge?B.removeEdge(hn):hn.destroy(!hn._isDeletingEdge)}),Qn()};this.root.addEventListener("mousedown",Fe),this.root.addEventListener("mousemove",ct),this.root.addEventListener("mouseup",ut),this.root.addEventListener("mouseleave",function(qt){var Dt=qt.toElement;if(!!Dt){var hn=Dt.className;hn&&hn.indexOf("butterfly-tooltip")===-1&&jt()}})}},{key:"getNode",value:function(B){var Me=this._cache.nodes[B];return Me||(Me=et.find(this.nodes,function(Ce){return Ce.id===B}),Me&&(this._cache.nodes[Me.id]=Me)),Me}},{key:"addNodes",value:function(B,Me){var Ce=this,lt=document.createDocumentFragment(),vt=Pt(this.wrapper),ft=B.filter(function(ot){if(ot.group){var yt=Ce.getGroup(ot.group);if(!yt)return console.warn("\bnodeId\u4E3A".concat(ot.id,"\u7684\u8282\u70B9\u627E\u4E0D\u5230groupId\u4E3A").concat(ot.group,"\u7684\u8282\u70B9\u7EC4\uFF0C\u56E0\u6B64\u65E0\u6CD5\u6E32\u67D3")),!1}return!0}).map(function(ot){var yt=null;if(ot instanceof E.default||ot.__type==="node")yt=ot;else{var Ut=ot.Class||Ce._NodeClass;yt=new Ut(et.assign({},Ce.global.isCloneDeep?et.cloneDeep(ot):ot,{_global:Ce.global,_on:Ce.on.bind(Ce),_emit:Ce.emit.bind(Ce),_endpointLimitNum:Ce.theme.endpoint.limitNum,draggable:ot.draggable!==void 0?ot.draggable:Ce.draggable}))}if(Ce._isExistNode(yt)){console.warn("node:".concat(yt.id," has existed"));return}var Fn={};yt.dom&&(Fn.dom=yt.dom),yt._init(Fn),Ce.nodes.push(yt);var Qn=yt.group?Ce.getGroup(yt.group):null;return Qn?(0,be.default)(yt.scope,Qn.scope,et.get(Ce,"global.isScopeStrict"))?Qn._appendChildren([yt]):console.warn("nodeId\u4E3A".concat(yt.id,"\u7684\u8282\u70B9\u548CgroupId").concat(Qn.id,"\u7684\u8282\u70B9\u7EC4scope\u503C\u4E0D\u7B26\uFF0C\u65E0\u6CD5\u52A0\u5165")):lt.appendChild(yt.dom),Ce._cache.nodes[yt.id]=yt,yt}).filter(function(ot){return!!ot});return vt.append(lt),ft.forEach(function(ot){ot._createEndpoint(Me),Pt(ot.dom).css("z-index",Ce._dragNodeZIndex*2-1),et.get(ot,"endpoints").forEach(function(yt){Pt(yt.dom).css("z-index",Ce._dragNodeZIndex*2)}),!Me&&ot.mounted&&ot.mounted()}),ft&&ft.length>0&&!Me&&(this.pushActionQueue({type:"system:addNodes",data:ft}),this.emit("system.nodes.add",{nodes:ft}),this.emit("events",{type:"nodes:add",nodes:ft})),ft}},{key:"addNode",value:function(B,Me){return this.addNodes([B],Me)[0]}},{key:"removeNode",value:function(B,Me,Ce){return this.removeNodes([B],Me,Ce)}},{key:"removeNodes",value:function(B,Me,Ce){var lt=this,vt=[];vt=B.map(function(yt){return yt instanceof E.default?yt.id:yt});var ft=[],ot=[];return vt.forEach(function(yt){var Ut=et.findIndex(lt.nodes,function(ut){return ut.id===yt});if(Ut===-1){console.warn("\u627E\u4E0D\u5230id\u4E3A\uFF1A".concat(yt,"\u7684\u8282\u70B9"));return}var Fn=lt.getNeighborEdges(yt);Me||lt.removeEdges(Fn,!0,!0);var Qn=lt.nodes[Ut];Qn.destroy(Ce);var Fe=lt.nodes.splice(Ut,1);if(Qn.group){var ct=lt.getGroup(Qn.group);ct&&(ct.nodes=ct.nodes.filter(function(ut){return ut.id!==Qn.id}))}Fe.length>0&&(ft=ft.concat(Fe),ot=ot.concat(Fn)),delete lt._cache.nodes[yt]}),ft.length>0&&(Ce||(this.pushActionQueue({type:"system:removeNodes",data:{nodes:ft,edges:ot}}),this.emit("system.nodes.delete",{nodes:ft,edges:ot}),this.emit("events",{type:"nodes:delete",nodes:ft,edges:ot}))),{nodes:ft,edges:ot}}},{key:"getNeighborNodes",value:function(B){var Me=this,Ce=[],lt=et.find(this.nodes,function(vt){return B===vt.id});return lt||console.warn("\u627E\u4E0D\u5230id\u4E3A".concat(B,"\u7684\u8282\u70B9")),this.edges.forEach(function(vt){vt.sourceNode&&vt.sourceNode.id===B?Ce.push(vt.targetNode.id):vt.targetNode&&vt.targetNode.id===B&&Ce.push(vt.sourceNode.id)}),Ce.map(function(vt){return Me.getNode(vt)})}},{key:"getNeighborNodesAndEdgesByLevel",value:function(B){var Me=B.node,Ce=B.endpoint,lt=B.type,vt=lt===void 0?"out":lt,ft=B.level,ot=ft===void 0?Infinity:ft,yt=B.iteratee,Ut=yt===void 0?function(){return!0}:yt;if(!Me||!this.nodes.length)return{nodes:[],edges:[]};if(ot==0||!this.edges.length)return{nodes:[Me],edges:[]};var Fn=[],Qn=[],Fe=new Set,ct=this._getAdjcentTable(vt);if(Ce?Fn=et.get(ct,[Me.id,Ce.id],[]).map(function(hn){return[].concat(Tt(hn),[1])}):Fn=(Object.values(et.get(ct,Me.id,{}))||[]).flatMap(function(hn){return hn.map(function(Rt){return Rt.concat(1)})}),Fe.add(Me.id),!Fn.length)return{nodes:[Me],edges:[]};for(var ut=function(){var Rt=Fn.shift(),nn=Be(Rt,3),ln=nn[0],_e=nn[1],V=nn[2];if(Fe.has(ln.id)||V>ot||!Ut(ln,_e,V))return"continue";Qn=(Object.values(et.get(ct,ln.id,{}))||[]).forEach(function(H){H.forEach(function(T){var z=Be(T,2),J=z[0],Pe=z[1];Fe.has(J.id)||Fn.push([].concat(Tt(T),[V+1]))})}),Fe.add(ln.id)};Fn.length;)var jt=ut();var qt=new Set,Dt=new Set;return this.edges.forEach(function(hn){var Rt=hn.sourceNode,nn=hn.sourceEndpoint,ln=hn.targetNode,_e=hn.targetEndpoint;Fe.has(Rt.id)&&Fe.has(ln.id)&&(qt.add(Rt),qt.add(ln),Dt.add(hn))}),{nodes:Tt(qt),edges:Tt(Dt)}}},{key:"_getAdjcentTable",value:function(B){var Me={};return this.edges.forEach(function(Ce){var lt=Ce.sourceNode,vt=Ce.sourceEndpoint,ft=Ce.targetNode,ot=Ce.targetEndpoint,yt=lt.id,Ut=vt.id,Fn=ft.id,Qn=ot.id;B!=="out"&&(Me[Fn]||(Me[Fn]={}),Me[Fn][Qn]||(Me[Fn][Qn]=[]),Me[Fn][Qn].push([lt,vt])),B!=="in"&&(Me[yt]||(Me[yt]={}),Me[yt][Ut]||(Me[yt][Ut]=[]),Me[yt][Ut].push([ft,ot]))}),this.nodes.forEach(function(Ce){Me[Ce.id]||(Me[Ce.id]={})}),Me}},{key:"_isExistNode",value:function(B){var Me=this.nodes.filter(function(Ce){return Ce.id===B.id});return Me.length>0}},{key:"_moveNode",value:function(B,Me,Ce,lt){var vt=!!B.group;if(vt){var ft=this.getGroup(B.group),ot=ft.type||this.theme.group.type;if(ot==="inner"){var yt=Pt(ft.dom).width(),Ut=Pt(ft.dom).height(),Fn=Pt(B.dom).width(),Qn=Pt(B.dom).height();if(Me<0||Me+Fn>yt||Ce<0||Ce+Qn>Ut)return}}lt||this.pushActionQueue({type:"system:moveNodes",data:{node:B,top:Ce,left:Me}}),B._moveTo(Me,Ce),B.endpoints&&B.endpoints.forEach(function(Fe){Fe.updatePos()}),this.edges.forEach(function(Fe){if(Fe.type==="endpoint"){var ct=et.find(B.endpoints,function(jt){return jt.nodeId===Fe.sourceNode.id&&!!Fe.sourceNode.getEndpoint(jt.id,"source")||jt.nodeId===Fe.targetNode.id&&!!Fe.targetNode.getEndpoint(jt.id,"target")});Fe._hasDragged=!1,Fe._breakPoints=[],ct&&Fe.redraw()}else if(Fe.type==="node"){var ut=Fe.sourceNode.id===B.id||Fe.targetNode.id===B.id;Fe._hasDragged=!1,Fe._breakPoints=[],ut&&Fe.redraw()}})}},{key:"_addEndpoint",value:function(B,Me,Ce){var lt={nodeType:Me,_coordinateService:this._coordinateService};if(B._init(lt),!B._isInitedDom){var vt=B.dom;if(et.get(B,"_node.group")){var ft=this.getGroup(B._node.group);Pt(ft.dom).append(vt)}else Pt(this.wrapper).prepend(vt);var ot=Pt(B._node.dom).attr("z-index");Pt(vt).css("z-index",ot),B.updatePos()}B.mounted&&B.mounted()}},{key:"_getAllEndpoints",value:function(){var B=[];return B=B.concat(this.nodes.map(function(Me){return Me.endpoints})),B=B.concat(this.groups.map(function(Me){return Me.endpoints})),B=B.filter(function(Me){return!!Me}),et.flatten(B)}},{key:"getGroup",value:function(B){return et.find(this.groups,function(Me){return Me.id===B})}},{key:"addGroup",value:function(B,Me,Ce,lt){var vt=this,ft=Pt(this.wrapper),ot=B.Class||O.default,yt=[],Ut=et.get(Ce,"posType")==="absolute",Fn=et.get(Ce,"notResize"),Qn=et.get(Ce,"notAdaptorPos"),Fe=null;if(B instanceof O.default?Fe=B:Fe=new ot(et.assign({},this.isCloneDeep?et.cloneDeep(B):B,{_global:this.global,_emit:this.emit.bind(this),_on:this.on.bind(this),_endpointLimitNum:this.theme.endpoint.limitNum,draggable:B.draggable!==void 0?B.draggable:this.draggable})),this._isExistGroup(Fe)){console.warn("group:".concat(Fe.id," has existed"));return}if(this.theme.group.includeGroups||(delete Fe.group,delete Fe._group),Fe._init(),Fe.group){var ct=this.getGroup(Fe.group);if(!ct){console.warn("\bgroupId\u4E3A".concat(Fe.id,"\u7684\u8282\u70B9\u7EC4\u627E\u4E0D\u5230groupId\u4E3A").concat(node.group,"\u7684\u8282\u70B9\u7EC4\uFF0C\u56E0\u6B64\u65E0\u6CD5\u6E32\u67D3"));return}(0,be.default)(Fe.scope,ct.scope,et.get(this,"global.isScopeStrict"))?ct._appendChildren([Fe]):console.warn("groupId\u4E3A".concat(Fe.id,"\u7684\u8282\u70B9\u7EC4\u548CgroupId").concat(ct.id,"\u7684\u8282\u70B9\u7EC4scope\u503C\u4E0D\u7B26\uFF0C\u65E0\u6CD5\u52A0\u5165")),Fe.endpoints.forEach(function(nn){nn.updatePos()})}else ft.prepend(Fe.dom);if(Fe._createEndpoint(),Fe.mounted&&Fe.mounted(),this.groups.push(Fe),Me&&Me.length>0){if(Me=Me.filter(function(nn){return(0,be.default)(nn.scope,Fe.scope,et.get(vt,"global.isScopeStrict"))&&(nn.group===Fe.id||nn.group==null)}),!Qn){var ut=Infinity,jt=Infinity;Me.forEach(function(nn){Ut||(nn.left<ut&&(ut=nn.left),nn.top<jt&&(jt=nn.top))}),Fe._moveTo(ut-et.get(Ce,"padding",5),jt-et.get(Ce,"padding",5))}if(yt=Me.map(function(nn){var ln=null;if(nn.__type==="node"){var _e=vt.getNode(nn.id);if(_e){var V=vt._getGroupPos(Fe);vt.removeNode(_e.id,!0,!0),_e._init({dom:_e.dom,top:_e.top-V.top,left:_e.left-V.left,group:Fe.id}),ln=vt.addNode(_e,!0)}else{var H=null;if(nn instanceof E.default||nn.__type==="node")H=nn;else{var T=nn.Class||vt._NodeClass;H=new T(et.assign({},vt.global.isCloneDeep?et.cloneDeep(nn):nn,{_global:vt.global,_on:vt.on.bind(vt),_emit:vt.emit.bind(vt),_endpointLimitNum:vt.theme.endpoint.limitNum,draggable:nn.draggable!==void 0?nn.draggable:vt.draggable}))}Ut||(H.top=H.top-Fe.top,H.left=H.left-Fe.left),H.group=Fe.id,ln=vt.addNode(H)}}else{var z=vt.getGroup(nn.id);if(z){var J=vt.removeGroup(z.id,!0);z._init({dom:z.dom,top:z.top-Fe.top,left:z.left-Fe.left,group:Fe.id}),ln=vt.addGroup(z,[],{},!0),z.addNodes(J.nodes.map(function(Ue){return Ue.left-=Fe.left,Ue.top-=Fe.top,Ue}),!0),vt.addEdges(J.edges||[],!0)}else{var Pe=null;if(nn instanceof O.default||nn.__type==="group")Pe=nn;else{var Oe=nn.Class||vt._GroupClass;_newGroupObj=new Oe(et.assign({},vt.global.isCloneDeep?et.cloneDeep(nn):nn,{_global:vt.global,_on:vt.on.bind(vt),_emit:vt.emit.bind(vt),_endpointLimitNum:vt.theme.endpoint.limitNum,draggable:nn.draggable!==void 0?nn.draggable:vt.draggable}))}Ut||(_newGroupObj.top=_newGroupObj.top-Pe.top,_newGroupObj.left=_newGroupObj.left-Pe.left),_newGroupObj.group=_newGroupObj.id,ln=vt.addGroup(_newGroupObj)}}return ln}),!Fn){var qt=-Infinity,Dt=-Infinity;yt.forEach(function(nn){var ln=Pt(nn.dom).width(),_e=Pt(nn.dom).height();qt<nn.left+ln&&(qt=nn.left+ln),Dt<nn.top+_e&&(Dt=nn.top+_e)}),Fe.setSize(qt+et.get(Ce,"padding",5)*2,Dt+et.get(Ce,"padding",5)*2)}}if(!lt){var hn=[],Rt=[];yt.forEach(function(nn){nn.__type==="node"?hn.push(nn):Rt.push(nn)}),this.pushActionQueue({type:"system:addGroups",data:[{group:Fe,nodes:hn,groups:Rt}]}),this.emit("system.group.add",{group:Fe,addNodes:hn,addGroups:Rt}),this.emit("events",{type:"group:add",group:Fe,addNodes:hn,addGroups:Rt})}return Fe}},{key:"addGroups",value:function(B){var Me=this,Ce=function(ft){var ot={};return ft.forEach(function(yt){ot[yt.id]===void 0?ot[yt.id]=0:ot[yt.id]++,yt.group&&(ot[yt.group]===void 0?ot[yt.group]=0:ot[yt.group]++)}),B.sort(function(yt,Ut){return ot[Ut.id]-ot[yt.id]})},lt=Ce(B);return lt.map(function(vt){return Me.addGroup(vt)}).filter(function(vt){return vt})}},{key:"removeGroup",value:function(B,Me){var Ce=this,lt=void 0;B instanceof O.default?lt=B.id:lt=B;var vt=this.getGroup(lt);if(!vt){console.warn("\u672A\u627E\u5230id\u4E3A".concat(lt,"\u7684\u8282\u70B9\u7EC4"));return}var ft=[],ot=this._getGroupPos(vt),yt=vt.nodes.map(function(Fe){var ct=Ce.removeNode(Fe.id,!0,!0),ut=ct.nodes[0],jt=ct.edges;return ut._init({top:Fe.top+ot.top,left:Fe.left+ot.left,dom:Fe.dom,_isDeleteGroup:!0}),Ce.addNode(ut,!0),jt.forEach(function(qt){qt.redraw()}),ft=ft.concat(jt),ut}),Ut=vt.groups.map(function(Fe){var ct=Ce.getNeighborEdges(Fe.id,"group"),ut=et.findIndex(Ce.groups,function(jt){return jt.id===Fe.id});return Ce.groups.splice(ut,1),Fe.destroy(!0),Fe._init({top:Fe.top+ot.top,left:Fe.left+ot.left,dom:Fe.dom,_isDeleteGroup:!0}),Ce.addGroup(Fe,[],{},!0),Fe.endpoints.forEach(function(jt){jt.updatePos()}),ct.forEach(function(jt){jt.redraw()}),Fe});vt.groups=[];var Fn=this.getNeighborEdges(vt.id,"group");this.removeEdges(Fn,Me,!0);var Qn=et.findIndex(this.groups,function(Fe){return Fe.id===lt});return this.groups.splice(Qn,1)[0],vt.destroy(Me),Me||this.pushActionQueue({type:"system:removeGroup",data:{group:vt,nodes:yt||[],groups:Ut||[]}}),{group:vt,nodes:yt||[],edges:Fn||[],groups:Ut||[]}}},{key:"removeGroups",value:function(){var B=this,Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ce=arguments.length>1?arguments[1]:void 0,lt=[];lt=Me.map(function(ft){return ft instanceof O.default?ft.id:ft});var vt=lt.map(function(ft){return B.removeGroup(ft,Ce)});return{groups:vt}}},{key:"_isExistGroup",value:function(B){var Me=this.groups.filter(function(Ce){return Ce.id===B.id});return Me.length>0}},{key:"_moveGroup",value:function(B,Me,Ce,lt){lt||this.pushActionQueue({type:"system:moveGroups",data:{group:B,top:Ce,left:Me}}),B._moveTo(Me,Ce);for(var vt=_t({},B.id,"group"),ft=[B];ft.length>0;){var ot=ft.pop();ot.nodes.length>0&&ot.nodes.forEach(function(yt){vt[yt.id]="node"}),ot.groups.length>0&&(ot.groups.forEach(function(yt){vt[yt.id]="group"}),ft=ft.concat(ot.groups))}this.edges.forEach(function(yt){var Ut=et.get(yt,"sourceNode.id"),Fn=et.get(yt,"targetNode.id"),Qn=et.get(yt,"_sourceType"),Fe=et.get(yt,"_targetType"),ct=vt[Ut]===Qn||vt[Fn]===Fe;ct&&yt.redraw()})}},{key:"_findGroupByCoordinates",value:function(B,Me,Ce,lt,vt){var ft=this.groups;B.__type==="group"&&(ft=this.groups.filter(function(jt){return jt.id!==B.id}));for(var ot=0;ot<ft.length;ot++){var yt=ft[ot],Ut=this._getGroupPos(yt),Fn=Ut.left,Qn=Ut.left+yt.getWidth(),Fe=Ut.top,ct=Ut.top+yt.getHeight(),ut=!1;if(lt!==void 0&&vt!==void 0?ut=Fn<=Me&&Qn>=lt&&Fe<=Ce&&ct>=vt:ut=Me>=Fn&&Me<=Qn&&Ce>=Fe&&Ce<=ct,ut&&yt.id!==B.group)return yt}}},{key:"_hoverGroup",value:function(B){var Me=this;this._hoverGroupQueue.push(B),this._hoverGroupTimer||(this._hoverGroupTimer=setInterval(function(){if(Me._hoverGroupQueue.length===0){clearInterval(Me._hoverGroupTimer),Me._hoverGroupTimer=void 0;return}var Ce=Me._hoverGroupQueue.pop(),lt=Me._findGroupByCoordinates(Ce,Ce.left,Ce.top);lt&&lt.scope&&lt.scope!==Ce.scope||(lt?(!Me._hoverGroupObj||lt.id!==Me._hoverGroupObj.id)&&(Me._hoverGroupObj&&Pt(Me._hoverGroupObj.dom).removeClass("butterfly-group-hover"),Pt(lt.dom).addClass("butterfly-group-hover"),Me._hoverGroupObj=lt):(Me._hoverGroupObj&&Pt(Me._hoverGroupObj.dom).removeClass("butterfly-group-hover"),Me._hoverGroupObj=void 0),Me._hoverGroupQueue=[])},200))}},{key:"_clearHoverGroup",value:function(B){this._hoverGroupObj&&Pt(this._hoverGroupObj.dom).removeClass("butterfly-group-hover"),this._hoverGroupTimer=void 0,this._hoverGroupObj=void 0,this._hoverGroupQueue=[]}},{key:"_getGroupPos",value:function(B){for(var Me=B,Ce=0,lt=0;Me;)Ce+=Me.top,lt+=Me.left,Me=Me._group;return{top:Ce,left:lt}}},{key:"getEdge",value:function(B){return et.find(this.edges,function(Me){return Me.id===B})}},{key:"addEdges",value:function(B,Me){var Ce=this;Pt(this.svg).css("visibility","hidden");var lt=document.createDocumentFragment(),vt=document.createDocumentFragment(),ft=B.map(function(ot){if(ot instanceof D.default)return ot._init({_coordinateService:Ce._coordinateService}),lt.appendChild(ot.dom),ot.eventHandlerDom&&lt.appendChild(ot.eventHandlerDom),ot.labelDom&&vt.appendChild(ot.labelDom),ot.arrowDom&&lt.appendChild(ot.arrowDom),Ce.edges.push(ot),ot.mounted&&ot.mounted(),ot;var yt=ot.Class||Ce.theme.edge.Class;if(ot.type==="endpoint"){var Ut,Fn=null,Qn=null,Fe=ot._sourceType,ct=ot._targetType;if(ot.sourceNode instanceof E.default||ot.sourceNode.__type==="node")Fe="node",Fn=ot.sourceNode;else if(ot.sourceNode instanceof O.default||ot.sourceNode.__type==="group")Fe="group",Fn=ot.sourceNode;else if(ot._sourceType)Fn=Fe==="node"?Ce.getNode(ot.sourceNode):Ce.getGroup(ot.sourceNode);else{var ut=Ce.getNode(ot.sourceNode);ut?(Fe="node",Fn=ut):(Fe="group",Fn=Ce.getGroup(ot.sourceNode))}if(ot.targetNode instanceof E.default||ot.targetNode.__type==="node")ct="node",Qn=ot.targetNode;else if(ot.targetNode instanceof O.default||ot.targetNode.__type==="group")ct="group",Qn=ot.targetNode;else if(ot._targetType)Qn=ct==="node"?Ce.getNode(ot.targetNode):Ce.getGroup(ot.targetNode);else{var jt=Ce.getNode(ot.targetNode);jt?(ct="node",Qn=jt):(ct="group",Qn=Ce.getGroup(ot.targetNode))}if(!Fn||!Qn){console.warn("butterflies error: can not connect edge. link sourceNodeId:".concat(ot.sourceNode,";link targetNodeId:").concat(ot.targetNode));return}var qt=null,Dt=null;if(ot.sourceEndpoint&&(ot.sourceEndpoint instanceof W.default||ot.sourceEndpoint.__type==="endpoint")?qt=ot.sourceEndpoint:qt=Fn.getEndpoint(ot.source,"source"),ot.targetEndpoint&&(ot.targetEndpoint instanceof W.default||ot.targetEndpoint.__type==="endpoint")?Dt=ot.targetEndpoint:Dt=Qn.getEndpoint(ot.target,"target"),!qt||!Dt){console.warn("butterflies error: can not connect edge. link sourceId:".concat(ot.source,";link targetId:").concat(ot.target));return}if(!Ce.theme.edge.isRepeat){var hn=et.some(Ce.edges,function(H){var T=!1;return Fn&&(T=Fn.id===H.sourceNode.id&&qt.id===H.sourceEndpoint.id&&Fe===H.sourceEndpoint.nodeType),Qn&&(T=T&&Qn.id===H.targetNode.id&&Dt.id===H.targetEndpoint.id&&ct===H.targetEndpoint.nodeType),T});if(hn){console.warn("id\u4E3A".concat(qt.id,"-").concat(Dt.id,"\u7684\u7EBF\u6761\u8FDE\u63A5\u91CD\u590D\uFF0C\u8BF7\u68C0\u67E5"));return}}var Rt=new yt((Ut={type:"endpoint",id:ot.id,label:ot.label},_t(Ut,"type",ot.type||Ce.theme.edge.type),_t(Ut,"shapeType",ot.shapeType||Ce.theme.edge.shapeType),_t(Ut,"orientationLimit",Ce.theme.endpoint.position),_t(Ut,"isExpandWidth",Ce.theme.edge.isExpandWidth),_t(Ut,"defaultAnimate",Ce.theme.edge.defaultAnimate),_t(Ut,"sourceNode",Fn),_t(Ut,"targetNode",Qn),_t(Ut,"sourceEndpoint",qt),_t(Ut,"targetEndpoint",Dt),_t(Ut,"arrow",ot.arrow===void 0?et.get(Ce,"theme.edge.arrow"):ot.arrow),_t(Ut,"arrowShapeType",ot.arrowShapeType===void 0?et.get(Ce,"theme.edge.arrowShapeType"):ot.arrowShapeType),_t(Ut,"arrowPosition",ot.arrowPosition===void 0?et.get(Ce,"theme.edge.arrowPosition"):ot.arrowPosition),_t(Ut,"arrowOffset",ot.arrowOffset===void 0?et.get(Ce,"theme.edge.arrowOffset"):ot.arrowOffset),_t(Ut,"draggable",ot.draggable===void 0?et.get(Ce,"theme.edge.draggable"):ot.draggable),_t(Ut,"labelPosition",ot.labelPosition===void 0?et.get(Ce,"theme.edge.labelPosition"):ot.labelPosition),_t(Ut,"labelOffset",ot.labelOffset===void 0?et.get(Ce,"theme.edge.labelOffset"):ot.labelOffset),_t(Ut,"labelUpdateInterval",ot.labelUpdateInterval===void 0?et.get(Ce,"theme.edge.labelUpdateInterval"):ot.labelUpdateInterval),_t(Ut,"options",ot),_t(Ut,"_sourceType",Fe),_t(Ut,"_targetType",ct),_t(Ut,"_global",Ce.global),_t(Ut,"_on",Ce.on.bind(Ce)),_t(Ut,"_emit",Ce.emit.bind(Ce)),Ut));return Rt._init({_coordinateService:Ce._coordinateService}),lt.appendChild(Rt.dom),Rt.labelDom&&(Pt(Rt.labelDom).css("z-index",Ce._dragEdgeZindex+1),vt.appendChild(Rt.labelDom)),Rt.arrowDom&&lt.appendChild(Rt.arrowDom),Ce.edges.push(Rt),qt.connectedNum+=1,Dt.connectedNum+=1,Rt.mounted&&Rt.mounted(),qt.type===void 0&&(qt._tmpType="source"),Dt.type===void 0&&(Dt._tmpType="target"),Rt}else{var nn,ln=Ce.getNode(ot.source),_e=Ce.getNode(ot.target);if(!ln||!_e){console.warn("butterflies error: can not connect edge. link sourceId:".concat(ot.source,";link targetId:").concat(ot.target));return}var V=new yt((nn={type:"node",id:ot.id,label:ot.label,sourceNode:ln,targetNode:_e},_t(nn,"type",ot.type||Ce.theme.edge.type),_t(nn,"shapeType",ot.shapeType||Ce.theme.edge.shapeType),_t(nn,"orientationLimit",Ce.theme.endpoint.position),_t(nn,"arrow",ot.arrow===void 0?et.get(Ce,"theme.edge.arrow"):ot.arrow),_t(nn,"arrowShapeType",ot.arrowShapeType===void 0?et.get(Ce,"theme.edge.arrowShapeType"):ot.arrowShapeType),_t(nn,"arrowPosition",ot.arrowPosition===void 0?et.get(Ce,"theme.edge.arrowPosition"):ot.arrowPosition),_t(nn,"arrowOffset",ot.arrowOffset===void 0?et.get(Ce,"theme.edge.arrowOffset"):ot.arrowOffset),_t(nn,"draggable",ot.draggable===void 0?et.get(Ce,"theme.edge.draggable"):ot.draggable),_t(nn,"labelPosition",ot.labelPosition===void 0?et.get(Ce,"theme.edge.labelPosition"):ot.labelPosition),_t(nn,"labelOffset",ot.labelOffset===void 0?et.get(Ce,"theme.edge.labelOffset"):ot.labelOffset),_t(nn,"labelUpdateInterval",ot.labelUpdateInterval===void 0?et.get(Ce,"theme.edge.labelUpdateInterval"):ot.labelUpdateInterval),_t(nn,"isExpandWidth",Ce.theme.edge.isExpandWidth),_t(nn,"defaultAnimate",Ce.theme.edge.defaultAnimate),_t(nn,"_global",Ce.global),_t(nn,"_on",Ce.on.bind(Ce)),_t(nn,"_emit",Ce.emit.bind(Ce)),nn));return V._init({_coordinateService:Ce._coordinateService}),lt.appendChild(V.dom),V.labelDom&&vt.appendChild(V.labelDom),V.arrowDom&&lt.appendChild(V.arrowDom),Ce.edges.push(V),V.mounted&&V.mounted(),V}}).filter(function(ot){return ot});return Pt(this.svg).append(lt),Pt(this.wrapper).append(vt),ft.forEach(function(ot){var yt={},Ut={};ot.type==="endpoint"?(yt={pos:[ot.sourceEndpoint._posLeft+ot.sourceEndpoint._width/2,ot.sourceEndpoint._posTop+ot.sourceEndpoint._height/2],orientation:ot.sourceEndpoint.orientation?ot.sourceEndpoint.orientation:void 0},Ut={pos:[ot.targetEndpoint._posLeft+ot.targetEndpoint._width/2,ot.targetEndpoint._posTop+ot.targetEndpoint._height/2],orientation:ot.targetEndpoint.orientation?ot.targetEndpoint.orientation:void 0}):ot.type==="node"&&(yt={pos:[ot.sourceNode.left+ot.sourceNode.getWidth(!0)/2,ot.sourceNode.top+ot.sourceNode.getHeight(!0)/2]},Ut={pos:[ot.targetNode.left+ot.targetNode.getWidth(!0)/2,ot.targetNode.top+ot.targetNode.getHeight(!0)/2]}),ot.redraw(yt,Ut)}),Me||(this.pushActionQueue({type:"system:addEdges",data:ft}),this.emit("system.link.connect",{links:ft}),this.emit("events",{type:"link:connect",links:ft})),Pt(this.svg).css("visibility","visible"),ft}},{key:"addEdge",value:function(B,Me){return this.addEdges([B],Me)[0]}},{key:"removeEdges",value:function(B,Me,Ce){var lt=this,vt=[];return B.forEach(function(ft){var ot=-1;if(ft instanceof D.default||ft.__type==="edge")ft.sourceEndpoint&&(ft.sourceEndpoint.connectedNum-=1),ft.targetEndpoint&&(ft.targetEndpoint.connectedNum-=1),ot=et.findIndex(lt.edges,function(yt){return yt.type==="node"?ft.sourceNode.id===yt.sourceNode.id&&ft.targetNode.id===yt.targetNode.id:et.get(ft,"sourceNode.id")===et.get(yt,"sourceNode.id")&&et.get(ft,"sourceEndpoint.id")===et.get(yt,"sourceEndpoint.id")&&et.get(ft,"sourceEndpoint.nodeType")===et.get(yt,"sourceEndpoint.nodeType")&&et.get(ft,"targetNode.id")===et.get(yt,"targetNode.id")&&et.get(ft,"targetEndpoint.id")===et.get(yt,"targetEndpoint.id")&&et.get(ft,"targetEndpoint.nodeType")===et.get(yt,"targetEndpoint.nodeType")});else if(et.isString(ft))ot=et.findIndex(lt.edges,function(yt){return ft===yt.id});else{console.warn("\u5220\u9664\u7EBF\u6761\u9519\u8BEF\uFF0C\u4F20\u5165\u53C2\u6570\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5");return}ot!==-1?vt=vt.concat(lt.edges.splice(ot,1)):console.warn("\u5220\u9664\u7EBF\u6761\u9519\u8BEF\uFF0C\u4E0D\u5B58\u5728\u503C\u4E3A".concat(ft.id,"\u7684\u7EBF"))}),Ce||this.pushActionQueue({type:"system:removeEdges",data:vt}),Me||(this.emit("system.links.delete",{links:vt}),this.emit("events",{type:"links:delete",links:vt})),vt.forEach(function(ft){ft.destroy(Me)}),vt.forEach(function(ft){if(et.get(ft,"sourceEndpoint._tmpType")==="source"){var ot=et.some(lt.edges,function(Ut){return ft.sourceNode.id===Ut.sourceNode.id&&ft.sourceEndpoint.id===Ut.sourceEndpoint.id});!ot&&(ft.sourceEndpoint._tmpType=void 0)}if(et.get(ft,"targetEndpoint._tmpType")==="target"){var yt=et.some(lt.edges,function(Ut){return ft.targetNode.id===Ut.targetNode.id&&ft.targetEndpoint.id===Ut.targetEndpoint.id});!yt&&(ft.targetEndpoint._tmpType=void 0)}}),vt}},{key:"removeEdge",value:function(B,Me,Ce){return this.removeEdges([B],Me,Ce)[0]}},{key:"getNeighborEdges",value:function(B,Me){var Ce=void 0,lt=void 0;return Me==="node"?Ce=et.find(this.nodes,function(vt){return B===vt.id}):Me==="group"?lt=et.find(this.groups,function(vt){return B===vt.id}):(Ce=et.find(this.nodes,function(vt){return B===vt.id}),Ce&&!Me&&(Me="node"),lt=et.find(this.groups,function(vt){return B===vt.id}),lt&&!Me&&(Me="group")),this.edges.filter(function(vt){return Me==="node"?et.get(vt,"sourceNode.id")===Ce.id||et.get(vt,"targetNode.id")===Ce.id:et.get(vt,"sourceNode.id")===lt.id||et.get(vt,"targetNode.id")===lt.id})}},{key:"getNeighborEdgesByEndpoint",value:function(B,Me){var Ce=this.getNeighborEdges(B);return Ce.filter(function(lt){return lt.type==="node"?!1:lt.sourceNode.id===B&&lt.sourceEndpoint.id===Me||lt.targetNode.id===B&&lt.targetEndpoint.id===Me})}},{key:"setEdgeZIndex",value:function(){var B=this,Me,Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(Ce.length!==0){Ce.forEach(function(Fn){Fn._zIndex=lt;var Qn=et.findIndex(B.edges,function(ct){return ct===Fn});if(Qn!==-1){var Fe=B.edges.splice(Qn,1);Pt(Fe.dom).detach(),Fe.eventHandlerDom&&Pt(Fe.eventHandlerDom).detach(),Fe.arrowDom&&Pt(Fe.arrowDom).detach()}else return});var vt=this._findEdgeIndex(Ce[0]),ft=[];Ce.forEach(function(Fn){ft.push(Fn.dom),Fn.eventHandlerDom&&ft.push(Fn.eventHandlerDom),Fn.arrowDom&&ft.push(Fn.arrowDom)});var ot=this.edges[vt],yt=this.edges[vt+1];if(ot){var Ut=ot.dom;ot.eventHandlerDom&&(Ut=ot.eventHandlerDom),ot.arrowDom&&(Ut=ot.arrowDom),Pt(Ut).after(ft)}else yt?Pt(yt.dom).before(ft):Pt(this.svg).append(ft);(Me=this.edges).splice.apply(Me,[vt+1,0].concat(Tt(Ce)))}}},{key:"_findEdgeIndex",value:function(B){var Me=this,Ce=0,lt=B._zIndex||0;return this.edges.forEach(function(vt,ft){if(lt<(vt._zIndex||0)){Ce=ft;return}ft===Me.edges.length-1&&(Ce=ft)}),Ce}},{key:"_autoLayout",value:function(B){var Me=this._rootWidth,Ce=this._rootHeight;if(et.isFunction(this.layout))this.layout({width:Me,height:Ce,data:B});else if(et.get(this.layout,"type")==="forceLayout"){var lt=Pt.extend({width:Me,height:Ce,center:{x:Me/2,y:Ce/2},chargeStrength:-150,link:{id:"id",distance:200,strength:1}},et.get(this.layout,"options"),!0);et.get(this.layout,"type")==="forceLayout"&&ie.default.forceLayout({opts:lt,data:{groups:B.groups,nodes:B.nodes,edges:B.edges.map(function(yt){return{source:yt.type==="endpoint"?yt.sourceNode:yt.source,target:yt.type==="endpoint"?yt.targetNode:yt.target}})}})}else if(et.get(this.layout,"type")==="dagreLayout")ie.default.dagreLayout({rankdir:et.get(this.layout,"options.rankdir")||"TB",align:et.get(this.layout,"options.align"),nodeSize:et.get(this.layout,"options.nodeSize"),nodesepFunc:et.get(this.layout,"options.nodesepFunc"),ranksepFunc:et.get(this.layout,"options.ranksepFunc"),nodesep:et.get(this.layout,"options.nodesep")||50,ranksep:et.get(this.layout,"options.ranksep")||50,controlPoints:et.get(this.layout,"options.controlPoints")||!1,data:{nodes:B.nodes,edges:B.edges.map(function(yt){return{source:yt.type==="endpoint"?yt.sourceNode:yt.source,target:yt.type==="endpoint"?yt.targetNode:yt.target}})}});else if(et.get(this.layout,"type")==="concentricLayout")ie.default.concentLayout({center:et.get(this.layout,"options.center")||[Me/2,Ce/2],nodeSize:et.get(this.layout,"options.nodeSize")||30,minNodeSpacing:et.get(this.layout,"options.minNodeSpacing")||10,preventOverlap:et.get(this.layout,"options.preventOverlap")||!1,sweep:et.get(this.layout,"options.sweep"),equidistant:et.get(this.layout,"options.equidistant")||!1,startAngle:3/2*Math.PI,clockwise:et.get(this.layout,"options.clockwise")||!0,maxLevelDiff:et.get(this.layout,"options.maxLevelDiff"),sortBy:et.get(this.layout,"options.sortBy")||"degree",width:Me,height:Ce,data:{groups:B.groups,nodes:B.nodes,edges:B.edges.map(function(yt){return{source:yt.type==="endpoint"?yt.sourceNode:yt.source,target:yt.type==="endpoint"?yt.targetNode:yt.target}})}});else if(et.get(this.layout,"type")==="circleLayout")ie.default.circleLayout({radius:et.get(this.layout,"options.radius"),getWidth:et.get(this.layout,"options.getWidth"),getHeight:et.get(this.layout,"options.getHeight"),data:{nodes:B.nodes,edges:B.edges.map(function(yt){return{source:yt.type==="endpoint"?yt.sourceNode:yt.source,target:yt.type==="endpoint"?yt.targetNode:yt.target}})}});else if(et.get(this.layout,"type")==="gridLayout"){var vt=Pt.extend({width:et.get(this.layout,"width")||150,height:et.get(this.layout,"height")||100,begin:et.get(this.layout,"begin")||[0,0],center:et.get(this.layout,"center")||[Me/2,Ce/2],preventOverlap:et.get(this.layout,"preventOverlap")||!0,preventOverlapPadding:et.get(this.layout,"preventOverlapPadding")||10,condense:et.get(this.layout,"condense")||!1,rows:et.get(this.layout,"rows"),cols:et.get(this.layout,"cols"),position:et.get(this.layout,"position"),sortBy:et.get(this.layout,"sortBy")||"degree",nodeSize:et.get(this.layout,"nodeSize")||30,link:{id:"id",distance:100,strength:1}},et.get(this.layout,"options"),!0);et.get(this.layout,"type")==="gridLayout"&&ie.default.gridLayout({opts:vt,data:{groups:B.groups,nodes:B.nodes,edges:B.edges.map(function(yt){return{source:yt.type==="endpoint"?yt.sourceNode:yt.source,target:yt.type==="endpoint"?yt.targetNode:yt.target}})}})}else if(et.get(this.layout,"type")==="fruchterman"){var ft=Pt.extend({width:Me,height:Ce,maxIteration:1e3,center:[Me/2,Ce/2],gravity:5,speed:5,clustering:!1,clusterGravity:10,link:{id:"id",distance:100,strength:1}},et.get(this.layout,"options"),!0);et.get(this.layout,"type")==="fruchterman"&&ie.default.fruchterman({opts:ft,data:{groups:B.groups,nodes:B.nodes,edges:B.edges.map(function(yt){return{source:yt.type==="endpoint"?yt.sourceNode:yt.source,target:yt.type==="endpoint"?yt.targetNode:yt.target}})}})}else if(et.get(this.layout,"type")==="radial"){var ot=Pt.extend({width:et.get(this.layout,"options.width")||500,height:et.get(this.layout,"options.height")||500,maxIteration:et.get(this.layout,"options.maxIteration")||1e3,center:et.get(this.layout,"options.center")||[Me/2,Ce/2],focusNode:et.get(this.layout,"options.focusNode")||null,unitRadius:et.get(this.layout,"options.unitRadius")||null,linkDistance:et.get(this.layout,"options.linkDistance")||50,preventOverlap:et.get(this.layout,"options.preventOverlap")||!1,nodeSize:et.get(this.layout,"options.nodeSize")||void 0,nodeSpacing:et.get(this.layout,"options.nodeSpacing")||void 0,strictRadial:et.get(this.layout,"options.strictRadial")||!0,maxPreventOverlapIteration:et.get(this.layout,"options.maxPreventOverlapIteration")||200,sortBy:et.get(this.layout,"options.sortBy")||void 0,sortStrength:et.get(this.layout,"options.sortStrength")||10,link:{id:"id",distance:100,strength:1}},et.get(this.layout,"options"),!0);et.get(this.layout,"type")==="radial"&&ie.default.radial({opts:ot,data:{groups:B.groups,nodes:B.nodes,edges:B.edges.map(function(yt){return{source:yt.type==="endpoint"?yt.sourceNode:yt.source,target:yt.type==="endpoint"?yt.targetNode:yt.target}})}})}else et.get(this.layout,"type")==="dagreGroupLayout"&&ie.default.dagreGroupLayout({rankdir:et.get(this.layout,"options.rankdir")||"TB",align:et.get(this.layout,"options.align"),nodeSize:et.get(this.layout,"options.nodeSize"),nodesepFunc:et.get(this.layout,"options.nodesepFunc"),ranksepFunc:et.get(this.layout,"options.ranksepFunc"),nodesep:et.get(this.layout,"options.nodesep")||50,ranksep:et.get(this.layout,"options.ranksep")||50,controlPoints:et.get(this.layout,"options.controlPoints")||!1,data:{groups:B.groups,nodes:B.nodes,edges:B.edges.map(function(yt){return{source:yt.type==="endpoint"?yt.sourceNode:yt.source,target:yt.type==="endpoint"?yt.targetNode:yt.target}})}})}},{key:"setMinimap",value:function(){var B=this,Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ce.events||(Ce.events=[]);var lt=["system.canvas.zoom","system.node.delete","system.node.move","system.nodes.add","system.group.delete","system.group.move","system.drag.move","system.canvas.move"].concat(Tt(Ce.events)),vt=function(){return B.nodes.map(function(ut){return{id:ut.id,left:ut.left,top:ut.top,width:ut.getWidth(),height:ut.getHeight(),group:ut.group,minimapActive:et.get(ut,"options.minimapActive")}})},ft=function(){return B.groups.map(function(ut){return{id:ut.id,left:ut.left,top:ut.top,width:ut.getWidth(),height:ut.getHeight(),minimapActive:et.get(ut,"options.minimapActive")}})};if(Me&&!this.minimap){this.minimap=new te.default($e({root:this.root,move:this.move.bind(this),terminal2canvas:this.terminal2canvas.bind(this),canvas2terminal:this.canvas2terminal.bind(this),nodes:vt(),groups:ft(),zoom:this.getZoom(),offset:this.getOffset()},Ce)),this.updateFn=function(){B.minimap.update({nodes:vt(),groups:ft(),zoom:B.getZoom(),offset:B.getOffset()})};var ot=Ne(lt),yt;try{for(ot.s();!(yt=ot.n()).done;){var Ut=yt.value;this.on(Ut,this.updateFn)}}catch(ct){ot.e(ct)}finally{ot.f()}return}if(!!this.minimap){this.minimap.destroy();var Fn=Ne(lt),Qn;try{for(Fn.s();!(Qn=Fn.n()).done;){var Fe=Qn.value;this.off(Fe,this.updateFn)}}catch(ct){Fn.e(ct)}finally{Fn.f()}delete this.minimap,delete this.updateFn}}},{key:"focusNodesWithAnimate",value:function(B){var Me=this,Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["node"],lt=arguments.length>2?arguments[2]:void 0,vt=arguments.length>3?arguments[3]:void 0,ft=Infinity,ot=-Infinity,yt=Infinity,Ut=-Infinity;if(et.includes(Ce,"node")){var Fn=B.nodes;this.nodes.filter(function(Oe){return et.find(Fn,function(Ue){return Oe.id===Ue})!==void 0}).forEach(function(Oe){var Ue=Oe.left,qe=Oe.left+Oe.getWidth(!0),Ct=Oe.top,dt=Oe.top+Oe.getHeight(!0);if(Oe.group){var Et=Me.getGroup(Oe.group);Et&&(Ue+=Et.left,qe+=Et.left,Ct+=Et.top,dt+=Et.top)}Ue<ft&&(ft=Ue),qe>ot&&(ot=qe),Ct<yt&&(yt=Ct),dt>Ut&&(Ut=dt)})}if(et.includes(Ce,"group")){var Qn=B.groups;this.groups.filter(function(Oe){return et.find(Qn,function(Ue){return Ue===Oe.id})}).forEach(function(Oe){var Ue=Oe.left,qe=Oe.left+Oe.getWidth(),Ct=Oe.top,dt=Oe.top+Oe.getHeight();Ue<ft&&(ft=Ue),qe>ot&&(ot=qe),Ct<yt&&(yt=Ct),dt>Ut&&(Ut=dt)})}var Fe=et.get(lt,"offset")||[0,0],ct=ot-ft,ut=this._rootWidth-Fe[0],jt=Ut-yt,qt=this._rootHeight-Fe[1],Dt=ut/ct,hn=qt/jt,Rt=Dt<hn?Dt:hn;et.get(lt,"keepPreZoom")?Rt=this._zoomData<Rt?this._zoomData:Rt:Rt=1<Rt?1:Rt;var nn=this._coordinateService._canvas2terminal("x",ft,{scale:Rt,canOffsetX:0,canOffsetY:0,terOffsetX:0,terOffsetY:0,originX:50,originY:50}),ln=this._coordinateService._canvas2terminal("x",ot,{scale:Rt,canOffsetX:0,canOffsetY:0,terOffsetX:0,terOffsetY:0,originX:50,originY:50}),_e=this._coordinateService._canvas2terminal("y",yt,{scale:Rt,canOffsetX:0,canOffsetY:0,terOffsetX:0,terOffsetY:0,originX:50,originY:50}),V=this._coordinateService._canvas2terminal("y",Ut,{scale:Rt,canOffsetX:0,canOffsetY:0,terOffsetX:0,terOffsetY:0,originX:50,originY:50}),H=(nn+ln-this._rootWidth)/2,T=(_e+V-this._rootHeight)/2;H=-H+Fe[0],T=-T+Fe[1];var z=500,J=new Promise(function(Oe){Pt(Me.wrapper).animate({top:T,left:H},z,function(){Oe()})});this._moveData=[H,T],this._coordinateService._changeCanvasInfo({canOffsetX:H,canOffsetY:T,scale:Rt,originX:50,originY:50});var Pe=new Promise(function(Oe){Me.zoom(Rt,function(){Oe()})});Promise.all([J,Pe]).then(function(){vt&&vt()})}},{key:"focusCenterWithAnimate",value:function(B,Me){var Ce=this.nodes.map(function(vt){return vt.id}),lt=this.groups.map(function(vt){return vt.id});if(Ce.length===0&&lt.length===0){this.move([0,0]),this.zoom(1,Me);return}this.focusNodesWithAnimate({nodes:Ce,groups:lt},["node","group"],B,Me)}},{key:"focusNodeWithAnimate",value:function(B){var Me=this,Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"node",lt=arguments.length>2?arguments[2]:void 0,vt=arguments.length>3?arguments[3]:void 0,ft=null;et.isFunction(B)?ft=Ce==="node"?et.find(this.nodes,B):et.find(this.groups,B):ft=Ce==="node"?et.find(this.nodes,function(hn){return hn.id===B}):et.find(this.groups,function(hn){return hn.id===B});var ot=0,yt=0;if(!!ft){if(ot=ft.top||ft.y,yt=ft.left||ft.x,ft.height&&(ot+=ft.height/2),ft.width&&(yt+=ft.width/2),ft.group){var Ut=et.find(this.groups,function(hn){return hn.id===ft.group});if(!Ut)return;ot+=Ut.top||Ut.y,yt+=Ut.left||Ut.x,Ut.height&&(ot+=Ut.height/2),Ut.width&&(yt+=Ut.width/2)}var Fn=et.get(lt,"offset")||[0,0],Qn=this._rootWidth,Fe=this._rootHeight,ct=Fe/2-ot+Fn[1],ut=Qn/2-yt+Fn[0],jt=500,qt=new Promise(function(hn){Pt(Me.wrapper).animate({top:ct,left:ut},jt,function(){hn()})});this._moveData=[ut,ct],this._coordinateService._changeCanvasInfo({canOffsetX:ut,canOffsetY:ct,originX:50,originY:50,scale:1});var Dt=new Promise(function(hn){Me.zoom(1,function(){hn()})});Promise.all([qt,Dt]).then(function(){vt&&vt()}),this._guidelineService.isActive&&this._guidelineService.clearCanvas()}}},{key:"setSelectMode",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["node"],Ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"include";B?(this.isSelectMode=!0,this._rmSystemUnion(),this.selecContents=Me,this.selecMode=Ce,this.canvasWrapper.active(),this._remarkMove=this.moveable,this._remarkZoom=this.zoomable,this.setZoomable(!1),this.setMoveable(!1)):(this.isSelectMode=!1,this.canvasWrapper.unActive(),this._remarkMove&&this.setMoveable(!0),this._remarkZoom&&this.setZoomable(!0))}},{key:"getUnion",value:function(B){if(!B){console.error("\u4F20\u5165\u6B63\u786E\u7684name");return}return this._unionData[B]}},{key:"getAllUnion",value:function(){return this._unionData}},{key:"add2Union",value:function(B,Me){var Ce=this;if(!(!B||!Me)){this._unionData[B]||(this._unionData[B]={nodes:[],groups:[],edges:[],endpoints:[]});var lt=this._unionData[B];Me.nodes&&(Me.nodes.forEach(function(vt){var ft=et.isString(vt),ot=ft?Ce.getNode(vt):vt;lt.nodes.push(ot)}),lt.nodes=et.uniqBy(lt.nodes,"id")),Me.groups&&(Me.groups.forEach(function(vt){var ft=et.isString(vt),ot=ft?Ce.getGroup(vt):vt;lt.groups.push(ot)}),lt.groups=et.uniqBy(lt.groups,"id")),Me.edges&&(Me.edges.forEach(function(vt){var ft=et.isString(vt),ot=ft?Ce.getEdge(vt):vt;lt.edges.push(ot)}),lt.edges=et.uniqBy(lt.edges,"id")),Me.endpoints&&(lt.endpoints=lt.endpoints.concat(Me.endpoints))}}},{key:"removeUnion",value:function(B){this._unionData[B]={nodes:[],edges:[],groups:[],endpoints:[]}}},{key:"removeAllUnion",value:function(){this._unionData={__system:{nodes:[],edges:[],groups:[],endpoints:[]}}}},{key:"_rmSystemUnion",value:function(){this._unionData.__system.nodes=[],this._unionData.__system.edges=[],this._unionData.__system.groups=[],this._unionData.__system.endpoints=[]}},{key:"_findUnion",value:function(B,Me){var Ce=[];for(var lt in this._unionData){var vt=et.find(et.get(this._unionData,[lt,B],[]),function(ft){return et.toString(ft.id)===et.toString(Me.id)});vt&&Ce.push(lt)}return Ce}},{key:"_selectMultiplyItem",value:function(B,Me){var Ce=this,lt=this._coordinateService._terminal2canvas("x",B[0]),vt=this._coordinateService._terminal2canvas("y",B[1]),ft=this._coordinateService._terminal2canvas("x",B[2]),ot=this._coordinateService._terminal2canvas("y",B[3]),yt=et.includes(this.selecContents,"node"),Ut=et.includes(this.selecContents,"edge"),Fn=et.includes(this.selecContents,"endpoint"),Qn=function(ct){var ut=ct.left,jt=ct.right,qt=ct.top,Dt=ct.bottom;if(Ce.selecMode==="include"||Ce.selecMode==="senior"&&Me==="right")return lt<ut&&ft>jt&&vt<qt&&ot>Dt;if(Ce.selecMode==="touch"||Ce.selecMode==="senior"&&Me==="left"){var hn=!0;return ft<ut&&(hn=!1),lt>jt&&(hn=!1),ot<qt&&(hn=!1),vt>Dt&&(hn=!1),hn}};return yt&&this.nodes.forEach(function(Fe){var ct=Fe.left,ut=Fe.left+Pt(Fe.dom).width(),jt=Fe.top,qt=Fe.top+Pt(Fe.dom).height();if(Fe.group){var Dt=Ce.getGroup(Fe.group);ct+=Dt.left,ut+=Dt.left,jt+=Dt.top,qt+=Dt.top}var hn=Qn({left:ct,right:ut,top:jt,bottom:qt});hn&&Ce.selectItem.nodes.push(Fe)}),Fn&&this.nodes.forEach(function(Fe){Fe.endpoints.forEach(function(ct){var ut=ct._posLeft,jt=ct._posLeft+Pt(ct.dom).width(),qt=ct._posTop,Dt=ct._posTop+Pt(ct.dom).height(),hn=Qn({left:ut,right:jt,top:qt,bottom:Dt});hn&&Ce.selectItem.endpoints.push(ct)})}),Ut&&this.edges.forEach(function(Fe){if(Fe.type==="endpoint"){var ct=Fe.sourceEndpoint._posLeft<Fe.targetEndpoint._posLeft?Fe.sourceEndpoint._posLeft:Fe.targetEndpoint._posLeft,ut=Fe.sourceEndpoint._posLeft+Fe.sourceEndpoint._width>Fe.targetEndpoint._posLeft+Fe.targetEndpoint._width?Fe.sourceEndpoint._posLeft+Fe.sourceEndpoint._width:Fe.targetEndpoint._posLeft+Fe.targetEndpoint._width,jt=Fe.sourceEndpoint._posTop<Fe.targetEndpoint._posTop?Fe.sourceEndpoint._posTop:Fe.targetEndpoint._posTop,qt=Fe.sourceEndpoint._posTop+Fe.sourceEndpoint._height>Fe.targetEndpoint._posTop+Fe.targetEndpoint._height?Fe.sourceEndpoint._posTop+Fe.sourceEndpoint._height:Fe.targetEndpoint._posTop+Fe.targetEndpoint._height,Dt=Qn({left:ct,right:ut,top:jt,bottom:qt});Dt&&Ce.selectItem.edges.push(Fe)}else Fe.type==="node"}),this.selectItem}},{key:"updateRootResize",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._coordinateService._changeCanvasInfo({terOffsetX:B.terOffsetX||Pt(this.root).offset().left,terOffsetY:B.terOffsetY||Pt(this.root).offset().top,terWidth:B.terWidth||Pt(this.root).width(),terHeight:B.terHeight||Pt(this.root).height()}),this.canvasWrapper._changeCanvasInfo({terScrollX:B.terScrollX||0,terScrollY:B.terScrollY||0}),this.canvasWrapper.resize({root:this.root}),this._gridService._resize(),this._guidelineService._resize()}},{key:"setZoomable",value:function(B){var Me=this,Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._zoomDirection;Ce!==void 0&&(this._zoomDirection=Ce),this._zoomCb||(this._zoomCb=function(lt){lt.preventDefault();var vt=lt.deltaY;if(Me._zoomDirection?Me._zoomData-=vt*Me.theme.zoomGap:Me._zoomData+=vt*Me.theme.zoomGap,Me._zoomData<.25){Me._zoomData=.25;return}if(Me._zoomData>5){Me._zoomData=5;return}for(var ft=["webkit","moz","ms","o"],ot="scale(".concat(Me._zoomData,")"),yt=0;yt<ft.length;yt++)Me.wrapper.style["".concat(ft[yt],"Transform")]=ot;Me.wrapper.style.transform=ot,Me._coordinateService._changeCanvasInfo({wrapper:Me.wrapper,girdWrapper:Me._guidelineService.dom,mouseX:lt.clientX,mouseY:lt.clientY,scale:Me._zoomData}),Me._guidelineService.zoom(Me._zoomData),Me._guidelineService.setOrigin(Me._coordinateService.originX,Me._coordinateService.originY),Me.emit("system.canvas.zoom",{zoom:Me._zoomData}),Me.emit("events",{type:"canvas.zoom",zoom:Me._zoomData})}),B?this.root.addEventListener("wheel",this._zoomCb):this.root.removeEventListener("wheel",this._zoomCb)}},{key:"setMoveable",value:function(B){B?(this.moveable=!0,this._dragType==="canvas:drag"&&(this.moveable=!1)):this.moveable=!1}},{key:"setLinkable",value:function(B){this.linkable=!!B}},{key:"setDisLinkable",value:function(B){this.disLinkable=!!B}},{key:"setDraggable",value:function(B){this.nodes.forEach(function(Me){Me.setDraggable(B)}),this.draggable=B}},{key:"setOrigin",value:function(B){var Me=(B[0]||"0").toString().replace("%",""),Ce=(B[1]||"0").toString().replace("%","");this._coordinateService._changeCanvasInfo({originX:parseFloat(Me),originY:parseFloat(Ce)}),this._guidelineService.setOrigin(Me,Ce)}},{key:"getZoom",value:function(){return this._zoomData}},{key:"getOffset",value:function(){return this._moveData}},{key:"getOrigin",value:function(){return[this._coordinateService.originX+"%",this._coordinateService.originY+"%"]}},{key:"zoom",value:function(B,Me){var Ce=this;B<.25&&(B=.25),B>5&&(B=5);var lt=50,vt=1,ft=B-this._zoomData,ot=ft/20;clearInterval(this._zoomTimer),this._zoomTimer=null,ft!==0?this._zoomTimer=setInterval(function(){Ce._zoomData+=ot;var yt={scale:Ce._zoomData};(Ce._coordinateService.originX===void 0||Ce._coordinateService.originY===void 0)&&(yt.originX=50,yt.originY=50),Ce._coordinateService._changeCanvasInfo(yt),Ce._guidelineService.zoom(Ce._zoomData),Ce._guidelineService.setOrigin(Ce._coordinateService.originX,Ce._coordinateService.originY),Pt(Ce.wrapper).css({transform:"scale(".concat(Ce._zoomData,")")}),vt===20&&(clearInterval(Ce._zoomTimer),Ce.emit("system.canvas.zoom",{zoom:Ce._zoomData}),Ce.emit("events",{type:"canvas.zoom",zoom:Ce._zoomData}),Me&&Me()),vt++},lt/20):Me&&Me()}},{key:"move",value:function(B){Pt(this.wrapper).css("left",B[0]).css("top",B[1]),this._coordinateService._changeCanvasInfo({canOffsetX:B[0],canOffsetY:B[1]}),this._guidelineService.isActive&&this._guidelineService.move(B[0],B[1]),this._moveData=B,this.emit("system.canvas.move"),this.emit("events",{type:"system.canvas.move"})}},{key:"setGridMode",value:function(){var B=this,Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._gridObj,lt=arguments.length>2?arguments[2]:void 0;if(Me){if(this._gridObjQueue.push(Ce),this._gridTimer)return;this._gridTimer=setInterval(function(){if(B._gridObjQueue.length===0){clearInterval(B._gridTimer),B._gridTimer=null;return}B._gridObj=B._gridObjQueue.pop(),lt&&B._gridService._resize(),B._gridService.create(B._gridObj),B._gridObjQueue=[]},1e3)}else this._gridService.destroy(),this._gridObjQueue=[]}},{key:"setGuideLine",value:function(){var B=this,Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._guideObj;if(Me){if(this._guideObjQueue.push(Ce),this._guideTimer)return;this._guideTimer=setInterval(function(){if(B._guideObjQueue.length===0){clearInterval(B._guideTimer),B._guideTimer=null;return}B._guideObj=B._guideObjQueue.pop(),B._guidelineService.create(B._guideObj),B._guideObjQueue=[]},200)}else this._guidelineService.destroy(),this._guideObjQueue=[]}},{key:"canvas2terminal",value:function(B,Me){return this._coordinateService.canvas2terminal(B,Me)}},{key:"terminal2canvas",value:function(B,Me){return this._coordinateService.terminal2canvas(B,Me)}},{key:"save2img",value:function(B){var Me="toPng";switch(B.type){case"jpeg":case".jpeg":Me="toJpeg";break;case"png":case".png":Me="toPng";break;case"svg":case".svg":Me="toSvg";break}return Ci[Me](this.root,B).then(function(Ce){return Ce}).catch(function(Ce){console.error("oops, something went wrong!",Ce)})}},{key:"justifyCoordinate",value:function(){this._gridService.justifyAllCoordinate()}},{key:"_autoMoveCanvas",value:function(B,Me,Ce,lt){var vt=this;if(!!this.theme.autoFixCanvas.enable){this._autoMoveDir=[];var ft=this._coordinateService.terOffsetX,ot=this._coordinateService.terOffsetY;if(clearInterval(this._autoMoveTimer),this._autoMoveTimer=null,!(this._autoMoveTimer&&this._autoMoveDir.length>0)){var yt=this.theme.autoFixCanvas.autoMovePadding;if(B-ft<=yt[3]&&this._autoMoveDir.push("left"),this._rootWidth-(B-ft)<=yt[1]&&this._autoMoveDir.push("right"),Me-ot<=yt[0]&&this._autoMoveDir.push("top"),this._rootHeight-(Me-ot)<=yt[2]&&this._autoMoveDir.push("bottom"),this._autoMoveDir.length===0){clearInterval(this._autoMoveTimer);return}if(!this._autoMoveTimer){var Ut=5;this._autoMoveTimer=setInterval(function(){vt._autoMoveDir.includes("left")&&(vt.move([vt._moveData[0]+Ut,vt._moveData[1]]),Fn([-Ut,0])),vt._autoMoveDir.includes("right")&&(vt.move([vt._moveData[0]-Ut,vt._moveData[1]]),Fn([+Ut,0])),vt._autoMoveDir.includes("top")&&(vt.move([vt._moveData[0],vt._moveData[1]+Ut]),Fn([0,-Ut])),vt._autoMoveDir.includes("bottom")&&(vt.move([vt._moveData[0],vt._moveData[1]-Ut]),Fn([0,+Ut]))},70)}var Fn=function(Fe){if(Ce.type==="node:drag")Ce.nodes.forEach(function(ut){ut.moveTo(ut.left+Fe[0],ut.top+Fe[1])});else if(Ce.type==="group:drag"){var ct=Ce.group;ct.moveTo(ct.left+Fe[0],ct.top+Fe[1])}lt&&lt(Fe)}}}}},{key:"undo",value:function(){var B=this,Me=[];if(this.actionQueueIndex<=-1){console.warn("\u56DE\u9000\u5806\u6808\u5DF2\u7A7A\uFF0C\u65E0\u6CD5\u518Dundo");return}var Ce=this.actionQueue[this.actionQueueIndex--];if(Ce.type==="_system:dragNodeEnd"&&(Ce=this.actionQueue[this.actionQueueIndex--]),Me.push(Ce),Ce.type==="system:addNodes")this.removeNodes(Ce.data,!1,!0);else if(Ce.type==="system:removeNodes")this.addNodes(Ce.data.nodes,!0),this.addEdges(Ce.data.edges,!0);else if(Ce.type==="system:addEdges")this.removeEdges(Ce.data,!0,!0);else if(Ce.type==="system:removeEdges")this.addEdges(Ce.data,!0);else if(Ce.type==="system:moveNodes")for(var lt in Ce.data.nodes){var vt=Ce.data.nodes[lt],ft=this.getNode(lt);ft.moveTo(vt.fromLeft,vt.fromTop,!0)}else if(Ce.type==="system:moveGroups")for(var ot in Ce.data.groups){var yt=Ce.data.groups[ot],Ut=this.getGroup(ot);Ut.moveTo(yt.fromLeft,yt.fromTop,!0)}else if(Ce.type==="system:addGroups")Ce.data.forEach(function(ln){ln.nodes.length>0&&B.removeNodes(ln.nodes),B.removeGroup(ln.group.id,!0)});else if(Ce.type==="system:removeGroup")this.addGroup(Ce.data.group,Ce.data.groups.concat(Ce.data.nodes)||[],{notResize:!0,notAdaptorPos:!0},!0);else if(Ce.type==="system:groupAddMembers"){var Fn=Ce.data.sourceGroup,Qn=Ce.data.targetGroup;Qn&&Qn.removeNodes(Ce.data.nodes,!0),Fn&&Fn.addNodes(Ce.data.nodes,!0);var Fe={};if(Ce.data._isDraging&&(Fe=this.actionQueue[this.actionQueueIndex],Fe.type==="system:moveNodes")){for(var ct in Fe.data.nodes){var ut=Fe.data.nodes[ct],jt=this.getNode(ct);jt.moveTo(ut.fromLeft,ut.fromTop,!0)}Me.unshift(Fe)}this.actionQueueIndex--}else if(Ce.type==="system:groupRemoveMembers"){var qt=Ce.data.group;qt&&qt.addNodes(Ce.data.nodes,!0);var Dt={};if(Ce.data._isDraging&&(Dt=this.actionQueue[this.actionQueueIndex],Dt.type==="system:moveNodes")){for(var hn in Dt.data.nodes){var Rt=Dt.data.nodes[hn],nn=this.getNode(hn);nn.moveTo(Rt.fromLeft,Rt.fromTop,!0)}Me.unshift(Dt),this.actionQueueIndex--}this.actionQueueIndex--}else Ce.type==="system:reconnectEdges"&&et.get(Ce,"data.info",[]).forEach(function(ln){var _e=B.getNode(ln.preTargetNodeId),V=_e.getEndpoint(ln.preTargetPointId);ln.edge._create({id:"".concat(ln.edge.sourceEndpoint.id,"-").concat(V.id),targetNode:_e,_targetType:V.nodeType,targetEndpoint:V,type:"endpoint"})});this.emit("system.canvas.undo",{steps:Me}),this.emit("events",{type:"canvas.undo",steps:Me})}},{key:"redo",value:function(){var B=this,Me=[];if(this.actionQueueIndex>=this.actionQueue.length-1){console.warn("\u91CD\u505A\u5806\u6808\u5DF2\u5230\u9876\uFF0C\u65E0\u6CD5\u518Dredo");return}var Ce=this.actionQueue[++this.actionQueueIndex];if(Me.push(Ce),Ce.type==="system:moveNodes"&&Ce.data._isDraging&&(Ce=this.actionQueue[++this.actionQueueIndex],Me.push(Ce)),Ce.type==="system:addNodes")this.addNodes(Ce.data,!0);else if(Ce.type==="system:removeNodes")this.removeNodes(Ce.data.nodes,!1,!0);else if(Ce.type==="system:addEdges")this.addEdges(Ce.data,!0);else if(Ce.type==="system:removeEdges")this.removeEdges(Ce.data,!0,!0);else if(Ce.type==="system:moveNodes")for(var lt in Ce.data.nodes){var vt=Ce.data.nodes[lt],ft=this.getNode(lt);ft.moveTo(vt.toLeft,vt.toTop,!0)}else if(Ce.type==="system:moveGroups")for(var ot in Ce.data.groups){var yt=Ce.data.groups[ot],Ut=this.getGroup(ot);Ut.moveTo(yt.toLeft,yt.toTop,!0)}else if(Ce.type==="system:addGroups")Ce.data.forEach(function(ln){B.addGroup(ln.group,ln.nodes||[],void 0,!0)});else if(Ce.type==="system:removeGroup")this.removeGroup(Ce.data.group,!0);else if(Ce.type==="system:groupAddMembers"){var Fn=Ce.data.sourceGroup,Qn=Ce.data.targetGroup,Fe=this.actionQueue[this.actionQueueIndex-1];if(Fe.type==="system:moveNodes"&&Fe.data._isDraging)for(var ct in Fe.data.nodes){var ut=Fe.data.nodes[ct],jt=this.getNode(ct);jt.moveTo(ut.toLeft,ut.toTop,!0)}Qn&&Qn.addNodes(Ce.data.nodes,!0),Fn&&Fn.removeNodes(Ce.data.nodes,!0)}else if(Ce.type==="system:groupRemoveMembers"){var qt=Ce.data.group;qt&&qt.removeNodes(Ce.data.nodes,!0);var Dt={};if(Ce.data._isDraging&&(Dt=this.actionQueue[this.actionQueueIndex],Dt.type==="system:moveNodes")){for(var hn in Dt.data.nodes){var Rt=Dt.data.nodes[hn],nn=this.getNode(hn);nn.moveTo(Rt.fromLeft,Rt.fromTop,!0)}this.actionQueueIndex--}}else Ce.type==="system:reconnectEdges"&&et.get(Ce,"data.info",[]).forEach(function(ln){var _e=B.getNode(ln.currentTargetNodeId),V=_e.getEndpoint(ln.currentTargetPointId);ln.edge._create({id:"".concat(ln.edge.sourceEndpoint.id,"-").concat(V.id),targetNode:_e,_targetType:V.nodeType,targetEndpoint:V,type:"endpoint"})});this.emit("system.canvas.redo",{steps:Me}),this.emit("events",{type:"canvas.redo",steps:Me}),et.get(this.actionQueue,[this.actionQueueIndex+1,"type"])==="_system:dragNodeEnd"&&this.actionQueueIndex++}},{key:"isActionQueueTop",value:function(){return this.actionQueueIndex>=this.actionQueue.length-1}},{key:"isActionQueueBottom",value:function(){return this.actionQueueIndex<=-1}},{key:"pushActionQueue",value:function(B){var Me=this,Ce=B;if(B.type==="system:moveNodes"||B.type==="system:moveGroups"){var lt={"system:moveNodes":"node","system:moveGroups":"group"}[B.type],vt=lt+"s",ft=this.actionQueue[this.actionQueueIndex]||{};if(ft.type===B.type&&ft.data[vt][B.data[lt].id]){ft.data[vt][B.data[lt].id].toTop=B.data.top,ft.data[vt][B.data[lt].id].toLeft=B.data.left;return}else{var ot=[B.data[lt]],yt=this._findUnion(vt,B.data[lt]);yt&&yt.length>0&&(yt.forEach(function(Ut){ot=ot.concat(Me._unionData[Ut][vt])}),ot=et.uniqBy(ot,"id")),Ce={type:B.type,data:_t({},vt,{})},ot.forEach(function(Ut){Ce.data[vt][Ut.id]={fromTop:Ut.top,fromLeft:Ut.left,toTop:Ut.top,toLeft:Ut.left}}),Ce.data[vt][B.data[lt].id].toTop=B.data.top,Ce.data[vt][B.data[lt].id].toLeft=B.data.left}}this.actionQueueIndex>=this.global.limitQueueLen&&(this.actionQueue.shift(),this.actionQueueIndex--),this.actionQueue.splice(this.actionQueueIndex+1,this.actionQueue.length),this.actionQueue.push(Ce),this.actionQueueIndex++,et.get(this.actionQueue,[this.actionQueueIndex-1,"type"])==="_system:dragNodeEnd"&&(this.actionQueue.splice(this.actionQueueIndex-1,1),this.actionQueueIndex--)}},{key:"popActionQueue",value:function(){if(this.actionQueue.length>0){var B=this.actionQueue.pop();return B}else console.warn("\u64CD\u4F5C\u961F\u5217\u5DF2\u4E3A\u7A7A\uFF0C\u8BF7\u786E\u8BA4")}},{key:"clearActionQueue",value:function(){this.actionQueue=[],this.actionQueueIndex=-1}}]),le}(A.default);Z.default=li},7270:(w,Z,f)=>{"use strict";function g(te){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(De){return typeof De}:g=function(De){return De&&typeof Symbol=="function"&&De.constructor===Symbol&&De!==Symbol.prototype?"symbol":typeof De},g(te)}Object.defineProperty(Z,"__esModule",{value:!0});var y=f(3067),A=R(y),M=f(2981),E=R(M),C=f(2903),D=R(C),L=f(4434),O=R(L);function R(te){return te&&te.__esModule?te:{default:te}}function W(te,ue){if(!(te instanceof ue))throw new TypeError("Cannot call a class as a function")}function G(te,ue){for(var De=0;De<ue.length;De++){var ve=ue[De];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(te,ve.key,ve)}}function ie(te,ue,De){return ue&&G(te.prototype,ue),De&&G(te,De),te}function q(te,ue,De){return typeof Reflect!="undefined"&&Reflect.get?q=Reflect.get:q=function(Ne,Ge,$e){var Be=we(Ne,Ge);if(!!Be){var mt=Object.getOwnPropertyDescriptor(Be,Ge);return mt.get?mt.get.call($e):mt.value}},q(te,ue,De||te)}function we(te,ue){for(;!Object.prototype.hasOwnProperty.call(te,ue)&&(te=Q(te),te!==null););return te}function de(te,ue){if(typeof ue!="function"&&ue!==null)throw new TypeError("Super expression must either be null or a function");te.prototype=Object.create(ue&&ue.prototype,{constructor:{value:te,writable:!0,configurable:!0}}),ue&&fe(te,ue)}function fe(te,ue){return fe=Object.setPrototypeOf||function(ve,Ne){return ve.__proto__=Ne,ve},fe(te,ue)}function F(te){var ue=ae();return function(){var ve=Q(te),Ne;if(ue){var Ge=Q(this).constructor;Ne=Reflect.construct(ve,arguments,Ge)}else Ne=ve.apply(this,arguments);return be(this,Ne)}}function be(te,ue){if(ue&&(g(ue)==="object"||typeof ue=="function"))return ue;if(ue!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pe(te)}function pe(te){if(te===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te}function ae(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(te){return!1}}function Q(te){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(De){return De.__proto__||Object.getPrototypeOf(De)},Q(te)}var I=f(9392),oe=function(te){de(De,te);var ue=F(De);function De(ve){var Ne;return W(this,De),Ne=ue.call(this,ve),Ne._NodeClass=E.default,Ne}return ie(De,[{key:"_handleTreeNodes",value:function(Ne,Ge){if(Ge)return Ne;for(var $e=[Ne],Be=[],mt=function(){var kt=$e.pop();Be.push(kt),kt.children&&kt.children.length>0&&(kt.children.forEach(function(Tt){Tt.parent=kt.id}),$e=$e.concat(kt.children))};$e.length>0;)mt();return Be}},{key:"_isExistNode",value:function(Ne){var Ge=q(Q(De.prototype),"_isExistNode",this).call(this,Ne);Ge&&Ne.subCollapsed&&(Ge=!1)}},{key:"_addEventListener",value:function(){var Ne=this;q(Q(De.prototype),"_addEventListener",this).call(this),this.on("InnerEvents",function(Ge){Ge.type==="node:collapse"?Ne.collapseNode(Ge.nodeId):Ge.type=="node:expand"&&Ne.expandNode(Ge.nodeId)})}},{key:"findSubTree",value:function(Ne){for(var Ge=[Ne],$e=[];Ge.length>0;){var Be,mt=Ge.pop();$e.push(mt),((Be=mt.children)===null||Be===void 0?void 0:Be.length)>0&&(Ge=Ge.concat(mt.children))}return $e}},{key:"collapseNode",value:function(Ne){var Ge=[],$e=[],Be=this.getNode(Ne);if(Be.collapsed=!0,Be.options.collapsed=!0,!!Be){for(var mt=[Be];mt.length>0;){var Ot=mt.pop();Ge.push(Ot),Ot.children&&Ot.children.length>0&&(mt=mt.concat(Ot.children))}Ge=Ge.filter(function(Tt){return Tt.id!==Be.id});var kt={};return Ge.forEach(function(Tt){kt[Tt.id]=Tt,Tt.subCollapsed=!0}),$e=this.edges.filter(function(Tt){var Jt=!1;return Tt.type==="endpoint"?Jt=!!kt[Tt.sourceNode.id]||!!kt[Tt.targetNode.id]:Jt=!!kt[Tt.source.id]||!!kt[Tt.target.id],Tt.sourceNode.id===Be.id&&(Jt=!0),Jt&&(Tt.collapsed=!0),Jt}),Ge.unshift(Be),Ge.forEach(function(Tt){Tt.subCollapsed&&Tt.destroy(!0),Tt.id!==Ne&&Tt.collapsed&&delete Tt.collapsed}),$e.forEach(function(Tt){Tt.destroy(!0)}),this.redraw(),this.emit("system.node.collapse",{target:Be,nodes:Ge,edges:$e}),this.emit("events",{type:"node.collapse",target:Be,nodes:Ge,edges:$e}),{nodes:Ge,edges:$e}}}},{key:"expandNode",value:function(Ne,Ge){for(var $e=this.getNode(Ne),Be=[],mt=[],Ot=[$e];Ot.length>0;){var kt=Ot.pop();Be.push(kt),kt.children&&kt.children.length>0&&(Ot=Ot.concat(kt.children))}Be=Be.filter(function(Yt){return Yt.id!==$e.id});var Tt={};Be.forEach(function(Yt){Tt[Yt.id]=Yt,Yt.subCollapsed=!0}),mt=this.edges.filter(function(Yt){var pn=!1;return Yt.type==="endpoint"?pn=!!Tt[Yt.sourceNode.id]||!!Tt[Yt.targetNode.id]:pn=!!Tt[Yt.source.id]||!!Tt[Yt.target.id],Yt.sourceNode.id===$e.id&&(pn=!0),pn}),this.nodes=I.differenceBy(this.nodes,Be,"id");var Jt=this.addNodes(Be,!0);this.edges=I.filter(this.edges,function(Yt){return Yt.type==="endpoint"?!I.some(mt,function(pn){return Yt.sourceNode.id===pn.sourceNode.id&&Yt.targetNode.id===pn.targetNode.id&&Yt.source===pn.source&&Yt.target===pn.target}):!I.some(mt,function(pn){return Yt.source===pn.source&&Yt.target===pn.target})});var Mn=this.addEdges(mt,!0);Be.forEach(function(Yt){delete Yt.subCollapsed}),delete $e.collapsed,mt.forEach(function(Yt){delete Yt.collapsed}),this.redraw(),this.emit("system.node.expand",{target:$e,nodes:Jt,edges:Mn}),this.emit("events",{type:"node.expand",target:$e,nodes:Jt,edges:Mn})}},{key:"redraw",value:function(){for(var Ne=this.getRootNode(),Ge=[],$e={},Be=[Ne],mt=function(){var Tt=Be.pop(),Jt={id:Tt.id};$e[Tt.id]?Jt=$e[Tt.id]:$e[Jt.id]=Jt,Tt.isRoot&&(Jt.isRoot=Tt.isRoot),Tt.collapsed&&(Jt.collapsed=Tt.collapsed),Ge.push(Jt),Tt.children&&Tt.children.length>0&&(Jt.children=[],Tt.children.forEach(function(Mn){var Yt={id:Mn.id};$e[Mn.id]?Yt=$e[Mn.id]:$e[Mn.id]=Yt,Mn.isRoot&&(Yt.isRoot=Mn.isRoot),Mn.collapsed&&(Yt.collapsed=Mn.collapsed),Jt.children.push(Yt)}),Be=Be.concat(Tt.children))};Be.length>0;)mt();var Ot=Ge.filter(function(kt){return!0});this._autoLayout({nodes:Ot,edges:[],groups:[]}),this.nodes.forEach(function(kt){var Tt;if(!kt.subCollapsed){kt==null||(Tt=kt.endpoints)===null||Tt===void 0||Tt.forEach(function(Mn){Mn.updatePos()});var Jt=$e[kt.id];(kt.top!==Jt.top||kt.left!==Jt.left)&&(kt.options.top=Jt.top,kt.options.left=Jt.left,kt.options.treePos=Jt.treePos,kt.moveTo(Jt.left,Jt.top))}}),this.edges.forEach(function(kt){kt.redraw()}),this.emit("system.canvas.redraw"),this.emit("events",{type:"canvas:redraw"})}},{key:"addNodes",value:function(Ne,Ge){var $e=this,Be=q(Q(De.prototype),"addNodes",this).call(this,Ne,Ge);return Be.forEach(function(mt){if(mt.parent){var Ot=$e.getNode(mt.parent);I.some(Ot.children,["id",mt.id])||(!Ot.children&&(Ot.children=[]),Ot.children.push(mt))}}),Be}},{key:"removeNodes",value:function(Ne,Ge,$e){var Be=this,mt=Ne.map(function(Tt){return Tt instanceof D.default?Tt:Be.getNode(Tt)}),Ot=[];mt.forEach(function(Tt){var Jt=Be.findSubTree(Tt);if(Ot=Ot.concat(Jt),Tt.parent){var Mn=Be.getNode(Tt.parent);Mn&&(Mn.children=Mn.children.filter(function(Yt){return Yt.id!==Tt.id}))}}),Ot=I.unionBy(Ot,"id");var kt=q(Q(De.prototype),"removeNodes",this).call(this,Ot,Ge,$e);return kt}},{key:"getRootNode",value:function(){return this.nodes.filter(function(Ne){return Ne.isRoot})[0]}},{key:"draw",value:function(Ne,Ge,$e){var Be=this,mt=this._handleTreeNodes(Ne.nodes||[],I.get(Ge,"isFlatNode",!1));q(Q(De.prototype),"draw",this).call(this,{nodes:mt,edges:Ne.edges,groups:Ne.groups},function(){var Ot={};Be.nodes.forEach(function(kt){Ot[kt.id]=kt,kt.children=[]}),Be.nodes.forEach(function(kt){if(!(kt.isRoot||!kt.parent)){var Tt=Ot[kt.parent];!Tt||(!Tt.children&&(Tt.children=[]),Tt.children.unshift(kt))}}),$e&&$e({nodes:Be.nodes,edges:Be.edges,groups:Be.groups})})}},{key:"_autoLayout",value:function(Ne){var Ge=Ne.nodes.filter(function(kt){return kt.isRoot})[0];if(!!Ge){var $e=I.get(this,"layout.type","compactBox");if(O.default[$e]){var Be=16,mt=30,Ot=5;O.default[$e](Ge,I.assign({direction:"H",getId:function(Tt){return Tt.id},getHeight:function(Tt){return Tt.isRoot?Be*2:Be},getWidth:function(Tt){return Tt.isRoot?mt*2:mt},getHGap:function(Tt){return 100},getVGap:function(Tt){return 30},getSubTreeSep:function(Tt){return!Tt.children||!Tt.children.length?0:Ot}},I.get(this,"layout.options",{})))}}}}]),De}(A.default);Z.default=oe},9398:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var g=f(9507),y=W(g),A=f(2297),M=R(A),E=f(9471),C=W(E);f(9315);var D=f(7145),L=W(D);function O(ve){if(typeof WeakMap!="function")return null;var Ne=new WeakMap,Ge=new WeakMap;return(O=function(Be){return Be?Ge:Ne})(ve)}function R(ve,Ne){if(!Ne&&ve&&ve.__esModule)return ve;if(ve===null||G(ve)!=="object"&&typeof ve!="function")return{default:ve};var Ge=O(Ne);if(Ge&&Ge.has(ve))return Ge.get(ve);var $e={},Be=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var mt in ve)if(mt!=="default"&&Object.prototype.hasOwnProperty.call(ve,mt)){var Ot=Be?Object.getOwnPropertyDescriptor(ve,mt):null;Ot&&(Ot.get||Ot.set)?Object.defineProperty($e,mt,Ot):$e[mt]=ve[mt]}return $e.default=ve,Ge&&Ge.set(ve,$e),$e}function W(ve){return ve&&ve.__esModule?ve:{default:ve}}function G(ve){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?G=function(Ge){return typeof Ge}:G=function(Ge){return Ge&&typeof Symbol=="function"&&Ge.constructor===Symbol&&Ge!==Symbol.prototype?"symbol":typeof Ge},G(ve)}function ie(ve,Ne){if(!(ve instanceof Ne))throw new TypeError("Cannot call a class as a function")}function q(ve,Ne){for(var Ge=0;Ge<Ne.length;Ge++){var $e=Ne[Ge];$e.enumerable=$e.enumerable||!1,$e.configurable=!0,"value"in $e&&($e.writable=!0),Object.defineProperty(ve,$e.key,$e)}}function we(ve,Ne,Ge){return Ne&&q(ve.prototype,Ne),Ge&&q(ve,Ge),ve}function de(ve,Ne,Ge){return typeof Reflect!="undefined"&&Reflect.get?de=Reflect.get:de=function(Be,mt,Ot){var kt=fe(Be,mt);if(!!kt){var Tt=Object.getOwnPropertyDescriptor(kt,mt);return Tt.get?Tt.get.call(Ot):Tt.value}},de(ve,Ne,Ge||ve)}function fe(ve,Ne){for(;!Object.prototype.hasOwnProperty.call(ve,Ne)&&(ve=oe(ve),ve!==null););return ve}function F(ve,Ne){if(typeof Ne!="function"&&Ne!==null)throw new TypeError("Super expression must either be null or a function");ve.prototype=Object.create(Ne&&Ne.prototype,{constructor:{value:ve,writable:!0,configurable:!0}}),Ne&&be(ve,Ne)}function be(ve,Ne){return be=Object.setPrototypeOf||function($e,Be){return $e.__proto__=Be,$e},be(ve,Ne)}function pe(ve){var Ne=I();return function(){var $e=oe(ve),Be;if(Ne){var mt=oe(this).constructor;Be=Reflect.construct($e,arguments,mt)}else Be=$e.apply(this,arguments);return ae(this,Be)}}function ae(ve,Ne){if(Ne&&(G(Ne)==="object"||typeof Ne=="function"))return Ne;if(Ne!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q(ve)}function Q(ve){if(ve===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ve}function I(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}function oe(ve){return oe=Object.setPrototypeOf?Object.getPrototypeOf:function(Ge){return Ge.__proto__||Object.getPrototypeOf(Ge)},oe(ve)}var te=f(9392),ue=f(8092),De=function(ve){F(Ge,ve);var Ne=pe(Ge);function Ge($e){var Be;return ie(this,Ge),Be=Ne.call(this,$e),Be.id=te.get($e,"id"),Be.targetNode=te.get($e,"targetNode"),Be._targetType=te.get($e,"_targetType"),Be.targetEndpoint=te.get($e,"targetEndpoint"),Be.sourceNode=te.get($e,"sourceNode"),Be._sourceType=te.get($e,"_sourceType"),Be.sourceEndpoint=te.get($e,"sourceEndpoint"),Be.type=te.get($e,"type","endpoint"),Be.orientationLimit=te.get($e,"orientationLimit"),Be.shapeType=te.get($e,"shapeType","Straight"),Be.label=te.get($e,"label"),Be.arrow=te.get($e,"arrow"),Be.arrowShapeType=te.get($e,"arrowShapeType","default"),Be.arrowPosition=te.get($e,"arrowPosition",.5),Be.arrowOffset=te.get($e,"arrowOffset",0),Be.labelPosition=te.get($e,"labelPosition",.5),Be.labelOffset=te.get($e,"labelOffset",0),Be.isExpandWidth=te.get($e,"isExpandWidth",!1),Be.defaultAnimate=te.get($e,"defaultAnimate",!1),Be.dom=null,Be.labelDom=null,Be.arrowDom=null,Be.eventHandlerDom=null,Be._hasEventListener=!1,Be._coordinateService=null,Be.__type="edge",Be._path=null,Be.options=te.get($e,"options")||$e,Be._isDeletingEdge=$e._isDeletingEdge,Be._global=$e._global,Be._on=$e._on,Be._emit=$e._emit,Be._labelWidth=0,Be._labelHeight=0,Be._updateTimer=null,Be._UPDATE_INTERVAL=te.get($e,"labelUpdateInterval",20),Be._sourcePoint=null,Be._targetPoint=null,Be._zIndex=0,Be.draggable=te.get($e,"draggable",!1),Be._breakPoints=[],Be.options.breakPoints&&Be.options.breakPoints.length>0&&(Be._breakPoints=Be.options.breakPoints,Be._breakPoints[0].type,Be._breakPoints[Be._breakPoints.length-1].type,delete Be.options.breakPoints),Be._hasDragged=!1,Be}return we(Ge,[{key:"_init",value:function(Be){this._isInited||(Be._coordinateService&&(this._coordinateService=Be._coordinateService),this._isInited=!0,this.dom=this.draw({id:this.id,dom:this.dom,options:this.options}),this.labelDom=this.drawLabel(this.label),this.arrowDom=this.drawArrow(this.arrow),this._hasEventListener||(this._addEventListener(),this._hasEventListener=!0))}},{key:"draw",value:function(Be){var mt=document.createElementNS("http://www.w3.org/2000/svg","path");return mt.setAttribute("class","butterflies-link"),this.isExpandWidth&&(this.eventHandlerDom=document.createElementNS("http://www.w3.org/2000/svg","path"),this.eventHandlerDom.setAttribute("class","butterflies-link-event-handler")),mt}},{key:"mounted",value:function(){this.defaultAnimate&&this.addAnimate()}},{key:"_calcPath",value:function(Be,mt){Be||(Be={pos:[this.type==="endpoint"?this.sourceEndpoint._posLeft+this.sourceEndpoint._width/2:this.sourceNode.left+this.sourceNode.getWidth(!0)/2,this.type==="endpoint"?this.sourceEndpoint._posTop+this.sourceEndpoint._height/2:this.sourceNode.top+this.sourceNode.getHeight(!0)/2],orientation:this.type==="endpoint"&&this.sourceEndpoint.orientation?this.sourceEndpoint.orientation:void 0}),mt||(mt={pos:[this.type==="endpoint"?this.targetEndpoint._posLeft+this.targetEndpoint._width/2:this.targetNode.left+this.targetNode.getWidth(!0)/2,this.type==="endpoint"?this.targetEndpoint._posTop+this.targetEndpoint._height/2:this.targetNode.top+this.targetNode.getHeight(!0)/2],orientation:this.type==="endpoint"&&this.targetEndpoint.orientation?this.targetEndpoint.orientation:void 0}),this._sourcePoint=Be,this._targetPoint=mt;var Ot="";if(this.calcPath)Ot=this.calcPath(Be,mt);else if(this.shapeType==="Bezier")Ot=M.drawBezier(Be,mt);else if(this.shapeType==="Straight")Ot=M.drawStraight(Be,mt);else if(this.shapeType==="Flow")Ot=M.drawFlow(Be,mt,this.orientationLimit);else if(this.shapeType==="Manhattan"){var kt=M.drawManhattan(Be,mt,{breakPoints:this._breakPoints,hasDragged:this._hasDragged,draggable:this.draggable});Ot=kt.path,kt.breakPoints[0].type="start",kt.breakPoints[kt.breakPoints.length-1].type="end",this._breakPoints=kt.breakPoints}else this.shapeType==="AdvancedBezier"?Ot=M.drawAdvancedBezier(Be,mt):/^Bezier2-[1-3]$/.test(this.shapeType)?Ot=M.drawSecondBezier(Be,mt,this.shapeType):this.shapeType==="BrokenLine"&&(Ot=M.drawBrokenLine(Be,mt));return this._path=Ot,Ot}},{key:"redrawLabel",value:function(){var Be=this.dom.getTotalLength();if(!!Be){var mt=Be*this.labelPosition+this.labelOffset,Ot=this.dom.getPointAtLength(mt);ue(this.labelDom).css("left",Ot.x-this.labelDom.offsetWidth/2).css("top",Ot.y-this.labelDom.offsetHeight/2)}}},{key:"drawLabel",value:function(Be){var mt=(typeof HTMLElement=="undefined"?"undefined":G(HTMLElement))==="object"?function(kt){return kt instanceof HTMLElement}:function(kt){return kt&&G(kt)==="object"&&kt.nodeType===1&&typeof kt.nodeName=="string"};if(Be){if(mt(Be))return ue(Be).addClass("butterflies-label"),Be;var Ot=document.createElement("span");return Ot.className="butterflies-label",Ot.innerText=Be,Ot}}},{key:"updateLabel",value:function(Be){var mt=this,Ot=this.drawLabel(Be);this.labelDom&&(ue(this.labelDom).off(),ue(this.labelDom).remove()),this.label=Be,this.labelDom=Ot,setTimeout(function(){mt.redrawLabel()}),this.emit("InnerEvents",{type:"edge:updateLabel",data:this})}},{key:"redrawArrow",value:function(Be){var mt=this.dom.getTotalLength();if(!!mt){this.arrowFinalPosition=(mt*this.arrowPosition+this.arrowOffset)/mt,this.arrowFinalPosition>1&&(this.arrowFinalPosition=1),this.arrowFinalPosition<0&&(this.arrowFinalPosition=0),1-this.arrowFinalPosition<y.default.ARROW_TYPE.length/mt&&(this.arrowFinalPosition=(mt*this.arrowFinalPosition-y.default.ARROW_TYPE.length)/mt),this.shapeType==="Bezier"&&(this.arrowFinalPosition=1-this.arrowFinalPosition);var Ot=this.dom.getPointAtLength(mt*this.arrowFinalPosition),kt=Ot.x,Tt=Ot.y,Jt=kt,Mn=Tt,Yt=y.default.calcSlope({shapeType:this.shapeType,dom:this.dom,arrowPosition:this.arrowFinalPosition,path:Be}),pn=Math.atan2(Yt.y,Yt.x)/Math.PI*180,gt=y.default.ARROW_TYPE[this.arrowShapeType],_t=gt.width||8,Gt=gt.height||8;gt.type==="pathString"?this.arrowDom.setAttribute("d",gt.content):gt.type==="svg"&&(Yt.x===0||(Jt-=_t/2),Mn-=Gt/2),this.arrowDom.setAttribute("transform","rotate(".concat(pn,", ").concat(kt,", ").concat(Tt,")translate(").concat(Jt,", ").concat(Mn,")"))}}},{key:"drawArrow",value:function(Be){if(Be){var mt=y.default.ARROW_TYPE[this.arrowShapeType],Ot=mt.width||8,kt=mt.height||8,Tt=void 0;return mt.type==="pathString"?Tt=document.createElementNS("http://www.w3.org/2000/svg","path"):mt.type==="svg"&&(Tt=document.createElementNS("http://www.w3.org/2000/svg","image"),Tt.setAttribute("href",mt.content),Tt.setAttribute("width","".concat(Ot,"px")),Tt.setAttribute("height","".concat(kt,"px"))),Tt.setAttribute("class","butterflies-arrow"),Tt}}},{key:"redraw",value:function(Be,mt,Ot){var kt=this,Tt=this._path,Jt=this._calcPath(Be,mt);Tt!==Jt&&(this.dom.setAttribute("d",Jt),this.isExpandWidth&&(this.eventHandlerDom.setAttribute("d",Jt),ue(this.eventHandlerDom).insertAfter(this.dom)),this._updateTimer||(this._updateTimer=setTimeout(function(){kt.labelDom&&kt.redrawLabel(),kt.arrowDom&&kt.redrawArrow(Jt),kt.animateDom&&kt.redrawAnimate(Jt),kt._updateTimer=null},this._UPDATE_INTERVAL)),this.updated&&this.updated())}},{key:"isConnect",value:function(){return!0}},{key:"addAnimate",value:function(Be){this.animateDom=C.default.addAnimate(this.dom,this._path,te.assign({},{num:1,radius:3,color:"#776ef3"},Be),this.animateDom)}},{key:"redrawAnimate",value:function(){this.animateDom=C.default.addAnimate(this.dom,this._path,{_isContinue:!0},this.animateDom)}},{key:"emit",value:function(Be,mt){de(oe(Ge.prototype),"emit",this).call(this,Be,mt),this._emit(Be,mt)}},{key:"on",value:function(Be,mt){de(oe(Ge.prototype),"on",this).call(this,Be,mt),this._on(Be,mt)}},{key:"remove",value:function(){this.emit("InnerEvents",{type:"edge:delete",data:this})}},{key:"setZIndex",value:function(Be){this.emit("InnerEvents",{type:"edge:setZIndex",edge:this,index:Be})}},{key:"destroy",value:function(Be){this.labelDom&&(ue(this.labelDom).off(),ue(this.labelDom).remove()),this.arrowDom&&ue(this.arrowDom).remove(),this.eventHandlerDom&&(ue(this.eventHandlerDom).off(),ue(this.eventHandlerDom).remove()),this.animateDom&&ue(this.animateDom).remove(),ue(this.dom).remove(),this.id&&!Be&&this.removeAllListeners()}},{key:"getBreakPoints",value:function(){return this._breakPoints}},{key:"_addEventListener",value:function(){var Be=this,mt=function(Tt){Tt.preventDefault(),Tt.stopPropagation(),Be.emit("system.link.click",{edge:Be}),Be.emit("events",{type:"link:click",edge:Be})},Ot=function(Tt){var Jt=Tt.clientX,Mn=Tt.clientY;if(Be.shapeType==="Manhattan"&&Be.draggable){var Yt=Be._coordinateService._terminal2canvas("x",Jt),pn=Be._coordinateService._terminal2canvas("y",Mn),gt=M.findManhattanPoint(Be._breakPoints,{x:Yt,y:pn});Be.emit("InnerEvents",{type:"link:dragBegin",edge:Be,path:gt})}else Be.emit("InnerEvents",{type:"link:mouseDown",edge:Be})};this.isExpandWidth?(ue(this.eventHandlerDom).on("click",mt),ue(this.eventHandlerDom).on("mousedown",Ot)):(ue(this.dom).on("click",mt),ue(this.dom).on("mousedown",Ot))}},{key:"_create",value:function(Be){this.id=te.get(Be,"id")||this.id,this.targetNode=te.get(Be,"targetNode")||this.targetNode,this._targetType=te.get(Be,"_targetType")||this._targetType,this.targetEndpoint=te.get(Be,"targetEndpoint")||this.targetEndpoint,this.sourceNode=te.get(Be,"sourceNode")||this.sourceNode,this._sourceType=te.get(Be,"_sourceType")||this._sourceType,this.sourceEndpoint=te.get(Be,"sourceEndpoint")||this.sourceEndpoint,this.type=te.get(Be,"type")||this.type,te.set(this,"options.sourceNode",te.get(this,"sourceNode.id")),te.set(this,"options.sourceEndpoint",te.get(this,"sourceEndpoint.id")),te.set(this,"options.targetNode",te.get(this,"targetNode.id")),te.set(this,"options.targetEndpoint",te.get(this,"targetEndpoint.id")),this.redraw()}},{key:"_updatePath",value:function(Be,mt){if(this._breakPoints[Be.index].type==="start"){var Ot=te.cloneDeep(this._breakPoints[Be.index]);this._breakPoints.unshift(Ot),Be.index++,delete this._breakPoints[Be.index].type}else if(this._breakPoints[Be.index+1].type==="end"){var kt=te.cloneDeep(this._breakPoints[Be.index+1]);this._breakPoints.push(kt),delete this._breakPoints[Be.index+1].type}Be.direction==="vertical"?(this._breakPoints[Be.index].x=mt.x,this._breakPoints[Be.index+1].x=mt.x):(this._breakPoints[Be.index].y=mt.y,this._breakPoints[Be.index+1].y=mt.y),this._hasDragged=!0,this.redraw();for(var Tt=0;Tt<this._breakPoints.length-1;Tt++){var Jt=this._breakPoints[Tt],Mn=this._breakPoints[Tt+1];Jt.x===Mn.x&&Jt.y===Mn.y&&Jt.type!=="start"&&Mn.type!=="end"&&(this._breakPoints.splice(Tt,2),Be.index=Be.index-2>0?Be.index-2:0)}}}]),Ge}(L.default);Z.default=De},4773:(w,Z,f)=>{"use strict";function g(pe){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(Q){return typeof Q}:g=function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},g(pe)}Object.defineProperty(Z,"__esModule",{value:!0}),f(55);var y=f(1849),A=M(y);function M(pe){return pe&&pe.__esModule?pe:{default:pe}}function E(pe,ae){if(!(pe instanceof ae))throw new TypeError("Cannot call a class as a function")}function C(pe,ae){for(var Q=0;Q<ae.length;Q++){var I=ae[Q];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(pe,I.key,I)}}function D(pe,ae,Q){return ae&&C(pe.prototype,ae),Q&&C(pe,Q),pe}function L(pe,ae,Q){return typeof Reflect!="undefined"&&Reflect.get?L=Reflect.get:L=function(oe,te,ue){var De=O(oe,te);if(!!De){var ve=Object.getOwnPropertyDescriptor(De,te);return ve.get?ve.get.call(ue):ve.value}},L(pe,ae,Q||pe)}function O(pe,ae){for(;!Object.prototype.hasOwnProperty.call(pe,ae)&&(pe=de(pe),pe!==null););return pe}function R(pe,ae){if(typeof ae!="function"&&ae!==null)throw new TypeError("Super expression must either be null or a function");pe.prototype=Object.create(ae&&ae.prototype,{constructor:{value:pe,writable:!0,configurable:!0}}),ae&&W(pe,ae)}function W(pe,ae){return W=Object.setPrototypeOf||function(I,oe){return I.__proto__=oe,I},W(pe,ae)}function G(pe){var ae=we();return function(){var I=de(pe),oe;if(ae){var te=de(this).constructor;oe=Reflect.construct(I,arguments,te)}else oe=I.apply(this,arguments);return ie(this,oe)}}function ie(pe,ae){if(ae&&(g(ae)==="object"||typeof ae=="function"))return ae;if(ae!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q(pe)}function q(pe){if(pe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pe}function we(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}function de(pe){return de=Object.setPrototypeOf?Object.getPrototypeOf:function(Q){return Q.__proto__||Object.getPrototypeOf(Q)},de(pe)}var fe=f(8092),F=f(9392),be=function(pe){R(Q,pe);var ae=G(Q);function Q(I){var oe;return E(this,Q),oe=ae.call(this,I),oe.id=I.id,oe.options=I,oe.orientation=I.orientation,oe.pos=I.pos,oe.type=I.type,oe.nodeType=F.get(I,"nodeType","node"),oe.nodeId=F.get(I,"_node.id"),oe.root=I.root,oe.scope=I.scope,oe.expandArea=I.expandArea,oe.limitNum=I.limitNum,oe.connectedNum=0,oe.options=I,oe.__type="endpoint",oe._node=I._node,oe._global=I._global,oe._on=I._on,oe._emit=I._emit,oe._top=0,oe._left=0,oe._posTop=0,oe._posLeft=0,oe._width=0,oe._height=0,oe._linkable=!1,oe._coordinateService=null,oe.dom=null,oe._isInitedDom=!1,I.dom&&(oe.dom=I.dom,oe._isInitedDom=!0),oe}return D(Q,[{key:"_init",value:function(oe){this._coordinateService=oe._coordinateService,oe.nodeType&&(this.nodeType=oe.nodeType),this._isInitedDom?(this._width=fe(this.dom).outerWidth(),this._height=fe(this.dom).outerHeight(),this._left=this._coordinateService._terminal2canvas("x",fe(this.dom).offset().left),this._top=this._coordinateService._terminal2canvas("y",fe(this.dom).offset().top),this._posTop=this._top,this._posLeft=this._left):this.dom=this.draw({id:this.id,orientation:this.orientation,pos:this.pos,dom:this.dom,root:this.root,type:this.type,options:this.options}),this.attachEvent()}},{key:"draw",value:function(oe){var te=oe.dom;return te?te=fe(te):te=fe('<div class="butterflie-circle-endpoint"></div>').attr("id",this.id),te[0]}},{key:"updatePos",value:function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dom,te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.orientation,ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.pos;if(this._isInitedDom)this._width=fe(this.dom).outerWidth(),this._height=fe(this.dom).outerHeight(),this._left=this._coordinateService._terminal2canvas("x",fe(this.dom).offset().left),this._top=this._coordinateService._terminal2canvas("y",fe(this.dom).offset().top),this._posLeft=this._left,this._posTop=this._top;else{var De=this._node,ve=fe(this._node.dom),Ne=this.nodeType,Ge=ve.outerWidth(),$e=ve.outerHeight(),Be=null,mt=0,Ot=0;this.root&&(Be=ve.find(this.root),mt=Be.width(),Ot=Be.height()),this._width=fe(oe).outerWidth(),this._height=fe(oe).outerHeight();var kt=this._width/2,Tt=this._height/2,Jt=0,Mn=0,Yt=te||this.orientation||[0,-1],pn=ue||this.pos||[Yt[0]===0?.5:0,Yt[1]===0?.5:0],gt=[0,0],_t=Yt[0],Gt=Yt[1],Ft=pn[0],zt=pn[1];if(_t===0?gt[0]=this.root?mt*Ft-kt:Ge*Ft-kt:_t===-1?gt[0]=0-kt:_t===1&&(gt[0]=this.root?mt-kt:Ge-kt),Gt===0?gt[1]=this.root?Ot*zt-Tt:$e*zt-Tt:Gt===-1?gt[1]=0-Tt:Gt===1&&(gt[1]=this.root?Ot-Tt:$e-Tt),De&&!this.root)Jt+=De.top,Mn+=De.left;else if(De&&this.root){var en=ve.offset(),Bt=Be.offset();Jt+=Bt.top-en.top+De.top,Mn+=Bt.left-en.left+De.left}if(this._top=gt[1]+Jt,this._left=gt[0]+Mn,this._posTop=this._top,this._posLeft=this._left,De._group){var an=this._getGroupPos(De._group);this._posTop+=an.top,this._posLeft+=an.left}fe(oe).css("top",this._top).css("left",this._left),this.updated&&this.updated()}this.emit("InnerEvents",{type:"endpoint:updatePos",point:this})}},{key:"_getGroupPos",value:function(oe){for(var te=oe,ue=0,De=0;te;)ue+=te.top,De+=te.left,te=te._group;return{top:ue,left:De}}},{key:"hasConnection",value:function(){return this.connectedNum>0}},{key:"moveTo",value:function(oe,te){this._top=te,this._left=oe,this._posTop=this._top,this._posLeft=this._left,this._isInitedDom||(fe(this.dom).css("top",te).css("left",oe),F.get(this,"_node._group")&&(this._posTop+=this._node._group.top,this._posLeft+=this._node._group.left))}},{key:"linkable",value:function(){fe(this.dom).addClass("linkable")}},{key:"unLinkable",value:function(){fe(this.dom).removeClass("linkable")}},{key:"hoverLinkable",value:function(){fe(this.dom).addClass("hover")}},{key:"unHoverLinkable",value:function(){fe(this.dom).removeClass("hover")}},{key:"attachEvent",value:function(){var oe=this;fe(this.dom).on("mousedown",function(te){var ue=0;te.button===ue&&(te.preventDefault(),te.stopPropagation(),oe.emit("InnerEvents",{type:"endpoint:drag",data:oe}))})}},{key:"emit",value:function(oe,te){L(de(Q.prototype),"emit",this).call(this,oe,te),this._emit(oe,te)}},{key:"destroy",value:function(oe){oe?fe(this.dom).detach():(fe(this.dom).off(),fe(this.dom).remove(),this.removeAllListeners())}}]),Q}(A.default);Z.default=be},3839:(w,Z,f)=>{"use strict";function g(te){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(De){return typeof De}:g=function(De){return De&&typeof Symbol=="function"&&De.constructor===Symbol&&De!==Symbol.prototype?"symbol":typeof De},g(te)}Object.defineProperty(Z,"__esModule",{value:!0}),f(2673);var y=f(9020),A=L(y),M=f(4773),E=L(M),C=f(9131),D=L(C);function L(te){return te&&te.__esModule?te:{default:te}}function O(te,ue,De){return ue in te?Object.defineProperty(te,ue,{value:De,enumerable:!0,configurable:!0,writable:!0}):te[ue]=De,te}function R(te,ue){if(!(te instanceof ue))throw new TypeError("Cannot call a class as a function")}function W(te,ue){for(var De=0;De<ue.length;De++){var ve=ue[De];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(te,ve.key,ve)}}function G(te,ue,De){return ue&&W(te.prototype,ue),De&&W(te,De),te}function ie(te,ue,De){return typeof Reflect!="undefined"&&Reflect.get?ie=Reflect.get:ie=function(Ne,Ge,$e){var Be=q(Ne,Ge);if(!!Be){var mt=Object.getOwnPropertyDescriptor(Be,Ge);return mt.get?mt.get.call($e):mt.value}},ie(te,ue,De||te)}function q(te,ue){for(;!Object.prototype.hasOwnProperty.call(te,ue)&&(te=ae(te),te!==null););return te}function we(te,ue){if(typeof ue!="function"&&ue!==null)throw new TypeError("Super expression must either be null or a function");te.prototype=Object.create(ue&&ue.prototype,{constructor:{value:te,writable:!0,configurable:!0}}),ue&&de(te,ue)}function de(te,ue){return de=Object.setPrototypeOf||function(ve,Ne){return ve.__proto__=Ne,ve},de(te,ue)}function fe(te){var ue=pe();return function(){var ve=ae(te),Ne;if(ue){var Ge=ae(this).constructor;Ne=Reflect.construct(ve,arguments,Ge)}else Ne=ve.apply(this,arguments);return F(this,Ne)}}function F(te,ue){if(ue&&(g(ue)==="object"||typeof ue=="function"))return ue;if(ue!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return be(te)}function be(te){if(te===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te}function pe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(te){return!1}}function ae(te){return ae=Object.setPrototypeOf?Object.getPrototypeOf:function(De){return De.__proto__||Object.getPrototypeOf(De)},ae(te)}var Q=f(8092),I=f(9392),oe=function(te){we(De,te);var ue=fe(De);function De(ve){var Ne;return R(this,De),Ne=ue.call(this,ve),Ne.id=ve.id,Ne.scope=ve.scope,Ne.top=ve.top,Ne.left=ve.left,Ne.width=ve.width||300,Ne.height=ve.height||150,Ne.resize=ve.resize,Ne.draggable=ve.draggable,Ne.group=ve.group,Ne.dom=null,Ne.nodes=[],Ne.groups=[],Ne.options=ve.options,Ne.__type="group",Ne._global=ve._global,Ne._on=ve._on,Ne._emit=ve._emit,Ne._container=null,Ne.endpoints=[],Ne._endpointsData=ve.endpoints,Ne._isMoving=!1,Ne}return G(De,[{key:"_init",value:function(){var Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._isInited||(Ne.left&&(this.left=Ne.left),Ne.top&&(this.top=Ne.top),Ne.width&&(this.width=Ne.width),Ne.height&&(this.height=Ne.height),this._isInited=!0,Ne._isDeleteGroup?(this.group=void 0,this._group=void 0):Ne.group&&(this.group=Ne.group),Ne.dom&&(this.dom=Ne.dom),this.dom?(this.left&&Q(this.dom).css("left","".concat(this.left,"px")),this.top&&Q(this.dom).css("top","".concat(this.top,"px")),this.width&&Q(this.dom).css("width","".concat(this.width,"px")),this.height&&Q(this.dom).css("height","".concat(this.height,"px"))):this.dom=this.draw({id:this.id,top:this.top,left:this.left,width:this.width,height:this.height,dom:this.dom,options:this.options}),this._hasEventListener||(this._addEventListener(),this._hasEventListener=!0))}},{key:"draw",value:function(Ne){var Ge=Ne.dom;Ge||(Ge=Q("<div></div>").attr("class","group").attr("id",Ne.id));var $e=Q(Ge),Be=Q("<div></div>").attr("class","title");return I.get(this,"options.title")&&Be.text(I.get(this,"options.title")),$e.append(Be),this._container=Q("<div></div>").attr("class","container"),$e.append(this._container),this.resize!==!1&&this.setResize(!0,$e),Ne.top!==void 0&&$e.css("top",Ne.top+"px"),Ne.left!==void 0&&$e.css("left",Ne.left+"px"),Ne.width!==void 0&&$e.css("width",Ne.width+"px"),Ne.height!==void 0&&$e.css("height",Ne.height+"px"),this.updated&&this.updated(),$e[0]}},{key:"addNodes",value:function(){var Ne=this,Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],$e=arguments.length>1?arguments[1]:void 0,Be=[];Ge.forEach(function(mt){(0,D.default)(mt.scope,Ne.scope,I.get(Ne,"_global.isScopeStrict"))?Be.push(mt):console.log("nodeId\u4E3A".concat(mt.id,"\u7684\u8282\u70B9\u548CgroupId").concat(Ne.id,"\u7684\u8282\u70B9\u7EC4scope\u503C\u4E0D\u7B26\uFF0C\u65E0\u6CD5\u52A0\u5165"))}),this.emit("InnerEvents",{type:"group:addNodes",nodes:Ge,group:this,isNotEventEmit:$e})}},{key:"addNode",value:function(Ne){this.addNodes([Ne])}},{key:"removeNodes",value:function(){var Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ge=arguments.length>1?arguments[1]:void 0,$e=[];return this.nodes.forEach(function(Be){var mt=I.find(Ne,function(Ot){return Ot.id===Be.id});mt&&$e.push(mt)}),this.emit("InnerEvents",{type:"group:removeNodes",group:this,nodes:$e,isNotEventEmit:Ge}),Ge||(this.emit("events",O({type:"system.group.removeNodes",group:this,nodes:$e},"group",targetGroup)),this.emit("system.group.removeNodes",O({group:this,nodes:$e},"group",targetGroup))),$e}},{key:"removeNode",value:function(Ne){return this.removeNodes([Ne])}},{key:"setResize",value:function(Ne){var Ge=this,$e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.dom,Be=arguments.length>2?arguments[2]:void 0,mt=function(Tt){var Jt=0;Tt.button===Jt&&(Tt.preventDefault(),Ge.emit("InnerEvents",{type:"group:resize",group:Ge}))};if(Ne){var Ot=null;Be?(Ot=Q(Be),Ot.addClass("butterfly-group-icon-resize")):Ot=Q('<span class="butterfly-group-icon-resize group-icon-resize butterfly-icon icon-drag"></span>'),Ot.appendTo($e),Ot.on("mousedown",mt)}}},{key:"setSize",value:function(){var Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.width,Ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.height;this.width=Ne,this.height=Ge,Q(this.dom).css("width",this.width).css("height",this.height)}},{key:"remove",value:function(){this.emit("InnerEvents",{type:"group:delete",data:this})}},{key:"_moveTo",value:function(Ne,Ge){var $e=this;Q(this.dom).css("top",Ge).css("left",Ne),this.endpoints.forEach(function(mt){mt.moveTo(Ne-$e.left+mt._left,Ge-$e.top+mt._top)});var Be=function(Ot){for(var kt=[],Tt=[Ot];Tt.length>0;){var Jt=Tt.pop();kt=kt.concat(Jt.nodes),kt=kt.concat(Jt.groups),Tt=Tt.concat(Jt.groups)}return kt};Be(this).forEach(function(mt){mt.endpoints.forEach(function(Ot){Ot.updatePos()})}),this.top=Ge,this.left=Ne}},{key:"moveTo",value:function(Ne,Ge,$e){this.emit("InnerEvents",{type:"group:move",group:this,x:Ne,y:Ge,isNotEventEmit:$e})}},{key:"focus",value:function(){}},{key:"unFocus",value:function(){}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getEndpoint",value:function(Ne){return I.find(this.endpoints,function(Ge){return Ne===Ge.id})}},{key:"removeEndpoint",value:function(Ne){var Ge=I.findIndex(this.endpoints,function(Be){return Be.id===Ne});if(Ge!==-1){var $e=this.endpoints.splice(Ge,1)[0];return this.emit("InnerEvents",{type:"node:removeEndpoint",data:$e}),$e.destroy(),$e}}},{key:"_appendChildren",value:function(){var Ne=this,Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];Ge.forEach(function($e){$e._group=Ne,$e.group=Ne.id,Q(Ne.dom).append($e.dom),$e.__type==="node"?Ne.nodes.push($e):Ne.groups.push($e)})}},{key:"_addEventListener",value:function(){var Ne=this;Q(this.dom).on("click",function(Ge){Ge.preventDefault(),Ge.stopPropagation(),Ne.emit("system.group.click",{group:Ne}),Ne.emit("events",{type:"group:click",group:Ne})}),Q(this.dom).on("mousedown",function(Ge){for(var $e=Ne.getSubGroup().concat(Ne),Be=!1,mt=0;mt<$e.length&&(Be=I.some($e[mt].nodes.concat($e[mt].groups),function(kt){return kt._isMoving}),!Be);mt++);if(!Be&&Q(Ge.target).attr("class").indexOf("butterfly-group-icon-resize")===-1){var Ot=0;Ge.button===Ot&&(Ge.preventDefault(),Ne._group&&Ge.stopPropagation(),Ne.draggable&&(Ne._isMoving=!0,Ne.emit("InnerEvents",{type:"group:dragBegin",data:Ne})))}})}},{key:"_createEndpoint",value:function(Ne){var Ge=this;Ne?this.endpoints.forEach(function($e){return Ge.addEndpoint($e,Ne)}):this._endpointsData&&this._endpointsData.map(function($e){return Ge.addEndpoint($e)})}},{key:"getParentGroup",value:function(){for(var Ne=[],Ge=this;Ge;)Ge=Ge._group,Ge&&Ne.push(Ge);return Ne}},{key:"getSubGroup",value:function(){for(var Ne=[],Ge=[this];Ge.length>0;){var $e=Ge.pop();Ne=Ne.concat($e.groups),Ge=Ge.concat($e.groups)}return Ne}},{key:"addEndpoint",value:function(Ne,Ge){if(Ge)return this.emit("InnerEvents",{type:"group:addEndpoint",data:Ne,isInited:Ge}),Ne;var $e=Ne.Class||E.default,Be=new $e(I.assign({_on:this._on,_emit:this._emit,_node:this,_global:this._global},Ne));return this.emit("InnerEvents",{type:"group:addEndpoint",data:Be}),this.endpoints.push(Be),Be}},{key:"emit",value:function(Ne,Ge){ie(ae(De.prototype),"emit",this).call(this,Ne,Ge),this._emit(Ne,Ge)}},{key:"on",value:function(Ne,Ge){ie(ae(De.prototype),"on",this).call(this,Ne,Ge),this._on(Ne,Ge)}},{key:"destroy",value:function(Ne){this.endpoints.forEach(function(Ge){!Ge._isInitedDom&&Ge.destroy(Ne)}),Ne?Q(this.dom).detach():(this._emit("system.group.delete",{group:this}),this._emit("events",{type:"group:delete",group:this}),Q(this.dom).off(),Q(this.dom).remove(),this.removeAllListeners(),this._hasEventListener=!1),this._isInited=!1}}]),De}(A.default);Z.default=oe},2733:(w,Z,f)=>{"use strict";function g(q){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(de){return typeof de}:g=function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},g(q)}Object.defineProperty(Z,"__esModule",{value:!0});function y(q,we){if(!(q instanceof we))throw new TypeError("Cannot call a class as a function")}function A(q,we){for(var de=0;de<we.length;de++){var fe=we[de];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(q,fe.key,fe)}}function M(q,we,de){return we&&A(q.prototype,we),de&&A(q,de),q}function E(q,we){if(typeof we!="function"&&we!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(we&&we.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),we&&C(q,we)}function C(q,we){return C=Object.setPrototypeOf||function(fe,F){return fe.__proto__=F,fe},C(q,we)}function D(q){var we=R();return function(){var fe=W(q),F;if(we){var be=W(this).constructor;F=Reflect.construct(fe,arguments,be)}else F=fe.apply(this,arguments);return L(this,F)}}function L(q,we){if(we&&(g(we)==="object"||typeof we=="function"))return we;if(we!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(q)}function O(q){if(q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q}function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(q){return!1}}function W(q){return W=Object.setPrototypeOf?Object.getPrototypeOf:function(de){return de.__proto__||Object.getPrototypeOf(de)},W(q)}var G=f(666),ie=function(q){E(de,q);var we=D(de);function de(){return y(this,de),we.call(this)}return M(de,[{key:"draw",value:function(){}},{key:"getNode",value:function(){}},{key:"getEdge",value:function(){}},{key:"getGroup",value:function(){}},{key:"addNode",value:function(){}},{key:"addNodes",value:function(){}},{key:"addEdge",value:function(){}},{key:"addEdges",value:function(){}},{key:"addGroups",value:function(){}},{key:"removeNode",value:function(){}},{key:"removeNodes",value:function(){}},{key:"removeEdge",value:function(){}},{key:"removeEdges",value:function(){}},{key:"removeGroup",value:function(){}},{key:"getNeighborEdges",value:function(){}},{key:"getNeighborNodes",value:function(){}},{key:"getNeighborNodesAndEdgesByLevel",value:function(){}},{key:"getAdjcentTable",value:function(){}},{key:"getZoom",value:function(){}},{key:"setZoomable",value:function(){}},{key:"zoom",value:function(){}},{key:"getOffset",value:function(){}},{key:"setMoveable",value:function(){}},{key:"move",value:function(){}},{key:"getOrigin",value:function(){}},{key:"setOrigin",value:function(){}},{key:"getDataMap",value:function(){}},{key:"setGirdMode",value:function(){}},{key:"setGuideLine",value:function(){}},{key:"justifyCoordinate",value:function(){}},{key:"setSelectMode",value:function(){}},{key:"getUnion",value:function(){}},{key:"getAllUnion",value:function(){}},{key:"add2Union",value:function(){}},{key:"removeUnion",value:function(){}},{key:"removeAllUnion",value:function(){}},{key:"focusNodeWithAnimate",value:function(){}},{key:"focusNodesWithAnimate",value:function(){}},{key:"canvas2terminal",value:function(){}},{key:"terminal2canvas",value:function(){}},{key:"save2img",value:function(){}},{key:"updateRootResize",value:function(){}},{key:"click",value:function(){}},{key:"doubleClick",value:function(){}},{key:"onContextmenu",value:function(){}}]),de}(G);Z.default=ie},7145:(w,Z,f)=>{"use strict";function g(q){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(de){return typeof de}:g=function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},g(q)}Object.defineProperty(Z,"__esModule",{value:!0});function y(q,we){if(!(q instanceof we))throw new TypeError("Cannot call a class as a function")}function A(q,we){for(var de=0;de<we.length;de++){var fe=we[de];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(q,fe.key,fe)}}function M(q,we,de){return we&&A(q.prototype,we),de&&A(q,de),q}function E(q,we){if(typeof we!="function"&&we!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(we&&we.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),we&&C(q,we)}function C(q,we){return C=Object.setPrototypeOf||function(fe,F){return fe.__proto__=F,fe},C(q,we)}function D(q){var we=R();return function(){var fe=W(q),F;if(we){var be=W(this).constructor;F=Reflect.construct(fe,arguments,be)}else F=fe.apply(this,arguments);return L(this,F)}}function L(q,we){if(we&&(g(we)==="object"||typeof we=="function"))return we;if(we!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(q)}function O(q){if(q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q}function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(q){return!1}}function W(q){return W=Object.setPrototypeOf?Object.getPrototypeOf:function(de){return de.__proto__||Object.getPrototypeOf(de)},W(q)}var G=f(666),ie=function(q){E(de,q);var we=D(de);function de(){return y(this,de),we.call(this)}return M(de,[{key:"draw",value:function(){}},{key:"redraw",value:function(){}},{key:"drawLabel",value:function(){}},{key:"redrawLabel",value:function(){}},{key:"drawArrow",value:function(){}},{key:"redrawArrow",value:function(){}},{key:"isConnect",value:function(){}},{key:"destroy",value:function(){}},{key:"remove",value:function(){}},{key:"click",value:function(){}},{key:"hover",value:function(){}},{key:"focus",value:function(){}},{key:"unFocus",value:function(){}}]),de}(G);Z.default=ie},1849:(w,Z,f)=>{"use strict";function g(G){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(q){return typeof q}:g=function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},g(G)}Object.defineProperty(Z,"__esModule",{value:!0});function y(G,ie){if(!(G instanceof ie))throw new TypeError("Cannot call a class as a function")}function A(G,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(ie&&ie.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),ie&&M(G,ie)}function M(G,ie){return M=Object.setPrototypeOf||function(we,de){return we.__proto__=de,we},M(G,ie)}function E(G){var ie=L();return function(){var we=O(G),de;if(ie){var fe=O(this).constructor;de=Reflect.construct(we,arguments,fe)}else de=we.apply(this,arguments);return C(this,de)}}function C(G,ie){if(ie&&(g(ie)==="object"||typeof ie=="function"))return ie;if(ie!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D(G)}function D(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function L(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(G){return!1}}function O(G){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(q){return q.__proto__||Object.getPrototypeOf(q)},O(G)}var R=f(666),W=function(G){A(q,G);var ie=E(q);function q(){return y(this,q),ie.call(this)}return q}(R);Z.default=W},9020:(w,Z,f)=>{"use strict";function g(q){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(de){return typeof de}:g=function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},g(q)}Object.defineProperty(Z,"__esModule",{value:!0});function y(q,we){if(!(q instanceof we))throw new TypeError("Cannot call a class as a function")}function A(q,we){for(var de=0;de<we.length;de++){var fe=we[de];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(q,fe.key,fe)}}function M(q,we,de){return we&&A(q.prototype,we),de&&A(q,de),q}function E(q,we){if(typeof we!="function"&&we!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(we&&we.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),we&&C(q,we)}function C(q,we){return C=Object.setPrototypeOf||function(fe,F){return fe.__proto__=F,fe},C(q,we)}function D(q){var we=R();return function(){var fe=W(q),F;if(we){var be=W(this).constructor;F=Reflect.construct(fe,arguments,be)}else F=fe.apply(this,arguments);return L(this,F)}}function L(q,we){if(we&&(g(we)==="object"||typeof we=="function"))return we;if(we!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(q)}function O(q){if(q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q}function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(q){return!1}}function W(q){return W=Object.setPrototypeOf?Object.getPrototypeOf:function(de){return de.__proto__||Object.getPrototypeOf(de)},W(q)}var G=f(666),ie=function(q){E(de,q);var we=D(de);function de(){return y(this,de),we.call(this)}return M(de,[{key:"draw",value:function(){}},{key:"addNode",value:function(){}},{key:"addNodes",value:function(){}},{key:"getWidth",value:function(){}},{key:"getHeight",value:function(){}},{key:"removeNode",value:function(){}},{key:"removeNodes",value:function(){}},{key:"setResize",value:function(){}},{key:"setSize",value:function(){}},{key:"moveTo",value:function(){}},{key:"getEndpoint",value:function(){}},{key:"addEndpoint",value:function(){}},{key:"remove",value:function(){}},{key:"destroy",value:function(){}},{key:"removeEndpoint",value:function(){}},{key:"collapse",value:function(){}},{key:"stretch",value:function(){}},{key:"click",value:function(){}},{key:"doubleClick",value:function(){}},{key:"onContextmenu",value:function(){}},{key:"hover",value:function(){}},{key:"focus",value:function(){}},{key:"unFocus",value:function(){}}]),de}(G);Z.default=ie},9140:(w,Z,f)=>{"use strict";function g(q){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(de){return typeof de}:g=function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},g(q)}Object.defineProperty(Z,"__esModule",{value:!0});function y(q,we){if(!(q instanceof we))throw new TypeError("Cannot call a class as a function")}function A(q,we){for(var de=0;de<we.length;de++){var fe=we[de];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(q,fe.key,fe)}}function M(q,we,de){return we&&A(q.prototype,we),de&&A(q,de),q}function E(q,we){if(typeof we!="function"&&we!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(we&&we.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),we&&C(q,we)}function C(q,we){return C=Object.setPrototypeOf||function(fe,F){return fe.__proto__=F,fe},C(q,we)}function D(q){var we=R();return function(){var fe=W(q),F;if(we){var be=W(this).constructor;F=Reflect.construct(fe,arguments,be)}else F=fe.apply(this,arguments);return L(this,F)}}function L(q,we){if(we&&(g(we)==="object"||typeof we=="function"))return we;if(we!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(q)}function O(q){if(q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q}function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(q){return!1}}function W(q){return W=Object.setPrototypeOf?Object.getPrototypeOf:function(de){return de.__proto__||Object.getPrototypeOf(de)},W(q)}var G=f(666),ie=function(q){E(de,q);var we=D(de);function de(){return y(this,de),we.call(this)}return M(de,[{key:"draw",value:function(){}},{key:"getEndpoint",value:function(){}},{key:"addEndpoint",value:function(){}},{key:"removeEndpoint",value:function(){}},{key:"moveTo",value:function(){}},{key:"getWidth",value:function(){}},{key:"getHeight",value:function(){}},{key:"setDraggable",value:function(){}},{key:"remove",value:function(){}},{key:"destroy",value:function(){}},{key:"focus",value:function(){}},{key:"unFocus",value:function(){}},{key:"click",value:function(){}},{key:"doubleClick",value:function(){}},{key:"onContextmenu",value:function(){}},{key:"hover",value:function(){}}]),de}(G);Z.default=ie},2903:(w,Z,f)=>{"use strict";function g(Q){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(oe){return typeof oe}:g=function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},g(Q)}Object.defineProperty(Z,"__esModule",{value:!0});var y=f(9140),A=C(y),M=f(4773),E=C(M);function C(Q){return Q&&Q.__esModule?Q:{default:Q}}function D(Q,I){if(!(Q instanceof I))throw new TypeError("Cannot call a class as a function")}function L(Q,I){for(var oe=0;oe<I.length;oe++){var te=I[oe];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(Q,te.key,te)}}function O(Q,I,oe){return I&&L(Q.prototype,I),oe&&L(Q,oe),Q}function R(Q,I,oe){return typeof Reflect!="undefined"&&Reflect.get?R=Reflect.get:R=function(ue,De,ve){var Ne=W(ue,De);if(!!Ne){var Ge=Object.getOwnPropertyDescriptor(Ne,De);return Ge.get?Ge.get.call(ve):Ge.value}},R(Q,I,oe||Q)}function W(Q,I){for(;!Object.prototype.hasOwnProperty.call(Q,I)&&(Q=F(Q),Q!==null););return Q}function G(Q,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");Q.prototype=Object.create(I&&I.prototype,{constructor:{value:Q,writable:!0,configurable:!0}}),I&&ie(Q,I)}function ie(Q,I){return ie=Object.setPrototypeOf||function(te,ue){return te.__proto__=ue,te},ie(Q,I)}function q(Q){var I=fe();return function(){var te=F(Q),ue;if(I){var De=F(this).constructor;ue=Reflect.construct(te,arguments,De)}else ue=te.apply(this,arguments);return we(this,ue)}}function we(Q,I){if(I&&(g(I)==="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return de(Q)}function de(Q){if(Q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q}function fe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Q){return!1}}function F(Q){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(oe){return oe.__proto__||Object.getPrototypeOf(oe)},F(Q)}var be=f(8092),pe=f(9392),ae=function(Q){G(oe,Q);var I=q(oe);function oe(te){var ue;return D(this,oe),ue=I.call(this,te),ue.id=te.id,ue.scope=te.scope,ue.group=te.group,ue.top=te.top||0,ue.left=te.left||0,ue.dom=te.dom||null,ue.draggable=te.draggable,ue.options=te,ue.__type="node",ue._on=te._on,ue._emit=te._emit,ue._global=te._global,ue.endpoints=[],ue._endpointsData=te.endpoints,ue._endpointLimitNum=te._endpointLimitNum,ue._isMoving=!1,ue.width=void 0,ue.height=void 0,ue._isForceUpdateSize=!1,ue}return O(oe,[{key:"draw",value:function(ue){var De=ue.dom;De||(De=be("<div></div>").attr("class","node").attr("id",ue.id));var ve=be(De);return ue.top!==void 0&&ve.css("top","".concat(ue.top,"px")),ue.left!==void 0&&ve.css("left","".concat(ue.left,"px")),this.updated&&this.updated(),ve[0]}},{key:"focus",value:function(){}},{key:"unFocus",value:function(){}},{key:"addEndpoint",value:function(ue,De){if(De)return this.emit("InnerEvents",{type:"node:addEndpoint",data:ue,isInited:De}),ue;var ve=ue.Class||E.default,Ne=new ve(pe.assign({limitNum:ue.limitNum||this._endpointLimitNum,_on:this._on,_emit:this._emit,_node:this,_global:this.global},ue));return this.emit("InnerEvents",{type:"node:addEndpoint",data:Ne}),this.endpoints.push(Ne),Ne}},{key:"removeEndpoint",value:function(ue){var De=pe.findIndex(this.endpoints,function(Ne){return Ne.id===ue});if(De!==-1){var ve=this.endpoints.splice(De,1)[0];return this.emit("InnerEvents",{type:"node:removeEndpoint",data:ve}),ve.destroy(),ve}}},{key:"getEndpoint",value:function(ue,De){return pe.find(this.endpoints,function(ve){return!ve.type||ve.type==="onlyConnect"?ue===ve.id:ue===ve.id&&(De&&De===ve.type||!De)})}},{key:"_init",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._isInited||(ue.left&&(this.left=ue.left),ue.top&&(this.top=ue.top),ue._isDeleteGroup?(this.group=void 0,this._group=void 0):ue.group&&(this.group=ue.group),delete ue._isDeleteGroup,this._isInited=!0,ue.dom?(this.dom=ue.dom,ue.left&&be(this.dom).css("left","".concat(ue.left,"px")),ue.top&&be(this.dom).css("top","".concat(ue.top,"px"))):this.dom=this.draw(pe.assign({id:this.id,top:this.top,left:this.left,dom:this.dom,options:this.options},ue)),this._hasEventListener||(this._addEventListener(),this._hasEventListener=!0))}},{key:"_moveTo",value:function(ue,De){var ve=this;be(this.dom).css("top",De).css("left",ue),this.endpoints.forEach(function(Ne){Ne.moveTo(ue-ve.left+Ne._left,De-ve.top+Ne._top)}),this.top=De,this.left=ue}},{key:"moveTo",value:function(ue,De,ve){this.emit("InnerEvents",{type:"node:move",node:this,x:ue,y:De,isNotEventEmit:ve})}},{key:"getWidth",value:function(ue){return(!ue||!this.width||this._isForceUpdateSize)&&(this.width=be(this.dom).outerWidth(),this._isForceUpdateSize=!1),this.width}},{key:"getHeight",value:function(ue){return(!ue||!this.height||this._isForceUpdateSize)&&(this.height=be(this.dom).outerHeight(),this._isForceUpdateSize=!1),this.height}},{key:"_createEndpoint",value:function(ue){var De=this;ue?this.endpoints.forEach(function(ve){return De.addEndpoint(ve,ue)}):this._endpointsData&&this._endpointsData.map(function(ve){return De.addEndpoint(ve)})}},{key:"_addEventListener",value:function(){var ue=this;be(this.dom).on("mousedown",function(De){var ve=0;De.button===ve&&(["SELECT","INPUT","RADIO","CHECKBOX","TEXTAREA"].includes(De.target.nodeName)||De.preventDefault(),ue.draggable?(ue._isMoving=!0,ue.emit("InnerEvents",{type:"node:dragBegin",data:ue})):ue.emit("InnerEvents",{type:"node:mouseDown",data:ue}))}),be(this.dom).on("click",function(De){De.preventDefault(),De.stopPropagation(),ue.emit("system.node.click",{node:ue}),ue.emit("events",{type:"node:click",node:ue})}),this.setDraggable(this.draggable)}},{key:"setDraggable",value:function(ue){this.draggable=ue}},{key:"remove",value:function(){this.emit("InnerEvents",{type:"node:delete",data:this})}},{key:"emit",value:function(ue,De){R(F(oe.prototype),"emit",this).call(this,ue,De),this._emit(ue,De)}},{key:"on",value:function(ue,De){R(F(oe.prototype),"on",this).call(this,ue,De),this._on(ue,De)}},{key:"destroy",value:function(ue){ue?(this.endpoints.forEach(function(De){!De._isInitedDom&&De.destroy(ue)}),be(this.dom).detach()):(this.endpoints.forEach(function(De){!De._isInitedDom&&De.destroy()}),be(this.dom).remove(),this.removeAllListeners(),this._hasEventListener=!1),this._isInited=!1}}]),oe}(A.default);Z.default=ae},2981:(w,Z,f)=>{"use strict";function g(F){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(pe){return typeof pe}:g=function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},g(F)}Object.defineProperty(Z,"__esModule",{value:!0});var y=f(2903),A=M(y);function M(F){return F&&F.__esModule?F:{default:F}}function E(F,be){if(!(F instanceof be))throw new TypeError("Cannot call a class as a function")}function C(F,be){for(var pe=0;pe<be.length;pe++){var ae=be[pe];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(F,ae.key,ae)}}function D(F,be,pe){return be&&C(F.prototype,be),pe&&C(F,pe),F}function L(F,be,pe){return typeof Reflect!="undefined"&&Reflect.get?L=Reflect.get:L=function(Q,I,oe){var te=O(Q,I);if(!!te){var ue=Object.getOwnPropertyDescriptor(te,I);return ue.get?ue.get.call(oe):ue.value}},L(F,be,pe||F)}function O(F,be){for(;!Object.prototype.hasOwnProperty.call(F,be)&&(F=de(F),F!==null););return F}function R(F,be){if(typeof be!="function"&&be!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(be&&be.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),be&&W(F,be)}function W(F,be){return W=Object.setPrototypeOf||function(ae,Q){return ae.__proto__=Q,ae},W(F,be)}function G(F){var be=we();return function(){var ae=de(F),Q;if(be){var I=de(this).constructor;Q=Reflect.construct(ae,arguments,I)}else Q=ae.apply(this,arguments);return ie(this,Q)}}function ie(F,be){if(be&&(g(be)==="object"||typeof be=="function"))return be;if(be!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q(F)}function q(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function we(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}function de(F){return de=Object.setPrototypeOf?Object.getPrototypeOf:function(pe){return pe.__proto__||Object.getPrototypeOf(pe)},de(F)}var fe=function(F){R(pe,F);var be=G(pe);function pe(ae){var Q;return E(this,pe),Q=be.call(this,ae),Q.children=ae.children,Q.parent=ae.parent,Q.collapsed=ae.collapsed||!1,ae.isRoot&&(Q.isRoot=ae.isRoot),Q}return D(pe,[{key:"_init",value:function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};L(de(pe.prototype),"_init",this).call(this,Q),Q.parent&&(this.parent=Q.parent,this.options.parent=Q.parent)}},{key:"collapse",value:function(){this._emit("InnerEvents",{type:"node:collapse",nodeId:this.id}),this.collapsed=!0}},{key:"expand",value:function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this._emit("InnerEvents",{type:"node:expand",nodeId:this.id,nodes:Q}),delete this.collapsed}},{key:"detectLeaf",value:function(){return!(this.children&&this.children.length>0)}},{key:"detectRoot",value:function(){return this.isRoot}}]),pe}(A.default);Z.default=fe},9507:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var g=f(9392),y=A(g);function A(D){return D&&D.__esModule?D:{default:D}}var M={default1:{type:"pathString",content:"M0 0 L-3 3 L2 0 L-3 -3 Z"},default:{type:"pathString",content:"M5 0 L0 -2 Q 1.0 0 0 2 Z"},length:5};function E(D){var L=y.default.get(D,"shapeType"),O=y.default.get(D,"dom"),R=y.default.get(D,"arrowPosition",.5),W=y.default.get(D,"path"),G=W.split(" "),ie=0,q=0;if(L==="BezierTest"||L==="AdvancedBezierTest"){var we={x:G[8],y:G[9]},de={x:G[1],y:G[2]};R!==1?(we=O.getPointAtLength(O.getTotalLength()*R+.001),de=O.getPointAtLength(O.getTotalLength()*R)):(we=O.getPointAtLength(O.getTotalLength()*R),de=O.getPointAtLength(O.getTotalLength()*R-.001)),ie=de.x-we.x,q=de.y-we.y}else if(L==="Straight"){var fe={x:G[1],y:G[2]},F={x:G[4],y:G[5]};ie=F.x-fe.x,q=F.y-fe.y}else{var be=0,pe=1;R!==1?(be=O.getPointAtLength(O.getTotalLength()*R),pe=O.getPointAtLength(O.getTotalLength()*R+.001)):(be=O.getPointAtLength(O.getTotalLength()*R-.001),pe=O.getPointAtLength(O.getTotalLength()*R)),ie=pe.x-be.x,q=pe.y-be.y}return{x:ie,y:q}}var C=function(L){L.forEach(function(O){M[O.key]={type:O.type,content:O.content,width:O.width,height:O.height}})};Z.default={calcSlope:E,ARROW_TYPE:M,registerArrow:C}},8786:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});function g(C,D){if(!(C instanceof D))throw new TypeError("Cannot call a class as a function")}function y(C,D){for(var L=0;L<D.length;L++){var O=D[L];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(C,O.key,O)}}function A(C,D,L){return D&&y(C.prototype,D),L&&y(C,L),C}var M=f(9392),E=function(){function C(D){g(this,C),this.canvas=D.canvas,this.terOffsetX=D.terOffsetX||0,this.terOffsetY=D.terOffsetY||0,this.terWidth=D.terWidth||0,this.terHeight=D.terHeight||0,this.canOffsetX=D.canOffsetX||0,this.canOffsetY=D.canOffsetY||0,this.scale=D.scale||1,this.scrollTop=0,this.scrollLeft=0,this.scrollTimer=void 0,this._calcScrollPos(),this.originX=void 0,this.originY=void 0,this._currentTerX=0,this._currentTerY=0}return A(C,[{key:"_changeCanvasInfo",value:function(L){L.terOffsetX!==void 0&&(this.terOffsetX=L.terOffsetX),L.terOffsetY!==void 0&&(this.terOffsetY=L.terOffsetY),L.terWidth!==void 0&&(this.terWidth=L.terWidth),L.terHeight!==void 0&&(this.terHeight=L.terHeight),L.canOffsetX!==void 0&&(this.canOffsetX=L.canOffsetX),L.canOffsetY!==void 0&&(this.canOffsetY=L.canOffsetY),L.scale!==void 0&&(this._lastScale=this.scale,this.scale=L.scale),L.canvas&&(this.canvas=L.canvas);var O=!1;L.originX!==void 0&&(this.originX=L.originX,O=!0),L.originY!==void 0&&(this.originY=L.originY,O=!0),O&&(this.canvas.wrapper.style.transformOrigin="".concat(this.originX,"% ").concat(this.originY,"%"));var R=!1;if(L.mouseX!==void 0&&this._currentTerX!==L.mouseX-this.terOffsetX&&(this._currentTerX=L.mouseX-this.terOffsetX,R=!0),L.mouseY!==void 0&&this._currentTerY!==L.mouseY-this.terOffsetY&&(this._currentTerY=L.mouseY-this.terOffsetY,R=!0),R){(this.originX===void 0||this.originY===void 0)&&(this.originX=0,this.originY=0);var W=this.originX/100*this.terWidth,G=this.originY/100*this.terHeight,ie=[parseInt(this.canOffsetX),parseInt(this.canOffsetY)],q=(L.mouseX-(W*(1-this._lastScale)+ie[0])-this.terOffsetX)/this._lastScale,we=(L.mouseY-(G*(1-this._lastScale)+ie[1])-this.terOffsetY)/this._lastScale,de=q/this.terWidth*100,fe=we/this.terHeight*100,F=-W*(1-this._lastScale),be=-G*(1-this._lastScale);W=de/100*this.terWidth,G=fe/100*this.terHeight;var pe=-W*(1-this._lastScale),ae=-G*(1-this._lastScale),Q=pe-F+ie[0],I=ae-be+ie[1];this.canvas.wrapper.style.transformOrigin="".concat(de,"% ").concat(fe,"%"),this.canvas.move([Q,I]),this.originX=de,this.originY=fe}}},{key:"canvas2terminal",value:function(L,O){return[this._canvas2terminal("x",L[0],O),this._canvas2terminal("y",L[1],O)]}},{key:"terminal2canvas",value:function(L,O){return[this._terminal2canvas("x",L[0],O),this._terminal2canvas("y",L[1],O)]}},{key:"_canvas2terminal",value:function(L,O,R){this._calcScrollPos();var W=M.get(R,"scale")||this.scale,G=M.get(R,"canOffsetX")!==void 0?M.get(R,"canOffsetX"):this.canOffsetX,ie=M.get(R,"canOffsetY")!==void 0?M.get(R,"canOffsetY"):this.canOffsetY,q=M.get(R,"terOffsetX")!==void 0?M.get(R,"terOffsetX"):this.terOffsetX,we=M.get(R,"terOffsetY")!==void 0?M.get(R,"terOffsetY"):this.terOffsetY,de=M.get(R,"originX")!==void 0?M.get(R,"originX"):this.originX||0,fe=M.get(R,"originY")!==void 0?M.get(R,"originY"):this.originY||0;if(L==="x"){var F=de/100*this.terWidth;return O*W+(F*(1-W)+G)+q}if(L==="y"){var be=fe/100*this.terHeight;return O*W+(be*(1-W)+ie)+we}}},{key:"_terminal2canvas",value:function(L,O,R){this._calcScrollPos();var W=M.get(R,"scale")||this.scale,G=M.get(R,"canOffsetX")!==void 0?M.get(R,"canOffsetX"):this.canOffsetX,ie=M.get(R,"canOffsetY")!==void 0?M.get(R,"canOffsetY"):this.canOffsetY,q=M.get(R,"terOffsetX")!==void 0?M.get(R,"terOffsetX"):this.terOffsetX,we=M.get(R,"terOffsetY")!==void 0?M.get(R,"terOffsetY"):this.terOffsetY,de=M.get(R,"originX")!==void 0?M.get(R,"originX"):this.originX||0,fe=M.get(R,"originY")!==void 0?M.get(R,"originY"):this.originY||0,F=this.scrollTop,be=this.scrollLeft;if(L==="x"){var pe=de/100*this.terWidth;return(O-(pe*(1-W)+G)-q-be)/W}if(L==="y"){var ae=fe/100*this.terHeight;return(O-(ae*(1-W)+ie)-we-F)/W}}},{key:"_calcScrollPos",value:function(){var L=this;if(!this.scrollTimer){var O=this.canvas.root,R=O.getBoundingClientRect();this.scrollTop=R.top-this.terOffsetY,this.scrollLeft=R.left-this.terOffsetX,this.scrollTimer=setTimeout(function(){L.scrollTimer=void 0},100)}}}]),C}();Z.default=E},7430:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});function g(D,L){if(!(D instanceof L))throw new TypeError("Cannot call a class as a function")}function y(D,L){for(var O=0;O<L.length;O++){var R=L[O];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(D,R.key,R)}}function A(D,L,O){return L&&y(D.prototype,L),O&&y(D,O),D}var M=f(8092),E=f(9392),C=function(){function D(L){g(this,D),this.root=L.root,this.canvas=L.canvas,this.domWrapper=E.get(L,"canvas.wrapper"),this.canvasHeight=0,this.canvasWidth=0,this.dom=null,this.isActive=!1,this.theme=E.get(L,"theme",{})||{shapeType:"circle",gap:10,adsorbGap:5,background:"#fff",lineColor:"#000",lineWidth:"1px",circleRadiu:2,circleColor:"#000"}}return A(D,[{key:"_resize",value:function(){this.canvasHeight=M(this.root).height(),this.canvasWidth=M(this.root).width(),M(this.dom).attr("width",this.canvasWidth),M(this.dom).attr("height",this.canvasHeight)}},{key:"create",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.theme=E.merge(this.theme,O.theme||{}),this.dom||(this.dom=M('<canvas class="butterfly-gird-canvas"></canvas>')[0],this._resize(),M(this.dom).appendTo(this.root)),this.theme.shapeType==="circle"?this.createCircle():this.theme.shapeType==="line"&&this.createLine(),this.theme.background&&M(this.dom).css("background",this.theme.background),this.isActive=!0}},{key:"createCircle",value:function(){var O=this.dom.getContext("2d");O.clearRect(0,0,this.canvasWidth,this.canvasHeight),O.beginPath(),O.fillStyle=this.theme.circleColor||"#000";var R=Math.PI*2,W=parseInt(this.theme.gap);W=W<5?5:W;for(var G=0;G<this.canvasWidth;G+=W)for(var ie=0;ie<this.canvasHeight;ie+=W)O.moveTo(G,ie),O.arc(G,ie,this.theme.circleRadiu,0,R);O.fill()}},{key:"createLine",value:function(){var O=this.dom.getContext("2d");O.strokeStyle=this.theme.lineColor||"#000",O.lineWidth=this.theme.lineWidth||1;var R=parseInt(this.theme.gap);R=R<5?5:R;for(var W=0;W<this.canvasHeight;W+=R)O.beginPath(),O.moveTo(0,W),O.lineTo(this.canvasWidth,W),O.stroke(),O.closePath();for(var G=0;G<this.canvasWidth;G+=R)O.beginPath(),O.moveTo(G,0),O.lineTo(G,this.canvasHeight),O.stroke(),O.closePath();O.stroke()}},{key:"justifyAllCoordinate",value:function(){var O=this,R=this.canvas.groups,W=this.canvas.nodes,G=function(q,we){var de=q.left,fe=q.top,F=q.left+q.getWidth(),be=q.top+q.getHeight(),pe=de%O.theme.gap,ae=F%O.theme.gap,Q=fe%O.theme.gap,I=be%O.theme.gap,oe=O.theme.gap-pe,te=O.theme.gap-ae,ue=O.theme.gap-Q,De=O.theme.gap-I,ve={left:Infinity,right:Infinity,top:Infinity,bottom:Infinity};pe<ae&&pe<ve.left&&(ve.left=pe),oe<pe&&oe<ve.right&&(ve.right=oe),ae<pe&&ae<ve.right&&(ve.left=ae),te<ae&&te<ve.left&&(ve.right=te),Q<I&&Q<ve.top&&(ve.top=Q),ue<Q&&ue<ve.bottom&&(ve.bottom=ue),I<Q&&I<ve.bottom&&(ve.top=I),De<I&&De<ve.top&&(ve.bottom=De);var Ne=[q.left,q.top];ve.left=ve.left<=O.theme.adsorbGap?ve.left:Infinity,ve.right=ve.right<=O.theme.adsorbGap?ve.right:Infinity,ve.top=ve.top<=O.theme.adsorbGap?ve.top:Infinity,ve.bottom=ve.bottom<=O.theme.adsorbGap?ve.bottom:Infinity,ve.left<ve.right&&(Ne[0]-=ve.left),ve.right<ve.left&&(Ne[0]+=ve.right),ve.top<ve.bottom&&(Ne[1]-=ve.top),ve.bottom<ve.top&&(Ne[1]+=ve.bottom),(Ne[0]!==q.left||Ne[1]!==q.top)&&(we==="node"?O.canvas._moveNode(q,Ne[0],Ne[1]):we==="group"&&O.canvas._moveGroup(q,Ne[0],Ne[1]))};R.forEach(function(ie){G(ie,"group"),(ie.nodes||[]).forEach(function(q){G(q,"node")})}),W.forEach(function(ie){G(ie,"node")})}},{key:"destroy",value:function(){this.dom.remove(),this.isActive=!1}}]),D}();Z.default=C},3481:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});function g(D,L){if(!(D instanceof L))throw new TypeError("Cannot call a class as a function")}function y(D,L){for(var O=0;O<L.length;O++){var R=L[O];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(D,R.key,R)}}function A(D,L,O){return L&&y(D.prototype,L),O&&y(D,O),D}var M=f(8092),E=f(9392),C=function(){function D(L){g(this,D),this.root=L.root,this.canvas=L.canvas,this.dom=null,this.cxt=null,this.isActive=!1,this.limitNum=L.limitNum,this.adsorp=E.assign({enable:!1,gap:5},L.adsorp||{}),this.theme={lineColor:"#9fd1ff",lineWidth:1},this._adsorpTimer=null}return A(D,[{key:"_resize",value:function(){this.canvasHeight=M(this.root).height(),this.canvasWidth=M(this.root).width(),M(this.guideLineCanvas).attr("width",this.canvasWidth),M(this.guideLineCanvas).attr("height",this.canvasHeight)}},{key:"create",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.theme=E.merge(this.theme,O.theme||{}),this.adsorp=E.merge(this.adsorp,O.adsorp||{}),this.dom||(this.dom=M('<div class="butterfly-guide-canvas-wrapper"></div>')[0],this.guideLineCanvas=M('<canvas class="butterfly-guideline-canvas"></canvas>')[0],this._resize(),M(this.guideLineCanvas).appendTo(this.dom),M(this.dom).appendTo(this.root)),this.cxt=this.guideLineCanvas.getContext("2d"),this.cxt.strokeStyle=this.theme.lineColor||"#000",this.cxt.lineWidth=this.theme.lineWidth||1,this.isActive=!0}},{key:"guidLine",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0],R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],W=function(ie){return Math.floor(ie)+.5};this.cxt.beginPath(),this.cxt.moveTo(W(O[0]),W(O[1])),this.cxt.lineTo(W(R[0]),W(R[1])),this.cxt.stroke(),this.cxt.closePath()}},{key:"draw",value:function(O,R){var W=this;this.cxt.clearRect(0,0,this.canvasWidth,this.canvasHeight);var G=parseInt(O.left),ie=parseInt(O.left+O.getWidth(!0)),q=parseInt(O.top),we=parseInt(O.top+O.getHeight(!0)),de=Infinity,fe=Infinity,F=Infinity,be=Infinity,pe=this.adsorp.enable?this.adsorp.gap:0,ae=null,Q=null,I=null,oe=null,te=this.canvas.groups,ue=this.canvas.nodes;te.forEach(function(Ft){if(!(R==="group"&&O.id===Ft.id)){var zt=parseInt(Ft.left),en=parseInt(Ft.left+Ft.getWidth()),Bt=parseInt(Ft.top),an=parseInt(Ft.top+Ft.getHeight());Math.abs(G-zt)<=pe&&Math.abs(Bt-q)<F&&(F=Math.abs(Bt-q),ae={item:Ft,gap:G-zt}),Math.abs(ie-en)<=pe&&Math.abs(an-we)<be&&(be=Math.abs(an-we),Q={item:Ft,gap:ie-en}),Math.abs(q-Bt)<=pe&&Math.abs(zt-G)<de&&(de=Math.abs(zt-G),I={item:Ft,gap:q-Bt}),Math.abs(we-an)<=pe&&Math.abs(en-ie)<fe&&(fe=Math.abs(en-ie),oe={item:Ft,gap:en-ie})}}),ue.forEach(function(Ft){if(!(R==="node"&&O.id===Ft.id)){var zt=parseInt(Ft.left),en=parseInt(Ft.left+Ft.getWidth()),Bt=parseInt(Ft.top),an=parseInt(Ft.top+Ft.getHeight());Ft._group&&(zt+=Ft._group.left,en+=Ft._group.left,Bt+=Ft._group.top,an+=Ft._group.top),Math.abs(G-zt)<=pe&&Math.abs(Bt-q)<F&&(F=Math.abs(Bt-q),ae={item:Ft,gap:G-zt}),Math.abs(ie-en)<=pe&&Math.abs(an-we)<be&&(be=Math.abs(an-we),Q={item:Ft,gap:ie-en}),Math.abs(q-Bt)<=pe&&Math.abs(zt-G)<de&&(de=Math.abs(zt-G),I={item:Ft,gap:q-Bt}),Math.abs(we-an)<=pe&&Math.abs(en-ie)<fe&&(fe=Math.abs(en-ie),oe={item:Ft,gap:we-an})}});var De=function(zt,en,Bt){W._adsorpTimer||(zt.moveTo(en,Bt,!1),W._adsorpTimer=setTimeout(function(){clearTimeout(W._adsorpTimer),W._adsorpTimer=null},100))};if(ae){var ve=ae.item,Ne=q>ve.top?ve.top:q,Ge=q>ve.top?we:ve.top+ve.getHeight(),$e=ve.left;De(O,O.left-ae.gap,O.top),this.guidLine([$e,Ne],[$e,Ge])}if(Q){var Be=Q.item,mt=q>Be.top?Be.top:q,Ot=q>Be.top?we:Be.top+Be.getWidth(),kt=parseInt(Be.left+Be.getWidth(!0));De(O,O.left-Q.gap,O.top),this.guidLine([kt,mt],[kt,Ot])}if(I){var Tt=I.item,Jt=G>Tt.left?Tt.left:G,Mn=G>Tt.left?ie:Tt.left+Tt.getWidth(),Yt=Tt.top;De(O,O.left,O.top-I.gap),this.guidLine([Jt,Yt],[Mn,Yt])}if(oe){var pn=oe.item,gt=G>pn.left?pn.left:G,_t=G>pn.left?ie:pn.left+pn.getHeight(),Gt=parseInt(pn.top+pn.getHeight(!0));De(O,O.left,O.top-oe.gap),this.guidLine([gt,Gt],[_t,Gt])}}},{key:"zoom",value:function(O){M(this.dom).css({transform:"scale(".concat(O,")")}),this.clearCanvas()}},{key:"move",value:function(O,R){M(this.dom).css("left",O).css("top",R),this.clearCanvas()}},{key:"setOrigin",value:function(O,R){M(this.dom).css("transform-origin","".concat(O,"% ").concat(R,"%"))}},{key:"clearCanvas",value:function(){this.cxt&&this.cxt.clearRect(0,0,this.canvasWidth,this.canvasHeight)}},{key:"destroy",value:function(){M(this.dom).destroy(),this.isActive=!1}}]),D}();Z.default=C},3828:(w,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});function f(g){var y=g.radius,A=g.data.nodes.filter(function(D){return D._isCircle}),M=360/A.length,E=0;g.getWidth&&(E=g.getWidth()/2);var C=0;g.getHeight&&(E=g.getHeight()/2),A.forEach(function(D,L){var O=2*Math.PI/360,R=L*M,W=y*Math.sin(R*O)-C,G=y*Math.cos(R*O)-E,ie=(y+30)*Math.sin(R*O)-C,q=(y+30)*Math.cos(R*O)-E;D.top=W,D.left=G,D.posInfo={angle:R,_textTop:ie,_textLeft:q}})}Z.default={circleLayout:f}},3141:w=>{"use strict";function Z(f){var g=f.center,y=f.nodeSize,A=f.minNodeSpacing,M=f.preventOverlap,E=f.sweep,C=f.equidistant,D=f.startAngle,L=D===void 0?3/2*Math.PI:D,O=f.clockwise,R=f.maxLevelDiff,W=f.sortBy,G=f.width,ie=f.height,q=f.data,we=q.nodes,de=q.edges,fe=we.map(function(gt){return{id:gt.id,top:gt.top,left:gt.left,degree:gt.degree,size:gt.size}}),F=de.map(function(gt){return{source:gt.source,target:gt.target}}),be=fe.length,pe,ae;if(be!==0){if(be===1){fe[0].x=g[0],fe[0].y=g[1];return}var Q=[],I;_.isArray(y)?I=Math.max(y[0],y[1]):I=y,fe.forEach(function(gt){Q.push(gt);var _t=I;_.isArray(gt.size)?_t=Math.max(gt.size[0],gt.size[1]):_.isNumber(gt.size)&&(_t=gt.size),I=Math.max(I,_t)}),!G&&typeof window!="undefined"&&(G=window.innerWidth),!ie&&typeof window!="undefined"&&(ie=window.innerHeight),O=ae!==void 0?!ae:O;var oe={},te={};if(Q.forEach(function(gt,_t){oe[gt.id]=gt,te[gt.id]=_t}),(W==="degree"||!_.isString(W)||Q[0][W]===void 0)&&(W="degree",!_.isNumber(fe[0].degree))){for(var ue=[],De=fe.length,ve=0;ve<De;ve++)ue[ve]=0;F.forEach(function(gt){gt.source&&(ue[te[gt.source]]+=1),gt.target&&(ue[te[gt.target]]+=1)}),Q.forEach(function(gt,_t){gt.degree=ue[_t]})}Q.sort(function(gt,_t){return _t[W]-gt[W]}),pe=Q[0],R=R||pe[W]/4;var Ne=[[]],Ge=Ne[0];Q.forEach(function(gt){if(Ge.length>0){var _t=Math.abs(Ge[0][W]-gt[W]);R&&_t>=R&&(Ge=[],Ne.push(Ge))}Ge.push(gt)});var $e=I+A;if(!M){var Be=Ne.length>0&&Ne[0].length>1,mt=Math.min(G,ie)/2-$e,Ot=mt/(Ne.length+(Be?1:0));$e=Math.min($e,Ot)}var kt=0;if(Ne.forEach(function(gt){var _t=_t;_t===void 0&&(_t=2*Math.PI-2*Math.PI/gt.length);var Gt=gt.dTheta=_t/Math.max(1,gt.length-1);if(gt.length>1&&M){var Ft=Math.cos(Gt)-Math.cos(0),zt=Math.sin(Gt)-Math.sin(0),en=Math.sqrt($e*$e/(Ft*Ft+zt*zt));kt=Math.max(en,kt)}gt.r=kt,kt+=$e}),C){for(var Tt=0,Jt=0,Mn=0;Mn<Ne.length;Mn++){var Yt=Ne[Mn],pn=Yt.r-Jt;Tt=Math.max(Tt,pn)}Jt=0,Ne.forEach(function(gt,_t){_t===0&&(Jt=gt.r),gt.r=Jt,Jt+=Tt})}Ne.forEach(function(gt){var _t=gt.dTheta,Gt=gt.r;gt.forEach(function(Ft,zt){var en=L+(O?1:-1)*_t*zt;Ft.x=g[0]+Gt*Math.cos(en),Ft.y=g[1]+Gt*Math.sin(en)})}),f.data.nodes.forEach(function(gt,_t){gt.top=fe[_t].y,gt.left=fe[_t].x})}}w.exports=Z},7491:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var g=f(6305),y=A(g);function A(be){return be&&be.__esModule?be:{default:be}}function M(be){return L(be)||D(be)||C(be)||E()}function E(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(be,pe){if(!!be){if(typeof be=="string")return O(be,pe);var ae=Object.prototype.toString.call(be).slice(8,-1);if(ae==="Object"&&be.constructor&&(ae=be.constructor.name),ae==="Map"||ae==="Set")return Array.from(be);if(ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ae))return O(be,pe)}}function D(be){if(typeof Symbol!="undefined"&&be[Symbol.iterator]!=null||be["@@iterator"]!=null)return Array.from(be)}function L(be){if(Array.isArray(be))return O(be)}function O(be,pe){(pe==null||pe>be.length)&&(pe=be.length);for(var ae=0,Q=new Array(pe);ae<pe;ae++)Q[ae]=be[ae];return Q}function R(be,pe){var ae=Object.keys(be);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(be);pe&&(Q=Q.filter(function(I){return Object.getOwnPropertyDescriptor(be,I).enumerable})),ae.push.apply(ae,Q)}return ae}function W(be){for(var pe=1;pe<arguments.length;pe++){var ae=arguments[pe]!=null?arguments[pe]:{};pe%2?R(Object(ae),!0).forEach(function(Q){G(be,Q,ae[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors(ae)):R(Object(ae)).forEach(function(Q){Object.defineProperty(be,Q,Object.getOwnPropertyDescriptor(ae,Q))})}return be}function G(be,pe,ae){return pe in be?Object.defineProperty(be,pe,{value:ae,enumerable:!0,configurable:!0,writable:!0}):be[pe]=ae,be}var ie=f(9392),q=function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Q=arguments.length>2?arguments[2]:void 0,I=[];return pe.forEach(function(oe){var te=ae.find(function(De){return De.id===oe.id});if(!!te){var ue={top:0,left:0};Q&&(ue=Q),I.push({id:oe.id,top:te.top+ue.top,left:te.left+ue.left})}}),I},we=function be(pe,ae){var Q=ie.cloneDeep(pe),I=Q.data,oe=Q.ranksep,te=Q.nodesep,ue=[],De=[],ve=I.nodes.filter(function(kt){return!kt.group}),Ne=I.groups.filter(function(kt){return!kt.group}),Ge=de(I),$e=W(W({},Q),{},{ranksep:oe,nodesep:te,data:{nodes:[].concat(M(ve),M(Ne)),edges:Ge}});(0,y.default)($e),De.push.apply(De,M(q(Ne,$e.data.nodes,ae))),ue.push.apply(ue,M(q(ve,$e.data.nodes,ae))),(Q.data.groups||[]).forEach(function(kt,Tt){var Jt=I.nodes.filter(function(pn){return pn.group===kt.id}),Mn=fe(kt.id),Yt=W(W({},Q),{},{nodesep:te,data:{nodes:Jt,edges:Mn}});(0,y.default)(Yt),ue.push.apply(ue,M(q(Q.data.nodes,Yt.data.nodes)))});var Be=ie.uniq(I.groups.filter(function(kt){return kt.group}).map(function(kt){return kt.group})),mt=[],Ot=[];return ie.isEmpty(Be)||Be.forEach(function(kt){var Tt=I.groups.filter(function(Gt){return Gt.group===kt});Tt.forEach(function(Gt){return delete Gt.group});var Jt=Tt.map(function(Gt){return Gt.id}),Mn=I.nodes.filter(function(Gt){return[kt].concat(M(Jt)).includes(Gt.group)}),Yt=De.find(function(Gt){return Gt.id===kt}),pn=be(W(W({},Q),{},{data:{nodes:Mn,groups:Tt,edges:I.edges}}),Yt),gt=pn.nodes,_t=pn.groups;mt=gt,Ot=_t}),{nodes:[].concat(M(ue),M(mt)),groups:[].concat(M(De),M(Ot))}},de=function(pe){var ae=pe.nodes,Q=ae===void 0?[]:ae,I=pe.edges,oe=I===void 0?[]:I,te=pe.groups,ue=te===void 0?[]:te,De=[];ue.forEach(function(Ne){var Ge=Q.filter(function($e){return $e.group===Ne.id});Ge.forEach(function($e){var Be=oe.filter(function(Ot){return String(Ot.source)===String($e.id)}),mt=oe.filter(function(Ot){return String(Ot.target)===String($e.id)});Be.forEach(function(Ot){return Ot.source=Ne.id}),mt.forEach(function(Ot){return Ot.target=Ne.id}),De.push.apply(De,M(Be).concat(M(mt)))})});var ve=Q.filter(function(Ne){return!Ne.group});return ve.forEach(function(Ne){var Ge=oe.filter(function(Be){return String(Be.source)===String(Ne.id)}),$e=oe.filter(function(Be){return String(Be.target)===String(Ne.id)});De.push.apply(De,M(Ge).concat(M($e)))}),ie.uniqWith(De,ie.isEqual)},fe=function(pe,ae){var Q=pe.nodes,I=Q===void 0?[]:Q,oe=pe.edges,te=oe===void 0?[]:oe,ue=[],De=I.filter(function(ve){return ve.group===ae});return De.forEach(function(ve){var Ne=te.filter(function($e){return String($e.source)===String(ve.id)}),Ge=te.filter(function($e){return String($e.target)===String(ve.id)});ue.push.apply(ue,M(Ne).concat(M(Ge)))}),ie.uniqWith(ue,ie.isEqual)};function F(be){var pe=be.data;if(ie.isEmpty(pe.groups)){(0,y.default)(be);return}var ae=we(be);be.data.nodes.forEach(function(Q){var I=ae.nodes.find(function(oe){return oe.id===Q.id});!I||(Q.top=I.top,Q.left=I.left)}),be.data.groups.forEach(function(Q){var I=ae.groups.find(function(oe){return oe.id===Q.id});!I||(Q.top=I.top,Q.left=I.left)})}Z.default={dagreGroupLayout:F}},6305:(w,Z,f)=>{"use strict";var g=f(2546);function y(M){var E=M.nodeSize,C=M.rankdir,D=M.nodesepFunc,L=M.ranksepFunc,O=M.nodesep,R=M.ranksep,W=M.controlPoints,G=M.data.edges,ie=G===void 0?[]:G,q=M.data.nodes,we=q.map(function(ae){return{id:ae.id,top:ae.top,left:ae.left,width:ae.width,height:ae.height}});if(!!we){var de=new g.graphlib.Graph,fe;E?_.isArray(E)?fe=function(){return E}:fe=function(){return[E,E]}:fe=function(Q){return Q.size?_.isArray(Q.size)?Q.size:[Q.size,Q.size]:[40,40]};var F=A(D,O,50),be=A(L,R,50);(C==="LR"||C==="RL")&&(F=A(L,R,50),be=A(D,O,50)),we.forEach(function(ae){var Q=fe(ae),I=be(ae),oe=F(ae),te=ae.width||Q[0]+2*oe,ue=ae.height||Q[1]+2*I;de.setNode(ae.id,{width:te,height:ue})}),ie.forEach(function(ae){de.setEdge(ae.source,ae.target,{weight:ae.weight||1})}),de.setDefaultEdgeLabel(function(){return{}}),M.nodes=we,de.setGraph(M),g.layout(de);var pe;return de.nodes().forEach(function(ae){if(pe=de.node(ae),pe){var Q=we.findIndex(function(I){return I.id===ae});we[Q].left=pe.x,we[Q].top=pe.y,we[Q].posInfo={_out:de._out[ae],_in:de._in[ae],_preds:de._preds[ae],_sucs:de._sucs[ae]}}}),de.edges().forEach(function(ae){pe=de.edge(ae);var Q=ie.findIndex(function(I){return I.source===ae.v&&I.target===ae.w});W&&ie[Q].type!=="loop"&&ie[Q].shape!=="loop"&&(ie[Q].controlPoints=pe.points.slice(1,pe.points.length-1))}),we.forEach(function(ae,Q){q[Q].left=ae.left,q[Q].top=ae.top,q[Q].posInfo=ae.posInfo}),M}}function A(M,E,C){var D;return M?D=M:_.isNumber(E)?D=function(){return E}:D=function(){return C},D}w.exports=y},7321:(w,Z,f)=>{"use strict";var g=f(3631);function y(A){var M=A.opts,E=_.cloneDeep(A.data),C=E.nodes.filter(function(G){return!G.group}),D=E.nodes.filter(function(G){return G.group});C=C.concat(E.groups),D.forEach(function(G){var ie=_.find(E.groups,function(q){return q.id===G.group});G.x=Math.random()*(ie.width||150),G.y=Math.random()*(ie.height||120)});for(var L=E.edges.map(function(G){var ie=_.find(D,function(we){return we.source===G.id});ie&&(G.source=ie.group);var q=_.find(D,function(we){return we.target===G.id});return q&&(G.target=ie.group),G}),O=g.forceSimulation(C).force("charge",function(){return M.chargeStrength?g.forceManyBody().strength(M.chargeStrength):g.forceManyBody()}()).force("center",g.forceCenter(M.width/2,M.height/2)).force("link",g.forceLink(L).id(function(G){return G[_.get(M.link,"id","id")]}).distance(M.link.distance).strength(M.link.strength)).stop(),R=0,W=Math.ceil(Math.log(O.alphaMin())/Math.log(1-O.alphaDecay()));R<W;++R)O.tick();A.data.nodes.forEach(function(G,ie){G.top=E.nodes[ie].y,G.left=E.nodes[ie].x}),A.data.groups.forEach(function(G,ie){G.top=E.groups[ie].y,G.left=E.groups[ie].x})}w.exports=y},8486:w=>{"use strict";var Z=800;function f(E){var C=E.opts,D=E.data.nodes,L=C.center;if(!(!D||D.length===0)){if(D.length===1){D[0].x=L[0],D[0].y=L[1];return}var O={},R={};D.forEach(function(W,G){_.isNumber(W.x)||(W.x=Math.random()*C.width),_.isNumber(W.y)||(W.y=Math.random()*C.height),O[W.id]=W,R[W.id]=G}),C.nodeMap=O,C.nodeIdxMap=R,g(E)}}function g(E){var C=E.opts,D=E.data.nodes,L=E.data.edges,O=C.maxIteration;!C.width&&typeof window!="undefined"&&(C.width=window.innerWidth),!C.height&&typeof window!="undefined"&&(C.height=window.innerHeight);var R=C.center,W=C.width/10,G=Math.sqrt(C.width*C.height/(D.length+1)),ie=C.gravity,q=C.speed,we=C.clustering,de={};if(we){D.forEach(function(pe){if(de[pe.cluster]===void 0){var ae={name:pe.cluster,cx:0,cy:0,count:0};de[pe.cluster]=ae}var Q=de[pe.cluster];_.isNumber(pe.x)&&(Q.cx+=pe.x),_.isNumber(pe.y)&&(Q.cy+=pe.y),Q.count++});for(var fe in de)de[fe].cx/=de[fe].count,de[fe].cy/=de[fe].count}for(var F=function(ae){var Q=[];if(D.forEach(function(ue,De){Q[De]={x:0,y:0}}),y(D,L,Q,G,C),we){var I=C.clusterGravity||ie;D.forEach(function(ue,De){if(!(!_.isNumber(ue.x)||!_.isNumber(ue.y))){var ve=de[ue.cluster],Ne=Math.sqrt((ue.x-ve.cx)*(ue.x-ve.cx)+(ue.y-ve.cy)*(ue.y-ve.cy)),Ge=G*I;Q[De].x-=Ge*(ue.x-ve.cx)/Ne,Q[De].y-=Ge*(ue.y-ve.cy)/Ne}});for(var oe in de)de[oe].cx=0,de[oe].cy=0,de[oe].count=0;D.forEach(function(ue){var De=de[ue.cluster];_.isNumber(ue.x)&&(De.cx+=ue.x),_.isNumber(ue.y)&&(De.cy+=ue.y),De.count++});for(var te in de)de[te].cx/=de[te].count,de[te].cy/=de[te].count}D.forEach(function(ue,De){if(!(!_.isNumber(ue.x)||!_.isNumber(ue.y))){var ve=.01*G*ie;Q[De].x-=ve*(ue.x-R[0]),Q[De].y-=ve*(ue.y-R[1])}}),D.forEach(function(ue,De){if(!(!_.isNumber(ue.x)||!_.isNumber(ue.y))){var ve=Math.sqrt(Q[De].x*Q[De].x+Q[De].y*Q[De].y);if(ve>0){var Ne=Math.min(W*(q/Z),ve);ue.x+=Q[De].x/ve*Ne,ue.y+=Q[De].y/ve*Ne}}})},be=0;be<O;be++)F(be)}function y(E,C,D,L,O){A(E,D,L),M(C,D,L,O)}function A(E,C,D){E.forEach(function(L,O){C[O]={x:0,y:0},E.forEach(function(R,W){if(O!==W&&!(!_.isNumber(L.x)||!_.isNumber(R.x)||!_.isNumber(L.y)||!_.isNumber(R.y))){var G=L.x-R.x,ie=L.y-R.y,q=G*G+ie*ie;if(q===0){q=1;var we=O>W?1:-1;G=.01*we,ie=.01*we}var de=D*D/q;C[O].x+=G*de,C[O].y+=ie*de}})})}function M(E,C,D,L){E.forEach(function(O){if(!(!O.source||!O.target)){var R=L.nodeIdxMap[O.source],W=L.nodeIdxMap[O.target];if(R!==W){var G=L.nodeMap[O.source],ie=L.nodeMap[O.target];if(!(!_.isNumber(ie.x)||!_.isNumber(G.x)||!_.isNumber(ie.y)||!_.isNumber(G.y))){var q=ie.x-G.x,we=ie.y-G.y,de=Math.sqrt(q*q+we*we),fe=de*de/D;C[W].x-=q/de*fe,C[W].y-=we/de*fe,C[R].x+=q/de*fe,C[R].y+=we/de*fe}}}})}w.exports=f},7e3:w=>{"use strict";function Z(E){var C=E.opts,D=E.data.nodes,L=D.length,O=C.center;if(L!==0){if(L===1){D[0].x=O[0],D[0].y=O[1],D[0].left=O[0],D[0].top=O[1];return}var R=E.data.edges,W=[];D.forEach(function(pe){W.push(pe)});var G={};if(W.forEach(function(pe,ae){G[pe.id]=ae}),(C.sortBy==="degree"||typeof C.sortBy=="string"||W[0][C.sortBy]===void 0)&&(C.sortBy="degree",isNaN(D[0].degree))){var ie=f(W.length,G,R);W.forEach(function(pe,ae){pe.degree=ie[ae]})}W.sort(function(pe,ae){return ae[C.sortBy]-pe[C.sortBy]}),!C.width&&typeof window!="undefined"&&(C.width=window.innerWidth),!C.height&&typeof window!="undefined"&&(C.height=window.innerHeight);var q=C.rows,we=C.cols!=null?C.cols:C.columns;C.cells=L,q!=null&&we!=null?(C.rows=q,C.cols=we):q!=null&&we==null?(C.rows=q,C.cols=Math.ceil(C.cells/C.rows)):q==null&&we!=null?(C.cols=we,C.rows=Math.ceil(C.cells/C.cols)):(C.splits=Math.sqrt(C.cells*C.height/C.width),C.rows=Math.round(C.splits),C.cols=Math.round(C.width/C.height*C.splits)),C.cellWidth=C.width/C.cols,C.cellHeight=C.height/C.rows,C.condense&&(C.cellWidth=0,C.cellHeight=0),C.preventOverlap&&W.forEach(function(pe){(!pe.x||!pe.y)&&(pe.x=0,pe.y=0);var ae,Q;typeof pe.size=="number"&&(ae=pe.size,Q=pe.size),(ae===void 0||Q===void 0)&&(typeof pe.nodeSize=="number"?(ae=C.nodeSize,Q=C.nodeSize):(ae=30,Q=30));var I=C.preventOverlapPadding,oe=ae+I,te=Q+I;C.cellWidth=Math.max(C.cellWidth,oe),C.cellHeight=Math.max(C.cellHeight,te)}),C.cellUsed={},C.row=0,C.col=0,C.id2manPos={};for(var de=0;de<W.length;de++){var fe=W[de],F=void 0;if(C.position&&(F=C.position(fe)),F&&(F.row!==void 0||F.col!==void 0)){var be={row:F.row,col:F.col};if(be.col===void 0)for(be.col=0;y(be.row,be.col,C);)be.col++;else if(be.row===void 0)for(be.row=0;y(be.row,be.col,C);)be.row++;C.id2manPos[fe.id]=be,g(be.row,be.col)}M(fe,C)}}}function f(E,C,D){for(var L=[],O=0;O<E;O++)L[O]=0;return D.forEach(function(R){R.source&&(L[C[R.source]]+=1),R.target&&(L[C[R.target]]+=1)}),L}function g(E,C,D){D.cellUsed["c-".concat(E,"-").concat(C)]=!0}function y(E,C,D){return D.cellUsed["c-".concat(E,"-").concat(C)]||!1}function A(E){var C=E,D=C.cols||5;C.col++,C.col>=D&&(C.col=0,C.row++)}function M(E,C){var D=C,L=D.begin,O=D.width,R=D.height,W,G,ie=D.id2manPos[E.id];if(ie)W=ie.col*O+O/2+L[0],G=ie.row*R+R/2+L[1];else{for(;y(D.row,D.col,D);)A(C);W=D.col*O+O/2+L[0],G=D.row*R+R/2+L[1],g(D.row,D.col,D),A(C)}E.x=W,E.y=G,E.left=W,E.top=G}w.exports=Z},4434:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var g=f(526);function y(A){for(var M=[A],E=[];M.length>0;){var C=M.pop(),D=C.data;D.left=C.x,D.top=C.y,D.treePos={hgap:C.hgap,vgap:C.vgap,x:C.x,y:C.y,depth:C.depth,side:C.side},E.push(D),M=M.concat(C.children)}return E[0]}Z.default={compactBox:function(M,E){return y(g.compactBox(M,E))},dendrogram:function(M,E){return y(g.dendrogram(M,E))},indented:function(M,E){return y(g.indented(M,E))},mindmap:function(M,E){return y(g.mindmap(M,E))}}},6414:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var g=f(3828),y=be(g),A=f(8486),M=be(A),E=f(7e3),C=be(E),D=f(7321),L=be(D),O=f(3141),R=be(O),W=f(6305),G=be(W),ie=f(4229),q=be(ie),we=f(7491),de=be(we),fe=f(4434),F=be(fe);function be(I){return I&&I.__esModule?I:{default:I}}var pe=f(3631),ae=f(9392);function Q(I){for(var oe=I.opts,te=ae.cloneDeep(I.data),ue=pe.forceSimulation(te.nodes).force("charge",pe.forceManyBody().strength(oe.chargeStrength)).force("center",pe.forceCenter(oe.width/2,oe.height/2)).force("link",pe.forceLink(te.edges).distance(oe.link.distance).strength(oe.link.strength)).force("x",pe.forceX()).force("y",pe.forceY()).stop(),De=0,ve=Math.ceil(Math.log(ue.alphaMin())/Math.log(1-ue.alphaDecay()));De<ve;++De)ue.tick();I.data.nodes.forEach(function(Ne,Ge){Ne.top=te.nodes[Ge].y,Ne.left=te.nodes[Ge].x})}Z.default={forceLayout:L.default,forceTreeLayout:Q,treeLayout:F.default,dagreLayout:G.default,concentLayout:R.default,gridLayout:C.default,fruchterman:M.default,circleLayout:y.default.circleLayout,radial:q.default,dagreGroupLayout:de.default.dagreGroupLayout}},2059:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.getDegree=Z.rotate=Z.scale=Z.move=Z.translate=Z.getAdjMatrix=Z.floydWarshall=Z.scaleMatrix=Z.distance=Z.getCircleCenterByPoints=Z.invertMatrix=Z.applyMatrix=Z.getEllipseIntersectByPoint=Z.getCircleIntersectByPoint=Z.getRectIntersectByPoint=void 0;var g=f(6340),y=function(pe,ae,Q){return pe>=ae&&pe<=Q},A=function(pe,ae,Q,I){var oe=.001,te={x:Q.x-pe.x,y:Q.y-pe.y},ue={x:ae.x-pe.x,y:ae.y-pe.y},De={x:I.x-Q.x,y:I.y-Q.y},ve=ue.x*De.y-ue.y*De.x,Ne=ve*ve,Ge=ue.x*ue.x+ue.y*ue.y,$e=De.x*De.x+De.y*De.y,Be=null;if(Ne>oe*Ge*$e){var mt=(te.x*De.y-te.y*De.x)/ve,Ot=(te.x*ue.y-te.y*ue.x)/ve;y(mt,0,1)&&y(Ot,0,1)&&(Be={x:pe.x+mt*ue.x,y:pe.y+mt*ue.y})}return Be},M=Z.getRectIntersectByPoint=function(pe,ae){var Q=pe.x,I=pe.y,oe=pe.width,te=pe.height,ue=Q+oe/2,De=I+te/2,ve=[],Ne={x:ue,y:De};ve.push({x:Q,y:I}),ve.push({x:Q+oe,y:I}),ve.push({x:Q+oe,y:I+te}),ve.push({x:Q,y:I+te}),ve.push({x:Q,y:I});for(var Ge=null,$e=1;$e<ve.length&&(Ge=A(ve[$e-1],ve[$e],Ne,ae),!Ge);$e++);return Ge},E=Z.getCircleIntersectByPoint=function(pe,ae){var Q=pe.x,I=pe.y,oe=pe.r,te=ae.x,ue=ae.y,De=te-Q,ve=ue-I,Ne=Math.sqrt(De*De+ve*ve);if(Ne<oe)return null;var Ge=Math.sign(De),$e=Math.sign(ve),Be=Math.atan(ve/De);return{x:Q+Math.abs(oe*Math.cos(Be))*Ge,y:I+Math.abs(oe*Math.sin(Be))*$e}},C=Z.getEllipseIntersectByPoint=function(pe,ae){var Q=pe.rx,I=pe.ry,oe=pe.x,te=pe.y,ue=ae.x-oe,De=ae.y-te,ve=Math.atan2(De/I,ue/Q);return ve<0&&(ve+=2*Math.PI),{x:oe+Q*Math.cos(ve),y:te+I*Math.sin(ve)}},D=Z.applyMatrix=function(pe,ae,Q){var I=[pe.x,pe.y,Q];return(!ae||ae[0]===NaN)&&(ae=g.mat3.create()),g.vec3.transformMat3(I,I,ae),{x:I[0],y:I[1]}},L=Z.invertMatrix=function(pe,ae,Q){(!ae||ae[0]===NaN)&&(ae=g.mat3.create());var I=g.mat3.invert([],ae);I||(I=g.mat3.create());var oe=[pe.x,pe.y,Q];return g.vec3.transformMat3(oe,oe,I),{x:oe[0],y:oe[1]}},O=Z.getCircleCenterByPoints=function(pe,ae,Q){var I=pe.x-ae.x,oe=pe.y-ae.y,te=pe.x-Q.x,ue=pe.y-Q.y,De=(pe.x*pe.x-ae.x*ae.x-ae.y*ae.y+pe.y*pe.y)/2,ve=(pe.x*pe.x-Q.x*Q.x-Q.y*Q.y+pe.y*pe.y)/2,Ne=oe*te-I*ue;return{x:-(ue*De-oe*ve)/Ne,y:-(I*ve-te*De)/Ne}},R=Z.distance=function(pe,ae){var Q=pe.x-ae.x,I=pe.y-ae.y;return Math.sqrt(Q*Q+I*I)},W=Z.scaleMatrix=function(pe,ae){var Q=[];return pe.forEach(function(I){var oe=[];I.forEach(function(te){oe.push(te*ae)}),Q.push(oe)}),Q},G=Z.floydWarshall=function(pe){for(var ae=[],Q=pe.length,I=0;I<Q;I+=1){ae[I]=[];for(var oe=0;oe<Q;oe+=1)I===oe?ae[I][oe]=0:pe[I][oe]===0||!pe[I][oe]?ae[I][oe]=Infinity:ae[I][oe]=pe[I][oe]}for(var te=0;te<Q;te+=1)for(var ue=0;ue<Q;ue+=1)for(var De=0;De<Q;De+=1)ae[ue][De]>ae[ue][te]+ae[te][De]&&(ae[ue][De]=ae[ue][te]+ae[te][De]);return ae},ie=Z.getAdjMatrix=function(pe,ae){var Q=pe.nodes,I=pe.edges,oe=[],te={};if(!Q)throw new Error("invalid nodes data!");return Q&&Q.forEach(function(ue,De){te[ue.id]=De;var ve=[];oe.push(ve)}),I&&I.forEach(function(ue){var De=ue.source,ve=ue.target,Ne=te[De],Ge=te[ve];oe[Ne][Ge]=1,ae||(oe[Ge][Ne]=1)}),oe},q=Z.translate=function(pe,ae){pe.translate(ae.x,ae.y)},we=Z.move=function(pe,ae){var Q=pe.getMatrix();Q||(Q=g.mat3.create());var I=pe.getCanvasBBox(),oe=ae.x-I.minX,te=ae.y-I.minY,ue=(0,g.transform)(Q,[["t",oe,te]]);pe.setMatrix(ue)},de=Z.scale=function(pe,ae){var Q=pe.getMatrix();Q||(Q=g.mat3.create());var I=ae;isArray(ae)||(I=[ae,ae]),isArray(ae)&&ae.length===1&&(I=[ae[0],ae[0]]),Q=(0,g.transform)(Q,[["s",I[0],I[1]]]),pe.setMatrix(Q)},fe=Z.rotate=function(pe,ae){var Q=pe.getMatrix();Q||(Q=g.mat3.create()),Q=(0,g.transform)(Q,[["r",ae]]),pe.setMatrix(Q)},F=Z.getDegree=function(pe,ae,Q){for(var I=[],oe=0;oe<pe;oe++)I[oe]=0;return Q.forEach(function(te){te.source&&(I[ae[te.source]]+=1),te.target&&(I[ae[te.target]]+=1)}),I}},7630:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var g=f(9458);function y(C,D){if(!(C instanceof D))throw new TypeError("Cannot call a class as a function")}function A(C,D){for(var L=0;L<D.length;L++){var O=D[L];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(C,O.key,O)}}function M(C,D,L){return D&&A(C.prototype,D),L&&A(C,L),C}var E=function(){function C(D){y(this,C),this.distances=D.distances,this.dimension=D.dimension||2,this.linkDistance=D.linkDistance}return M(C,[{key:"layout",value:function(){var L=this,O=L.dimension,R=L.distances,W=L.linkDistance;try{var G=g.Matrix.mul(g.Matrix.pow(R,2),-.5),ie=G.mean("row"),q=G.mean("column"),we=G.mean();G.add(we).subRowVector(ie).subColumnVector(q);var de=new g.SingularValueDecomposition(G),fe=g.Matrix.sqrt(de.diagonalMatrix).diagonal();return de.leftSingularVectors.toJSON().map(function(Q){return g.Matrix.mul([Q],[fe]).toJSON()[0].splice(0,O)})}catch(Q){for(var F=[],be=0;be<R.length;be++){var pe=Math.random()*W,ae=Math.random()*W;F.push([pe,ae])}return F}}}]),C}();Z.default=E},4229:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var g=f(7630),y=C(g),A=f(8254),M=C(A),E=f(2059);function C(Q){return Q&&Q.__esModule?Q:{default:Q}}function D(Q){return W(Q)||R(Q)||O(Q)||L()}function L(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(Q,I){if(!!Q){if(typeof Q=="string")return G(Q,I);var oe=Object.prototype.toString.call(Q).slice(8,-1);if(oe==="Object"&&Q.constructor&&(oe=Q.constructor.name),oe==="Map"||oe==="Set")return Array.from(Q);if(oe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(oe))return G(Q,I)}}function R(Q){if(typeof Symbol!="undefined"&&Q[Symbol.iterator]!=null||Q["@@iterator"]!=null)return Array.from(Q)}function W(Q){if(Array.isArray(Q))return G(Q)}function G(Q,I){(I==null||I>Q.length)&&(I=Q.length);for(var oe=0,te=new Array(I);oe<I;oe++)te[oe]=Q[oe];return te}function ie(Q){for(var I=Q.length,oe=Q[0].length,te=[],ue=0;ue<I;ue++){for(var De=[],ve=0;ve<oe;ve++)Q[ue][ve]!==0?De.push(1/(Q[ue][ve]*Q[ue][ve])):De.push(0);te.push(De)}return te}function q(Q,I){var oe=-1;return Q.forEach(function(te,ue){te.id===I&&(oe=ue)}),oe}function we(Q,I){return Math.sqrt((Q[0]-I[0])*(Q[0]-I[0])+(Q[1]-I[1])*(Q[1]-I[1]))}function de(Q){var I=Q.opts,oe=Q.data.nodes,te=Q.data.edges||[],ue=I.center;if(!(!oe||oe.length===0)){if(oe.length===1){oe[0].x=oe[0].left=ue[0],oe[0].y=oe[0].top=ue[1];return}var De=I.linkDistance,ve=null;if(String(I.focusNode)){for(var Ne=!1,Ge=0;Ge<oe.length;Ge++)oe[Ge].id===I.focusNode&&(ve=oe[Ge],I.focusNode=ve,Ne=!0,Ge=oe.length);Ne||(ve=null)}else ve=I.focusNode;ve||(ve=oe[0],I.focusNode=ve);var $e=q(oe,ve.id);I.focusIndex=$e;var Be=(0,E.getAdjMatrix)({nodes:oe,edges:te},!1),mt=(0,E.floydWarshall)(Be),Ot=ae(mt,$e);pe(mt,$e,Ot+1),I.distances=mt;var kt=mt[$e];!I.width&&typeof window!="undefined"&&(I.width=window.innerWidth),!I.height&&typeof window!="undefined"&&(I.height=window.innerHeight);var Tt=I.width||500,Jt=I.height||500,Mn=Tt-ue[0]>ue[0]?ue[0]:Tt-ue[0],Yt=Jt-ue[1]>ue[1]?ue[1]:Jt-ue[1];Mn===0&&(Mn=Tt/2),Yt===0&&(Yt=Jt/2);var pn=Yt>Mn?Mn:Yt,gt=Math.max.apply(Math,D(kt)),_t=[];kt.forEach(function(Ci,li){I.unitRadius||(I.unitRadius=pn/gt),_t[li]=Ci*I.unitRadius}),I.radii=_t;var Gt=be(Q);I.eIdealDistances=Gt;var Ft=ie(Gt);I.weights=Ft;var zt=new y.default({distances:Gt,linkDistance:De}),en=zt.layout();en.forEach(function(Ci){isNaN(Ci[0])&&(Ci[0]=Math.random()*De),isNaN(Ci[1])&&(Ci[1]=Math.random()*De)}),I.positions=en,en.forEach(function(Ci,li){oe[li].x=oe[li].left=Ci[0]+ue[0],oe[li].y=oe[li].top=Ci[1]+ue[1]}),en.forEach(function(Ci){Ci[0]-=en[$e][0],Ci[1]-=en[$e][1]}),fe(Q);var Bt=I.preventOverlap,an=I.nodeSize,Di,_i=I.strictRadial;if(Bt){var wi=I.nodeSpacing,On;_.isNumber(wi)?On=function(){return wi}:_.isFunction(wi)?On=wi:On=function(){return 0},an?_.isArray(an)?Di=function(li){var kn=an[0]>an[1]?an[0]:an[1];return kn+On(li)}:Di=function(li){return an+On(li)}:Di=function(li){if(li.size){if(_.isArray(li.size)){var kn=li.size[0]>li.size[1]?li.size[0]:li.size[1];return kn+On(li)}return li.size+On(li)}return 10+On(li)};var Pt={nodeSizeFunc:Di,adjMatrix:Be,positions:en,radii:_t,height:Jt,width:Tt,strictRadial:_i,focusID:$e,iterations:I.maxPreventOverlapIteration||200,k:en.length/4.5,nodes:oe},et=new M.default(Pt);en=et.layout()}en.forEach(function(Ci,li){oe[li].x=oe[li].left=Ci[0]+ue[0],oe[li].y=oe[li].top=Ci[1]+ue[1]})}}function fe(Q){for(var I=Q.opts,oe=I.maxIteration,te=I.positions||[],ue=I.weights||[],De=I.eIdealDistances||[],ve=I.radii||[],Ne=0;Ne<=oe;Ne++){var Ge=Ne/oe;F(Ge,te,ve,De,ue,Q)}}function F(Q,I,oe,te,ue,De){var ve=De.opts,Ne=1-Q,Ge=ve.focusIndex;I.forEach(function($e,Be){var mt=we($e,[0,0]),Ot=mt===0?0:1/mt;if(Be!==Ge){var kt=0,Tt=0,Jt=0;I.forEach(function(Yt,pn){if(Be!==pn){var gt=we($e,Yt),_t=gt===0?0:1/gt,Gt=te[pn][Be];Jt+=ue[Be][pn],kt+=ue[Be][pn]*(Yt[0]+Gt*($e[0]-Yt[0])*_t),Tt+=ue[Be][pn]*(Yt[1]+Gt*($e[1]-Yt[1])*_t)}});var Mn=oe[Be]===0?0:1/oe[Be];Jt*=Ne,Jt+=Q*Mn*Mn,kt*=Ne,kt+=Q*Mn*$e[0]*Ot,$e[0]=kt/Jt,Tt*=Ne,Tt+=Q*Mn*$e[1]*Ot,$e[1]=Tt/Jt}})}function be(Q){var I=Q.opts,oe=Q.data.nodes;if(!oe)return[];var te=I.distances,ue=I.linkDistance,De=I.radii||[],ve=I.unitRadius||50,Ne=[];return te&&te.forEach(function(Ge,$e){var Be=[];Ge.forEach(function(mt,Ot){if($e===Ot)Be.push(0);else if(De[$e]===De[Ot])if(I.sortBy==="data")Be.push(mt*(Math.abs($e-Ot)*I.sortStrength)/(De[$e]/ve));else if(I.sortBy){var kt=oe[$e][I.sortBy]||0,Tt=oe[Ot][I.sortBy]||0;isString(kt)&&(kt=kt.charCodeAt(0)),isString(Tt)&&(Tt=Tt.charCodeAt(0)),Be.push(mt*(Math.abs(kt-Tt)*I.sortStrength)/(De[$e]/ve))}else Be.push(mt*ue/(De[$e]/ve));else{var Jt=(ue+ve)/2;Be.push(mt*Jt)}}),Ne.push(Be)}),Ne}function pe(Q,I,oe){for(var te=Q.length,ue=0;ue<te;ue++)if(Q[I][ue]===Infinity){Q[I][ue]=oe,Q[ue][I]=oe;for(var De=0;De<te;De++)Q[ue][De]!==Infinity&&Q[I][De]===Infinity&&(Q[I][De]=oe+Q[ue][De],Q[De][I]=oe+Q[ue][De])}for(var ve=0;ve<te;ve++)if(ve!==I){for(var Ne=0;Ne<te;Ne++)if(Q[ve][Ne]===Infinity){var Ge=Math.abs(Q[I][ve]-Q[I][Ne]);Ge=Ge===0?1:Ge,Q[ve][Ne]=Ge}}}function ae(Q,I){for(var oe=0,te=0;te<Q[I].length;te++)Q[I][te]!==Infinity&&(oe=Q[I][te]>oe?Q[I][te]:oe);return oe}Z.default=de},8254:(w,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});function f(E,C){if(!(E instanceof C))throw new TypeError("Cannot call a class as a function")}function g(E,C){for(var D=0;D<C.length;D++){var L=C[D];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(E,L.key,L)}}function y(E,C,D){return C&&g(E.prototype,C),D&&g(E,D),E}var A=800,M=function(){function E(C){f(this,E),this.positions=C.positions,this.adjMatrix=C.adjMatrix,this.focusID=C.focusID,this.radii=C.radii,this.iterations=C.iterations||10,this.height=C.height||10,this.width=C.width||10,this.speed=C.speed||100,this.gravity=C.gravity||10,this.nodeSizeFunc=C.nodeSizeFunc,this.k=C.k||5,this.strictRadial=C.strictRadial,this.nodes=C.nodes}return y(E,[{key:"layout",value:function(){var D=this,L=D.positions,O=[],R=D.iterations,W=D.width/10;D.maxDisplace=W,D.disp=O;for(var G=0;G<R;G++)L.forEach(function(ie,q){O[q]={x:0,y:0}}),D.getRepulsion(),D.updatePositions();return L}},{key:"getRepulsion",value:function(){var D=this,L=D.positions,O=D.nodes,R=D.disp,W=D.k,G=D.radii||[];L.forEach(function(ie,q){R[q]={x:0,y:0},L.forEach(function(we,de){if(q!==de&&G[q]===G[de]){var fe=ie[0]-we[0],F=ie[1]-we[1],be=Math.sqrt(fe*fe+F*F);if(be===0){be=1;var pe=q>de?1:-1;fe=.01*pe,F=.01*pe}if(be<D.nodeSizeFunc(O[q])/2+D.nodeSizeFunc(O[de])/2){var ae=W*W/be;R[q].x+=fe/be*ae,R[q].y+=F/be*ae}}})})}},{key:"updatePositions",value:function(){var D=this,L=D.positions,O=D.disp,R=D.speed,W=D.strictRadial,G=D.focusID,ie=D.maxDisplace||D.width/10;W&&O.forEach(function(we,de){var fe=L[de][0]-L[G][0],F=L[de][1]-L[G][1],be=Math.sqrt(fe*fe+F*F),pe=F/be,ae=-fe/be,Q=Math.sqrt(we.x*we.x+we.y*we.y),I=Math.acos((pe*we.x+ae*we.y)/Q);I>Math.PI/2&&(I-=Math.PI/2,pe*=-1,ae*=-1);var oe=Math.cos(I)*Q;we.x=pe*oe,we.y=ae*oe});var q=D.radii;L.forEach(function(we,de){if(de!==G){var fe=Math.sqrt(O[de].x*O[de].x+O[de].y*O[de].y);if(fe>0&&de!==G){var F=Math.min(ie*(R/A),fe);if(we[0]+=O[de].x/fe*F,we[1]+=O[de].y/fe*F,W){var be=we[0]-L[G][0],pe=we[1]-L[G][1],ae=Math.sqrt(be*be+pe*pe);be=be/ae*q[de],pe=pe/ae*q[de],we[0]=L[G][0]+be,we[1]=L[G][1]+pe}}}})}}]),E}();Z.default=M},4968:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.BOTTOM=Z.TOP=Z.RIGHT=Z.LEFT=void 0,Z._route=ie,Z._calcOrientation=q,Z._findControlPoint=we,Z._findSecondControlPoint=de,Z._findManhattanPoint=fe;var g=f(9392),y=A(g);function A(F){return F&&F.__esModule?F:{default:F}}function M(F){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M=function(pe){return typeof pe}:M=function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},M(F)}var E=20,C=.1,D=.01,L=20,O=Z.LEFT="Left",R=Z.RIGHT="Right",W=Z.TOP="Top",G=Z.BOTTOM="Bottom";function ie(F,be,pe,ae,Q){be.x=be.x||0,be.y=be.y||0,ae.x=ae.x||0,ae.y=ae.y||0;var I=be.x-ae.x,oe=be.y-ae.y,te,ue,De;F.push({x:be.x,y:be.y}),!(I*I<D&&oe*oe<D)&&(pe===O?I>0&&oe*oe<C&&Q===R?(te=ae,ue=Q):(I<0?te={x:be.x-E,y:be.y}:oe>0&&Q===G||oe<0&&Q===W?te={x:ae.x,y:be.y}:pe===Q?(De=Math.min(be.x,ae.x)-E,te={x:De,y:be.y}):te={x:be.x-I/2,y:be.y},oe>0?ue=W:ue=G):pe===R?I<0&&oe*oe<C&&Q===O?(te=ae,ue=Q):(I>0?te={x:be.x+E,y:be.y}:oe>0&&Q===G||oe<0&&Q===W?te={x:ae.x,y:be.y}:pe===Q?(De=Math.max(be.x,ae.x)+E,te={x:De,y:be.y}):te={x:be.x-I/2,y:be.y},oe>0?ue=W:ue=G):pe===G?I*I<C&&oe<0&&Q===W?(te=ae,ue=Q):(oe>0?te={x:be.x,y:be.y+E}:I>0&&Q===R||I<0&&Q===O?te={x:be.x,y:ae.y}:pe===Q?(De=Math.max(be.y,ae.y)+E,te={x:be.x,y:De}):te={x:be.x,y:be.y-oe/2},I>0?ue=O:ue=R):pe===W&&(I*I<C&&oe>0&&Q===G?(te=ae,ue=Q):(oe<0?te={x:be.x,y:be.y-E}:I>0&&Q===R||I<0&&Q===O?te={x:be.x,y:ae.y}:pe===Q?(De=Math.min(be.y,ae.y)-E,te={x:be.x,y:De}):te={x:be.x,y:be.y-oe/2},I>0?ue=O:ue=R)),ie(F,te,ue,ae,Q))}function q(F,be,pe,ae,Q){var I=function(Ne){if(Q){for(var Ge=function(Ot){var kt=y.default.some(Q,function(Tt){return Tt===Ne[Ot]});if(kt)return{v:Ne[Ot]}},$e=0;$e<Ne.length;$e++){var Be=Ge($e);if(M(Be)==="object")return Be.v}return Ne[0]}else return Ne[0]},oe=pe-F,te=ae-be,ue=null,De=Math.abs(te/oe);switch(oe===0||te===0?(oe===0&&(ue=te>=0?I(["Top","Left","Right","Bottom"]):ue,ue=te<0?I(["Bottom","Left","Right","Top"]):ue),te===0&&(ue=oe>=0?I(["Right","Top","Bottom","Left"]):ue,ue=oe<0?I(["Left","Top","Bottom","Right"]):ue)):oe>0&&te>0?De>1?ue=I(["Top","Left","Right","Bottom"]):ue=I(["Left","Top","Bottom","Right"]):oe<0&&te>0?De>1?ue=I(["Top","Right","Left","Bottom"]):ue=I(["Right","Top","Bottom","Left"]):oe<0&&te<0?De>1?ue=I(["Bottom","Right","Left","Top"]):ue=I(["Right","Bottom","Top","Left"]):De>1?ue=I(["Bottom","Left","Right","Top"]):ue=I(["Left","Bottom","Top","Right"]),ue){case"Left":return[-1,0];case"Right":return[1,0];case"Top":return[0,-1];case"Bottom":return[0,1]}}function we(F,be,pe,ae,Q){var I=10,oe=10,te=[];if(be.pos[0]===pe.pos[0]&&ae[1]!==Q[1]&&ae[0]===0&&Q[0]===0)return te=[F[0],F[1]+I*ae[1]],te;if(be.pos[1]===pe.pos[1]&&ae[0]!==Q[0]&&ae[1]===0&&Q[1]===0)return te=[F[0]+I*ae[0],F[1]],te;var ue=ae[0]!==Q[0]||ae[1]===Q[1];return ue?(Q[0]===0?te.push(pe.pos[0]<be.pos[0]?F[0]+oe:F[0]-oe):te.push(F[0]+I*Q[0]),Q[1]===0?te.push(pe.pos[1]<be.pos[1]?F[1]+oe:F[1]-oe):te.push(F[1]+I*ae[1])):(ae[0]===0?te.push(be.pos[0]<pe.pos[0]?F[0]+oe:F[0]-oe):te.push(F[0]-I*ae[0]),ae[1]===0?te.push(be.pos[1]<pe.pos[1]?F[1]+oe:F[1]-oe):te.push(F[1]-I*Q[1])),te}function de(F,be,pe,ae,Q){var I=(F.pos[0]+be.pos[0])/2,oe=(F.pos[1]+be.pos[1])/2,te=I-(I-F.pos[0])/2,ue=oe-(oe-F.pos[1])/2,De=I+(I-F.pos[0])/2,ve=oe+(oe-F.pos[1])/2,Ne=I,Ge=oe;Q==="Bezier2-1"?(Ne=I,Ge=oe):Q==="Bezier2-2"?(Ne=te,Ge=ue):Q==="Bezier2-3"&&(Ne=De,Ge=ve);var $e,Be,mt=Math.abs(F.pos[0]-F.pos[0]),Ot=Math.abs(F.pos[1]-be.pos[1]),kt=Math.sqrt(mt*mt+Ot*Ot),Tt=(be.pos[1]-F.pos[1])/(be.pos[0]-F.pos[0]);if(Tt===0&&(F.pos[0]<be.pos[0]&&pe[0]===1&&ae[0]===-1||F.pos[0]>be.pos[0]&&pe[0]===-1&&ae[0]===1||F.pos[1]<be.pos[1]&&pe[1]===1&&ae[1]===-1||F.pos[1]>be.pos[1]&&pe[1]===-1&&ae[1]===1))return $e=[I,oe];var Jt=-1/Tt,Mn=Ge-Jt*Ne;Be=Math.sqrt(3)*kt/6;var Yt,pn=pe[0]+ae[0],gt=pe[1]+ae[1];be.pos[0]<F.pos[0]&&be.pos[1]<F.pos[1]&&(pn===0&&gt===0||pn===1&&gt===-1)||be.pos[0]>F.pos[0]&&be.pos[1]<F.pos[1]&&pn===1&&gt===1||be.pos[0]<F.pos[0]&&be.pos[1]>F.pos[1]&&(pn===0&&gt===0||pn===1&&gt===1)||be.pos[0]>F.pos[0]&&be.pos[1]>F.pos[1]&&pn===1&&gt===-1?Yt=1:Yt=-1,$e=[Ne+Be*Yt,Jt*(Ne+Be*Yt)+Mn];var _t=.25,Gt=100;Be=kt*_t+Gt;var Ft=0,zt=0,en=0,Bt=0;return pe[0]===-1&&be.pos[0]>F.pos[0]||pe[0]===1&&be.pos[0]<F.pos[0]||pe[1]===1&&be.pos[1]<F.pos[1]||pe[1]===-1&&be.pos[1]>F.pos[1]?(pe[0]!==0&&(Ft=Be*pe[0]),pe[1]!==0&&(zt=Be*pe[1]),$e=[F.pos[0]+Ft,F.pos[1]+zt]):((pe[0]===ae[0]&&pe[1]===ae[1]||pe[0]!==0&&be.pos[1]<F.pos[1]&&ae[1]===-1||pe[0]!==0&&be.pos[1]>F.pos[1]&&ae[1]===1||pe[1]!==0&&be.pos[0]<F.pos[0]&&ae[0]===-1||pe[1]!==0&&be.pos[0]>F.pos[0]&&ae[0]===1)&&(ae[0]!==0?en=Be*ae[0]:ae[1]!==0&&(Bt=Be*ae[1]),$e=[be.pos[0]+en,be.pos[1]+Bt]),$e)}function fe(F,be){for(var pe=void 0,ae=Infinity,Q=0;Q<F.length-1;Q++){var I=F[Q].x===F[Q+1].x?"vertical":"horizontal",oe=F[Q],te=F[Q+1];I==="vertical"?ae>Math.abs(be.x-oe.x)&&(ae=Math.abs(be.x-oe.x),pe={from:oe,to:te,direction:I,index:Q}):ae>Math.abs(be.y-oe.y)&&(ae=Math.abs(be.y-oe.y),pe={from:oe,to:te,direction:I,index:Q})}return pe}},9531:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var g=f(4968),y=function(M,E){M.orientation||(M.orientation=(0,g._calcOrientation)(E.pos[0],E.pos[1],M.pos[0],M.pos[1])),E.orientation||(E.orientation=(0,g._calcOrientation)(M.pos[0],M.pos[1],E.pos[0],E.pos[1]));var C=Math.abs(M.pos[0]-E.pos[0]),D=Math.abs(M.pos[1]-E.pos[1]),L=M.orientation,O=E.orientation,R=Math.sqrt(C*C+D*D),W=.25,G=30,ie=0,q=0;L[0]!==0?ie=(R*W+G)*L[0]:L[1]!==0&&(q=(R*W+G)*L[1]);var we=0,de=0;O[0]!==0?we=(R*W+G)*O[0]:O[1]!==0&&(de=(R*W+G)*O[1]);var fe=[M.pos[0]+ie,M.pos[1]+q],F=[E.pos[0]+we,E.pos[1]+de],be=["M",M.pos[0],M.pos[1]];return be=be.concat(["C",fe[0],fe[1]],F[0],F[1]),be=be.concat([E.pos[0],E.pos[1]]),be.join(" ")};Z.default=y},7102:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var g=f(4968);function y(A,M){A.orientation||(A.orientation=(0,g._calcOrientation)(M.pos[0],M.pos[1],A.pos[0],A.pos[1])),M.orientation||(M.orientation=(0,g._calcOrientation)(A.pos[0],A.pos[1],M.pos[0],M.pos[1]));var E=Math.abs(A.pos[0]-M.pos[0]),C=Math.abs(A.pos[1]-M.pos[1]),D=A.pos[0]<M.pos[0]?E:0,L=A.pos[1]<M.pos[1]?C:0,O=A.pos[0]<M.pos[0]?0:E,R=A.pos[1]<M.pos[1]?0:C,W=A.orientation,G=M.orientation,ie=(0,g._findControlPoint)([D,L],A,M,W,G),q=(0,g._findControlPoint)([O,R],M,A,G,W),we=A.pos[0]<M.pos[0]?A.pos[0]:M.pos[0],de=A.pos[1]<M.pos[1]?A.pos[1]:M.pos[1];ie=[ie[0]+we,ie[1]+de],q=[q[0]+we,q[1]+de];var fe=["M",A.pos[0],A.pos[1]];return fe=fe.concat(["C",q[0],q[1],ie[0],ie[1]]),fe=fe.concat([M.pos[0],M.pos[1]]),fe.join(" ")}Z.default=y},2839:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var g=f(4968),y=function(M,E){M.orientation||(M.orientation=(0,g._calcOrientation)(E.pos[0],E.pos[1],M.pos[0],M.pos[1])),E.orientation||(E.orientation=(0,g._calcOrientation)(M.pos[0],M.pos[1],E.pos[0],E.pos[1]));var C=M.orientation,D=E.orientation,L=Math.abs(M.pos[0]-E.pos[0]),O=Math.abs(M.pos[1]-E.pos[1]),R=[],W=["M",M.pos[0],M.pos[1]];R=[E.pos[0]+L*.2*D[0],E.pos[1]+O*.2*D[1]],(E.pos[1]===M.pos[1]||E.pos[0]===M.pos[0])&&(R=[]);var G=[];return(C[0]===-1&&E.pos[0]>M.pos[0]||C[0]===1&&E.pos[0]<M.pos[0]||C[1]===1&&E.pos[1]<M.pos[1]||C[1]===-1&&E.pos[1]>M.pos[1])&&(R=[],G=[M.pos[0]+L*.2*C[0],M.pos[1]+O*.2*C[1]],(C[0]*D[0]==-1||C[1]*D[1]==-1)&&(R=[E.pos[0]+L*.2*D[0],E.pos[1]+O*.2*D[1]])),G.length&&(W=C[0]?W.concat(["H",G[0]]):W.concat(["V",G[1]])),R.length&&(W=W.concat(["L",R[0],R[1]])),G.length&&!R.length?W=W.concat(["L",E.pos[0],E.pos[1]]):W=D[0]?W.concat(["H",E.pos[0]]):W.concat(["V",E.pos[1]]),W.join(" ")};Z.default=y},935:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var g=f(9392),y=M(g),A=f(4968);function M(D){return D&&D.__esModule?D:{default:D}}function E(D,L){for(var O=null,R=null,W=0,G=1,ie=function(Be){return Math.sqrt(Math.pow(Be[0]-Be[2],2)+Math.pow(Be[1]-Be[3],2))},q=[],we=function(Be){return["M",Be.x1+L.x,Be.y1+L.y,"L",Be.x2+L.x,Be.y2+L.y]},de=function(Be){var mt=function(Ft,zt){return zt[0]>Ft[0]||zt[0]===Ft[0]?zt[1]>Ft[1]?2:1:zt[1]>Ft[1]?3:4},Ot=function(Ft,zt){return zt[0]===Ft[0]?zt[1]>Ft[0]?Infinity:-Infinity:zt[1]===Ft[1]?(zt[0]>Ft[0],0):(zt[1]-Ft[1])/(zt[0]-Ft[0])},kt=function(Ft,zt){var en=Ot(Ft,zt),Bt=Math.atan(en),an=mt(Ft,zt);return(an===4||an===3)&&(Bt+=Math.PI),Bt<0&&(Bt+=2*Math.PI),Bt},Tt=function(Ft,zt){return kt([Be.cx,Be.cy],[Ft,zt])},Jt=Tt(x1,y1),Mn=Tt(x2,y2),Yt=2*Math.PI;Mn<0&&(Mn+=Yt),Jt<0&&(Jt+=Yt);var pn=Mn<Jt?Mn+Yt:Mn,gt=Math.abs(pn-Jt),_t=Be.ac;return _t&&(gt=Yt-gt),["M",Be.x1+L.x,Be.y1+L.y,"A",Be.r,Be.r,"0",",",Be.x2+L.x,Be.y2+L.y]},fe=0;fe<D.length-1;fe++){if(O=O||y.default.cloneDeep(D[fe]),R=y.default.cloneDeep(D[fe+1]),W>0&&O[4]!==R[4]){var F=Math.min(W,ie(O),ie(R));O[2]-=O[5]*F,O[3]-=O[6]*F,R[0]+=R[5]*F,R[1]+=R[6]*F;var be=O[6]===R[5]&&R[5]===1||O[6]===R[5]&&R[5]===0&&O[5]!==R[6]||O[6]===R[5]&&R[5]===-1,pe=R[1]>O[3]?1:-1,ae=R[0]>O[2]?1:-1,Q=pe===ae,I=Q&&be||!Q&&!be?R[0]:O[2],oe=Q&&be||!Q&&!be?O[3]:R[1],te=we({x1:O[0],y1:O[1],x2:O[2],y2:O[3]}),ue=de({r:F,x1:O[2],y1:O[3],x2:R[0],y2:R[1],cx:I,cy:oe,ac:be});q=q.concat(te),q=q.concat(ue)}else{var De=O[2]===O[0]?0:O[2]>O[0]?G/2:-(G/2),ve=O[3]===O[1]?0:O[3]>O[1]?G/2:-(G/2),Ne=we({x1:O[0]-De,y1:O[1]-ve,x2:O[2]+De,y2:O[3]+ve});q=q.concat(Ne)}O=R}if(R!==null){var Ge=we({x1:R[0],y1:R[1],x2:R[2],y2:R[3]});q=q.concat(Ge)}return q.join(" ")}function C(D,L,O){D.orientation||(D.orientation=(0,A._calcOrientation)(L.pos[0],L.pos[1],D.pos[0],D.pos[1],O)),L.orientation||(L.orientation=(0,A._calcOrientation)(D.pos[0],D.pos[1],L.pos[0],L.pos[1],O));var R=30,W=.5,G=Math.abs(D.pos[0]-L.pos[0]),ie=Math.abs(D.pos[1]-L.pos[1]),q=L.pos[0]<D.pos[0]?G:0,we=L.pos[1]<D.pos[1]?ie:0,de=L.pos[0]<D.pos[0]?0:G,fe=L.pos[1]<D.pos[1]?0:ie,F=D.pos[0]<L.pos[0]?D.pos[0]:L.pos[0],be=D.pos[1]<L.pos[1]?D.pos[1]:L.pos[1],pe=D.orientation,ae=L.orientation,Q=pe[0]*ae[0]+pe[1]*ae[1],I=pe[0]===0?"y":"x",oe=q+pe[0]*R,te=we+pe[1]*R,ue=de+ae[0]*R,De=fe+ae[1]*R,ve=Math.abs(q-de)>R+R,Ne=Math.abs(we-fe)>R+R,Ge=null;Q===-1?Ge="opposite":Q===0?Ge="perpendicular":Q===1&&(Ge="orthogonal");var $e=function(){return[oe,te,ue,De]},Be={perpendicular:$e,orthogonal:$e,opposite:function(On){var Pt=On==="x"?0:1,et={x:function(){return pe[Pt]===1&&(oe>ue&&de>oe||q>ue&&de>q)||pe[Pt]===-1&&(oe<ue&&de<oe||q<ue&&de<q)},y:function(){return pe[Pt]===1&&(te>De&&fe>te||we>De&&fe>we)||pe[Pt]===-1&&(te<De&&fe<te||we<De&&fe<we)}};return et[On]()?{x:[(q+de)/2,te,(q+de)/2,De],y:[oe,(we+fe)/2,ue,(we+fe)/2]}[On]:[oe,te,ue,De]}},mt=null,Ot=null,kt=[],Tt=function(On){return On<0?-1:On===0?0:1},Jt=function(On,Pt){if(!(mt===On&&Ot===Pt)){var et=mt==null?q:mt,Ci=Ot==null?we:Ot,li=et===On?"v":"h",kn=Tt(On-et),Ae=Tt(Pt-Ci);mt=On,Ot=Pt,kt.push([et,Ci,On,Pt,li,kn,Ae])}},Mn=Be[Ge](I),Yt=I==="x"?0:1,pn=I==="x"?0:1,gt=Mn[Yt],_t=Mn[pn],Gt=Mn[Yt+2],Ft=Mn[pn+2];Jt(Mn[0],Mn[1]);var zt=oe+(ue-oe)*W,en=te+(De-te)*W,Bt={x:[0,1],y:[1,0]},an={perpendicular:function(On){var Pt={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},et={x:[[oe,ue],null,[ue,oe]],y:[[te,De],null,[De,te]]},Ci={x:[[zt,te],[zt,De]],y:[[oe,en],[ue,en]]},li={x:[[ue,te]],y:[[oe,De]]},kn={x:[[oe,De],[ue,De]],y:[[ue,te],[ue,De]]},Ae={x:[[oe,en],[ue,en],[ue,De]],y:[[zt,te],[zt,De],[ue,De]]},le={x:[te,De],y:[oe,ue]},ne=Bt[On][0],B=Bt[On][1],Me=pe[ne]+1,Ce=ae[B]+1,lt=ae[B]===-1&&le[On][1]<le[On][0]||ae[B]===1&&le[On][1]>le[On][0],vt=et[On][Me][0],ft=et[On][Me][1],ot=Pt[On][Me][Ce],yt=function(Qn,Fe){return Fe.pos[0]>Qn.pos[0]||Fe.pos[0]==Qn.pos[0]?Fe.pos[1]>Qn.pos[1]?2:1:Fe.pos[1]>Qn.pos[1]?3:4},Ut=yt(D,L);if(Ut===ot[3]||Ut===ot[2]&&lt)return Ci[On];if(Ut===ot[2]&&ft<vt)return li[On];if(Ut===ot[2]&&ft>=vt||Ut===ot[1]&&!lt)return Ae[On];if(Ut===ot[0]||Ut===ot[1]&&lt)return kn[On]},orthogonal:function(On,Pt,et,Ci,li){var kn={x:pe[0]===-1?Math.min(Pt,Ci):Math.max(Pt,Ci),y:pe[1]===-1?Math.min(Pt,Ci):Math.max(Pt,Ci)}[On];return{x:[[kn,et],[kn,li],[Ci,li]],y:[[et,kn],[li,kn],[li,Ci]]}[On]},opposite:function(On,Pt,et,Ci){var li={x:"y",y:"x"}[On],kn={x:"height",y:"width"}[On],Ae=On==="x"?ve:Ne;if(!(D.pos[0]===L.pos[0]&&D.pos[1]===L.pos[1])){if(!Ae||pe[Yt]===1&&Pt>Ci||pe[Yt]===-1&&Pt<Ci)return{x:[[Pt,en],[Ci,en]],y:[[zt,Pt],[zt,Ci]]}[On];if(pe[Yt]===1&&Pt<Ci||pe[Yt]===-1&&Pt>Ci)return{x:[[zt,we],[zt,fe]],y:[[q,en],[de,en]]}[On]}}},Di=an[Ge](I,gt,_t,Gt,Ft);if(Di)for(var _i=0;_i<Di.length;Di++)Jt(Di[_i][0],Di[_i][1]);return Jt(Mn[2],Mn[3]),Jt(de,fe),E(kt,{x:F,y:be})}Z.default=C},4789:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var g=f(9392),y=M(g),A=f(4968);function M(D){return D&&D.__esModule?D:{default:D}}function E(D){return D.reduce(function(L,O){return L.push(["L",O.x,O.y].join(" ")),L},[["M",D[0].x,D[0].y].join(" ")]).join(" ")}function C(D,L,O){if(O.draggable&&O.hasDragged)return{path:E(O.breakPoints),breakPoints:O.breakPoints};D.orientation||(D.orientation=(0,A._calcOrientation)(L.pos[0],L.pos[1],D.pos[0],D.pos[1])),L.orientation||(L.orientation=(0,A._calcOrientation)(D.pos[0],D.pos[1],L.pos[0],L.pos[1]));var R=[],W={x:D.pos[0],y:D.pos[1]},G={x:L.pos[0],y:L.pos[1]},ie={"-10":A.LEFT,"10":A.RIGHT,"0-1":A.TOP,"01":A.BOTTOM};if((0,A._route)(R,W,ie[D.orientation.join("")],G,ie[L.orientation.join("")]),R.length<2)return"";var q=E(R);return{path:q,breakPoints:R}}Z.default=C},8874:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var g=f(4968),y=function(M,E,C){M.orientation||(M.orientation=(0,g._calcOrientation)(E.pos[0],E.pos[1],M.pos[0],M.pos[1])),E.orientation||(E.orientation=(0,g._calcOrientation)(M.pos[0],M.pos[1],E.pos[0],E.pos[1]));var D=M.orientation,L=E.orientation,O=(0,g._findSecondControlPoint)(M,E,D,L,C),R=["M",M.pos[0],M.pos[1]];return R=R.concat(["Q",O[0],O[1]]),R=R.concat([E.pos[0],E.pos[1]]),R.join(" ")};Z.default=y},2660:(w,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});function f(g,y){var A=["M",g.pos[0],g.pos[1],"L",y.pos[0],y.pos[1]];return A.join(" ")}Z.default=f},2297:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.findManhattanPoint=Z.drawBrokenLine=Z.drawSecondBezier=Z.drawManhattan=Z.drawFlow=Z.drawStraight=Z.drawBezier=Z.drawAdvancedBezier=void 0;var g=f(9531);Object.defineProperty(Z,"drawAdvancedBezier",{enumerable:!0,get:function(){return O(g).default}});var y=f(7102);Object.defineProperty(Z,"drawBezier",{enumerable:!0,get:function(){return O(y).default}});var A=f(2660);Object.defineProperty(Z,"drawStraight",{enumerable:!0,get:function(){return O(A).default}});var M=f(935);Object.defineProperty(Z,"drawFlow",{enumerable:!0,get:function(){return O(M).default}});var E=f(4789);Object.defineProperty(Z,"drawManhattan",{enumerable:!0,get:function(){return O(E).default}});var C=f(8874);Object.defineProperty(Z,"drawSecondBezier",{enumerable:!0,get:function(){return O(C).default}});var D=f(2839);Object.defineProperty(Z,"drawBrokenLine",{enumerable:!0,get:function(){return O(D).default}});var L=f(4968);function O(R){return R&&R.__esModule?R:{default:R}}Z.findManhattanPoint=L._findManhattanPoint},9471:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var g=f(8092),y=null,A=new Date().getTime(),M=function(D){y=D,A=new Date().getTime()},E=function(D,L){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},R=arguments.length>3?arguments[3]:void 0,W=R,G=null,ie=null;if(W||(G=document.createElementNS("http://www.w3.org/2000/svg","circle"),ie=document.createElementNS("http://www.w3.org/2000/svg","animateMotion"),G.append(ie)),O._isContinue){var q=W.cloneNode(!0);g(q).find("animateMotion").attr("path",L),g(W).replaceWith(q),W=q}else{var we=(new Date().getTime()-A)/1e3;W&&(G=W,ie=g(W).find("animateMotion")[0],g(G).css("display","block")),G.setAttribute("cx",0),G.setAttribute("cy",0),G.setAttribute("r",O.radius||2),G.setAttribute("fill",O.color||"#999"),ie.setAttribute("path",L),ie.setAttribute("begin","".concat(we,"s")),ie.setAttribute("dur",O.dur||"8s"),ie.setAttribute("fill","freeze"),ie.setAttribute("repeatCount",O.repeatCount||"indefinite"),O.repeatCount&&O.repeatCount!=="indefinite"&&setTimeout(function(){g(G).css("display","none")},parseFloat(O.dur)*parseInt(O.repeatCount)*1e3)}return W||(W=G,setTimeout(function(){g(W).insertAfter(D)},20)),W};Z.default={init:M,addAnimate:E}},7616:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});function g(Q,I){var oe=Object.keys(Q);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(Q);I&&(te=te.filter(function(ue){return Object.getOwnPropertyDescriptor(Q,ue).enumerable})),oe.push.apply(oe,te)}return oe}function y(Q){for(var I=1;I<arguments.length;I++){var oe=arguments[I]!=null?arguments[I]:{};I%2?g(Object(oe),!0).forEach(function(te){O(Q,te,oe[te])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(oe)):g(Object(oe)).forEach(function(te){Object.defineProperty(Q,te,Object.getOwnPropertyDescriptor(oe,te))})}return Q}function A(Q,I){var oe=typeof Symbol!="undefined"&&Q[Symbol.iterator]||Q["@@iterator"];if(!oe){if(Array.isArray(Q)||(oe=M(Q))||I&&Q&&typeof Q.length=="number"){oe&&(Q=oe);var te=0,ue=function(){};return{s:ue,n:function(){return te>=Q.length?{done:!0}:{done:!1,value:Q[te++]}},e:function($e){throw $e},f:ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var De=!0,ve=!1,Ne;return{s:function(){oe=oe.call(Q)},n:function(){var $e=oe.next();return De=$e.done,$e},e:function($e){ve=!0,Ne=$e},f:function(){try{!De&&oe.return!=null&&oe.return()}finally{if(ve)throw Ne}}}}function M(Q,I){if(!!Q){if(typeof Q=="string")return E(Q,I);var oe=Object.prototype.toString.call(Q).slice(8,-1);if(oe==="Object"&&Q.constructor&&(oe=Q.constructor.name),oe==="Map"||oe==="Set")return Array.from(Q);if(oe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(oe))return E(Q,I)}}function E(Q,I){(I==null||I>Q.length)&&(I=Q.length);for(var oe=0,te=new Array(I);oe<I;oe++)te[oe]=Q[oe];return te}function C(Q,I){if(!(Q instanceof I))throw new TypeError("Cannot call a class as a function")}function D(Q,I){for(var oe=0;oe<I.length;oe++){var te=I[oe];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(Q,te.key,te)}}function L(Q,I,oe){return I&&D(Q.prototype,I),oe&&D(Q,oe),Q}function O(Q,I,oe){return I in Q?Object.defineProperty(Q,I,{value:oe,enumerable:!0,configurable:!0,writable:!0}):Q[I]=oe,Q}function R(Q){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?R=function(oe){return typeof oe}:R=function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},R(Q)}var W=f(9392),G=f(8092),ie="rgba(246, 105, 2, 1)",q="rgba(61, 86, 92, 1)",we="rgba(255, 253, 76, 1)",de="rgba(255, 253, 76, 1)",fe=20,F=function(I,oe){!I||!I.style||Object.keys(oe).forEach(function(te){I.style[te]=oe[te]})},be=function(I){var oe=I.backingStorePixelRatio||I.webkitBackingStorePixelRatio||I.mozBackingStorePixelRatio||I.msBackingStorePixelRatio||I.oBackingStorePixelRatio||I.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/oe},pe=function(I){if(!I)throw new Error("options cant be empty");if(!I.root||R(I.root)!=="object"||!G(I.root))throw new Error("options.root must be a html element");if(!I.move||typeof I.move!="function")throw new Error("options.move must be a fuction");if(!I.terminal2canvas||typeof I.terminal2canvas!="function")throw new Error("options.move must be a fuction")},ae=function(){function Q(I){var oe=this;C(this,Q),O(this,"getItemsPoint",function(){var te=W.cloneDeep(oe.options.nodes),ue=W.cloneDeep(oe.options.groups),De=oe.options.canvas2terminal,ve=oe.$root.height(),Ne=oe.$root.width();te.push({left:0,top:0,height:1,width:1}),te.push({left:Ne,top:ve,height:1,width:1});var Ge=A(te),$e;try{for(Ge.s();!($e=Ge.n()).done;){var Be=$e.value;if(Be.group){var mt=W.find(ue,{id:Be.group});if(!mt)continue;Be.rleft=mt.left+Be.left,Be.rtop=mt.top+Be.top;continue}Be.rleft=Be.left,Be.rtop=Be.top}}catch(Ot){Ge.e(Ot)}finally{Ge.f()}return ue.forEach(function(Ot){var kt=[Ot.left,Ot.top],Tt=[Ot.left+Ot.width,Ot.top+Ot.height],Jt=De(kt),Mn=De(Tt);Ot.screenLeftTop=Jt,Ot.screenRightBottom=Mn,Ot.left=Jt[0],Ot.top=Jt[1],Ot.width=Mn[0]-Jt[0],Ot.height=Mn[1]-Jt[1]}),te.forEach(function(Ot){var kt=[Ot.rleft,Ot.rtop],Tt=[Ot.rleft+Ot.width,Ot.rtop+Ot.height],Jt=De(kt),Mn=De(Tt);Ot.left=Jt[0],Ot.top=Jt[1],Ot.width=Mn[0]-Jt[0],Ot.height=Mn[1]-Jt[1]}),{groups:ue,nodes:te}}),O(this,"getViewportBBox",function(){var te=G(oe.viewportDOM),ue=te.offsetParent(),De=te.offset(),ve=G(ue).offset(),Ne=De.left-ve.left,Ge=De.top-ve.top,$e=te.width(),Be=te.height(),mt=Ne+$e,Ot=Ge+Be;return{left:Ne,top:Ge,right:mt,bottom:Ot,height:Be,width:$e}}),O(this,"debounceRender",W.debounce(function(){oe.renderViewPort(),oe.renderBG()},100)),pe(I),this.root=I.root,this.$root=G(this.root),this.options=y({height:200,width:200,className:"butterfly-minimap-container",containerStyle:{},viewportStyle:{},backgroudStyle:{},nodeColor:ie,groupColor:q,activeNodeColor:we,activeGroupColor:de,containerWidth:G(this.root).width(),containerHeight:G(this.root).height(),nodes:[],groups:[],offset:[0,0],zoom:1,move:function(){return null},terminal2canvas:function(){return null},safeDistance:fe},I),this.ratio=1,this.initContainer(),this.renderViewPort(),this.renderBG()}return L(Q,[{key:"getBBox",value:function(){var oe=this.getItemsPoint(),te=oe.nodes,ue=oe.groups,De=function(zt){return W.isNumber(zt)?zt:0},ve=te.map(function(Ft){return Ft.top}),Ne=te.map(function(Ft){return Ft.left}),Ge=te.map(function(Ft){return Ft.top+Ft.height}),$e=te.map(function(Ft){return Ft.left+Ft.width}),Be=ue.map(function(Ft){return Ft.top}),mt=ue.map(function(Ft){return Ft.left}),Ot=ue.map(function(Ft){return Ft.top+Ft.height}),kt=ue.map(function(Ft){return Ft.left+Ft.width}),Tt=ve.concat(Be),Jt=Ne.concat(mt),Mn=Ge.concat(Ot),Yt=$e.concat(kt),pn=De(W.min(Jt)),gt=De(W.min(Tt)),_t=De(W.max(Yt)),Gt=De(W.max(Mn));return{minX:pn,minY:gt,width:_t-pn,height:Gt-gt}}},{key:"setRatio",value:function(){var oe=this.options.height,te=this.options.width,ue=this.getBBox();if(ue.width===0||ue.height===0)return 0;var De=Math.min(te/ue.width,oe/ue.height);this.ratio=Number(De.toFixed(2))}},{key:"update",value:function(oe){var te=oe.nodes,ue=te===void 0?[]:te,De=oe.groups,ve=De===void 0?[]:De,Ne=oe.zoom,Ge=Ne===void 0?1:Ne,$e=oe.offset,Be=$e===void 0?[0,0]:$e;this.options.nodes=ue,this.options.groups=ve,this.options.zoom=Ge,this.options.offset=Be,this.debounceRender()}},{key:"initContainer",value:function(){var oe=this.options,te=oe.height,ue=oe.width,De=oe.className,ve=oe.viewportStyle,Ne=oe.backgroudStyle,Ge=oe.containerStyle;this.container=document.createElement("div"),this.viewportDOM=document.createElement("div"),this.backgroundDOM=document.createElement("div"),this.container.setAttribute("class",De);var $e={position:"absolute",left:0,top:0,overflow:"hidden",height:te+"px",width:ue+"px"};F(this.container,y(y({},$e),{},{right:"10px",bottom:"10px",left:"none",top:"none",height:te+"px",width:ue+"px",border:"1px solid #aaa","z-index":100},Ge)),F(this.viewportDOM,y(y({},$e),{},{left:0,top:0,"background-color":"rgba(246,105,2,0.20)"},ve)),F(this.backgroundDOM,y(y(y({},$e),Ne),{},{height:te+"px",width:ue+"px"})),this.root.appendChild(this.container),this.container.appendChild(this.backgroundDOM),this.container.appendChild(this.viewportDOM),this.initBGCanvas(),this.initViewportEvts()}},{key:"initBGCanvas",value:function(){var oe=this.options,te=oe.width,ue=oe.height,De=document.createElement("canvas");this.backgroundDOM.appendChild(De),De.setAttribute("width",te),De.setAttribute("height",ue),F(De,{position:"absolute",width:"100%",height:"100%",left:0,top:0});var ve=De.getContext("2d");this.cvsCtx=ve,this.cvsRatio=be(ve),ve.scale(this.cvsRatio,this.cvsRatio)}},{key:"initViewportEvts",value:function(){var oe=this,te=!1,ue=0,De=0,ve=0,Ne=0;this.viewportEvents={mousedown:function($e){$e.preventDefault(),$e.stopPropagation();var Be=oe.viewportDOM;if($e.target===oe.viewportDOM){var mt=oe.getViewportBBox();ve=parseInt(mt.left,10),Ne=parseInt(mt.top,10),te=!0,ue=$e.clientX,De=$e.clientY}},mousemove:function($e){if($e.preventDefault(),$e.stopPropagation(),!(!te||W.isNil($e.clientX)||W.isNil($e.clientY))){var Be=ue-$e.clientX,mt=De-$e.clientY;ve-=Be,Ne-=mt;var Ot=oe.options,kt=Ot.width,Tt=Ot.height,Jt=Ot.safeDistance,Mn=oe.getViewportBBox(),Yt=Mn.width,pn=Mn.height;if(ve>=kt-Jt||Ne>=Tt-Jt||ve+Yt<=Jt||Ne+pn<=Jt){ve+=Be,Ne+=mt;return}F(oe.viewportDOM,{left:ve+"px",top:Ne+"px"});var gt=oe.getBBox(),_t=gt.minX,Gt=gt.minY,Ft=oe.$root.offset(),zt=oe.options.offset,en=(-ve/oe.ratio+Ft.left-_t)*oe.ratio,Bt=(-Ne/oe.ratio+Ft.top-Gt)*oe.ratio;oe.options.move([zt[0]+en/oe.ratio,zt[1]+Bt/oe.ratio]),ue=$e.clientX,De=$e.clientY}},mouseleave:function(){te=!1},mouseup:function(){te=!1}},Object.keys(this.viewportEvents).forEach(function(Ge){oe.container.addEventListener(Ge,oe.viewportEvents[Ge])})}},{key:"renderBG",value:function(){var oe=this,te=this.cvsCtx,ue=this.options,De=ue.width,ve=ue.height,Ne=ue.nodeColor,Ge=ue.groupColor,$e=ue.activeNodeColor,Be=ue.activeGroupColor,mt=this.cvsRatio;te.clearRect(0,0,De,ve);var Ot=this.getItemsPoint(),kt=Ot.nodes,Tt=Ot.groups,Jt=this.getBBox(),Mn=Jt.minX,Yt=Jt.minY;Tt.forEach(function(pn){var gt=(pn.left-Mn)*oe.ratio,_t=(pn.top-Yt)*oe.ratio,Gt=pn.width*oe.ratio,Ft=pn.height*oe.ratio,zt=pn.minimapActive;zt?te.fillStyle=Be:te.fillStyle=Ge,te.fillRect(gt/mt,_t/mt,Gt/mt,Ft/mt)}),kt.forEach(function(pn){var gt=(pn.left-Mn)*oe.ratio,_t=(pn.top-Yt)*oe.ratio,Gt=pn.width*oe.ratio,Ft=pn.height*oe.ratio;pn.minimapActive?te.fillStyle=$e:te.fillStyle=Ne,te.fillRect(gt/mt,_t/mt,Gt/mt,Ft/mt)})}},{key:"renderViewPort",value:function(){this.setRatio();var oe=this.getBBox(),te=oe.minX,ue=oe.minY,De=this.$root.offset(),ve=De.top,Ne=De.left,Ge=this.$root.width(),$e=this.$root.height(),Be=[Ne-te,ve-ue],mt=this.ratio,Ot=Ge*this.ratio,kt=$e*this.ratio,Tt=Math.round(Math.round(Be[0])*mt),Jt=Math.round(Math.round(Be[1])*mt);F(this.viewportDOM,{width:"".concat(Ot,"px"),height:"".concat(kt,"px"),left:"".concat(Tt,"px"),top:"".concat(Jt,"px")})}},{key:"destroy",value:function(){this.root.removeChild(this.container)}}]),Q}();Z.default=ae},9131:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var g=f(9392);Z.default=function(y,A,M){var E=(y||"").split(" ").filter(function(O){return!!O}),C=(A||"").split(" ").filter(function(O){return!!O});if(!M&&(!y||!A))return!0;if(M&&!y&&!A)return!0;var D=E.concat(C),L=g.uniq(D);return D.length!==L.length}},3357:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});function g(C,D){if(!(C instanceof D))throw new TypeError("Cannot call a class as a function")}function y(C,D){for(var L=0;L<D.length;L++){var O=D[L];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(C,O.key,O)}}function A(C,D,L){return D&&y(C.prototype,D),L&&y(C,L),C}var M=f(8092),E=function(){function C(){g(this,C),this.dom=M('<canvas class="butterfly-selected-canvas"></canvas>')[0],this.cxt=this.dom.getContext("2d"),this.canvasTop=0,this.canvasLeft=0,this.canvasHeight=0,this.canvasWidth=0,this.canScrollX=0,this.canScrollY=0,this.startX=0,this.startY=0,this.endX=0,this.endY=0,this._on=null,this._emit=null,this.isDraw=!1,this.isActive=!1}return A(C,[{key:"init",value:function(L){var O=L.root;this.resize(L),this.addEventListener(),this._on=L._on,this._emit=L._emit,M(this.dom).appendTo(O)}},{key:"resize",value:function(L){var O=L.root,R=M(O).offset();this.canvasTop=R.top,this.canvasLeft=R.left,this.canvasHeight=M(O).height(),this.canvasWidth=M(O).width(),M(this.dom).attr("width",this.canvasWidth),M(this.dom).attr("height",this.canvasHeight)}},{key:"addEventListener",value:function(){this.dom.addEventListener("mousedown",this.mouseDown.bind(this)),this.dom.addEventListener("mouseup",this.mouseUp.bind(this)),this.dom.addEventListener("mousemove",this.mouseMove.bind(this)),this.dom.addEventListener("mouseleave",this.mouseLeave.bind(this))}},{key:"mouseDown",value:function(L){this.startX=L.clientX,this.startY=L.clientY,this.isDraw=!0}},{key:"mouseUp",value:function(L){this.isDraw=!1,this.clearCanvas();var O=this.startX,R=this.startY,W=this.endX=L.clientX,G=this.endY=L.clientY,ie=W-O>0?"right":"left",q=O>W?W:O,we=R>G?G:R,de=O>W?O:W,fe=R>G?R:G;this._emit("InnerEvents",{type:"multiple:select",range:[q,we,de,fe],toDirection:ie}),this.unActive()}},{key:"mouseMove",value:function(L){!this.isDraw||(this.endX=L.clientX,this.endY=L.clientY,this.drawRect())}},{key:"mouseLeave",value:function(L){this.isDraw=!1,this.clearCanvas()}},{key:"drawRect",value:function(){if(!!this.isDraw){this.clearCanvas();var L=Math.min(this.startX,this.endX)-this.canvasLeft+this.canScrollX,O=Math.min(this.startY,this.endY)-this.canvasTop+this.canScrollY,R=Math.abs(this.startX-this.endX),W=Math.abs(this.startY-this.endY);this.cxt.beginPath(),this.cxt.rect(L,O,R,W),this.cxt.fillStyle="#b3dbff",this.cxt.fill(),this.cxt.lineWidth="1",this.cxt.strokeStyle="#3da4ff",this.cxt.stroke()}}},{key:"clearCanvas",value:function(){this.cxt.clearRect(0,0,this.canvasWidth,this.canvasHeight)}},{key:"getCanvas",value:function(){return this.dom}},{key:"active",value:function(){this.isActive||(M(this.dom).addClass("wrapper-up"),this.isActive=!0)}},{key:"unActive",value:function(){this.isActive&&(M(this.dom).removeClass("wrapper-up"),this.isActive=!1)}},{key:"_changeCanvasInfo",value:function(L){L.terScrollX!==void 0&&(this.canScrollX=L.terScrollX),L.terScrollY!==void 0&&(this.canScrollY=L.terScrollY)}}]),C}();Z.default=E},3736:(w,Z,f)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),f(8678);var g=f(8092),y={TEMPLATE:'<div class="butterfly-tooltip-container"><div class="butterfly-tooltip-arrow"></div><div class="butterfly-tooltip-inner"></div></div>',$viewAppend:"body",$viewCon:{tips:".butterfly-tips",menu:".butterfly-menu",common:".butterfly-tooltip-container"},$inner:".butterfly-tooltip-inner"},A=function(ae){if(!ae)return 0;if(Number(ae))return Number(parseFloat(ae).toFixed(3))},M=function(ae,Q){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{x:0,y:0},oe={},te=Q.left,ue=Q.top,De=Q.width,ve=Q.height,Ne=Q.actualWidth,Ge=Q.actualHeight;switch(te=A(te),ue=A(ue),De=A(De),ve=A(ve),Ne=A(Ne),Ge=A(Ge),ae){case"top":oe.left=te+De/2-Ne/2,oe.top=ue-Ge-5;break;case"left":oe.left=te-Ne-5,oe.top=ue+ve/2-Ge/2;break;case"right":oe.left=te+De+5,oe.top=ue+ve/2-Ge/2;break;case"bottom":oe.left=te+De/2-Ne/2,oe.top=ue+ve+5;break;default:oe.left=te+De/2-Ne/2,oe.top=ue-ve-5}return I.x&&(oe.left+=I.x),I.y&&(oe.top+=I.y),oe},E={x:0,y:0},C=function(ae,Q,I,oe,te){g(y.$viewCon[Q]).remove();var ue=g(y.TEMPLATE);ue.find(y.$inner).append(I),g(ue).appendTo(y.$viewAppend);var De=ae.placement||"top";g(ue).addClass(y.$viewCon[Q].replace(".","")).addClass(De).addClass("in"),ae.className&&ue.addClass(ae.className);var ve={top:g(oe).offset().top,left:g(oe).offset().left,width:g(oe).outerWidth(),height:g(oe).outerHeight(),actualWidth:g(ue).outerWidth(),actualHeight:g(ue).outerHeight()},Ne={};if(ae.x||ae.x===0)Ne={left:ae.offsetX?ae.x+ae.offsetX:ae.x,top:ae.offsetY?ae.y+ae.offsetY:ae.y};else{var Ge={x:0,y:0};ae.offsetX&&(Ge.x=ae.offsetX),ae.offsetY&&(Ge.y=ae.offsetY),Ne=M(De,ve,Ge)}E={x:Ne.left,y:Ne.top};var $e="top: ".concat(Ne.top,"px; left: ").concat(Ne.left,"px;");return g(ue).attr("style",$e),te&&te(ue[0]),ue[0]},D=function(ae,Q){g(ae).removeClass("in").remove(),Q&&Q(ae)},L=function(ae,Q){var I=null,oe=null,te=!1,ue=!1,De=!1,ve=null,Ne=!!ae.notEventThrough,Ge=ae.needTipsHidden===void 0?!0:!!ae.needTipsHidden,$e=function(gt){De?te=!1:te=!0},Be=function(gt){De=!1,te=!1,mt()},mt=function(){ve&&clearTimeout(ve),ve=setTimeout(function(){!te&&!ue&&I&&(D(I),I.removeEventListener("mouseover",$e),I.removeEventListener("mousemove",$e),I.removeEventListener("mouseout",Be))},50)},Ot=ae.data,kt=ae.targetDom,Tt=ae.genTipDom,Jt=ae.tipsDom;kt.addEventListener("mouseover",function(pn){De||(Ne&&(pn.stopPropagation(),pn.preventDefault()),ue=!0,Jt&&(oe=Jt),Tt&&(oe=Tt(Ot)),I=C(ae,"tips",oe,kt,Q),I.addEventListener("mouseover",$e),I.addEventListener("mousemove",$e),I.addEventListener("mouseout",Be))});var Mn=kt.onmouseout;kt.onmouseout=function(pn){Mn&&Mn(pn),Ne&&(pn.stopPropagation(),pn.preventDefault()),ue=!1,mt()};var Yt=kt.onmousedown;kt.onmousedown=function(pn){if(Yt&&Yt(pn),Ge){var gt=function _t(){De=!1,document.removeEventListener("mouseup",_t)};document.addEventListener("mouseup",gt),De=!0,ue=!1,mt()}}},O=null,R=null,W=!1,G={x:0,y:0},ie=function pe(ae){ae.target===O||g(O).find(ae.target).length>0||(O&&D(O),document.removeEventListener("click",pe))},q=function(ae,Q){var I=ae.data,oe=ae.targetDom,te=ae.genTipDom,ue=function(){var ve=null;te&&(ve=te(I)),ae.tipsDom&&(ve=ae.tipsDom),O=C(ae,"menu",ve,oe,Q),ae.closable&&document.addEventListener("click",ie),ae.draggable&&(ae.dragDom?R=ae.dragDom:R=O,document.addEventListener("mousedown",de),document.addEventListener("mousemove",F),document.addEventListener("mouseup",be))};ae.action==="click"?oe.addEventListener("click",ue):ue()},we=function(ae){!O||(D(O,ae),O=null,document.removeEventListener("click",ie),R&&(document.removeEventListener("mousedown",de),document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",be),R=null))},de=function(ae){W=!0,G={x:ae.clientX,y:ae.clientY}},fe=null,F=function(ae){if(W&&R){if(fe)return;fe=setTimeout(function(){var Q=E.y+(ae.clientY-G.y),I=E.x+(ae.clientX-G.x);g(O).css("top",Q).css("left",I),G={x:ae.clientX,y:ae.clientY},E={x:I,y:Q},fe=null},20)}},be=function(ae){W=!1};Z.default={createTip:L,createMenu:q,closeMenu:we}},3631:(w,Z,f)=>{"use strict";f.r(Z),f.d(Z,{forceCenter:()=>g,forceCollide:()=>ve,forceLink:()=>$e,forceManyBody:()=>yt,forceRadial:()=>Ut,forceSimulation:()=>ot,forceX:()=>Fn,forceY:()=>Qn});function g(Fe,ct){var ut,jt=1;Fe==null&&(Fe=0),ct==null&&(ct=0);function qt(){var Dt,hn=ut.length,Rt,nn=0,ln=0;for(Dt=0;Dt<hn;++Dt)Rt=ut[Dt],nn+=Rt.x,ln+=Rt.y;for(nn=(nn/hn-Fe)*jt,ln=(ln/hn-ct)*jt,Dt=0;Dt<hn;++Dt)Rt=ut[Dt],Rt.x-=nn,Rt.y-=ln}return qt.initialize=function(Dt){ut=Dt},qt.x=function(Dt){return arguments.length?(Fe=+Dt,qt):Fe},qt.y=function(Dt){return arguments.length?(ct=+Dt,qt):ct},qt.strength=function(Dt){return arguments.length?(jt=+Dt,qt):jt},qt}function y(Fe){const ct=+this._x.call(null,Fe),ut=+this._y.call(null,Fe);return A(this.cover(ct,ut),ct,ut,Fe)}function A(Fe,ct,ut,jt){if(isNaN(ct)||isNaN(ut))return Fe;var qt,Dt=Fe._root,hn={data:jt},Rt=Fe._x0,nn=Fe._y0,ln=Fe._x1,_e=Fe._y1,V,H,T,z,J,Pe,Oe,Ue;if(!Dt)return Fe._root=hn,Fe;for(;Dt.length;)if((J=ct>=(V=(Rt+ln)/2))?Rt=V:ln=V,(Pe=ut>=(H=(nn+_e)/2))?nn=H:_e=H,qt=Dt,!(Dt=Dt[Oe=Pe<<1|J]))return qt[Oe]=hn,Fe;if(T=+Fe._x.call(null,Dt.data),z=+Fe._y.call(null,Dt.data),ct===T&&ut===z)return hn.next=Dt,qt?qt[Oe]=hn:Fe._root=hn,Fe;do qt=qt?qt[Oe]=new Array(4):Fe._root=new Array(4),(J=ct>=(V=(Rt+ln)/2))?Rt=V:ln=V,(Pe=ut>=(H=(nn+_e)/2))?nn=H:_e=H;while((Oe=Pe<<1|J)==(Ue=(z>=H)<<1|T>=V));return qt[Ue]=Dt,qt[Oe]=hn,Fe}function M(Fe){var ct,ut,jt=Fe.length,qt,Dt,hn=new Array(jt),Rt=new Array(jt),nn=Infinity,ln=Infinity,_e=-Infinity,V=-Infinity;for(ut=0;ut<jt;++ut)isNaN(qt=+this._x.call(null,ct=Fe[ut]))||isNaN(Dt=+this._y.call(null,ct))||(hn[ut]=qt,Rt[ut]=Dt,qt<nn&&(nn=qt),qt>_e&&(_e=qt),Dt<ln&&(ln=Dt),Dt>V&&(V=Dt));if(nn>_e||ln>V)return this;for(this.cover(nn,ln).cover(_e,V),ut=0;ut<jt;++ut)A(this,hn[ut],Rt[ut],Fe[ut]);return this}function E(Fe,ct){if(isNaN(Fe=+Fe)||isNaN(ct=+ct))return this;var ut=this._x0,jt=this._y0,qt=this._x1,Dt=this._y1;if(isNaN(ut))qt=(ut=Math.floor(Fe))+1,Dt=(jt=Math.floor(ct))+1;else{for(var hn=qt-ut||1,Rt=this._root,nn,ln;ut>Fe||Fe>=qt||jt>ct||ct>=Dt;)switch(ln=(ct<jt)<<1|Fe<ut,nn=new Array(4),nn[ln]=Rt,Rt=nn,hn*=2,ln){case 0:qt=ut+hn,Dt=jt+hn;break;case 1:ut=qt-hn,Dt=jt+hn;break;case 2:qt=ut+hn,jt=Dt-hn;break;case 3:ut=qt-hn,jt=Dt-hn;break}this._root&&this._root.length&&(this._root=Rt)}return this._x0=ut,this._y0=jt,this._x1=qt,this._y1=Dt,this}function C(){var Fe=[];return this.visit(function(ct){if(!ct.length)do Fe.push(ct.data);while(ct=ct.next)}),Fe}function D(Fe){return arguments.length?this.cover(+Fe[0][0],+Fe[0][1]).cover(+Fe[1][0],+Fe[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function L(Fe,ct,ut,jt,qt){this.node=Fe,this.x0=ct,this.y0=ut,this.x1=jt,this.y1=qt}function O(Fe,ct,ut){var jt,qt=this._x0,Dt=this._y0,hn,Rt,nn,ln,_e=this._x1,V=this._y1,H=[],T=this._root,z,J;for(T&&H.push(new L(T,qt,Dt,_e,V)),ut==null?ut=Infinity:(qt=Fe-ut,Dt=ct-ut,_e=Fe+ut,V=ct+ut,ut*=ut);z=H.pop();)if(!(!(T=z.node)||(hn=z.x0)>_e||(Rt=z.y0)>V||(nn=z.x1)<qt||(ln=z.y1)<Dt))if(T.length){var Pe=(hn+nn)/2,Oe=(Rt+ln)/2;H.push(new L(T[3],Pe,Oe,nn,ln),new L(T[2],hn,Oe,Pe,ln),new L(T[1],Pe,Rt,nn,Oe),new L(T[0],hn,Rt,Pe,Oe)),(J=(ct>=Oe)<<1|Fe>=Pe)&&(z=H[H.length-1],H[H.length-1]=H[H.length-1-J],H[H.length-1-J]=z)}else{var Ue=Fe-+this._x.call(null,T.data),qe=ct-+this._y.call(null,T.data),Ct=Ue*Ue+qe*qe;if(Ct<ut){var dt=Math.sqrt(ut=Ct);qt=Fe-dt,Dt=ct-dt,_e=Fe+dt,V=ct+dt,jt=T.data}}return jt}function R(Fe){if(isNaN(_e=+this._x.call(null,Fe))||isNaN(V=+this._y.call(null,Fe)))return this;var ct,ut=this._root,jt,qt,Dt,hn=this._x0,Rt=this._y0,nn=this._x1,ln=this._y1,_e,V,H,T,z,J,Pe,Oe;if(!ut)return this;if(ut.length)for(;;){if((z=_e>=(H=(hn+nn)/2))?hn=H:nn=H,(J=V>=(T=(Rt+ln)/2))?Rt=T:ln=T,ct=ut,!(ut=ut[Pe=J<<1|z]))return this;if(!ut.length)break;(ct[Pe+1&3]||ct[Pe+2&3]||ct[Pe+3&3])&&(jt=ct,Oe=Pe)}for(;ut.data!==Fe;)if(qt=ut,!(ut=ut.next))return this;return(Dt=ut.next)&&delete ut.next,qt?(Dt?qt.next=Dt:delete qt.next,this):ct?(Dt?ct[Pe]=Dt:delete ct[Pe],(ut=ct[0]||ct[1]||ct[2]||ct[3])&&ut===(ct[3]||ct[2]||ct[1]||ct[0])&&!ut.length&&(jt?jt[Oe]=ut:this._root=ut),this):(this._root=Dt,this)}function W(Fe){for(var ct=0,ut=Fe.length;ct<ut;++ct)this.remove(Fe[ct]);return this}function G(){return this._root}function ie(){var Fe=0;return this.visit(function(ct){if(!ct.length)do++Fe;while(ct=ct.next)}),Fe}function q(Fe){var ct=[],ut,jt=this._root,qt,Dt,hn,Rt,nn;for(jt&&ct.push(new L(jt,this._x0,this._y0,this._x1,this._y1));ut=ct.pop();)if(!Fe(jt=ut.node,Dt=ut.x0,hn=ut.y0,Rt=ut.x1,nn=ut.y1)&&jt.length){var ln=(Dt+Rt)/2,_e=(hn+nn)/2;(qt=jt[3])&&ct.push(new L(qt,ln,_e,Rt,nn)),(qt=jt[2])&&ct.push(new L(qt,Dt,_e,ln,nn)),(qt=jt[1])&&ct.push(new L(qt,ln,hn,Rt,_e)),(qt=jt[0])&&ct.push(new L(qt,Dt,hn,ln,_e))}return this}function we(Fe){var ct=[],ut=[],jt;for(this._root&&ct.push(new L(this._root,this._x0,this._y0,this._x1,this._y1));jt=ct.pop();){var qt=jt.node;if(qt.length){var Dt,hn=jt.x0,Rt=jt.y0,nn=jt.x1,ln=jt.y1,_e=(hn+nn)/2,V=(Rt+ln)/2;(Dt=qt[0])&&ct.push(new L(Dt,hn,Rt,_e,V)),(Dt=qt[1])&&ct.push(new L(Dt,_e,Rt,nn,V)),(Dt=qt[2])&&ct.push(new L(Dt,hn,V,_e,ln)),(Dt=qt[3])&&ct.push(new L(Dt,_e,V,nn,ln))}ut.push(jt)}for(;jt=ut.pop();)Fe(jt.node,jt.x0,jt.y0,jt.x1,jt.y1);return this}function de(Fe){return Fe[0]}function fe(Fe){return arguments.length?(this._x=Fe,this):this._x}function F(Fe){return Fe[1]}function be(Fe){return arguments.length?(this._y=Fe,this):this._y}function pe(Fe,ct,ut){var jt=new ae(ct==null?de:ct,ut==null?F:ut,NaN,NaN,NaN,NaN);return Fe==null?jt:jt.addAll(Fe)}function ae(Fe,ct,ut,jt,qt,Dt){this._x=Fe,this._y=ct,this._x0=ut,this._y0=jt,this._x1=qt,this._y1=Dt,this._root=void 0}function Q(Fe){for(var ct={data:Fe.data},ut=ct;Fe=Fe.next;)ut=ut.next={data:Fe.data};return ct}var I=pe.prototype=ae.prototype;I.copy=function(){var Fe=new ae(this._x,this._y,this._x0,this._y0,this._x1,this._y1),ct=this._root,ut,jt;if(!ct)return Fe;if(!ct.length)return Fe._root=Q(ct),Fe;for(ut=[{source:ct,target:Fe._root=new Array(4)}];ct=ut.pop();)for(var qt=0;qt<4;++qt)(jt=ct.source[qt])&&(jt.length?ut.push({source:jt,target:ct.target[qt]=new Array(4)}):ct.target[qt]=Q(jt));return Fe},I.add=y,I.addAll=M,I.cover=E,I.data=C,I.extent=D,I.find=O,I.remove=R,I.removeAll=W,I.root=G,I.size=ie,I.visit=q,I.visitAfter=we,I.x=fe,I.y=be;function oe(Fe){return function(){return Fe}}function te(Fe){return(Fe()-.5)*1e-6}function ue(Fe){return Fe.x+Fe.vx}function De(Fe){return Fe.y+Fe.vy}function ve(Fe){var ct,ut,jt,qt=1,Dt=1;typeof Fe!="function"&&(Fe=oe(Fe==null?1:+Fe));function hn(){for(var ln,_e=ct.length,V,H,T,z,J,Pe,Oe=0;Oe<Dt;++Oe)for(V=pe(ct,ue,De).visitAfter(Rt),ln=0;ln<_e;++ln)H=ct[ln],J=ut[H.index],Pe=J*J,T=H.x+H.vx,z=H.y+H.vy,V.visit(Ue);function Ue(qe,Ct,dt,Et,Cn){var st=qe.data,Zt=qe.r,zn=J+Zt;if(st){if(st.index>H.index){var Lt=T-st.x-st.vx,En=z-st.y-st.vy,qn=Lt*Lt+En*En;qn<zn*zn&&(Lt===0&&(Lt=te(jt),qn+=Lt*Lt),En===0&&(En=te(jt),qn+=En*En),qn=(zn-(qn=Math.sqrt(qn)))/qn*qt,H.vx+=(Lt*=qn)*(zn=(Zt*=Zt)/(Pe+Zt)),H.vy+=(En*=qn)*zn,st.vx-=Lt*(zn=1-zn),st.vy-=En*zn)}return}return Ct>T+zn||Et<T-zn||dt>z+zn||Cn<z-zn}}function Rt(ln){if(ln.data)return ln.r=ut[ln.data.index];for(var _e=ln.r=0;_e<4;++_e)ln[_e]&&ln[_e].r>ln.r&&(ln.r=ln[_e].r)}function nn(){if(!!ct){var ln,_e=ct.length,V;for(ut=new Array(_e),ln=0;ln<_e;++ln)V=ct[ln],ut[V.index]=+Fe(V,ln,ct)}}return hn.initialize=function(ln,_e){ct=ln,jt=_e,nn()},hn.iterations=function(ln){return arguments.length?(Dt=+ln,hn):Dt},hn.strength=function(ln){return arguments.length?(qt=+ln,hn):qt},hn.radius=function(ln){return arguments.length?(Fe=typeof ln=="function"?ln:oe(+ln),nn(),hn):Fe},hn}function Ne(Fe){return Fe.index}function Ge(Fe,ct){var ut=Fe.get(ct);if(!ut)throw new Error("node not found: "+ct);return ut}function $e(Fe){var ct=Ne,ut=V,jt,qt=oe(30),Dt,hn,Rt,nn,ln,_e=1;Fe==null&&(Fe=[]);function V(Pe){return 1/Math.min(Rt[Pe.source.index],Rt[Pe.target.index])}function H(Pe){for(var Oe=0,Ue=Fe.length;Oe<_e;++Oe)for(var qe=0,Ct,dt,Et,Cn,st,Zt,zn;qe<Ue;++qe)Ct=Fe[qe],dt=Ct.source,Et=Ct.target,Cn=Et.x+Et.vx-dt.x-dt.vx||te(ln),st=Et.y+Et.vy-dt.y-dt.vy||te(ln),Zt=Math.sqrt(Cn*Cn+st*st),Zt=(Zt-Dt[qe])/Zt*Pe*jt[qe],Cn*=Zt,st*=Zt,Et.vx-=Cn*(zn=nn[qe]),Et.vy-=st*zn,dt.vx+=Cn*(zn=1-zn),dt.vy+=st*zn}function T(){if(!!hn){var Pe,Oe=hn.length,Ue=Fe.length,qe=new Map(hn.map((dt,Et)=>[ct(dt,Et,hn),dt])),Ct;for(Pe=0,Rt=new Array(Oe);Pe<Ue;++Pe)Ct=Fe[Pe],Ct.index=Pe,typeof Ct.source!="object"&&(Ct.source=Ge(qe,Ct.source)),typeof Ct.target!="object"&&(Ct.target=Ge(qe,Ct.target)),Rt[Ct.source.index]=(Rt[Ct.source.index]||0)+1,Rt[Ct.target.index]=(Rt[Ct.target.index]||0)+1;for(Pe=0,nn=new Array(Ue);Pe<Ue;++Pe)Ct=Fe[Pe],nn[Pe]=Rt[Ct.source.index]/(Rt[Ct.source.index]+Rt[Ct.target.index]);jt=new Array(Ue),z(),Dt=new Array(Ue),J()}}function z(){if(!!hn)for(var Pe=0,Oe=Fe.length;Pe<Oe;++Pe)jt[Pe]=+ut(Fe[Pe],Pe,Fe)}function J(){if(!!hn)for(var Pe=0,Oe=Fe.length;Pe<Oe;++Pe)Dt[Pe]=+qt(Fe[Pe],Pe,Fe)}return H.initialize=function(Pe,Oe){hn=Pe,ln=Oe,T()},H.links=function(Pe){return arguments.length?(Fe=Pe,T(),H):Fe},H.id=function(Pe){return arguments.length?(ct=Pe,H):ct},H.iterations=function(Pe){return arguments.length?(_e=+Pe,H):_e},H.strength=function(Pe){return arguments.length?(ut=typeof Pe=="function"?Pe:oe(+Pe),z(),H):ut},H.distance=function(Pe){return arguments.length?(qt=typeof Pe=="function"?Pe:oe(+Pe),J(),H):qt},H}var Be={value:()=>{}};function mt(){for(var Fe=0,ct=arguments.length,ut={},jt;Fe<ct;++Fe){if(!(jt=arguments[Fe]+"")||jt in ut||/[\s.]/.test(jt))throw new Error("illegal type: "+jt);ut[jt]=[]}return new Ot(ut)}function Ot(Fe){this._=Fe}function kt(Fe,ct){return Fe.trim().split(/^|\s+/).map(function(ut){var jt="",qt=ut.indexOf(".");if(qt>=0&&(jt=ut.slice(qt+1),ut=ut.slice(0,qt)),ut&&!ct.hasOwnProperty(ut))throw new Error("unknown type: "+ut);return{type:ut,name:jt}})}Ot.prototype=mt.prototype={constructor:Ot,on:function(Fe,ct){var ut=this._,jt=kt(Fe+"",ut),qt,Dt=-1,hn=jt.length;if(arguments.length<2){for(;++Dt<hn;)if((qt=(Fe=jt[Dt]).type)&&(qt=Tt(ut[qt],Fe.name)))return qt;return}if(ct!=null&&typeof ct!="function")throw new Error("invalid callback: "+ct);for(;++Dt<hn;)if(qt=(Fe=jt[Dt]).type)ut[qt]=Jt(ut[qt],Fe.name,ct);else if(ct==null)for(qt in ut)ut[qt]=Jt(ut[qt],Fe.name,null);return this},copy:function(){var Fe={},ct=this._;for(var ut in ct)Fe[ut]=ct[ut].slice();return new Ot(Fe)},call:function(Fe,ct){if((qt=arguments.length-2)>0)for(var ut=new Array(qt),jt=0,qt,Dt;jt<qt;++jt)ut[jt]=arguments[jt+2];if(!this._.hasOwnProperty(Fe))throw new Error("unknown type: "+Fe);for(Dt=this._[Fe],jt=0,qt=Dt.length;jt<qt;++jt)Dt[jt].value.apply(ct,ut)},apply:function(Fe,ct,ut){if(!this._.hasOwnProperty(Fe))throw new Error("unknown type: "+Fe);for(var jt=this._[Fe],qt=0,Dt=jt.length;qt<Dt;++qt)jt[qt].value.apply(ct,ut)}};function Tt(Fe,ct){for(var ut=0,jt=Fe.length,qt;ut<jt;++ut)if((qt=Fe[ut]).name===ct)return qt.value}function Jt(Fe,ct,ut){for(var jt=0,qt=Fe.length;jt<qt;++jt)if(Fe[jt].name===ct){Fe[jt]=Be,Fe=Fe.slice(0,jt).concat(Fe.slice(jt+1));break}return ut!=null&&Fe.push({name:ct,value:ut}),Fe}const Mn=mt;var Yt=0,pn=0,gt=0,_t=1e3,Gt,Ft,zt=0,en=0,Bt=0,an=typeof performance=="object"&&performance.now?performance:Date,Di=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(Fe){setTimeout(Fe,17)};function _i(){return en||(Di(wi),en=an.now()+Bt)}function wi(){en=0}function On(){this._call=this._time=this._next=null}On.prototype=Pt.prototype={constructor:On,restart:function(Fe,ct,ut){if(typeof Fe!="function")throw new TypeError("callback is not a function");ut=(ut==null?_i():+ut)+(ct==null?0:+ct),!this._next&&Ft!==this&&(Ft?Ft._next=this:Gt=this,Ft=this),this._call=Fe,this._time=ut,Ae()},stop:function(){this._call&&(this._call=null,this._time=Infinity,Ae())}};function Pt(Fe,ct,ut){var jt=new On;return jt.restart(Fe,ct,ut),jt}function et(){_i(),++Yt;for(var Fe=Gt,ct;Fe;)(ct=en-Fe._time)>=0&&Fe._call.call(null,ct),Fe=Fe._next;--Yt}function Ci(){en=(zt=an.now())+Bt,Yt=pn=0;try{et()}finally{Yt=0,kn(),en=0}}function li(){var Fe=an.now(),ct=Fe-zt;ct>_t&&(Bt-=ct,zt=Fe)}function kn(){for(var Fe,ct=Gt,ut,jt=Infinity;ct;)ct._call?(jt>ct._time&&(jt=ct._time),Fe=ct,ct=ct._next):(ut=ct._next,ct._next=null,ct=Fe?Fe._next=ut:Gt=ut);Ft=Fe,Ae(jt)}function Ae(Fe){if(!Yt){pn&&(pn=clearTimeout(pn));var ct=Fe-en;ct>24?(Fe<Infinity&&(pn=setTimeout(Ci,Fe-an.now()-Bt)),gt&&(gt=clearInterval(gt))):(gt||(zt=an.now(),gt=setInterval(li,_t)),Yt=1,Di(Ci))}}const le=1664525,ne=1013904223,B=4294967296;function Me(){let Fe=1;return()=>(Fe=(le*Fe+ne)%B)/B}function Ce(Fe){return Fe.x}function lt(Fe){return Fe.y}var vt=10,ft=Math.PI*(3-Math.sqrt(5));function ot(Fe){var ct,ut=1,jt=.001,qt=1-Math.pow(jt,1/300),Dt=0,hn=.6,Rt=new Map,nn=Pt(V),ln=Mn("tick","end"),_e=Me();Fe==null&&(Fe=[]);function V(){H(),ln.call("tick",ct),ut<jt&&(nn.stop(),ln.call("end",ct))}function H(J){var Pe,Oe=Fe.length,Ue;J===void 0&&(J=1);for(var qe=0;qe<J;++qe)for(ut+=(Dt-ut)*qt,Rt.forEach(function(Ct){Ct(ut)}),Pe=0;Pe<Oe;++Pe)Ue=Fe[Pe],Ue.fx==null?Ue.x+=Ue.vx*=hn:(Ue.x=Ue.fx,Ue.vx=0),Ue.fy==null?Ue.y+=Ue.vy*=hn:(Ue.y=Ue.fy,Ue.vy=0);return ct}function T(){for(var J=0,Pe=Fe.length,Oe;J<Pe;++J){if(Oe=Fe[J],Oe.index=J,Oe.fx!=null&&(Oe.x=Oe.fx),Oe.fy!=null&&(Oe.y=Oe.fy),isNaN(Oe.x)||isNaN(Oe.y)){var Ue=vt*Math.sqrt(.5+J),qe=J*ft;Oe.x=Ue*Math.cos(qe),Oe.y=Ue*Math.sin(qe)}(isNaN(Oe.vx)||isNaN(Oe.vy))&&(Oe.vx=Oe.vy=0)}}function z(J){return J.initialize&&J.initialize(Fe,_e),J}return T(),ct={tick:H,restart:function(){return nn.restart(V),ct},stop:function(){return nn.stop(),ct},nodes:function(J){return arguments.length?(Fe=J,T(),Rt.forEach(z),ct):Fe},alpha:function(J){return arguments.length?(ut=+J,ct):ut},alphaMin:function(J){return arguments.length?(jt=+J,ct):jt},alphaDecay:function(J){return arguments.length?(qt=+J,ct):+qt},alphaTarget:function(J){return arguments.length?(Dt=+J,ct):Dt},velocityDecay:function(J){return arguments.length?(hn=1-J,ct):1-hn},randomSource:function(J){return arguments.length?(_e=J,Rt.forEach(z),ct):_e},force:function(J,Pe){return arguments.length>1?(Pe==null?Rt.delete(J):Rt.set(J,z(Pe)),ct):Rt.get(J)},find:function(J,Pe,Oe){var Ue=0,qe=Fe.length,Ct,dt,Et,Cn,st;for(Oe==null?Oe=Infinity:Oe*=Oe,Ue=0;Ue<qe;++Ue)Cn=Fe[Ue],Ct=J-Cn.x,dt=Pe-Cn.y,Et=Ct*Ct+dt*dt,Et<Oe&&(st=Cn,Oe=Et);return st},on:function(J,Pe){return arguments.length>1?(ln.on(J,Pe),ct):ln.on(J)}}}function yt(){var Fe,ct,ut,jt,qt=oe(-30),Dt,hn=1,Rt=Infinity,nn=.81;function ln(T){var z,J=Fe.length,Pe=pe(Fe,Ce,lt).visitAfter(V);for(jt=T,z=0;z<J;++z)ct=Fe[z],Pe.visit(H)}function _e(){if(!!Fe){var T,z=Fe.length,J;for(Dt=new Array(z),T=0;T<z;++T)J=Fe[T],Dt[J.index]=+qt(J,T,Fe)}}function V(T){var z=0,J,Pe,Oe=0,Ue,qe,Ct;if(T.length){for(Ue=qe=Ct=0;Ct<4;++Ct)(J=T[Ct])&&(Pe=Math.abs(J.value))&&(z+=J.value,Oe+=Pe,Ue+=Pe*J.x,qe+=Pe*J.y);T.x=Ue/Oe,T.y=qe/Oe}else{J=T,J.x=J.data.x,J.y=J.data.y;do z+=Dt[J.data.index];while(J=J.next)}T.value=z}function H(T,z,J,Pe){if(!T.value)return!0;var Oe=T.x-ct.x,Ue=T.y-ct.y,qe=Pe-z,Ct=Oe*Oe+Ue*Ue;if(qe*qe/nn<Ct)return Ct<Rt&&(Oe===0&&(Oe=te(ut),Ct+=Oe*Oe),Ue===0&&(Ue=te(ut),Ct+=Ue*Ue),Ct<hn&&(Ct=Math.sqrt(hn*Ct)),ct.vx+=Oe*T.value*jt/Ct,ct.vy+=Ue*T.value*jt/Ct),!0;if(T.length||Ct>=Rt)return;(T.data!==ct||T.next)&&(Oe===0&&(Oe=te(ut),Ct+=Oe*Oe),Ue===0&&(Ue=te(ut),Ct+=Ue*Ue),Ct<hn&&(Ct=Math.sqrt(hn*Ct)));do T.data!==ct&&(qe=Dt[T.data.index]*jt/Ct,ct.vx+=Oe*qe,ct.vy+=Ue*qe);while(T=T.next)}return ln.initialize=function(T,z){Fe=T,ut=z,_e()},ln.strength=function(T){return arguments.length?(qt=typeof T=="function"?T:oe(+T),_e(),ln):qt},ln.distanceMin=function(T){return arguments.length?(hn=T*T,ln):Math.sqrt(hn)},ln.distanceMax=function(T){return arguments.length?(Rt=T*T,ln):Math.sqrt(Rt)},ln.theta=function(T){return arguments.length?(nn=T*T,ln):Math.sqrt(nn)},ln}function Ut(Fe,ct,ut){var jt,qt=oe(.1),Dt,hn;typeof Fe!="function"&&(Fe=oe(+Fe)),ct==null&&(ct=0),ut==null&&(ut=0);function Rt(ln){for(var _e=0,V=jt.length;_e<V;++_e){var H=jt[_e],T=H.x-ct||1e-6,z=H.y-ut||1e-6,J=Math.sqrt(T*T+z*z),Pe=(hn[_e]-J)*Dt[_e]*ln/J;H.vx+=T*Pe,H.vy+=z*Pe}}function nn(){if(!!jt){var ln,_e=jt.length;for(Dt=new Array(_e),hn=new Array(_e),ln=0;ln<_e;++ln)hn[ln]=+Fe(jt[ln],ln,jt),Dt[ln]=isNaN(hn[ln])?0:+qt(jt[ln],ln,jt)}}return Rt.initialize=function(ln){jt=ln,nn()},Rt.strength=function(ln){return arguments.length?(qt=typeof ln=="function"?ln:oe(+ln),nn(),Rt):qt},Rt.radius=function(ln){return arguments.length?(Fe=typeof ln=="function"?ln:oe(+ln),nn(),Rt):Fe},Rt.x=function(ln){return arguments.length?(ct=+ln,Rt):ct},Rt.y=function(ln){return arguments.length?(ut=+ln,Rt):ut},Rt}function Fn(Fe){var ct=oe(.1),ut,jt,qt;typeof Fe!="function"&&(Fe=oe(Fe==null?0:+Fe));function Dt(Rt){for(var nn=0,ln=ut.length,_e;nn<ln;++nn)_e=ut[nn],_e.vx+=(qt[nn]-_e.x)*jt[nn]*Rt}function hn(){if(!!ut){var Rt,nn=ut.length;for(jt=new Array(nn),qt=new Array(nn),Rt=0;Rt<nn;++Rt)jt[Rt]=isNaN(qt[Rt]=+Fe(ut[Rt],Rt,ut))?0:+ct(ut[Rt],Rt,ut)}}return Dt.initialize=function(Rt){ut=Rt,hn()},Dt.strength=function(Rt){return arguments.length?(ct=typeof Rt=="function"?Rt:oe(+Rt),hn(),Dt):ct},Dt.x=function(Rt){return arguments.length?(Fe=typeof Rt=="function"?Rt:oe(+Rt),hn(),Dt):Fe},Dt}function Qn(Fe){var ct=oe(.1),ut,jt,qt;typeof Fe!="function"&&(Fe=oe(Fe==null?0:+Fe));function Dt(Rt){for(var nn=0,ln=ut.length,_e;nn<ln;++nn)_e=ut[nn],_e.vy+=(qt[nn]-_e.y)*jt[nn]*Rt}function hn(){if(!!ut){var Rt,nn=ut.length;for(jt=new Array(nn),qt=new Array(nn),Rt=0;Rt<nn;++Rt)jt[Rt]=isNaN(qt[Rt]=+Fe(ut[Rt],Rt,ut))?0:+ct(ut[Rt],Rt,ut)}}return Dt.initialize=function(Rt){ut=Rt,hn()},Dt.strength=function(Rt){return arguments.length?(ct=typeof Rt=="function"?Rt:oe(+Rt),hn(),Dt):ct},Dt.y=function(Rt){return arguments.length?(Fe=typeof Rt=="function"?Rt:oe(+Rt),hn(),Dt):Fe},Dt}},2546:(w,Z,f)=>{w.exports={graphlib:f(6626),layout:f(7194),debug:f(1303),util:{time:f(3063).time,notime:f(3063).notime},version:f(2275)}},1255:(w,Z,f)=>{"use strict";var g=f(2361),y=f(9240);w.exports={run:A,undo:E};function A(C){var D=C.graph().acyclicer==="greedy"?y(C,L(C)):M(C);g.forEach(D,function(O){var R=C.edge(O);C.removeEdge(O),R.forwardName=O.name,R.reversed=!0,C.setEdge(O.w,O.v,R,g.uniqueId("rev"))});function L(O){return function(R){return O.edge(R).weight}}}function M(C){var D=[],L={},O={};function R(W){g.has(O,W)||(O[W]=!0,L[W]=!0,g.forEach(C.outEdges(W),function(G){g.has(L,G.w)?D.push(G):R(G.w)}),delete L[W])}return g.forEach(C.nodes(),R),D}function E(C){g.forEach(C.edges(),function(D){var L=C.edge(D);if(L.reversed){C.removeEdge(D);var O=L.forwardName;delete L.reversed,delete L.forwardName,C.setEdge(D.w,D.v,L,O)}})}},765:(w,Z,f)=>{var g=f(2361),y=f(3063);w.exports=A;function A(E){function C(D){var L=E.children(D),O=E.node(D);if(L.length&&g.forEach(L,C),g.has(O,"minRank")){O.borderLeft=[],O.borderRight=[];for(var R=O.minRank,W=O.maxRank+1;R<W;++R)M(E,"borderLeft","_bl",D,O,R),M(E,"borderRight","_br",D,O,R)}}g.forEach(E.children(),C)}function M(E,C,D,L,O,R){var W={width:0,height:0,rank:R,borderType:C},G=O[C][R-1],ie=y.addDummyNode(E,"border",W,D);O[C][R]=ie,E.setParent(ie,L),G&&E.setEdge(G,ie,{weight:1})}},3257:(w,Z,f)=>{"use strict";var g=f(2361);w.exports={adjust:y,undo:A};function y(R){var W=R.graph().rankdir.toLowerCase();(W==="lr"||W==="rl")&&M(R)}function A(R){var W=R.graph().rankdir.toLowerCase();(W==="bt"||W==="rl")&&C(R),(W==="lr"||W==="rl")&&(L(R),M(R))}function M(R){g.forEach(R.nodes(),function(W){E(R.node(W))}),g.forEach(R.edges(),function(W){E(R.edge(W))})}function E(R){var W=R.width;R.width=R.height,R.height=W}function C(R){g.forEach(R.nodes(),function(W){D(R.node(W))}),g.forEach(R.edges(),function(W){var G=R.edge(W);g.forEach(G.points,D),g.has(G,"y")&&D(G)})}function D(R){R.y=-R.y}function L(R){g.forEach(R.nodes(),function(W){O(R.node(W))}),g.forEach(R.edges(),function(W){var G=R.edge(W);g.forEach(G.points,O),g.has(G,"x")&&O(G)})}function O(R){var W=R.x;R.x=R.y,R.y=W}},1135:w=>{w.exports=Z;function Z(){var y={};y._next=y._prev=y,this._sentinel=y}Z.prototype.dequeue=function(){var y=this._sentinel,A=y._prev;if(A!==y)return f(A),A},Z.prototype.enqueue=function(y){var A=this._sentinel;y._prev&&y._next&&f(y),y._next=A._next,A._next._prev=y,A._next=y,y._prev=A},Z.prototype.toString=function(){for(var y=[],A=this._sentinel,M=A._prev;M!==A;)y.push(JSON.stringify(M,g)),M=M._prev;return"["+y.join(", ")+"]"};function f(y){y._prev._next=y._next,y._next._prev=y._prev,delete y._next,delete y._prev}function g(y,A){if(y!=="_next"&&y!=="_prev")return A}},1303:(w,Z,f)=>{var g=f(2361),y=f(3063),A=f(6626).Graph;w.exports={debugOrdering:M};function M(E){var C=y.buildLayerMatrix(E),D=new A({compound:!0,multigraph:!0}).setGraph({});return g.forEach(E.nodes(),function(L){D.setNode(L,{label:L}),D.setParent(L,"layer"+E.node(L).rank)}),g.forEach(E.edges(),function(L){D.setEdge(L.v,L.w,{},L.name)}),g.forEach(C,function(L,O){var R="layer"+O;D.setNode(R,{rank:"same"}),g.reduce(L,function(W,G){return D.setEdge(W,G,{style:"invis"}),G})}),D}},6626:(w,Z,f)=>{var g;try{g=f(5172)}catch(y){}g||(g=window.graphlib),w.exports=g},9240:(w,Z,f)=>{var g=f(2361),y=f(6626).Graph,A=f(1135);w.exports=E;var M=g.constant(1);function E(R,W){if(R.nodeCount()<=1)return[];var G=L(R,W||M),ie=C(G.graph,G.buckets,G.zeroIdx);return g.flatten(g.map(ie,function(q){return R.outEdges(q.v,q.w)}),!0)}function C(R,W,G){for(var ie=[],q=W[W.length-1],we=W[0],de;R.nodeCount();){for(;de=we.dequeue();)D(R,W,G,de);for(;de=q.dequeue();)D(R,W,G,de);if(R.nodeCount()){for(var fe=W.length-2;fe>0;--fe)if(de=W[fe].dequeue(),de){ie=ie.concat(D(R,W,G,de,!0));break}}}return ie}function D(R,W,G,ie,q){var we=q?[]:void 0;return g.forEach(R.inEdges(ie.v),function(de){var fe=R.edge(de),F=R.node(de.v);q&&we.push({v:de.v,w:de.w}),F.out-=fe,O(W,G,F)}),g.forEach(R.outEdges(ie.v),function(de){var fe=R.edge(de),F=de.w,be=R.node(F);be.in-=fe,O(W,G,be)}),R.removeNode(ie.v),we}function L(R,W){var G=new y,ie=0,q=0;g.forEach(R.nodes(),function(fe){G.setNode(fe,{v:fe,in:0,out:0})}),g.forEach(R.edges(),function(fe){var F=G.edge(fe.v,fe.w)||0,be=W(fe),pe=F+be;G.setEdge(fe.v,fe.w,pe),q=Math.max(q,G.node(fe.v).out+=be),ie=Math.max(ie,G.node(fe.w).in+=be)});var we=g.range(q+ie+3).map(function(){return new A}),de=ie+1;return g.forEach(G.nodes(),function(fe){O(we,de,G.node(fe))}),{graph:G,buckets:we,zeroIdx:de}}function O(R,W,G){G.out?G.in?R[G.out-G.in+W].enqueue(G):R[R.length-1].enqueue(G):R[0].enqueue(G)}},7194:(w,Z,f)=>{"use strict";var g=f(2361),y=f(1255),A=f(7163),M=f(4505),E=f(3063).normalizeRanks,C=f(1970),D=f(3063).removeEmptyRanks,L=f(1733),O=f(765),R=f(3257),W=f(2852),G=f(3021),ie=f(3063),q=f(6626).Graph;w.exports=we;function we(gt,_t){var Gt=_t&&_t.debugTiming?ie.time:ie.notime;Gt("layout",function(){var Ft=Gt("  buildLayoutGraph",function(){return ue(gt)});Gt("  runLayout",function(){de(Ft,Gt)}),Gt("  updateInputGraph",function(){fe(gt,Ft)})})}function de(gt,_t){_t("    makeSpaceForEdgeLabels",function(){De(gt)}),_t("    removeSelfEdges",function(){Tt(gt)}),_t("    acyclic",function(){y.run(gt)}),_t("    nestingGraph.run",function(){L.run(gt)}),_t("    rank",function(){M(ie.asNonCompoundGraph(gt))}),_t("    injectEdgeLabelProxies",function(){ve(gt)}),_t("    removeEmptyRanks",function(){D(gt)}),_t("    nestingGraph.cleanup",function(){L.cleanup(gt)}),_t("    normalizeRanks",function(){E(gt)}),_t("    assignRankMinMax",function(){Ne(gt)}),_t("    removeEdgeLabelProxies",function(){Ge(gt)}),_t("    normalize.run",function(){A.run(gt)}),_t("    parentDummyChains",function(){C(gt)}),_t("    addBorderSegments",function(){O(gt)}),_t("    order",function(){W(gt)}),_t("    insertSelfEdges",function(){Jt(gt)}),_t("    adjustCoordinateSystem",function(){R.adjust(gt)}),_t("    position",function(){G(gt)}),_t("    positionSelfEdges",function(){Mn(gt)}),_t("    removeBorderNodes",function(){kt(gt)}),_t("    normalize.undo",function(){A.undo(gt)}),_t("    fixupEdgeLabelCoords",function(){mt(gt)}),_t("    undoCoordinateSystem",function(){R.undo(gt)}),_t("    translateGraph",function(){$e(gt)}),_t("    assignNodeIntersects",function(){Be(gt)}),_t("    reversePoints",function(){Ot(gt)}),_t("    acyclic.undo",function(){y.undo(gt)})}function fe(gt,_t){g.forEach(gt.nodes(),function(Gt){var Ft=gt.node(Gt),zt=_t.node(Gt);Ft&&(Ft.x=zt.x,Ft.y=zt.y,_t.children(Gt).length&&(Ft.width=zt.width,Ft.height=zt.height))}),g.forEach(gt.edges(),function(Gt){var Ft=gt.edge(Gt),zt=_t.edge(Gt);Ft.points=zt.points,g.has(zt,"x")&&(Ft.x=zt.x,Ft.y=zt.y)}),gt.graph().width=_t.graph().width,gt.graph().height=_t.graph().height}var F=["nodesep","edgesep","ranksep","marginx","marginy"],be={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},pe=["acyclicer","ranker","rankdir","align"],ae=["width","height"],Q={width:0,height:0},I=["minlen","weight","width","height","labeloffset"],oe={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},te=["labelpos"];function ue(gt){var _t=new q({multigraph:!0,compound:!0}),Gt=pn(gt.graph());return _t.setGraph(g.merge({},be,Yt(Gt,F),g.pick(Gt,pe))),g.forEach(gt.nodes(),function(Ft){var zt=pn(gt.node(Ft));_t.setNode(Ft,g.defaults(Yt(zt,ae),Q)),_t.setParent(Ft,gt.parent(Ft))}),g.forEach(gt.edges(),function(Ft){var zt=pn(gt.edge(Ft));_t.setEdge(Ft,g.merge({},oe,Yt(zt,I),g.pick(zt,te)))}),_t}function De(gt){var _t=gt.graph();_t.ranksep/=2,g.forEach(gt.edges(),function(Gt){var Ft=gt.edge(Gt);Ft.minlen*=2,Ft.labelpos.toLowerCase()!=="c"&&(_t.rankdir==="TB"||_t.rankdir==="BT"?Ft.width+=Ft.labeloffset:Ft.height+=Ft.labeloffset)})}function ve(gt){g.forEach(gt.edges(),function(_t){var Gt=gt.edge(_t);if(Gt.width&&Gt.height){var Ft=gt.node(_t.v),zt=gt.node(_t.w),en={rank:(zt.rank-Ft.rank)/2+Ft.rank,e:_t};ie.addDummyNode(gt,"edge-proxy",en,"_ep")}})}function Ne(gt){var _t=0;g.forEach(gt.nodes(),function(Gt){var Ft=gt.node(Gt);Ft.borderTop&&(Ft.minRank=gt.node(Ft.borderTop).rank,Ft.maxRank=gt.node(Ft.borderBottom).rank,_t=g.max(_t,Ft.maxRank))}),gt.graph().maxRank=_t}function Ge(gt){g.forEach(gt.nodes(),function(_t){var Gt=gt.node(_t);Gt.dummy==="edge-proxy"&&(gt.edge(Gt.e).labelRank=Gt.rank,gt.removeNode(_t))})}function $e(gt){var _t=Number.POSITIVE_INFINITY,Gt=0,Ft=Number.POSITIVE_INFINITY,zt=0,en=gt.graph(),Bt=en.marginx||0,an=en.marginy||0;function Di(_i){var wi=_i.x,On=_i.y,Pt=_i.width,et=_i.height;_t=Math.min(_t,wi-Pt/2),Gt=Math.max(Gt,wi+Pt/2),Ft=Math.min(Ft,On-et/2),zt=Math.max(zt,On+et/2)}g.forEach(gt.nodes(),function(_i){Di(gt.node(_i))}),g.forEach(gt.edges(),function(_i){var wi=gt.edge(_i);g.has(wi,"x")&&Di(wi)}),_t-=Bt,Ft-=an,g.forEach(gt.nodes(),function(_i){var wi=gt.node(_i);wi.x-=_t,wi.y-=Ft}),g.forEach(gt.edges(),function(_i){var wi=gt.edge(_i);g.forEach(wi.points,function(On){On.x-=_t,On.y-=Ft}),g.has(wi,"x")&&(wi.x-=_t),g.has(wi,"y")&&(wi.y-=Ft)}),en.width=Gt-_t+Bt,en.height=zt-Ft+an}function Be(gt){g.forEach(gt.edges(),function(_t){var Gt=gt.edge(_t),Ft=gt.node(_t.v),zt=gt.node(_t.w),en,Bt;Gt.points?(en=Gt.points[0],Bt=Gt.points[Gt.points.length-1]):(Gt.points=[],en=zt,Bt=Ft),Gt.points.unshift(ie.intersectRect(Ft,en)),Gt.points.push(ie.intersectRect(zt,Bt))})}function mt(gt){g.forEach(gt.edges(),function(_t){var Gt=gt.edge(_t);if(g.has(Gt,"x"))switch((Gt.labelpos==="l"||Gt.labelpos==="r")&&(Gt.width-=Gt.labeloffset),Gt.labelpos){case"l":Gt.x-=Gt.width/2+Gt.labeloffset;break;case"r":Gt.x+=Gt.width/2+Gt.labeloffset;break}})}function Ot(gt){g.forEach(gt.edges(),function(_t){var Gt=gt.edge(_t);Gt.reversed&&Gt.points.reverse()})}function kt(gt){g.forEach(gt.nodes(),function(_t){if(gt.children(_t).length){var Gt=gt.node(_t),Ft=gt.node(Gt.borderTop),zt=gt.node(Gt.borderBottom),en=gt.node(g.last(Gt.borderLeft)),Bt=gt.node(g.last(Gt.borderRight));Gt.width=Math.abs(Bt.x-en.x),Gt.height=Math.abs(zt.y-Ft.y),Gt.x=en.x+Gt.width/2,Gt.y=Ft.y+Gt.height/2}}),g.forEach(gt.nodes(),function(_t){gt.node(_t).dummy==="border"&&gt.removeNode(_t)})}function Tt(gt){g.forEach(gt.edges(),function(_t){if(_t.v===_t.w){var Gt=gt.node(_t.v);Gt.selfEdges||(Gt.selfEdges=[]),Gt.selfEdges.push({e:_t,label:gt.edge(_t)}),gt.removeEdge(_t)}})}function Jt(gt){var _t=ie.buildLayerMatrix(gt);g.forEach(_t,function(Gt){var Ft=0;g.forEach(Gt,function(zt,en){var Bt=gt.node(zt);Bt.order=en+Ft,g.forEach(Bt.selfEdges,function(an){ie.addDummyNode(gt,"selfedge",{width:an.label.width,height:an.label.height,rank:Bt.rank,order:en+ ++Ft,e:an.e,label:an.label},"_se")}),delete Bt.selfEdges})})}function Mn(gt){g.forEach(gt.nodes(),function(_t){var Gt=gt.node(_t);if(Gt.dummy==="selfedge"){var Ft=gt.node(Gt.e.v),zt=Ft.x+Ft.width/2,en=Ft.y,Bt=Gt.x-zt,an=Ft.height/2;gt.setEdge(Gt.e,Gt.label),gt.removeNode(_t),Gt.label.points=[{x:zt+2*Bt/3,y:en-an},{x:zt+5*Bt/6,y:en-an},{x:zt+Bt,y:en},{x:zt+5*Bt/6,y:en+an},{x:zt+2*Bt/3,y:en+an}],Gt.label.x=Gt.x,Gt.label.y=Gt.y}})}function Yt(gt,_t){return g.mapValues(g.pick(gt,_t),Number)}function pn(gt){var _t={};return g.forEach(gt,function(Gt,Ft){_t[Ft.toLowerCase()]=Gt}),_t}},2361:(w,Z,f)=>{var g;try{g={cloneDeep:f(250),constant:f(3503),defaults:f(8548),each:f(6934),filter:f(4725),find:f(9785),flatten:f(151),forEach:f(9204),forIn:f(3190),has:f(9946),isUndefined:f(6513),last:f(611),map:f(9924),mapValues:f(642),max:f(5987),merge:f(8440),min:f(3376),minBy:f(3296),now:f(5795),pick:f(9409),range:f(859),reduce:f(6473),sortBy:f(351),uniqueId:f(5708),values:f(1229),zipObject:f(5441)}}catch(y){}g||(g=window._),w.exports=g},1733:(w,Z,f)=>{var g=f(2361),y=f(3063);w.exports={run:A,cleanup:D};function A(L){var O=y.addDummyNode(L,"root",{},"_root"),R=E(L),W=g.max(g.values(R))-1,G=2*W+1;L.graph().nestingRoot=O,g.forEach(L.edges(),function(q){L.edge(q).minlen*=G});var ie=C(L)+1;g.forEach(L.children(),function(q){M(L,O,G,ie,W,R,q)}),L.graph().nodeRankFactor=G}function M(L,O,R,W,G,ie,q){var we=L.children(q);if(!we.length){q!==O&&L.setEdge(O,q,{weight:0,minlen:R});return}var de=y.addBorderNode(L,"_bt"),fe=y.addBorderNode(L,"_bb"),F=L.node(q);L.setParent(de,q),F.borderTop=de,L.setParent(fe,q),F.borderBottom=fe,g.forEach(we,function(be){M(L,O,R,W,G,ie,be);var pe=L.node(be),ae=pe.borderTop?pe.borderTop:be,Q=pe.borderBottom?pe.borderBottom:be,I=pe.borderTop?W:2*W,oe=ae!==Q?1:G-ie[q]+1;L.setEdge(de,ae,{weight:I,minlen:oe,nestingEdge:!0}),L.setEdge(Q,fe,{weight:I,minlen:oe,nestingEdge:!0})}),L.parent(q)||L.setEdge(O,de,{weight:0,minlen:G+ie[q]})}function E(L){var O={};function R(W,G){var ie=L.children(W);ie&&ie.length&&g.forEach(ie,function(q){R(q,G+1)}),O[W]=G}return g.forEach(L.children(),function(W){R(W,1)}),O}function C(L){return g.reduce(L.edges(),function(O,R){return O+L.edge(R).weight},0)}function D(L){var O=L.graph();L.removeNode(O.nestingRoot),delete O.nestingRoot,g.forEach(L.edges(),function(R){var W=L.edge(R);W.nestingEdge&&L.removeEdge(R)})}},7163:(w,Z,f)=>{"use strict";var g=f(2361),y=f(3063);w.exports={run:A,undo:E};function A(C){C.graph().dummyChains=[],g.forEach(C.edges(),function(D){M(C,D)})}function M(C,D){var L=D.v,O=C.node(L).rank,R=D.w,W=C.node(R).rank,G=D.name,ie=C.edge(D),q=ie.labelRank;if(W!==O+1){C.removeEdge(D);var we,de,fe;for(fe=0,++O;O<W;++fe,++O)ie.points=[],de={width:0,height:0,edgeLabel:ie,edgeObj:D,rank:O},we=y.addDummyNode(C,"edge",de,"_d"),O===q&&(de.width=ie.width,de.height=ie.height,de.dummy="edge-label",de.labelpos=ie.labelpos),C.setEdge(L,we,{weight:ie.weight},G),fe===0&&C.graph().dummyChains.push(we),L=we;C.setEdge(L,R,{weight:ie.weight},G)}}function E(C){g.forEach(C.graph().dummyChains,function(D){var L=C.node(D),O=L.edgeLabel,R;for(C.setEdge(L.edgeObj,O);L.dummy;)R=C.successors(D)[0],C.removeNode(D),O.points.push({x:L.x,y:L.y}),L.dummy==="edge-label"&&(O.x=L.x,O.y=L.y,O.width=L.width,O.height=L.height),D=R,L=C.node(D)})}},2205:(w,Z,f)=>{var g=f(2361);w.exports=y;function y(A,M,E){var C={},D;g.forEach(E,function(L){for(var O=A.parent(L),R,W;O;){if(R=A.parent(O),R?(W=C[R],C[R]=O):(W=D,D=O),W&&W!==O){M.setEdge(W,O);return}O=R}})}},9506:(w,Z,f)=>{var g=f(2361);w.exports=y;function y(A,M){return g.map(M,function(E){var C=A.inEdges(E);if(C.length){var D=g.reduce(C,function(L,O){var R=A.edge(O),W=A.node(O.v);return{sum:L.sum+R.weight*W.order,weight:L.weight+R.weight}},{sum:0,weight:0});return{v:E,barycenter:D.sum/D.weight,weight:D.weight}}else return{v:E}})}},9105:(w,Z,f)=>{var g=f(2361),y=f(6626).Graph;w.exports=A;function A(E,C,D){var L=M(E),O=new y({compound:!0}).setGraph({root:L}).setDefaultNodeLabel(function(R){return E.node(R)});return g.forEach(E.nodes(),function(R){var W=E.node(R),G=E.parent(R);(W.rank===C||W.minRank<=C&&C<=W.maxRank)&&(O.setNode(R),O.setParent(R,G||L),g.forEach(E[D](R),function(ie){var q=ie.v===R?ie.w:ie.v,we=O.edge(q,R),de=g.isUndefined(we)?0:we.weight;O.setEdge(q,R,{weight:E.edge(ie).weight+de})}),g.has(W,"minRank")&&O.setNode(R,{borderLeft:W.borderLeft[C],borderRight:W.borderRight[C]}))}),O}function M(E){for(var C;E.hasNode(C=g.uniqueId("_root")););return C}},5456:(w,Z,f)=>{"use strict";var g=f(2361);w.exports=y;function y(M,E){for(var C=0,D=1;D<E.length;++D)C+=A(M,E[D-1],E[D]);return C}function A(M,E,C){for(var D=g.zipObject(C,g.map(C,function(ie,q){return q})),L=g.flatten(g.map(E,function(ie){return g.sortBy(g.map(M.outEdges(ie),function(q){return{pos:D[q.w],weight:M.edge(q).weight}}),"pos")}),!0),O=1;O<C.length;)O<<=1;var R=2*O-1;O-=1;var W=g.map(new Array(R),function(){return 0}),G=0;return g.forEach(L.forEach(function(ie){var q=ie.pos+O;W[q]+=ie.weight;for(var we=0;q>0;)q%2&&(we+=W[q+1]),q=q-1>>1,W[q]+=ie.weight;G+=ie.weight*we})),G}},2852:(w,Z,f)=>{"use strict";var g=f(2361),y=f(8043),A=f(5456),M=f(6490),E=f(9105),C=f(2205),D=f(6626).Graph,L=f(3063);w.exports=O;function O(ie){var q=L.maxRank(ie),we=R(ie,g.range(1,q+1),"inEdges"),de=R(ie,g.range(q-1,-1,-1),"outEdges"),fe=y(ie);G(ie,fe);for(var F=Number.POSITIVE_INFINITY,be,pe=0,ae=0;ae<4;++pe,++ae){W(pe%2?we:de,pe%4>=2),fe=L.buildLayerMatrix(ie);var Q=A(ie,fe);Q<F&&(ae=0,be=g.cloneDeep(fe),F=Q)}G(ie,be)}function R(ie,q,we){return g.map(q,function(de){return E(ie,de,we)})}function W(ie,q){var we=new D;g.forEach(ie,function(de){var fe=de.graph().root,F=M(de,fe,we,q);g.forEach(F.vs,function(be,pe){de.node(be).order=pe}),C(de,we,F.vs)})}function G(ie,q){g.forEach(q,function(we){g.forEach(we,function(de,fe){ie.node(de).order=fe})})}},8043:(w,Z,f)=>{"use strict";var g=f(2361);w.exports=y;function y(A){var M={},E=g.filter(A.nodes(),function(R){return!A.children(R).length}),C=g.max(g.map(E,function(R){return A.node(R).rank})),D=g.map(g.range(C+1),function(){return[]});function L(R){if(!g.has(M,R)){M[R]=!0;var W=A.node(R);D[W.rank].push(R),g.forEach(A.successors(R),L)}}var O=g.sortBy(E,function(R){return A.node(R).rank});return g.forEach(O,L),D}},5926:(w,Z,f)=>{"use strict";var g=f(2361);w.exports=y;function y(E,C){var D={};g.forEach(E,function(O,R){var W=D[O.v]={indegree:0,in:[],out:[],vs:[O.v],i:R};g.isUndefined(O.barycenter)||(W.barycenter=O.barycenter,W.weight=O.weight)}),g.forEach(C.edges(),function(O){var R=D[O.v],W=D[O.w];!g.isUndefined(R)&&!g.isUndefined(W)&&(W.indegree++,R.out.push(D[O.w]))});var L=g.filter(D,function(O){return!O.indegree});return A(L)}function A(E){var C=[];function D(R){return function(W){W.merged||(g.isUndefined(W.barycenter)||g.isUndefined(R.barycenter)||W.barycenter>=R.barycenter)&&M(R,W)}}function L(R){return function(W){W.in.push(R),--W.indegree==0&&E.push(W)}}for(;E.length;){var O=E.pop();C.push(O),g.forEach(O.in.reverse(),D(O)),g.forEach(O.out,L(O))}return g.map(g.filter(C,function(R){return!R.merged}),function(R){return g.pick(R,["vs","i","barycenter","weight"])})}function M(E,C){var D=0,L=0;E.weight&&(D+=E.barycenter*E.weight,L+=E.weight),C.weight&&(D+=C.barycenter*C.weight,L+=C.weight),E.vs=C.vs.concat(E.vs),E.barycenter=D/L,E.weight=L,E.i=Math.min(C.i,E.i),C.merged=!0}},6490:(w,Z,f)=>{var g=f(2361),y=f(9506),A=f(5926),M=f(1349);w.exports=E;function E(L,O,R,W){var G=L.children(O),ie=L.node(O),q=ie?ie.borderLeft:void 0,we=ie?ie.borderRight:void 0,de={};q&&(G=g.filter(G,function(Q){return Q!==q&&Q!==we}));var fe=y(L,G);g.forEach(fe,function(Q){if(L.children(Q.v).length){var I=E(L,Q.v,R,W);de[Q.v]=I,g.has(I,"barycenter")&&D(Q,I)}});var F=A(fe,R);C(F,de);var be=M(F,W);if(q&&(be.vs=g.flatten([q,be.vs,we],!0),L.predecessors(q).length)){var pe=L.node(L.predecessors(q)[0]),ae=L.node(L.predecessors(we)[0]);g.has(be,"barycenter")||(be.barycenter=0,be.weight=0),be.barycenter=(be.barycenter*be.weight+pe.order+ae.order)/(be.weight+2),be.weight+=2}return be}function C(L,O){g.forEach(L,function(R){R.vs=g.flatten(R.vs.map(function(W){return O[W]?O[W].vs:W}),!0)})}function D(L,O){g.isUndefined(L.barycenter)?(L.barycenter=O.barycenter,L.weight=O.weight):(L.barycenter=(L.barycenter*L.weight+O.barycenter*O.weight)/(L.weight+O.weight),L.weight+=O.weight)}},1349:(w,Z,f)=>{var g=f(2361),y=f(3063);w.exports=A;function A(C,D){var L=y.partition(C,function(de){return g.has(de,"barycenter")}),O=L.lhs,R=g.sortBy(L.rhs,function(de){return-de.i}),W=[],G=0,ie=0,q=0;O.sort(E(!!D)),q=M(W,R,q),g.forEach(O,function(de){q+=de.vs.length,W.push(de.vs),G+=de.barycenter*de.weight,ie+=de.weight,q=M(W,R,q)});var we={vs:g.flatten(W,!0)};return ie&&(we.barycenter=G/ie,we.weight=ie),we}function M(C,D,L){for(var O;D.length&&(O=g.last(D)).i<=L;)D.pop(),C.push(O.vs),L++;return L}function E(C){return function(D,L){return D.barycenter<L.barycenter?-1:D.barycenter>L.barycenter?1:C?L.i-D.i:D.i-L.i}}},1970:(w,Z,f)=>{var g=f(2361);w.exports=y;function y(E){var C=M(E);g.forEach(E.graph().dummyChains,function(D){for(var L=E.node(D),O=L.edgeObj,R=A(E,C,O.v,O.w),W=R.path,G=R.lca,ie=0,q=W[ie],we=!0;D!==O.w;){if(L=E.node(D),we){for(;(q=W[ie])!==G&&E.node(q).maxRank<L.rank;)ie++;q===G&&(we=!1)}if(!we){for(;ie<W.length-1&&E.node(q=W[ie+1]).minRank<=L.rank;)ie++;q=W[ie]}E.setParent(D,q),D=E.successors(D)[0]}})}function A(E,C,D,L){var O=[],R=[],W=Math.min(C[D].low,C[L].low),G=Math.max(C[D].lim,C[L].lim),ie,q;ie=D;do ie=E.parent(ie),O.push(ie);while(ie&&(C[ie].low>W||G>C[ie].lim));for(q=ie,ie=L;(ie=E.parent(ie))!==q;)R.push(ie);return{path:O.concat(R.reverse()),lca:q}}function M(E){var C={},D=0;function L(O){var R=D;g.forEach(E.children(O),L),C[O]={low:R,lim:D++}}return g.forEach(E.children(),L),C}},2080:(w,Z,f)=>{"use strict";var g=f(2361),y=f(6626).Graph,A=f(3063);w.exports={positionX:we,findType1Conflicts:M,findType2Conflicts:E,addConflict:D,hasConflict:L,verticalAlignment:O,horizontalCompaction:R,alignCoordinates:ie,findSmallestWidthAlignment:G,balance:q};function M(F,be){var pe={};function ae(Q,I){var oe=0,te=0,ue=Q.length,De=g.last(I);return g.forEach(I,function(ve,Ne){var Ge=C(F,ve),$e=Ge?F.node(Ge).order:ue;(Ge||ve===De)&&(g.forEach(I.slice(te,Ne+1),function(Be){g.forEach(F.predecessors(Be),function(mt){var Ot=F.node(mt),kt=Ot.order;(kt<oe||$e<kt)&&!(Ot.dummy&&F.node(Be).dummy)&&D(pe,mt,Be)})}),te=Ne+1,oe=$e)}),I}return g.reduce(be,ae),pe}function E(F,be){var pe={};function ae(I,oe,te,ue,De){var ve;g.forEach(g.range(oe,te),function(Ne){ve=I[Ne],F.node(ve).dummy&&g.forEach(F.predecessors(ve),function(Ge){var $e=F.node(Ge);$e.dummy&&($e.order<ue||$e.order>De)&&D(pe,Ge,ve)})})}function Q(I,oe){var te=-1,ue,De=0;return g.forEach(oe,function(ve,Ne){if(F.node(ve).dummy==="border"){var Ge=F.predecessors(ve);Ge.length&&(ue=F.node(Ge[0]).order,ae(oe,De,Ne,te,ue),De=Ne,te=ue)}ae(oe,De,oe.length,ue,I.length)}),oe}return g.reduce(be,Q),pe}function C(F,be){if(F.node(be).dummy)return g.find(F.predecessors(be),function(pe){return F.node(pe).dummy})}function D(F,be,pe){if(be>pe){var ae=be;be=pe,pe=ae}var Q=F[be];Q||(F[be]=Q={}),Q[pe]=!0}function L(F,be,pe){if(be>pe){var ae=be;be=pe,pe=ae}return g.has(F[be],pe)}function O(F,be,pe,ae){var Q={},I={},oe={};return g.forEach(be,function(te){g.forEach(te,function(ue,De){Q[ue]=ue,I[ue]=ue,oe[ue]=De})}),g.forEach(be,function(te){var ue=-1;g.forEach(te,function(De){var ve=ae(De);if(ve.length){ve=g.sortBy(ve,function(mt){return oe[mt]});for(var Ne=(ve.length-1)/2,Ge=Math.floor(Ne),$e=Math.ceil(Ne);Ge<=$e;++Ge){var Be=ve[Ge];I[De]===De&&ue<oe[Be]&&!L(pe,De,Be)&&(I[Be]=De,I[De]=Q[De]=Q[Be],ue=oe[Be])}}})}),{root:Q,align:I}}function R(F,be,pe,ae,Q){var I={},oe=W(F,be,pe,Q),te=Q?"borderLeft":"borderRight";function ue(Ne,Ge){for(var $e=oe.nodes(),Be=$e.pop(),mt={};Be;)mt[Be]?Ne(Be):(mt[Be]=!0,$e.push(Be),$e=$e.concat(Ge(Be))),Be=$e.pop()}function De(Ne){I[Ne]=oe.inEdges(Ne).reduce(function(Ge,$e){return Math.max(Ge,I[$e.v]+oe.edge($e))},0)}function ve(Ne){var Ge=oe.outEdges(Ne).reduce(function(Be,mt){return Math.min(Be,I[mt.w]-oe.edge(mt))},Number.POSITIVE_INFINITY),$e=F.node(Ne);Ge!==Number.POSITIVE_INFINITY&&$e.borderType!==te&&(I[Ne]=Math.max(I[Ne],Ge))}return ue(De,oe.predecessors.bind(oe)),ue(ve,oe.successors.bind(oe)),g.forEach(ae,function(Ne){I[Ne]=I[pe[Ne]]}),I}function W(F,be,pe,ae){var Q=new y,I=F.graph(),oe=de(I.nodesep,I.edgesep,ae);return g.forEach(be,function(te){var ue;g.forEach(te,function(De){var ve=pe[De];if(Q.setNode(ve),ue){var Ne=pe[ue],Ge=Q.edge(Ne,ve);Q.setEdge(Ne,ve,Math.max(oe(F,De,ue),Ge||0))}ue=De})}),Q}function G(F,be){return g.minBy(g.values(be),function(pe){var ae=Number.NEGATIVE_INFINITY,Q=Number.POSITIVE_INFINITY;return g.forIn(pe,function(I,oe){var te=fe(F,oe)/2;ae=Math.max(I+te,ae),Q=Math.min(I-te,Q)}),ae-Q})}function ie(F,be){var pe=g.values(be),ae=g.min(pe),Q=g.max(pe);g.forEach(["u","d"],function(I){g.forEach(["l","r"],function(oe){var te=I+oe,ue=F[te],De;if(ue!==be){var ve=g.values(ue);De=oe==="l"?ae-g.min(ve):Q-g.max(ve),De&&(F[te]=g.mapValues(ue,function(Ne){return Ne+De}))}})})}function q(F,be){return g.mapValues(F.ul,function(pe,ae){if(be)return F[be.toLowerCase()][ae];var Q=g.sortBy(g.map(F,ae));return(Q[1]+Q[2])/2})}function we(F){var be=A.buildLayerMatrix(F),pe=g.merge(M(F,be),E(F,be)),ae={},Q;g.forEach(["u","d"],function(oe){Q=oe==="u"?be:g.values(be).reverse(),g.forEach(["l","r"],function(te){te==="r"&&(Q=g.map(Q,function(Ne){return g.values(Ne).reverse()}));var ue=(oe==="u"?F.predecessors:F.successors).bind(F),De=O(F,Q,pe,ue),ve=R(F,Q,De.root,De.align,te==="r");te==="r"&&(ve=g.mapValues(ve,function(Ne){return-Ne})),ae[oe+te]=ve})});var I=G(F,ae);return ie(ae,I),q(ae,F.graph().align)}function de(F,be,pe){return function(ae,Q,I){var oe=ae.node(Q),te=ae.node(I),ue=0,De;if(ue+=oe.width/2,g.has(oe,"labelpos"))switch(oe.labelpos.toLowerCase()){case"l":De=-oe.width/2;break;case"r":De=oe.width/2;break}if(De&&(ue+=pe?De:-De),De=0,ue+=(oe.dummy?be:F)/2,ue+=(te.dummy?be:F)/2,ue+=te.width/2,g.has(te,"labelpos"))switch(te.labelpos.toLowerCase()){case"l":De=te.width/2;break;case"r":De=-te.width/2;break}return De&&(ue+=pe?De:-De),De=0,ue}}function fe(F,be){return F.node(be).width}},3021:(w,Z,f)=>{"use strict";var g=f(2361),y=f(3063),A=f(2080).positionX;w.exports=M;function M(C){C=y.asNonCompoundGraph(C),E(C),g.forEach(A(C),function(D,L){C.node(L).x=D})}function E(C){var D=y.buildLayerMatrix(C),L=C.graph().ranksep,O=0;g.forEach(D,function(R){var W=g.max(g.map(R,function(G){return C.node(G).height}));g.forEach(R,function(G){C.node(G).y=O+W/2}),O+=W+L})}},1031:(w,Z,f)=>{"use strict";var g=f(2361),y=f(6626).Graph,A=f(2416).slack;w.exports=M;function M(L){var O=new y({directed:!1}),R=L.nodes()[0],W=L.nodeCount();O.setNode(R,{});for(var G,ie;E(O,L)<W;)G=C(O,L),ie=O.hasNode(G.v)?A(L,G):-A(L,G),D(O,L,ie);return O}function E(L,O){function R(W){g.forEach(O.nodeEdges(W),function(G){var ie=G.v,q=W===ie?G.w:ie;!L.hasNode(q)&&!A(O,G)&&(L.setNode(q,{}),L.setEdge(W,q,{}),R(q))})}return g.forEach(L.nodes(),R),L.nodeCount()}function C(L,O){return g.minBy(O.edges(),function(R){if(L.hasNode(R.v)!==L.hasNode(R.w))return A(O,R)})}function D(L,O,R){g.forEach(L.nodes(),function(W){O.node(W).rank+=R})}},4505:(w,Z,f)=>{"use strict";var g=f(2416),y=g.longestPath,A=f(1031),M=f(7076);w.exports=E;function E(O){switch(O.graph().ranker){case"network-simplex":L(O);break;case"tight-tree":D(O);break;case"longest-path":C(O);break;default:L(O)}}var C=y;function D(O){y(O),A(O)}function L(O){M(O)}},7076:(w,Z,f)=>{"use strict";var g=f(2361),y=f(1031),A=f(2416).slack,M=f(2416).longestPath,E=f(6626).alg.preorder,C=f(6626).alg.postorder,D=f(3063).simplify;w.exports=L,L.initLowLimValues=G,L.initCutValues=O,L.calcCutValue=W,L.leaveEdge=q,L.enterEdge=we,L.exchangeEdges=de;function L(pe){pe=D(pe),M(pe);var ae=y(pe);G(ae),O(ae,pe);for(var Q,I;Q=q(ae);)I=we(ae,pe,Q),de(ae,pe,Q,I)}function O(pe,ae){var Q=C(pe,pe.nodes());Q=Q.slice(0,Q.length-1),g.forEach(Q,function(I){R(pe,ae,I)})}function R(pe,ae,Q){var I=pe.node(Q),oe=I.parent;pe.edge(Q,oe).cutvalue=W(pe,ae,Q)}function W(pe,ae,Q){var I=pe.node(Q),oe=I.parent,te=!0,ue=ae.edge(Q,oe),De=0;return ue||(te=!1,ue=ae.edge(oe,Q)),De=ue.weight,g.forEach(ae.nodeEdges(Q),function(ve){var Ne=ve.v===Q,Ge=Ne?ve.w:ve.v;if(Ge!==oe){var $e=Ne===te,Be=ae.edge(ve).weight;if(De+=$e?Be:-Be,F(pe,Q,Ge)){var mt=pe.edge(Q,Ge).cutvalue;De+=$e?-mt:mt}}}),De}function G(pe,ae){arguments.length<2&&(ae=pe.nodes()[0]),ie(pe,{},1,ae)}function ie(pe,ae,Q,I,oe){var te=Q,ue=pe.node(I);return ae[I]=!0,g.forEach(pe.neighbors(I),function(De){g.has(ae,De)||(Q=ie(pe,ae,Q,De,I))}),ue.low=te,ue.lim=Q++,oe?ue.parent=oe:delete ue.parent,Q}function q(pe){return g.find(pe.edges(),function(ae){return pe.edge(ae).cutvalue<0})}function we(pe,ae,Q){var I=Q.v,oe=Q.w;ae.hasEdge(I,oe)||(I=Q.w,oe=Q.v);var te=pe.node(I),ue=pe.node(oe),De=te,ve=!1;te.lim>ue.lim&&(De=ue,ve=!0);var Ne=g.filter(ae.edges(),function(Ge){return ve===be(pe,pe.node(Ge.v),De)&&ve!==be(pe,pe.node(Ge.w),De)});return g.minBy(Ne,function(Ge){return A(ae,Ge)})}function de(pe,ae,Q,I){var oe=Q.v,te=Q.w;pe.removeEdge(oe,te),pe.setEdge(I.v,I.w,{}),G(pe),O(pe,ae),fe(pe,ae)}function fe(pe,ae){var Q=g.find(pe.nodes(),function(oe){return!ae.node(oe).parent}),I=E(pe,Q);I=I.slice(1),g.forEach(I,function(oe){var te=pe.node(oe).parent,ue=ae.edge(oe,te),De=!1;ue||(ue=ae.edge(te,oe),De=!0),ae.node(oe).rank=ae.node(te).rank+(De?ue.minlen:-ue.minlen)})}function F(pe,ae,Q){return pe.hasEdge(ae,Q)}function be(pe,ae,Q){return Q.low<=ae.lim&&ae.lim<=Q.lim}},2416:(w,Z,f)=>{"use strict";var g=f(2361);w.exports={longestPath:y,slack:A};function y(M){var E={};function C(D){var L=M.node(D);if(g.has(E,D))return L.rank;E[D]=!0;var O=g.min(g.map(M.outEdges(D),function(R){return C(R.w)-M.edge(R).minlen}));return(O===Number.POSITIVE_INFINITY||O===void 0||O===null)&&(O=0),L.rank=O}g.forEach(M.sources(),C)}function A(M,E){return M.node(E.w).rank-M.node(E.v).rank-M.edge(E).minlen}},3063:(w,Z,f)=>{"use strict";var g=f(2361),y=f(6626).Graph;w.exports={addDummyNode:A,simplify:M,asNonCompoundGraph:E,successorWeights:C,predecessorWeights:D,intersectRect:L,buildLayerMatrix:O,normalizeRanks:R,removeEmptyRanks:W,addBorderNode:G,maxRank:ie,partition:q,time:we,notime:de};function A(fe,F,be,pe){var ae;do ae=g.uniqueId(pe);while(fe.hasNode(ae));return be.dummy=F,fe.setNode(ae,be),ae}function M(fe){var F=new y().setGraph(fe.graph());return g.forEach(fe.nodes(),function(be){F.setNode(be,fe.node(be))}),g.forEach(fe.edges(),function(be){var pe=F.edge(be.v,be.w)||{weight:0,minlen:1},ae=fe.edge(be);F.setEdge(be.v,be.w,{weight:pe.weight+ae.weight,minlen:Math.max(pe.minlen,ae.minlen)})}),F}function E(fe){var F=new y({multigraph:fe.isMultigraph()}).setGraph(fe.graph());return g.forEach(fe.nodes(),function(be){fe.children(be).length||F.setNode(be,fe.node(be))}),g.forEach(fe.edges(),function(be){F.setEdge(be,fe.edge(be))}),F}function C(fe){var F=g.map(fe.nodes(),function(be){var pe={};return g.forEach(fe.outEdges(be),function(ae){pe[ae.w]=(pe[ae.w]||0)+fe.edge(ae).weight}),pe});return g.zipObject(fe.nodes(),F)}function D(fe){var F=g.map(fe.nodes(),function(be){var pe={};return g.forEach(fe.inEdges(be),function(ae){pe[ae.v]=(pe[ae.v]||0)+fe.edge(ae).weight}),pe});return g.zipObject(fe.nodes(),F)}function L(fe,F){var be=fe.x,pe=fe.y,ae=F.x-be,Q=F.y-pe,I=fe.width/2,oe=fe.height/2;if(!ae&&!Q)throw new Error("Not possible to find intersection inside of the rectangle");var te,ue;return Math.abs(Q)*I>Math.abs(ae)*oe?(Q<0&&(oe=-oe),te=oe*ae/Q,ue=oe):(ae<0&&(I=-I),te=I,ue=I*Q/ae),{x:be+te,y:pe+ue}}function O(fe){var F=g.map(g.range(ie(fe)+1),function(){return[]});return g.forEach(fe.nodes(),function(be){var pe=fe.node(be),ae=pe.rank;g.isUndefined(ae)||(F[ae][pe.order]=be)}),F}function R(fe){var F=g.min(g.map(fe.nodes(),function(be){return fe.node(be).rank}));g.forEach(fe.nodes(),function(be){var pe=fe.node(be);g.has(pe,"rank")&&(pe.rank-=F)})}function W(fe){var F=g.min(g.map(fe.nodes(),function(Q){return fe.node(Q).rank})),be=[];g.forEach(fe.nodes(),function(Q){var I=fe.node(Q).rank-F;be[I]||(be[I]=[]),be[I].push(Q)});var pe=0,ae=fe.graph().nodeRankFactor;g.forEach(be,function(Q,I){g.isUndefined(Q)&&I%ae!=0?--pe:pe&&g.forEach(Q,function(oe){fe.node(oe).rank+=pe})})}function G(fe,F,be,pe){var ae={width:0,height:0};return arguments.length>=4&&(ae.rank=be,ae.order=pe),A(fe,"border",ae,F)}function ie(fe){return g.max(g.map(fe.nodes(),function(F){var be=fe.node(F).rank;if(!g.isUndefined(be))return be}))}function q(fe,F){var be={lhs:[],rhs:[]};return g.forEach(fe,function(pe){F(pe)?be.lhs.push(pe):be.rhs.push(pe)}),be}function we(fe,F){var be=g.now();try{return F()}finally{console.log(fe+" time: "+(g.now()-be)+"ms")}}function de(fe,F){return F()}},2275:w=>{w.exports="0.8.5"},4572:function(w){(function(Z){"use strict";var f=fe(),g=F(),y=be(),A=pe(),M={imagePlaceholder:void 0,cacheBust:!1},E={toSvg:C,toPng:L,toJpeg:O,toBlob:R,toPixelData:D,impl:{fontFaces:y,images:A,util:f,inliner:g,options:{}}};w.exports=E;function C(ae,Q){return Q=Q||{},W(Q),Promise.resolve(ae).then(function(oe){return ie(oe,Q.filter,!0)}).then(q).then(we).then(I).then(function(oe){return de(oe,Q.width||f.width(ae),Q.height||f.height(ae))});function I(oe){return Q.bgcolor&&(oe.style.backgroundColor=Q.bgcolor),Q.width&&(oe.style.width=Q.width+"px"),Q.height&&(oe.style.height=Q.height+"px"),Q.style&&Object.keys(Q.style).forEach(function(te){oe.style[te]=Q.style[te]}),oe}}function D(ae,Q){return G(ae,Q||{}).then(function(I){return I.getContext("2d").getImageData(0,0,f.width(ae),f.height(ae)).data})}function L(ae,Q){return G(ae,Q||{}).then(function(I){return I.toDataURL()})}function O(ae,Q){return Q=Q||{},G(ae,Q).then(function(I){return I.toDataURL("image/jpeg",Q.quality||1)})}function R(ae,Q){return G(ae,Q||{}).then(f.canvasToBlob)}function W(ae){typeof ae.imagePlaceholder=="undefined"?E.impl.options.imagePlaceholder=M.imagePlaceholder:E.impl.options.imagePlaceholder=ae.imagePlaceholder,typeof ae.cacheBust=="undefined"?E.impl.options.cacheBust=M.cacheBust:E.impl.options.cacheBust=ae.cacheBust}function G(ae,Q){return C(ae,Q).then(f.makeImage).then(f.delay(100)).then(function(oe){var te=I(ae);return te.getContext("2d").drawImage(oe,0,0),te});function I(oe){var te=document.createElement("canvas");if(te.width=Q.width||f.width(oe),te.height=Q.height||f.height(oe),Q.bgcolor){var ue=te.getContext("2d");ue.fillStyle=Q.bgcolor,ue.fillRect(0,0,te.width,te.height)}return te}}function ie(ae,Q,I){if(!I&&Q&&!Q(ae))return Promise.resolve();return Promise.resolve(ae).then(oe).then(function(De){return te(ae,De,Q)}).then(function(De){return ue(ae,De)});function oe(De){return De instanceof HTMLCanvasElement?f.makeImage(De.toDataURL()):De.cloneNode(!1)}function te(De,ve,Ne){var Ge=De.childNodes;if(Ge.length===0)return Promise.resolve(ve);return $e(ve,f.asArray(Ge),Ne).then(function(){return ve});function $e(Be,mt,Ot){var kt=Promise.resolve();return mt.forEach(function(Tt){kt=kt.then(function(){return ie(Tt,Ot)}).then(function(Jt){Jt&&Be.appendChild(Jt)})}),kt}}function ue(De,ve){if(!(ve instanceof Element))return ve;return Promise.resolve().then(Ne).then(Ge).then($e).then(Be).then(function(){return ve});function Ne(){mt(window.getComputedStyle(De),ve.style);function mt(Ot,kt){Ot.cssText?kt.cssText=Ot.cssText:Tt(Ot,kt);function Tt(Jt,Mn){f.asArray(Jt).forEach(function(Yt){Mn.setProperty(Yt,Jt.getPropertyValue(Yt),Jt.getPropertyPriority(Yt))})}}}function Ge(){[":before",":after"].forEach(function(Ot){mt(Ot)});function mt(Ot){var kt=window.getComputedStyle(De,Ot),Tt=kt.getPropertyValue("content");if(Tt===""||Tt==="none")return;var Jt=f.uid();ve.className=ve.className+" "+Jt;var Mn=document.createElement("style");Mn.appendChild(Yt(Jt,Ot,kt)),ve.appendChild(Mn);function Yt(pn,gt,_t){var Gt="."+pn+":"+gt,Ft=_t.cssText?zt(_t):en(_t);return document.createTextNode(Gt+"{"+Ft+"}");function zt(Bt){var an=Bt.getPropertyValue("content");return Bt.cssText+" content: "+an+";"}function en(Bt){return f.asArray(Bt).map(an).join("; ")+";";function an(Di){return Di+": "+Bt.getPropertyValue(Di)+(Bt.getPropertyPriority(Di)?" !important":"")}}}}}function $e(){De instanceof HTMLTextAreaElement&&(ve.innerHTML=De.value),De instanceof HTMLInputElement&&ve.setAttribute("value",De.value)}function Be(){ve instanceof SVGElement&&(ve.setAttribute("xmlns","http://www.w3.org/2000/svg"),ve instanceof SVGRectElement&&["width","height"].forEach(function(mt){var Ot=ve.getAttribute(mt);!Ot||ve.style.setProperty(mt,Ot)}))}}}function q(ae){return y.resolveAll().then(function(Q){var I=document.createElement("style");return ae.appendChild(I),I.appendChild(document.createTextNode(Q)),ae})}function we(ae){return A.inlineAll(ae).then(function(){return ae})}function de(ae,Q,I){return Promise.resolve(ae).then(function(oe){return oe.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(oe)}).then(f.escapeXhtml).then(function(oe){return'<foreignObject x="0" y="0" width="100%" height="100%">'+oe+"</foreignObject>"}).then(function(oe){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+Q+'" height="'+I+'">'+oe+"</svg>"}).then(function(oe){return"data:image/svg+xml;charset=utf-8,"+oe})}function fe(){return{escape:Be,parseExtension:Q,mimeType:I,dataAsUrl:$e,isDataUrl:oe,canvasToBlob:ue,resolveUrl:De,getAndEncode:Ge,uid:ve(),delay:mt,asArray:Ot,escapeXhtml:kt,makeImage:Ne,width:Tt,height:Jt};function ae(){var Yt="application/font-woff",pn="image/jpeg";return{woff:Yt,woff2:Yt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:pn,jpeg:pn,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function Q(Yt){var pn=/\.([^\.\/]*?)$/g.exec(Yt);return pn?pn[1]:""}function I(Yt){var pn=Q(Yt).toLowerCase();return ae()[pn]||""}function oe(Yt){return Yt.search(/^(data:)/)!==-1}function te(Yt){return new Promise(function(pn){for(var gt=window.atob(Yt.toDataURL().split(",")[1]),_t=gt.length,Gt=new Uint8Array(_t),Ft=0;Ft<_t;Ft++)Gt[Ft]=gt.charCodeAt(Ft);pn(new Blob([Gt],{type:"image/png"}))})}function ue(Yt){return Yt.toBlob?new Promise(function(pn){Yt.toBlob(pn)}):te(Yt)}function De(Yt,pn){var gt=document.implementation.createHTMLDocument(),_t=gt.createElement("base");gt.head.appendChild(_t);var Gt=gt.createElement("a");return gt.body.appendChild(Gt),_t.href=pn,Gt.href=Yt,Gt.href}function ve(){var Yt=0;return function(){return"u"+pn()+Yt++;function pn(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function Ne(Yt){return new Promise(function(pn,gt){var _t=new Image;_t.onload=function(){pn(_t)},_t.onerror=gt,_t.src=Yt})}function Ge(Yt){var pn=3e4;return E.impl.options.cacheBust&&(Yt+=(/\?/.test(Yt)?"&":"?")+new Date().getTime()),new Promise(function(gt){var _t=new XMLHttpRequest;_t.onreadystatechange=zt,_t.ontimeout=en,_t.responseType="blob",_t.timeout=pn,_t.open("GET",Yt,!0),_t.send();var Gt;if(E.impl.options.imagePlaceholder){var Ft=E.impl.options.imagePlaceholder.split(/,/);Ft&&Ft[1]&&(Gt=Ft[1])}function zt(){if(_t.readyState===4){if(_t.status!==200){Gt?gt(Gt):Bt("cannot fetch resource: "+Yt+", status: "+_t.status);return}var an=new FileReader;an.onloadend=function(){var Di=an.result.split(/,/)[1];gt(Di)},an.readAsDataURL(_t.response)}}function en(){Gt?gt(Gt):Bt("timeout of "+pn+"ms occured while fetching resource: "+Yt)}function Bt(an){console.error(an),gt("")}})}function $e(Yt,pn){return"data:"+pn+";base64,"+Yt}function Be(Yt){return Yt.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function mt(Yt){return function(pn){return new Promise(function(gt){setTimeout(function(){gt(pn)},Yt)})}}function Ot(Yt){for(var pn=[],gt=Yt.length,_t=0;_t<gt;_t++)pn.push(Yt[_t]);return pn}function kt(Yt){return Yt.replace(/#/g,"%23").replace(/\n/g,"%0A")}function Tt(Yt){var pn=Mn(Yt,"border-left-width"),gt=Mn(Yt,"border-right-width");return Yt.scrollWidth+pn+gt}function Jt(Yt){var pn=Mn(Yt,"border-top-width"),gt=Mn(Yt,"border-bottom-width");return Yt.scrollHeight+pn+gt}function Mn(Yt,pn){var gt=window.getComputedStyle(Yt).getPropertyValue(pn);return parseFloat(gt.replace("px",""))}}function F(){var ae=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:te,shouldProcess:Q,impl:{readUrls:I,inline:oe}};function Q(ue){return ue.search(ae)!==-1}function I(ue){for(var De=[],ve;(ve=ae.exec(ue))!==null;)De.push(ve[1]);return De.filter(function(Ne){return!f.isDataUrl(Ne)})}function oe(ue,De,ve,Ne){return Promise.resolve(De).then(function($e){return ve?f.resolveUrl($e,ve):$e}).then(Ne||f.getAndEncode).then(function($e){return f.dataAsUrl($e,f.mimeType(De))}).then(function($e){return ue.replace(Ge(De),"$1"+$e+"$3")});function Ge($e){return new RegExp(`(url\\(['"]?)(`+f.escape($e)+`)(['"]?\\))`,"g")}}function te(ue,De,ve){if(Ne())return Promise.resolve(ue);return Promise.resolve(ue).then(I).then(function(Ge){var $e=Promise.resolve(ue);return Ge.forEach(function(Be){$e=$e.then(function(mt){return oe(mt,Be,De,ve)})}),$e});function Ne(){return!Q(ue)}}}function be(){return{resolveAll:ae,impl:{readAll:Q}};function ae(){return Q(document).then(function(I){return Promise.all(I.map(function(oe){return oe.resolve()}))}).then(function(I){return I.join(`
`)})}function Q(){return Promise.resolve(f.asArray(document.styleSheets)).then(oe).then(I).then(function(ue){return ue.map(te)});function I(ue){return ue.filter(function(De){return De.type===CSSRule.FONT_FACE_RULE}).filter(function(De){return g.shouldProcess(De.style.getPropertyValue("src"))})}function oe(ue){var De=[];return ue.forEach(function(ve){try{f.asArray(ve.cssRules||[]).forEach(De.push.bind(De))}catch(Ne){console.log("Error while reading CSS rules from "+ve.href,Ne.toString())}}),De}function te(ue){return{resolve:function(){var ve=(ue.parentStyleSheet||{}).href;return g.inlineAll(ue.cssText,ve)},src:function(){return ue.style.getPropertyValue("src")}}}}}function pe(){return{inlineAll:Q,impl:{newImage:ae}};function ae(I){return{inline:oe};function oe(te){return f.isDataUrl(I.src)?Promise.resolve():Promise.resolve(I.src).then(te||f.getAndEncode).then(function(ue){return f.dataAsUrl(ue,f.mimeType(I.src))}).then(function(ue){return new Promise(function(De,ve){I.onload=De,I.onerror=ve,I.src=ue})})}}function Q(I){if(!(I instanceof Element))return Promise.resolve(I);return oe(I).then(function(){return I instanceof HTMLImageElement?ae(I).inline():Promise.all(f.asArray(I.childNodes).map(function(te){return Q(te)}))});function oe(te){var ue=te.style.getPropertyValue("background");return ue?g.inlineAll(ue).then(function(De){te.style.setProperty("background",De,te.style.getPropertyPriority("background"))}).then(function(){return te}):Promise.resolve(te)}}}})(this)},666:w=>{"use strict";var Z=Object.prototype.hasOwnProperty,f="~";function g(){}Object.create&&(g.prototype=Object.create(null),new g().__proto__||(f=!1));function y(C,D,L){this.fn=C,this.context=D,this.once=L||!1}function A(C,D,L,O,R){if(typeof L!="function")throw new TypeError("The listener must be a function");var W=new y(L,O||C,R),G=f?f+D:D;return C._events[G]?C._events[G].fn?C._events[G]=[C._events[G],W]:C._events[G].push(W):(C._events[G]=W,C._eventsCount++),C}function M(C,D){--C._eventsCount==0?C._events=new g:delete C._events[D]}function E(){this._events=new g,this._eventsCount=0}E.prototype.eventNames=function(){var D=[],L,O;if(this._eventsCount===0)return D;for(O in L=this._events)Z.call(L,O)&&D.push(f?O.slice(1):O);return Object.getOwnPropertySymbols?D.concat(Object.getOwnPropertySymbols(L)):D},E.prototype.listeners=function(D){var L=f?f+D:D,O=this._events[L];if(!O)return[];if(O.fn)return[O.fn];for(var R=0,W=O.length,G=new Array(W);R<W;R++)G[R]=O[R].fn;return G},E.prototype.listenerCount=function(D){var L=f?f+D:D,O=this._events[L];return O?O.fn?1:O.length:0},E.prototype.emit=function(D,L,O,R,W,G){var ie=f?f+D:D;if(!this._events[ie])return!1;var q=this._events[ie],we=arguments.length,de,fe;if(q.fn){switch(q.once&&this.removeListener(D,q.fn,void 0,!0),we){case 1:return q.fn.call(q.context),!0;case 2:return q.fn.call(q.context,L),!0;case 3:return q.fn.call(q.context,L,O),!0;case 4:return q.fn.call(q.context,L,O,R),!0;case 5:return q.fn.call(q.context,L,O,R,W),!0;case 6:return q.fn.call(q.context,L,O,R,W,G),!0}for(fe=1,de=new Array(we-1);fe<we;fe++)de[fe-1]=arguments[fe];q.fn.apply(q.context,de)}else{var F=q.length,be;for(fe=0;fe<F;fe++)switch(q[fe].once&&this.removeListener(D,q[fe].fn,void 0,!0),we){case 1:q[fe].fn.call(q[fe].context);break;case 2:q[fe].fn.call(q[fe].context,L);break;case 3:q[fe].fn.call(q[fe].context,L,O);break;case 4:q[fe].fn.call(q[fe].context,L,O,R);break;default:if(!de)for(be=1,de=new Array(we-1);be<we;be++)de[be-1]=arguments[be];q[fe].fn.apply(q[fe].context,de)}}return!0},E.prototype.on=function(D,L,O){return A(this,D,L,O,!1)},E.prototype.once=function(D,L,O){return A(this,D,L,O,!0)},E.prototype.removeListener=function(D,L,O,R){var W=f?f+D:D;if(!this._events[W])return this;if(!L)return M(this,W),this;var G=this._events[W];if(G.fn)G.fn===L&&(!R||G.once)&&(!O||G.context===O)&&M(this,W);else{for(var ie=0,q=[],we=G.length;ie<we;ie++)(G[ie].fn!==L||R&&!G[ie].once||O&&G[ie].context!==O)&&q.push(G[ie]);q.length?this._events[W]=q.length===1?q[0]:q:M(this,W)}return this},E.prototype.removeAllListeners=function(D){var L;return D?(L=f?f+D:D,this._events[L]&&M(this,L)):(this._events=new g,this._eventsCount=0),this},E.prototype.off=E.prototype.removeListener,E.prototype.addListener=E.prototype.on,E.prefixed=f,E.EventEmitter=E,w.exports=E},5172:(w,Z,f)=>{var g=f(9224);w.exports={Graph:g.Graph,json:f(7401),alg:f(4613),version:g.version}},1606:(w,Z,f)=>{var g=f(5329);w.exports=y;function y(A){var M={},E=[],C;function D(L){g.has(M,L)||(M[L]=!0,C.push(L),g.each(A.successors(L),D),g.each(A.predecessors(L),D))}return g.each(A.nodes(),function(L){C=[],D(L),C.length&&E.push(C)}),E}},1482:(w,Z,f)=>{var g=f(5329);w.exports=y;function y(M,E,C){g.isArray(E)||(E=[E]);var D=(M.isDirected()?M.successors:M.neighbors).bind(M),L=[],O={};return g.each(E,function(R){if(!M.hasNode(R))throw new Error("Graph does not have node: "+R);A(M,R,C==="post",O,D,L)}),L}function A(M,E,C,D,L,O){g.has(D,E)||(D[E]=!0,C||O.push(E),g.each(L(E),function(R){A(M,R,C,D,L,O)}),C&&O.push(E))}},845:(w,Z,f)=>{var g=f(3746),y=f(5329);w.exports=A;function A(M,E,C){return y.transform(M.nodes(),function(D,L){D[L]=g(M,L,E,C)},{})}},3746:(w,Z,f)=>{var g=f(5329),y=f(6614);w.exports=M;var A=g.constant(1);function M(C,D,L,O){return E(C,String(D),L||A,O||function(R){return C.outEdges(R)})}function E(C,D,L,O){var R={},W=new y,G,ie,q=function(we){var de=we.v!==G?we.v:we.w,fe=R[de],F=L(we),be=ie.distance+F;if(F<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+we+" Weight: "+F);be<fe.distance&&(fe.distance=be,fe.predecessor=G,W.decrease(de,be))};for(C.nodes().forEach(function(we){var de=we===D?0:Number.POSITIVE_INFINITY;R[we]={distance:de},W.add(we,de)});W.size()>0&&(G=W.removeMin(),ie=R[G],ie.distance!==Number.POSITIVE_INFINITY);)O(G).forEach(q);return R}},9324:(w,Z,f)=>{var g=f(5329),y=f(4558);w.exports=A;function A(M){return g.filter(y(M),function(E){return E.length>1||E.length===1&&M.hasEdge(E[0],E[0])})}},2893:(w,Z,f)=>{var g=f(5329);w.exports=A;var y=g.constant(1);function A(E,C,D){return M(E,C||y,D||function(L){return E.outEdges(L)})}function M(E,C,D){var L={},O=E.nodes();return O.forEach(function(R){L[R]={},L[R][R]={distance:0},O.forEach(function(W){R!==W&&(L[R][W]={distance:Number.POSITIVE_INFINITY})}),D(R).forEach(function(W){var G=W.v===R?W.w:W.v,ie=C(W);L[R][G]={distance:ie,predecessor:R}})}),O.forEach(function(R){var W=L[R];O.forEach(function(G){var ie=L[G];O.forEach(function(q){var we=ie[R],de=W[q],fe=ie[q],F=we.distance+de.distance;F<fe.distance&&(fe.distance=F,fe.predecessor=de.predecessor)})})}),L}},4613:(w,Z,f)=>{w.exports={components:f(1606),dijkstra:f(3746),dijkstraAll:f(845),findCycles:f(9324),floydWarshall:f(2893),isAcyclic:f(588),postorder:f(8049),preorder:f(7158),prim:f(6058),tarjan:f(4558),topsort:f(7793)}},588:(w,Z,f)=>{var g=f(7793);w.exports=y;function y(A){try{g(A)}catch(M){if(M instanceof g.CycleException)return!1;throw M}return!0}},8049:(w,Z,f)=>{var g=f(1482);w.exports=y;function y(A,M){return g(A,M,"post")}},7158:(w,Z,f)=>{var g=f(1482);w.exports=y;function y(A,M){return g(A,M,"pre")}},6058:(w,Z,f)=>{var g=f(5329),y=f(6349),A=f(6614);w.exports=M;function M(E,C){var D=new y,L={},O=new A,R;function W(ie){var q=ie.v===R?ie.w:ie.v,we=O.priority(q);if(we!==void 0){var de=C(ie);de<we&&(L[q]=R,O.decrease(q,de))}}if(E.nodeCount()===0)return D;g.each(E.nodes(),function(ie){O.add(ie,Number.POSITIVE_INFINITY),D.setNode(ie)}),O.decrease(E.nodes()[0],0);for(var G=!1;O.size()>0;){if(R=O.removeMin(),g.has(L,R))D.setEdge(R,L[R]);else{if(G)throw new Error("Input graph is not connected: "+E);G=!0}E.nodeEdges(R).forEach(W)}return D}},4558:(w,Z,f)=>{var g=f(5329);w.exports=y;function y(A){var M=0,E=[],C={},D=[];function L(O){var R=C[O]={onStack:!0,lowlink:M,index:M++};if(E.push(O),A.successors(O).forEach(function(ie){g.has(C,ie)?C[ie].onStack&&(R.lowlink=Math.min(R.lowlink,C[ie].index)):(L(ie),R.lowlink=Math.min(R.lowlink,C[ie].lowlink))}),R.lowlink===R.index){var W=[],G;do G=E.pop(),C[G].onStack=!1,W.push(G);while(O!==G);D.push(W)}}return A.nodes().forEach(function(O){g.has(C,O)||L(O)}),D}},7793:(w,Z,f)=>{var g=f(5329);w.exports=y,y.CycleException=A;function y(M){var E={},C={},D=[];function L(O){if(g.has(C,O))throw new A;g.has(E,O)||(C[O]=!0,E[O]=!0,g.each(M.predecessors(O),L),delete C[O],D.push(O))}if(g.each(M.sinks(),L),g.size(E)!==M.nodeCount())throw new A;return D}function A(){}A.prototype=new Error},6614:(w,Z,f)=>{var g=f(5329);w.exports=y;function y(){this._arr=[],this._keyIndices={}}y.prototype.size=function(){return this._arr.length},y.prototype.keys=function(){return this._arr.map(function(A){return A.key})},y.prototype.has=function(A){return g.has(this._keyIndices,A)},y.prototype.priority=function(A){var M=this._keyIndices[A];if(M!==void 0)return this._arr[M].priority},y.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},y.prototype.add=function(A,M){var E=this._keyIndices;if(A=String(A),!g.has(E,A)){var C=this._arr,D=C.length;return E[A]=D,C.push({key:A,priority:M}),this._decrease(D),!0}return!1},y.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var A=this._arr.pop();return delete this._keyIndices[A.key],this._heapify(0),A.key},y.prototype.decrease=function(A,M){var E=this._keyIndices[A];if(M>this._arr[E].priority)throw new Error("New priority is greater than current priority. Key: "+A+" Old: "+this._arr[E].priority+" New: "+M);this._arr[E].priority=M,this._decrease(E)},y.prototype._heapify=function(A){var M=this._arr,E=2*A,C=E+1,D=A;E<M.length&&(D=M[E].priority<M[D].priority?E:D,C<M.length&&(D=M[C].priority<M[D].priority?C:D),D!==A&&(this._swap(A,D),this._heapify(D)))},y.prototype._decrease=function(A){for(var M=this._arr,E=M[A].priority,C;A!==0&&(C=A>>1,!(M[C].priority<E));)this._swap(A,C),A=C},y.prototype._swap=function(A,M){var E=this._arr,C=this._keyIndices,D=E[A],L=E[M];E[A]=L,E[M]=D,C[L.key]=A,C[D.key]=M}},6349:(w,Z,f)=>{"use strict";var g=f(5329);w.exports=E;var y="\0",A="\0",M="";function E(W){this._isDirected=g.has(W,"directed")?W.directed:!0,this._isMultigraph=g.has(W,"multigraph")?W.multigraph:!1,this._isCompound=g.has(W,"compound")?W.compound:!1,this._label=void 0,this._defaultNodeLabelFn=g.constant(void 0),this._defaultEdgeLabelFn=g.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[A]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}E.prototype._nodeCount=0,E.prototype._edgeCount=0,E.prototype.isDirected=function(){return this._isDirected},E.prototype.isMultigraph=function(){return this._isMultigraph},E.prototype.isCompound=function(){return this._isCompound},E.prototype.setGraph=function(W){return this._label=W,this},E.prototype.graph=function(){return this._label},E.prototype.setDefaultNodeLabel=function(W){return g.isFunction(W)||(W=g.constant(W)),this._defaultNodeLabelFn=W,this},E.prototype.nodeCount=function(){return this._nodeCount},E.prototype.nodes=function(){return g.keys(this._nodes)},E.prototype.sources=function(){var W=this;return g.filter(this.nodes(),function(G){return g.isEmpty(W._in[G])})},E.prototype.sinks=function(){var W=this;return g.filter(this.nodes(),function(G){return g.isEmpty(W._out[G])})},E.prototype.setNodes=function(W,G){var ie=arguments,q=this;return g.each(W,function(we){ie.length>1?q.setNode(we,G):q.setNode(we)}),this},E.prototype.setNode=function(W,G){return g.has(this._nodes,W)?(arguments.length>1&&(this._nodes[W]=G),this):(this._nodes[W]=arguments.length>1?G:this._defaultNodeLabelFn(W),this._isCompound&&(this._parent[W]=A,this._children[W]={},this._children[A][W]=!0),this._in[W]={},this._preds[W]={},this._out[W]={},this._sucs[W]={},++this._nodeCount,this)},E.prototype.node=function(W){return this._nodes[W]},E.prototype.hasNode=function(W){return g.has(this._nodes,W)},E.prototype.removeNode=function(W){var G=this;if(g.has(this._nodes,W)){var ie=function(q){G.removeEdge(G._edgeObjs[q])};delete this._nodes[W],this._isCompound&&(this._removeFromParentsChildList(W),delete this._parent[W],g.each(this.children(W),function(q){G.setParent(q)}),delete this._children[W]),g.each(g.keys(this._in[W]),ie),delete this._in[W],delete this._preds[W],g.each(g.keys(this._out[W]),ie),delete this._out[W],delete this._sucs[W],--this._nodeCount}return this},E.prototype.setParent=function(W,G){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(g.isUndefined(G))G=A;else{G+="";for(var ie=G;!g.isUndefined(ie);ie=this.parent(ie))if(ie===W)throw new Error("Setting "+G+" as parent of "+W+" would create a cycle");this.setNode(G)}return this.setNode(W),this._removeFromParentsChildList(W),this._parent[W]=G,this._children[G][W]=!0,this},E.prototype._removeFromParentsChildList=function(W){delete this._children[this._parent[W]][W]},E.prototype.parent=function(W){if(this._isCompound){var G=this._parent[W];if(G!==A)return G}},E.prototype.children=function(W){if(g.isUndefined(W)&&(W=A),this._isCompound){var G=this._children[W];if(G)return g.keys(G)}else{if(W===A)return this.nodes();if(this.hasNode(W))return[]}},E.prototype.predecessors=function(W){var G=this._preds[W];if(G)return g.keys(G)},E.prototype.successors=function(W){var G=this._sucs[W];if(G)return g.keys(G)},E.prototype.neighbors=function(W){var G=this.predecessors(W);if(G)return g.union(G,this.successors(W))},E.prototype.isLeaf=function(W){var G;return this.isDirected()?G=this.successors(W):G=this.neighbors(W),G.length===0},E.prototype.filterNodes=function(W){var G=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});G.setGraph(this.graph());var ie=this;g.each(this._nodes,function(de,fe){W(fe)&&G.setNode(fe,de)}),g.each(this._edgeObjs,function(de){G.hasNode(de.v)&&G.hasNode(de.w)&&G.setEdge(de,ie.edge(de))});var q={};function we(de){var fe=ie.parent(de);return fe===void 0||G.hasNode(fe)?(q[de]=fe,fe):fe in q?q[fe]:we(fe)}return this._isCompound&&g.each(G.nodes(),function(de){G.setParent(de,we(de))}),G},E.prototype.setDefaultEdgeLabel=function(W){return g.isFunction(W)||(W=g.constant(W)),this._defaultEdgeLabelFn=W,this},E.prototype.edgeCount=function(){return this._edgeCount},E.prototype.edges=function(){return g.values(this._edgeObjs)},E.prototype.setPath=function(W,G){var ie=this,q=arguments;return g.reduce(W,function(we,de){return q.length>1?ie.setEdge(we,de,G):ie.setEdge(we,de),de}),this},E.prototype.setEdge=function(){var W,G,ie,q,we=!1,de=arguments[0];typeof de=="object"&&de!==null&&"v"in de?(W=de.v,G=de.w,ie=de.name,arguments.length===2&&(q=arguments[1],we=!0)):(W=de,G=arguments[1],ie=arguments[3],arguments.length>2&&(q=arguments[2],we=!0)),W=""+W,G=""+G,g.isUndefined(ie)||(ie=""+ie);var fe=L(this._isDirected,W,G,ie);if(g.has(this._edgeLabels,fe))return we&&(this._edgeLabels[fe]=q),this;if(!g.isUndefined(ie)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(W),this.setNode(G),this._edgeLabels[fe]=we?q:this._defaultEdgeLabelFn(W,G,ie);var F=O(this._isDirected,W,G,ie);return W=F.v,G=F.w,Object.freeze(F),this._edgeObjs[fe]=F,C(this._preds[G],W),C(this._sucs[W],G),this._in[G][fe]=F,this._out[W][fe]=F,this._edgeCount++,this},E.prototype.edge=function(W,G,ie){var q=arguments.length===1?R(this._isDirected,arguments[0]):L(this._isDirected,W,G,ie);return this._edgeLabels[q]},E.prototype.hasEdge=function(W,G,ie){var q=arguments.length===1?R(this._isDirected,arguments[0]):L(this._isDirected,W,G,ie);return g.has(this._edgeLabels,q)},E.prototype.removeEdge=function(W,G,ie){var q=arguments.length===1?R(this._isDirected,arguments[0]):L(this._isDirected,W,G,ie),we=this._edgeObjs[q];return we&&(W=we.v,G=we.w,delete this._edgeLabels[q],delete this._edgeObjs[q],D(this._preds[G],W),D(this._sucs[W],G),delete this._in[G][q],delete this._out[W][q],this._edgeCount--),this},E.prototype.inEdges=function(W,G){var ie=this._in[W];if(ie){var q=g.values(ie);return G?g.filter(q,function(we){return we.v===G}):q}},E.prototype.outEdges=function(W,G){var ie=this._out[W];if(ie){var q=g.values(ie);return G?g.filter(q,function(we){return we.w===G}):q}},E.prototype.nodeEdges=function(W,G){var ie=this.inEdges(W,G);if(ie)return ie.concat(this.outEdges(W,G))};function C(W,G){W[G]?W[G]++:W[G]=1}function D(W,G){--W[G]||delete W[G]}function L(W,G,ie,q){var we=""+G,de=""+ie;if(!W&&we>de){var fe=we;we=de,de=fe}return we+M+de+M+(g.isUndefined(q)?y:q)}function O(W,G,ie,q){var we=""+G,de=""+ie;if(!W&&we>de){var fe=we;we=de,de=fe}var F={v:we,w:de};return q&&(F.name=q),F}function R(W,G){return L(W,G.v,G.w,G.name)}},9224:(w,Z,f)=>{w.exports={Graph:f(6349),version:f(6544)}},7401:(w,Z,f)=>{var g=f(5329),y=f(6349);w.exports={write:A,read:C};function A(D){var L={options:{directed:D.isDirected(),multigraph:D.isMultigraph(),compound:D.isCompound()},nodes:M(D),edges:E(D)};return g.isUndefined(D.graph())||(L.value=g.clone(D.graph())),L}function M(D){return g.map(D.nodes(),function(L){var O=D.node(L),R=D.parent(L),W={v:L};return g.isUndefined(O)||(W.value=O),g.isUndefined(R)||(W.parent=R),W})}function E(D){return g.map(D.edges(),function(L){var O=D.edge(L),R={v:L.v,w:L.w};return g.isUndefined(L.name)||(R.name=L.name),g.isUndefined(O)||(R.value=O),R})}function C(D){var L=new y(D.options).setGraph(D.value);return g.each(D.nodes,function(O){L.setNode(O.v,O.value),O.parent&&L.setParent(O.v,O.parent)}),g.each(D.edges,function(O){L.setEdge({v:O.v,w:O.w,name:O.name},O.value)}),L}},5329:(w,Z,f)=>{var g;try{g={clone:f(6833),constant:f(3503),each:f(6934),filter:f(4725),has:f(9946),isArray:f(744),isEmpty:f(1627),isFunction:f(9363),isUndefined:f(6513),keys:f(5451),map:f(9924),reduce:f(6473),size:f(617),transform:f(1116),union:f(4065),values:f(1229)}}catch(y){}g||(g=window._),w.exports=g},6544:w=>{w.exports="2.1.8"},8092:function(w,Z){var f,g;/*!
* jQuery JavaScript Library v3.6.0
* https://jquery.com/
*
* Includes Sizzle.js
* https://sizzlejs.com/
*
* Copyright OpenJS Foundation and other contributors
* Released under the MIT license
* https://jquery.org/license
*
* Date: 2021-03-02T17:08Z
*/(function(y,A){"use strict";typeof w.exports=="object"?w.exports=y.document?A(y,!0):function(M){if(!M.document)throw new Error("jQuery requires a window with a document");return A(M)}:A(y)})(typeof window!="undefined"?window:this,function(y,A){"use strict";var M=[],E=Object.getPrototypeOf,C=M.slice,D=M.flat?function(m){return M.flat.call(m)}:function(m){return M.concat.apply([],m)},L=M.push,O=M.indexOf,R={},W=R.toString,G=R.hasOwnProperty,ie=G.toString,q=ie.call(Object),we={},de=function(S){return typeof S=="function"&&typeof S.nodeType!="number"&&typeof S.item!="function"},fe=function(S){return S!=null&&S===S.window},F=y.document,be={type:!0,src:!0,nonce:!0,noModule:!0};function pe(m,S,j){j=j||F;var Y,he,ye=j.createElement("script");if(ye.text=m,S)for(Y in be)he=S[Y]||S.getAttribute&&S.getAttribute(Y),he&&ye.setAttribute(Y,he);j.head.appendChild(ye).parentNode.removeChild(ye)}function ae(m){return m==null?m+"":typeof m=="object"||typeof m=="function"?R[W.call(m)]||"object":typeof m}var Q="3.6.0",I=function(m,S){return new I.fn.init(m,S)};I.fn=I.prototype={jquery:Q,constructor:I,length:0,toArray:function(){return C.call(this)},get:function(m){return m==null?C.call(this):m<0?this[m+this.length]:this[m]},pushStack:function(m){var S=I.merge(this.constructor(),m);return S.prevObject=this,S},each:function(m){return I.each(this,m)},map:function(m){return this.pushStack(I.map(this,function(S,j){return m.call(S,j,S)}))},slice:function(){return this.pushStack(C.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(I.grep(this,function(m,S){return(S+1)%2}))},odd:function(){return this.pushStack(I.grep(this,function(m,S){return S%2}))},eq:function(m){var S=this.length,j=+m+(m<0?S:0);return this.pushStack(j>=0&&j<S?[this[j]]:[])},end:function(){return this.prevObject||this.constructor()},push:L,sort:M.sort,splice:M.splice},I.extend=I.fn.extend=function(){var m,S,j,Y,he,ye,ke=arguments[0]||{},Ve=1,Xe=arguments.length,wt=!1;for(typeof ke=="boolean"&&(wt=ke,ke=arguments[Ve]||{},Ve++),typeof ke!="object"&&!de(ke)&&(ke={}),Ve===Xe&&(ke=this,Ve--);Ve<Xe;Ve++)if((m=arguments[Ve])!=null)for(S in m)Y=m[S],!(S==="__proto__"||ke===Y)&&(wt&&Y&&(I.isPlainObject(Y)||(he=Array.isArray(Y)))?(j=ke[S],he&&!Array.isArray(j)?ye=[]:!he&&!I.isPlainObject(j)?ye={}:ye=j,he=!1,ke[S]=I.extend(wt,ye,Y)):Y!==void 0&&(ke[S]=Y));return ke},I.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(m){throw new Error(m)},noop:function(){},isPlainObject:function(m){var S,j;return!m||W.call(m)!=="[object Object]"?!1:(S=E(m),S?(j=G.call(S,"constructor")&&S.constructor,typeof j=="function"&&ie.call(j)===q):!0)},isEmptyObject:function(m){var S;for(S in m)return!1;return!0},globalEval:function(m,S,j){pe(m,{nonce:S&&S.nonce},j)},each:function(m,S){var j,Y=0;if(oe(m))for(j=m.length;Y<j&&S.call(m[Y],Y,m[Y])!==!1;Y++);else for(Y in m)if(S.call(m[Y],Y,m[Y])===!1)break;return m},makeArray:function(m,S){var j=S||[];return m!=null&&(oe(Object(m))?I.merge(j,typeof m=="string"?[m]:m):L.call(j,m)),j},inArray:function(m,S,j){return S==null?-1:O.call(S,m,j)},merge:function(m,S){for(var j=+S.length,Y=0,he=m.length;Y<j;Y++)m[he++]=S[Y];return m.length=he,m},grep:function(m,S,j){for(var Y,he=[],ye=0,ke=m.length,Ve=!j;ye<ke;ye++)Y=!S(m[ye],ye),Y!==Ve&&he.push(m[ye]);return he},map:function(m,S,j){var Y,he,ye=0,ke=[];if(oe(m))for(Y=m.length;ye<Y;ye++)he=S(m[ye],ye,j),he!=null&&ke.push(he);else for(ye in m)he=S(m[ye],ye,j),he!=null&&ke.push(he);return D(ke)},guid:1,support:we}),typeof Symbol=="function"&&(I.fn[Symbol.iterator]=M[Symbol.iterator]),I.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(m,S){R["[object "+S+"]"]=S.toLowerCase()});function oe(m){var S=!!m&&"length"in m&&m.length,j=ae(m);return de(m)||fe(m)?!1:j==="array"||S===0||typeof S=="number"&&S>0&&S-1 in m}var te=function(m){var S,j,Y,he,ye,ke,Ve,Xe,wt,tn,mn,Xt,Ln,si,ni,Gn,ur,zi,hr,ji="sizzle"+1*new Date,ai=m.document,vr=0,cr=0,ci=ia(),ns=ia(),Gs=ia(),Xr=ia(),Hs=function(Te,Ye){return Te===Ye&&(mn=!0),0},xo={}.hasOwnProperty,Vr=[],Do=Vr.pop,ir=Vr.push,Ts=Vr.push,ba=Vr.slice,dn=function(Te,Ye){for(var ht=0,Vt=Te.length;ht<Vt;ht++)if(Te[ht]===Ye)return ht;return-1},Mt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",oi="[\\x20\\t\\r\\n\\f]",lo="(?:\\\\[\\da-fA-F]{1,6}"+oi+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",na="\\["+oi+"*("+lo+")(?:"+oi+"*([*^$|!~]?=)"+oi+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+lo+"))|)"+oi+"*\\]",gl=":("+lo+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+na+")*)|.*)\\)|)",au=new RegExp(oi+"+","g"),Ms=new RegExp("^"+oi+"+|((?:^|[^\\\\])(?:\\\\.)*)"+oi+"+$","g"),Za=new RegExp("^"+oi+"*,"+oi+"*"),Xa=new RegExp("^"+oi+"*([>+~]|"+oi+")"+oi+"*"),Hu=new RegExp(oi+"|>"),zu=new RegExp(gl),Bo=new RegExp("^"+lo+"$"),Fl={ID:new RegExp("^#("+lo+")"),CLASS:new RegExp("^\\.("+lo+")"),TAG:new RegExp("^("+lo+"|[*])"),ATTR:new RegExp("^"+na),PSEUDO:new RegExp("^"+gl),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+oi+"*(even|odd|(([+-]|)(\\d*)n|)"+oi+"*(?:([+-]|)"+oi+"*(\\d+)|))"+oi+"*\\)|)","i"),bool:new RegExp("^(?:"+Mt+")$","i"),needsContext:new RegExp("^"+oi+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+oi+"*((?:-\\d)?\\d*)"+oi+"*\\)|)(?=[^-]|$)","i")},lu=/HTML$/i,Io=/^(?:input|select|textarea|button)$/i,Wo=/^h\d$/i,_s=/^[^{]+\{\s*\[native \w/,pl=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Bl=/[+~]/,No=new RegExp("\\\\[\\da-fA-F]{1,6}"+oi+"?|\\\\([^\\r\\n\\f])","g"),_r=function(Te,Ye){var ht="0x"+Te.slice(1)-65536;return Ye||(ht<0?String.fromCharCode(ht+65536):String.fromCharCode(ht>>10|55296,ht&1023|56320))},xs=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Kr=function(Te,Ye){return Ye?Te==="\0"?"\uFFFD":Te.slice(0,-1)+"\\"+Te.charCodeAt(Te.length-1).toString(16)+" ":"\\"+Te},qs=function(){Xt()},uu=fi(function(Te){return Te.disabled===!0&&Te.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Ts.apply(Vr=ba.call(ai.childNodes),ai.childNodes),Vr[ai.childNodes.length].nodeType}catch(Te){Ts={apply:Vr.length?function(Ye,ht){ir.apply(Ye,ba.call(ht))}:function(Ye,ht){for(var Vt=Ye.length,It=0;Ye[Vt++]=ht[It++];);Ye.length=Vt-1}}}function Hr(Te,Ye,ht,Vt){var It,cn,rn,Vn,Zn,jn,ri,yi=Ye&&Ye.ownerDocument,Ui=Ye?Ye.nodeType:9;if(ht=ht||[],typeof Te!="string"||!Te||Ui!==1&&Ui!==9&&Ui!==11)return ht;if(!Vt&&(Xt(Ye),Ye=Ye||Ln,ni)){if(Ui!==11&&(Zn=pl.exec(Te)))if(It=Zn[1]){if(Ui===9)if(rn=Ye.getElementById(It)){if(rn.id===It)return ht.push(rn),ht}else return ht;else if(yi&&(rn=yi.getElementById(It))&&hr(Ye,rn)&&rn.id===It)return ht.push(rn),ht}else{if(Zn[2])return Ts.apply(ht,Ye.getElementsByTagName(Te)),ht;if((It=Zn[3])&&j.getElementsByClassName&&Ye.getElementsByClassName)return Ts.apply(ht,Ye.getElementsByClassName(It)),ht}if(j.qsa&&!Xr[Te+" "]&&(!Gn||!Gn.test(Te))&&(Ui!==1||Ye.nodeName.toLowerCase()!=="object")){if(ri=Te,yi=Ye,Ui===1&&(Hu.test(Te)||Xa.test(Te))){for(yi=Bl.test(Te)&&At(Ye.parentNode)||Ye,(yi!==Ye||!j.scope)&&((Vn=Ye.getAttribute("id"))?Vn=Vn.replace(xs,Kr):Ye.setAttribute("id",Vn=ji)),jn=ke(Te),cn=jn.length;cn--;)jn[cn]=(Vn?"#"+Vn:":scope")+" "+sn(jn[cn]);ri=jn.join(",")}try{return Ts.apply(ht,yi.querySelectorAll(ri)),ht}catch(Oi){Xr(Te,!0)}finally{Vn===ji&&Ye.removeAttribute("id")}}}return Xe(Te.replace(Ms,"$1"),Ye,ht,Vt)}function ia(){var Te=[];function Ye(ht,Vt){return Te.push(ht+" ")>Y.cacheLength&&delete Ye[Te.shift()],Ye[ht+" "]=Vt}return Ye}function as(Te){return Te[ji]=!0,Te}function Qs(Te){var Ye=Ln.createElement("fieldset");try{return!!Te(Ye)}catch(ht){return!1}finally{Ye.parentNode&&Ye.parentNode.removeChild(Ye),Ye=null}}function uo(Te,Ye){for(var ht=Te.split("|"),Vt=ht.length;Vt--;)Y.attrHandle[ht[Vt]]=Ye}function Qt(Te,Ye){var ht=Ye&&Te,Vt=ht&&Te.nodeType===1&&Ye.nodeType===1&&Te.sourceIndex-Ye.sourceIndex;if(Vt)return Vt;if(ht){for(;ht=ht.nextSibling;)if(ht===Ye)return-1}return Te?1:-1}function Pn(Te){return function(Ye){var ht=Ye.nodeName.toLowerCase();return ht==="input"&&Ye.type===Te}}function xn(Te){return function(Ye){var ht=Ye.nodeName.toLowerCase();return(ht==="input"||ht==="button")&&Ye.type===Te}}function pi(Te){return function(Ye){return"form"in Ye?Ye.parentNode&&Ye.disabled===!1?"label"in Ye?"label"in Ye.parentNode?Ye.parentNode.disabled===Te:Ye.disabled===Te:Ye.isDisabled===Te||Ye.isDisabled!==!Te&&uu(Ye)===Te:Ye.disabled===Te:"label"in Ye?Ye.disabled===Te:!1}}function Wi(Te){return as(function(Ye){return Ye=+Ye,as(function(ht,Vt){for(var It,cn=Te([],ht.length,Ye),rn=cn.length;rn--;)ht[It=cn[rn]]&&(ht[It]=!(Vt[It]=ht[It]))})})}function At(Te){return Te&&typeof Te.getElementsByTagName!="undefined"&&Te}j=Hr.support={},ye=Hr.isXML=function(Te){var Ye=Te&&Te.namespaceURI,ht=Te&&(Te.ownerDocument||Te).documentElement;return!lu.test(Ye||ht&&ht.nodeName||"HTML")},Xt=Hr.setDocument=function(Te){var Ye,ht,Vt=Te?Te.ownerDocument||Te:ai;return Vt==Ln||Vt.nodeType!==9||!Vt.documentElement||(Ln=Vt,si=Ln.documentElement,ni=!ye(Ln),ai!=Ln&&(ht=Ln.defaultView)&&ht.top!==ht&&(ht.addEventListener?ht.addEventListener("unload",qs,!1):ht.attachEvent&&ht.attachEvent("onunload",qs)),j.scope=Qs(function(It){return si.appendChild(It).appendChild(Ln.createElement("div")),typeof It.querySelectorAll!="undefined"&&!It.querySelectorAll(":scope fieldset div").length}),j.attributes=Qs(function(It){return It.className="i",!It.getAttribute("className")}),j.getElementsByTagName=Qs(function(It){return It.appendChild(Ln.createComment("")),!It.getElementsByTagName("*").length}),j.getElementsByClassName=_s.test(Ln.getElementsByClassName),j.getById=Qs(function(It){return si.appendChild(It).id=ji,!Ln.getElementsByName||!Ln.getElementsByName(ji).length}),j.getById?(Y.filter.ID=function(It){var cn=It.replace(No,_r);return function(rn){return rn.getAttribute("id")===cn}},Y.find.ID=function(It,cn){if(typeof cn.getElementById!="undefined"&&ni){var rn=cn.getElementById(It);return rn?[rn]:[]}}):(Y.filter.ID=function(It){var cn=It.replace(No,_r);return function(rn){var Vn=typeof rn.getAttributeNode!="undefined"&&rn.getAttributeNode("id");return Vn&&Vn.value===cn}},Y.find.ID=function(It,cn){if(typeof cn.getElementById!="undefined"&&ni){var rn,Vn,Zn,jn=cn.getElementById(It);if(jn){if(rn=jn.getAttributeNode("id"),rn&&rn.value===It)return[jn];for(Zn=cn.getElementsByName(It),Vn=0;jn=Zn[Vn++];)if(rn=jn.getAttributeNode("id"),rn&&rn.value===It)return[jn]}return[]}}),Y.find.TAG=j.getElementsByTagName?function(It,cn){if(typeof cn.getElementsByTagName!="undefined")return cn.getElementsByTagName(It);if(j.qsa)return cn.querySelectorAll(It)}:function(It,cn){var rn,Vn=[],Zn=0,jn=cn.getElementsByTagName(It);if(It==="*"){for(;rn=jn[Zn++];)rn.nodeType===1&&Vn.push(rn);return Vn}return jn},Y.find.CLASS=j.getElementsByClassName&&function(It,cn){if(typeof cn.getElementsByClassName!="undefined"&&ni)return cn.getElementsByClassName(It)},ur=[],Gn=[],(j.qsa=_s.test(Ln.querySelectorAll))&&(Qs(function(It){var cn;si.appendChild(It).innerHTML="<a id='"+ji+"'></a><select id='"+ji+"-\r\\' msallowcapture=''><option selected=''></option></select>",It.querySelectorAll("[msallowcapture^='']").length&&Gn.push("[*^$]="+oi+`*(?:''|"")`),It.querySelectorAll("[selected]").length||Gn.push("\\["+oi+"*(?:value|"+Mt+")"),It.querySelectorAll("[id~="+ji+"-]").length||Gn.push("~="),cn=Ln.createElement("input"),cn.setAttribute("name",""),It.appendChild(cn),It.querySelectorAll("[name='']").length||Gn.push("\\["+oi+"*name"+oi+"*="+oi+`*(?:''|"")`),It.querySelectorAll(":checked").length||Gn.push(":checked"),It.querySelectorAll("a#"+ji+"+*").length||Gn.push(".#.+[+~]"),It.querySelectorAll("\\\f"),Gn.push("[\\r\\n\\f]")}),Qs(function(It){It.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var cn=Ln.createElement("input");cn.setAttribute("type","hidden"),It.appendChild(cn).setAttribute("name","D"),It.querySelectorAll("[name=d]").length&&Gn.push("name"+oi+"*[*^$|!~]?="),It.querySelectorAll(":enabled").length!==2&&Gn.push(":enabled",":disabled"),si.appendChild(It).disabled=!0,It.querySelectorAll(":disabled").length!==2&&Gn.push(":enabled",":disabled"),It.querySelectorAll("*,:x"),Gn.push(",.*:")})),(j.matchesSelector=_s.test(zi=si.matches||si.webkitMatchesSelector||si.mozMatchesSelector||si.oMatchesSelector||si.msMatchesSelector))&&Qs(function(It){j.disconnectedMatch=zi.call(It,"*"),zi.call(It,"[s!='']:x"),ur.push("!=",gl)}),Gn=Gn.length&&new RegExp(Gn.join("|")),ur=ur.length&&new RegExp(ur.join("|")),Ye=_s.test(si.compareDocumentPosition),hr=Ye||_s.test(si.contains)?function(It,cn){var rn=It.nodeType===9?It.documentElement:It,Vn=cn&&cn.parentNode;return It===Vn||!!(Vn&&Vn.nodeType===1&&(rn.contains?rn.contains(Vn):It.compareDocumentPosition&&It.compareDocumentPosition(Vn)&16))}:function(It,cn){if(cn){for(;cn=cn.parentNode;)if(cn===It)return!0}return!1},Hs=Ye?function(It,cn){if(It===cn)return mn=!0,0;var rn=!It.compareDocumentPosition-!cn.compareDocumentPosition;return rn||(rn=(It.ownerDocument||It)==(cn.ownerDocument||cn)?It.compareDocumentPosition(cn):1,rn&1||!j.sortDetached&&cn.compareDocumentPosition(It)===rn?It==Ln||It.ownerDocument==ai&&hr(ai,It)?-1:cn==Ln||cn.ownerDocument==ai&&hr(ai,cn)?1:tn?dn(tn,It)-dn(tn,cn):0:rn&4?-1:1)}:function(It,cn){if(It===cn)return mn=!0,0;var rn,Vn=0,Zn=It.parentNode,jn=cn.parentNode,ri=[It],yi=[cn];if(!Zn||!jn)return It==Ln?-1:cn==Ln?1:Zn?-1:jn?1:tn?dn(tn,It)-dn(tn,cn):0;if(Zn===jn)return Qt(It,cn);for(rn=It;rn=rn.parentNode;)ri.unshift(rn);for(rn=cn;rn=rn.parentNode;)yi.unshift(rn);for(;ri[Vn]===yi[Vn];)Vn++;return Vn?Qt(ri[Vn],yi[Vn]):ri[Vn]==ai?-1:yi[Vn]==ai?1:0}),Ln},Hr.matches=function(Te,Ye){return Hr(Te,null,null,Ye)},Hr.matchesSelector=function(Te,Ye){if(Xt(Te),j.matchesSelector&&ni&&!Xr[Ye+" "]&&(!ur||!ur.test(Ye))&&(!Gn||!Gn.test(Ye)))try{var ht=zi.call(Te,Ye);if(ht||j.disconnectedMatch||Te.document&&Te.document.nodeType!==11)return ht}catch(Vt){Xr(Ye,!0)}return Hr(Ye,Ln,null,[Te]).length>0},Hr.contains=function(Te,Ye){return(Te.ownerDocument||Te)!=Ln&&Xt(Te),hr(Te,Ye)},Hr.attr=function(Te,Ye){(Te.ownerDocument||Te)!=Ln&&Xt(Te);var ht=Y.attrHandle[Ye.toLowerCase()],Vt=ht&&xo.call(Y.attrHandle,Ye.toLowerCase())?ht(Te,Ye,!ni):void 0;return Vt!==void 0?Vt:j.attributes||!ni?Te.getAttribute(Ye):(Vt=Te.getAttributeNode(Ye))&&Vt.specified?Vt.value:null},Hr.escape=function(Te){return(Te+"").replace(xs,Kr)},Hr.error=function(Te){throw new Error("Syntax error, unrecognized expression: "+Te)},Hr.uniqueSort=function(Te){var Ye,ht=[],Vt=0,It=0;if(mn=!j.detectDuplicates,tn=!j.sortStable&&Te.slice(0),Te.sort(Hs),mn){for(;Ye=Te[It++];)Ye===Te[It]&&(Vt=ht.push(It));for(;Vt--;)Te.splice(ht[Vt],1)}return tn=null,Te},he=Hr.getText=function(Te){var Ye,ht="",Vt=0,It=Te.nodeType;if(It){if(It===1||It===9||It===11){if(typeof Te.textContent=="string")return Te.textContent;for(Te=Te.firstChild;Te;Te=Te.nextSibling)ht+=he(Te)}else if(It===3||It===4)return Te.nodeValue}else for(;Ye=Te[Vt++];)ht+=he(Ye);return ht},Y=Hr.selectors={cacheLength:50,createPseudo:as,match:Fl,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Te){return Te[1]=Te[1].replace(No,_r),Te[3]=(Te[3]||Te[4]||Te[5]||"").replace(No,_r),Te[2]==="~="&&(Te[3]=" "+Te[3]+" "),Te.slice(0,4)},CHILD:function(Te){return Te[1]=Te[1].toLowerCase(),Te[1].slice(0,3)==="nth"?(Te[3]||Hr.error(Te[0]),Te[4]=+(Te[4]?Te[5]+(Te[6]||1):2*(Te[3]==="even"||Te[3]==="odd")),Te[5]=+(Te[7]+Te[8]||Te[3]==="odd")):Te[3]&&Hr.error(Te[0]),Te},PSEUDO:function(Te){var Ye,ht=!Te[6]&&Te[2];return Fl.CHILD.test(Te[0])?null:(Te[3]?Te[2]=Te[4]||Te[5]||"":ht&&zu.test(ht)&&(Ye=ke(ht,!0))&&(Ye=ht.indexOf(")",ht.length-Ye)-ht.length)&&(Te[0]=Te[0].slice(0,Ye),Te[2]=ht.slice(0,Ye)),Te.slice(0,3))}},filter:{TAG:function(Te){var Ye=Te.replace(No,_r).toLowerCase();return Te==="*"?function(){return!0}:function(ht){return ht.nodeName&&ht.nodeName.toLowerCase()===Ye}},CLASS:function(Te){var Ye=ci[Te+" "];return Ye||(Ye=new RegExp("(^|"+oi+")"+Te+"("+oi+"|$)"))&&ci(Te,function(ht){return Ye.test(typeof ht.className=="string"&&ht.className||typeof ht.getAttribute!="undefined"&&ht.getAttribute("class")||"")})},ATTR:function(Te,Ye,ht){return function(Vt){var It=Hr.attr(Vt,Te);return It==null?Ye==="!=":Ye?(It+="",Ye==="="?It===ht:Ye==="!="?It!==ht:Ye==="^="?ht&&It.indexOf(ht)===0:Ye==="*="?ht&&It.indexOf(ht)>-1:Ye==="$="?ht&&It.slice(-ht.length)===ht:Ye==="~="?(" "+It.replace(au," ")+" ").indexOf(ht)>-1:Ye==="|="?It===ht||It.slice(0,ht.length+1)===ht+"-":!1):!0}},CHILD:function(Te,Ye,ht,Vt,It){var cn=Te.slice(0,3)!=="nth",rn=Te.slice(-4)!=="last",Vn=Ye==="of-type";return Vt===1&&It===0?function(Zn){return!!Zn.parentNode}:function(Zn,jn,ri){var yi,Ui,Oi,Ni,Dr,zr,Ds=cn!==rn?"nextSibling":"previousSibling",kr=Zn.parentNode,ml=Vn&&Zn.nodeName.toLowerCase(),Wl=!ri&&!Vn,Vo=!1;if(kr){if(cn){for(;Ds;){for(Ni=Zn;Ni=Ni[Ds];)if(Vn?Ni.nodeName.toLowerCase()===ml:Ni.nodeType===1)return!1;zr=Ds=Te==="only"&&!zr&&"nextSibling"}return!0}if(zr=[rn?kr.firstChild:kr.lastChild],rn&&Wl){for(Ni=kr,Oi=Ni[ji]||(Ni[ji]={}),Ui=Oi[Ni.uniqueID]||(Oi[Ni.uniqueID]={}),yi=Ui[Te]||[],Dr=yi[0]===vr&&yi[1],Vo=Dr&&yi[2],Ni=Dr&&kr.childNodes[Dr];Ni=++Dr&&Ni&&Ni[Ds]||(Vo=Dr=0)||zr.pop();)if(Ni.nodeType===1&&++Vo&&Ni===Zn){Ui[Te]=[vr,Dr,Vo];break}}else if(Wl&&(Ni=Zn,Oi=Ni[ji]||(Ni[ji]={}),Ui=Oi[Ni.uniqueID]||(Oi[Ni.uniqueID]={}),yi=Ui[Te]||[],Dr=yi[0]===vr&&yi[1],Vo=Dr),Vo===!1)for(;(Ni=++Dr&&Ni&&Ni[Ds]||(Vo=Dr=0)||zr.pop())&&!((Vn?Ni.nodeName.toLowerCase()===ml:Ni.nodeType===1)&&++Vo&&(Wl&&(Oi=Ni[ji]||(Ni[ji]={}),Ui=Oi[Ni.uniqueID]||(Oi[Ni.uniqueID]={}),Ui[Te]=[vr,Vo]),Ni===Zn)););return Vo-=It,Vo===Vt||Vo%Vt==0&&Vo/Vt>=0}}},PSEUDO:function(Te,Ye){var ht,Vt=Y.pseudos[Te]||Y.setFilters[Te.toLowerCase()]||Hr.error("unsupported pseudo: "+Te);return Vt[ji]?Vt(Ye):Vt.length>1?(ht=[Te,Te,"",Ye],Y.setFilters.hasOwnProperty(Te.toLowerCase())?as(function(It,cn){for(var rn,Vn=Vt(It,Ye),Zn=Vn.length;Zn--;)rn=dn(It,Vn[Zn]),It[rn]=!(cn[rn]=Vn[Zn])}):function(It){return Vt(It,0,ht)}):Vt}},pseudos:{not:as(function(Te){var Ye=[],ht=[],Vt=Ve(Te.replace(Ms,"$1"));return Vt[ji]?as(function(It,cn,rn,Vn){for(var Zn,jn=Vt(It,null,Vn,[]),ri=It.length;ri--;)(Zn=jn[ri])&&(It[ri]=!(cn[ri]=Zn))}):function(It,cn,rn){return Ye[0]=It,Vt(Ye,null,rn,ht),Ye[0]=null,!ht.pop()}}),has:as(function(Te){return function(Ye){return Hr(Te,Ye).length>0}}),contains:as(function(Te){return Te=Te.replace(No,_r),function(Ye){return(Ye.textContent||he(Ye)).indexOf(Te)>-1}}),lang:as(function(Te){return Bo.test(Te||"")||Hr.error("unsupported lang: "+Te),Te=Te.replace(No,_r).toLowerCase(),function(Ye){var ht;do if(ht=ni?Ye.lang:Ye.getAttribute("xml:lang")||Ye.getAttribute("lang"))return ht=ht.toLowerCase(),ht===Te||ht.indexOf(Te+"-")===0;while((Ye=Ye.parentNode)&&Ye.nodeType===1);return!1}}),target:function(Te){var Ye=m.location&&m.location.hash;return Ye&&Ye.slice(1)===Te.id},root:function(Te){return Te===si},focus:function(Te){return Te===Ln.activeElement&&(!Ln.hasFocus||Ln.hasFocus())&&!!(Te.type||Te.href||~Te.tabIndex)},enabled:pi(!1),disabled:pi(!0),checked:function(Te){var Ye=Te.nodeName.toLowerCase();return Ye==="input"&&!!Te.checked||Ye==="option"&&!!Te.selected},selected:function(Te){return Te.parentNode&&Te.parentNode.selectedIndex,Te.selected===!0},empty:function(Te){for(Te=Te.firstChild;Te;Te=Te.nextSibling)if(Te.nodeType<6)return!1;return!0},parent:function(Te){return!Y.pseudos.empty(Te)},header:function(Te){return Wo.test(Te.nodeName)},input:function(Te){return Io.test(Te.nodeName)},button:function(Te){var Ye=Te.nodeName.toLowerCase();return Ye==="input"&&Te.type==="button"||Ye==="button"},text:function(Te){var Ye;return Te.nodeName.toLowerCase()==="input"&&Te.type==="text"&&((Ye=Te.getAttribute("type"))==null||Ye.toLowerCase()==="text")},first:Wi(function(){return[0]}),last:Wi(function(Te,Ye){return[Ye-1]}),eq:Wi(function(Te,Ye,ht){return[ht<0?ht+Ye:ht]}),even:Wi(function(Te,Ye){for(var ht=0;ht<Ye;ht+=2)Te.push(ht);return Te}),odd:Wi(function(Te,Ye){for(var ht=1;ht<Ye;ht+=2)Te.push(ht);return Te}),lt:Wi(function(Te,Ye,ht){for(var Vt=ht<0?ht+Ye:ht>Ye?Ye:ht;--Vt>=0;)Te.push(Vt);return Te}),gt:Wi(function(Te,Ye,ht){for(var Vt=ht<0?ht+Ye:ht;++Vt<Ye;)Te.push(Vt);return Te})}},Y.pseudos.nth=Y.pseudos.eq;for(S in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Y.pseudos[S]=Pn(S);for(S in{submit:!0,reset:!0})Y.pseudos[S]=xn(S);function bn(){}bn.prototype=Y.filters=Y.pseudos,Y.setFilters=new bn,ke=Hr.tokenize=function(Te,Ye){var ht,Vt,It,cn,rn,Vn,Zn,jn=ns[Te+" "];if(jn)return Ye?0:jn.slice(0);for(rn=Te,Vn=[],Zn=Y.preFilter;rn;){(!ht||(Vt=Za.exec(rn)))&&(Vt&&(rn=rn.slice(Vt[0].length)||rn),Vn.push(It=[])),ht=!1,(Vt=Xa.exec(rn))&&(ht=Vt.shift(),It.push({value:ht,type:Vt[0].replace(Ms," ")}),rn=rn.slice(ht.length));for(cn in Y.filter)(Vt=Fl[cn].exec(rn))&&(!Zn[cn]||(Vt=Zn[cn](Vt)))&&(ht=Vt.shift(),It.push({value:ht,type:cn,matches:Vt}),rn=rn.slice(ht.length));if(!ht)break}return Ye?rn.length:rn?Hr.error(Te):ns(Te,Vn).slice(0)};function sn(Te){for(var Ye=0,ht=Te.length,Vt="";Ye<ht;Ye++)Vt+=Te[Ye].value;return Vt}function fi(Te,Ye,ht){var Vt=Ye.dir,It=Ye.next,cn=It||Vt,rn=ht&&cn==="parentNode",Vn=cr++;return Ye.first?function(Zn,jn,ri){for(;Zn=Zn[Vt];)if(Zn.nodeType===1||rn)return Te(Zn,jn,ri);return!1}:function(Zn,jn,ri){var yi,Ui,Oi,Ni=[vr,Vn];if(ri){for(;Zn=Zn[Vt];)if((Zn.nodeType===1||rn)&&Te(Zn,jn,ri))return!0}else for(;Zn=Zn[Vt];)if(Zn.nodeType===1||rn)if(Oi=Zn[ji]||(Zn[ji]={}),Ui=Oi[Zn.uniqueID]||(Oi[Zn.uniqueID]={}),It&&It===Zn.nodeName.toLowerCase())Zn=Zn[Vt]||Zn;else{if((yi=Ui[cn])&&yi[0]===vr&&yi[1]===Vn)return Ni[2]=yi[2];if(Ui[cn]=Ni,Ni[2]=Te(Zn,jn,ri))return!0}return!1}}function Ji(Te){return Te.length>1?function(Ye,ht,Vt){for(var It=Te.length;It--;)if(!Te[It](Ye,ht,Vt))return!1;return!0}:Te[0]}function Ke(Te,Ye,ht){for(var Vt=0,It=Ye.length;Vt<It;Vt++)Hr(Te,Ye[Vt],ht);return ht}function bt(Te,Ye,ht,Vt,It){for(var cn,rn=[],Vn=0,Zn=Te.length,jn=Ye!=null;Vn<Zn;Vn++)(cn=Te[Vn])&&(!ht||ht(cn,Vt,It))&&(rn.push(cn),jn&&Ye.push(Vn));return rn}function xt(Te,Ye,ht,Vt,It,cn){return Vt&&!Vt[ji]&&(Vt=xt(Vt)),It&&!It[ji]&&(It=xt(It,cn)),as(function(rn,Vn,Zn,jn){var ri,yi,Ui,Oi=[],Ni=[],Dr=Vn.length,zr=rn||Ke(Ye||"*",Zn.nodeType?[Zn]:Zn,[]),Ds=Te&&(rn||!Ye)?bt(zr,Oi,Te,Zn,jn):zr,kr=ht?It||(rn?Te:Dr||Vt)?[]:Vn:Ds;if(ht&&ht(Ds,kr,Zn,jn),Vt)for(ri=bt(kr,Ni),Vt(ri,[],Zn,jn),yi=ri.length;yi--;)(Ui=ri[yi])&&(kr[Ni[yi]]=!(Ds[Ni[yi]]=Ui));if(rn){if(It||Te){if(It){for(ri=[],yi=kr.length;yi--;)(Ui=kr[yi])&&ri.push(Ds[yi]=Ui);It(null,kr=[],ri,jn)}for(yi=kr.length;yi--;)(Ui=kr[yi])&&(ri=It?dn(rn,Ui):Oi[yi])>-1&&(rn[ri]=!(Vn[ri]=Ui))}}else kr=bt(kr===Vn?kr.splice(Dr,kr.length):kr),It?It(null,Vn,kr,jn):Ts.apply(Vn,kr)})}function Dn(Te){for(var Ye,ht,Vt,It=Te.length,cn=Y.relative[Te[0].type],rn=cn||Y.relative[" "],Vn=cn?1:0,Zn=fi(function(yi){return yi===Ye},rn,!0),jn=fi(function(yi){return dn(Ye,yi)>-1},rn,!0),ri=[function(yi,Ui,Oi){var Ni=!cn&&(Oi||Ui!==wt)||((Ye=Ui).nodeType?Zn(yi,Ui,Oi):jn(yi,Ui,Oi));return Ye=null,Ni}];Vn<It;Vn++)if(ht=Y.relative[Te[Vn].type])ri=[fi(Ji(ri),ht)];else{if(ht=Y.filter[Te[Vn].type].apply(null,Te[Vn].matches),ht[ji]){for(Vt=++Vn;Vt<It&&!Y.relative[Te[Vt].type];Vt++);return xt(Vn>1&&Ji(ri),Vn>1&&sn(Te.slice(0,Vn-1).concat({value:Te[Vn-2].type===" "?"*":""})).replace(Ms,"$1"),ht,Vn<Vt&&Dn(Te.slice(Vn,Vt)),Vt<It&&Dn(Te=Te.slice(Vt)),Vt<It&&sn(Te))}ri.push(ht)}return Ji(ri)}function on(Te,Ye){var ht=Ye.length>0,Vt=Te.length>0,It=function(cn,rn,Vn,Zn,jn){var ri,yi,Ui,Oi=0,Ni="0",Dr=cn&&[],zr=[],Ds=wt,kr=cn||Vt&&Y.find.TAG("*",jn),ml=vr+=Ds==null?1:Math.random()||.1,Wl=kr.length;for(jn&&(wt=rn==Ln||rn||jn);Ni!==Wl&&(ri=kr[Ni])!=null;Ni++){if(Vt&&ri){for(yi=0,!rn&&ri.ownerDocument!=Ln&&(Xt(ri),Vn=!ni);Ui=Te[yi++];)if(Ui(ri,rn||Ln,Vn)){Zn.push(ri);break}jn&&(vr=ml)}ht&&((ri=!Ui&&ri)&&Oi--,cn&&Dr.push(ri))}if(Oi+=Ni,ht&&Ni!==Oi){for(yi=0;Ui=Ye[yi++];)Ui(Dr,zr,rn,Vn);if(cn){if(Oi>0)for(;Ni--;)Dr[Ni]||zr[Ni]||(zr[Ni]=Do.call(Zn));zr=bt(zr)}Ts.apply(Zn,zr),jn&&!cn&&zr.length>0&&Oi+Ye.length>1&&Hr.uniqueSort(Zn)}return jn&&(vr=ml,wt=Ds),Dr};return ht?as(It):It}return Ve=Hr.compile=function(Te,Ye){var ht,Vt=[],It=[],cn=Gs[Te+" "];if(!cn){for(Ye||(Ye=ke(Te)),ht=Ye.length;ht--;)cn=Dn(Ye[ht]),cn[ji]?Vt.push(cn):It.push(cn);cn=Gs(Te,on(It,Vt)),cn.selector=Te}return cn},Xe=Hr.select=function(Te,Ye,ht,Vt){var It,cn,rn,Vn,Zn,jn=typeof Te=="function"&&Te,ri=!Vt&&ke(Te=jn.selector||Te);if(ht=ht||[],ri.length===1){if(cn=ri[0]=ri[0].slice(0),cn.length>2&&(rn=cn[0]).type==="ID"&&Ye.nodeType===9&&ni&&Y.relative[cn[1].type]){if(Ye=(Y.find.ID(rn.matches[0].replace(No,_r),Ye)||[])[0],Ye)jn&&(Ye=Ye.parentNode);else return ht;Te=Te.slice(cn.shift().value.length)}for(It=Fl.needsContext.test(Te)?0:cn.length;It--&&(rn=cn[It],!Y.relative[Vn=rn.type]);)if((Zn=Y.find[Vn])&&(Vt=Zn(rn.matches[0].replace(No,_r),Bl.test(cn[0].type)&&At(Ye.parentNode)||Ye))){if(cn.splice(It,1),Te=Vt.length&&sn(cn),!Te)return Ts.apply(ht,Vt),ht;break}}return(jn||Ve(Te,ri))(Vt,Ye,!ni,ht,!Ye||Bl.test(Te)&&At(Ye.parentNode)||Ye),ht},j.sortStable=ji.split("").sort(Hs).join("")===ji,j.detectDuplicates=!!mn,Xt(),j.sortDetached=Qs(function(Te){return Te.compareDocumentPosition(Ln.createElement("fieldset"))&1}),Qs(function(Te){return Te.innerHTML="<a href='#'></a>",Te.firstChild.getAttribute("href")==="#"})||uo("type|href|height|width",function(Te,Ye,ht){if(!ht)return Te.getAttribute(Ye,Ye.toLowerCase()==="type"?1:2)}),(!j.attributes||!Qs(function(Te){return Te.innerHTML="<input/>",Te.firstChild.setAttribute("value",""),Te.firstChild.getAttribute("value")===""}))&&uo("value",function(Te,Ye,ht){if(!ht&&Te.nodeName.toLowerCase()==="input")return Te.defaultValue}),Qs(function(Te){return Te.getAttribute("disabled")==null})||uo(Mt,function(Te,Ye,ht){var Vt;if(!ht)return Te[Ye]===!0?Ye.toLowerCase():(Vt=Te.getAttributeNode(Ye))&&Vt.specified?Vt.value:null}),Hr}(y);I.find=te,I.expr=te.selectors,I.expr[":"]=I.expr.pseudos,I.uniqueSort=I.unique=te.uniqueSort,I.text=te.getText,I.isXMLDoc=te.isXML,I.contains=te.contains,I.escapeSelector=te.escape;var ue=function(m,S,j){for(var Y=[],he=j!==void 0;(m=m[S])&&m.nodeType!==9;)if(m.nodeType===1){if(he&&I(m).is(j))break;Y.push(m)}return Y},De=function(m,S){for(var j=[];m;m=m.nextSibling)m.nodeType===1&&m!==S&&j.push(m);return j},ve=I.expr.match.needsContext;function Ne(m,S){return m.nodeName&&m.nodeName.toLowerCase()===S.toLowerCase()}var Ge=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function $e(m,S,j){return de(S)?I.grep(m,function(Y,he){return!!S.call(Y,he,Y)!==j}):S.nodeType?I.grep(m,function(Y){return Y===S!==j}):typeof S!="string"?I.grep(m,function(Y){return O.call(S,Y)>-1!==j}):I.filter(S,m,j)}I.filter=function(m,S,j){var Y=S[0];return j&&(m=":not("+m+")"),S.length===1&&Y.nodeType===1?I.find.matchesSelector(Y,m)?[Y]:[]:I.find.matches(m,I.grep(S,function(he){return he.nodeType===1}))},I.fn.extend({find:function(m){var S,j,Y=this.length,he=this;if(typeof m!="string")return this.pushStack(I(m).filter(function(){for(S=0;S<Y;S++)if(I.contains(he[S],this))return!0}));for(j=this.pushStack([]),S=0;S<Y;S++)I.find(m,he[S],j);return Y>1?I.uniqueSort(j):j},filter:function(m){return this.pushStack($e(this,m||[],!1))},not:function(m){return this.pushStack($e(this,m||[],!0))},is:function(m){return!!$e(this,typeof m=="string"&&ve.test(m)?I(m):m||[],!1).length}});var Be,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ot=I.fn.init=function(m,S,j){var Y,he;if(!m)return this;if(j=j||Be,typeof m=="string")if(m[0]==="<"&&m[m.length-1]===">"&&m.length>=3?Y=[null,m,null]:Y=mt.exec(m),Y&&(Y[1]||!S))if(Y[1]){if(S=S instanceof I?S[0]:S,I.merge(this,I.parseHTML(Y[1],S&&S.nodeType?S.ownerDocument||S:F,!0)),Ge.test(Y[1])&&I.isPlainObject(S))for(Y in S)de(this[Y])?this[Y](S[Y]):this.attr(Y,S[Y]);return this}else return he=F.getElementById(Y[2]),he&&(this[0]=he,this.length=1),this;else return!S||S.jquery?(S||j).find(m):this.constructor(S).find(m);else{if(m.nodeType)return this[0]=m,this.length=1,this;if(de(m))return j.ready!==void 0?j.ready(m):m(I)}return I.makeArray(m,this)};Ot.prototype=I.fn,Be=I(F);var kt=/^(?:parents|prev(?:Until|All))/,Tt={children:!0,contents:!0,next:!0,prev:!0};I.fn.extend({has:function(m){var S=I(m,this),j=S.length;return this.filter(function(){for(var Y=0;Y<j;Y++)if(I.contains(this,S[Y]))return!0})},closest:function(m,S){var j,Y=0,he=this.length,ye=[],ke=typeof m!="string"&&I(m);if(!ve.test(m)){for(;Y<he;Y++)for(j=this[Y];j&&j!==S;j=j.parentNode)if(j.nodeType<11&&(ke?ke.index(j)>-1:j.nodeType===1&&I.find.matchesSelector(j,m))){ye.push(j);break}}return this.pushStack(ye.length>1?I.uniqueSort(ye):ye)},index:function(m){return m?typeof m=="string"?O.call(I(m),this[0]):O.call(this,m.jquery?m[0]:m):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(m,S){return this.pushStack(I.uniqueSort(I.merge(this.get(),I(m,S))))},addBack:function(m){return this.add(m==null?this.prevObject:this.prevObject.filter(m))}});function Jt(m,S){for(;(m=m[S])&&m.nodeType!==1;);return m}I.each({parent:function(m){var S=m.parentNode;return S&&S.nodeType!==11?S:null},parents:function(m){return ue(m,"parentNode")},parentsUntil:function(m,S,j){return ue(m,"parentNode",j)},next:function(m){return Jt(m,"nextSibling")},prev:function(m){return Jt(m,"previousSibling")},nextAll:function(m){return ue(m,"nextSibling")},prevAll:function(m){return ue(m,"previousSibling")},nextUntil:function(m,S,j){return ue(m,"nextSibling",j)},prevUntil:function(m,S,j){return ue(m,"previousSibling",j)},siblings:function(m){return De((m.parentNode||{}).firstChild,m)},children:function(m){return De(m.firstChild)},contents:function(m){return m.contentDocument!=null&&E(m.contentDocument)?m.contentDocument:(Ne(m,"template")&&(m=m.content||m),I.merge([],m.childNodes))}},function(m,S){I.fn[m]=function(j,Y){var he=I.map(this,S,j);return m.slice(-5)!=="Until"&&(Y=j),Y&&typeof Y=="string"&&(he=I.filter(Y,he)),this.length>1&&(Tt[m]||I.uniqueSort(he),kt.test(m)&&he.reverse()),this.pushStack(he)}});var Mn=/[^\x20\t\r\n\f]+/g;function Yt(m){var S={};return I.each(m.match(Mn)||[],function(j,Y){S[Y]=!0}),S}I.Callbacks=function(m){m=typeof m=="string"?Yt(m):I.extend({},m);var S,j,Y,he,ye=[],ke=[],Ve=-1,Xe=function(){for(he=he||m.once,Y=S=!0;ke.length;Ve=-1)for(j=ke.shift();++Ve<ye.length;)ye[Ve].apply(j[0],j[1])===!1&&m.stopOnFalse&&(Ve=ye.length,j=!1);m.memory||(j=!1),S=!1,he&&(j?ye=[]:ye="")},wt={add:function(){return ye&&(j&&!S&&(Ve=ye.length-1,ke.push(j)),function tn(mn){I.each(mn,function(Xt,Ln){de(Ln)?(!m.unique||!wt.has(Ln))&&ye.push(Ln):Ln&&Ln.length&&ae(Ln)!=="string"&&tn(Ln)})}(arguments),j&&!S&&Xe()),this},remove:function(){return I.each(arguments,function(tn,mn){for(var Xt;(Xt=I.inArray(mn,ye,Xt))>-1;)ye.splice(Xt,1),Xt<=Ve&&Ve--}),this},has:function(tn){return tn?I.inArray(tn,ye)>-1:ye.length>0},empty:function(){return ye&&(ye=[]),this},disable:function(){return he=ke=[],ye=j="",this},disabled:function(){return!ye},lock:function(){return he=ke=[],!j&&!S&&(ye=j=""),this},locked:function(){return!!he},fireWith:function(tn,mn){return he||(mn=mn||[],mn=[tn,mn.slice?mn.slice():mn],ke.push(mn),S||Xe()),this},fire:function(){return wt.fireWith(this,arguments),this},fired:function(){return!!Y}};return wt};function pn(m){return m}function gt(m){throw m}function _t(m,S,j,Y){var he;try{m&&de(he=m.promise)?he.call(m).done(S).fail(j):m&&de(he=m.then)?he.call(m,S,j):S.apply(void 0,[m].slice(Y))}catch(ye){j.apply(void 0,[ye])}}I.extend({Deferred:function(m){var S=[["notify","progress",I.Callbacks("memory"),I.Callbacks("memory"),2],["resolve","done",I.Callbacks("once memory"),I.Callbacks("once memory"),0,"resolved"],["reject","fail",I.Callbacks("once memory"),I.Callbacks("once memory"),1,"rejected"]],j="pending",Y={state:function(){return j},always:function(){return he.done(arguments).fail(arguments),this},catch:function(ye){return Y.then(null,ye)},pipe:function(){var ye=arguments;return I.Deferred(function(ke){I.each(S,function(Ve,Xe){var wt=de(ye[Xe[4]])&&ye[Xe[4]];he[Xe[1]](function(){var tn=wt&&wt.apply(this,arguments);tn&&de(tn.promise)?tn.promise().progress(ke.notify).done(ke.resolve).fail(ke.reject):ke[Xe[0]+"With"](this,wt?[tn]:arguments)})}),ye=null}).promise()},then:function(ye,ke,Ve){var Xe=0;function wt(tn,mn,Xt,Ln){return function(){var si=this,ni=arguments,Gn=function(){var zi,hr;if(!(tn<Xe)){if(zi=Xt.apply(si,ni),zi===mn.promise())throw new TypeError("Thenable self-resolution");hr=zi&&(typeof zi=="object"||typeof zi=="function")&&zi.then,de(hr)?Ln?hr.call(zi,wt(Xe,mn,pn,Ln),wt(Xe,mn,gt,Ln)):(Xe++,hr.call(zi,wt(Xe,mn,pn,Ln),wt(Xe,mn,gt,Ln),wt(Xe,mn,pn,mn.notifyWith))):(Xt!==pn&&(si=void 0,ni=[zi]),(Ln||mn.resolveWith)(si,ni))}},ur=Ln?Gn:function(){try{Gn()}catch(zi){I.Deferred.exceptionHook&&I.Deferred.exceptionHook(zi,ur.stackTrace),tn+1>=Xe&&(Xt!==gt&&(si=void 0,ni=[zi]),mn.rejectWith(si,ni))}};tn?ur():(I.Deferred.getStackHook&&(ur.stackTrace=I.Deferred.getStackHook()),y.setTimeout(ur))}}return I.Deferred(function(tn){S[0][3].add(wt(0,tn,de(Ve)?Ve:pn,tn.notifyWith)),S[1][3].add(wt(0,tn,de(ye)?ye:pn)),S[2][3].add(wt(0,tn,de(ke)?ke:gt))}).promise()},promise:function(ye){return ye!=null?I.extend(ye,Y):Y}},he={};return I.each(S,function(ye,ke){var Ve=ke[2],Xe=ke[5];Y[ke[1]]=Ve.add,Xe&&Ve.add(function(){j=Xe},S[3-ye][2].disable,S[3-ye][3].disable,S[0][2].lock,S[0][3].lock),Ve.add(ke[3].fire),he[ke[0]]=function(){return he[ke[0]+"With"](this===he?void 0:this,arguments),this},he[ke[0]+"With"]=Ve.fireWith}),Y.promise(he),m&&m.call(he,he),he},when:function(m){var S=arguments.length,j=S,Y=Array(j),he=C.call(arguments),ye=I.Deferred(),ke=function(Ve){return function(Xe){Y[Ve]=this,he[Ve]=arguments.length>1?C.call(arguments):Xe,--S||ye.resolveWith(Y,he)}};if(S<=1&&(_t(m,ye.done(ke(j)).resolve,ye.reject,!S),ye.state()==="pending"||de(he[j]&&he[j].then)))return ye.then();for(;j--;)_t(he[j],ke(j),ye.reject);return ye.promise()}});var Gt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;I.Deferred.exceptionHook=function(m,S){y.console&&y.console.warn&&m&&Gt.test(m.name)&&y.console.warn("jQuery.Deferred exception: "+m.message,m.stack,S)},I.readyException=function(m){y.setTimeout(function(){throw m})};var Ft=I.Deferred();I.fn.ready=function(m){return Ft.then(m).catch(function(S){I.readyException(S)}),this},I.extend({isReady:!1,readyWait:1,ready:function(m){(m===!0?--I.readyWait:I.isReady)||(I.isReady=!0,!(m!==!0&&--I.readyWait>0)&&Ft.resolveWith(F,[I]))}}),I.ready.then=Ft.then;function zt(){F.removeEventListener("DOMContentLoaded",zt),y.removeEventListener("load",zt),I.ready()}F.readyState==="complete"||F.readyState!=="loading"&&!F.documentElement.doScroll?y.setTimeout(I.ready):(F.addEventListener("DOMContentLoaded",zt),y.addEventListener("load",zt));var en=function(m,S,j,Y,he,ye,ke){var Ve=0,Xe=m.length,wt=j==null;if(ae(j)==="object"){he=!0;for(Ve in j)en(m,S,Ve,j[Ve],!0,ye,ke)}else if(Y!==void 0&&(he=!0,de(Y)||(ke=!0),wt&&(ke?(S.call(m,Y),S=null):(wt=S,S=function(tn,mn,Xt){return wt.call(I(tn),Xt)})),S))for(;Ve<Xe;Ve++)S(m[Ve],j,ke?Y:Y.call(m[Ve],Ve,S(m[Ve],j)));return he?m:wt?S.call(m):Xe?S(m[0],j):ye},Bt=/^-ms-/,an=/-([a-z])/g;function Di(m,S){return S.toUpperCase()}function _i(m){return m.replace(Bt,"ms-").replace(an,Di)}var wi=function(m){return m.nodeType===1||m.nodeType===9||!+m.nodeType};function On(){this.expando=I.expando+On.uid++}On.uid=1,On.prototype={cache:function(m){var S=m[this.expando];return S||(S={},wi(m)&&(m.nodeType?m[this.expando]=S:Object.defineProperty(m,this.expando,{value:S,configurable:!0}))),S},set:function(m,S,j){var Y,he=this.cache(m);if(typeof S=="string")he[_i(S)]=j;else for(Y in S)he[_i(Y)]=S[Y];return he},get:function(m,S){return S===void 0?this.cache(m):m[this.expando]&&m[this.expando][_i(S)]},access:function(m,S,j){return S===void 0||S&&typeof S=="string"&&j===void 0?this.get(m,S):(this.set(m,S,j),j!==void 0?j:S)},remove:function(m,S){var j,Y=m[this.expando];if(Y!==void 0){if(S!==void 0)for(Array.isArray(S)?S=S.map(_i):(S=_i(S),S=S in Y?[S]:S.match(Mn)||[]),j=S.length;j--;)delete Y[S[j]];(S===void 0||I.isEmptyObject(Y))&&(m.nodeType?m[this.expando]=void 0:delete m[this.expando])}},hasData:function(m){var S=m[this.expando];return S!==void 0&&!I.isEmptyObject(S)}};var Pt=new On,et=new On,Ci=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,li=/[A-Z]/g;function kn(m){return m==="true"?!0:m==="false"?!1:m==="null"?null:m===+m+""?+m:Ci.test(m)?JSON.parse(m):m}function Ae(m,S,j){var Y;if(j===void 0&&m.nodeType===1)if(Y="data-"+S.replace(li,"-$&").toLowerCase(),j=m.getAttribute(Y),typeof j=="string"){try{j=kn(j)}catch(he){}et.set(m,S,j)}else j=void 0;return j}I.extend({hasData:function(m){return et.hasData(m)||Pt.hasData(m)},data:function(m,S,j){return et.access(m,S,j)},removeData:function(m,S){et.remove(m,S)},_data:function(m,S,j){return Pt.access(m,S,j)},_removeData:function(m,S){Pt.remove(m,S)}}),I.fn.extend({data:function(m,S){var j,Y,he,ye=this[0],ke=ye&&ye.attributes;if(m===void 0){if(this.length&&(he=et.get(ye),ye.nodeType===1&&!Pt.get(ye,"hasDataAttrs"))){for(j=ke.length;j--;)ke[j]&&(Y=ke[j].name,Y.indexOf("data-")===0&&(Y=_i(Y.slice(5)),Ae(ye,Y,he[Y])));Pt.set(ye,"hasDataAttrs",!0)}return he}return typeof m=="object"?this.each(function(){et.set(this,m)}):en(this,function(Ve){var Xe;if(ye&&Ve===void 0)return Xe=et.get(ye,m),Xe!==void 0||(Xe=Ae(ye,m),Xe!==void 0)?Xe:void 0;this.each(function(){et.set(this,m,Ve)})},null,S,arguments.length>1,null,!0)},removeData:function(m){return this.each(function(){et.remove(this,m)})}}),I.extend({queue:function(m,S,j){var Y;if(m)return S=(S||"fx")+"queue",Y=Pt.get(m,S),j&&(!Y||Array.isArray(j)?Y=Pt.access(m,S,I.makeArray(j)):Y.push(j)),Y||[]},dequeue:function(m,S){S=S||"fx";var j=I.queue(m,S),Y=j.length,he=j.shift(),ye=I._queueHooks(m,S),ke=function(){I.dequeue(m,S)};he==="inprogress"&&(he=j.shift(),Y--),he&&(S==="fx"&&j.unshift("inprogress"),delete ye.stop,he.call(m,ke,ye)),!Y&&ye&&ye.empty.fire()},_queueHooks:function(m,S){var j=S+"queueHooks";return Pt.get(m,j)||Pt.access(m,j,{empty:I.Callbacks("once memory").add(function(){Pt.remove(m,[S+"queue",j])})})}}),I.fn.extend({queue:function(m,S){var j=2;return typeof m!="string"&&(S=m,m="fx",j--),arguments.length<j?I.queue(this[0],m):S===void 0?this:this.each(function(){var Y=I.queue(this,m,S);I._queueHooks(this,m),m==="fx"&&Y[0]!=="inprogress"&&I.dequeue(this,m)})},dequeue:function(m){return this.each(function(){I.dequeue(this,m)})},clearQueue:function(m){return this.queue(m||"fx",[])},promise:function(m,S){var j,Y=1,he=I.Deferred(),ye=this,ke=this.length,Ve=function(){--Y||he.resolveWith(ye,[ye])};for(typeof m!="string"&&(S=m,m=void 0),m=m||"fx";ke--;)j=Pt.get(ye[ke],m+"queueHooks"),j&&j.empty&&(Y++,j.empty.add(Ve));return Ve(),he.promise(S)}});var le=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+le+")([a-z%]*)$","i"),B=["Top","Right","Bottom","Left"],Me=F.documentElement,Ce=function(m){return I.contains(m.ownerDocument,m)},lt={composed:!0};Me.getRootNode&&(Ce=function(m){return I.contains(m.ownerDocument,m)||m.getRootNode(lt)===m.ownerDocument});var vt=function(m,S){return m=S||m,m.style.display==="none"||m.style.display===""&&Ce(m)&&I.css(m,"display")==="none"};function ft(m,S,j,Y){var he,ye,ke=20,Ve=Y?function(){return Y.cur()}:function(){return I.css(m,S,"")},Xe=Ve(),wt=j&&j[3]||(I.cssNumber[S]?"":"px"),tn=m.nodeType&&(I.cssNumber[S]||wt!=="px"&&+Xe)&&ne.exec(I.css(m,S));if(tn&&tn[3]!==wt){for(Xe=Xe/2,wt=wt||tn[3],tn=+Xe||1;ke--;)I.style(m,S,tn+wt),(1-ye)*(1-(ye=Ve()/Xe||.5))<=0&&(ke=0),tn=tn/ye;tn=tn*2,I.style(m,S,tn+wt),j=j||[]}return j&&(tn=+tn||+Xe||0,he=j[1]?tn+(j[1]+1)*j[2]:+j[2],Y&&(Y.unit=wt,Y.start=tn,Y.end=he)),he}var ot={};function yt(m){var S,j=m.ownerDocument,Y=m.nodeName,he=ot[Y];return he||(S=j.body.appendChild(j.createElement(Y)),he=I.css(S,"display"),S.parentNode.removeChild(S),he==="none"&&(he="block"),ot[Y]=he,he)}function Ut(m,S){for(var j,Y,he=[],ye=0,ke=m.length;ye<ke;ye++)Y=m[ye],!!Y.style&&(j=Y.style.display,S?(j==="none"&&(he[ye]=Pt.get(Y,"display")||null,he[ye]||(Y.style.display="")),Y.style.display===""&&vt(Y)&&(he[ye]=yt(Y))):j!=="none"&&(he[ye]="none",Pt.set(Y,"display",j)));for(ye=0;ye<ke;ye++)he[ye]!=null&&(m[ye].style.display=he[ye]);return m}I.fn.extend({show:function(){return Ut(this,!0)},hide:function(){return Ut(this)},toggle:function(m){return typeof m=="boolean"?m?this.show():this.hide():this.each(function(){vt(this)?I(this).show():I(this).hide()})}});var Fn=/^(?:checkbox|radio)$/i,Qn=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Fe=/^$|^module$|\/(?:java|ecma)script/i;(function(){var m=F.createDocumentFragment(),S=m.appendChild(F.createElement("div")),j=F.createElement("input");j.setAttribute("type","radio"),j.setAttribute("checked","checked"),j.setAttribute("name","t"),S.appendChild(j),we.checkClone=S.cloneNode(!0).cloneNode(!0).lastChild.checked,S.innerHTML="<textarea>x</textarea>",we.noCloneChecked=!!S.cloneNode(!0).lastChild.defaultValue,S.innerHTML="<option></option>",we.option=!!S.lastChild})();var ct={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ct.tbody=ct.tfoot=ct.colgroup=ct.caption=ct.thead,ct.th=ct.td,we.option||(ct.optgroup=ct.option=[1,"<select multiple='multiple'>","</select>"]);function ut(m,S){var j;return typeof m.getElementsByTagName!="undefined"?j=m.getElementsByTagName(S||"*"):typeof m.querySelectorAll!="undefined"?j=m.querySelectorAll(S||"*"):j=[],S===void 0||S&&Ne(m,S)?I.merge([m],j):j}function jt(m,S){for(var j=0,Y=m.length;j<Y;j++)Pt.set(m[j],"globalEval",!S||Pt.get(S[j],"globalEval"))}var qt=/<|&#?\w+;/;function Dt(m,S,j,Y,he){for(var ye,ke,Ve,Xe,wt,tn,mn=S.createDocumentFragment(),Xt=[],Ln=0,si=m.length;Ln<si;Ln++)if(ye=m[Ln],ye||ye===0)if(ae(ye)==="object")I.merge(Xt,ye.nodeType?[ye]:ye);else if(!qt.test(ye))Xt.push(S.createTextNode(ye));else{for(ke=ke||mn.appendChild(S.createElement("div")),Ve=(Qn.exec(ye)||["",""])[1].toLowerCase(),Xe=ct[Ve]||ct._default,ke.innerHTML=Xe[1]+I.htmlPrefilter(ye)+Xe[2],tn=Xe[0];tn--;)ke=ke.lastChild;I.merge(Xt,ke.childNodes),ke=mn.firstChild,ke.textContent=""}for(mn.textContent="",Ln=0;ye=Xt[Ln++];){if(Y&&I.inArray(ye,Y)>-1){he&&he.push(ye);continue}if(wt=Ce(ye),ke=ut(mn.appendChild(ye),"script"),wt&&jt(ke),j)for(tn=0;ye=ke[tn++];)Fe.test(ye.type||"")&&j.push(ye)}return mn}var hn=/^([^.]*)(?:\.(.+)|)/;function Rt(){return!0}function nn(){return!1}function ln(m,S){return m===_e()==(S==="focus")}function _e(){try{return F.activeElement}catch(m){}}function V(m,S,j,Y,he,ye){var ke,Ve;if(typeof S=="object"){typeof j!="string"&&(Y=Y||j,j=void 0);for(Ve in S)V(m,Ve,j,Y,S[Ve],ye);return m}if(Y==null&&he==null?(he=j,Y=j=void 0):he==null&&(typeof j=="string"?(he=Y,Y=void 0):(he=Y,Y=j,j=void 0)),he===!1)he=nn;else if(!he)return m;return ye===1&&(ke=he,he=function(Xe){return I().off(Xe),ke.apply(this,arguments)},he.guid=ke.guid||(ke.guid=I.guid++)),m.each(function(){I.event.add(this,S,he,Y,j)})}I.event={global:{},add:function(m,S,j,Y,he){var ye,ke,Ve,Xe,wt,tn,mn,Xt,Ln,si,ni,Gn=Pt.get(m);if(!!wi(m))for(j.handler&&(ye=j,j=ye.handler,he=ye.selector),he&&I.find.matchesSelector(Me,he),j.guid||(j.guid=I.guid++),(Xe=Gn.events)||(Xe=Gn.events=Object.create(null)),(ke=Gn.handle)||(ke=Gn.handle=function(ur){return typeof I!="undefined"&&I.event.triggered!==ur.type?I.event.dispatch.apply(m,arguments):void 0}),S=(S||"").match(Mn)||[""],wt=S.length;wt--;)Ve=hn.exec(S[wt])||[],Ln=ni=Ve[1],si=(Ve[2]||"").split(".").sort(),!!Ln&&(mn=I.event.special[Ln]||{},Ln=(he?mn.delegateType:mn.bindType)||Ln,mn=I.event.special[Ln]||{},tn=I.extend({type:Ln,origType:ni,data:Y,handler:j,guid:j.guid,selector:he,needsContext:he&&I.expr.match.needsContext.test(he),namespace:si.join(".")},ye),(Xt=Xe[Ln])||(Xt=Xe[Ln]=[],Xt.delegateCount=0,(!mn.setup||mn.setup.call(m,Y,si,ke)===!1)&&m.addEventListener&&m.addEventListener(Ln,ke)),mn.add&&(mn.add.call(m,tn),tn.handler.guid||(tn.handler.guid=j.guid)),he?Xt.splice(Xt.delegateCount++,0,tn):Xt.push(tn),I.event.global[Ln]=!0)},remove:function(m,S,j,Y,he){var ye,ke,Ve,Xe,wt,tn,mn,Xt,Ln,si,ni,Gn=Pt.hasData(m)&&Pt.get(m);if(!(!Gn||!(Xe=Gn.events))){for(S=(S||"").match(Mn)||[""],wt=S.length;wt--;){if(Ve=hn.exec(S[wt])||[],Ln=ni=Ve[1],si=(Ve[2]||"").split(".").sort(),!Ln){for(Ln in Xe)I.event.remove(m,Ln+S[wt],j,Y,!0);continue}for(mn=I.event.special[Ln]||{},Ln=(Y?mn.delegateType:mn.bindType)||Ln,Xt=Xe[Ln]||[],Ve=Ve[2]&&new RegExp("(^|\\.)"+si.join("\\.(?:.*\\.|)")+"(\\.|$)"),ke=ye=Xt.length;ye--;)tn=Xt[ye],(he||ni===tn.origType)&&(!j||j.guid===tn.guid)&&(!Ve||Ve.test(tn.namespace))&&(!Y||Y===tn.selector||Y==="**"&&tn.selector)&&(Xt.splice(ye,1),tn.selector&&Xt.delegateCount--,mn.remove&&mn.remove.call(m,tn));ke&&!Xt.length&&((!mn.teardown||mn.teardown.call(m,si,Gn.handle)===!1)&&I.removeEvent(m,Ln,Gn.handle),delete Xe[Ln])}I.isEmptyObject(Xe)&&Pt.remove(m,"handle events")}},dispatch:function(m){var S,j,Y,he,ye,ke,Ve=new Array(arguments.length),Xe=I.event.fix(m),wt=(Pt.get(this,"events")||Object.create(null))[Xe.type]||[],tn=I.event.special[Xe.type]||{};for(Ve[0]=Xe,S=1;S<arguments.length;S++)Ve[S]=arguments[S];if(Xe.delegateTarget=this,!(tn.preDispatch&&tn.preDispatch.call(this,Xe)===!1)){for(ke=I.event.handlers.call(this,Xe,wt),S=0;(he=ke[S++])&&!Xe.isPropagationStopped();)for(Xe.currentTarget=he.elem,j=0;(ye=he.handlers[j++])&&!Xe.isImmediatePropagationStopped();)(!Xe.rnamespace||ye.namespace===!1||Xe.rnamespace.test(ye.namespace))&&(Xe.handleObj=ye,Xe.data=ye.data,Y=((I.event.special[ye.origType]||{}).handle||ye.handler).apply(he.elem,Ve),Y!==void 0&&(Xe.result=Y)===!1&&(Xe.preventDefault(),Xe.stopPropagation()));return tn.postDispatch&&tn.postDispatch.call(this,Xe),Xe.result}},handlers:function(m,S){var j,Y,he,ye,ke,Ve=[],Xe=S.delegateCount,wt=m.target;if(Xe&&wt.nodeType&&!(m.type==="click"&&m.button>=1)){for(;wt!==this;wt=wt.parentNode||this)if(wt.nodeType===1&&!(m.type==="click"&&wt.disabled===!0)){for(ye=[],ke={},j=0;j<Xe;j++)Y=S[j],he=Y.selector+" ",ke[he]===void 0&&(ke[he]=Y.needsContext?I(he,this).index(wt)>-1:I.find(he,this,null,[wt]).length),ke[he]&&ye.push(Y);ye.length&&Ve.push({elem:wt,handlers:ye})}}return wt=this,Xe<S.length&&Ve.push({elem:wt,handlers:S.slice(Xe)}),Ve},addProp:function(m,S){Object.defineProperty(I.Event.prototype,m,{enumerable:!0,configurable:!0,get:de(S)?function(){if(this.originalEvent)return S(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[m]},set:function(j){Object.defineProperty(this,m,{enumerable:!0,configurable:!0,writable:!0,value:j})}})},fix:function(m){return m[I.expando]?m:new I.Event(m)},special:{load:{noBubble:!0},click:{setup:function(m){var S=this||m;return Fn.test(S.type)&&S.click&&Ne(S,"input")&&H(S,"click",Rt),!1},trigger:function(m){var S=this||m;return Fn.test(S.type)&&S.click&&Ne(S,"input")&&H(S,"click"),!0},_default:function(m){var S=m.target;return Fn.test(S.type)&&S.click&&Ne(S,"input")&&Pt.get(S,"click")||Ne(S,"a")}},beforeunload:{postDispatch:function(m){m.result!==void 0&&m.originalEvent&&(m.originalEvent.returnValue=m.result)}}}};function H(m,S,j){if(!j){Pt.get(m,S)===void 0&&I.event.add(m,S,Rt);return}Pt.set(m,S,!1),I.event.add(m,S,{namespace:!1,handler:function(Y){var he,ye,ke=Pt.get(this,S);if(Y.isTrigger&1&&this[S]){if(ke.length)(I.event.special[S]||{}).delegateType&&Y.stopPropagation();else if(ke=C.call(arguments),Pt.set(this,S,ke),he=j(this,S),this[S](),ye=Pt.get(this,S),ke!==ye||he?Pt.set(this,S,!1):ye={},ke!==ye)return Y.stopImmediatePropagation(),Y.preventDefault(),ye&&ye.value}else ke.length&&(Pt.set(this,S,{value:I.event.trigger(I.extend(ke[0],I.Event.prototype),ke.slice(1),this)}),Y.stopImmediatePropagation())}})}I.removeEvent=function(m,S,j){m.removeEventListener&&m.removeEventListener(S,j)},I.Event=function(m,S){if(!(this instanceof I.Event))return new I.Event(m,S);m&&m.type?(this.originalEvent=m,this.type=m.type,this.isDefaultPrevented=m.defaultPrevented||m.defaultPrevented===void 0&&m.returnValue===!1?Rt:nn,this.target=m.target&&m.target.nodeType===3?m.target.parentNode:m.target,this.currentTarget=m.currentTarget,this.relatedTarget=m.relatedTarget):this.type=m,S&&I.extend(this,S),this.timeStamp=m&&m.timeStamp||Date.now(),this[I.expando]=!0},I.Event.prototype={constructor:I.Event,isDefaultPrevented:nn,isPropagationStopped:nn,isImmediatePropagationStopped:nn,isSimulated:!1,preventDefault:function(){var m=this.originalEvent;this.isDefaultPrevented=Rt,m&&!this.isSimulated&&m.preventDefault()},stopPropagation:function(){var m=this.originalEvent;this.isPropagationStopped=Rt,m&&!this.isSimulated&&m.stopPropagation()},stopImmediatePropagation:function(){var m=this.originalEvent;this.isImmediatePropagationStopped=Rt,m&&!this.isSimulated&&m.stopImmediatePropagation(),this.stopPropagation()}},I.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},I.event.addProp),I.each({focus:"focusin",blur:"focusout"},function(m,S){I.event.special[m]={setup:function(){return H(this,m,ln),!1},trigger:function(){return H(this,m),!0},_default:function(){return!0},delegateType:S}}),I.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(m,S){I.event.special[m]={delegateType:S,bindType:S,handle:function(j){var Y,he=this,ye=j.relatedTarget,ke=j.handleObj;return(!ye||ye!==he&&!I.contains(he,ye))&&(j.type=ke.origType,Y=ke.handler.apply(this,arguments),j.type=S),Y}}}),I.fn.extend({on:function(m,S,j,Y){return V(this,m,S,j,Y)},one:function(m,S,j,Y){return V(this,m,S,j,Y,1)},off:function(m,S,j){var Y,he;if(m&&m.preventDefault&&m.handleObj)return Y=m.handleObj,I(m.delegateTarget).off(Y.namespace?Y.origType+"."+Y.namespace:Y.origType,Y.selector,Y.handler),this;if(typeof m=="object"){for(he in m)this.off(he,S,m[he]);return this}return(S===!1||typeof S=="function")&&(j=S,S=void 0),j===!1&&(j=nn),this.each(function(){I.event.remove(this,m,j,S)})}});var T=/<script|<style|<link/i,z=/checked\s*(?:[^=]|=\s*.checked.)/i,J=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pe(m,S){return Ne(m,"table")&&Ne(S.nodeType!==11?S:S.firstChild,"tr")&&I(m).children("tbody")[0]||m}function Oe(m){return m.type=(m.getAttribute("type")!==null)+"/"+m.type,m}function Ue(m){return(m.type||"").slice(0,5)==="true/"?m.type=m.type.slice(5):m.removeAttribute("type"),m}function qe(m,S){var j,Y,he,ye,ke,Ve,Xe;if(S.nodeType===1){if(Pt.hasData(m)&&(ye=Pt.get(m),Xe=ye.events,Xe)){Pt.remove(S,"handle events");for(he in Xe)for(j=0,Y=Xe[he].length;j<Y;j++)I.event.add(S,he,Xe[he][j])}et.hasData(m)&&(ke=et.access(m),Ve=I.extend({},ke),et.set(S,Ve))}}function Ct(m,S){var j=S.nodeName.toLowerCase();j==="input"&&Fn.test(m.type)?S.checked=m.checked:(j==="input"||j==="textarea")&&(S.defaultValue=m.defaultValue)}function dt(m,S,j,Y){S=D(S);var he,ye,ke,Ve,Xe,wt,tn=0,mn=m.length,Xt=mn-1,Ln=S[0],si=de(Ln);if(si||mn>1&&typeof Ln=="string"&&!we.checkClone&&z.test(Ln))return m.each(function(ni){var Gn=m.eq(ni);si&&(S[0]=Ln.call(this,ni,Gn.html())),dt(Gn,S,j,Y)});if(mn&&(he=Dt(S,m[0].ownerDocument,!1,m,Y),ye=he.firstChild,he.childNodes.length===1&&(he=ye),ye||Y)){for(ke=I.map(ut(he,"script"),Oe),Ve=ke.length;tn<mn;tn++)Xe=he,tn!==Xt&&(Xe=I.clone(Xe,!0,!0),Ve&&I.merge(ke,ut(Xe,"script"))),j.call(m[tn],Xe,tn);if(Ve)for(wt=ke[ke.length-1].ownerDocument,I.map(ke,Ue),tn=0;tn<Ve;tn++)Xe=ke[tn],Fe.test(Xe.type||"")&&!Pt.access(Xe,"globalEval")&&I.contains(wt,Xe)&&(Xe.src&&(Xe.type||"").toLowerCase()!=="module"?I._evalUrl&&!Xe.noModule&&I._evalUrl(Xe.src,{nonce:Xe.nonce||Xe.getAttribute("nonce")},wt):pe(Xe.textContent.replace(J,""),Xe,wt))}return m}function Et(m,S,j){for(var Y,he=S?I.filter(S,m):m,ye=0;(Y=he[ye])!=null;ye++)!j&&Y.nodeType===1&&I.cleanData(ut(Y)),Y.parentNode&&(j&&Ce(Y)&&jt(ut(Y,"script")),Y.parentNode.removeChild(Y));return m}I.extend({htmlPrefilter:function(m){return m},clone:function(m,S,j){var Y,he,ye,ke,Ve=m.cloneNode(!0),Xe=Ce(m);if(!we.noCloneChecked&&(m.nodeType===1||m.nodeType===11)&&!I.isXMLDoc(m))for(ke=ut(Ve),ye=ut(m),Y=0,he=ye.length;Y<he;Y++)Ct(ye[Y],ke[Y]);if(S)if(j)for(ye=ye||ut(m),ke=ke||ut(Ve),Y=0,he=ye.length;Y<he;Y++)qe(ye[Y],ke[Y]);else qe(m,Ve);return ke=ut(Ve,"script"),ke.length>0&&jt(ke,!Xe&&ut(m,"script")),Ve},cleanData:function(m){for(var S,j,Y,he=I.event.special,ye=0;(j=m[ye])!==void 0;ye++)if(wi(j)){if(S=j[Pt.expando]){if(S.events)for(Y in S.events)he[Y]?I.event.remove(j,Y):I.removeEvent(j,Y,S.handle);j[Pt.expando]=void 0}j[et.expando]&&(j[et.expando]=void 0)}}}),I.fn.extend({detach:function(m){return Et(this,m,!0)},remove:function(m){return Et(this,m)},text:function(m){return en(this,function(S){return S===void 0?I.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=S)})},null,m,arguments.length)},append:function(){return dt(this,arguments,function(m){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var S=Pe(this,m);S.appendChild(m)}})},prepend:function(){return dt(this,arguments,function(m){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var S=Pe(this,m);S.insertBefore(m,S.firstChild)}})},before:function(){return dt(this,arguments,function(m){this.parentNode&&this.parentNode.insertBefore(m,this)})},after:function(){return dt(this,arguments,function(m){this.parentNode&&this.parentNode.insertBefore(m,this.nextSibling)})},empty:function(){for(var m,S=0;(m=this[S])!=null;S++)m.nodeType===1&&(I.cleanData(ut(m,!1)),m.textContent="");return this},clone:function(m,S){return m=m==null?!1:m,S=S==null?m:S,this.map(function(){return I.clone(this,m,S)})},html:function(m){return en(this,function(S){var j=this[0]||{},Y=0,he=this.length;if(S===void 0&&j.nodeType===1)return j.innerHTML;if(typeof S=="string"&&!T.test(S)&&!ct[(Qn.exec(S)||["",""])[1].toLowerCase()]){S=I.htmlPrefilter(S);try{for(;Y<he;Y++)j=this[Y]||{},j.nodeType===1&&(I.cleanData(ut(j,!1)),j.innerHTML=S);j=0}catch(ye){}}j&&this.empty().append(S)},null,m,arguments.length)},replaceWith:function(){var m=[];return dt(this,arguments,function(S){var j=this.parentNode;I.inArray(this,m)<0&&(I.cleanData(ut(this)),j&&j.replaceChild(S,this))},m)}}),I.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(m,S){I.fn[m]=function(j){for(var Y,he=[],ye=I(j),ke=ye.length-1,Ve=0;Ve<=ke;Ve++)Y=Ve===ke?this:this.clone(!0),I(ye[Ve])[S](Y),L.apply(he,Y.get());return this.pushStack(he)}});var Cn=new RegExp("^("+le+")(?!px)[a-z%]+$","i"),st=function(m){var S=m.ownerDocument.defaultView;return(!S||!S.opener)&&(S=y),S.getComputedStyle(m)},Zt=function(m,S,j){var Y,he,ye={};for(he in S)ye[he]=m.style[he],m.style[he]=S[he];Y=j.call(m);for(he in S)m.style[he]=ye[he];return Y},zn=new RegExp(B.join("|"),"i");(function(){function m(){if(!!wt){Xe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",wt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Me.appendChild(Xe).appendChild(wt);var tn=y.getComputedStyle(wt);j=tn.top!=="1%",Ve=S(tn.marginLeft)===12,wt.style.right="60%",ye=S(tn.right)===36,Y=S(tn.width)===36,wt.style.position="absolute",he=S(wt.offsetWidth/3)===12,Me.removeChild(Xe),wt=null}}function S(tn){return Math.round(parseFloat(tn))}var j,Y,he,ye,ke,Ve,Xe=F.createElement("div"),wt=F.createElement("div");!wt.style||(wt.style.backgroundClip="content-box",wt.cloneNode(!0).style.backgroundClip="",we.clearCloneStyle=wt.style.backgroundClip==="content-box",I.extend(we,{boxSizingReliable:function(){return m(),Y},pixelBoxStyles:function(){return m(),ye},pixelPosition:function(){return m(),j},reliableMarginLeft:function(){return m(),Ve},scrollboxSize:function(){return m(),he},reliableTrDimensions:function(){var tn,mn,Xt,Ln;return ke==null&&(tn=F.createElement("table"),mn=F.createElement("tr"),Xt=F.createElement("div"),tn.style.cssText="position:absolute;left:-11111px;border-collapse:separate",mn.style.cssText="border:1px solid",mn.style.height="1px",Xt.style.height="9px",Xt.style.display="block",Me.appendChild(tn).appendChild(mn).appendChild(Xt),Ln=y.getComputedStyle(mn),ke=parseInt(Ln.height,10)+parseInt(Ln.borderTopWidth,10)+parseInt(Ln.borderBottomWidth,10)===mn.offsetHeight,Me.removeChild(tn)),ke}}))})();function Lt(m,S,j){var Y,he,ye,ke,Ve=m.style;return j=j||st(m),j&&(ke=j.getPropertyValue(S)||j[S],ke===""&&!Ce(m)&&(ke=I.style(m,S)),!we.pixelBoxStyles()&&Cn.test(ke)&&zn.test(S)&&(Y=Ve.width,he=Ve.minWidth,ye=Ve.maxWidth,Ve.minWidth=Ve.maxWidth=Ve.width=ke,ke=j.width,Ve.width=Y,Ve.minWidth=he,Ve.maxWidth=ye)),ke!==void 0?ke+"":ke}function En(m,S){return{get:function(){if(m()){delete this.get;return}return(this.get=S).apply(this,arguments)}}}var qn=["Webkit","Moz","ms"],ui=F.createElement("div").style,Ai={};function or(m){for(var S=m[0].toUpperCase()+m.slice(1),j=qn.length;j--;)if(m=qn[j]+S,m in ui)return m}function Hn(m){var S=I.cssProps[m]||Ai[m];return S||(m in ui?m:Ai[m]=or(m)||m)}var Jn=/^(none|table(?!-c[ea]).+)/,Ii=/^--/,ti={position:"absolute",visibility:"hidden",display:"block"},Ht={letterSpacing:"0",fontWeight:"400"};function Bn(m,S,j){var Y=ne.exec(S);return Y?Math.max(0,Y[2]-(j||0))+(Y[3]||"px"):S}function Xn(m,S,j,Y,he,ye){var ke=S==="width"?1:0,Ve=0,Xe=0;if(j===(Y?"border":"content"))return 0;for(;ke<4;ke+=2)j==="margin"&&(Xe+=I.css(m,j+B[ke],!0,he)),Y?(j==="content"&&(Xe-=I.css(m,"padding"+B[ke],!0,he)),j!=="margin"&&(Xe-=I.css(m,"border"+B[ke]+"Width",!0,he))):(Xe+=I.css(m,"padding"+B[ke],!0,he),j!=="padding"?Xe+=I.css(m,"border"+B[ke]+"Width",!0,he):Ve+=I.css(m,"border"+B[ke]+"Width",!0,he));return!Y&&ye>=0&&(Xe+=Math.max(0,Math.ceil(m["offset"+S[0].toUpperCase()+S.slice(1)]-ye-Xe-Ve-.5))||0),Xe}function Kn(m,S,j){var Y=st(m),he=!we.boxSizingReliable()||j,ye=he&&I.css(m,"boxSizing",!1,Y)==="border-box",ke=ye,Ve=Lt(m,S,Y),Xe="offset"+S[0].toUpperCase()+S.slice(1);if(Cn.test(Ve)){if(!j)return Ve;Ve="auto"}return(!we.boxSizingReliable()&&ye||!we.reliableTrDimensions()&&Ne(m,"tr")||Ve==="auto"||!parseFloat(Ve)&&I.css(m,"display",!1,Y)==="inline")&&m.getClientRects().length&&(ye=I.css(m,"boxSizing",!1,Y)==="border-box",ke=Xe in m,ke&&(Ve=m[Xe])),Ve=parseFloat(Ve)||0,Ve+Xn(m,S,j||(ye?"border":"content"),ke,Y,Ve)+"px"}I.extend({cssHooks:{opacity:{get:function(m,S){if(S){var j=Lt(m,"opacity");return j===""?"1":j}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(m,S,j,Y){if(!(!m||m.nodeType===3||m.nodeType===8||!m.style)){var he,ye,ke,Ve=_i(S),Xe=Ii.test(S),wt=m.style;if(Xe||(S=Hn(Ve)),ke=I.cssHooks[S]||I.cssHooks[Ve],j!==void 0){if(ye=typeof j,ye==="string"&&(he=ne.exec(j))&&he[1]&&(j=ft(m,S,he),ye="number"),j==null||j!==j)return;ye==="number"&&!Xe&&(j+=he&&he[3]||(I.cssNumber[Ve]?"":"px")),!we.clearCloneStyle&&j===""&&S.indexOf("background")===0&&(wt[S]="inherit"),(!ke||!("set"in ke)||(j=ke.set(m,j,Y))!==void 0)&&(Xe?wt.setProperty(S,j):wt[S]=j)}else return ke&&"get"in ke&&(he=ke.get(m,!1,Y))!==void 0?he:wt[S]}},css:function(m,S,j,Y){var he,ye,ke,Ve=_i(S),Xe=Ii.test(S);return Xe||(S=Hn(Ve)),ke=I.cssHooks[S]||I.cssHooks[Ve],ke&&"get"in ke&&(he=ke.get(m,!0,j)),he===void 0&&(he=Lt(m,S,Y)),he==="normal"&&S in Ht&&(he=Ht[S]),j===""||j?(ye=parseFloat(he),j===!0||isFinite(ye)?ye||0:he):he}}),I.each(["height","width"],function(m,S){I.cssHooks[S]={get:function(j,Y,he){if(Y)return Jn.test(I.css(j,"display"))&&(!j.getClientRects().length||!j.getBoundingClientRect().width)?Zt(j,ti,function(){return Kn(j,S,he)}):Kn(j,S,he)},set:function(j,Y,he){var ye,ke=st(j),Ve=!we.scrollboxSize()&&ke.position==="absolute",Xe=Ve||he,wt=Xe&&I.css(j,"boxSizing",!1,ke)==="border-box",tn=he?Xn(j,S,he,wt,ke):0;return wt&&Ve&&(tn-=Math.ceil(j["offset"+S[0].toUpperCase()+S.slice(1)]-parseFloat(ke[S])-Xn(j,S,"border",!1,ke)-.5)),tn&&(ye=ne.exec(Y))&&(ye[3]||"px")!=="px"&&(j.style[S]=Y,Y=I.css(j,S)),Bn(j,Y,tn)}}}),I.cssHooks.marginLeft=En(we.reliableMarginLeft,function(m,S){if(S)return(parseFloat(Lt(m,"marginLeft"))||m.getBoundingClientRect().left-Zt(m,{marginLeft:0},function(){return m.getBoundingClientRect().left}))+"px"}),I.each({margin:"",padding:"",border:"Width"},function(m,S){I.cssHooks[m+S]={expand:function(j){for(var Y=0,he={},ye=typeof j=="string"?j.split(" "):[j];Y<4;Y++)he[m+B[Y]+S]=ye[Y]||ye[Y-2]||ye[0];return he}},m!=="margin"&&(I.cssHooks[m+S].set=Bn)}),I.fn.extend({css:function(m,S){return en(this,function(j,Y,he){var ye,ke,Ve={},Xe=0;if(Array.isArray(Y)){for(ye=st(j),ke=Y.length;Xe<ke;Xe++)Ve[Y[Xe]]=I.css(j,Y[Xe],!1,ye);return Ve}return he!==void 0?I.style(j,Y,he):I.css(j,Y)},m,S,arguments.length>1)}});function Bi(m,S,j,Y,he){return new Bi.prototype.init(m,S,j,Y,he)}I.Tween=Bi,Bi.prototype={constructor:Bi,init:function(m,S,j,Y,he,ye){this.elem=m,this.prop=j,this.easing=he||I.easing._default,this.options=S,this.start=this.now=this.cur(),this.end=Y,this.unit=ye||(I.cssNumber[j]?"":"px")},cur:function(){var m=Bi.propHooks[this.prop];return m&&m.get?m.get(this):Bi.propHooks._default.get(this)},run:function(m){var S,j=Bi.propHooks[this.prop];return this.options.duration?this.pos=S=I.easing[this.easing](m,this.options.duration*m,0,1,this.options.duration):this.pos=S=m,this.now=(this.end-this.start)*S+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),j&&j.set?j.set(this):Bi.propHooks._default.set(this),this}},Bi.prototype.init.prototype=Bi.prototype,Bi.propHooks={_default:{get:function(m){var S;return m.elem.nodeType!==1||m.elem[m.prop]!=null&&m.elem.style[m.prop]==null?m.elem[m.prop]:(S=I.css(m.elem,m.prop,""),!S||S==="auto"?0:S)},set:function(m){I.fx.step[m.prop]?I.fx.step[m.prop](m):m.elem.nodeType===1&&(I.cssHooks[m.prop]||m.elem.style[Hn(m.prop)]!=null)?I.style(m.elem,m.prop,m.now+m.unit):m.elem[m.prop]=m.now}}},Bi.propHooks.scrollTop=Bi.propHooks.scrollLeft={set:function(m){m.elem.nodeType&&m.elem.parentNode&&(m.elem[m.prop]=m.now)}},I.easing={linear:function(m){return m},swing:function(m){return .5-Math.cos(m*Math.PI)/2},_default:"swing"},I.fx=Bi.prototype.init,I.fx.step={};var br,Vi,lr=/^(?:toggle|show|hide)$/,Qi=/queueHooks$/;function gi(){Vi&&(F.hidden===!1&&y.requestAnimationFrame?y.requestAnimationFrame(gi):y.setTimeout(gi,I.fx.interval),I.fx.tick())}function Rn(){return y.setTimeout(function(){br=void 0}),br=Date.now()}function vs(m,S){var j,Y=0,he={height:m};for(S=S?1:0;Y<4;Y+=2-S)j=B[Y],he["margin"+j]=he["padding"+j]=m;return S&&(he.opacity=he.width=m),he}function Ss(m,S,j){for(var Y,he=(mr.tweeners[S]||[]).concat(mr.tweeners["*"]),ye=0,ke=he.length;ye<ke;ye++)if(Y=he[ye].call(j,S,m))return Y}function Si(m,S,j){var Y,he,ye,ke,Ve,Xe,wt,tn,mn="width"in S||"height"in S,Xt=this,Ln={},si=m.style,ni=m.nodeType&&vt(m),Gn=Pt.get(m,"fxshow");j.queue||(ke=I._queueHooks(m,"fx"),ke.unqueued==null&&(ke.unqueued=0,Ve=ke.empty.fire,ke.empty.fire=function(){ke.unqueued||Ve()}),ke.unqueued++,Xt.always(function(){Xt.always(function(){ke.unqueued--,I.queue(m,"fx").length||ke.empty.fire()})}));for(Y in S)if(he=S[Y],lr.test(he)){if(delete S[Y],ye=ye||he==="toggle",he===(ni?"hide":"show"))if(he==="show"&&Gn&&Gn[Y]!==void 0)ni=!0;else continue;Ln[Y]=Gn&&Gn[Y]||I.style(m,Y)}if(Xe=!I.isEmptyObject(S),!(!Xe&&I.isEmptyObject(Ln))){mn&&m.nodeType===1&&(j.overflow=[si.overflow,si.overflowX,si.overflowY],wt=Gn&&Gn.display,wt==null&&(wt=Pt.get(m,"display")),tn=I.css(m,"display"),tn==="none"&&(wt?tn=wt:(Ut([m],!0),wt=m.style.display||wt,tn=I.css(m,"display"),Ut([m]))),(tn==="inline"||tn==="inline-block"&&wt!=null)&&I.css(m,"float")==="none"&&(Xe||(Xt.done(function(){si.display=wt}),wt==null&&(tn=si.display,wt=tn==="none"?"":tn)),si.display="inline-block")),j.overflow&&(si.overflow="hidden",Xt.always(function(){si.overflow=j.overflow[0],si.overflowX=j.overflow[1],si.overflowY=j.overflow[2]})),Xe=!1;for(Y in Ln)Xe||(Gn?"hidden"in Gn&&(ni=Gn.hidden):Gn=Pt.access(m,"fxshow",{display:wt}),ye&&(Gn.hidden=!ni),ni&&Ut([m],!0),Xt.done(function(){ni||Ut([m]),Pt.remove(m,"fxshow");for(Y in Ln)I.style(m,Y,Ln[Y])})),Xe=Ss(ni?Gn[Y]:0,Y,Xt),Y in Gn||(Gn[Y]=Xe.start,ni&&(Xe.end=Xe.start,Xe.start=0))}}function Lr(m,S){var j,Y,he,ye,ke;for(j in m)if(Y=_i(j),he=S[Y],ye=m[j],Array.isArray(ye)&&(he=ye[1],ye=m[j]=ye[0]),j!==Y&&(m[Y]=ye,delete m[j]),ke=I.cssHooks[Y],ke&&"expand"in ke){ye=ke.expand(ye),delete m[Y];for(j in ye)j in m||(m[j]=ye[j],S[j]=he)}else S[Y]=he}function mr(m,S,j){var Y,he,ye=0,ke=mr.prefilters.length,Ve=I.Deferred().always(function(){delete Xe.elem}),Xe=function(){if(he)return!1;for(var mn=br||Rn(),Xt=Math.max(0,wt.startTime+wt.duration-mn),Ln=Xt/wt.duration||0,si=1-Ln,ni=0,Gn=wt.tweens.length;ni<Gn;ni++)wt.tweens[ni].run(si);return Ve.notifyWith(m,[wt,si,Xt]),si<1&&Gn?Xt:(Gn||Ve.notifyWith(m,[wt,1,0]),Ve.resolveWith(m,[wt]),!1)},wt=Ve.promise({elem:m,props:I.extend({},S),opts:I.extend(!0,{specialEasing:{},easing:I.easing._default},j),originalProperties:S,originalOptions:j,startTime:br||Rn(),duration:j.duration,tweens:[],createTween:function(mn,Xt){var Ln=I.Tween(m,wt.opts,mn,Xt,wt.opts.specialEasing[mn]||wt.opts.easing);return wt.tweens.push(Ln),Ln},stop:function(mn){var Xt=0,Ln=mn?wt.tweens.length:0;if(he)return this;for(he=!0;Xt<Ln;Xt++)wt.tweens[Xt].run(1);return mn?(Ve.notifyWith(m,[wt,1,0]),Ve.resolveWith(m,[wt,mn])):Ve.rejectWith(m,[wt,mn]),this}}),tn=wt.props;for(Lr(tn,wt.opts.specialEasing);ye<ke;ye++)if(Y=mr.prefilters[ye].call(wt,m,tn,wt.opts),Y)return de(Y.stop)&&(I._queueHooks(wt.elem,wt.opts.queue).stop=Y.stop.bind(Y)),Y;return I.map(tn,Ss,wt),de(wt.opts.start)&&wt.opts.start.call(m,wt),wt.progress(wt.opts.progress).done(wt.opts.done,wt.opts.complete).fail(wt.opts.fail).always(wt.opts.always),I.fx.timer(I.extend(Xe,{elem:m,anim:wt,queue:wt.opts.queue})),wt}I.Animation=I.extend(mr,{tweeners:{"*":[function(m,S){var j=this.createTween(m,S);return ft(j.elem,m,ne.exec(S),j),j}]},tweener:function(m,S){de(m)?(S=m,m=["*"]):m=m.match(Mn);for(var j,Y=0,he=m.length;Y<he;Y++)j=m[Y],mr.tweeners[j]=mr.tweeners[j]||[],mr.tweeners[j].unshift(S)},prefilters:[Si],prefilter:function(m,S){S?mr.prefilters.unshift(m):mr.prefilters.push(m)}}),I.speed=function(m,S,j){var Y=m&&typeof m=="object"?I.extend({},m):{complete:j||!j&&S||de(m)&&m,duration:m,easing:j&&S||S&&!de(S)&&S};return I.fx.off?Y.duration=0:typeof Y.duration!="number"&&(Y.duration in I.fx.speeds?Y.duration=I.fx.speeds[Y.duration]:Y.duration=I.fx.speeds._default),(Y.queue==null||Y.queue===!0)&&(Y.queue="fx"),Y.old=Y.complete,Y.complete=function(){de(Y.old)&&Y.old.call(this),Y.queue&&I.dequeue(this,Y.queue)},Y},I.fn.extend({fadeTo:function(m,S,j,Y){return this.filter(vt).css("opacity",0).show().end().animate({opacity:S},m,j,Y)},animate:function(m,S,j,Y){var he=I.isEmptyObject(m),ye=I.speed(S,j,Y),ke=function(){var Ve=mr(this,I.extend({},m),ye);(he||Pt.get(this,"finish"))&&Ve.stop(!0)};return ke.finish=ke,he||ye.queue===!1?this.each(ke):this.queue(ye.queue,ke)},stop:function(m,S,j){var Y=function(he){var ye=he.stop;delete he.stop,ye(j)};return typeof m!="string"&&(j=S,S=m,m=void 0),S&&this.queue(m||"fx",[]),this.each(function(){var he=!0,ye=m!=null&&m+"queueHooks",ke=I.timers,Ve=Pt.get(this);if(ye)Ve[ye]&&Ve[ye].stop&&Y(Ve[ye]);else for(ye in Ve)Ve[ye]&&Ve[ye].stop&&Qi.test(ye)&&Y(Ve[ye]);for(ye=ke.length;ye--;)ke[ye].elem===this&&(m==null||ke[ye].queue===m)&&(ke[ye].anim.stop(j),he=!1,ke.splice(ye,1));(he||!j)&&I.dequeue(this,m)})},finish:function(m){return m!==!1&&(m=m||"fx"),this.each(function(){var S,j=Pt.get(this),Y=j[m+"queue"],he=j[m+"queueHooks"],ye=I.timers,ke=Y?Y.length:0;for(j.finish=!0,I.queue(this,m,[]),he&&he.stop&&he.stop.call(this,!0),S=ye.length;S--;)ye[S].elem===this&&ye[S].queue===m&&(ye[S].anim.stop(!0),ye.splice(S,1));for(S=0;S<ke;S++)Y[S]&&Y[S].finish&&Y[S].finish.call(this);delete j.finish})}}),I.each(["toggle","show","hide"],function(m,S){var j=I.fn[S];I.fn[S]=function(Y,he,ye){return Y==null||typeof Y=="boolean"?j.apply(this,arguments):this.animate(vs(S,!0),Y,he,ye)}}),I.each({slideDown:vs("show"),slideUp:vs("hide"),slideToggle:vs("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(m,S){I.fn[m]=function(j,Y,he){return this.animate(S,j,Y,he)}}),I.timers=[],I.fx.tick=function(){var m,S=0,j=I.timers;for(br=Date.now();S<j.length;S++)m=j[S],!m()&&j[S]===m&&j.splice(S--,1);j.length||I.fx.stop(),br=void 0},I.fx.timer=function(m){I.timers.push(m),I.fx.start()},I.fx.interval=13,I.fx.start=function(){Vi||(Vi=!0,gi())},I.fx.stop=function(){Vi=null},I.fx.speeds={slow:600,fast:200,_default:400},I.fn.delay=function(m,S){return m=I.fx&&I.fx.speeds[m]||m,S=S||"fx",this.queue(S,function(j,Y){var he=y.setTimeout(j,m);Y.stop=function(){y.clearTimeout(he)}})},function(){var m=F.createElement("input"),S=F.createElement("select"),j=S.appendChild(F.createElement("option"));m.type="checkbox",we.checkOn=m.value!=="",we.optSelected=j.selected,m=F.createElement("input"),m.value="t",m.type="radio",we.radioValue=m.value==="t"}();var Wr,ei=I.expr.attrHandle;I.fn.extend({attr:function(m,S){return en(this,I.attr,m,S,arguments.length>1)},removeAttr:function(m){return this.each(function(){I.removeAttr(this,m)})}}),I.extend({attr:function(m,S,j){var Y,he,ye=m.nodeType;if(!(ye===3||ye===8||ye===2)){if(typeof m.getAttribute=="undefined")return I.prop(m,S,j);if((ye!==1||!I.isXMLDoc(m))&&(he=I.attrHooks[S.toLowerCase()]||(I.expr.match.bool.test(S)?Wr:void 0)),j!==void 0){if(j===null){I.removeAttr(m,S);return}return he&&"set"in he&&(Y=he.set(m,j,S))!==void 0?Y:(m.setAttribute(S,j+""),j)}return he&&"get"in he&&(Y=he.get(m,S))!==null?Y:(Y=I.find.attr(m,S),Y==null?void 0:Y)}},attrHooks:{type:{set:function(m,S){if(!we.radioValue&&S==="radio"&&Ne(m,"input")){var j=m.value;return m.setAttribute("type",S),j&&(m.value=j),S}}}},removeAttr:function(m,S){var j,Y=0,he=S&&S.match(Mn);if(he&&m.nodeType===1)for(;j=he[Y++];)m.removeAttribute(j)}}),Wr={set:function(m,S,j){return S===!1?I.removeAttr(m,j):m.setAttribute(j,j),j}},I.each(I.expr.match.bool.source.match(/\w+/g),function(m,S){var j=ei[S]||I.find.attr;ei[S]=function(Y,he,ye){var ke,Ve,Xe=he.toLowerCase();return ye||(Ve=ei[Xe],ei[Xe]=ke,ke=j(Y,he,ye)!=null?Xe:null,ei[Xe]=Ve),ke}});var Jo=/^(?:input|select|textarea|button)$/i,va=/^(?:a|area)$/i;I.fn.extend({prop:function(m,S){return en(this,I.prop,m,S,arguments.length>1)},removeProp:function(m){return this.each(function(){delete this[I.propFix[m]||m]})}}),I.extend({prop:function(m,S,j){var Y,he,ye=m.nodeType;if(!(ye===3||ye===8||ye===2))return(ye!==1||!I.isXMLDoc(m))&&(S=I.propFix[S]||S,he=I.propHooks[S]),j!==void 0?he&&"set"in he&&(Y=he.set(m,j,S))!==void 0?Y:m[S]=j:he&&"get"in he&&(Y=he.get(m,S))!==null?Y:m[S]},propHooks:{tabIndex:{get:function(m){var S=I.find.attr(m,"tabindex");return S?parseInt(S,10):Jo.test(m.nodeName)||va.test(m.nodeName)&&m.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),we.optSelected||(I.propHooks.selected={get:function(m){var S=m.parentNode;return S&&S.parentNode&&S.parentNode.selectedIndex,null},set:function(m){var S=m.parentNode;S&&(S.selectedIndex,S.parentNode&&S.parentNode.selectedIndex)}}),I.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){I.propFix[this.toLowerCase()]=this});function Es(m){var S=m.match(Mn)||[];return S.join(" ")}function $t(m){return m.getAttribute&&m.getAttribute("class")||""}function Lo(m){return Array.isArray(m)?m:typeof m=="string"?m.match(Mn)||[]:[]}I.fn.extend({addClass:function(m){var S,j,Y,he,ye,ke,Ve,Xe=0;if(de(m))return this.each(function(wt){I(this).addClass(m.call(this,wt,$t(this)))});if(S=Lo(m),S.length){for(;j=this[Xe++];)if(he=$t(j),Y=j.nodeType===1&&" "+Es(he)+" ",Y){for(ke=0;ye=S[ke++];)Y.indexOf(" "+ye+" ")<0&&(Y+=ye+" ");Ve=Es(Y),he!==Ve&&j.setAttribute("class",Ve)}}return this},removeClass:function(m){var S,j,Y,he,ye,ke,Ve,Xe=0;if(de(m))return this.each(function(wt){I(this).removeClass(m.call(this,wt,$t(this)))});if(!arguments.length)return this.attr("class","");if(S=Lo(m),S.length){for(;j=this[Xe++];)if(he=$t(j),Y=j.nodeType===1&&" "+Es(he)+" ",Y){for(ke=0;ye=S[ke++];)for(;Y.indexOf(" "+ye+" ")>-1;)Y=Y.replace(" "+ye+" "," ");Ve=Es(Y),he!==Ve&&j.setAttribute("class",Ve)}}return this},toggleClass:function(m,S){var j=typeof m,Y=j==="string"||Array.isArray(m);return typeof S=="boolean"&&Y?S?this.addClass(m):this.removeClass(m):de(m)?this.each(function(he){I(this).toggleClass(m.call(this,he,$t(this),S),S)}):this.each(function(){var he,ye,ke,Ve;if(Y)for(ye=0,ke=I(this),Ve=Lo(m);he=Ve[ye++];)ke.hasClass(he)?ke.removeClass(he):ke.addClass(he);else(m===void 0||j==="boolean")&&(he=$t(this),he&&Pt.set(this,"__className__",he),this.setAttribute&&this.setAttribute("class",he||m===!1?"":Pt.get(this,"__className__")||""))})},hasClass:function(m){var S,j,Y=0;for(S=" "+m+" ";j=this[Y++];)if(j.nodeType===1&&(" "+Es($t(j))+" ").indexOf(S)>-1)return!0;return!1}});var Oa=/\r/g;I.fn.extend({val:function(m){var S,j,Y,he=this[0];return arguments.length?(Y=de(m),this.each(function(ye){var ke;this.nodeType===1&&(Y?ke=m.call(this,ye,I(this).val()):ke=m,ke==null?ke="":typeof ke=="number"?ke+="":Array.isArray(ke)&&(ke=I.map(ke,function(Ve){return Ve==null?"":Ve+""})),S=I.valHooks[this.type]||I.valHooks[this.nodeName.toLowerCase()],(!S||!("set"in S)||S.set(this,ke,"value")===void 0)&&(this.value=ke))})):he?(S=I.valHooks[he.type]||I.valHooks[he.nodeName.toLowerCase()],S&&"get"in S&&(j=S.get(he,"value"))!==void 0?j:(j=he.value,typeof j=="string"?j.replace(Oa,""):j==null?"":j)):void 0}}),I.extend({valHooks:{option:{get:function(m){var S=I.find.attr(m,"value");return S!=null?S:Es(I.text(m))}},select:{get:function(m){var S,j,Y,he=m.options,ye=m.selectedIndex,ke=m.type==="select-one",Ve=ke?null:[],Xe=ke?ye+1:he.length;for(ye<0?Y=Xe:Y=ke?ye:0;Y<Xe;Y++)if(j=he[Y],(j.selected||Y===ye)&&!j.disabled&&(!j.parentNode.disabled||!Ne(j.parentNode,"optgroup"))){if(S=I(j).val(),ke)return S;Ve.push(S)}return Ve},set:function(m,S){for(var j,Y,he=m.options,ye=I.makeArray(S),ke=he.length;ke--;)Y=he[ke],(Y.selected=I.inArray(I.valHooks.option.get(Y),ye)>-1)&&(j=!0);return j||(m.selectedIndex=-1),ye}}}}),I.each(["radio","checkbox"],function(){I.valHooks[this]={set:function(m,S){if(Array.isArray(S))return m.checked=I.inArray(I(m).val(),S)>-1}},we.checkOn||(I.valHooks[this].get=function(m){return m.getAttribute("value")===null?"on":m.value})}),we.focusin="onfocusin"in y;var ea=/^(?:focusinfocus|focusoutblur)$/,ao=function(m){m.stopPropagation()};I.extend(I.event,{trigger:function(m,S,j,Y){var he,ye,ke,Ve,Xe,wt,tn,mn,Xt=[j||F],Ln=G.call(m,"type")?m.type:m,si=G.call(m,"namespace")?m.namespace.split("."):[];if(ye=mn=ke=j=j||F,!(j.nodeType===3||j.nodeType===8)&&!ea.test(Ln+I.event.triggered)&&(Ln.indexOf(".")>-1&&(si=Ln.split("."),Ln=si.shift(),si.sort()),Xe=Ln.indexOf(":")<0&&"on"+Ln,m=m[I.expando]?m:new I.Event(Ln,typeof m=="object"&&m),m.isTrigger=Y?2:3,m.namespace=si.join("."),m.rnamespace=m.namespace?new RegExp("(^|\\.)"+si.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m.result=void 0,m.target||(m.target=j),S=S==null?[m]:I.makeArray(S,[m]),tn=I.event.special[Ln]||{},!(!Y&&tn.trigger&&tn.trigger.apply(j,S)===!1))){if(!Y&&!tn.noBubble&&!fe(j)){for(Ve=tn.delegateType||Ln,ea.test(Ve+Ln)||(ye=ye.parentNode);ye;ye=ye.parentNode)Xt.push(ye),ke=ye;ke===(j.ownerDocument||F)&&Xt.push(ke.defaultView||ke.parentWindow||y)}for(he=0;(ye=Xt[he++])&&!m.isPropagationStopped();)mn=ye,m.type=he>1?Ve:tn.bindType||Ln,wt=(Pt.get(ye,"events")||Object.create(null))[m.type]&&Pt.get(ye,"handle"),wt&&wt.apply(ye,S),wt=Xe&&ye[Xe],wt&&wt.apply&&wi(ye)&&(m.result=wt.apply(ye,S),m.result===!1&&m.preventDefault());return m.type=Ln,!Y&&!m.isDefaultPrevented()&&(!tn._default||tn._default.apply(Xt.pop(),S)===!1)&&wi(j)&&Xe&&de(j[Ln])&&!fe(j)&&(ke=j[Xe],ke&&(j[Xe]=null),I.event.triggered=Ln,m.isPropagationStopped()&&mn.addEventListener(Ln,ao),j[Ln](),m.isPropagationStopped()&&mn.removeEventListener(Ln,ao),I.event.triggered=void 0,ke&&(j[Xe]=ke)),m.result}},simulate:function(m,S,j){var Y=I.extend(new I.Event,j,{type:m,isSimulated:!0});I.event.trigger(Y,null,S)}}),I.fn.extend({trigger:function(m,S){return this.each(function(){I.event.trigger(m,S,this)})},triggerHandler:function(m,S){var j=this[0];if(j)return I.event.trigger(m,S,j,!0)}}),we.focusin||I.each({focus:"focusin",blur:"focusout"},function(m,S){var j=function(Y){I.event.simulate(S,Y.target,I.event.fix(Y))};I.event.special[S]={setup:function(){var Y=this.ownerDocument||this.document||this,he=Pt.access(Y,S);he||Y.addEventListener(m,j,!0),Pt.access(Y,S,(he||0)+1)},teardown:function(){var Y=this.ownerDocument||this.document||this,he=Pt.access(Y,S)-1;he?Pt.access(Y,S,he):(Y.removeEventListener(m,j,!0),Pt.remove(Y,S))}}});var _a=y.location,Ls={guid:Date.now()},ta=/\?/;I.parseXML=function(m){var S,j;if(!m||typeof m!="string")return null;try{S=new y.DOMParser().parseFromString(m,"text/xml")}catch(Y){}return j=S&&S.getElementsByTagName("parsererror")[0],(!S||j)&&I.error("Invalid XML: "+(j?I.map(j.childNodes,function(Y){return Y.textContent}).join(`
`):m)),S};var ya=/\[\]$/,Ka=/\r?\n/g,fl=/^(?:submit|button|image|reset|file)$/i,Pl=/^(?:input|select|textarea|keygen)/i;function Ga(m,S,j,Y){var he;if(Array.isArray(S))I.each(S,function(ye,ke){j||ya.test(m)?Y(m,ke):Ga(m+"["+(typeof ke=="object"&&ke!=null?ye:"")+"]",ke,j,Y)});else if(!j&&ae(S)==="object")for(he in S)Ga(m+"["+he+"]",S[he],j,Y);else Y(m,S)}I.param=function(m,S){var j,Y=[],he=function(ye,ke){var Ve=de(ke)?ke():ke;Y[Y.length]=encodeURIComponent(ye)+"="+encodeURIComponent(Ve==null?"":Ve)};if(m==null)return"";if(Array.isArray(m)||m.jquery&&!I.isPlainObject(m))I.each(m,function(){he(this.name,this.value)});else for(j in m)Ga(j,m[j],S,he);return Y.join("&")},I.fn.extend({serialize:function(){return I.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var m=I.prop(this,"elements");return m?I.makeArray(m):this}).filter(function(){var m=this.type;return this.name&&!I(this).is(":disabled")&&Pl.test(this.nodeName)&&!fl.test(m)&&(this.checked||!Fn.test(m))}).map(function(m,S){var j=I(this).val();return j==null?null:Array.isArray(j)?I.map(j,function(Y){return{name:S.name,value:Y.replace(Ka,`\r
`)}}):{name:S.name,value:j.replace(Ka,`\r
`)}}).get()}});var Ya=/%20/g,bc=/#.*$/,se=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)$/mg,Je=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Wt=/^(?:GET|HEAD)$/,gn=/^\/\//,Nn={},$n={},Un="*/".concat("*"),Ei=F.createElement("a");Ei.href=_a.href;function Ti(m){return function(S,j){typeof S!="string"&&(j=S,S="*");var Y,he=0,ye=S.toLowerCase().match(Mn)||[];if(de(j))for(;Y=ye[he++];)Y[0]==="+"?(Y=Y.slice(1)||"*",(m[Y]=m[Y]||[]).unshift(j)):(m[Y]=m[Y]||[]).push(j)}}function Hi(m,S,j,Y){var he={},ye=m===$n;function ke(Ve){var Xe;return he[Ve]=!0,I.each(m[Ve]||[],function(wt,tn){var mn=tn(S,j,Y);if(typeof mn=="string"&&!ye&&!he[mn])return S.dataTypes.unshift(mn),ke(mn),!1;if(ye)return!(Xe=mn)}),Xe}return ke(S.dataTypes[0])||!he["*"]&&ke("*")}function Mi(m,S){var j,Y,he=I.ajaxSettings.flatOptions||{};for(j in S)S[j]!==void 0&&((he[j]?m:Y||(Y={}))[j]=S[j]);return Y&&I.extend(!0,m,Y),m}function xi(m,S,j){for(var Y,he,ye,ke,Ve=m.contents,Xe=m.dataTypes;Xe[0]==="*";)Xe.shift(),Y===void 0&&(Y=m.mimeType||S.getResponseHeader("Content-Type"));if(Y){for(he in Ve)if(Ve[he]&&Ve[he].test(Y)){Xe.unshift(he);break}}if(Xe[0]in j)ye=Xe[0];else{for(he in j){if(!Xe[0]||m.converters[he+" "+Xe[0]]){ye=he;break}ke||(ke=he)}ye=ye||ke}if(ye)return ye!==Xe[0]&&Xe.unshift(ye),j[ye]}function Ir(m,S,j,Y){var he,ye,ke,Ve,Xe,wt={},tn=m.dataTypes.slice();if(tn[1])for(ke in m.converters)wt[ke.toLowerCase()]=m.converters[ke];for(ye=tn.shift();ye;)if(m.responseFields[ye]&&(j[m.responseFields[ye]]=S),!Xe&&Y&&m.dataFilter&&(S=m.dataFilter(S,m.dataType)),Xe=ye,ye=tn.shift(),ye){if(ye==="*")ye=Xe;else if(Xe!=="*"&&Xe!==ye){if(ke=wt[Xe+" "+ye]||wt["* "+ye],!ke){for(he in wt)if(Ve=he.split(" "),Ve[1]===ye&&(ke=wt[Xe+" "+Ve[0]]||wt["* "+Ve[0]],ke)){ke===!0?ke=wt[he]:wt[he]!==!0&&(ye=Ve[0],tn.unshift(Ve[1]));break}}if(ke!==!0)if(ke&&m.throws)S=ke(S);else try{S=ke(S)}catch(mn){return{state:"parsererror",error:ke?mn:"No conversion from "+Xe+" to "+ye}}}}return{state:"success",data:S}}I.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_a.href,type:"GET",isLocal:Je.test(_a.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Un,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":I.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(m,S){return S?Mi(Mi(m,I.ajaxSettings),S):Mi(I.ajaxSettings,m)},ajaxPrefilter:Ti(Nn),ajaxTransport:Ti($n),ajax:function(m,S){typeof m=="object"&&(S=m,m=void 0),S=S||{};var j,Y,he,ye,ke,Ve,Xe,wt,tn,mn,Xt=I.ajaxSetup({},S),Ln=Xt.context||Xt,si=Xt.context&&(Ln.nodeType||Ln.jquery)?I(Ln):I.event,ni=I.Deferred(),Gn=I.Callbacks("once memory"),ur=Xt.statusCode||{},zi={},hr={},ji="canceled",ai={readyState:0,getResponseHeader:function(cr){var ci;if(Xe){if(!ye)for(ye={};ci=Ie.exec(he);)ye[ci[1].toLowerCase()+" "]=(ye[ci[1].toLowerCase()+" "]||[]).concat(ci[2]);ci=ye[cr.toLowerCase()+" "]}return ci==null?null:ci.join(", ")},getAllResponseHeaders:function(){return Xe?he:null},setRequestHeader:function(cr,ci){return Xe==null&&(cr=hr[cr.toLowerCase()]=hr[cr.toLowerCase()]||cr,zi[cr]=ci),this},overrideMimeType:function(cr){return Xe==null&&(Xt.mimeType=cr),this},statusCode:function(cr){var ci;if(cr)if(Xe)ai.always(cr[ai.status]);else for(ci in cr)ur[ci]=[ur[ci],cr[ci]];return this},abort:function(cr){var ci=cr||ji;return j&&j.abort(ci),vr(0,ci),this}};if(ni.promise(ai),Xt.url=((m||Xt.url||_a.href)+"").replace(gn,_a.protocol+"//"),Xt.type=S.method||S.type||Xt.method||Xt.type,Xt.dataTypes=(Xt.dataType||"*").toLowerCase().match(Mn)||[""],Xt.crossDomain==null){Ve=F.createElement("a");try{Ve.href=Xt.url,Ve.href=Ve.href,Xt.crossDomain=Ei.protocol+"//"+Ei.host!=Ve.protocol+"//"+Ve.host}catch(cr){Xt.crossDomain=!0}}if(Xt.data&&Xt.processData&&typeof Xt.data!="string"&&(Xt.data=I.param(Xt.data,Xt.traditional)),Hi(Nn,Xt,S,ai),Xe)return ai;wt=I.event&&Xt.global,wt&&I.active++==0&&I.event.trigger("ajaxStart"),Xt.type=Xt.type.toUpperCase(),Xt.hasContent=!Wt.test(Xt.type),Y=Xt.url.replace(bc,""),Xt.hasContent?Xt.data&&Xt.processData&&(Xt.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Xt.data=Xt.data.replace(Ya,"+")):(mn=Xt.url.slice(Y.length),Xt.data&&(Xt.processData||typeof Xt.data=="string")&&(Y+=(ta.test(Y)?"&":"?")+Xt.data,delete Xt.data),Xt.cache===!1&&(Y=Y.replace(se,"$1"),mn=(ta.test(Y)?"&":"?")+"_="+Ls.guid+++mn),Xt.url=Y+mn),Xt.ifModified&&(I.lastModified[Y]&&ai.setRequestHeader("If-Modified-Since",I.lastModified[Y]),I.etag[Y]&&ai.setRequestHeader("If-None-Match",I.etag[Y])),(Xt.data&&Xt.hasContent&&Xt.contentType!==!1||S.contentType)&&ai.setRequestHeader("Content-Type",Xt.contentType),ai.setRequestHeader("Accept",Xt.dataTypes[0]&&Xt.accepts[Xt.dataTypes[0]]?Xt.accepts[Xt.dataTypes[0]]+(Xt.dataTypes[0]!=="*"?", "+Un+"; q=0.01":""):Xt.accepts["*"]);for(tn in Xt.headers)ai.setRequestHeader(tn,Xt.headers[tn]);if(Xt.beforeSend&&(Xt.beforeSend.call(Ln,ai,Xt)===!1||Xe))return ai.abort();if(ji="abort",Gn.add(Xt.complete),ai.done(Xt.success),ai.fail(Xt.error),j=Hi($n,Xt,S,ai),!j)vr(-1,"No Transport");else{if(ai.readyState=1,wt&&si.trigger("ajaxSend",[ai,Xt]),Xe)return ai;Xt.async&&Xt.timeout>0&&(ke=y.setTimeout(function(){ai.abort("timeout")},Xt.timeout));try{Xe=!1,j.send(zi,vr)}catch(cr){if(Xe)throw cr;vr(-1,cr)}}function vr(cr,ci,ns,Gs){var Xr,Hs,xo,Vr,Do,ir=ci;Xe||(Xe=!0,ke&&y.clearTimeout(ke),j=void 0,he=Gs||"",ai.readyState=cr>0?4:0,Xr=cr>=200&&cr<300||cr===304,ns&&(Vr=xi(Xt,ai,ns)),!Xr&&I.inArray("script",Xt.dataTypes)>-1&&I.inArray("json",Xt.dataTypes)<0&&(Xt.converters["text script"]=function(){}),Vr=Ir(Xt,Vr,ai,Xr),Xr?(Xt.ifModified&&(Do=ai.getResponseHeader("Last-Modified"),Do&&(I.lastModified[Y]=Do),Do=ai.getResponseHeader("etag"),Do&&(I.etag[Y]=Do)),cr===204||Xt.type==="HEAD"?ir="nocontent":cr===304?ir="notmodified":(ir=Vr.state,Hs=Vr.data,xo=Vr.error,Xr=!xo)):(xo=ir,(cr||!ir)&&(ir="error",cr<0&&(cr=0))),ai.status=cr,ai.statusText=(ci||ir)+"",Xr?ni.resolveWith(Ln,[Hs,ir,ai]):ni.rejectWith(Ln,[ai,ir,xo]),ai.statusCode(ur),ur=void 0,wt&&si.trigger(Xr?"ajaxSuccess":"ajaxError",[ai,Xt,Xr?Hs:xo]),Gn.fireWith(Ln,[ai,ir]),wt&&(si.trigger("ajaxComplete",[ai,Xt]),--I.active||I.event.trigger("ajaxStop")))}return ai},getJSON:function(m,S,j){return I.get(m,S,j,"json")},getScript:function(m,S){return I.get(m,void 0,S,"script")}}),I.each(["get","post"],function(m,S){I[S]=function(j,Y,he,ye){return de(Y)&&(ye=ye||he,he=Y,Y=void 0),I.ajax(I.extend({url:j,type:S,dataType:ye,data:Y,success:he},I.isPlainObject(j)&&j))}}),I.ajaxPrefilter(function(m){var S;for(S in m.headers)S.toLowerCase()==="content-type"&&(m.contentType=m.headers[S]||"")}),I._evalUrl=function(m,S,j){return I.ajax({url:m,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(Y){I.globalEval(Y,S,j)}})},I.fn.extend({wrapAll:function(m){var S;return this[0]&&(de(m)&&(m=m.call(this[0])),S=I(m,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&S.insertBefore(this[0]),S.map(function(){for(var j=this;j.firstElementChild;)j=j.firstElementChild;return j}).append(this)),this},wrapInner:function(m){return de(m)?this.each(function(S){I(this).wrapInner(m.call(this,S))}):this.each(function(){var S=I(this),j=S.contents();j.length?j.wrapAll(m):S.append(m)})},wrap:function(m){var S=de(m);return this.each(function(j){I(this).wrapAll(S?m.call(this,j):m)})},unwrap:function(m){return this.parent(m).not("body").each(function(){I(this).replaceWith(this.childNodes)}),this}}),I.expr.pseudos.hidden=function(m){return!I.expr.pseudos.visible(m)},I.expr.pseudos.visible=function(m){return!!(m.offsetWidth||m.offsetHeight||m.getClientRects().length)},I.ajaxSettings.xhr=function(){try{return new y.XMLHttpRequest}catch(m){}};var xr={0:200,1223:204},Or=I.ajaxSettings.xhr();we.cors=!!Or&&"withCredentials"in Or,we.ajax=Or=!!Or,I.ajaxTransport(function(m){var S,j;if(we.cors||Or&&!m.crossDomain)return{send:function(Y,he){var ye,ke=m.xhr();if(ke.open(m.type,m.url,m.async,m.username,m.password),m.xhrFields)for(ye in m.xhrFields)ke[ye]=m.xhrFields[ye];m.mimeType&&ke.overrideMimeType&&ke.overrideMimeType(m.mimeType),!m.crossDomain&&!Y["X-Requested-With"]&&(Y["X-Requested-With"]="XMLHttpRequest");for(ye in Y)ke.setRequestHeader(ye,Y[ye]);S=function(Ve){return function(){S&&(S=j=ke.onload=ke.onerror=ke.onabort=ke.ontimeout=ke.onreadystatechange=null,Ve==="abort"?ke.abort():Ve==="error"?typeof ke.status!="number"?he(0,"error"):he(ke.status,ke.statusText):he(xr[ke.status]||ke.status,ke.statusText,(ke.responseType||"text")!=="text"||typeof ke.responseText!="string"?{binary:ke.response}:{text:ke.responseText},ke.getAllResponseHeaders()))}},ke.onload=S(),j=ke.onerror=ke.ontimeout=S("error"),ke.onabort!==void 0?ke.onabort=j:ke.onreadystatechange=function(){ke.readyState===4&&y.setTimeout(function(){S&&j()})},S=S("abort");try{ke.send(m.hasContent&&m.data||null)}catch(Ve){if(S)throw Ve}},abort:function(){S&&S()}}}),I.ajaxPrefilter(function(m){m.crossDomain&&(m.contents.script=!1)}),I.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(m){return I.globalEval(m),m}}}),I.ajaxPrefilter("script",function(m){m.cache===void 0&&(m.cache=!1),m.crossDomain&&(m.type="GET")}),I.ajaxTransport("script",function(m){if(m.crossDomain||m.scriptAttrs){var S,j;return{send:function(Y,he){S=I("<script>").attr(m.scriptAttrs||{}).prop({charset:m.scriptCharset,src:m.url}).on("load error",j=function(ye){S.remove(),j=null,ye&&he(ye.type==="error"?404:200,ye.type)}),F.head.appendChild(S[0])},abort:function(){j&&j()}}}});var x=[],$=/(=)\?(?=&|$)|\?\?/;I.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var m=x.pop()||I.expando+"_"+Ls.guid++;return this[m]=!0,m}}),I.ajaxPrefilter("json jsonp",function(m,S,j){var Y,he,ye,ke=m.jsonp!==!1&&($.test(m.url)?"url":typeof m.data=="string"&&(m.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&$.test(m.data)&&"data");if(ke||m.dataTypes[0]==="jsonp")return Y=m.jsonpCallback=de(m.jsonpCallback)?m.jsonpCallback():m.jsonpCallback,ke?m[ke]=m[ke].replace($,"$1"+Y):m.jsonp!==!1&&(m.url+=(ta.test(m.url)?"&":"?")+m.jsonp+"="+Y),m.converters["script json"]=function(){return ye||I.error(Y+" was not called"),ye[0]},m.dataTypes[0]="json",he=y[Y],y[Y]=function(){ye=arguments},j.always(function(){he===void 0?I(y).removeProp(Y):y[Y]=he,m[Y]&&(m.jsonpCallback=S.jsonpCallback,x.push(Y)),ye&&de(he)&&he(ye[0]),ye=he=void 0}),"script"}),we.createHTMLDocument=function(){var m=F.implementation.createHTMLDocument("").body;return m.innerHTML="<form></form><form></form>",m.childNodes.length===2}(),I.parseHTML=function(m,S,j){if(typeof m!="string")return[];typeof S=="boolean"&&(j=S,S=!1);var Y,he,ye;return S||(we.createHTMLDocument?(S=F.implementation.createHTMLDocument(""),Y=S.createElement("base"),Y.href=F.location.href,S.head.appendChild(Y)):S=F),he=Ge.exec(m),ye=!j&&[],he?[S.createElement(he[1])]:(he=Dt([m],S,ye),ye&&ye.length&&I(ye).remove(),I.merge([],he.childNodes))},I.fn.load=function(m,S,j){var Y,he,ye,ke=this,Ve=m.indexOf(" ");return Ve>-1&&(Y=Es(m.slice(Ve)),m=m.slice(0,Ve)),de(S)?(j=S,S=void 0):S&&typeof S=="object"&&(he="POST"),ke.length>0&&I.ajax({url:m,type:he||"GET",dataType:"html",data:S}).done(function(Xe){ye=arguments,ke.html(Y?I("<div>").append(I.parseHTML(Xe)).find(Y):Xe)}).always(j&&function(Xe,wt){ke.each(function(){j.apply(this,ye||[Xe.responseText,wt,Xe])})}),this},I.expr.pseudos.animated=function(m){return I.grep(I.timers,function(S){return m===S.elem}).length},I.offset={setOffset:function(m,S,j){var Y,he,ye,ke,Ve,Xe,wt,tn=I.css(m,"position"),mn=I(m),Xt={};tn==="static"&&(m.style.position="relative"),Ve=mn.offset(),ye=I.css(m,"top"),Xe=I.css(m,"left"),wt=(tn==="absolute"||tn==="fixed")&&(ye+Xe).indexOf("auto")>-1,wt?(Y=mn.position(),ke=Y.top,he=Y.left):(ke=parseFloat(ye)||0,he=parseFloat(Xe)||0),de(S)&&(S=S.call(m,j,I.extend({},Ve))),S.top!=null&&(Xt.top=S.top-Ve.top+ke),S.left!=null&&(Xt.left=S.left-Ve.left+he),"using"in S?S.using.call(m,Xt):mn.css(Xt)}},I.fn.extend({offset:function(m){if(arguments.length)return m===void 0?this:this.each(function(he){I.offset.setOffset(this,m,he)});var S,j,Y=this[0];if(!!Y)return Y.getClientRects().length?(S=Y.getBoundingClientRect(),j=Y.ownerDocument.defaultView,{top:S.top+j.pageYOffset,left:S.left+j.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var m,S,j,Y=this[0],he={top:0,left:0};if(I.css(Y,"position")==="fixed")S=Y.getBoundingClientRect();else{for(S=this.offset(),j=Y.ownerDocument,m=Y.offsetParent||j.documentElement;m&&(m===j.body||m===j.documentElement)&&I.css(m,"position")==="static";)m=m.parentNode;m&&m!==Y&&m.nodeType===1&&(he=I(m).offset(),he.top+=I.css(m,"borderTopWidth",!0),he.left+=I.css(m,"borderLeftWidth",!0))}return{top:S.top-he.top-I.css(Y,"marginTop",!0),left:S.left-he.left-I.css(Y,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var m=this.offsetParent;m&&I.css(m,"position")==="static";)m=m.offsetParent;return m||Me})}}),I.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(m,S){var j=S==="pageYOffset";I.fn[m]=function(Y){return en(this,function(he,ye,ke){var Ve;if(fe(he)?Ve=he:he.nodeType===9&&(Ve=he.defaultView),ke===void 0)return Ve?Ve[S]:he[ye];Ve?Ve.scrollTo(j?Ve.pageXOffset:ke,j?ke:Ve.pageYOffset):he[ye]=ke},m,Y,arguments.length)}}),I.each(["top","left"],function(m,S){I.cssHooks[S]=En(we.pixelPosition,function(j,Y){if(Y)return Y=Lt(j,S),Cn.test(Y)?I(j).position()[S]+"px":Y})}),I.each({Height:"height",Width:"width"},function(m,S){I.each({padding:"inner"+m,content:S,"":"outer"+m},function(j,Y){I.fn[Y]=function(he,ye){var ke=arguments.length&&(j||typeof he!="boolean"),Ve=j||(he===!0||ye===!0?"margin":"border");return en(this,function(Xe,wt,tn){var mn;return fe(Xe)?Y.indexOf("outer")===0?Xe["inner"+m]:Xe.document.documentElement["client"+m]:Xe.nodeType===9?(mn=Xe.documentElement,Math.max(Xe.body["scroll"+m],mn["scroll"+m],Xe.body["offset"+m],mn["offset"+m],mn["client"+m])):tn===void 0?I.css(Xe,wt,Ve):I.style(Xe,wt,tn,Ve)},S,ke?he:void 0,ke)}})}),I.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(m,S){I.fn[S]=function(j){return this.on(S,j)}}),I.fn.extend({bind:function(m,S,j){return this.on(m,null,S,j)},unbind:function(m,S){return this.off(m,null,S)},delegate:function(m,S,j,Y){return this.on(S,m,j,Y)},undelegate:function(m,S,j){return arguments.length===1?this.off(m,"**"):this.off(S,m||"**",j)},hover:function(m,S){return this.mouseenter(m).mouseleave(S||m)}}),I.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(m,S){I.fn[S]=function(j,Y){return arguments.length>0?this.on(S,null,j,Y):this.trigger(S)}});var re=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;I.proxy=function(m,S){var j,Y,he;if(typeof S=="string"&&(j=m[S],S=m,m=j),!!de(m))return Y=C.call(arguments,2),he=function(){return m.apply(S||this,Y.concat(C.call(arguments)))},he.guid=m.guid=m.guid||I.guid++,he},I.holdReady=function(m){m?I.readyWait++:I.ready(!0)},I.isArray=Array.isArray,I.parseJSON=JSON.parse,I.nodeName=Ne,I.isFunction=de,I.isWindow=fe,I.camelCase=_i,I.type=ae,I.now=Date.now,I.isNumeric=function(m){var S=I.type(m);return(S==="number"||S==="string")&&!isNaN(m-parseFloat(m))},I.trim=function(m){return m==null?"":(m+"").replace(re,"")},f=[],g=function(){return I}.apply(Z,f),g!==void 0&&(w.exports=g);var ge=y.jQuery,Re=y.$;return I.noConflict=function(m){return y.$===I&&(y.$=Re),m&&y.jQuery===I&&(y.jQuery=ge),I},typeof A=="undefined"&&(y.jQuery=y.$=I),I})},5584:(w,Z,f)=>{var g=f(3893),y=f(3152),A=g(y,"DataView");w.exports=A},1703:(w,Z,f)=>{var g=f(4696),y=f(6824),A=f(3476),M=f(3122),E=f(7279);function C(D){var L=-1,O=D==null?0:D.length;for(this.clear();++L<O;){var R=D[L];this.set(R[0],R[1])}}C.prototype.clear=g,C.prototype.delete=y,C.prototype.get=A,C.prototype.has=M,C.prototype.set=E,w.exports=C},9746:(w,Z,f)=>{var g=f(4251),y=f(3418),A=f(8290),M=f(8068),E=f(4238);function C(D){var L=-1,O=D==null?0:D.length;for(this.clear();++L<O;){var R=D[L];this.set(R[0],R[1])}}C.prototype.clear=g,C.prototype.delete=y,C.prototype.get=A,C.prototype.has=M,C.prototype.set=E,w.exports=C},164:(w,Z,f)=>{var g=f(3893),y=f(3152),A=g(y,"Map");w.exports=A},2166:(w,Z,f)=>{var g=f(5365),y=f(3765),A=f(2608),M=f(203),E=f(1298);function C(D){var L=-1,O=D==null?0:D.length;for(this.clear();++L<O;){var R=D[L];this.set(R[0],R[1])}}C.prototype.clear=g,C.prototype.delete=y,C.prototype.get=A,C.prototype.has=M,C.prototype.set=E,w.exports=C},7288:(w,Z,f)=>{var g=f(3893),y=f(3152),A=g(y,"Promise");w.exports=A},3599:(w,Z,f)=>{var g=f(3893),y=f(3152),A=g(y,"Set");w.exports=A},8924:(w,Z,f)=>{var g=f(2166),y=f(4776),A=f(393);function M(E){var C=-1,D=E==null?0:E.length;for(this.__data__=new g;++C<D;)this.add(E[C])}M.prototype.add=M.prototype.push=y,M.prototype.has=A,w.exports=M},1866:(w,Z,f)=>{var g=f(9746),y=f(1119),A=f(4399),M=f(1897),E=f(558),C=f(4841);function D(L){var O=this.__data__=new g(L);this.size=O.size}D.prototype.clear=y,D.prototype.delete=A,D.prototype.get=M,D.prototype.has=E,D.prototype.set=C,w.exports=D},1869:(w,Z,f)=>{var g=f(3152),y=g.Symbol;w.exports=y},7945:(w,Z,f)=>{var g=f(3152),y=g.Uint8Array;w.exports=y},6873:(w,Z,f)=>{var g=f(3893),y=f(3152),A=g(y,"WeakMap");w.exports=A},9628:w=>{function Z(f,g,y){switch(y.length){case 0:return f.call(g);case 1:return f.call(g,y[0]);case 2:return f.call(g,y[0],y[1]);case 3:return f.call(g,y[0],y[1],y[2])}return f.apply(g,y)}w.exports=Z},4809:w=>{function Z(f,g){for(var y=-1,A=f==null?0:f.length;++y<A&&g(f[y],y,f)!==!1;);return f}w.exports=Z},6952:w=>{function Z(f,g){for(var y=-1,A=f==null?0:f.length,M=0,E=[];++y<A;){var C=f[y];g(C,y,f)&&(E[M++]=C)}return E}w.exports=Z},4271:(w,Z,f)=>{var g=f(7424);function y(A,M){var E=A==null?0:A.length;return!!E&&g(A,M,0)>-1}w.exports=y},4874:w=>{function Z(f,g,y){for(var A=-1,M=f==null?0:f.length;++A<M;)if(y(g,f[A]))return!0;return!1}w.exports=Z},3333:(w,Z,f)=>{var g=f(7943),y=f(3053),A=f(744),M=f(7835),E=f(213),C=f(8397),D=Object.prototype,L=D.hasOwnProperty;function O(R,W){var G=A(R),ie=!G&&y(R),q=!G&&!ie&&M(R),we=!G&&!ie&&!q&&C(R),de=G||ie||q||we,fe=de?g(R.length,String):[],F=fe.length;for(var be in R)(W||L.call(R,be))&&!(de&&(be=="length"||q&&(be=="offset"||be=="parent")||we&&(be=="buffer"||be=="byteLength"||be=="byteOffset")||E(be,F)))&&fe.push(be);return fe}w.exports=O},5010:w=>{function Z(f,g){for(var y=-1,A=f==null?0:f.length,M=Array(A);++y<A;)M[y]=g(f[y],y,f);return M}w.exports=Z},7095:w=>{function Z(f,g){for(var y=-1,A=g.length,M=f.length;++y<A;)f[M+y]=g[y];return f}w.exports=Z},9861:w=>{function Z(f,g,y,A){var M=-1,E=f==null?0:f.length;for(A&&E&&(y=f[++M]);++M<E;)y=g(y,f[M],M,f);return y}w.exports=Z},4045:w=>{function Z(f,g){for(var y=-1,A=f==null?0:f.length;++y<A;)if(g(f[y],y,f))return!0;return!1}w.exports=Z},6539:(w,Z,f)=>{var g=f(2310),y=g("length");w.exports=y},9135:(w,Z,f)=>{var g=f(2813),y=f(3607);function A(M,E,C){(C!==void 0&&!y(M[E],C)||C===void 0&&!(E in M))&&g(M,E,C)}w.exports=A},348:(w,Z,f)=>{var g=f(2813),y=f(3607),A=Object.prototype,M=A.hasOwnProperty;function E(C,D,L){var O=C[D];(!(M.call(C,D)&&y(O,L))||L===void 0&&!(D in C))&&g(C,D,L)}w.exports=E},7971:(w,Z,f)=>{var g=f(3607);function y(A,M){for(var E=A.length;E--;)if(g(A[E][0],M))return E;return-1}w.exports=y},1937:(w,Z,f)=>{var g=f(5378),y=f(5451);function A(M,E){return M&&g(E,y(E),M)}w.exports=A},6680:(w,Z,f)=>{var g=f(5378),y=f(6730);function A(M,E){return M&&g(E,y(E),M)}w.exports=A},2813:(w,Z,f)=>{var g=f(5234);function y(A,M,E){M=="__proto__"&&g?g(A,M,{configurable:!0,enumerable:!0,value:E,writable:!0}):A[M]=E}w.exports=y},9045:(w,Z,f)=>{var g=f(1866),y=f(4809),A=f(348),M=f(1937),E=f(6680),C=f(2315),D=f(7760),L=f(5168),O=f(1678),R=f(2076),W=f(2675),G=f(6139),ie=f(9264),q=f(7541),we=f(4084),de=f(744),fe=f(7835),F=f(1626),be=f(816),pe=f(5226),ae=f(5451),Q=f(6730),I=1,oe=2,te=4,ue="[object Arguments]",De="[object Array]",ve="[object Boolean]",Ne="[object Date]",Ge="[object Error]",$e="[object Function]",Be="[object GeneratorFunction]",mt="[object Map]",Ot="[object Number]",kt="[object Object]",Tt="[object RegExp]",Jt="[object Set]",Mn="[object String]",Yt="[object Symbol]",pn="[object WeakMap]",gt="[object ArrayBuffer]",_t="[object DataView]",Gt="[object Float32Array]",Ft="[object Float64Array]",zt="[object Int8Array]",en="[object Int16Array]",Bt="[object Int32Array]",an="[object Uint8Array]",Di="[object Uint8ClampedArray]",_i="[object Uint16Array]",wi="[object Uint32Array]",On={};On[ue]=On[De]=On[gt]=On[_t]=On[ve]=On[Ne]=On[Gt]=On[Ft]=On[zt]=On[en]=On[Bt]=On[mt]=On[Ot]=On[kt]=On[Tt]=On[Jt]=On[Mn]=On[Yt]=On[an]=On[Di]=On[_i]=On[wi]=!0,On[Ge]=On[$e]=On[pn]=!1;function Pt(et,Ci,li,kn,Ae,le){var ne,B=Ci&I,Me=Ci&oe,Ce=Ci&te;if(li&&(ne=Ae?li(et,kn,Ae,le):li(et)),ne!==void 0)return ne;if(!be(et))return et;var lt=de(et);if(lt){if(ne=ie(et),!B)return D(et,ne)}else{var vt=G(et),ft=vt==$e||vt==Be;if(fe(et))return C(et,B);if(vt==kt||vt==ue||ft&&!Ae){if(ne=Me||ft?{}:we(et),!B)return Me?O(et,E(ne,et)):L(et,M(ne,et))}else{if(!On[vt])return Ae?et:{};ne=q(et,vt,B)}}le||(le=new g);var ot=le.get(et);if(ot)return ot;le.set(et,ne),pe(et)?et.forEach(function(Fn){ne.add(Pt(Fn,Ci,li,Fn,et,le))}):F(et)&&et.forEach(function(Fn,Qn){ne.set(Qn,Pt(Fn,Ci,li,Qn,et,le))});var yt=Ce?Me?W:R:Me?Q:ae,Ut=lt?void 0:yt(et);return y(Ut||et,function(Fn,Qn){Ut&&(Qn=Fn,Fn=et[Qn]),A(ne,Qn,Pt(Fn,Ci,li,Qn,et,le))}),ne}w.exports=Pt},5024:(w,Z,f)=>{var g=f(816),y=Object.create,A=function(){function M(){}return function(E){if(!g(E))return{};if(y)return y(E);M.prototype=E;var C=new M;return M.prototype=void 0,C}}();w.exports=A},4107:(w,Z,f)=>{var g=f(1585),y=f(9164),A=y(g);w.exports=A},2659:(w,Z,f)=>{var g=f(5029);function y(A,M,E){for(var C=-1,D=A.length;++C<D;){var L=A[C],O=M(L);if(O!=null&&(R===void 0?O===O&&!g(O):E(O,R)))var R=O,W=L}return W}w.exports=y},2872:(w,Z,f)=>{var g=f(4107);function y(A,M){var E=[];return g(A,function(C,D,L){M(C,D,L)&&E.push(C)}),E}w.exports=y},1533:w=>{function Z(f,g,y,A){for(var M=f.length,E=y+(A?1:-1);A?E--:++E<M;)if(g(f[E],E,f))return E;return-1}w.exports=Z},9256:(w,Z,f)=>{var g=f(7095),y=f(8133);function A(M,E,C,D,L){var O=-1,R=M.length;for(C||(C=y),L||(L=[]);++O<R;){var W=M[O];E>0&&C(W)?E>1?A(W,E-1,C,D,L):g(L,W):D||(L[L.length]=W)}return L}w.exports=A},4018:(w,Z,f)=>{var g=f(8010),y=g();w.exports=y},1585:(w,Z,f)=>{var g=f(4018),y=f(5451);function A(M,E){return M&&g(M,E,y)}w.exports=A},9147:(w,Z,f)=>{var g=f(1186),y=f(9171);function A(M,E){E=g(E,M);for(var C=0,D=E.length;M!=null&&C<D;)M=M[y(E[C++])];return C&&C==D?M:void 0}w.exports=A},5635:(w,Z,f)=>{var g=f(7095),y=f(744);function A(M,E,C){var D=E(M);return y(M)?D:g(D,C(M))}w.exports=A},6756:(w,Z,f)=>{var g=f(1869),y=f(2533),A=f(4702),M="[object Null]",E="[object Undefined]",C=g?g.toStringTag:void 0;function D(L){return L==null?L===void 0?E:M:C&&C in Object(L)?y(L):A(L)}w.exports=D},302:w=>{function Z(f,g){return f>g}w.exports=Z},3251:w=>{var Z=Object.prototype,f=Z.hasOwnProperty;function g(y,A){return y!=null&&f.call(y,A)}w.exports=g},2348:w=>{function Z(f,g){return f!=null&&g in Object(f)}w.exports=Z},7424:(w,Z,f)=>{var g=f(1533),y=f(8373),A=f(9237);function M(E,C,D){return C===C?A(E,C,D):g(E,y,D)}w.exports=M},4977:(w,Z,f)=>{var g=f(6756),y=f(3913),A="[object Arguments]";function M(E){return y(E)&&g(E)==A}w.exports=M},7295:(w,Z,f)=>{var g=f(4412),y=f(3913);function A(M,E,C,D,L){return M===E?!0:M==null||E==null||!y(M)&&!y(E)?M!==M&&E!==E:g(M,E,C,D,A,L)}w.exports=A},4412:(w,Z,f)=>{var g=f(1866),y=f(401),A=f(7710),M=f(4983),E=f(6139),C=f(744),D=f(7835),L=f(8397),O=1,R="[object Arguments]",W="[object Array]",G="[object Object]",ie=Object.prototype,q=ie.hasOwnProperty;function we(de,fe,F,be,pe,ae){var Q=C(de),I=C(fe),oe=Q?W:E(de),te=I?W:E(fe);oe=oe==R?G:oe,te=te==R?G:te;var ue=oe==G,De=te==G,ve=oe==te;if(ve&&D(de)){if(!D(fe))return!1;Q=!0,ue=!1}if(ve&&!ue)return ae||(ae=new g),Q||L(de)?y(de,fe,F,be,pe,ae):A(de,fe,oe,F,be,pe,ae);if(!(F&O)){var Ne=ue&&q.call(de,"__wrapped__"),Ge=De&&q.call(fe,"__wrapped__");if(Ne||Ge){var $e=Ne?de.value():de,Be=Ge?fe.value():fe;return ae||(ae=new g),pe($e,Be,F,be,ae)}}return ve?(ae||(ae=new g),M(de,fe,F,be,pe,ae)):!1}w.exports=we},5005:(w,Z,f)=>{var g=f(6139),y=f(3913),A="[object Map]";function M(E){return y(E)&&g(E)==A}w.exports=M},1524:(w,Z,f)=>{var g=f(1866),y=f(7295),A=1,M=2;function E(C,D,L,O){var R=L.length,W=R,G=!O;if(C==null)return!W;for(C=Object(C);R--;){var ie=L[R];if(G&&ie[2]?ie[1]!==C[ie[0]]:!(ie[0]in C))return!1}for(;++R<W;){ie=L[R];var q=ie[0],we=C[q],de=ie[1];if(G&&ie[2]){if(we===void 0&&!(q in C))return!1}else{var fe=new g;if(O)var F=O(we,de,q,C,D,fe);if(!(F===void 0?y(de,we,A|M,O,fe):F))return!1}}return!0}w.exports=E},8373:w=>{function Z(f){return f!==f}w.exports=Z},6367:(w,Z,f)=>{var g=f(9363),y=f(9379),A=f(816),M=f(3256),E=/[\\^$.*+?()[\]{}|]/g,C=/^\[object .+?Constructor\]$/,D=Function.prototype,L=Object.prototype,O=D.toString,R=L.hasOwnProperty,W=RegExp("^"+O.call(R).replace(E,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function G(ie){if(!A(ie)||y(ie))return!1;var q=g(ie)?W:C;return q.test(M(ie))}w.exports=G},8652:(w,Z,f)=>{var g=f(6139),y=f(3913),A="[object Set]";function M(E){return y(E)&&g(E)==A}w.exports=M},766:(w,Z,f)=>{var g=f(6756),y=f(1156),A=f(3913),M="[object Arguments]",E="[object Array]",C="[object Boolean]",D="[object Date]",L="[object Error]",O="[object Function]",R="[object Map]",W="[object Number]",G="[object Object]",ie="[object RegExp]",q="[object Set]",we="[object String]",de="[object WeakMap]",fe="[object ArrayBuffer]",F="[object DataView]",be="[object Float32Array]",pe="[object Float64Array]",ae="[object Int8Array]",Q="[object Int16Array]",I="[object Int32Array]",oe="[object Uint8Array]",te="[object Uint8ClampedArray]",ue="[object Uint16Array]",De="[object Uint32Array]",ve={};ve[be]=ve[pe]=ve[ae]=ve[Q]=ve[I]=ve[oe]=ve[te]=ve[ue]=ve[De]=!0,ve[M]=ve[E]=ve[fe]=ve[C]=ve[F]=ve[D]=ve[L]=ve[O]=ve[R]=ve[W]=ve[G]=ve[ie]=ve[q]=ve[we]=ve[de]=!1;function Ne(Ge){return A(Ge)&&y(Ge.length)&&!!ve[g(Ge)]}w.exports=Ne},5979:(w,Z,f)=>{var g=f(7632),y=f(8933),A=f(6962),M=f(744),E=f(5769);function C(D){return typeof D=="function"?D:D==null?A:typeof D=="object"?M(D)?y(D[0],D[1]):g(D):E(D)}w.exports=C},6019:(w,Z,f)=>{var g=f(7975),y=f(3730),A=Object.prototype,M=A.hasOwnProperty;function E(C){if(!g(C))return y(C);var D=[];for(var L in Object(C))M.call(C,L)&&L!="constructor"&&D.push(L);return D}w.exports=E},3988:(w,Z,f)=>{var g=f(816),y=f(7975),A=f(7817),M=Object.prototype,E=M.hasOwnProperty;function C(D){if(!g(D))return A(D);var L=y(D),O=[];for(var R in D)R=="constructor"&&(L||!E.call(D,R))||O.push(R);return O}w.exports=C},3757:w=>{function Z(f,g){return f<g}w.exports=Z},5487:(w,Z,f)=>{var g=f(4107),y=f(4665);function A(M,E){var C=-1,D=y(M)?Array(M.length):[];return g(M,function(L,O,R){D[++C]=E(L,O,R)}),D}w.exports=A},7632:(w,Z,f)=>{var g=f(1524),y=f(261),A=f(4122);function M(E){var C=y(E);return C.length==1&&C[0][2]?A(C[0][0],C[0][1]):function(D){return D===E||g(D,E,C)}}w.exports=M},8933:(w,Z,f)=>{var g=f(7295),y=f(4231),A=f(7879),M=f(6773),E=f(8411),C=f(4122),D=f(9171),L=1,O=2;function R(W,G){return M(W)&&E(G)?C(D(W),G):function(ie){var q=y(ie,W);return q===void 0&&q===G?A(ie,W):g(G,q,L|O)}}w.exports=R},97:(w,Z,f)=>{var g=f(1866),y=f(9135),A=f(4018),M=f(3585),E=f(816),C=f(6730),D=f(7052);function L(O,R,W,G,ie){O!==R&&A(R,function(q,we){if(ie||(ie=new g),E(q))M(O,R,we,W,L,G,ie);else{var de=G?G(D(O,we),q,we+"",O,R,ie):void 0;de===void 0&&(de=q),y(O,we,de)}},C)}w.exports=L},3585:(w,Z,f)=>{var g=f(9135),y=f(2315),A=f(8358),M=f(7760),E=f(4084),C=f(3053),D=f(744),L=f(1590),O=f(7835),R=f(9363),W=f(816),G=f(9308),ie=f(8397),q=f(7052),we=f(480);function de(fe,F,be,pe,ae,Q,I){var oe=q(fe,be),te=q(F,be),ue=I.get(te);if(ue){g(fe,be,ue);return}var De=Q?Q(oe,te,be+"",fe,F,I):void 0,ve=De===void 0;if(ve){var Ne=D(te),Ge=!Ne&&O(te),$e=!Ne&&!Ge&&ie(te);De=te,Ne||Ge||$e?D(oe)?De=oe:L(oe)?De=M(oe):Ge?(ve=!1,De=y(te,!0)):$e?(ve=!1,De=A(te,!0)):De=[]:G(te)||C(te)?(De=oe,C(oe)?De=we(oe):(!W(oe)||R(oe))&&(De=E(te))):ve=!1}ve&&(I.set(te,De),ae(De,te,pe,Q,I),I.delete(te)),g(fe,be,De)}w.exports=de},8506:(w,Z,f)=>{var g=f(5010),y=f(9147),A=f(5979),M=f(5487),E=f(3065),C=f(8342),D=f(1249),L=f(6962),O=f(744);function R(W,G,ie){G.length?G=g(G,function(de){return O(de)?function(fe){return y(fe,de.length===1?de[0]:de)}:de}):G=[L];var q=-1;G=g(G,C(A));var we=M(W,function(de,fe,F){var be=g(G,function(pe){return pe(de)});return{criteria:be,index:++q,value:de}});return E(we,function(de,fe){return D(de,fe,ie)})}w.exports=R},8832:(w,Z,f)=>{var g=f(867),y=f(7879);function A(M,E){return g(M,E,function(C,D){return y(M,D)})}w.exports=A},867:(w,Z,f)=>{var g=f(9147),y=f(6897),A=f(1186);function M(E,C,D){for(var L=-1,O=C.length,R={};++L<O;){var W=C[L],G=g(E,W);D(G,W)&&y(R,A(W,E),G)}return R}w.exports=M},2310:w=>{function Z(f){return function(g){return g==null?void 0:g[f]}}w.exports=Z},6916:(w,Z,f)=>{var g=f(9147);function y(A){return function(M){return g(M,A)}}w.exports=y},6121:w=>{var Z=Math.ceil,f=Math.max;function g(y,A,M,E){for(var C=-1,D=f(Z((A-y)/(M||1)),0),L=Array(D);D--;)L[E?D:++C]=y,y+=M;return L}w.exports=g},739:w=>{function Z(f,g,y,A,M){return M(f,function(E,C,D){y=A?(A=!1,E):g(y,E,C,D)}),y}w.exports=Z},2918:(w,Z,f)=>{var g=f(6962),y=f(9652),A=f(1152);function M(E,C){return A(y(E,C,g),E+"")}w.exports=M},6897:(w,Z,f)=>{var g=f(348),y=f(1186),A=f(213),M=f(816),E=f(9171);function C(D,L,O,R){if(!M(D))return D;L=y(L,D);for(var W=-1,G=L.length,ie=G-1,q=D;q!=null&&++W<G;){var we=E(L[W]),de=O;if(we==="__proto__"||we==="constructor"||we==="prototype")return D;if(W!=ie){var fe=q[we];de=R?R(fe,we,q):void 0,de===void 0&&(de=M(fe)?fe:A(L[W+1])?[]:{})}g(q,we,de),q=q[we]}return D}w.exports=C},3989:(w,Z,f)=>{var g=f(3503),y=f(5234),A=f(6962),M=y?function(E,C){return y(E,"toString",{configurable:!0,enumerable:!1,value:g(C),writable:!0})}:A;w.exports=M},3065:w=>{function Z(f,g){var y=f.length;for(f.sort(g);y--;)f[y]=f[y].value;return f}w.exports=Z},7943:w=>{function Z(f,g){for(var y=-1,A=Array(f);++y<f;)A[y]=g(y);return A}w.exports=Z},230:(w,Z,f)=>{var g=f(1869),y=f(5010),A=f(744),M=f(5029),E=1/0,C=g?g.prototype:void 0,D=C?C.toString:void 0;function L(O){if(typeof O=="string")return O;if(A(O))return y(O,L)+"";if(M(O))return D?D.call(O):"";var R=O+"";return R=="0"&&1/O==-E?"-0":R}w.exports=L},3927:(w,Z,f)=>{var g=f(5333),y=/^\s+/;function A(M){return M&&M.slice(0,g(M)+1).replace(y,"")}w.exports=A},8342:w=>{function Z(f){return function(g){return f(g)}}w.exports=Z},9098:(w,Z,f)=>{var g=f(8924),y=f(4271),A=f(4874),M=f(1931),E=f(7506),C=f(9679),D=200;function L(O,R,W){var G=-1,ie=y,q=O.length,we=!0,de=[],fe=de;if(W)we=!1,ie=A;else if(q>=D){var F=R?null:E(O);if(F)return C(F);we=!1,ie=M,fe=new g}else fe=R?[]:de;e:for(;++G<q;){var be=O[G],pe=R?R(be):be;if(be=W||be!==0?be:0,we&&pe===pe){for(var ae=fe.length;ae--;)if(fe[ae]===pe)continue e;R&&fe.push(pe),de.push(be)}else ie(fe,pe,W)||(fe!==de&&fe.push(pe),de.push(be))}return de}w.exports=L},720:(w,Z,f)=>{var g=f(5010);function y(A,M){return g(M,function(E){return A[E]})}w.exports=y},4484:w=>{function Z(f,g,y){for(var A=-1,M=f.length,E=g.length,C={};++A<M;){var D=A<E?g[A]:void 0;y(C,f[A],D)}return C}w.exports=Z},1931:w=>{function Z(f,g){return f.has(g)}w.exports=Z},1756:(w,Z,f)=>{var g=f(6962);function y(A){return typeof A=="function"?A:g}w.exports=y},1186:(w,Z,f)=>{var g=f(744),y=f(6773),A=f(493),M=f(4140);function E(C,D){return g(C)?C:y(C,D)?[C]:A(M(C))}w.exports=E},188:(w,Z,f)=>{var g=f(7945);function y(A){var M=new A.constructor(A.byteLength);return new g(M).set(new g(A)),M}w.exports=y},2315:(w,Z,f)=>{w=f.nmd(w);var g=f(3152),y=Z&&!Z.nodeType&&Z,A=y&&!0&&w&&!w.nodeType&&w,M=A&&A.exports===y,E=M?g.Buffer:void 0,C=E?E.allocUnsafe:void 0;function D(L,O){if(O)return L.slice();var R=L.length,W=C?C(R):new L.constructor(R);return L.copy(W),W}w.exports=D},7984:(w,Z,f)=>{var g=f(188);function y(A,M){var E=M?g(A.buffer):A.buffer;return new A.constructor(E,A.byteOffset,A.byteLength)}w.exports=y},8583:w=>{var Z=/\w*$/;function f(g){var y=new g.constructor(g.source,Z.exec(g));return y.lastIndex=g.lastIndex,y}w.exports=f},8757:(w,Z,f)=>{var g=f(1869),y=g?g.prototype:void 0,A=y?y.valueOf:void 0;function M(E){return A?Object(A.call(E)):{}}w.exports=M},8358:(w,Z,f)=>{var g=f(188);function y(A,M){var E=M?g(A.buffer):A.buffer;return new A.constructor(E,A.byteOffset,A.length)}w.exports=y},3018:(w,Z,f)=>{var g=f(5029);function y(A,M){if(A!==M){var E=A!==void 0,C=A===null,D=A===A,L=g(A),O=M!==void 0,R=M===null,W=M===M,G=g(M);if(!R&&!G&&!L&&A>M||L&&O&&W&&!R&&!G||C&&O&&W||!E&&W||!D)return 1;if(!C&&!L&&!G&&A<M||G&&E&&D&&!C&&!L||R&&E&&D||!O&&D||!W)return-1}return 0}w.exports=y},1249:(w,Z,f)=>{var g=f(3018);function y(A,M,E){for(var C=-1,D=A.criteria,L=M.criteria,O=D.length,R=E.length;++C<O;){var W=g(D[C],L[C]);if(W){if(C>=R)return W;var G=E[C];return W*(G=="desc"?-1:1)}}return A.index-M.index}w.exports=y},7760:w=>{function Z(f,g){var y=-1,A=f.length;for(g||(g=Array(A));++y<A;)g[y]=f[y];return g}w.exports=Z},5378:(w,Z,f)=>{var g=f(348),y=f(2813);function A(M,E,C,D){var L=!C;C||(C={});for(var O=-1,R=E.length;++O<R;){var W=E[O],G=D?D(C[W],M[W],W,C,M):void 0;G===void 0&&(G=M[W]),L?y(C,W,G):g(C,W,G)}return C}w.exports=A},5168:(w,Z,f)=>{var g=f(5378),y=f(8966);function A(M,E){return g(M,y(M),E)}w.exports=A},1678:(w,Z,f)=>{var g=f(5378),y=f(6817);function A(M,E){return g(M,y(M),E)}w.exports=A},4218:(w,Z,f)=>{var g=f(3152),y=g["__core-js_shared__"];w.exports=y},3323:(w,Z,f)=>{var g=f(2918),y=f(8138);function A(M){return g(function(E,C){var D=-1,L=C.length,O=L>1?C[L-1]:void 0,R=L>2?C[2]:void 0;for(O=M.length>3&&typeof O=="function"?(L--,O):void 0,R&&y(C[0],C[1],R)&&(O=L<3?void 0:O,L=1),E=Object(E);++D<L;){var W=C[D];W&&M(E,W,D,O)}return E})}w.exports=A},9164:(w,Z,f)=>{var g=f(4665);function y(A,M){return function(E,C){if(E==null)return E;if(!g(E))return A(E,C);for(var D=E.length,L=M?D:-1,O=Object(E);(M?L--:++L<D)&&C(O[L],L,O)!==!1;);return E}}w.exports=y},8010:w=>{function Z(f){return function(g,y,A){for(var M=-1,E=Object(g),C=A(g),D=C.length;D--;){var L=C[f?D:++M];if(y(E[L],L,E)===!1)break}return g}}w.exports=Z},9554:(w,Z,f)=>{var g=f(5979),y=f(4665),A=f(5451);function M(E){return function(C,D,L){var O=Object(C);if(!y(C)){var R=g(D,3);C=A(C),D=function(G){return R(O[G],G,O)}}var W=E(C,D,L);return W>-1?O[R?C[W]:W]:void 0}}w.exports=M},6106:(w,Z,f)=>{var g=f(6121),y=f(8138),A=f(7341);function M(E){return function(C,D,L){return L&&typeof L!="number"&&y(C,D,L)&&(D=L=void 0),C=A(C),D===void 0?(D=C,C=0):D=A(D),L=L===void 0?C<D?1:-1:A(L),g(C,D,L,E)}}w.exports=M},7506:(w,Z,f)=>{var g=f(3599),y=f(9958),A=f(9679),M=1/0,E=g&&1/A(new g([,-0]))[1]==M?function(C){return new g(C)}:y;w.exports=E},5234:(w,Z,f)=>{var g=f(3893),y=function(){try{var A=g(Object,"defineProperty");return A({},"",{}),A}catch(M){}}();w.exports=y},401:(w,Z,f)=>{var g=f(8924),y=f(4045),A=f(1931),M=1,E=2;function C(D,L,O,R,W,G){var ie=O&M,q=D.length,we=L.length;if(q!=we&&!(ie&&we>q))return!1;var de=G.get(D),fe=G.get(L);if(de&&fe)return de==L&&fe==D;var F=-1,be=!0,pe=O&E?new g:void 0;for(G.set(D,L),G.set(L,D);++F<q;){var ae=D[F],Q=L[F];if(R)var I=ie?R(Q,ae,F,L,D,G):R(ae,Q,F,D,L,G);if(I!==void 0){if(I)continue;be=!1;break}if(pe){if(!y(L,function(oe,te){if(!A(pe,te)&&(ae===oe||W(ae,oe,O,R,G)))return pe.push(te)})){be=!1;break}}else if(!(ae===Q||W(ae,Q,O,R,G))){be=!1;break}}return G.delete(D),G.delete(L),be}w.exports=C},7710:(w,Z,f)=>{var g=f(1869),y=f(7945),A=f(3607),M=f(401),E=f(3383),C=f(9679),D=1,L=2,O="[object Boolean]",R="[object Date]",W="[object Error]",G="[object Map]",ie="[object Number]",q="[object RegExp]",we="[object Set]",de="[object String]",fe="[object Symbol]",F="[object ArrayBuffer]",be="[object DataView]",pe=g?g.prototype:void 0,ae=pe?pe.valueOf:void 0;function Q(I,oe,te,ue,De,ve,Ne){switch(te){case be:if(I.byteLength!=oe.byteLength||I.byteOffset!=oe.byteOffset)return!1;I=I.buffer,oe=oe.buffer;case F:return!(I.byteLength!=oe.byteLength||!ve(new y(I),new y(oe)));case O:case R:case ie:return A(+I,+oe);case W:return I.name==oe.name&&I.message==oe.message;case q:case de:return I==oe+"";case G:var Ge=E;case we:var $e=ue&D;if(Ge||(Ge=C),I.size!=oe.size&&!$e)return!1;var Be=Ne.get(I);if(Be)return Be==oe;ue|=L,Ne.set(I,oe);var mt=M(Ge(I),Ge(oe),ue,De,ve,Ne);return Ne.delete(I),mt;case fe:if(ae)return ae.call(I)==ae.call(oe)}return!1}w.exports=Q},4983:(w,Z,f)=>{var g=f(2076),y=1,A=Object.prototype,M=A.hasOwnProperty;function E(C,D,L,O,R,W){var G=L&y,ie=g(C),q=ie.length,we=g(D),de=we.length;if(q!=de&&!G)return!1;for(var fe=q;fe--;){var F=ie[fe];if(!(G?F in D:M.call(D,F)))return!1}var be=W.get(C),pe=W.get(D);if(be&&pe)return be==D&&pe==C;var ae=!0;W.set(C,D),W.set(D,C);for(var Q=G;++fe<q;){F=ie[fe];var I=C[F],oe=D[F];if(O)var te=G?O(oe,I,F,D,C,W):O(I,oe,F,C,D,W);if(!(te===void 0?I===oe||R(I,oe,L,O,W):te)){ae=!1;break}Q||(Q=F=="constructor")}if(ae&&!Q){var ue=C.constructor,De=D.constructor;ue!=De&&"constructor"in C&&"constructor"in D&&!(typeof ue=="function"&&ue instanceof ue&&typeof De=="function"&&De instanceof De)&&(ae=!1)}return W.delete(C),W.delete(D),ae}w.exports=E},522:(w,Z,f)=>{var g=f(151),y=f(9652),A=f(1152);function M(E){return A(y(E,void 0,g),E+"")}w.exports=M},7675:(w,Z,f)=>{var g=typeof f.g=="object"&&f.g&&f.g.Object===Object&&f.g;w.exports=g},2076:(w,Z,f)=>{var g=f(5635),y=f(8966),A=f(5451);function M(E){return g(E,A,y)}w.exports=M},2675:(w,Z,f)=>{var g=f(5635),y=f(6817),A=f(6730);function M(E){return g(E,A,y)}w.exports=M},9819:(w,Z,f)=>{var g=f(4358);function y(A,M){var E=A.__data__;return g(M)?E[typeof M=="string"?"string":"hash"]:E.map}w.exports=y},261:(w,Z,f)=>{var g=f(8411),y=f(5451);function A(M){for(var E=y(M),C=E.length;C--;){var D=E[C],L=M[D];E[C]=[D,L,g(L)]}return E}w.exports=A},3893:(w,Z,f)=>{var g=f(6367),y=f(9966);function A(M,E){var C=y(M,E);return g(C)?C:void 0}w.exports=A},9217:(w,Z,f)=>{var g=f(1030),y=g(Object.getPrototypeOf,Object);w.exports=y},2533:(w,Z,f)=>{var g=f(1869),y=Object.prototype,A=y.hasOwnProperty,M=y.toString,E=g?g.toStringTag:void 0;function C(D){var L=A.call(D,E),O=D[E];try{D[E]=void 0;var R=!0}catch(G){}var W=M.call(D);return R&&(L?D[E]=O:delete D[E]),W}w.exports=C},8966:(w,Z,f)=>{var g=f(6952),y=f(4134),A=Object.prototype,M=A.propertyIsEnumerable,E=Object.getOwnPropertySymbols,C=E?function(D){return D==null?[]:(D=Object(D),g(E(D),function(L){return M.call(D,L)}))}:y;w.exports=C},6817:(w,Z,f)=>{var g=f(7095),y=f(9217),A=f(8966),M=f(4134),E=Object.getOwnPropertySymbols,C=E?function(D){for(var L=[];D;)g(L,A(D)),D=y(D);return L}:M;w.exports=C},6139:(w,Z,f)=>{var g=f(5584),y=f(164),A=f(7288),M=f(3599),E=f(6873),C=f(6756),D=f(3256),L="[object Map]",O="[object Object]",R="[object Promise]",W="[object Set]",G="[object WeakMap]",ie="[object DataView]",q=D(g),we=D(y),de=D(A),fe=D(M),F=D(E),be=C;(g&&be(new g(new ArrayBuffer(1)))!=ie||y&&be(new y)!=L||A&&be(A.resolve())!=R||M&&be(new M)!=W||E&&be(new E)!=G)&&(be=function(pe){var ae=C(pe),Q=ae==O?pe.constructor:void 0,I=Q?D(Q):"";if(I)switch(I){case q:return ie;case we:return L;case de:return R;case fe:return W;case F:return G}return ae}),w.exports=be},9966:w=>{function Z(f,g){return f==null?void 0:f[g]}w.exports=Z},3100:(w,Z,f)=>{var g=f(1186),y=f(3053),A=f(744),M=f(213),E=f(1156),C=f(9171);function D(L,O,R){O=g(O,L);for(var W=-1,G=O.length,ie=!1;++W<G;){var q=C(O[W]);if(!(ie=L!=null&&R(L,q)))break;L=L[q]}return ie||++W!=G?ie:(G=L==null?0:L.length,!!G&&E(G)&&M(q,G)&&(A(L)||y(L)))}w.exports=D},5015:w=>{var Z="\\ud800-\\udfff",f="\\u0300-\\u036f",g="\\ufe20-\\ufe2f",y="\\u20d0-\\u20ff",A=f+g+y,M="\\ufe0e\\ufe0f",E="\\u200d",C=RegExp("["+E+Z+A+M+"]");function D(L){return C.test(L)}w.exports=D},4696:(w,Z,f)=>{var g=f(5294);function y(){this.__data__=g?g(null):{},this.size=0}w.exports=y},6824:w=>{function Z(f){var g=this.has(f)&&delete this.__data__[f];return this.size-=g?1:0,g}w.exports=Z},3476:(w,Z,f)=>{var g=f(5294),y="__lodash_hash_undefined__",A=Object.prototype,M=A.hasOwnProperty;function E(C){var D=this.__data__;if(g){var L=D[C];return L===y?void 0:L}return M.call(D,C)?D[C]:void 0}w.exports=E},3122:(w,Z,f)=>{var g=f(5294),y=Object.prototype,A=y.hasOwnProperty;function M(E){var C=this.__data__;return g?C[E]!==void 0:A.call(C,E)}w.exports=M},7279:(w,Z,f)=>{var g=f(5294),y="__lodash_hash_undefined__";function A(M,E){var C=this.__data__;return this.size+=this.has(M)?0:1,C[M]=g&&E===void 0?y:E,this}w.exports=A},9264:w=>{var Z=Object.prototype,f=Z.hasOwnProperty;function g(y){var A=y.length,M=new y.constructor(A);return A&&typeof y[0]=="string"&&f.call(y,"index")&&(M.index=y.index,M.input=y.input),M}w.exports=g},7541:(w,Z,f)=>{var g=f(188),y=f(7984),A=f(8583),M=f(8757),E=f(8358),C="[object Boolean]",D="[object Date]",L="[object Map]",O="[object Number]",R="[object RegExp]",W="[object Set]",G="[object String]",ie="[object Symbol]",q="[object ArrayBuffer]",we="[object DataView]",de="[object Float32Array]",fe="[object Float64Array]",F="[object Int8Array]",be="[object Int16Array]",pe="[object Int32Array]",ae="[object Uint8Array]",Q="[object Uint8ClampedArray]",I="[object Uint16Array]",oe="[object Uint32Array]";function te(ue,De,ve){var Ne=ue.constructor;switch(De){case q:return g(ue);case C:case D:return new Ne(+ue);case we:return y(ue,ve);case de:case fe:case F:case be:case pe:case ae:case Q:case I:case oe:return E(ue,ve);case L:return new Ne;case O:case G:return new Ne(ue);case R:return A(ue);case W:return new Ne;case ie:return M(ue)}}w.exports=te},4084:(w,Z,f)=>{var g=f(5024),y=f(9217),A=f(7975);function M(E){return typeof E.constructor=="function"&&!A(E)?g(y(E)):{}}w.exports=M},8133:(w,Z,f)=>{var g=f(1869),y=f(3053),A=f(744),M=g?g.isConcatSpreadable:void 0;function E(C){return A(C)||y(C)||!!(M&&C&&C[M])}w.exports=E},213:w=>{var Z=9007199254740991,f=/^(?:0|[1-9]\d*)$/;function g(y,A){var M=typeof y;return A=A==null?Z:A,!!A&&(M=="number"||M!="symbol"&&f.test(y))&&y>-1&&y%1==0&&y<A}w.exports=g},8138:(w,Z,f)=>{var g=f(3607),y=f(4665),A=f(213),M=f(816);function E(C,D,L){if(!M(L))return!1;var O=typeof D;return(O=="number"?y(L)&&A(D,L.length):O=="string"&&D in L)?g(L[D],C):!1}w.exports=E},6773:(w,Z,f)=>{var g=f(744),y=f(5029),A=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,M=/^\w*$/;function E(C,D){if(g(C))return!1;var L=typeof C;return L=="number"||L=="symbol"||L=="boolean"||C==null||y(C)?!0:M.test(C)||!A.test(C)||D!=null&&C in Object(D)}w.exports=E},4358:w=>{function Z(f){var g=typeof f;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?f!=="__proto__":f===null}w.exports=Z},9379:(w,Z,f)=>{var g=f(4218),y=function(){var M=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||"");return M?"Symbol(src)_1."+M:""}();function A(M){return!!y&&y in M}w.exports=A},7975:w=>{var Z=Object.prototype;function f(g){var y=g&&g.constructor,A=typeof y=="function"&&y.prototype||Z;return g===A}w.exports=f},8411:(w,Z,f)=>{var g=f(816);function y(A){return A===A&&!g(A)}w.exports=y},4251:w=>{function Z(){this.__data__=[],this.size=0}w.exports=Z},3418:(w,Z,f)=>{var g=f(7971),y=Array.prototype,A=y.splice;function M(E){var C=this.__data__,D=g(C,E);if(D<0)return!1;var L=C.length-1;return D==L?C.pop():A.call(C,D,1),--this.size,!0}w.exports=M},8290:(w,Z,f)=>{var g=f(7971);function y(A){var M=this.__data__,E=g(M,A);return E<0?void 0:M[E][1]}w.exports=y},8068:(w,Z,f)=>{var g=f(7971);function y(A){return g(this.__data__,A)>-1}w.exports=y},4238:(w,Z,f)=>{var g=f(7971);function y(A,M){var E=this.__data__,C=g(E,A);return C<0?(++this.size,E.push([A,M])):E[C][1]=M,this}w.exports=y},5365:(w,Z,f)=>{var g=f(1703),y=f(9746),A=f(164);function M(){this.size=0,this.__data__={hash:new g,map:new(A||y),string:new g}}w.exports=M},3765:(w,Z,f)=>{var g=f(9819);function y(A){var M=g(this,A).delete(A);return this.size-=M?1:0,M}w.exports=y},2608:(w,Z,f)=>{var g=f(9819);function y(A){return g(this,A).get(A)}w.exports=y},203:(w,Z,f)=>{var g=f(9819);function y(A){return g(this,A).has(A)}w.exports=y},1298:(w,Z,f)=>{var g=f(9819);function y(A,M){var E=g(this,A),C=E.size;return E.set(A,M),this.size+=E.size==C?0:1,this}w.exports=y},3383:w=>{function Z(f){var g=-1,y=Array(f.size);return f.forEach(function(A,M){y[++g]=[M,A]}),y}w.exports=Z},4122:w=>{function Z(f,g){return function(y){return y==null?!1:y[f]===g&&(g!==void 0||f in Object(y))}}w.exports=Z},6332:(w,Z,f)=>{var g=f(2858),y=500;function A(M){var E=g(M,function(D){return C.size===y&&C.clear(),D}),C=E.cache;return E}w.exports=A},5294:(w,Z,f)=>{var g=f(3893),y=g(Object,"create");w.exports=y},3730:(w,Z,f)=>{var g=f(1030),y=g(Object.keys,Object);w.exports=y},7817:w=>{function Z(f){var g=[];if(f!=null)for(var y in Object(f))g.push(y);return g}w.exports=Z},2495:(w,Z,f)=>{w=f.nmd(w);var g=f(7675),y=Z&&!Z.nodeType&&Z,A=y&&!0&&w&&!w.nodeType&&w,M=A&&A.exports===y,E=M&&g.process,C=function(){try{var D=A&&A.require&&A.require("util").types;return D||E&&E.binding&&E.binding("util")}catch(L){}}();w.exports=C},4702:w=>{var Z=Object.prototype,f=Z.toString;function g(y){return f.call(y)}w.exports=g},1030:w=>{function Z(f,g){return function(y){return f(g(y))}}w.exports=Z},9652:(w,Z,f)=>{var g=f(9628),y=Math.max;function A(M,E,C){return E=y(E===void 0?M.length-1:E,0),function(){for(var D=arguments,L=-1,O=y(D.length-E,0),R=Array(O);++L<O;)R[L]=D[E+L];L=-1;for(var W=Array(E+1);++L<E;)W[L]=D[L];return W[E]=C(R),g(M,this,W)}}w.exports=A},3152:(w,Z,f)=>{var g=f(7675),y=typeof self=="object"&&self&&self.Object===Object&&self,A=g||y||Function("return this")();w.exports=A},7052:w=>{function Z(f,g){if(!(g==="constructor"&&typeof f[g]=="function")&&g!="__proto__")return f[g]}w.exports=Z},4776:w=>{var Z="__lodash_hash_undefined__";function f(g){return this.__data__.set(g,Z),this}w.exports=f},393:w=>{function Z(f){return this.__data__.has(f)}w.exports=Z},9679:w=>{function Z(f){var g=-1,y=Array(f.size);return f.forEach(function(A){y[++g]=A}),y}w.exports=Z},1152:(w,Z,f)=>{var g=f(3989),y=f(8437),A=y(g);w.exports=A},8437:w=>{var Z=800,f=16,g=Date.now;function y(A){var M=0,E=0;return function(){var C=g(),D=f-(C-E);if(E=C,D>0){if(++M>=Z)return arguments[0]}else M=0;return A.apply(void 0,arguments)}}w.exports=y},1119:(w,Z,f)=>{var g=f(9746);function y(){this.__data__=new g,this.size=0}w.exports=y},4399:w=>{function Z(f){var g=this.__data__,y=g.delete(f);return this.size=g.size,y}w.exports=Z},1897:w=>{function Z(f){return this.__data__.get(f)}w.exports=Z},558:w=>{function Z(f){return this.__data__.has(f)}w.exports=Z},4841:(w,Z,f)=>{var g=f(9746),y=f(164),A=f(2166),M=200;function E(C,D){var L=this.__data__;if(L instanceof g){var O=L.__data__;if(!y||O.length<M-1)return O.push([C,D]),this.size=++L.size,this;L=this.__data__=new A(O)}return L.set(C,D),this.size=L.size,this}w.exports=E},9237:w=>{function Z(f,g,y){for(var A=y-1,M=f.length;++A<M;)if(f[A]===g)return A;return-1}w.exports=Z},9405:(w,Z,f)=>{var g=f(6539),y=f(5015),A=f(844);function M(E){return y(E)?A(E):g(E)}w.exports=M},493:(w,Z,f)=>{var g=f(6332),y=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,A=/\\(\\)?/g,M=g(function(E){var C=[];return E.charCodeAt(0)===46&&C.push(""),E.replace(y,function(D,L,O,R){C.push(O?R.replace(A,"$1"):L||D)}),C});w.exports=M},9171:(w,Z,f)=>{var g=f(5029),y=1/0;function A(M){if(typeof M=="string"||g(M))return M;var E=M+"";return E=="0"&&1/M==-y?"-0":E}w.exports=A},3256:w=>{var Z=Function.prototype,f=Z.toString;function g(y){if(y!=null){try{return f.call(y)}catch(A){}try{return y+""}catch(A){}}return""}w.exports=g},5333:w=>{var Z=/\s/;function f(g){for(var y=g.length;y--&&Z.test(g.charAt(y)););return y}w.exports=f},844:w=>{var Z="\\ud800-\\udfff",f="\\u0300-\\u036f",g="\\ufe20-\\ufe2f",y="\\u20d0-\\u20ff",A=f+g+y,M="\\ufe0e\\ufe0f",E="["+Z+"]",C="["+A+"]",D="\\ud83c[\\udffb-\\udfff]",L="(?:"+C+"|"+D+")",O="[^"+Z+"]",R="(?:\\ud83c[\\udde6-\\uddff]){2}",W="[\\ud800-\\udbff][\\udc00-\\udfff]",G="\\u200d",ie=L+"?",q="["+M+"]?",we="(?:"+G+"(?:"+[O,R,W].join("|")+")"+q+ie+")*",de=q+ie+we,fe="(?:"+[O+C+"?",C,R,W,E].join("|")+")",F=RegExp(D+"(?="+D+")|"+fe+de,"g");function be(pe){for(var ae=F.lastIndex=0;F.test(pe);)++ae;return ae}w.exports=be},6833:(w,Z,f)=>{var g=f(9045),y=4;function A(M){return g(M,y)}w.exports=A},250:(w,Z,f)=>{var g=f(9045),y=1,A=4;function M(E){return g(E,y|A)}w.exports=M},3503:w=>{function Z(f){return function(){return f}}w.exports=Z},8548:(w,Z,f)=>{var g=f(2918),y=f(3607),A=f(8138),M=f(6730),E=Object.prototype,C=E.hasOwnProperty,D=g(function(L,O){L=Object(L);var R=-1,W=O.length,G=W>2?O[2]:void 0;for(G&&A(O[0],O[1],G)&&(W=1);++R<W;)for(var ie=O[R],q=M(ie),we=-1,de=q.length;++we<de;){var fe=q[we],F=L[fe];(F===void 0||y(F,E[fe])&&!C.call(L,fe))&&(L[fe]=ie[fe])}return L});w.exports=D},6934:(w,Z,f)=>{w.exports=f(9204)},3607:w=>{function Z(f,g){return f===g||f!==f&&g!==g}w.exports=Z},4725:(w,Z,f)=>{var g=f(6952),y=f(2872),A=f(5979),M=f(744);function E(C,D){var L=M(C)?g:y;return L(C,A(D,3))}w.exports=E},9785:(w,Z,f)=>{var g=f(9554),y=f(9991),A=g(y);w.exports=A},9991:(w,Z,f)=>{var g=f(1533),y=f(5979),A=f(2824),M=Math.max;function E(C,D,L){var O=C==null?0:C.length;if(!O)return-1;var R=L==null?0:A(L);return R<0&&(R=M(O+R,0)),g(C,y(D,3),R)}w.exports=E},151:(w,Z,f)=>{var g=f(9256);function y(A){var M=A==null?0:A.length;return M?g(A,1):[]}w.exports=y},9204:(w,Z,f)=>{var g=f(4809),y=f(4107),A=f(1756),M=f(744);function E(C,D){var L=M(C)?g:y;return L(C,A(D))}w.exports=E},3190:(w,Z,f)=>{var g=f(4018),y=f(1756),A=f(6730);function M(E,C){return E==null?E:g(E,y(C),A)}w.exports=M},4231:(w,Z,f)=>{var g=f(9147);function y(A,M,E){var C=A==null?void 0:g(A,M);return C===void 0?E:C}w.exports=y},9946:(w,Z,f)=>{var g=f(3251),y=f(3100);function A(M,E){return M!=null&&y(M,E,g)}w.exports=A},7879:(w,Z,f)=>{var g=f(2348),y=f(3100);function A(M,E){return M!=null&&y(M,E,g)}w.exports=A},6962:w=>{function Z(f){return f}w.exports=Z},3053:(w,Z,f)=>{var g=f(4977),y=f(3913),A=Object.prototype,M=A.hasOwnProperty,E=A.propertyIsEnumerable,C=g(function(){return arguments}())?g:function(D){return y(D)&&M.call(D,"callee")&&!E.call(D,"callee")};w.exports=C},744:w=>{var Z=Array.isArray;w.exports=Z},4665:(w,Z,f)=>{var g=f(9363),y=f(1156);function A(M){return M!=null&&y(M.length)&&!g(M)}w.exports=A},1590:(w,Z,f)=>{var g=f(4665),y=f(3913);function A(M){return y(M)&&g(M)}w.exports=A},7835:(w,Z,f)=>{w=f.nmd(w);var g=f(3152),y=f(5950),A=Z&&!Z.nodeType&&Z,M=A&&!0&&w&&!w.nodeType&&w,E=M&&M.exports===A,C=E?g.Buffer:void 0,D=C?C.isBuffer:void 0,L=D||y;w.exports=L},1627:(w,Z,f)=>{var g=f(6019),y=f(6139),A=f(3053),M=f(744),E=f(4665),C=f(7835),D=f(7975),L=f(8397),O="[object Map]",R="[object Set]",W=Object.prototype,G=W.hasOwnProperty;function ie(q){if(q==null)return!0;if(E(q)&&(M(q)||typeof q=="string"||typeof q.splice=="function"||C(q)||L(q)||A(q)))return!q.length;var we=y(q);if(we==O||we==R)return!q.size;if(D(q))return!g(q).length;for(var de in q)if(G.call(q,de))return!1;return!0}w.exports=ie},9363:(w,Z,f)=>{var g=f(6756),y=f(816),A="[object AsyncFunction]",M="[object Function]",E="[object GeneratorFunction]",C="[object Proxy]";function D(L){if(!y(L))return!1;var O=g(L);return O==M||O==E||O==A||O==C}w.exports=D},1156:w=>{var Z=9007199254740991;function f(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=Z}w.exports=f},1626:(w,Z,f)=>{var g=f(5005),y=f(8342),A=f(2495),M=A&&A.isMap,E=M?y(M):g;w.exports=E},816:w=>{function Z(f){var g=typeof f;return f!=null&&(g=="object"||g=="function")}w.exports=Z},3913:w=>{function Z(f){return f!=null&&typeof f=="object"}w.exports=Z},9308:(w,Z,f)=>{var g=f(6756),y=f(9217),A=f(3913),M="[object Object]",E=Function.prototype,C=Object.prototype,D=E.toString,L=C.hasOwnProperty,O=D.call(Object);function R(W){if(!A(W)||g(W)!=M)return!1;var G=y(W);if(G===null)return!0;var ie=L.call(G,"constructor")&&G.constructor;return typeof ie=="function"&&ie instanceof ie&&D.call(ie)==O}w.exports=R},5226:(w,Z,f)=>{var g=f(8652),y=f(8342),A=f(2495),M=A&&A.isSet,E=M?y(M):g;w.exports=E},7941:(w,Z,f)=>{var g=f(6756),y=f(744),A=f(3913),M="[object String]";function E(C){return typeof C=="string"||!y(C)&&A(C)&&g(C)==M}w.exports=E},5029:(w,Z,f)=>{var g=f(6756),y=f(3913),A="[object Symbol]";function M(E){return typeof E=="symbol"||y(E)&&g(E)==A}w.exports=M},8397:(w,Z,f)=>{var g=f(766),y=f(8342),A=f(2495),M=A&&A.isTypedArray,E=M?y(M):g;w.exports=E},6513:w=>{function Z(f){return f===void 0}w.exports=Z},5451:(w,Z,f)=>{var g=f(3333),y=f(6019),A=f(4665);function M(E){return A(E)?g(E):y(E)}w.exports=M},6730:(w,Z,f)=>{var g=f(3333),y=f(3988),A=f(4665);function M(E){return A(E)?g(E,!0):y(E)}w.exports=M},611:w=>{function Z(f){var g=f==null?0:f.length;return g?f[g-1]:void 0}w.exports=Z},9392:function(w,Z,f){w=f.nmd(w);var g;/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(){var y,A="4.17.21",M=200,E="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",C="Expected a function",D="Invalid `variable` option passed into `_.template`",L="__lodash_hash_undefined__",O=500,R="__lodash_placeholder__",W=1,G=2,ie=4,q=1,we=2,de=1,fe=2,F=4,be=8,pe=16,ae=32,Q=64,I=128,oe=256,te=512,ue=30,De="...",ve=800,Ne=16,Ge=1,$e=2,Be=3,mt=1/0,Ot=9007199254740991,kt=17976931348623157e292,Tt=0/0,Jt=4294967295,Mn=Jt-1,Yt=Jt>>>1,pn=[["ary",I],["bind",de],["bindKey",fe],["curry",be],["curryRight",pe],["flip",te],["partial",ae],["partialRight",Q],["rearg",oe]],gt="[object Arguments]",_t="[object Array]",Gt="[object AsyncFunction]",Ft="[object Boolean]",zt="[object Date]",en="[object DOMException]",Bt="[object Error]",an="[object Function]",Di="[object GeneratorFunction]",_i="[object Map]",wi="[object Number]",On="[object Null]",Pt="[object Object]",et="[object Promise]",Ci="[object Proxy]",li="[object RegExp]",kn="[object Set]",Ae="[object String]",le="[object Symbol]",ne="[object Undefined]",B="[object WeakMap]",Me="[object WeakSet]",Ce="[object ArrayBuffer]",lt="[object DataView]",vt="[object Float32Array]",ft="[object Float64Array]",ot="[object Int8Array]",yt="[object Int16Array]",Ut="[object Int32Array]",Fn="[object Uint8Array]",Qn="[object Uint8ClampedArray]",Fe="[object Uint16Array]",ct="[object Uint32Array]",ut=/\b__p \+= '';/g,jt=/\b(__p \+=) '' \+/g,qt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Dt=/&(?:amp|lt|gt|quot|#39);/g,hn=/[&<>"']/g,Rt=RegExp(Dt.source),nn=RegExp(hn.source),ln=/<%-([\s\S]+?)%>/g,_e=/<%([\s\S]+?)%>/g,V=/<%=([\s\S]+?)%>/g,H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,T=/^\w*$/,z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,J=/[\\^$.*+?()[\]{}|]/g,Pe=RegExp(J.source),Oe=/^\s+/,Ue=/\s/,qe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ct=/\{\n\/\* \[wrapped with (.+)\] \*/,dt=/,? & /,Et=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Cn=/[()=,{}\[\]\/\s]/,st=/\\(\\)?/g,Zt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zn=/\w*$/,Lt=/^[-+]0x[0-9a-f]+$/i,En=/^0b[01]+$/i,qn=/^\[object .+?Constructor\]$/,ui=/^0o[0-7]+$/i,Ai=/^(?:0|[1-9]\d*)$/,or=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hn=/($^)/,Jn=/['\n\r\u2028\u2029\\]/g,Ii="\\ud800-\\udfff",ti="\\u0300-\\u036f",Ht="\\ufe20-\\ufe2f",Bn="\\u20d0-\\u20ff",Xn=ti+Ht+Bn,Kn="\\u2700-\\u27bf",Bi="a-z\\xdf-\\xf6\\xf8-\\xff",br="\\xac\\xb1\\xd7\\xf7",Vi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",lr="\\u2000-\\u206f",Qi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",gi="A-Z\\xc0-\\xd6\\xd8-\\xde",Rn="\\ufe0e\\ufe0f",vs=br+Vi+lr+Qi,Ss="['\u2019]",Si="["+Ii+"]",Lr="["+vs+"]",mr="["+Xn+"]",Wr="\\d+",ei="["+Kn+"]",Jo="["+Bi+"]",va="[^"+Ii+vs+Wr+Kn+Bi+gi+"]",Es="\\ud83c[\\udffb-\\udfff]",$t="(?:"+mr+"|"+Es+")",Lo="[^"+Ii+"]",Oa="(?:\\ud83c[\\udde6-\\uddff]){2}",ea="[\\ud800-\\udbff][\\udc00-\\udfff]",ao="["+gi+"]",_a="\\u200d",Ls="(?:"+Jo+"|"+va+")",ta="(?:"+ao+"|"+va+")",ya="(?:"+Ss+"(?:d|ll|m|re|s|t|ve))?",Ka="(?:"+Ss+"(?:D|LL|M|RE|S|T|VE))?",fl=$t+"?",Pl="["+Rn+"]?",Ga="(?:"+_a+"(?:"+[Lo,Oa,ea].join("|")+")"+Pl+fl+")*",Ya="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",bc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",se=Pl+fl+Ga,Ie="(?:"+[ei,Oa,ea].join("|")+")"+se,Je="(?:"+[Lo+mr+"?",mr,Oa,ea,Si].join("|")+")",Wt=RegExp(Ss,"g"),gn=RegExp(mr,"g"),Nn=RegExp(Es+"(?="+Es+")|"+Je+se,"g"),$n=RegExp([ao+"?"+Jo+"+"+ya+"(?="+[Lr,ao,"$"].join("|")+")",ta+"+"+Ka+"(?="+[Lr,ao+Ls,"$"].join("|")+")",ao+"?"+Ls+"+"+ya,ao+"+"+Ka,bc,Ya,Wr,Ie].join("|"),"g"),Un=RegExp("["+_a+Ii+Xn+Rn+"]"),Ei=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ti=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Hi=-1,Mi={};Mi[vt]=Mi[ft]=Mi[ot]=Mi[yt]=Mi[Ut]=Mi[Fn]=Mi[Qn]=Mi[Fe]=Mi[ct]=!0,Mi[gt]=Mi[_t]=Mi[Ce]=Mi[Ft]=Mi[lt]=Mi[zt]=Mi[Bt]=Mi[an]=Mi[_i]=Mi[wi]=Mi[Pt]=Mi[li]=Mi[kn]=Mi[Ae]=Mi[B]=!1;var xi={};xi[gt]=xi[_t]=xi[Ce]=xi[lt]=xi[Ft]=xi[zt]=xi[vt]=xi[ft]=xi[ot]=xi[yt]=xi[Ut]=xi[_i]=xi[wi]=xi[Pt]=xi[li]=xi[kn]=xi[Ae]=xi[le]=xi[Fn]=xi[Qn]=xi[Fe]=xi[ct]=!0,xi[Bt]=xi[an]=xi[B]=!1;var Ir={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},xr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Or={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},x={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$=parseFloat,re=parseInt,ge=typeof f.g=="object"&&f.g&&f.g.Object===Object&&f.g,Re=typeof self=="object"&&self&&self.Object===Object&&self,m=ge||Re||Function("return this")(),S=Z&&!Z.nodeType&&Z,j=S&&!0&&w&&!w.nodeType&&w,Y=j&&j.exports===S,he=Y&&ge.process,ye=function(){try{var At=j&&j.require&&j.require("util").types;return At||he&&he.binding&&he.binding("util")}catch(bn){}}(),ke=ye&&ye.isArrayBuffer,Ve=ye&&ye.isDate,Xe=ye&&ye.isMap,wt=ye&&ye.isRegExp,tn=ye&&ye.isSet,mn=ye&&ye.isTypedArray;function Xt(At,bn,sn){switch(sn.length){case 0:return At.call(bn);case 1:return At.call(bn,sn[0]);case 2:return At.call(bn,sn[0],sn[1]);case 3:return At.call(bn,sn[0],sn[1],sn[2])}return At.apply(bn,sn)}function Ln(At,bn,sn,fi){for(var Ji=-1,Ke=At==null?0:At.length;++Ji<Ke;){var bt=At[Ji];bn(fi,bt,sn(bt),At)}return fi}function si(At,bn){for(var sn=-1,fi=At==null?0:At.length;++sn<fi&&bn(At[sn],sn,At)!==!1;);return At}function ni(At,bn){for(var sn=At==null?0:At.length;sn--&&bn(At[sn],sn,At)!==!1;);return At}function Gn(At,bn){for(var sn=-1,fi=At==null?0:At.length;++sn<fi;)if(!bn(At[sn],sn,At))return!1;return!0}function ur(At,bn){for(var sn=-1,fi=At==null?0:At.length,Ji=0,Ke=[];++sn<fi;){var bt=At[sn];bn(bt,sn,At)&&(Ke[Ji++]=bt)}return Ke}function zi(At,bn){var sn=At==null?0:At.length;return!!sn&&Vr(At,bn,0)>-1}function hr(At,bn,sn){for(var fi=-1,Ji=At==null?0:At.length;++fi<Ji;)if(sn(bn,At[fi]))return!0;return!1}function ji(At,bn){for(var sn=-1,fi=At==null?0:At.length,Ji=Array(fi);++sn<fi;)Ji[sn]=bn(At[sn],sn,At);return Ji}function ai(At,bn){for(var sn=-1,fi=bn.length,Ji=At.length;++sn<fi;)At[Ji+sn]=bn[sn];return At}function vr(At,bn,sn,fi){var Ji=-1,Ke=At==null?0:At.length;for(fi&&Ke&&(sn=At[++Ji]);++Ji<Ke;)sn=bn(sn,At[Ji],Ji,At);return sn}function cr(At,bn,sn,fi){var Ji=At==null?0:At.length;for(fi&&Ji&&(sn=At[--Ji]);Ji--;)sn=bn(sn,At[Ji],Ji,At);return sn}function ci(At,bn){for(var sn=-1,fi=At==null?0:At.length;++sn<fi;)if(bn(At[sn],sn,At))return!0;return!1}var ns=ba("length");function Gs(At){return At.split("")}function Xr(At){return At.match(Et)||[]}function Hs(At,bn,sn){var fi;return sn(At,function(Ji,Ke,bt){if(bn(Ji,Ke,bt))return fi=Ke,!1}),fi}function xo(At,bn,sn,fi){for(var Ji=At.length,Ke=sn+(fi?1:-1);fi?Ke--:++Ke<Ji;)if(bn(At[Ke],Ke,At))return Ke;return-1}function Vr(At,bn,sn){return bn===bn?uu(At,bn,sn):xo(At,ir,sn)}function Do(At,bn,sn,fi){for(var Ji=sn-1,Ke=At.length;++Ji<Ke;)if(fi(At[Ji],bn))return Ji;return-1}function ir(At){return At!==At}function Ts(At,bn){var sn=At==null?0:At.length;return sn?lo(At,bn)/sn:Tt}function ba(At){return function(bn){return bn==null?y:bn[At]}}function dn(At){return function(bn){return At==null?y:At[bn]}}function Mt(At,bn,sn,fi,Ji){return Ji(At,function(Ke,bt,xt){sn=fi?(fi=!1,Ke):bn(sn,Ke,bt,xt)}),sn}function oi(At,bn){var sn=At.length;for(At.sort(bn);sn--;)At[sn]=At[sn].value;return At}function lo(At,bn){for(var sn,fi=-1,Ji=At.length;++fi<Ji;){var Ke=bn(At[fi]);Ke!==y&&(sn=sn===y?Ke:sn+Ke)}return sn}function na(At,bn){for(var sn=-1,fi=Array(At);++sn<At;)fi[sn]=bn(sn);return fi}function gl(At,bn){return ji(bn,function(sn){return[sn,At[sn]]})}function au(At){return At&&At.slice(0,Qs(At)+1).replace(Oe,"")}function Ms(At){return function(bn){return At(bn)}}function Za(At,bn){return ji(bn,function(sn){return At[sn]})}function Xa(At,bn){return At.has(bn)}function Hu(At,bn){for(var sn=-1,fi=At.length;++sn<fi&&Vr(bn,At[sn],0)>-1;);return sn}function zu(At,bn){for(var sn=At.length;sn--&&Vr(bn,At[sn],0)>-1;);return sn}function Bo(At,bn){for(var sn=At.length,fi=0;sn--;)At[sn]===bn&&++fi;return fi}var Fl=dn(Ir),lu=dn(xr);function Io(At){return"\\"+x[At]}function Wo(At,bn){return At==null?y:At[bn]}function _s(At){return Un.test(At)}function pl(At){return Ei.test(At)}function Bl(At){for(var bn,sn=[];!(bn=At.next()).done;)sn.push(bn.value);return sn}function No(At){var bn=-1,sn=Array(At.size);return At.forEach(function(fi,Ji){sn[++bn]=[Ji,fi]}),sn}function _r(At,bn){return function(sn){return At(bn(sn))}}function xs(At,bn){for(var sn=-1,fi=At.length,Ji=0,Ke=[];++sn<fi;){var bt=At[sn];(bt===bn||bt===R)&&(At[sn]=R,Ke[Ji++]=sn)}return Ke}function Kr(At){var bn=-1,sn=Array(At.size);return At.forEach(function(fi){sn[++bn]=fi}),sn}function qs(At){var bn=-1,sn=Array(At.size);return At.forEach(function(fi){sn[++bn]=[fi,fi]}),sn}function uu(At,bn,sn){for(var fi=sn-1,Ji=At.length;++fi<Ji;)if(At[fi]===bn)return fi;return-1}function Hr(At,bn,sn){for(var fi=sn+1;fi--;)if(At[fi]===bn)return fi;return fi}function ia(At){return _s(At)?Qt(At):ns(At)}function as(At){return _s(At)?Pn(At):Gs(At)}function Qs(At){for(var bn=At.length;bn--&&Ue.test(At.charAt(bn)););return bn}var uo=dn(Or);function Qt(At){for(var bn=Nn.lastIndex=0;Nn.test(At);)++bn;return bn}function Pn(At){return At.match(Nn)||[]}function xn(At){return At.match($n)||[]}var pi=function At(bn){bn=bn==null?m:Wi.defaults(m.Object(),bn,Wi.pick(m,Ti));var sn=bn.Array,fi=bn.Date,Ji=bn.Error,Ke=bn.Function,bt=bn.Math,xt=bn.Object,Dn=bn.RegExp,on=bn.String,Te=bn.TypeError,Ye=sn.prototype,ht=Ke.prototype,Vt=xt.prototype,It=bn["__core-js_shared__"],cn=ht.toString,rn=Vt.hasOwnProperty,Vn=0,Zn=function(){var c=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),jn=Vt.toString,ri=cn.call(xt),yi=m._,Ui=Dn("^"+cn.call(rn).replace(J,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oi=Y?bn.Buffer:y,Ni=bn.Symbol,Dr=bn.Uint8Array,zr=Oi?Oi.allocUnsafe:y,Ds=_r(xt.getPrototypeOf,xt),kr=xt.create,ml=Vt.propertyIsEnumerable,Wl=Ye.splice,Vo=Ni?Ni.isConcatSpreadable:y,$h=Ni?Ni.iterator:y,Vl=Ni?Ni.toStringTag:y,jr=function(){try{var c=Zl(xt,"defineProperty");return c({},"",{}),c}catch(p){}}(),Kh=bn.clearTimeout!==m.clearTimeout&&bn.clearTimeout,Xc=fi&&fi.now!==m.Date.now&&fi.now,Am=bn.setTimeout!==m.setTimeout&&bn.setTimeout,qc=bt.ceil,ra=bt.floor,cs=xt.getOwnPropertySymbols,Ho=Oi?Oi.isBuffer:y,Rm=bn.isFinite,Pm=Ye.join,z0=_r(xt.keys,xt),Js=bt.max,Ys=bt.min,Gh=fi.now,wc=bn.parseInt,cu=bt.random,rf=Ye.reverse,sa=Zl(bn,"DataView"),qa=Zl(bn,"Map"),ys=Zl(bn,"Promise"),Uu=Zl(bn,"Set"),Qc=Zl(bn,"WeakMap"),Cc=Zl(xt,"create"),Ar=Qc&&new Qc,Jc={},Yh=kc(sa),Zh=kc(qa),Fm=kc(ys),tt=kc(Uu),co=kc(Qc),ju=Ni?Ni.prototype:y,zo=ju?ju.valueOf:y,yn=ju?ju.toString:y;function nt(c){if(Fs(c)&&!er(c)&&!(c instanceof Nr)){if(c instanceof To)return c;if(rn.call(c,"__wrapped__"))return tv(c)}return new To(c)}var eh=function(){function c(){}return function(p){if(!ws(p))return{};if(kr)return kr(p);c.prototype=p;var k=new c;return c.prototype=y,k}}();function eo(){}function To(c,p){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=y}nt.templateSettings={escape:ln,evaluate:_e,interpolate:V,variable:"",imports:{_:nt}},nt.prototype=eo.prototype,nt.prototype.constructor=nt,To.prototype=eh(eo.prototype),To.prototype.constructor=To;function Nr(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Jt,this.__views__=[]}function nb(){var c=new Nr(this.__wrapped__);return c.__actions__=ro(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=ro(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=ro(this.__views__),c}function Bm(){if(this.__filtered__){var c=new Nr(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function U0(){var c=this.__wrapped__.value(),p=this.__dir__,k=er(c),X=p<0,xe=k?c.length:0,We=tp(0,xe,this.__views__),it=We.start,pt=We.end,Nt=pt-it,vn=X?pt:it-1,wn=this.__iteratees__,Sn=wn.length,Yn=0,ii=Ys(Nt,this.__takeCount__);if(!k||!X&&xe==Nt&&ii==Nt)return el(c,this.__actions__);var ki=[];e:for(;Nt--&&Yn<ii;){vn+=p;for(var Gi=-1,Ri=c[vn];++Gi<Sn;){var Ki=wn[Gi],rr=Ki.iteratee,Ks=Ki.type,Yo=rr(Ri);if(Ks==$e)Ri=Yo;else if(!Yo){if(Ks==Ge)continue e;break e}}ki[Yn++]=Ri}return ki}Nr.prototype=eh(eo.prototype),Nr.prototype.constructor=Nr;function hu(c){var p=-1,k=c==null?0:c.length;for(this.clear();++p<k;){var X=c[p];this.set(X[0],X[1])}}function du(){this.__data__=Cc?Cc(null):{},this.size=0}function Wm(c){var p=this.has(c)&&delete this.__data__[c];return this.size-=p?1:0,p}function Hl(c){var p=this.__data__;if(Cc){var k=p[c];return k===L?y:k}return rn.call(p,c)?p[c]:y}function Tg(c){var p=this.__data__;return Cc?p[c]!==y:rn.call(p,c)}function j0(c,p){var k=this.__data__;return this.size+=this.has(c)?0:1,k[c]=Cc&&p===y?L:p,this}hu.prototype.clear=du,hu.prototype.delete=Wm,hu.prototype.get=Hl,hu.prototype.has=Tg,hu.prototype.set=j0;function fu(c){var p=-1,k=c==null?0:c.length;for(this.clear();++p<k;){var X=c[p];this.set(X[0],X[1])}}function gu(){this.__data__=[],this.size=0}function Mg(c){var p=this.__data__,k=Lc(p,c);if(k<0)return!1;var X=p.length-1;return k==X?p.pop():Wl.call(p,k,1),--this.size,!0}function Vm(c){var p=this.__data__,k=Lc(p,c);return k<0?y:p[k][1]}function Hm(c){return Lc(this.__data__,c)>-1}function is(c,p){var k=this.__data__,X=Lc(k,c);return X<0?(++this.size,k.push([c,p])):k[X][1]=p,this}fu.prototype.clear=gu,fu.prototype.delete=Mg,fu.prototype.get=Vm,fu.prototype.has=Hm,fu.prototype.set=is;function to(c){var p=-1,k=c==null?0:c.length;for(this.clear();++p<k;){var X=c[p];this.set(X[0],X[1])}}function Sc(){this.size=0,this.__data__={hash:new hu,map:new(qa||fu),string:new hu}}function ib(c){var p=po(this,c).delete(c);return this.size-=p?1:0,p}function vl(c){return po(this,c).get(c)}function no(c){return po(this,c).has(c)}function Og(c,p){var k=po(this,c),X=k.size;return k.set(c,p),this.size+=k.size==X?0:1,this}to.prototype.clear=Sc,to.prototype.delete=ib,to.prototype.get=vl,to.prototype.has=no,to.prototype.set=Og;function pu(c){var p=-1,k=c==null?0:c.length;for(this.__data__=new to;++p<k;)this.add(c[p])}function $0(c){return this.__data__.set(c,L),this}function kg(c){return this.__data__.has(c)}pu.prototype.add=pu.prototype.push=$0,pu.prototype.has=kg;function io(c){var p=this.__data__=new fu(c);this.size=p.size}function Ag(){this.__data__=new fu,this.size=0}function Rg(c){var p=this.__data__,k=p.delete(c);return this.size=p.size,k}function zm(c){return this.__data__.get(c)}function Pg(c){return this.__data__.has(c)}function Ec(c,p){var k=this.__data__;if(k instanceof fu){var X=k.__data__;if(!qa||X.length<M-1)return X.push([c,p]),this.size=++k.size,this;k=this.__data__=new to(X)}return k.set(c,p),this.size=k.size,this}io.prototype.clear=Ag,io.prototype.delete=Rg,io.prototype.get=zm,io.prototype.has=Pg,io.prototype.set=Ec;function _l(c,p){var k=er(c),X=!k&&sc(c),xe=!k&&!X&&oc(c),We=!k&&!X&&!xe&&Ch(c),it=k||X||xe||We,pt=it?na(c.length,on):[],Nt=pt.length;for(var vn in c)(p||rn.call(c,vn))&&!(it&&(vn=="length"||xe&&(vn=="offset"||vn=="parent")||We&&(vn=="buffer"||vn=="byteLength"||vn=="byteOffset")||Cu(vn,Nt)))&&pt.push(vn);return pt}function Mo(c){var p=c.length;return p?c[Kg(0,p-1)]:y}function Fg(c,p){return xf(ro(c),yl(p,0,c.length))}function Bg(c){return xf(ro(c))}function Wg(c,p,k){(k!==y&&!xa(c[p],k)||k===y&&!(p in c))&&zl(c,p,k)}function wa(c,p,k){var X=c[p];(!(rn.call(c,p)&&xa(X,k))||k===y&&!(p in c))&&zl(c,p,k)}function Lc(c,p){for(var k=c.length;k--;)if(xa(c[k][0],p))return k;return-1}function $u(c,p,k,X){return Ul(c,function(xe,We,it){p(X,xe,k(xe),it)}),X}function hi(c,p){return c&&Us(p,so(p),c)}function Gr(c,p){return c&&Us(p,Go(p),c)}function zl(c,p,k){p=="__proto__"&&jr?jr(c,p,{configurable:!0,enumerable:!0,value:k,writable:!0}):c[p]=k}function sf(c,p){for(var k=-1,X=p.length,xe=sn(X),We=c==null;++k<X;)xe[k]=We?y:Tl(c,p[k]);return xe}function yl(c,p,k){return c===c&&(k!==y&&(c=c<=k?c:k),p!==y&&(c=c>=p?c:p)),c}function Os(c,p,k,X,xe,We){var it,pt=p&W,Nt=p&G,vn=p&ie;if(k&&(it=xe?k(c,X,xe,We):k(c)),it!==y)return it;if(!ws(c))return c;var wn=er(c);if(wn){if(it=Dl(c),!pt)return ro(c,it)}else{var Sn=As(c),Yn=Sn==an||Sn==Di;if(oc(c))return Mc(c,pt);if(Sn==Pt||Sn==gt||Yn&&!xe){if(it=Nt||Yn?{}:mo(c),!pt)return Nt?$m(c,Gr(it,c)):tl(c,hi(it,c))}else{if(!xi[Sn])return xe?c:{};it=dd(c,Sn,pt)}}We||(We=new io);var ii=We.get(c);if(ii)return ii;We.set(c,it),Mp(c)?c.forEach(function(Ri){it.add(Os(Ri,p,k,Ri,c,We))}):Iv(c)&&c.forEach(function(Ri,Ki){it.set(Ki,Os(Ri,p,k,Ki,c,We))});var ki=vn?Nt?dh:Zi:Nt?Go:so,Gi=wn?y:ki(c);return si(Gi||c,function(Ri,Ki){Gi&&(Ki=Ri,Ri=c[Ki]),wa(it,Ki,Os(Ri,p,k,Ki,c,We))}),it}function mi(c){var p=so(c);return function(k){return Xh(k,c,p)}}function Xh(c,p,k){var X=k.length;if(c==null)return!X;for(c=xt(c);X--;){var xe=k[X],We=p[xe],it=c[xe];if(it===y&&!(xe in c)||!We(it))return!1}return!0}function qh(c,p,k){if(typeof c!="function")throw new Te(C);return Eu(function(){c.apply(y,k)},p)}function mu(c,p,k,X){var xe=-1,We=zi,it=!0,pt=c.length,Nt=[],vn=p.length;if(!pt)return Nt;k&&(p=ji(p,Ms(k))),X?(We=hr,it=!1):p.length>=M&&(We=Xa,it=!1,p=new pu(p));e:for(;++xe<pt;){var wn=c[xe],Sn=k==null?wn:k(wn);if(wn=X||wn!==0?wn:0,it&&Sn===Sn){for(var Yn=vn;Yn--;)if(p[Yn]===Sn)continue e;Nt.push(wn)}else We(p,Sn,X)||Nt.push(wn)}return Nt}var Ul=Zu(ds),vi=Zu(jl,!0);function of(c,p){var k=!0;return Ul(c,function(X,xe,We){return k=!!p(X,xe,We),k}),k}function th(c,p,k){for(var X=-1,xe=c.length;++X<xe;){var We=c[X],it=p(We);if(it!=null&&(pt===y?it===it&&!Ro(it):k(it,pt)))var pt=it,Nt=We}return Nt}function bl(c,p,k,X){var xe=c.length;for(k=Li(k),k<0&&(k=-k>xe?0:xe+k),X=X===y||X>xe?xe:Li(X),X<0&&(X+=xe),X=k>X?0:Tv(X);k<X;)c[k++]=p;return c}function Qh(c,p){var k=[];return Ul(c,function(X,xe,We){p(X,xe,We)&&k.push(X)}),k}function zs(c,p,k,X,xe){var We=-1,it=c.length;for(k||(k=wu),xe||(xe=[]);++We<it;){var pt=c[We];p>0&&k(pt)?p>1?zs(pt,p-1,k,X,xe):ai(xe,pt):X||(xe[xe.length]=pt)}return xe}var vu=Km(),xc=Km(!0);function ds(c,p){return c&&vu(c,p,so)}function jl(c,p){return c&&xc(c,p,so)}function af(c,p){return ur(p,function(k){return aa(c[k])})}function Dc(c,p){p=Yl(p,c);for(var k=0,X=p.length;c!=null&&k<X;)c=c[vo(p[k++])];return k&&k==X?c:y}function Um(c,p,k){var X=p(c);return er(c)?X:ai(X,k(c))}function fs(c){return c==null?c===y?ne:On:Vl&&Vl in xt(c)?Xm(c):Jm(c)}function Vg(c,p){return c>p}function $l(c,p){return c!=null&&rn.call(c,p)}function K0(c,p){return c!=null&&p in xt(c)}function Hg(c,p,k){return c>=Ys(p,k)&&c<Js(p,k)}function lf(c,p,k){for(var X=k?hr:zi,xe=c[0].length,We=c.length,it=We,pt=sn(We),Nt=Infinity,vn=[];it--;){var wn=c[it];it&&p&&(wn=ji(wn,Ms(p))),Nt=Ys(wn.length,Nt),pt[it]=!k&&(p||xe>=120&&wn.length>=120)?new pu(it&&wn):y}wn=c[0];var Sn=-1,Yn=pt[0];e:for(;++Sn<xe&&vn.length<Nt;){var ii=wn[Sn],ki=p?p(ii):ii;if(ii=k||ii!==0?ii:0,!(Yn?Xa(Yn,ki):X(vn,ki,k))){for(it=We;--it;){var Gi=pt[it];if(!(Gi?Xa(Gi,ki):X(c[it],ki,k)))continue e}Yn&&Yn.push(ki),vn.push(ii)}}return vn}function Jh(c,p,k,X){return ds(c,function(xe,We,it){p(X,k(xe),We,it)}),X}function uf(c,p,k){p=Yl(p,c),c=Lf(c,p);var X=c==null?c:c[vo(Ba(p))];return X==null?y:Xt(X,c,k)}function zg(c){return Fs(c)&&fs(c)==gt}function Ug(c){return Fs(c)&&fs(c)==Ce}function cf(c){return Fs(c)&&fs(c)==zt}function Ku(c,p,k,X,xe){return c===p?!0:c==null||p==null||!Fs(c)&&!Fs(p)?c!==c&&p!==p:ka(c,p,k,X,Ku,xe)}function ka(c,p,k,X,xe,We){var it=er(c),pt=er(p),Nt=it?_t:As(c),vn=pt?_t:As(p);Nt=Nt==gt?Pt:Nt,vn=vn==gt?Pt:vn;var wn=Nt==Pt,Sn=vn==Pt,Yn=Nt==vn;if(Yn&&oc(c)){if(!oc(p))return!1;it=!0,wn=!1}if(Yn&&!wn)return We||(We=new io),it||Ch(c)?Sa(c,p,k,X,xe,We):Zm(c,p,Nt,k,X,xe,We);if(!(k&q)){var ii=wn&&rn.call(c,"__wrapped__"),ki=Sn&&rn.call(p,"__wrapped__");if(ii||ki){var Gi=ii?c.value():c,Ri=ki?p.value():p;return We||(We=new io),xe(Gi,Ri,k,X,We)}}return Yn?(We||(We=new io),Xu(c,p,k,X,xe,We)):!1}function Oo(c){return Fs(c)&&As(c)==_i}function _u(c,p,k,X){var xe=k.length,We=xe,it=!X;if(c==null)return!We;for(c=xt(c);xe--;){var pt=k[xe];if(it&&pt[2]?pt[1]!==c[pt[0]]:!(pt[0]in c))return!1}for(;++xe<We;){pt=k[xe];var Nt=pt[0],vn=c[Nt],wn=pt[1];if(it&&pt[2]){if(vn===y&&!(Nt in c))return!1}else{var Sn=new io;if(X)var Yn=X(vn,wn,Nt,c,p,Sn);if(!(Yn===y?Ku(wn,vn,q|we,X,Sn):Yn))return!1}}return!0}function nh(c){if(!ws(c)||Su(c))return!1;var p=aa(c)?Ui:qn;return p.test(kc(c))}function jg(c){return Fs(c)&&fs(c)==li}function hf(c){return Fs(c)&&As(c)==kn}function df(c){return Fs(c)&&Sd(c.length)&&!!Mi[fs(c)]}function yu(c){return typeof c=="function"?c:c==null?ua:typeof c=="object"?er(c)?$g(c[0],c[1]):td(c):Nd(c)}function Qa(c){if(!fd(c))return z0(c);var p=[];for(var k in xt(c))rn.call(c,k)&&k!="constructor"&&p.push(k);return p}function ed(c){if(!ws(c))return Qu(c);var p=fd(c),k=[];for(var X in c)X=="constructor"&&(p||!rn.call(c,X))||k.push(X);return k}function Ic(c,p){return c<p}function ff(c,p){var k=-1,X=Ia(c)?sn(c.length):[];return Ul(c,function(xe,We,it){X[++k]=p(xe,We,it)}),X}function td(c){var p=Rr(c);return p.length==1&&p[0][2]?gh(p[0][0],p[0][1]):function(k){return k===c||_u(k,c,p)}}function $g(c,p){return fh(c)&&qm(p)?gh(vo(c),p):function(k){var X=Tl(k,c);return X===y&&X===p?la(k,c):Ku(p,X,q|we)}}function ih(c,p,k,X,xe){c!==p&&vu(p,function(We,it){if(xe||(xe=new io),ws(We))Zs(c,p,it,k,ih,X,xe);else{var pt=X?X(ec(c,it),We,it+"",c,p,xe):y;pt===y&&(pt=We),Wg(c,it,pt)}},Go)}function Zs(c,p,k,X,xe,We,it){var pt=ec(c,k),Nt=ec(p,k),vn=it.get(Nt);if(vn){Wg(c,k,vn);return}var wn=We?We(pt,Nt,k+"",c,p,it):y,Sn=wn===y;if(Sn){var Yn=er(Nt),ii=!Yn&&oc(Nt),ki=!Yn&&!ii&&Ch(Nt);wn=Nt,Yn||ii||ki?er(pt)?wn=pt:$s(pt)?wn=ro(pt):ii?(Sn=!1,wn=Mc(Nt,!0)):ki?(Sn=!1,wn=Uo(Nt,!0)):wn=[]:gs(Nt)||sc(Nt)?(wn=pt,sc(pt)?wn=tu(pt):(!ws(pt)||aa(pt))&&(wn=mo(Nt))):Sn=!1}Sn&&(it.set(Nt,wn),xe(wn,Nt,X,We,it),it.delete(Nt)),Wg(c,k,wn)}function Gu(c,p){var k=c.length;if(!!k)return p+=p<0?k:0,Cu(p,k)?c[p]:y}function nd(c,p,k){p.length?p=ji(p,function(We){return er(We)?function(it){return Dc(it,We.length===1?We[0]:We)}:We}):p=[ua];var X=-1;p=ji(p,Ms(Xi()));var xe=ff(c,function(We,it,pt){var Nt=ji(p,function(vn){return vn(We)});return{criteria:Nt,index:++X,value:We}});return oi(xe,function(We,it){return Xg(We,it,k)})}function wl(c,p){return Nc(c,p,function(k,X){return la(c,X)})}function Nc(c,p,k){for(var X=-1,xe=p.length,We={};++X<xe;){var it=p[X],pt=Dc(c,it);k(pt,it)&&sh(We,Yl(it,c),pt)}return We}function rh(c){return function(p){return Dc(p,c)}}function wr(c,p,k,X){var xe=X?Do:Vr,We=-1,it=p.length,pt=c;for(c===p&&(p=ro(p)),k&&(pt=ji(c,Ms(k)));++We<it;)for(var Nt=0,vn=p[We],wn=k?k(vn):vn;(Nt=xe(pt,wn,Nt,X))>-1;)pt!==c&&Wl.call(pt,Nt,1),Wl.call(c,Nt,1);return c}function jm(c,p){for(var k=c?p.length:0,X=k-1;k--;){var xe=p[k];if(k==X||xe!==We){var We=xe;Cu(xe)?Wl.call(c,xe,1):vf(c,xe)}}return c}function Kg(c,p){return c+ra(cu()*(p-c+1))}function Tc(c,p,k,X){for(var xe=-1,We=Js(qc((p-c)/(k||1)),0),it=sn(We);We--;)it[X?We:++xe]=c,c+=k;return it}function gf(c,p){var k="";if(!c||p<1||p>Ot)return k;do p%2&&(k+=c),p=ra(p/2),p&&(c+=c);while(p);return k}function Cr(c,p){return $o(Ju(c,p,ua),c+"")}function G0(c){return Mo(cc(c))}function Aa(c,p){var k=cc(c);return xf(k,yl(p,0,k.length))}function sh(c,p,k,X){if(!ws(c))return c;p=Yl(p,c);for(var xe=-1,We=p.length,it=We-1,pt=c;pt!=null&&++xe<We;){var Nt=vo(p[xe]),vn=k;if(Nt==="__proto__"||Nt==="constructor"||Nt==="prototype")return c;if(xe!=it){var wn=pt[Nt];vn=X?X(wn,Nt,pt):y,vn===y&&(vn=ws(wn)?wn:Cu(p[xe+1])?[]:{})}wa(pt,Nt,vn),pt=pt[Nt]}return c}var oh=Ar?function(c,p){return Ar.set(c,p),c}:ua,Gg=jr?function(c,p){return jr(c,"toString",{configurable:!0,enumerable:!1,value:Dd(p),writable:!0})}:ua;function Ja(c){return xf(cc(c))}function ko(c,p,k){var X=-1,xe=c.length;p<0&&(p=-p>xe?0:xe+p),k=k>xe?xe:k,k<0&&(k+=xe),xe=p>k?0:k-p>>>0,p>>>=0;for(var We=sn(xe);++X<xe;)We[X]=c[X+p];return We}function Ra(c,p){var k;return Ul(c,function(X,xe,We){return k=p(X,xe,We),!k}),!!k}function Pa(c,p,k){var X=0,xe=c==null?X:c.length;if(typeof p=="number"&&p===p&&xe<=Yt){for(;X<xe;){var We=X+xe>>>1,it=c[We];it!==null&&!Ro(it)&&(k?it<=p:it<p)?X=We+1:xe=We}return xe}return pf(c,p,ua,k)}function pf(c,p,k,X){var xe=0,We=c==null?0:c.length;if(We===0)return 0;p=k(p);for(var it=p!==p,pt=p===null,Nt=Ro(p),vn=p===y;xe<We;){var wn=ra((xe+We)/2),Sn=k(c[wn]),Yn=Sn!==y,ii=Sn===null,ki=Sn===Sn,Gi=Ro(Sn);if(it)var Ri=X||ki;else vn?Ri=ki&&(X||Yn):pt?Ri=ki&&Yn&&(X||!ii):Nt?Ri=ki&&Yn&&!ii&&(X||!Gi):ii||Gi?Ri=!1:Ri=X?Sn<=p:Sn<p;Ri?xe=wn+1:We=wn}return Ys(We,Mn)}function mf(c,p){for(var k=-1,X=c.length,xe=0,We=[];++k<X;){var it=c[k],pt=p?p(it):it;if(!k||!xa(pt,Nt)){var Nt=pt;We[xe++]=it===0?0:it}}return We}function Kl(c){return typeof c=="number"?c:Ro(c)?Tt:+c}function ho(c){if(typeof c=="string")return c;if(er(c))return ji(c,ho)+"";if(Ro(c))return yn?yn.call(c):"";var p=c+"";return p=="0"&&1/c==-mt?"-0":p}function fo(c,p,k){var X=-1,xe=zi,We=c.length,it=!0,pt=[],Nt=pt;if(k)it=!1,xe=hr;else if(We>=M){var vn=p?null:El(c);if(vn)return Kr(vn);it=!1,xe=Xa,Nt=new pu}else Nt=p?[]:pt;e:for(;++X<We;){var wn=c[X],Sn=p?p(wn):wn;if(wn=k||wn!==0?wn:0,it&&Sn===Sn){for(var Yn=Nt.length;Yn--;)if(Nt[Yn]===Sn)continue e;p&&Nt.push(Sn),pt.push(wn)}else xe(Nt,Sn,k)||(Nt!==pt&&Nt.push(Sn),pt.push(wn))}return pt}function vf(c,p){return p=Yl(p,c),c=Lf(c,p),c==null||delete c[vo(Ba(p))]}function _f(c,p,k,X){return sh(c,p,k(Dc(c,p)),X)}function ah(c,p,k,X){for(var xe=c.length,We=X?xe:-1;(X?We--:++We<xe)&&p(c[We],We,c););return k?ko(c,X?0:We,X?We+1:xe):ko(c,X?We+1:0,X?xe:We)}function el(c,p){var k=c;return k instanceof Nr&&(k=k.value()),vr(p,function(X,xe){return xe.func.apply(xe.thisArg,ai([X],xe.args))},k)}function Yg(c,p,k){var X=c.length;if(X<2)return X?fo(c[0]):[];for(var xe=-1,We=sn(X);++xe<X;)for(var it=c[xe],pt=-1;++pt<X;)pt!=xe&&(We[xe]=mu(We[xe]||it,c[pt],p,k));return fo(zs(We,1),p,k)}function Gl(c,p,k){for(var X=-1,xe=c.length,We=p.length,it={};++X<xe;){var pt=X<We?p[X]:y;k(it,c[X],pt)}return it}function id(c){return $s(c)?c:[]}function yf(c){return typeof c=="function"?c:ua}function Yl(c,p){return er(c)?c:fh(c,p)?[c]:Df(qr(c))}var Y0=Cr;function Yu(c,p,k){var X=c.length;return k=k===y?X:k,!p&&k>=X?c:ko(c,p,k)}var rd=Kh||function(c){return m.clearTimeout(c)};function Mc(c,p){if(p)return c.slice();var k=c.length,X=zr?zr(k):new c.constructor(k);return c.copy(X),X}function go(c){var p=new c.constructor(c.byteLength);return new Dr(p).set(new Dr(c)),p}function Z0(c,p){var k=p?go(c.buffer):c.buffer;return new c.constructor(k,c.byteOffset,c.byteLength)}function Zg(c){var p=new c.constructor(c.source,zn.exec(c));return p.lastIndex=c.lastIndex,p}function bf(c){return zo?xt(zo.call(c)):{}}function Uo(c,p){var k=p?go(c.buffer):c.buffer;return new c.constructor(k,c.byteOffset,c.length)}function Cl(c,p){if(c!==p){var k=c!==y,X=c===null,xe=c===c,We=Ro(c),it=p!==y,pt=p===null,Nt=p===p,vn=Ro(p);if(!pt&&!vn&&!We&&c>p||We&&it&&Nt&&!pt&&!vn||X&&it&&Nt||!k&&Nt||!xe)return 1;if(!X&&!We&&!vn&&c<p||vn&&k&&xe&&!X&&!We||pt&&k&&xe||!it&&xe||!Nt)return-1}return 0}function Xg(c,p,k){for(var X=-1,xe=c.criteria,We=p.criteria,it=xe.length,pt=k.length;++X<it;){var Nt=Cl(xe[X],We[X]);if(Nt){if(X>=pt)return Nt;var vn=k[X];return Nt*(vn=="desc"?-1:1)}}return c.index-p.index}function sd(c,p,k,X){for(var xe=-1,We=c.length,it=k.length,pt=-1,Nt=p.length,vn=Js(We-it,0),wn=sn(Nt+vn),Sn=!X;++pt<Nt;)wn[pt]=p[pt];for(;++xe<it;)(Sn||xe<We)&&(wn[k[xe]]=c[xe]);for(;vn--;)wn[pt++]=c[xe++];return wn}function od(c,p,k,X){for(var xe=-1,We=c.length,it=-1,pt=k.length,Nt=-1,vn=p.length,wn=Js(We-pt,0),Sn=sn(wn+vn),Yn=!X;++xe<wn;)Sn[xe]=c[xe];for(var ii=xe;++Nt<vn;)Sn[ii+Nt]=p[Nt];for(;++it<pt;)(Yn||xe<We)&&(Sn[ii+k[it]]=c[xe++]);return Sn}function ro(c,p){var k=-1,X=c.length;for(p||(p=sn(X));++k<X;)p[k]=c[k];return p}function Us(c,p,k,X){var xe=!k;k||(k={});for(var We=-1,it=p.length;++We<it;){var pt=p[We],Nt=X?X(k[pt],c[pt],pt,k,c):y;Nt===y&&(Nt=c[pt]),xe?zl(k,pt,Nt):wa(k,pt,Nt)}return k}function tl(c,p){return Us(c,hd(c),p)}function $m(c,p){return Us(c,X0(c),p)}function lh(c,p){return function(k,X){var xe=er(k)?Ln:$u,We=p?p():{};return xe(k,c,Xi(X,2),We)}}function nl(c){return Cr(function(p,k){var X=-1,xe=k.length,We=xe>1?k[xe-1]:y,it=xe>2?k[2]:y;for(We=c.length>3&&typeof We=="function"?(xe--,We):y,it&&jo(k[0],k[1],it)&&(We=xe<3?y:We,xe=1),p=xt(p);++X<xe;){var pt=k[X];pt&&c(p,pt,X,We)}return p})}function Zu(c,p){return function(k,X){if(k==null)return k;if(!Ia(k))return c(k,X);for(var xe=k.length,We=p?xe:-1,it=xt(k);(p?We--:++We<xe)&&X(it[We],We,it)!==!1;);return k}}function Km(c){return function(p,k,X){for(var xe=-1,We=xt(p),it=X(p),pt=it.length;pt--;){var Nt=it[c?pt:++xe];if(k(We[Nt],Nt,We)===!1)break}return p}}function Gm(c,p,k){var X=p&de,xe=ad(c);function We(){var it=this&&this!==m&&this instanceof We?xe:c;return it.apply(X?k:this,arguments)}return We}function qg(c){return function(p){p=qr(p);var k=_s(p)?as(p):y,X=k?k[0]:p.charAt(0),xe=k?Yu(k,1).join(""):p.slice(1);return X[c]()+xe}}function bu(c){return function(p){return vr(ng(Wv(p).replace(Wt,"")),c,"")}}function ad(c){return function(){var p=arguments;switch(p.length){case 0:return new c;case 1:return new c(p[0]);case 2:return new c(p[0],p[1]);case 3:return new c(p[0],p[1],p[2]);case 4:return new c(p[0],p[1],p[2],p[3]);case 5:return new c(p[0],p[1],p[2],p[3],p[4]);case 6:return new c(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new c(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var k=eh(c.prototype),X=c.apply(k,p);return ws(X)?X:k}}function wf(c,p,k){var X=ad(c);function xe(){for(var We=arguments.length,it=sn(We),pt=We,Nt=xl(xe);pt--;)it[pt]=arguments[pt];var vn=We<3&&it[0]!==Nt&&it[We-1]!==Nt?[]:xs(it,Nt);if(We-=vn.length,We<k)return hh(c,p,Ao,xe.placeholder,y,it,vn,y,y,k-We);var wn=this&&this!==m&&this instanceof xe?X:c;return Xt(wn,this,it)}return xe}function uh(c){return function(p,k,X){var xe=xt(p);if(!Ia(p)){var We=Xi(k,3);p=so(p),k=function(pt){return We(xe[pt],pt,xe)}}var it=c(p,k,X);return it>-1?xe[We?p[it]:it]:y}}function ld(c){return Ea(function(p){var k=p.length,X=k,xe=To.prototype.thru;for(c&&p.reverse();X--;){var We=p[X];if(typeof We!="function")throw new Te(C);if(xe&&!it&&Ll(We)=="wrapper")var it=new To([],!0)}for(X=it?X:k;++X<k;){We=p[X];var pt=Ll(We),Nt=pt=="wrapper"?Oc(We):y;Nt&&Il(Nt[0])&&Nt[1]==(I|be|ae|oe)&&!Nt[4].length&&Nt[9]==1?it=it[Ll(Nt[0])].apply(it,Nt[3]):it=We.length==1&&Il(We)?it[pt]():it.thru(We)}return function(){var vn=arguments,wn=vn[0];if(it&&vn.length==1&&er(wn))return it.plant(wn).value();for(var Sn=0,Yn=k?p[Sn].apply(this,vn):wn;++Sn<k;)Yn=p[Sn].call(this,Yn);return Yn}})}function Ao(c,p,k,X,xe,We,it,pt,Nt,vn){var wn=p&I,Sn=p&de,Yn=p&fe,ii=p&(be|pe),ki=p&te,Gi=Yn?y:ad(c);function Ri(){for(var Ki=arguments.length,rr=sn(Ki),Ks=Ki;Ks--;)rr[Ks]=arguments[Ks];if(ii)var Yo=xl(Ri),ll=Bo(rr,Yo);if(X&&(rr=sd(rr,X,xe,ii)),We&&(rr=od(rr,We,it,ii)),Ki-=ll,ii&&Ki<vn){var oo=xs(rr,Yo);return hh(c,p,Ao,Ri.placeholder,k,rr,oo,pt,Nt,vn-Ki)}var Nu=Sn?k:this,Wc=Yn?Nu[c]:c;return Ki=rr.length,pt?rr=gd(rr,pt):ki&&Ki>1&&rr.reverse(),wn&&Nt<Ki&&(rr.length=Nt),this&&this!==m&&this instanceof Ri&&(Wc=Gi||ad(Wc)),Wc.apply(Nu,rr)}return Ri}function Ym(c,p){return function(k,X){return Jh(k,c,p(X),{})}}function ch(c,p){return function(k,X){var xe;if(k===y&&X===y)return p;if(k!==y&&(xe=k),X!==y){if(xe===y)return X;typeof k=="string"||typeof X=="string"?(k=ho(k),X=ho(X)):(k=Kl(k),X=Kl(X)),xe=c(k,X)}return xe}}function ud(c){return Ea(function(p){return p=ji(p,Ms(Xi())),Cr(function(k){var X=this;return c(p,function(xe){return Xt(xe,X,k)})})})}function cd(c,p){p=p===y?" ":ho(p);var k=p.length;if(k<2)return k?gf(p,c):p;var X=gf(p,qc(c/ia(p)));return _s(p)?Yu(as(X),0,c).join(""):X.slice(0,c)}function rb(c,p,k,X){var xe=p&de,We=ad(c);function it(){for(var pt=-1,Nt=arguments.length,vn=-1,wn=X.length,Sn=sn(wn+Nt),Yn=this&&this!==m&&this instanceof it?We:c;++vn<wn;)Sn[vn]=X[vn];for(;Nt--;)Sn[vn++]=arguments[++pt];return Xt(Yn,xe?k:this,Sn)}return it}function Qg(c){return function(p,k,X){return X&&typeof X!="number"&&jo(p,k,X)&&(k=X=y),p=Na(p),k===y?(k=p,p=0):k=Na(k),X=X===y?p<k?1:-1:Na(X),Tc(p,k,X,c)}}function Sl(c){return function(p,k){return typeof p=="string"&&typeof k=="string"||(p=za(p),k=za(k)),c(p,k)}}function hh(c,p,k,X,xe,We,it,pt,Nt,vn){var wn=p&be,Sn=wn?it:y,Yn=wn?y:it,ii=wn?We:y,ki=wn?y:We;p|=wn?ae:Q,p&=~(wn?Q:ae),p&F||(p&=~(de|fe));var Gi=[c,p,xe,ii,Sn,ki,Yn,pt,Nt,vn],Ri=k.apply(y,Gi);return Il(c)&&ql(Ri,Gi),Ri.placeholder=X,Ql(Ri,c,p)}function Jg(c){var p=bt[c];return function(k,X){if(k=za(k),X=X==null?0:Ys(Li(X),292),X&&Rm(k)){var xe=(qr(k)+"e").split("e"),We=p(xe[0]+"e"+(+xe[1]+X));return xe=(qr(We)+"e").split("e"),+(xe[0]+"e"+(+xe[1]-X))}return p(k)}}var El=Uu&&1/Kr(new Uu([,-0]))[1]==mt?function(c){return new Uu(c)}:sg;function oa(c){return function(p){var k=As(p);return k==_i?No(p):k==kn?qs(p):gl(p,c(p))}}function Fa(c,p,k,X,xe,We,it,pt){var Nt=p&fe;if(!Nt&&typeof c!="function")throw new Te(C);var vn=X?X.length:0;if(vn||(p&=~(ae|Q),X=xe=y),it=it===y?it:Js(Li(it),0),pt=pt===y?pt:Li(pt),vn-=xe?xe.length:0,p&Q){var wn=X,Sn=xe;X=xe=y}var Yn=Nt?y:Oc(c),ii=[c,p,k,X,xe,wn,Sn,We,it,pt];if(Yn&&np(ii,Yn),c=ii[0],p=ii[1],k=ii[2],X=ii[3],xe=ii[4],pt=ii[9]=ii[9]===y?Nt?0:c.length:Js(ii[9]-vn,0),!pt&&p&(be|pe)&&(p&=~(be|pe)),!p||p==de)var ki=Gm(c,p,k);else p==be||p==pe?ki=wf(c,p,pt):(p==ae||p==(de|ae))&&!xe.length?ki=rb(c,p,k,X):ki=Ao.apply(y,ii);var Gi=Yn?oh:ql;return Ql(Gi(ki,ii),c,p)}function ep(c,p,k,X){return c===y||xa(c,Vt[k])&&!rn.call(X,k)?p:c}function ks(c,p,k,X,xe,We){return ws(c)&&ws(p)&&(We.set(p,c),ih(c,p,y,ks,We),We.delete(p)),c}function Ca(c){return gs(c)?y:c}function Sa(c,p,k,X,xe,We){var it=k&q,pt=c.length,Nt=p.length;if(pt!=Nt&&!(it&&Nt>pt))return!1;var vn=We.get(c),wn=We.get(p);if(vn&&wn)return vn==p&&wn==c;var Sn=-1,Yn=!0,ii=k&we?new pu:y;for(We.set(c,p),We.set(p,c);++Sn<pt;){var ki=c[Sn],Gi=p[Sn];if(X)var Ri=it?X(Gi,ki,Sn,p,c,We):X(ki,Gi,Sn,c,p,We);if(Ri!==y){if(Ri)continue;Yn=!1;break}if(ii){if(!ci(p,function(Ki,rr){if(!Xa(ii,rr)&&(ki===Ki||xe(ki,Ki,k,X,We)))return ii.push(rr)})){Yn=!1;break}}else if(!(ki===Gi||xe(ki,Gi,k,X,We))){Yn=!1;break}}return We.delete(c),We.delete(p),Yn}function Zm(c,p,k,X,xe,We,it){switch(k){case lt:if(c.byteLength!=p.byteLength||c.byteOffset!=p.byteOffset)return!1;c=c.buffer,p=p.buffer;case Ce:return!(c.byteLength!=p.byteLength||!We(new Dr(c),new Dr(p)));case Ft:case zt:case wi:return xa(+c,+p);case Bt:return c.name==p.name&&c.message==p.message;case li:case Ae:return c==p+"";case _i:var pt=No;case kn:var Nt=X&q;if(pt||(pt=Kr),c.size!=p.size&&!Nt)return!1;var vn=it.get(c);if(vn)return vn==p;X|=we,it.set(c,p);var wn=Sa(pt(c),pt(p),X,xe,We,it);return it.delete(c),wn;case le:if(zo)return zo.call(c)==zo.call(p)}return!1}function Xu(c,p,k,X,xe,We){var it=k&q,pt=Zi(c),Nt=pt.length,vn=Zi(p),wn=vn.length;if(Nt!=wn&&!it)return!1;for(var Sn=Nt;Sn--;){var Yn=pt[Sn];if(!(it?Yn in p:rn.call(p,Yn)))return!1}var ii=We.get(c),ki=We.get(p);if(ii&&ki)return ii==p&&ki==c;var Gi=!0;We.set(c,p),We.set(p,c);for(var Ri=it;++Sn<Nt;){Yn=pt[Sn];var Ki=c[Yn],rr=p[Yn];if(X)var Ks=it?X(rr,Ki,Yn,p,c,We):X(Ki,rr,Yn,c,p,We);if(!(Ks===y?Ki===rr||xe(Ki,rr,k,X,We):Ks)){Gi=!1;break}Ri||(Ri=Yn=="constructor")}if(Gi&&!Ri){var Yo=c.constructor,ll=p.constructor;Yo!=ll&&"constructor"in c&&"constructor"in p&&!(typeof Yo=="function"&&Yo instanceof Yo&&typeof ll=="function"&&ll instanceof ll)&&(Gi=!1)}return We.delete(c),We.delete(p),Gi}function Ea(c){return $o(Ju(c,y,ap),c+"")}function Zi(c){return Um(c,so,hd)}function dh(c){return Um(c,Go,X0)}var Oc=Ar?function(c){return Ar.get(c)}:sg;function Ll(c){for(var p=c.name+"",k=Jc[p],X=rn.call(Jc,p)?k.length:0;X--;){var xe=k[X],We=xe.func;if(We==null||We==c)return xe.name}return p}function xl(c){var p=rn.call(nt,"placeholder")?nt:c;return p.placeholder}function Xi(){var c=nt.iteratee||Id;return c=c===Id?yu:c,arguments.length?c(arguments[0],arguments[1]):c}function po(c,p){var k=c.__data__;return Ef(p)?k[typeof p=="string"?"string":"hash"]:k.map}function Rr(c){for(var p=so(c),k=p.length;k--;){var X=p[k],xe=c[X];p[k]=[X,xe,qm(xe)]}return p}function Zl(c,p){var k=Wo(c,p);return nh(k)?k:y}function Xm(c){var p=rn.call(c,Vl),k=c[Vl];try{c[Vl]=y;var X=!0}catch(We){}var xe=jn.call(c);return X&&(p?c[Vl]=k:delete c[Vl]),xe}var hd=cs?function(c){return c==null?[]:(c=xt(c),ur(cs(c),function(p){return ml.call(c,p)}))}:ru,X0=cs?function(c){for(var p=[];c;)ai(p,hd(c)),c=Ds(c);return p}:ru,As=fs;(sa&&As(new sa(new ArrayBuffer(1)))!=lt||qa&&As(new qa)!=_i||ys&&As(ys.resolve())!=et||Uu&&As(new Uu)!=kn||Qc&&As(new Qc)!=B)&&(As=function(c){var p=fs(c),k=p==Pt?c.constructor:y,X=k?kc(k):"";if(X)switch(X){case Yh:return lt;case Zh:return _i;case Fm:return et;case tt:return kn;case co:return B}return p});function tp(c,p,k){for(var X=-1,xe=k.length;++X<xe;){var We=k[X],it=We.size;switch(We.type){case"drop":c+=it;break;case"dropRight":p-=it;break;case"take":p=Ys(p,c+it);break;case"takeRight":c=Js(c,p-it);break}}return{start:c,end:p}}function Cf(c){var p=c.match(Ct);return p?p[1].split(dt):[]}function qu(c,p,k){p=Yl(p,c);for(var X=-1,xe=p.length,We=!1;++X<xe;){var it=vo(p[X]);if(!(We=c!=null&&k(c,it)))break;c=c[it]}return We||++X!=xe?We:(xe=c==null?0:c.length,!!xe&&Sd(xe)&&Cu(it,xe)&&(er(c)||sc(c)))}function Dl(c){var p=c.length,k=new c.constructor(p);return p&&typeof c[0]=="string"&&rn.call(c,"index")&&(k.index=c.index,k.input=c.input),k}function mo(c){return typeof c.constructor=="function"&&!fd(c)?eh(Ds(c)):{}}function dd(c,p,k){var X=c.constructor;switch(p){case Ce:return go(c);case Ft:case zt:return new X(+c);case lt:return Z0(c,k);case vt:case ft:case ot:case yt:case Ut:case Fn:case Qn:case Fe:case ct:return Uo(c,k);case _i:return new X;case wi:case Ae:return new X(c);case li:return Zg(c);case kn:return new X;case le:return bf(c)}}function Sf(c,p){var k=p.length;if(!k)return c;var X=k-1;return p[X]=(k>1?"& ":"")+p[X],p=p.join(k>2?", ":" "),c.replace(qe,`{
/* [wrapped with `+p+`] */
`)}function wu(c){return er(c)||sc(c)||!!(Vo&&c&&c[Vo])}function Cu(c,p){var k=typeof c;return p=p==null?Ot:p,!!p&&(k=="number"||k!="symbol"&&Ai.test(c))&&c>-1&&c%1==0&&c<p}function jo(c,p,k){if(!ws(k))return!1;var X=typeof p;return(X=="number"?Ia(k)&&Cu(p,k.length):X=="string"&&p in k)?xa(k[p],c):!1}function fh(c,p){if(er(c))return!1;var k=typeof c;return k=="number"||k=="symbol"||k=="boolean"||c==null||Ro(c)?!0:T.test(c)||!H.test(c)||p!=null&&c in xt(p)}function Ef(c){var p=typeof c;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?c!=="__proto__":c===null}function Il(c){var p=Ll(c),k=nt[p];if(typeof k!="function"||!(p in Nr.prototype))return!1;if(c===k)return!0;var X=Oc(k);return!!X&&c===X[0]}function Su(c){return!!Zn&&Zn in c}var Xl=It?aa:Bc;function fd(c){var p=c&&c.constructor,k=typeof p=="function"&&p.prototype||Vt;return c===k}function qm(c){return c===c&&!ws(c)}function gh(c,p){return function(k){return k==null?!1:k[c]===p&&(p!==y||c in xt(k))}}function Qm(c){var p=xu(c,function(X){return k.size===O&&k.clear(),X}),k=p.cache;return p}function np(c,p){var k=c[1],X=p[1],xe=k|X,We=xe<(de|fe|I),it=X==I&&k==be||X==I&&k==oe&&c[7].length<=p[8]||X==(I|oe)&&p[7].length<=p[8]&&k==be;if(!(We||it))return c;X&de&&(c[2]=p[2],xe|=k&de?0:F);var pt=p[3];if(pt){var Nt=c[3];c[3]=Nt?sd(Nt,pt,p[4]):pt,c[4]=Nt?xs(c[3],R):p[4]}return pt=p[5],pt&&(Nt=c[5],c[5]=Nt?od(Nt,pt,p[6]):pt,c[6]=Nt?xs(c[5],R):p[6]),pt=p[7],pt&&(c[7]=pt),X&I&&(c[8]=c[8]==null?p[8]:Ys(c[8],p[8])),c[9]==null&&(c[9]=p[9]),c[0]=p[0],c[1]=xe,c}function Qu(c){var p=[];if(c!=null)for(var k in xt(c))p.push(k);return p}function Jm(c){return jn.call(c)}function Ju(c,p,k){return p=Js(p===y?c.length-1:p,0),function(){for(var X=arguments,xe=-1,We=Js(X.length-p,0),it=sn(We);++xe<We;)it[xe]=X[p+xe];xe=-1;for(var pt=sn(p+1);++xe<p;)pt[xe]=X[xe];return pt[p]=k(it),Xt(c,this,pt)}}function Lf(c,p){return p.length<2?c:Dc(c,ko(p,0,-1))}function gd(c,p){for(var k=c.length,X=Ys(p.length,k),xe=ro(c);X--;){var We=p[X];c[X]=Cu(We,k)?xe[We]:y}return c}function ec(c,p){if(!(p==="constructor"&&typeof c[p]=="function")&&p!="__proto__")return c[p]}var ql=ev(oh),Eu=Am||function(c,p){return m.setTimeout(c,p)},$o=ev(Gg);function Ql(c,p,k){var X=p+"";return $o(c,Sf(X,ip(Cf(X),k)))}function ev(c){var p=0,k=0;return function(){var X=Gh(),xe=Ne-(X-k);if(k=X,xe>0){if(++p>=ve)return arguments[0]}else p=0;return c.apply(y,arguments)}}function xf(c,p){var k=-1,X=c.length,xe=X-1;for(p=p===y?X:p;++k<p;){var We=Kg(k,xe),it=c[We];c[We]=c[k],c[k]=it}return c.length=p,c}var Df=Qm(function(c){var p=[];return c.charCodeAt(0)===46&&p.push(""),c.replace(z,function(k,X,xe,We){p.push(xe?We.replace(st,"$1"):X||k)}),p});function vo(c){if(typeof c=="string"||Ro(c))return c;var p=c+"";return p=="0"&&1/c==-mt?"-0":p}function kc(c){if(c!=null){try{return cn.call(c)}catch(p){}try{return c+""}catch(p){}}return""}function ip(c,p){return si(pn,function(k){var X="_."+k[0];p&k[1]&&!zi(c,X)&&c.push(X)}),c.sort()}function tv(c){if(c instanceof Nr)return c.clone();var p=new To(c.__wrapped__,c.__chain__);return p.__actions__=ro(c.__actions__),p.__index__=c.__index__,p.__values__=c.__values__,p}function q0(c,p,k){(k?jo(c,p,k):p===y)?p=1:p=Js(Li(p),0);var X=c==null?0:c.length;if(!X||p<1)return[];for(var xe=0,We=0,it=sn(qc(X/p));xe<X;)it[We++]=ko(c,xe,xe+=p);return it}function rp(c){for(var p=-1,k=c==null?0:c.length,X=0,xe=[];++p<k;){var We=c[p];We&&(xe[X++]=We)}return xe}function nv(){var c=arguments.length;if(!c)return[];for(var p=sn(c-1),k=arguments[0],X=c;X--;)p[X-1]=arguments[X];return ai(er(k)?ro(k):[k],zs(p,1))}var Q0=Cr(function(c,p){return $s(c)?mu(c,zs(p,1,$s,!0)):[]}),pd=Cr(function(c,p){var k=Ba(p);return $s(k)&&(k=y),$s(c)?mu(c,zs(p,1,$s,!0),Xi(k,2)):[]}),If=Cr(function(c,p){var k=Ba(p);return $s(k)&&(k=y),$s(c)?mu(c,zs(p,1,$s,!0),y,k):[]});function Nf(c,p,k){var X=c==null?0:c.length;return X?(p=k||p===y?1:Li(p),ko(c,p<0?0:p,X)):[]}function sp(c,p,k){var X=c==null?0:c.length;return X?(p=k||p===y?1:Li(p),p=X-p,ko(c,0,p<0?0:p)):[]}function md(c,p){return c&&c.length?ah(c,Xi(p,3),!0,!0):[]}function Tf(c,p){return c&&c.length?ah(c,Xi(p,3),!0):[]}function J0(c,p,k,X){var xe=c==null?0:c.length;return xe?(k&&typeof k!="number"&&jo(c,p,k)&&(k=0,X=xe),bl(c,p,k,X)):[]}function op(c,p,k){var X=c==null?0:c.length;if(!X)return-1;var xe=k==null?0:Li(k);return xe<0&&(xe=Js(X+xe,0)),xo(c,Xi(p,3),xe)}function Mf(c,p,k){var X=c==null?0:c.length;if(!X)return-1;var xe=X-1;return k!==y&&(xe=Li(k),xe=k<0?Js(X+xe,0):Ys(xe,X-1)),xo(c,Xi(p,3),xe,!0)}function ap(c){var p=c==null?0:c.length;return p?zs(c,1):[]}function e_(c){var p=c==null?0:c.length;return p?zs(c,mt):[]}function t_(c,p){var k=c==null?0:c.length;return k?(p=p===y?1:Li(p),zs(c,p)):[]}function n_(c){for(var p=-1,k=c==null?0:c.length,X={};++p<k;){var xe=c[p];X[xe[0]]=xe[1]}return X}function iv(c){return c&&c.length?c[0]:y}function i_(c,p,k){var X=c==null?0:c.length;if(!X)return-1;var xe=k==null?0:Li(k);return xe<0&&(xe=Js(X+xe,0)),Vr(c,p,xe)}function il(c){var p=c==null?0:c.length;return p?ko(c,0,-1):[]}var rv=Cr(function(c){var p=ji(c,id);return p.length&&p[0]===c[0]?lf(p):[]}),sv=Cr(function(c){var p=Ba(c),k=ji(c,id);return p===Ba(k)?p=y:k.pop(),k.length&&k[0]===c[0]?lf(k,Xi(p,2)):[]}),Jl=Cr(function(c){var p=Ba(c),k=ji(c,id);return p=typeof p=="function"?p:y,p&&k.pop(),k.length&&k[0]===c[0]?lf(k,y,p):[]});function Of(c,p){return c==null?"":Pm.call(c,p)}function Ba(c){var p=c==null?0:c.length;return p?c[p-1]:y}function lp(c,p,k){var X=c==null?0:c.length;if(!X)return-1;var xe=X;return k!==y&&(xe=Li(k),xe=xe<0?Js(X+xe,0):Ys(xe,X-1)),p===p?Hr(c,p,xe):xo(c,ir,xe,!0)}function r_(c,p){return c&&c.length?Gu(c,Li(p)):y}var s_=Cr(vd);function vd(c,p){return c&&c.length&&p&&p.length?wr(c,p):c}function o_(c,p,k){return c&&c.length&&p&&p.length?wr(c,p,Xi(k,2)):c}function ov(c,p,k){return c&&c.length&&p&&p.length?wr(c,p,y,k):c}var a_=Ea(function(c,p){var k=c==null?0:c.length,X=sf(c,p);return jm(c,ji(p,function(xe){return Cu(xe,k)?+xe:xe}).sort(Cl)),X});function l_(c,p){var k=[];if(!(c&&c.length))return k;var X=-1,xe=[],We=c.length;for(p=Xi(p,3);++X<We;){var it=c[X];p(it,X,c)&&(k.push(it),xe.push(X))}return jm(c,xe),k}function up(c){return c==null?c:rf.call(c)}function u_(c,p,k){var X=c==null?0:c.length;return X?(k&&typeof k!="number"&&jo(c,p,k)?(p=0,k=X):(p=p==null?0:Li(p),k=k===y?X:Li(k)),ko(c,p,k)):[]}function av(c,p){return Pa(c,p)}function lv(c,p,k){return pf(c,p,Xi(k,2))}function La(c,p){var k=c==null?0:c.length;if(k){var X=Pa(c,p);if(X<k&&xa(c[X],p))return X}return-1}function c_(c,p){return Pa(c,p,!0)}function uv(c,p,k){return pf(c,p,Xi(k,2),!0)}function ls(c,p){var k=c==null?0:c.length;if(k){var X=Pa(c,p,!0)-1;if(xa(c[X],p))return X}return-1}function sb(c){return c&&c.length?mf(c):[]}function h_(c,p){return c&&c.length?mf(c,Xi(p,2)):[]}function d_(c){var p=c==null?0:c.length;return p?ko(c,1,p):[]}function cv(c,p,k){return c&&c.length?(p=k||p===y?1:Li(p),ko(c,0,p<0?0:p)):[]}function kf(c,p,k){var X=c==null?0:c.length;return X?(p=k||p===y?1:Li(p),p=X-p,ko(c,p<0?0:p,X)):[]}function rl(c,p){return c&&c.length?ah(c,Xi(p,3),!1,!0):[]}function f_(c,p){return c&&c.length?ah(c,Xi(p,3)):[]}var us=Cr(function(c){return fo(zs(c,1,$s,!0))}),Ko=Cr(function(c){var p=Ba(c);return $s(p)&&(p=y),fo(zs(c,1,$s,!0),Xi(p,2))}),Af=Cr(function(c){var p=Ba(c);return p=typeof p=="function"?p:y,fo(zs(c,1,$s,!0),y,p)});function sl(c){return c&&c.length?fo(c):[]}function ob(c,p){return c&&c.length?fo(c,Xi(p,2)):[]}function ab(c,p){return p=typeof p=="function"?p:y,c&&c.length?fo(c,y,p):[]}function Rf(c){if(!(c&&c.length))return[];var p=0;return c=ur(c,function(k){if($s(k))return p=Js(k.length,p),!0}),na(p,function(k){return ji(c,ba(k))})}function cp(c,p){if(!(c&&c.length))return[];var k=Rf(c);return p==null?k:ji(k,function(X){return Xt(p,y,X)})}var hv=Cr(function(c,p){return $s(c)?mu(c,p):[]}),lb=Cr(function(c){return Yg(ur(c,$s))}),dv=Cr(function(c){var p=Ba(c);return $s(p)&&(p=y),Yg(ur(c,$s),Xi(p,2))}),tc=Cr(function(c){var p=Ba(c);return p=typeof p=="function"?p:y,Yg(ur(c,$s),y,p)}),fv=Cr(Rf);function ph(c,p){return Gl(c||[],p||[],wa)}function hp(c,p){return Gl(c||[],p||[],sh)}var Pf=Cr(function(c){var p=c.length,k=p>1?c[p-1]:y;return k=typeof k=="function"?(c.pop(),k):y,cp(c,k)});function gv(c){var p=nt(c);return p.__chain__=!0,p}function dp(c,p){return p(c),c}function mh(c,p){return p(c)}var fp=Ea(function(c){var p=c.length,k=p?c[0]:0,X=this.__wrapped__,xe=function(We){return sf(We,c)};return p>1||this.__actions__.length||!(X instanceof Nr)||!Cu(k)?this.thru(xe):(X=X.slice(k,+k+(p?1:0)),X.__actions__.push({func:mh,args:[xe],thisArg:y}),new To(X,this.__chain__).thru(function(We){return p&&!We.length&&We.push(y),We}))});function gp(){return gv(this)}function g_(){return new To(this.value(),this.__chain__)}function pp(){this.__values__===y&&(this.__values__=Eh(this.value()));var c=this.__index__>=this.__values__.length,p=c?y:this.__values__[this.__index__++];return{done:c,value:p}}function mp(){return this}function vp(c){for(var p,k=this;k instanceof eo;){var X=tv(k);X.__index__=0,X.__values__=y,p?xe.__wrapped__=X:p=X;var xe=X;k=k.__wrapped__}return xe.__wrapped__=c,p}function _p(){var c=this.__wrapped__;if(c instanceof Nr){var p=c;return this.__actions__.length&&(p=new Nr(this)),p=p.reverse(),p.__actions__.push({func:mh,args:[up],thisArg:y}),new To(p,this.__chain__)}return this.thru(up)}function yp(){return el(this.__wrapped__,this.__actions__)}var bp=lh(function(c,p,k){rn.call(c,k)?++c[k]:zl(c,k,1)});function wp(c,p,k){var X=er(c)?Gn:of;return k&&jo(c,p,k)&&(p=y),X(c,Xi(p,3))}function _d(c,p){var k=er(c)?ur:Qh;return k(c,Xi(p,3))}var Lu=uh(op),Cp=uh(Mf);function pv(c,p){return zs(vh(c,p),1)}function p_(c,p){return zs(vh(c,p),mt)}function m_(c,p,k){return k=k===y?1:Li(k),zs(vh(c,p),k)}function mv(c,p){var k=er(c)?si:Ul;return k(c,Xi(p,3))}function nc(c,p){var k=er(c)?ni:vi;return k(c,Xi(p,3))}var vv=lh(function(c,p,k){rn.call(c,k)?c[k].push(p):zl(c,k,[p])});function bs(c,p,k,X){c=Ia(c)?c:cc(c),k=k&&!X?Li(k):0;var xe=c.length;return k<0&&(k=Js(xe+k,0)),Gf(c)?k<=xe&&c.indexOf(p,k)>-1:!!xe&&Vr(c,p,k)>-1}var v_=Cr(function(c,p,k){var X=-1,xe=typeof p=="function",We=Ia(c)?sn(c.length):[];return Ul(c,function(it){We[++X]=xe?Xt(p,it,k):uf(it,p,k)}),We}),Ff=lh(function(c,p,k){zl(c,k,p)});function vh(c,p){var k=er(c)?ji:ff;return k(c,Xi(p,3))}function Bf(c,p,k,X){return c==null?[]:(er(p)||(p=p==null?[]:[p]),k=X?y:k,er(k)||(k=k==null?[]:[k]),nd(c,p,k))}var __=lh(function(c,p,k){c[k?0:1].push(p)},function(){return[[],[]]});function _v(c,p,k){var X=er(c)?vr:Mt,xe=arguments.length<3;return X(c,Xi(p,4),k,xe,Ul)}function ub(c,p,k){var X=er(c)?cr:Mt,xe=arguments.length<3;return X(c,Xi(p,4),k,xe,vi)}function Ac(c,p){var k=er(c)?ur:Qh;return k(c,Rc(Xi(p,3)))}function Sp(c){var p=er(c)?Mo:G0;return p(c)}function yd(c,p,k){(k?jo(c,p,k):p===y)?p=1:p=Li(p);var X=er(c)?Fg:Aa;return X(c,p)}function yv(c){var p=er(c)?Bg:Ja;return p(c)}function Ep(c){if(c==null)return 0;if(Ia(c))return Gf(c)?ia(c):c.length;var p=As(c);return p==_i||p==kn?c.size:Qa(c).length}function Wf(c,p,k){var X=er(c)?ci:Ra;return k&&jo(c,p,k)&&(p=y),X(c,Xi(p,3))}var Vf=Cr(function(c,p){if(c==null)return[];var k=p.length;return k>1&&jo(c,p[0],p[1])?p=[]:k>2&&jo(p[0],p[1],p[2])&&(p=[p[0]]),nd(c,zs(p,1),[])}),bd=Xc||function(){return m.Date.now()};function bv(c,p){if(typeof p!="function")throw new Te(C);return c=Li(c),function(){if(--c<1)return p.apply(this,arguments)}}function wv(c,p,k){return p=k?y:p,p=c&&p==null?c.length:p,Fa(c,I,y,y,y,y,p)}function wd(c,p){var k;if(typeof p!="function")throw new Te(C);return c=Li(c),function(){return--c>0&&(k=p.apply(this,arguments)),c<=1&&(p=y),k}}var Hf=Cr(function(c,p,k){var X=de;if(k.length){var xe=xs(k,xl(Hf));X|=ae}return Fa(c,X,p,k,xe)}),Cv=Cr(function(c,p,k){var X=de|fe;if(k.length){var xe=xs(k,xl(Cv));X|=ae}return Fa(p,X,c,k,xe)});function Sv(c,p,k){p=k?y:p;var X=Fa(c,be,y,y,y,y,y,p);return X.placeholder=Sv.placeholder,X}function Cd(c,p,k){p=k?y:p;var X=Fa(c,pe,y,y,y,y,y,p);return X.placeholder=Cd.placeholder,X}function ic(c,p,k){var X,xe,We,it,pt,Nt,vn=0,wn=!1,Sn=!1,Yn=!0;if(typeof c!="function")throw new Te(C);p=za(p)||0,ws(k)&&(wn=!!k.leading,Sn="maxWait"in k,We=Sn?Js(za(k.maxWait)||0,p):We,Yn="trailing"in k?!!k.trailing:Yn);function ii(oo){var Nu=X,Wc=xe;return X=xe=y,vn=oo,it=c.apply(Wc,Nu),it}function ki(oo){return vn=oo,pt=Eu(Ki,p),wn?ii(oo):it}function Gi(oo){var Nu=oo-Nt,Wc=oo-vn,gb=p-Nu;return Sn?Ys(gb,We-Wc):gb}function Ri(oo){var Nu=oo-Nt,Wc=oo-vn;return Nt===y||Nu>=p||Nu<0||Sn&&Wc>=We}function Ki(){var oo=bd();if(Ri(oo))return rr(oo);pt=Eu(Ki,Gi(oo))}function rr(oo){return pt=y,Yn&&X?ii(oo):(X=xe=y,it)}function Ks(){pt!==y&&rd(pt),vn=0,X=Nt=xe=pt=y}function Yo(){return pt===y?it:rr(bd())}function ll(){var oo=bd(),Nu=Ri(oo);if(X=arguments,xe=this,Nt=oo,Nu){if(pt===y)return ki(Nt);if(Sn)return rd(pt),pt=Eu(Ki,p),ii(Nt)}return pt===y&&(pt=Eu(Ki,p)),it}return ll.cancel=Ks,ll.flush=Yo,ll}var Rs=Cr(function(c,p){return qh(c,1,p)}),Lp=Cr(function(c,p,k){return qh(c,za(p)||0,k)});function xp(c){return Fa(c,te)}function xu(c,p){if(typeof c!="function"||p!=null&&typeof p!="function")throw new Te(C);var k=function(){var X=arguments,xe=p?p.apply(this,X):X[0],We=k.cache;if(We.has(xe))return We.get(xe);var it=c.apply(this,X);return k.cache=We.set(xe,it)||We,it};return k.cache=new(xu.Cache||to),k}xu.Cache=to;function Rc(c){if(typeof c!="function")throw new Te(C);return function(){var p=arguments;switch(p.length){case 0:return!c.call(this);case 1:return!c.call(this,p[0]);case 2:return!c.call(this,p[0],p[1]);case 3:return!c.call(this,p[0],p[1],p[2])}return!c.apply(this,p)}}function y_(c){return wd(2,c)}var eu=Y0(function(c,p){p=p.length==1&&er(p[0])?ji(p[0],Ms(Xi())):ji(zs(p,1),Ms(Xi()));var k=p.length;return Cr(function(X){for(var xe=-1,We=Ys(X.length,k);++xe<We;)X[xe]=p[xe].call(this,X[xe]);return Xt(c,this,X)})}),rc=Cr(function(c,p){var k=xs(p,xl(rc));return Fa(c,ae,y,p,k)}),zf=Cr(function(c,p){var k=xs(p,xl(zf));return Fa(c,Q,y,p,k)}),Ev=Ea(function(c,p){return Fa(c,oe,y,y,y,p)});function Dp(c,p){if(typeof c!="function")throw new Te(C);return p=p===y?p:Li(p),Cr(c,p)}function b_(c,p){if(typeof c!="function")throw new Te(C);return p=p==null?0:Js(Li(p),0),Cr(function(k){var X=k[p],xe=Yu(k,0,p);return X&&ai(xe,X),Xt(c,this,xe)})}function Ip(c,p,k){var X=!0,xe=!0;if(typeof c!="function")throw new Te(C);return ws(k)&&(X="leading"in k?!!k.leading:X,xe="trailing"in k?!!k.trailing:xe),ic(c,p,{leading:X,maxWait:p,trailing:xe})}function Lv(c){return wv(c,1)}function xv(c,p){return rc(yf(p),c)}function _h(){if(!arguments.length)return[];var c=arguments[0];return er(c)?c:[c]}function Wa(c){return Os(c,ie)}function w_(c,p){return p=typeof p=="function"?p:y,Os(c,ie,p)}function Dv(c){return Os(c,W|ie)}function Pc(c,p){return p=typeof p=="function"?p:y,Os(c,W|ie,p)}function dr(c,p){return p==null||Xh(c,p,so(p))}function xa(c,p){return c===p||c!==c&&p!==p}var Da=Sl(Vg),js=Sl(function(c,p){return c>=p}),sc=zg(function(){return arguments}())?zg:function(c){return Fs(c)&&rn.call(c,"callee")&&!ml.call(c,"callee")},er=sn.isArray,Uf=ke?Ms(ke):Ug;function Ia(c){return c!=null&&Sd(c.length)&&!aa(c)}function $s(c){return Fs(c)&&Ia(c)}function C_(c){return c===!0||c===!1||Fs(c)&&fs(c)==Ft}var oc=Ho||Bc,Np=Ve?Ms(Ve):cf;function jf(c){return Fs(c)&&c.nodeType===1&&!gs(c)}function Nl(c){if(c==null)return!0;if(Ia(c)&&(er(c)||typeof c=="string"||typeof c.splice=="function"||oc(c)||Ch(c)||sc(c)))return!c.length;var p=As(c);if(p==_i||p==kn)return!c.size;if(fd(c))return!Qa(c).length;for(var k in c)if(rn.call(c,k))return!1;return!0}function Va(c,p){return Ku(c,p)}function $f(c,p,k){k=typeof k=="function"?k:y;var X=k?k(c,p):y;return X===y?Ku(c,p,y,k):!!X}function rs(c){if(!Fs(c))return!1;var p=fs(c);return p==Bt||p==en||typeof c.message=="string"&&typeof c.name=="string"&&!gs(c)}function Ps(c){return typeof c=="number"&&Rm(c)}function aa(c){if(!ws(c))return!1;var p=fs(c);return p==an||p==Di||p==Gt||p==Ci}function Kf(c){return typeof c=="number"&&c==Li(c)}function Sd(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=Ot}function ws(c){var p=typeof c;return c!=null&&(p=="object"||p=="function")}function Fs(c){return c!=null&&typeof c=="object"}var Iv=Xe?Ms(Xe):Oo;function $r(c,p){return c===p||_u(c,p,Rr(p))}function Du(c,p,k){return k=typeof k=="function"?k:y,_u(c,p,Rr(p),k)}function yh(c){return wh(c)&&c!=+c}function Tp(c){if(Xl(c))throw new Ji(E);return nh(c)}function bh(c){return c===null}function Fc(c){return c==null}function wh(c){return typeof c=="number"||Fs(c)&&fs(c)==wi}function gs(c){if(!Fs(c)||fs(c)!=Pt)return!1;var p=Ds(c);if(p===null)return!0;var k=rn.call(p,"constructor")&&p.constructor;return typeof k=="function"&&k instanceof k&&cn.call(k)==ri}var ac=wt?Ms(wt):jg;function Nv(c){return Kf(c)&&c>=-Ot&&c<=Ot}var Mp=tn?Ms(tn):hf;function Gf(c){return typeof c=="string"||!er(c)&&Fs(c)&&fs(c)==Ae}function Ro(c){return typeof c=="symbol"||Fs(c)&&fs(c)==le}var Ch=mn?Ms(mn):df;function Sh(c){return c===y}function Iu(c){return Fs(c)&&As(c)==B}function fr(c){return Fs(c)&&fs(c)==Me}var Yf=Sl(Ic),Ha=Sl(function(c,p){return c<=p});function Eh(c){if(!c)return[];if(Ia(c))return Gf(c)?as(c):ro(c);if($h&&c[$h])return Bl(c[$h]());var p=As(c),k=p==_i?No:p==kn?Kr:cc;return k(c)}function Na(c){if(!c)return c===0?c:0;if(c=za(c),c===mt||c===-mt){var p=c<0?-1:1;return p*kt}return c===c?c:0}function Li(c){var p=Na(c),k=p%1;return p===p?k?p-k:p:0}function Tv(c){return c?yl(Li(c),0,Jt):0}function za(c){if(typeof c=="number")return c;if(Ro(c))return Tt;if(ws(c)){var p=typeof c.valueOf=="function"?c.valueOf():c;c=ws(p)?p+"":p}if(typeof c!="string")return c===0?c:+c;c=au(c);var k=En.test(c);return k||ui.test(c)?re(c.slice(2),k?2:8):Lt.test(c)?Tt:+c}function tu(c){return Us(c,Go(c))}function cb(c){return c?yl(Li(c),-Ot,Ot):c===0?c:0}function qr(c){return c==null?"":ho(c)}var S_=nl(function(c,p){if(fd(p)||Ia(p)){Us(p,so(p),c);return}for(var k in p)rn.call(p,k)&&wa(c,k,p[k])}),Zf=nl(function(c,p){Us(p,Go(p),c)}),Xf=nl(function(c,p,k,X){Us(p,Go(p),c,X)}),Ed=nl(function(c,p,k,X){Us(p,so(p),c,X)}),E_=Ea(sf);function qf(c,p){var k=eh(c);return p==null?k:hi(k,p)}var L_=Cr(function(c,p){c=xt(c);var k=-1,X=p.length,xe=X>2?p[2]:y;for(xe&&jo(p[0],p[1],xe)&&(X=1);++k<X;)for(var We=p[k],it=Go(We),pt=-1,Nt=it.length;++pt<Nt;){var vn=it[pt],wn=c[vn];(wn===y||xa(wn,Vt[vn])&&!rn.call(c,vn))&&(c[vn]=We[vn])}return c}),Op=Cr(function(c){return c.push(y,ks),Xt(N_,y,c)});function Lh(c,p){return Hs(c,Xi(p,3),ds)}function x_(c,p){return Hs(c,Xi(p,3),jl)}function lc(c,p){return c==null?c:vu(c,Xi(p,3),Go)}function Mv(c,p){return c==null?c:xc(c,Xi(p,3),Go)}function Ov(c,p){return c&&ds(c,Xi(p,3))}function Qf(c,p){return c&&jl(c,Xi(p,3))}function Ua(c){return c==null?[]:af(c,so(c))}function D_(c){return c==null?[]:af(c,Go(c))}function Tl(c,p,k){var X=c==null?y:Dc(c,p);return X===y?k:X}function _o(c,p){return c!=null&&qu(c,p,$l)}function la(c,p){return c!=null&&qu(c,p,K0)}var kv=Ym(function(c,p,k){p!=null&&typeof p.toString!="function"&&(p=jn.call(p)),c[p]=k},Dd(ua)),hb=Ym(function(c,p,k){p!=null&&typeof p.toString!="function"&&(p=jn.call(p)),rn.call(c,p)?c[p].push(k):c[p]=[k]},Xi),I_=Cr(uf);function so(c){return Ia(c)?_l(c):Qa(c)}function Go(c){return Ia(c)?_l(c,!0):ed(c)}function Av(c,p){var k={};return p=Xi(p,3),ds(c,function(X,xe,We){zl(k,p(X,xe,We),X)}),k}function Rv(c,p){var k={};return p=Xi(p,3),ds(c,function(X,xe,We){zl(k,xe,p(X,xe,We))}),k}var Jf=nl(function(c,p,k){ih(c,p,k)}),N_=nl(function(c,p,k,X){ih(c,p,k,X)}),Po=Ea(function(c,p){var k={};if(c==null)return k;var X=!1;p=ji(p,function(We){return We=Yl(We,c),X||(X=We.length>1),We}),Us(c,dh(c),k),X&&(k=Os(k,W|G|ie,Ca));for(var xe=p.length;xe--;)vf(k,p[xe]);return k});function Ld(c,p){return xh(c,Rc(Xi(p)))}var eg=Ea(function(c,p){return c==null?{}:wl(c,p)});function xh(c,p){if(c==null)return{};var k=ji(dh(c),function(X){return[X]});return p=Xi(p),Nc(c,k,function(X,xe){return p(X,xe[0])})}function db(c,p,k){p=Yl(p,c);var X=-1,xe=p.length;for(xe||(xe=1,c=y);++X<xe;){var We=c==null?y:c[vo(p[X])];We===y&&(X=xe,We=k),c=aa(We)?We.call(c):We}return c}function Pv(c,p,k){return c==null?c:sh(c,p,k)}function xd(c,p,k,X){return X=typeof X=="function"?X:y,c==null?c:sh(c,p,k,X)}var ol=oa(so),uc=oa(Go);function T_(c,p,k){var X=er(c),xe=X||oc(c)||Ch(c);if(p=Xi(p,4),k==null){var We=c&&c.constructor;xe?k=X?new We:[]:ws(c)?k=aa(We)?eh(Ds(c)):{}:k={}}return(xe?si:ds)(c,function(it,pt,Nt){return p(k,it,pt,Nt)}),k}function M_(c,p){return c==null?!0:vf(c,p)}function O_(c,p,k){return c==null?c:_f(c,p,yf(k))}function k_(c,p,k,X){return X=typeof X=="function"?X:y,c==null?c:_f(c,p,yf(k),X)}function cc(c){return c==null?[]:Za(c,so(c))}function kp(c){return c==null?[]:Za(c,Go(c))}function Ap(c,p,k){return k===y&&(k=p,p=y),k!==y&&(k=za(k),k=k===k?k:0),p!==y&&(p=za(p),p=p===p?p:0),yl(za(c),p,k)}function Fv(c,p,k){return p=Na(p),k===y?(k=p,p=0):k=Na(k),c=za(c),Hg(c,p,k)}function hc(c,p,k){if(k&&typeof k!="boolean"&&jo(c,p,k)&&(p=k=y),k===y&&(typeof p=="boolean"?(k=p,p=y):typeof c=="boolean"&&(k=c,c=y)),c===y&&p===y?(c=0,p=1):(c=Na(c),p===y?(p=c,c=0):p=Na(p)),c>p){var X=c;c=p,p=X}if(k||c%1||p%1){var xe=cu();return Ys(c+xe*(p-c+$("1e-"+((xe+"").length-1))),p)}return Kg(c,p)}var Rp=bu(function(c,p,k){return p=p.toLowerCase(),c+(k?Bv(p):p)});function Bv(c){return Hp(qr(c).toLowerCase())}function Wv(c){return c=qr(c),c&&c.replace(or,Fl).replace(gn,"")}function A_(c,p,k){c=qr(c),p=ho(p);var X=c.length;k=k===y?X:yl(Li(k),0,X);var xe=k;return k-=p.length,k>=0&&c.slice(k,xe)==p}function Vv(c){return c=qr(c),c&&nn.test(c)?c.replace(hn,lu):c}function Pp(c){return c=qr(c),c&&Pe.test(c)?c.replace(J,"\\$&"):c}var Hv=bu(function(c,p,k){return c+(k?"-":"")+p.toLowerCase()}),R_=bu(function(c,p,k){return c+(k?" ":"")+p.toLowerCase()}),P_=qg("toLowerCase");function yo(c,p,k){c=qr(c),p=Li(p);var X=p?ia(c):0;if(!p||X>=p)return c;var xe=(p-X)/2;return cd(ra(xe),k)+c+cd(qc(xe),k)}function Fp(c,p,k){c=qr(c),p=Li(p);var X=p?ia(c):0;return p&&X<p?c+cd(p-X,k):c}function al(c,p,k){c=qr(c),p=Li(p);var X=p?ia(c):0;return p&&X<p?cd(p-X,k)+c:c}function zv(c,p,k){return k||p==null?p=0:p&&(p=+p),wc(qr(c).replace(Oe,""),p||0)}function tg(c,p,k){return(k?jo(c,p,k):p===y)?p=1:p=Li(p),gf(qr(c),p)}function F_(){var c=arguments,p=qr(c[0]);return c.length<3?p:p.replace(c[1],c[2])}var bo=bu(function(c,p,k){return c+(k?"_":"")+p.toLowerCase()});function B_(c,p,k){return k&&typeof k!="number"&&jo(c,p,k)&&(p=k=y),k=k===y?Jt:k>>>0,k?(c=qr(c),c&&(typeof p=="string"||p!=null&&!ac(p))&&(p=ho(p),!p&&_s(c))?Yu(as(c),0,k):c.split(p,k)):[]}var Dh=bu(function(c,p,k){return c+(k?" ":"")+Hp(p)});function Bp(c,p,k){return c=qr(c),k=k==null?0:yl(Li(k),0,c.length),p=ho(p),c.slice(k,k+p.length)==p}function nu(c,p,k){var X=nt.templateSettings;k&&jo(c,p,k)&&(p=y),c=qr(c),p=Xf({},p,X,ep);var xe=Xf({},p.imports,X.imports,ep),We=so(xe),it=Za(xe,We),pt,Nt,vn=0,wn=p.interpolate||Hn,Sn="__p += '",Yn=Dn((p.escape||Hn).source+"|"+wn.source+"|"+(wn===V?Zt:Hn).source+"|"+(p.evaluate||Hn).source+"|$","g"),ii="//# sourceURL="+(rn.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Hi+"]")+`
`;c.replace(Yn,function(Ri,Ki,rr,Ks,Yo,ll){return rr||(rr=Ks),Sn+=c.slice(vn,ll).replace(Jn,Io),Ki&&(pt=!0,Sn+=`' +
__e(`+Ki+`) +
'`),Yo&&(Nt=!0,Sn+=`';
`+Yo+`;
__p += '`),rr&&(Sn+=`' +
((__t = (`+rr+`)) == null ? '' : __t) +
'`),vn=ll+Ri.length,Ri}),Sn+=`';
`;var ki=rn.call(p,"variable")&&p.variable;if(!ki)Sn=`with (obj) {
`+Sn+`
}
`;else if(Cn.test(ki))throw new Ji(D);Sn=(Nt?Sn.replace(ut,""):Sn).replace(jt,"$1").replace(qt,"$1;"),Sn="function("+(ki||"obj")+`) {
`+(ki?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(pt?", __e = _.escape":"")+(Nt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Sn+`return __p
}`;var Gi=$v(function(){return Ke(We,ii+"return "+Sn).apply(y,it)});if(Gi.source=Sn,rs(Gi))throw Gi;return Gi}function Wp(c){return qr(c).toLowerCase()}function Vp(c){return qr(c).toUpperCase()}function W_(c,p,k){if(c=qr(c),c&&(k||p===y))return au(c);if(!c||!(p=ho(p)))return c;var X=as(c),xe=as(p),We=Hu(X,xe),it=zu(X,xe)+1;return Yu(X,We,it).join("")}function Ih(c,p,k){if(c=qr(c),c&&(k||p===y))return c.slice(0,Qs(c)+1);if(!c||!(p=ho(p)))return c;var X=as(c),xe=zu(X,as(p))+1;return Yu(X,0,xe).join("")}function Uv(c,p,k){if(c=qr(c),c&&(k||p===y))return c.replace(Oe,"");if(!c||!(p=ho(p)))return c;var X=as(c),xe=Hu(X,as(p));return Yu(X,xe).join("")}function jv(c,p){var k=ue,X=De;if(ws(p)){var xe="separator"in p?p.separator:xe;k="length"in p?Li(p.length):k,X="omission"in p?ho(p.omission):X}c=qr(c);var We=c.length;if(_s(c)){var it=as(c);We=it.length}if(k>=We)return c;var pt=k-ia(X);if(pt<1)return X;var Nt=it?Yu(it,0,pt).join(""):c.slice(0,pt);if(xe===y)return Nt+X;if(it&&(pt+=Nt.length-pt),ac(xe)){if(c.slice(pt).search(xe)){var vn,wn=Nt;for(xe.global||(xe=Dn(xe.source,qr(zn.exec(xe))+"g")),xe.lastIndex=0;vn=xe.exec(wn);)var Sn=vn.index;Nt=Nt.slice(0,Sn===y?pt:Sn)}}else if(c.indexOf(ho(xe),pt)!=pt){var Yn=Nt.lastIndexOf(xe);Yn>-1&&(Nt=Nt.slice(0,Yn))}return Nt+X}function V_(c){return c=qr(c),c&&Rt.test(c)?c.replace(Dt,uo):c}var H_=bu(function(c,p,k){return c+(k?" ":"")+p.toUpperCase()}),Hp=qg("toUpperCase");function ng(c,p,k){return c=qr(c),p=k?y:p,p===y?pl(c)?xn(c):Xr(c):c.match(p)||[]}var $v=Cr(function(c,p){try{return Xt(c,y,p)}catch(k){return rs(k)?k:new Ji(k)}}),Kv=Ea(function(c,p){return si(p,function(k){k=vo(k),zl(c,k,Hf(c[k],c))}),c});function z_(c){var p=c==null?0:c.length,k=Xi();return c=p?ji(c,function(X){if(typeof X[1]!="function")throw new Te(C);return[k(X[0]),X[1]]}):[],Cr(function(X){for(var xe=-1;++xe<p;){var We=c[xe];if(Xt(We[0],this,X))return Xt(We[1],this,X)}})}function wo(c){return mi(Os(c,W))}function Dd(c){return function(){return c}}function zp(c,p){return c==null||c!==c?p:c}var Ta=ld(),ig=ld(!0);function ua(c){return c}function Id(c){return yu(typeof c=="function"?c:Os(c,W))}function U_(c){return td(Os(c,W))}function rg(c,p){return $g(c,Os(p,W))}var Gv=Cr(function(c,p){return function(k){return uf(k,c,p)}}),Nh=Cr(function(c,p){return function(k){return uf(c,k,p)}});function iu(c,p,k){var X=so(p),xe=af(p,X);k==null&&!(ws(p)&&(xe.length||!X.length))&&(k=p,p=c,c=this,xe=af(p,so(p)));var We=!(ws(k)&&"chain"in k)||!!k.chain,it=aa(c);return si(xe,function(pt){var Nt=p[pt];c[pt]=Nt,it&&(c.prototype[pt]=function(){var vn=this.__chain__;if(We||vn){var wn=c(this.__wrapped__),Sn=wn.__actions__=ro(this.__actions__);return Sn.push({func:Nt,args:arguments,thisArg:c}),wn.__chain__=vn,wn}return Nt.apply(c,ai([this.value()],arguments))})}),c}function Yv(){return m._===this&&(m._=yi),this}function sg(){}function Ur(c){return c=Li(c),Cr(function(p){return Gu(p,c)})}var dc=ud(ji),og=ud(Gn),Up=ud(ci);function Nd(c){return fh(c)?ba(vo(c)):rh(c)}function Td(c){return function(p){return c==null?y:Dc(c,p)}}var Th=Qg(),Md=Qg(!0);function ru(){return[]}function Bc(){return!1}function j_(){return{}}function ag(){return""}function lg(){return!0}function $_(c,p){if(c=Li(c),c<1||c>Ot)return[];var k=Jt,X=Ys(c,Jt);p=Xi(p),c-=Jt;for(var xe=na(X,p);++k<c;)p(k);return xe}function K_(c){return er(c)?ji(c,vo):Ro(c)?[c]:ro(Df(qr(c)))}function jp(c){var p=++Vn;return qr(c)+p}var $p=ch(function(c,p){return c+p},0),Kp=Jg("ceil"),Gp=ch(function(c,p){return c/p},1),Zv=Jg("floor");function G_(c){return c&&c.length?th(c,ua,Vg):y}function Od(c,p){return c&&c.length?th(c,Xi(p,2),Vg):y}function Is(c){return Ts(c,ua)}function Xv(c,p){return Ts(c,Xi(p,2))}function Y_(c){return c&&c.length?th(c,ua,Ic):y}function fb(c,p){return c&&c.length?th(c,Xi(p,2),Ic):y}var d=ch(function(c,p){return c*p},1),b=Jg("round"),U=ch(function(c,p){return c-p},0);function me(c){return c&&c.length?lo(c,ua):0}function He(c,p){return c&&c.length?lo(c,Xi(p,2)):0}return nt.after=bv,nt.ary=wv,nt.assign=S_,nt.assignIn=Zf,nt.assignInWith=Xf,nt.assignWith=Ed,nt.at=E_,nt.before=wd,nt.bind=Hf,nt.bindAll=Kv,nt.bindKey=Cv,nt.castArray=_h,nt.chain=gv,nt.chunk=q0,nt.compact=rp,nt.concat=nv,nt.cond=z_,nt.conforms=wo,nt.constant=Dd,nt.countBy=bp,nt.create=qf,nt.curry=Sv,nt.curryRight=Cd,nt.debounce=ic,nt.defaults=L_,nt.defaultsDeep=Op,nt.defer=Rs,nt.delay=Lp,nt.difference=Q0,nt.differenceBy=pd,nt.differenceWith=If,nt.drop=Nf,nt.dropRight=sp,nt.dropRightWhile=md,nt.dropWhile=Tf,nt.fill=J0,nt.filter=_d,nt.flatMap=pv,nt.flatMapDeep=p_,nt.flatMapDepth=m_,nt.flatten=ap,nt.flattenDeep=e_,nt.flattenDepth=t_,nt.flip=xp,nt.flow=Ta,nt.flowRight=ig,nt.fromPairs=n_,nt.functions=Ua,nt.functionsIn=D_,nt.groupBy=vv,nt.initial=il,nt.intersection=rv,nt.intersectionBy=sv,nt.intersectionWith=Jl,nt.invert=kv,nt.invertBy=hb,nt.invokeMap=v_,nt.iteratee=Id,nt.keyBy=Ff,nt.keys=so,nt.keysIn=Go,nt.map=vh,nt.mapKeys=Av,nt.mapValues=Rv,nt.matches=U_,nt.matchesProperty=rg,nt.memoize=xu,nt.merge=Jf,nt.mergeWith=N_,nt.method=Gv,nt.methodOf=Nh,nt.mixin=iu,nt.negate=Rc,nt.nthArg=Ur,nt.omit=Po,nt.omitBy=Ld,nt.once=y_,nt.orderBy=Bf,nt.over=dc,nt.overArgs=eu,nt.overEvery=og,nt.overSome=Up,nt.partial=rc,nt.partialRight=zf,nt.partition=__,nt.pick=eg,nt.pickBy=xh,nt.property=Nd,nt.propertyOf=Td,nt.pull=s_,nt.pullAll=vd,nt.pullAllBy=o_,nt.pullAllWith=ov,nt.pullAt=a_,nt.range=Th,nt.rangeRight=Md,nt.rearg=Ev,nt.reject=Ac,nt.remove=l_,nt.rest=Dp,nt.reverse=up,nt.sampleSize=yd,nt.set=Pv,nt.setWith=xd,nt.shuffle=yv,nt.slice=u_,nt.sortBy=Vf,nt.sortedUniq=sb,nt.sortedUniqBy=h_,nt.split=B_,nt.spread=b_,nt.tail=d_,nt.take=cv,nt.takeRight=kf,nt.takeRightWhile=rl,nt.takeWhile=f_,nt.tap=dp,nt.throttle=Ip,nt.thru=mh,nt.toArray=Eh,nt.toPairs=ol,nt.toPairsIn=uc,nt.toPath=K_,nt.toPlainObject=tu,nt.transform=T_,nt.unary=Lv,nt.union=us,nt.unionBy=Ko,nt.unionWith=Af,nt.uniq=sl,nt.uniqBy=ob,nt.uniqWith=ab,nt.unset=M_,nt.unzip=Rf,nt.unzipWith=cp,nt.update=O_,nt.updateWith=k_,nt.values=cc,nt.valuesIn=kp,nt.without=hv,nt.words=ng,nt.wrap=xv,nt.xor=lb,nt.xorBy=dv,nt.xorWith=tc,nt.zip=fv,nt.zipObject=ph,nt.zipObjectDeep=hp,nt.zipWith=Pf,nt.entries=ol,nt.entriesIn=uc,nt.extend=Zf,nt.extendWith=Xf,iu(nt,nt),nt.add=$p,nt.attempt=$v,nt.camelCase=Rp,nt.capitalize=Bv,nt.ceil=Kp,nt.clamp=Ap,nt.clone=Wa,nt.cloneDeep=Dv,nt.cloneDeepWith=Pc,nt.cloneWith=w_,nt.conformsTo=dr,nt.deburr=Wv,nt.defaultTo=zp,nt.divide=Gp,nt.endsWith=A_,nt.eq=xa,nt.escape=Vv,nt.escapeRegExp=Pp,nt.every=wp,nt.find=Lu,nt.findIndex=op,nt.findKey=Lh,nt.findLast=Cp,nt.findLastIndex=Mf,nt.findLastKey=x_,nt.floor=Zv,nt.forEach=mv,nt.forEachRight=nc,nt.forIn=lc,nt.forInRight=Mv,nt.forOwn=Ov,nt.forOwnRight=Qf,nt.get=Tl,nt.gt=Da,nt.gte=js,nt.has=_o,nt.hasIn=la,nt.head=iv,nt.identity=ua,nt.includes=bs,nt.indexOf=i_,nt.inRange=Fv,nt.invoke=I_,nt.isArguments=sc,nt.isArray=er,nt.isArrayBuffer=Uf,nt.isArrayLike=Ia,nt.isArrayLikeObject=$s,nt.isBoolean=C_,nt.isBuffer=oc,nt.isDate=Np,nt.isElement=jf,nt.isEmpty=Nl,nt.isEqual=Va,nt.isEqualWith=$f,nt.isError=rs,nt.isFinite=Ps,nt.isFunction=aa,nt.isInteger=Kf,nt.isLength=Sd,nt.isMap=Iv,nt.isMatch=$r,nt.isMatchWith=Du,nt.isNaN=yh,nt.isNative=Tp,nt.isNil=Fc,nt.isNull=bh,nt.isNumber=wh,nt.isObject=ws,nt.isObjectLike=Fs,nt.isPlainObject=gs,nt.isRegExp=ac,nt.isSafeInteger=Nv,nt.isSet=Mp,nt.isString=Gf,nt.isSymbol=Ro,nt.isTypedArray=Ch,nt.isUndefined=Sh,nt.isWeakMap=Iu,nt.isWeakSet=fr,nt.join=Of,nt.kebabCase=Hv,nt.last=Ba,nt.lastIndexOf=lp,nt.lowerCase=R_,nt.lowerFirst=P_,nt.lt=Yf,nt.lte=Ha,nt.max=G_,nt.maxBy=Od,nt.mean=Is,nt.meanBy=Xv,nt.min=Y_,nt.minBy=fb,nt.stubArray=ru,nt.stubFalse=Bc,nt.stubObject=j_,nt.stubString=ag,nt.stubTrue=lg,nt.multiply=d,nt.nth=r_,nt.noConflict=Yv,nt.noop=sg,nt.now=bd,nt.pad=yo,nt.padEnd=Fp,nt.padStart=al,nt.parseInt=zv,nt.random=hc,nt.reduce=_v,nt.reduceRight=ub,nt.repeat=tg,nt.replace=F_,nt.result=db,nt.round=b,nt.runInContext=At,nt.sample=Sp,nt.size=Ep,nt.snakeCase=bo,nt.some=Wf,nt.sortedIndex=av,nt.sortedIndexBy=lv,nt.sortedIndexOf=La,nt.sortedLastIndex=c_,nt.sortedLastIndexBy=uv,nt.sortedLastIndexOf=ls,nt.startCase=Dh,nt.startsWith=Bp,nt.subtract=U,nt.sum=me,nt.sumBy=He,nt.template=nu,nt.times=$_,nt.toFinite=Na,nt.toInteger=Li,nt.toLength=Tv,nt.toLower=Wp,nt.toNumber=za,nt.toSafeInteger=cb,nt.toString=qr,nt.toUpper=Vp,nt.trim=W_,nt.trimEnd=Ih,nt.trimStart=Uv,nt.truncate=jv,nt.unescape=V_,nt.uniqueId=jp,nt.upperCase=H_,nt.upperFirst=Hp,nt.each=mv,nt.eachRight=nc,nt.first=iv,iu(nt,function(){var c={};return ds(nt,function(p,k){rn.call(nt.prototype,k)||(c[k]=p)}),c}(),{chain:!1}),nt.VERSION=A,si(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){nt[c].placeholder=nt}),si(["drop","take"],function(c,p){Nr.prototype[c]=function(k){k=k===y?1:Js(Li(k),0);var X=this.__filtered__&&!p?new Nr(this):this.clone();return X.__filtered__?X.__takeCount__=Ys(k,X.__takeCount__):X.__views__.push({size:Ys(k,Jt),type:c+(X.__dir__<0?"Right":"")}),X},Nr.prototype[c+"Right"]=function(k){return this.reverse()[c](k).reverse()}}),si(["filter","map","takeWhile"],function(c,p){var k=p+1,X=k==Ge||k==Be;Nr.prototype[c]=function(xe){var We=this.clone();return We.__iteratees__.push({iteratee:Xi(xe,3),type:k}),We.__filtered__=We.__filtered__||X,We}}),si(["head","last"],function(c,p){var k="take"+(p?"Right":"");Nr.prototype[c]=function(){return this[k](1).value()[0]}}),si(["initial","tail"],function(c,p){var k="drop"+(p?"":"Right");Nr.prototype[c]=function(){return this.__filtered__?new Nr(this):this[k](1)}}),Nr.prototype.compact=function(){return this.filter(ua)},Nr.prototype.find=function(c){return this.filter(c).head()},Nr.prototype.findLast=function(c){return this.reverse().find(c)},Nr.prototype.invokeMap=Cr(function(c,p){return typeof c=="function"?new Nr(this):this.map(function(k){return uf(k,c,p)})}),Nr.prototype.reject=function(c){return this.filter(Rc(Xi(c)))},Nr.prototype.slice=function(c,p){c=Li(c);var k=this;return k.__filtered__&&(c>0||p<0)?new Nr(k):(c<0?k=k.takeRight(-c):c&&(k=k.drop(c)),p!==y&&(p=Li(p),k=p<0?k.dropRight(-p):k.take(p-c)),k)},Nr.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Nr.prototype.toArray=function(){return this.take(Jt)},ds(Nr.prototype,function(c,p){var k=/^(?:filter|find|map|reject)|While$/.test(p),X=/^(?:head|last)$/.test(p),xe=nt[X?"take"+(p=="last"?"Right":""):p],We=X||/^find/.test(p);!xe||(nt.prototype[p]=function(){var it=this.__wrapped__,pt=X?[1]:arguments,Nt=it instanceof Nr,vn=pt[0],wn=Nt||er(it),Sn=function(Ki){var rr=xe.apply(nt,ai([Ki],pt));return X&&Yn?rr[0]:rr};wn&&k&&typeof vn=="function"&&vn.length!=1&&(Nt=wn=!1);var Yn=this.__chain__,ii=!!this.__actions__.length,ki=We&&!Yn,Gi=Nt&&!ii;if(!We&&wn){it=Gi?it:new Nr(this);var Ri=c.apply(it,pt);return Ri.__actions__.push({func:mh,args:[Sn],thisArg:y}),new To(Ri,Yn)}return ki&&Gi?c.apply(this,pt):(Ri=this.thru(Sn),ki?X?Ri.value()[0]:Ri.value():Ri)})}),si(["pop","push","shift","sort","splice","unshift"],function(c){var p=Ye[c],k=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",X=/^(?:pop|shift)$/.test(c);nt.prototype[c]=function(){var xe=arguments;if(X&&!this.__chain__){var We=this.value();return p.apply(er(We)?We:[],xe)}return this[k](function(it){return p.apply(er(it)?it:[],xe)})}}),ds(Nr.prototype,function(c,p){var k=nt[p];if(k){var X=k.name+"";rn.call(Jc,X)||(Jc[X]=[]),Jc[X].push({name:p,func:k})}}),Jc[Ao(y,fe).name]=[{name:"wrapper",func:y}],Nr.prototype.clone=nb,Nr.prototype.reverse=Bm,Nr.prototype.value=U0,nt.prototype.at=fp,nt.prototype.chain=gp,nt.prototype.commit=g_,nt.prototype.next=pp,nt.prototype.plant=vp,nt.prototype.reverse=_p,nt.prototype.toJSON=nt.prototype.valueOf=nt.prototype.value=yp,nt.prototype.first=nt.prototype.head,$h&&(nt.prototype[$h]=mp),nt},Wi=pi();m._=Wi,g=function(){return Wi}.call(Z,f,Z,w),g!==y&&(w.exports=g)}).call(this)},9924:(w,Z,f)=>{var g=f(5010),y=f(5979),A=f(5487),M=f(744);function E(C,D){var L=M(C)?g:A;return L(C,y(D,3))}w.exports=E},642:(w,Z,f)=>{var g=f(2813),y=f(1585),A=f(5979);function M(E,C){var D={};return C=A(C,3),y(E,function(L,O,R){g(D,O,C(L,O,R))}),D}w.exports=M},5987:(w,Z,f)=>{var g=f(2659),y=f(302),A=f(6962);function M(E){return E&&E.length?g(E,A,y):void 0}w.exports=M},2858:(w,Z,f)=>{var g=f(2166),y="Expected a function";function A(M,E){if(typeof M!="function"||E!=null&&typeof E!="function")throw new TypeError(y);var C=function(){var D=arguments,L=E?E.apply(this,D):D[0],O=C.cache;if(O.has(L))return O.get(L);var R=M.apply(this,D);return C.cache=O.set(L,R)||O,R};return C.cache=new(A.Cache||g),C}A.Cache=g,w.exports=A},8440:(w,Z,f)=>{var g=f(97),y=f(3323),A=y(function(M,E,C){g(M,E,C)});w.exports=A},3376:(w,Z,f)=>{var g=f(2659),y=f(3757),A=f(6962);function M(E){return E&&E.length?g(E,A,y):void 0}w.exports=M},3296:(w,Z,f)=>{var g=f(2659),y=f(5979),A=f(3757);function M(E,C){return E&&E.length?g(E,y(C,2),A):void 0}w.exports=M},9958:w=>{function Z(){}w.exports=Z},5795:(w,Z,f)=>{var g=f(3152),y=function(){return g.Date.now()};w.exports=y},9409:(w,Z,f)=>{var g=f(8832),y=f(522),A=y(function(M,E){return M==null?{}:g(M,E)});w.exports=A},5769:(w,Z,f)=>{var g=f(2310),y=f(6916),A=f(6773),M=f(9171);function E(C){return A(C)?g(M(C)):y(C)}w.exports=E},859:(w,Z,f)=>{var g=f(6106),y=g();w.exports=y},6473:(w,Z,f)=>{var g=f(9861),y=f(4107),A=f(5979),M=f(739),E=f(744);function C(D,L,O){var R=E(D)?g:M,W=arguments.length<3;return R(D,A(L,4),O,W,y)}w.exports=C},617:(w,Z,f)=>{var g=f(6019),y=f(6139),A=f(4665),M=f(7941),E=f(9405),C="[object Map]",D="[object Set]";function L(O){if(O==null)return 0;if(A(O))return M(O)?E(O):O.length;var R=y(O);return R==C||R==D?O.size:g(O).length}w.exports=L},351:(w,Z,f)=>{var g=f(9256),y=f(8506),A=f(2918),M=f(8138),E=A(function(C,D){if(C==null)return[];var L=D.length;return L>1&&M(C,D[0],D[1])?D=[]:L>2&&M(D[0],D[1],D[2])&&(D=[D[0]]),y(C,g(D,1),[])});w.exports=E},4134:w=>{function Z(){return[]}w.exports=Z},5950:w=>{function Z(){return!1}w.exports=Z},7341:(w,Z,f)=>{var g=f(168),y=1/0,A=17976931348623157e292;function M(E){if(!E)return E===0?E:0;if(E=g(E),E===y||E===-y){var C=E<0?-1:1;return C*A}return E===E?E:0}w.exports=M},2824:(w,Z,f)=>{var g=f(7341);function y(A){var M=g(A),E=M%1;return M===M?E?M-E:M:0}w.exports=y},168:(w,Z,f)=>{var g=f(3927),y=f(816),A=f(5029),M=0/0,E=/^[-+]0x[0-9a-f]+$/i,C=/^0b[01]+$/i,D=/^0o[0-7]+$/i,L=parseInt;function O(R){if(typeof R=="number")return R;if(A(R))return M;if(y(R)){var W=typeof R.valueOf=="function"?R.valueOf():R;R=y(W)?W+"":W}if(typeof R!="string")return R===0?R:+R;R=g(R);var G=C.test(R);return G||D.test(R)?L(R.slice(2),G?2:8):E.test(R)?M:+R}w.exports=O},480:(w,Z,f)=>{var g=f(5378),y=f(6730);function A(M){return g(M,y(M))}w.exports=A},4140:(w,Z,f)=>{var g=f(230);function y(A){return A==null?"":g(A)}w.exports=y},1116:(w,Z,f)=>{var g=f(4809),y=f(5024),A=f(1585),M=f(5979),E=f(9217),C=f(744),D=f(7835),L=f(9363),O=f(816),R=f(8397);function W(G,ie,q){var we=C(G),de=we||D(G)||R(G);if(ie=M(ie,4),q==null){var fe=G&&G.constructor;de?q=we?new fe:[]:O(G)?q=L(fe)?y(E(G)):{}:q={}}return(de?g:A)(G,function(F,be,pe){return ie(q,F,be,pe)}),q}w.exports=W},4065:(w,Z,f)=>{var g=f(9256),y=f(2918),A=f(9098),M=f(1590),E=y(function(C){return A(g(C,1,M,!0))});w.exports=E},5708:(w,Z,f)=>{var g=f(4140),y=0;function A(M){var E=++y;return g(M)+E}w.exports=A},1229:(w,Z,f)=>{var g=f(720),y=f(5451);function A(M){return M==null?[]:g(M,y(M))}w.exports=A},5441:(w,Z,f)=>{var g=f(348),y=f(4484);function A(M,E){return y(M||[],E||[],g)}w.exports=A},3168:(w,Z,f)=>{"use strict";f.r(Z)},9315:(w,Z,f)=>{"use strict";f.r(Z)},55:(w,Z,f)=>{"use strict";f.r(Z)},2673:(w,Z,f)=>{"use strict";f.r(Z)},6097:(w,Z,f)=>{"use strict";f.r(Z)},8678:(w,Z,f)=>{"use strict";f.r(Z)},9458:(w,Z,f)=>{"use strict";f.r(Z),f.d(Z,{AbstractMatrix:()=>zt,CHO:()=>nn,CholeskyDecomposition:()=>nn,EVD:()=>ut,EigenvalueDecomposition:()=>ut,LU:()=>B,LuDecomposition:()=>B,Matrix:()=>Bt,MatrixColumnSelectionView:()=>_i,MatrixColumnView:()=>Di,MatrixFlipColumnView:()=>wi,MatrixFlipRowView:()=>On,MatrixRowSelectionView:()=>et,MatrixRowView:()=>Pt,MatrixSelectionView:()=>Ci,MatrixSubView:()=>li,MatrixTransposeView:()=>kn,NIPALS:()=>ln,Nipals:()=>ln,QR:()=>Ce,QrDecomposition:()=>Ce,SVD:()=>lt,SingularValueDecomposition:()=>lt,WrapperMatrix1D:()=>Ae,WrapperMatrix2D:()=>le,correlation:()=>ct,covariance:()=>Fe,default:()=>Bt,determinant:()=>ot,inverse:()=>vt,linearDependencies:()=>Fn,pseudoInverse:()=>Qn,solve:()=>ft,wrap:()=>ne});const g=Object.prototype.toString;function y(_e){return g.call(_e).endsWith("Array]")}function A(_e){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!y(_e))throw new TypeError("input must be an array");if(_e.length===0)throw new TypeError("input must not be empty");var H=V.fromIndex,T=H===void 0?0:H,z=V.toIndex,J=z===void 0?_e.length:z;if(T<0||T>=_e.length||!Number.isInteger(T))throw new Error("fromIndex must be a positive integer smaller than length");if(J<=T||J>_e.length||!Number.isInteger(J))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var Pe=_e[T],Oe=T+1;Oe<J;Oe++)_e[Oe]>Pe&&(Pe=_e[Oe]);return Pe}const M=A;function E(_e){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!y(_e))throw new TypeError("input must be an array");if(_e.length===0)throw new TypeError("input must not be empty");var H=V.fromIndex,T=H===void 0?0:H,z=V.toIndex,J=z===void 0?_e.length:z;if(T<0||T>=_e.length||!Number.isInteger(T))throw new Error("fromIndex must be a positive integer smaller than length");if(J<=T||J>_e.length||!Number.isInteger(J))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var Pe=_e[T],Oe=T+1;Oe<J;Oe++)_e[Oe]<Pe&&(Pe=_e[Oe]);return Pe}const C=E;function D(_e){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(y(_e)){if(_e.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var H;if(V.output!==void 0){if(!y(V.output))throw new TypeError("output option must be an array if specified");H=V.output}else H=new Array(_e.length);var T=C(_e),z=M(_e);if(T===z)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var J=V.min,Pe=J===void 0?V.autoMinMax?T:0:J,Oe=V.max,Ue=Oe===void 0?V.autoMinMax?z:1:Oe;if(Pe>=Ue)throw new RangeError("min option must be smaller than max option");for(var qe=(Ue-Pe)/(z-T),Ct=0;Ct<_e.length;Ct++)H[Ct]=(_e[Ct]-T)*qe+Pe;return H}const L=D,O=" ".repeat(2),R=" ".repeat(4);function W(){return G(this)}function G(_e,V={}){const{maxRows:H=15,maxColumns:T=10,maxNumSize:z=8}=V;return`${_e.constructor.name} {
${O}[
${R}${ie(_e,H,T,z)}
${O}]
${O}rows: ${_e.rows}
${O}columns: ${_e.columns}
}`}function ie(_e,V,H,T){const{rows:z,columns:J}=_e,Pe=Math.min(z,V),Oe=Math.min(J,H),Ue=[];for(let qe=0;qe<Pe;qe++){let Ct=[];for(let dt=0;dt<Oe;dt++)Ct.push(q(_e.get(qe,dt),T));Ue.push(`${Ct.join(" ")}`)}return Oe!==J&&(Ue[Ue.length-1]+=` ... ${J-H} more columns`),Pe!==z&&Ue.push(`... ${z-V} more rows`),Ue.join(`
${R}`)}function q(_e,V){const H=String(_e);if(H.length<=V)return H.padEnd(V," ");const T=_e.toPrecision(V-2);if(T.length<=V)return T;const z=_e.toExponential(V-2),J=z.indexOf("e"),Pe=z.slice(J);return z.slice(0,V-Pe.length)+Pe}function we(_e,V){_e.prototype.add=function(T){return typeof T=="number"?this.addS(T):this.addM(T)},_e.prototype.addS=function(T){for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)+T);return this},_e.prototype.addM=function(T){if(T=V.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)+T.get(z,J));return this},_e.add=function(T,z){return new V(T).add(z)},_e.prototype.sub=function(T){return typeof T=="number"?this.subS(T):this.subM(T)},_e.prototype.subS=function(T){for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)-T);return this},_e.prototype.subM=function(T){if(T=V.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)-T.get(z,J));return this},_e.sub=function(T,z){return new V(T).sub(z)},_e.prototype.subtract=_e.prototype.sub,_e.prototype.subtractS=_e.prototype.subS,_e.prototype.subtractM=_e.prototype.subM,_e.subtract=_e.sub,_e.prototype.mul=function(T){return typeof T=="number"?this.mulS(T):this.mulM(T)},_e.prototype.mulS=function(T){for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)*T);return this},_e.prototype.mulM=function(T){if(T=V.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)*T.get(z,J));return this},_e.mul=function(T,z){return new V(T).mul(z)},_e.prototype.multiply=_e.prototype.mul,_e.prototype.multiplyS=_e.prototype.mulS,_e.prototype.multiplyM=_e.prototype.mulM,_e.multiply=_e.mul,_e.prototype.div=function(T){return typeof T=="number"?this.divS(T):this.divM(T)},_e.prototype.divS=function(T){for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)/T);return this},_e.prototype.divM=function(T){if(T=V.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)/T.get(z,J));return this},_e.div=function(T,z){return new V(T).div(z)},_e.prototype.divide=_e.prototype.div,_e.prototype.divideS=_e.prototype.divS,_e.prototype.divideM=_e.prototype.divM,_e.divide=_e.div,_e.prototype.mod=function(T){return typeof T=="number"?this.modS(T):this.modM(T)},_e.prototype.modS=function(T){for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)%T);return this},_e.prototype.modM=function(T){if(T=V.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)%T.get(z,J));return this},_e.mod=function(T,z){return new V(T).mod(z)},_e.prototype.modulus=_e.prototype.mod,_e.prototype.modulusS=_e.prototype.modS,_e.prototype.modulusM=_e.prototype.modM,_e.modulus=_e.mod,_e.prototype.and=function(T){return typeof T=="number"?this.andS(T):this.andM(T)},_e.prototype.andS=function(T){for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)&T);return this},_e.prototype.andM=function(T){if(T=V.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)&T.get(z,J));return this},_e.and=function(T,z){return new V(T).and(z)},_e.prototype.or=function(T){return typeof T=="number"?this.orS(T):this.orM(T)},_e.prototype.orS=function(T){for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)|T);return this},_e.prototype.orM=function(T){if(T=V.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)|T.get(z,J));return this},_e.or=function(T,z){return new V(T).or(z)},_e.prototype.xor=function(T){return typeof T=="number"?this.xorS(T):this.xorM(T)},_e.prototype.xorS=function(T){for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)^T);return this},_e.prototype.xorM=function(T){if(T=V.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)^T.get(z,J));return this},_e.xor=function(T,z){return new V(T).xor(z)},_e.prototype.leftShift=function(T){return typeof T=="number"?this.leftShiftS(T):this.leftShiftM(T)},_e.prototype.leftShiftS=function(T){for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)<<T);return this},_e.prototype.leftShiftM=function(T){if(T=V.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)<<T.get(z,J));return this},_e.leftShift=function(T,z){return new V(T).leftShift(z)},_e.prototype.signPropagatingRightShift=function(T){return typeof T=="number"?this.signPropagatingRightShiftS(T):this.signPropagatingRightShiftM(T)},_e.prototype.signPropagatingRightShiftS=function(T){for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)>>T);return this},_e.prototype.signPropagatingRightShiftM=function(T){if(T=V.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)>>T.get(z,J));return this},_e.signPropagatingRightShift=function(T,z){return new V(T).signPropagatingRightShift(z)},_e.prototype.rightShift=function(T){return typeof T=="number"?this.rightShiftS(T):this.rightShiftM(T)},_e.prototype.rightShiftS=function(T){for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)>>>T);return this},_e.prototype.rightShiftM=function(T){if(T=V.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,this.get(z,J)>>>T.get(z,J));return this},_e.rightShift=function(T,z){return new V(T).rightShift(z)},_e.prototype.zeroFillRightShift=_e.prototype.rightShift,_e.prototype.zeroFillRightShiftS=_e.prototype.rightShiftS,_e.prototype.zeroFillRightShiftM=_e.prototype.rightShiftM,_e.zeroFillRightShift=_e.rightShift,_e.prototype.not=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,~this.get(T,z));return this},_e.not=function(T){return new V(T).not()},_e.prototype.abs=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.abs(this.get(T,z)));return this},_e.abs=function(T){return new V(T).abs()},_e.prototype.acos=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.acos(this.get(T,z)));return this},_e.acos=function(T){return new V(T).acos()},_e.prototype.acosh=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.acosh(this.get(T,z)));return this},_e.acosh=function(T){return new V(T).acosh()},_e.prototype.asin=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.asin(this.get(T,z)));return this},_e.asin=function(T){return new V(T).asin()},_e.prototype.asinh=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.asinh(this.get(T,z)));return this},_e.asinh=function(T){return new V(T).asinh()},_e.prototype.atan=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.atan(this.get(T,z)));return this},_e.atan=function(T){return new V(T).atan()},_e.prototype.atanh=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.atanh(this.get(T,z)));return this},_e.atanh=function(T){return new V(T).atanh()},_e.prototype.cbrt=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.cbrt(this.get(T,z)));return this},_e.cbrt=function(T){return new V(T).cbrt()},_e.prototype.ceil=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.ceil(this.get(T,z)));return this},_e.ceil=function(T){return new V(T).ceil()},_e.prototype.clz32=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.clz32(this.get(T,z)));return this},_e.clz32=function(T){return new V(T).clz32()},_e.prototype.cos=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.cos(this.get(T,z)));return this},_e.cos=function(T){return new V(T).cos()},_e.prototype.cosh=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.cosh(this.get(T,z)));return this},_e.cosh=function(T){return new V(T).cosh()},_e.prototype.exp=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.exp(this.get(T,z)));return this},_e.exp=function(T){return new V(T).exp()},_e.prototype.expm1=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.expm1(this.get(T,z)));return this},_e.expm1=function(T){return new V(T).expm1()},_e.prototype.floor=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.floor(this.get(T,z)));return this},_e.floor=function(T){return new V(T).floor()},_e.prototype.fround=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.fround(this.get(T,z)));return this},_e.fround=function(T){return new V(T).fround()},_e.prototype.log=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.log(this.get(T,z)));return this},_e.log=function(T){return new V(T).log()},_e.prototype.log1p=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.log1p(this.get(T,z)));return this},_e.log1p=function(T){return new V(T).log1p()},_e.prototype.log10=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.log10(this.get(T,z)));return this},_e.log10=function(T){return new V(T).log10()},_e.prototype.log2=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.log2(this.get(T,z)));return this},_e.log2=function(T){return new V(T).log2()},_e.prototype.round=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.round(this.get(T,z)));return this},_e.round=function(T){return new V(T).round()},_e.prototype.sign=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.sign(this.get(T,z)));return this},_e.sign=function(T){return new V(T).sign()},_e.prototype.sin=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.sin(this.get(T,z)));return this},_e.sin=function(T){return new V(T).sin()},_e.prototype.sinh=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.sinh(this.get(T,z)));return this},_e.sinh=function(T){return new V(T).sinh()},_e.prototype.sqrt=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.sqrt(this.get(T,z)));return this},_e.sqrt=function(T){return new V(T).sqrt()},_e.prototype.tan=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.tan(this.get(T,z)));return this},_e.tan=function(T){return new V(T).tan()},_e.prototype.tanh=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.tanh(this.get(T,z)));return this},_e.tanh=function(T){return new V(T).tanh()},_e.prototype.trunc=function(){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.set(T,z,Math.trunc(this.get(T,z)));return this},_e.trunc=function(T){return new V(T).trunc()},_e.pow=function(T,z){return new V(T).pow(z)},_e.prototype.pow=function(T){return typeof T=="number"?this.powS(T):this.powM(T)},_e.prototype.powS=function(T){for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,Math.pow(this.get(z,J),T));return this},_e.prototype.powM=function(T){if(T=V.checkMatrix(T),this.rows!==T.rows||this.columns!==T.columns)throw new RangeError("Matrices dimensions must be equal");for(let z=0;z<this.rows;z++)for(let J=0;J<this.columns;J++)this.set(z,J,Math.pow(this.get(z,J),T.get(z,J)));return this}}function de(_e,V,H){let T=H?_e.rows:_e.rows-1;if(V<0||V>T)throw new RangeError("Row index out of range")}function fe(_e,V,H){let T=H?_e.columns:_e.columns-1;if(V<0||V>T)throw new RangeError("Column index out of range")}function F(_e,V){if(V.to1DArray&&(V=V.to1DArray()),V.length!==_e.columns)throw new RangeError("vector size must be the same as the number of columns");return V}function be(_e,V){if(V.to1DArray&&(V=V.to1DArray()),V.length!==_e.rows)throw new RangeError("vector size must be the same as the number of rows");return V}function pe(_e,V,H){return{row:ae(_e,V),column:Q(_e,H)}}function ae(_e,V){if(typeof V!="object")throw new TypeError("unexpected type for row indices");if(V.some(T=>T<0||T>=_e.rows))throw new RangeError("row indices are out of range");return Array.isArray(V)||(V=Array.from(V)),V}function Q(_e,V){if(typeof V!="object")throw new TypeError("unexpected type for column indices");if(V.some(T=>T<0||T>=_e.columns))throw new RangeError("column indices are out of range");return Array.isArray(V)||(V=Array.from(V)),V}function I(_e,V,H,T,z){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(te("startRow",V),te("endRow",H),te("startColumn",T),te("endColumn",z),V>H||T>z||V<0||V>=_e.rows||H<0||H>=_e.rows||T<0||T>=_e.columns||z<0||z>=_e.columns)throw new RangeError("Submatrix indices are out of range")}function oe(_e,V=0){let H=[];for(let T=0;T<_e;T++)H.push(V);return H}function te(_e,V){if(typeof V!="number")throw new TypeError(`${_e} must be a number`)}function ue(_e){if(_e.isEmpty())throw new Error("Empty matrix has no elements to index")}function De(_e){let V=oe(_e.rows);for(let H=0;H<_e.rows;++H)for(let T=0;T<_e.columns;++T)V[H]+=_e.get(H,T);return V}function ve(_e){let V=oe(_e.columns);for(let H=0;H<_e.rows;++H)for(let T=0;T<_e.columns;++T)V[T]+=_e.get(H,T);return V}function Ne(_e){let V=0;for(let H=0;H<_e.rows;H++)for(let T=0;T<_e.columns;T++)V+=_e.get(H,T);return V}function Ge(_e){let V=oe(_e.rows,1);for(let H=0;H<_e.rows;++H)for(let T=0;T<_e.columns;++T)V[H]*=_e.get(H,T);return V}function $e(_e){let V=oe(_e.columns,1);for(let H=0;H<_e.rows;++H)for(let T=0;T<_e.columns;++T)V[T]*=_e.get(H,T);return V}function Be(_e){let V=1;for(let H=0;H<_e.rows;H++)for(let T=0;T<_e.columns;T++)V*=_e.get(H,T);return V}function mt(_e,V,H){const T=_e.rows,z=_e.columns,J=[];for(let Pe=0;Pe<T;Pe++){let Oe=0,Ue=0,qe=0;for(let Ct=0;Ct<z;Ct++)qe=_e.get(Pe,Ct)-H[Pe],Oe+=qe,Ue+=qe*qe;V?J.push((Ue-Oe*Oe/z)/(z-1)):J.push((Ue-Oe*Oe/z)/z)}return J}function Ot(_e,V,H){const T=_e.rows,z=_e.columns,J=[];for(let Pe=0;Pe<z;Pe++){let Oe=0,Ue=0,qe=0;for(let Ct=0;Ct<T;Ct++)qe=_e.get(Ct,Pe)-H[Pe],Oe+=qe,Ue+=qe*qe;V?J.push((Ue-Oe*Oe/T)/(T-1)):J.push((Ue-Oe*Oe/T)/T)}return J}function kt(_e,V,H){const T=_e.rows,z=_e.columns,J=T*z;let Pe=0,Oe=0,Ue=0;for(let qe=0;qe<T;qe++)for(let Ct=0;Ct<z;Ct++)Ue=_e.get(qe,Ct)-H,Pe+=Ue,Oe+=Ue*Ue;return V?(Oe-Pe*Pe/J)/(J-1):(Oe-Pe*Pe/J)/J}function Tt(_e,V){for(let H=0;H<_e.rows;H++)for(let T=0;T<_e.columns;T++)_e.set(H,T,_e.get(H,T)-V[H])}function Jt(_e,V){for(let H=0;H<_e.rows;H++)for(let T=0;T<_e.columns;T++)_e.set(H,T,_e.get(H,T)-V[T])}function Mn(_e,V){for(let H=0;H<_e.rows;H++)for(let T=0;T<_e.columns;T++)_e.set(H,T,_e.get(H,T)-V)}function Yt(_e){const V=[];for(let H=0;H<_e.rows;H++){let T=0;for(let z=0;z<_e.columns;z++)T+=Math.pow(_e.get(H,z),2)/(_e.columns-1);V.push(Math.sqrt(T))}return V}function pn(_e,V){for(let H=0;H<_e.rows;H++)for(let T=0;T<_e.columns;T++)_e.set(H,T,_e.get(H,T)/V[H])}function gt(_e){const V=[];for(let H=0;H<_e.columns;H++){let T=0;for(let z=0;z<_e.rows;z++)T+=Math.pow(_e.get(z,H),2)/(_e.rows-1);V.push(Math.sqrt(T))}return V}function _t(_e,V){for(let H=0;H<_e.rows;H++)for(let T=0;T<_e.columns;T++)_e.set(H,T,_e.get(H,T)/V[T])}function Gt(_e){const V=_e.size-1;let H=0;for(let T=0;T<_e.columns;T++)for(let z=0;z<_e.rows;z++)H+=Math.pow(_e.get(z,T),2)/V;return Math.sqrt(H)}function Ft(_e,V){for(let H=0;H<_e.rows;H++)for(let T=0;T<_e.columns;T++)_e.set(H,T,_e.get(H,T)/V)}class zt{static from1DArray(V,H,T){if(V*H!==T.length)throw new RangeError("data length does not match given dimensions");let J=new Bt(V,H);for(let Pe=0;Pe<V;Pe++)for(let Oe=0;Oe<H;Oe++)J.set(Pe,Oe,T[Pe*H+Oe]);return J}static rowVector(V){let H=new Bt(1,V.length);for(let T=0;T<V.length;T++)H.set(0,T,V[T]);return H}static columnVector(V){let H=new Bt(V.length,1);for(let T=0;T<V.length;T++)H.set(T,0,V[T]);return H}static zeros(V,H){return new Bt(V,H)}static ones(V,H){return new Bt(V,H).fill(1)}static rand(V,H,T={}){if(typeof T!="object")throw new TypeError("options must be an object");const{random:z=Math.random}=T;let J=new Bt(V,H);for(let Pe=0;Pe<V;Pe++)for(let Oe=0;Oe<H;Oe++)J.set(Pe,Oe,z());return J}static randInt(V,H,T={}){if(typeof T!="object")throw new TypeError("options must be an object");const{min:z=0,max:J=1e3,random:Pe=Math.random}=T;if(!Number.isInteger(z))throw new TypeError("min must be an integer");if(!Number.isInteger(J))throw new TypeError("max must be an integer");if(z>=J)throw new RangeError("min must be smaller than max");let Oe=J-z,Ue=new Bt(V,H);for(let qe=0;qe<V;qe++)for(let Ct=0;Ct<H;Ct++){let dt=z+Math.round(Pe()*Oe);Ue.set(qe,Ct,dt)}return Ue}static eye(V,H,T){H===void 0&&(H=V),T===void 0&&(T=1);let z=Math.min(V,H),J=this.zeros(V,H);for(let Pe=0;Pe<z;Pe++)J.set(Pe,Pe,T);return J}static diag(V,H,T){let z=V.length;H===void 0&&(H=z),T===void 0&&(T=H);let J=Math.min(z,H,T),Pe=this.zeros(H,T);for(let Oe=0;Oe<J;Oe++)Pe.set(Oe,Oe,V[Oe]);return Pe}static min(V,H){V=this.checkMatrix(V),H=this.checkMatrix(H);let T=V.rows,z=V.columns,J=new Bt(T,z);for(let Pe=0;Pe<T;Pe++)for(let Oe=0;Oe<z;Oe++)J.set(Pe,Oe,Math.min(V.get(Pe,Oe),H.get(Pe,Oe)));return J}static max(V,H){V=this.checkMatrix(V),H=this.checkMatrix(H);let T=V.rows,z=V.columns,J=new this(T,z);for(let Pe=0;Pe<T;Pe++)for(let Oe=0;Oe<z;Oe++)J.set(Pe,Oe,Math.max(V.get(Pe,Oe),H.get(Pe,Oe)));return J}static checkMatrix(V){return zt.isMatrix(V)?V:new Bt(V)}static isMatrix(V){return V!=null&&V.klass==="Matrix"}get size(){return this.rows*this.columns}apply(V){if(typeof V!="function")throw new TypeError("callback must be a function");for(let H=0;H<this.rows;H++)for(let T=0;T<this.columns;T++)V.call(this,H,T);return this}to1DArray(){let V=[];for(let H=0;H<this.rows;H++)for(let T=0;T<this.columns;T++)V.push(this.get(H,T));return V}to2DArray(){let V=[];for(let H=0;H<this.rows;H++){V.push([]);for(let T=0;T<this.columns;T++)V[H].push(this.get(H,T))}return V}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let V=0;V<this.rows;V++)for(let H=0;H<=V;H++)if(this.get(V,H)!==this.get(H,V))return!1;return!0}return!1}isEchelonForm(){let V=0,H=0,T=-1,z=!0,J=!1;for(;V<this.rows&&z;){for(H=0,J=!1;H<this.columns&&J===!1;)this.get(V,H)===0?H++:this.get(V,H)===1&&H>T?(J=!0,T=H):(z=!1,J=!0);V++}return z}isReducedEchelonForm(){let V=0,H=0,T=-1,z=!0,J=!1;for(;V<this.rows&&z;){for(H=0,J=!1;H<this.columns&&J===!1;)this.get(V,H)===0?H++:this.get(V,H)===1&&H>T?(J=!0,T=H):(z=!1,J=!0);for(let Pe=H+1;Pe<this.rows;Pe++)this.get(V,Pe)!==0&&(z=!1);V++}return z}echelonForm(){let V=this.clone(),H=0,T=0;for(;H<V.rows&&T<V.columns;){let z=H;for(let J=H;J<V.rows;J++)V.get(J,T)>V.get(z,T)&&(z=J);if(V.get(z,T)===0)T++;else{V.swapRows(H,z);let J=V.get(H,T);for(let Pe=T;Pe<V.columns;Pe++)V.set(H,Pe,V.get(H,Pe)/J);for(let Pe=H+1;Pe<V.rows;Pe++){let Oe=V.get(Pe,T)/V.get(H,T);V.set(Pe,T,0);for(let Ue=T+1;Ue<V.columns;Ue++)V.set(Pe,Ue,V.get(Pe,Ue)-V.get(H,Ue)*Oe)}H++,T++}}return V}reducedEchelonForm(){let V=this.echelonForm(),H=V.columns,T=V.rows,z=T-1;for(;z>=0;)if(V.maxRow(z)===0)z--;else{let J=0,Pe=!1;for(;J<T&&Pe===!1;)V.get(z,J)===1?Pe=!0:J++;for(let Oe=0;Oe<z;Oe++){let Ue=V.get(Oe,J);for(let qe=J;qe<H;qe++){let Ct=V.get(Oe,qe)-Ue*V.get(z,qe);V.set(Oe,qe,Ct)}}z--}return V}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(V={}){if(typeof V!="object")throw new TypeError("options must be an object");const{rows:H=1,columns:T=1}=V;if(!Number.isInteger(H)||H<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(T)||T<=0)throw new TypeError("columns must be a positive integer");let z=new Bt(this.rows*H,this.columns*T);for(let J=0;J<H;J++)for(let Pe=0;Pe<T;Pe++)z.setSubMatrix(this,this.rows*J,this.columns*Pe);return z}fill(V){for(let H=0;H<this.rows;H++)for(let T=0;T<this.columns;T++)this.set(H,T,V);return this}neg(){return this.mulS(-1)}getRow(V){de(this,V);let H=[];for(let T=0;T<this.columns;T++)H.push(this.get(V,T));return H}getRowVector(V){return Bt.rowVector(this.getRow(V))}setRow(V,H){de(this,V),H=F(this,H);for(let T=0;T<this.columns;T++)this.set(V,T,H[T]);return this}swapRows(V,H){de(this,V),de(this,H);for(let T=0;T<this.columns;T++){let z=this.get(V,T);this.set(V,T,this.get(H,T)),this.set(H,T,z)}return this}getColumn(V){fe(this,V);let H=[];for(let T=0;T<this.rows;T++)H.push(this.get(T,V));return H}getColumnVector(V){return Bt.columnVector(this.getColumn(V))}setColumn(V,H){fe(this,V),H=be(this,H);for(let T=0;T<this.rows;T++)this.set(T,V,H[T]);return this}swapColumns(V,H){fe(this,V),fe(this,H);for(let T=0;T<this.rows;T++){let z=this.get(T,V);this.set(T,V,this.get(T,H)),this.set(T,H,z)}return this}addRowVector(V){V=F(this,V);for(let H=0;H<this.rows;H++)for(let T=0;T<this.columns;T++)this.set(H,T,this.get(H,T)+V[T]);return this}subRowVector(V){V=F(this,V);for(let H=0;H<this.rows;H++)for(let T=0;T<this.columns;T++)this.set(H,T,this.get(H,T)-V[T]);return this}mulRowVector(V){V=F(this,V);for(let H=0;H<this.rows;H++)for(let T=0;T<this.columns;T++)this.set(H,T,this.get(H,T)*V[T]);return this}divRowVector(V){V=F(this,V);for(let H=0;H<this.rows;H++)for(let T=0;T<this.columns;T++)this.set(H,T,this.get(H,T)/V[T]);return this}addColumnVector(V){V=be(this,V);for(let H=0;H<this.rows;H++)for(let T=0;T<this.columns;T++)this.set(H,T,this.get(H,T)+V[H]);return this}subColumnVector(V){V=be(this,V);for(let H=0;H<this.rows;H++)for(let T=0;T<this.columns;T++)this.set(H,T,this.get(H,T)-V[H]);return this}mulColumnVector(V){V=be(this,V);for(let H=0;H<this.rows;H++)for(let T=0;T<this.columns;T++)this.set(H,T,this.get(H,T)*V[H]);return this}divColumnVector(V){V=be(this,V);for(let H=0;H<this.rows;H++)for(let T=0;T<this.columns;T++)this.set(H,T,this.get(H,T)/V[H]);return this}mulRow(V,H){de(this,V);for(let T=0;T<this.columns;T++)this.set(V,T,this.get(V,T)*H);return this}mulColumn(V,H){fe(this,V);for(let T=0;T<this.rows;T++)this.set(T,V,this.get(T,V)*H);return this}max(){if(this.isEmpty())return NaN;let V=this.get(0,0);for(let H=0;H<this.rows;H++)for(let T=0;T<this.columns;T++)this.get(H,T)>V&&(V=this.get(H,T));return V}maxIndex(){ue(this);let V=this.get(0,0),H=[0,0];for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.get(T,z)>V&&(V=this.get(T,z),H[0]=T,H[1]=z);return H}min(){if(this.isEmpty())return NaN;let V=this.get(0,0);for(let H=0;H<this.rows;H++)for(let T=0;T<this.columns;T++)this.get(H,T)<V&&(V=this.get(H,T));return V}minIndex(){ue(this);let V=this.get(0,0),H=[0,0];for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)this.get(T,z)<V&&(V=this.get(T,z),H[0]=T,H[1]=z);return H}maxRow(V){if(de(this,V),this.isEmpty())return NaN;let H=this.get(V,0);for(let T=1;T<this.columns;T++)this.get(V,T)>H&&(H=this.get(V,T));return H}maxRowIndex(V){de(this,V),ue(this);let H=this.get(V,0),T=[V,0];for(let z=1;z<this.columns;z++)this.get(V,z)>H&&(H=this.get(V,z),T[1]=z);return T}minRow(V){if(de(this,V),this.isEmpty())return NaN;let H=this.get(V,0);for(let T=1;T<this.columns;T++)this.get(V,T)<H&&(H=this.get(V,T));return H}minRowIndex(V){de(this,V),ue(this);let H=this.get(V,0),T=[V,0];for(let z=1;z<this.columns;z++)this.get(V,z)<H&&(H=this.get(V,z),T[1]=z);return T}maxColumn(V){if(fe(this,V),this.isEmpty())return NaN;let H=this.get(0,V);for(let T=1;T<this.rows;T++)this.get(T,V)>H&&(H=this.get(T,V));return H}maxColumnIndex(V){fe(this,V),ue(this);let H=this.get(0,V),T=[0,V];for(let z=1;z<this.rows;z++)this.get(z,V)>H&&(H=this.get(z,V),T[0]=z);return T}minColumn(V){if(fe(this,V),this.isEmpty())return NaN;let H=this.get(0,V);for(let T=1;T<this.rows;T++)this.get(T,V)<H&&(H=this.get(T,V));return H}minColumnIndex(V){fe(this,V),ue(this);let H=this.get(0,V),T=[0,V];for(let z=1;z<this.rows;z++)this.get(z,V)<H&&(H=this.get(z,V),T[0]=z);return T}diag(){let V=Math.min(this.rows,this.columns),H=[];for(let T=0;T<V;T++)H.push(this.get(T,T));return H}norm(V="frobenius"){let H=0;if(V==="max")return this.max();if(V==="frobenius"){for(let T=0;T<this.rows;T++)for(let z=0;z<this.columns;z++)H=H+this.get(T,z)*this.get(T,z);return Math.sqrt(H)}else throw new RangeError(`unknown norm type: ${V}`)}cumulativeSum(){let V=0;for(let H=0;H<this.rows;H++)for(let T=0;T<this.columns;T++)V+=this.get(H,T),this.set(H,T,V);return this}dot(V){zt.isMatrix(V)&&(V=V.to1DArray());let H=this.to1DArray();if(H.length!==V.length)throw new RangeError("vectors do not have the same size");let T=0;for(let z=0;z<H.length;z++)T+=H[z]*V[z];return T}mmul(V){V=Bt.checkMatrix(V);let H=this.rows,T=this.columns,z=V.columns,J=new Bt(H,z),Pe=new Float64Array(T);for(let Oe=0;Oe<z;Oe++){for(let Ue=0;Ue<T;Ue++)Pe[Ue]=V.get(Ue,Oe);for(let Ue=0;Ue<H;Ue++){let qe=0;for(let Ct=0;Ct<T;Ct++)qe+=this.get(Ue,Ct)*Pe[Ct];J.set(Ue,Oe,qe)}}return J}strassen2x2(V){V=Bt.checkMatrix(V);let H=new Bt(2,2);const T=this.get(0,0),z=V.get(0,0),J=this.get(0,1),Pe=V.get(0,1),Oe=this.get(1,0),Ue=V.get(1,0),qe=this.get(1,1),Ct=V.get(1,1),dt=(T+qe)*(z+Ct),Et=(Oe+qe)*z,Cn=T*(Pe-Ct),st=qe*(Ue-z),Zt=(T+J)*Ct,zn=(Oe-T)*(z+Pe),Lt=(J-qe)*(Ue+Ct),En=dt+st-Zt+Lt,qn=Cn+Zt,ui=Et+st,Ai=dt-Et+Cn+zn;return H.set(0,0,En),H.set(0,1,qn),H.set(1,0,ui),H.set(1,1,Ai),H}strassen3x3(V){V=Bt.checkMatrix(V);let H=new Bt(3,3);const T=this.get(0,0),z=this.get(0,1),J=this.get(0,2),Pe=this.get(1,0),Oe=this.get(1,1),Ue=this.get(1,2),qe=this.get(2,0),Ct=this.get(2,1),dt=this.get(2,2),Et=V.get(0,0),Cn=V.get(0,1),st=V.get(0,2),Zt=V.get(1,0),zn=V.get(1,1),Lt=V.get(1,2),En=V.get(2,0),qn=V.get(2,1),ui=V.get(2,2),Ai=(T+z+J-Pe-Oe-Ct-dt)*zn,or=(T-Pe)*(-Cn+zn),Hn=Oe*(-Et+Cn+Zt-zn-Lt-En+ui),Jn=(-T+Pe+Oe)*(Et-Cn+zn),Ii=(Pe+Oe)*(-Et+Cn),ti=T*Et,Ht=(-T+qe+Ct)*(Et-st+Lt),Bn=(-T+qe)*(st-Lt),Xn=(qe+Ct)*(-Et+st),Kn=(T+z+J-Oe-Ue-qe-Ct)*Lt,Bi=Ct*(-Et+st+Zt-zn-Lt-En+qn),br=(-J+Ct+dt)*(zn+En-qn),Vi=(J-dt)*(zn-qn),lr=J*En,Qi=(Ct+dt)*(-En+qn),gi=(-J+Oe+Ue)*(Lt+En-ui),Rn=(J-Ue)*(Lt-ui),vs=(Oe+Ue)*(-En+ui),Ss=z*Zt,Si=Ue*qn,Lr=Pe*st,mr=qe*Cn,Wr=dt*ui,ei=ti+lr+Ss,Jo=Ai+Jn+Ii+ti+br+lr+Qi,va=ti+Ht+Xn+Kn+lr+gi+vs,Es=or+Hn+Jn+ti+lr+gi+Rn,$t=or+Jn+Ii+ti+Si,Lo=lr+gi+Rn+vs+Lr,Oa=ti+Ht+Bn+Bi+br+Vi+lr,ea=br+Vi+lr+Qi+mr,ao=ti+Ht+Bn+Xn+Wr;return H.set(0,0,ei),H.set(0,1,Jo),H.set(0,2,va),H.set(1,0,Es),H.set(1,1,$t),H.set(1,2,Lo),H.set(2,0,Oa),H.set(2,1,ea),H.set(2,2,ao),H}mmulStrassen(V){V=Bt.checkMatrix(V);let H=this.clone(),T=H.rows,z=H.columns,J=V.rows,Pe=V.columns;z!==J&&console.warn(`Multiplying ${T} x ${z} and ${J} x ${Pe} matrix: dimensions do not match.`);function Oe(dt,Et,Cn){let st=dt.rows,Zt=dt.columns;if(st===Et&&Zt===Cn)return dt;{let zn=zt.zeros(Et,Cn);return zn=zn.setSubMatrix(dt,0,0),zn}}let Ue=Math.max(T,J),qe=Math.max(z,Pe);H=Oe(H,Ue,qe),V=Oe(V,Ue,qe);function Ct(dt,Et,Cn,st){if(Cn<=512||st<=512)return dt.mmul(Et);Cn%2==1&&st%2==1?(dt=Oe(dt,Cn+1,st+1),Et=Oe(Et,Cn+1,st+1)):Cn%2==1?(dt=Oe(dt,Cn+1,st),Et=Oe(Et,Cn+1,st)):st%2==1&&(dt=Oe(dt,Cn,st+1),Et=Oe(Et,Cn,st+1));let Zt=parseInt(dt.rows/2,10),zn=parseInt(dt.columns/2,10),Lt=dt.subMatrix(0,Zt-1,0,zn-1),En=Et.subMatrix(0,Zt-1,0,zn-1),qn=dt.subMatrix(0,Zt-1,zn,dt.columns-1),ui=Et.subMatrix(0,Zt-1,zn,Et.columns-1),Ai=dt.subMatrix(Zt,dt.rows-1,0,zn-1),or=Et.subMatrix(Zt,Et.rows-1,0,zn-1),Hn=dt.subMatrix(Zt,dt.rows-1,zn,dt.columns-1),Jn=Et.subMatrix(Zt,Et.rows-1,zn,Et.columns-1),Ii=Ct(zt.add(Lt,Hn),zt.add(En,Jn),Zt,zn),ti=Ct(zt.add(Ai,Hn),En,Zt,zn),Ht=Ct(Lt,zt.sub(ui,Jn),Zt,zn),Bn=Ct(Hn,zt.sub(or,En),Zt,zn),Xn=Ct(zt.add(Lt,qn),Jn,Zt,zn),Kn=Ct(zt.sub(Ai,Lt),zt.add(En,ui),Zt,zn),Bi=Ct(zt.sub(qn,Hn),zt.add(or,Jn),Zt,zn),br=zt.add(Ii,Bn);br.sub(Xn),br.add(Bi);let Vi=zt.add(Ht,Xn),lr=zt.add(ti,Bn),Qi=zt.sub(Ii,ti);Qi.add(Ht),Qi.add(Kn);let gi=zt.zeros(2*br.rows,2*br.columns);return gi=gi.setSubMatrix(br,0,0),gi=gi.setSubMatrix(Vi,br.rows,0),gi=gi.setSubMatrix(lr,0,br.columns),gi=gi.setSubMatrix(Qi,br.rows,br.columns),gi.subMatrix(0,Cn-1,0,st-1)}return Ct(H,V,Ue,qe)}scaleRows(V={}){if(typeof V!="object")throw new TypeError("options must be an object");const{min:H=0,max:T=1}=V;if(!Number.isFinite(H))throw new TypeError("min must be a number");if(!Number.isFinite(T))throw new TypeError("max must be a number");if(H>=T)throw new RangeError("min must be smaller than max");let z=new Bt(this.rows,this.columns);for(let J=0;J<this.rows;J++){const Pe=this.getRow(J);Pe.length>0&&L(Pe,{min:H,max:T,output:Pe}),z.setRow(J,Pe)}return z}scaleColumns(V={}){if(typeof V!="object")throw new TypeError("options must be an object");const{min:H=0,max:T=1}=V;if(!Number.isFinite(H))throw new TypeError("min must be a number");if(!Number.isFinite(T))throw new TypeError("max must be a number");if(H>=T)throw new RangeError("min must be smaller than max");let z=new Bt(this.rows,this.columns);for(let J=0;J<this.columns;J++){const Pe=this.getColumn(J);Pe.length&&L(Pe,{min:H,max:T,output:Pe}),z.setColumn(J,Pe)}return z}flipRows(){const V=Math.ceil(this.columns/2);for(let H=0;H<this.rows;H++)for(let T=0;T<V;T++){let z=this.get(H,T),J=this.get(H,this.columns-1-T);this.set(H,T,J),this.set(H,this.columns-1-T,z)}return this}flipColumns(){const V=Math.ceil(this.rows/2);for(let H=0;H<this.columns;H++)for(let T=0;T<V;T++){let z=this.get(T,H),J=this.get(this.rows-1-T,H);this.set(T,H,J),this.set(this.rows-1-T,H,z)}return this}kroneckerProduct(V){V=Bt.checkMatrix(V);let H=this.rows,T=this.columns,z=V.rows,J=V.columns,Pe=new Bt(H*z,T*J);for(let Oe=0;Oe<H;Oe++)for(let Ue=0;Ue<T;Ue++)for(let qe=0;qe<z;qe++)for(let Ct=0;Ct<J;Ct++)Pe.set(z*Oe+qe,J*Ue+Ct,this.get(Oe,Ue)*V.get(qe,Ct));return Pe}kroneckerSum(V){if(V=Bt.checkMatrix(V),!this.isSquare()||!V.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let H=this.rows,T=V.rows,z=this.kroneckerProduct(Bt.eye(T,T)),J=Bt.eye(H,H).kroneckerProduct(V);return z.add(J)}transpose(){let V=new Bt(this.columns,this.rows);for(let H=0;H<this.rows;H++)for(let T=0;T<this.columns;T++)V.set(T,H,this.get(H,T));return V}sortRows(V=en){for(let H=0;H<this.rows;H++)this.setRow(H,this.getRow(H).sort(V));return this}sortColumns(V=en){for(let H=0;H<this.columns;H++)this.setColumn(H,this.getColumn(H).sort(V));return this}subMatrix(V,H,T,z){I(this,V,H,T,z);let J=new Bt(H-V+1,z-T+1);for(let Pe=V;Pe<=H;Pe++)for(let Oe=T;Oe<=z;Oe++)J.set(Pe-V,Oe-T,this.get(Pe,Oe));return J}subMatrixRow(V,H,T){if(H===void 0&&(H=0),T===void 0&&(T=this.columns-1),H>T||H<0||H>=this.columns||T<0||T>=this.columns)throw new RangeError("Argument out of range");let z=new Bt(V.length,T-H+1);for(let J=0;J<V.length;J++)for(let Pe=H;Pe<=T;Pe++){if(V[J]<0||V[J]>=this.rows)throw new RangeError(`Row index out of range: ${V[J]}`);z.set(J,Pe-H,this.get(V[J],Pe))}return z}subMatrixColumn(V,H,T){if(H===void 0&&(H=0),T===void 0&&(T=this.rows-1),H>T||H<0||H>=this.rows||T<0||T>=this.rows)throw new RangeError("Argument out of range");let z=new Bt(T-H+1,V.length);for(let J=0;J<V.length;J++)for(let Pe=H;Pe<=T;Pe++){if(V[J]<0||V[J]>=this.columns)throw new RangeError(`Column index out of range: ${V[J]}`);z.set(Pe-H,J,this.get(Pe,V[J]))}return z}setSubMatrix(V,H,T){if(V=Bt.checkMatrix(V),V.isEmpty())return this;let z=H+V.rows-1,J=T+V.columns-1;I(this,H,z,T,J);for(let Pe=0;Pe<V.rows;Pe++)for(let Oe=0;Oe<V.columns;Oe++)this.set(H+Pe,T+Oe,V.get(Pe,Oe));return this}selection(V,H){let T=pe(this,V,H),z=new Bt(V.length,H.length);for(let J=0;J<T.row.length;J++){let Pe=T.row[J];for(let Oe=0;Oe<T.column.length;Oe++){let Ue=T.column[Oe];z.set(J,Oe,this.get(Pe,Ue))}}return z}trace(){let V=Math.min(this.rows,this.columns),H=0;for(let T=0;T<V;T++)H+=this.get(T,T);return H}clone(){let V=new Bt(this.rows,this.columns);for(let H=0;H<this.rows;H++)for(let T=0;T<this.columns;T++)V.set(H,T,this.get(H,T));return V}sum(V){switch(V){case"row":return De(this);case"column":return ve(this);case void 0:return Ne(this);default:throw new Error(`invalid option: ${V}`)}}product(V){switch(V){case"row":return Ge(this);case"column":return $e(this);case void 0:return Be(this);default:throw new Error(`invalid option: ${V}`)}}mean(V){const H=this.sum(V);switch(V){case"row":{for(let T=0;T<this.rows;T++)H[T]/=this.columns;return H}case"column":{for(let T=0;T<this.columns;T++)H[T]/=this.rows;return H}case void 0:return H/this.size;default:throw new Error(`invalid option: ${V}`)}}variance(V,H={}){if(typeof V=="object"&&(H=V,V=void 0),typeof H!="object")throw new TypeError("options must be an object");const{unbiased:T=!0,mean:z=this.mean(V)}=H;if(typeof T!="boolean")throw new TypeError("unbiased must be a boolean");switch(V){case"row":{if(!Array.isArray(z))throw new TypeError("mean must be an array");return mt(this,T,z)}case"column":{if(!Array.isArray(z))throw new TypeError("mean must be an array");return Ot(this,T,z)}case void 0:{if(typeof z!="number")throw new TypeError("mean must be a number");return kt(this,T,z)}default:throw new Error(`invalid option: ${V}`)}}standardDeviation(V,H){typeof V=="object"&&(H=V,V=void 0);const T=this.variance(V,H);if(V===void 0)return Math.sqrt(T);for(let z=0;z<T.length;z++)T[z]=Math.sqrt(T[z]);return T}center(V,H={}){if(typeof V=="object"&&(H=V,V=void 0),typeof H!="object")throw new TypeError("options must be an object");const{center:T=this.mean(V)}=H;switch(V){case"row":{if(!Array.isArray(T))throw new TypeError("center must be an array");return Tt(this,T),this}case"column":{if(!Array.isArray(T))throw new TypeError("center must be an array");return Jt(this,T),this}case void 0:{if(typeof T!="number")throw new TypeError("center must be a number");return Mn(this,T),this}default:throw new Error(`invalid option: ${V}`)}}scale(V,H={}){if(typeof V=="object"&&(H=V,V=void 0),typeof H!="object")throw new TypeError("options must be an object");let T=H.scale;switch(V){case"row":{if(T===void 0)T=Yt(this);else if(!Array.isArray(T))throw new TypeError("scale must be an array");return pn(this,T),this}case"column":{if(T===void 0)T=gt(this);else if(!Array.isArray(T))throw new TypeError("scale must be an array");return _t(this,T),this}case void 0:{if(T===void 0)T=Gt(this);else if(typeof T!="number")throw new TypeError("scale must be a number");return Ft(this,T),this}default:throw new Error(`invalid option: ${V}`)}}toString(V){return G(this,V)}}zt.prototype.klass="Matrix",typeof Symbol!="undefined"&&(zt.prototype[Symbol.for("nodejs.util.inspect.custom")]=W);function en(_e,V){return _e-V}zt.random=zt.rand,zt.randomInt=zt.randInt,zt.diagonal=zt.diag,zt.prototype.diagonal=zt.prototype.diag,zt.identity=zt.eye,zt.prototype.negate=zt.prototype.neg,zt.prototype.tensorProduct=zt.prototype.kroneckerProduct;class Bt extends zt{constructor(V,H){super();if(Bt.isMatrix(V))return V.clone();if(Number.isInteger(V)&&V>=0)if(this.data=[],Number.isInteger(H)&&H>=0)for(let T=0;T<V;T++)this.data.push(new Float64Array(H));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(V)){const T=V;if(V=T.length,H=V?T[0].length:0,typeof H!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let z=0;z<V;z++){if(T[z].length!==H)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(T[z]))}}else throw new TypeError("First argument must be a positive number or an array");this.rows=V,this.columns=H}set(V,H,T){return this.data[V][H]=T,this}get(V,H){return this.data[V][H]}removeRow(V){return de(this,V),this.data.splice(V,1),this.rows-=1,this}addRow(V,H){return H===void 0&&(H=V,V=this.rows),de(this,V,!0),H=Float64Array.from(F(this,H)),this.data.splice(V,0,H),this.rows+=1,this}removeColumn(V){fe(this,V);for(let H=0;H<this.rows;H++){const T=new Float64Array(this.columns-1);for(let z=0;z<V;z++)T[z]=this.data[H][z];for(let z=V+1;z<this.columns;z++)T[z-1]=this.data[H][z];this.data[H]=T}return this.columns-=1,this}addColumn(V,H){typeof H=="undefined"&&(H=V,V=this.columns),fe(this,V,!0),H=be(this,H);for(let T=0;T<this.rows;T++){const z=new Float64Array(this.columns+1);let J=0;for(;J<V;J++)z[J]=this.data[T][J];for(z[J++]=H[T];J<this.columns+1;J++)z[J]=this.data[T][J-1];this.data[T]=z}return this.columns+=1,this}}we(zt,Bt);class an extends zt{constructor(V,H,T){super();this.matrix=V,this.rows=H,this.columns=T}}class Di extends an{constructor(V,H){fe(V,H),super(V,V.rows,1),this.column=H}set(V,H,T){return this.matrix.set(V,this.column,T),this}get(V){return this.matrix.get(V,this.column)}}class _i extends an{constructor(V,H){H=Q(V,H),super(V,V.rows,H.length),this.columnIndices=H}set(V,H,T){return this.matrix.set(V,this.columnIndices[H],T),this}get(V,H){return this.matrix.get(V,this.columnIndices[H])}}class wi extends an{constructor(V){super(V,V.rows,V.columns)}set(V,H,T){return this.matrix.set(V,this.columns-H-1,T),this}get(V,H){return this.matrix.get(V,this.columns-H-1)}}class On extends an{constructor(V){super(V,V.rows,V.columns)}set(V,H,T){return this.matrix.set(this.rows-V-1,H,T),this}get(V,H){return this.matrix.get(this.rows-V-1,H)}}class Pt extends an{constructor(V,H){de(V,H),super(V,1,V.columns),this.row=H}set(V,H,T){return this.matrix.set(this.row,H,T),this}get(V,H){return this.matrix.get(this.row,H)}}class et extends an{constructor(V,H){H=ae(V,H),super(V,H.length,V.columns),this.rowIndices=H}set(V,H,T){return this.matrix.set(this.rowIndices[V],H,T),this}get(V,H){return this.matrix.get(this.rowIndices[V],H)}}class Ci extends an{constructor(V,H,T){let z=pe(V,H,T);super(V,z.row.length,z.column.length);this.rowIndices=z.row,this.columnIndices=z.column}set(V,H,T){return this.matrix.set(this.rowIndices[V],this.columnIndices[H],T),this}get(V,H){return this.matrix.get(this.rowIndices[V],this.columnIndices[H])}}class li extends an{constructor(V,H,T,z,J){I(V,H,T,z,J),super(V,T-H+1,J-z+1),this.startRow=H,this.startColumn=z}set(V,H,T){return this.matrix.set(this.startRow+V,this.startColumn+H,T),this}get(V,H){return this.matrix.get(this.startRow+V,this.startColumn+H)}}class kn extends an{constructor(V){super(V,V.columns,V.rows)}set(V,H,T){return this.matrix.set(H,V,T),this}get(V,H){return this.matrix.get(H,V)}}class Ae extends zt{constructor(V,H={}){const{rows:T=1}=H;if(V.length%T!=0)throw new Error("the data length is not divisible by the number of rows");super();this.rows=T,this.columns=V.length/T,this.data=V}set(V,H,T){let z=this._calculateIndex(V,H);return this.data[z]=T,this}get(V,H){let T=this._calculateIndex(V,H);return this.data[T]}_calculateIndex(V,H){return V*this.columns+H}}class le extends zt{constructor(V){super();this.data=V,this.rows=V.length,this.columns=V[0].length}set(V,H,T){return this.data[V][H]=T,this}get(V,H){return this.data[V][H]}}function ne(_e,V){if(Array.isArray(_e))return _e[0]&&Array.isArray(_e[0])?new le(_e):new Ae(_e,V);throw new Error("the argument is not an array")}class B{constructor(V){V=le.checkMatrix(V);let H=V.clone(),T=H.rows,z=H.columns,J=new Float64Array(T),Pe=1,Oe,Ue,qe,Ct,dt,Et,Cn,st,Zt;for(Oe=0;Oe<T;Oe++)J[Oe]=Oe;for(st=new Float64Array(T),Ue=0;Ue<z;Ue++){for(Oe=0;Oe<T;Oe++)st[Oe]=H.get(Oe,Ue);for(Oe=0;Oe<T;Oe++){for(Zt=Math.min(Oe,Ue),dt=0,qe=0;qe<Zt;qe++)dt+=H.get(Oe,qe)*st[qe];st[Oe]-=dt,H.set(Oe,Ue,st[Oe])}for(Ct=Ue,Oe=Ue+1;Oe<T;Oe++)Math.abs(st[Oe])>Math.abs(st[Ct])&&(Ct=Oe);if(Ct!==Ue){for(qe=0;qe<z;qe++)Et=H.get(Ct,qe),H.set(Ct,qe,H.get(Ue,qe)),H.set(Ue,qe,Et);Cn=J[Ct],J[Ct]=J[Ue],J[Ue]=Cn,Pe=-Pe}if(Ue<T&&H.get(Ue,Ue)!==0)for(Oe=Ue+1;Oe<T;Oe++)H.set(Oe,Ue,H.get(Oe,Ue)/H.get(Ue,Ue))}this.LU=H,this.pivotVector=J,this.pivotSign=Pe}isSingular(){let V=this.LU,H=V.columns;for(let T=0;T<H;T++)if(V.get(T,T)===0)return!0;return!1}solve(V){V=Bt.checkMatrix(V);let H=this.LU;if(H.rows!==V.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let z=V.columns,J=V.subMatrixRow(this.pivotVector,0,z-1),Pe=H.columns,Oe,Ue,qe;for(qe=0;qe<Pe;qe++)for(Oe=qe+1;Oe<Pe;Oe++)for(Ue=0;Ue<z;Ue++)J.set(Oe,Ue,J.get(Oe,Ue)-J.get(qe,Ue)*H.get(Oe,qe));for(qe=Pe-1;qe>=0;qe--){for(Ue=0;Ue<z;Ue++)J.set(qe,Ue,J.get(qe,Ue)/H.get(qe,qe));for(Oe=0;Oe<qe;Oe++)for(Ue=0;Ue<z;Ue++)J.set(Oe,Ue,J.get(Oe,Ue)-J.get(qe,Ue)*H.get(Oe,qe))}return J}get determinant(){let V=this.LU;if(!V.isSquare())throw new Error("Matrix must be square");let H=this.pivotSign,T=V.columns;for(let z=0;z<T;z++)H*=V.get(z,z);return H}get lowerTriangularMatrix(){let V=this.LU,H=V.rows,T=V.columns,z=new Bt(H,T);for(let J=0;J<H;J++)for(let Pe=0;Pe<T;Pe++)J>Pe?z.set(J,Pe,V.get(J,Pe)):J===Pe?z.set(J,Pe,1):z.set(J,Pe,0);return z}get upperTriangularMatrix(){let V=this.LU,H=V.rows,T=V.columns,z=new Bt(H,T);for(let J=0;J<H;J++)for(let Pe=0;Pe<T;Pe++)J<=Pe?z.set(J,Pe,V.get(J,Pe)):z.set(J,Pe,0);return z}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function Me(_e,V){let H=0;return Math.abs(_e)>Math.abs(V)?(H=V/_e,Math.abs(_e)*Math.sqrt(1+H*H)):V!==0?(H=_e/V,Math.abs(V)*Math.sqrt(1+H*H)):0}class Ce{constructor(V){V=le.checkMatrix(V);let H=V.clone(),T=V.rows,z=V.columns,J=new Float64Array(z),Pe,Oe,Ue,qe;for(Ue=0;Ue<z;Ue++){let Ct=0;for(Pe=Ue;Pe<T;Pe++)Ct=Me(Ct,H.get(Pe,Ue));if(Ct!==0){for(H.get(Ue,Ue)<0&&(Ct=-Ct),Pe=Ue;Pe<T;Pe++)H.set(Pe,Ue,H.get(Pe,Ue)/Ct);for(H.set(Ue,Ue,H.get(Ue,Ue)+1),Oe=Ue+1;Oe<z;Oe++){for(qe=0,Pe=Ue;Pe<T;Pe++)qe+=H.get(Pe,Ue)*H.get(Pe,Oe);for(qe=-qe/H.get(Ue,Ue),Pe=Ue;Pe<T;Pe++)H.set(Pe,Oe,H.get(Pe,Oe)+qe*H.get(Pe,Ue))}}J[Ue]=-Ct}this.QR=H,this.Rdiag=J}solve(V){V=Bt.checkMatrix(V);let H=this.QR,T=H.rows;if(V.rows!==T)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let z=V.columns,J=V.clone(),Pe=H.columns,Oe,Ue,qe,Ct;for(qe=0;qe<Pe;qe++)for(Ue=0;Ue<z;Ue++){for(Ct=0,Oe=qe;Oe<T;Oe++)Ct+=H.get(Oe,qe)*J.get(Oe,Ue);for(Ct=-Ct/H.get(qe,qe),Oe=qe;Oe<T;Oe++)J.set(Oe,Ue,J.get(Oe,Ue)+Ct*H.get(Oe,qe))}for(qe=Pe-1;qe>=0;qe--){for(Ue=0;Ue<z;Ue++)J.set(qe,Ue,J.get(qe,Ue)/this.Rdiag[qe]);for(Oe=0;Oe<qe;Oe++)for(Ue=0;Ue<z;Ue++)J.set(Oe,Ue,J.get(Oe,Ue)-J.get(qe,Ue)*H.get(Oe,qe))}return J.subMatrix(0,Pe-1,0,z-1)}isFullRank(){let V=this.QR.columns;for(let H=0;H<V;H++)if(this.Rdiag[H]===0)return!1;return!0}get upperTriangularMatrix(){let V=this.QR,H=V.columns,T=new Bt(H,H),z,J;for(z=0;z<H;z++)for(J=0;J<H;J++)z<J?T.set(z,J,V.get(z,J)):z===J?T.set(z,J,this.Rdiag[z]):T.set(z,J,0);return T}get orthogonalMatrix(){let V=this.QR,H=V.rows,T=V.columns,z=new Bt(H,T),J,Pe,Oe,Ue;for(Oe=T-1;Oe>=0;Oe--){for(J=0;J<H;J++)z.set(J,Oe,0);for(z.set(Oe,Oe,1),Pe=Oe;Pe<T;Pe++)if(V.get(Oe,Oe)!==0){for(Ue=0,J=Oe;J<H;J++)Ue+=V.get(J,Oe)*z.get(J,Pe);for(Ue=-Ue/V.get(Oe,Oe),J=Oe;J<H;J++)z.set(J,Pe,z.get(J,Pe)+Ue*V.get(J,Oe))}}return z}}class lt{constructor(V,H={}){if(V=le.checkMatrix(V),V.isEmpty())throw new Error("Matrix must be non-empty");let T=V.rows,z=V.columns;const{computeLeftSingularVectors:J=!0,computeRightSingularVectors:Pe=!0,autoTranspose:Oe=!1}=H;let Ue=Boolean(J),qe=Boolean(Pe),Ct=!1,dt;if(T<z)if(!Oe)dt=V.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{dt=V.transpose(),T=dt.rows,z=dt.columns,Ct=!0;let Ht=Ue;Ue=qe,qe=Ht}else dt=V.clone();let Et=Math.min(T,z),Cn=Math.min(T+1,z),st=new Float64Array(Cn),Zt=new Bt(T,Et),zn=new Bt(z,z),Lt=new Float64Array(z),En=new Float64Array(T),qn=new Float64Array(Cn);for(let Ht=0;Ht<Cn;Ht++)qn[Ht]=Ht;let ui=Math.min(T-1,z),Ai=Math.max(0,Math.min(z-2,T)),or=Math.max(ui,Ai);for(let Ht=0;Ht<or;Ht++){if(Ht<ui){st[Ht]=0;for(let Bn=Ht;Bn<T;Bn++)st[Ht]=Me(st[Ht],dt.get(Bn,Ht));if(st[Ht]!==0){dt.get(Ht,Ht)<0&&(st[Ht]=-st[Ht]);for(let Bn=Ht;Bn<T;Bn++)dt.set(Bn,Ht,dt.get(Bn,Ht)/st[Ht]);dt.set(Ht,Ht,dt.get(Ht,Ht)+1)}st[Ht]=-st[Ht]}for(let Bn=Ht+1;Bn<z;Bn++){if(Ht<ui&&st[Ht]!==0){let Xn=0;for(let Kn=Ht;Kn<T;Kn++)Xn+=dt.get(Kn,Ht)*dt.get(Kn,Bn);Xn=-Xn/dt.get(Ht,Ht);for(let Kn=Ht;Kn<T;Kn++)dt.set(Kn,Bn,dt.get(Kn,Bn)+Xn*dt.get(Kn,Ht))}Lt[Bn]=dt.get(Ht,Bn)}if(Ue&&Ht<ui)for(let Bn=Ht;Bn<T;Bn++)Zt.set(Bn,Ht,dt.get(Bn,Ht));if(Ht<Ai){Lt[Ht]=0;for(let Bn=Ht+1;Bn<z;Bn++)Lt[Ht]=Me(Lt[Ht],Lt[Bn]);if(Lt[Ht]!==0){Lt[Ht+1]<0&&(Lt[Ht]=0-Lt[Ht]);for(let Bn=Ht+1;Bn<z;Bn++)Lt[Bn]/=Lt[Ht];Lt[Ht+1]+=1}if(Lt[Ht]=-Lt[Ht],Ht+1<T&&Lt[Ht]!==0){for(let Bn=Ht+1;Bn<T;Bn++)En[Bn]=0;for(let Bn=Ht+1;Bn<T;Bn++)for(let Xn=Ht+1;Xn<z;Xn++)En[Bn]+=Lt[Xn]*dt.get(Bn,Xn);for(let Bn=Ht+1;Bn<z;Bn++){let Xn=-Lt[Bn]/Lt[Ht+1];for(let Kn=Ht+1;Kn<T;Kn++)dt.set(Kn,Bn,dt.get(Kn,Bn)+Xn*En[Kn])}}if(qe)for(let Bn=Ht+1;Bn<z;Bn++)zn.set(Bn,Ht,Lt[Bn])}}let Hn=Math.min(z,T+1);if(ui<z&&(st[ui]=dt.get(ui,ui)),T<Hn&&(st[Hn-1]=0),Ai+1<Hn&&(Lt[Ai]=dt.get(Ai,Hn-1)),Lt[Hn-1]=0,Ue){for(let Ht=ui;Ht<Et;Ht++){for(let Bn=0;Bn<T;Bn++)Zt.set(Bn,Ht,0);Zt.set(Ht,Ht,1)}for(let Ht=ui-1;Ht>=0;Ht--)if(st[Ht]!==0){for(let Bn=Ht+1;Bn<Et;Bn++){let Xn=0;for(let Kn=Ht;Kn<T;Kn++)Xn+=Zt.get(Kn,Ht)*Zt.get(Kn,Bn);Xn=-Xn/Zt.get(Ht,Ht);for(let Kn=Ht;Kn<T;Kn++)Zt.set(Kn,Bn,Zt.get(Kn,Bn)+Xn*Zt.get(Kn,Ht))}for(let Bn=Ht;Bn<T;Bn++)Zt.set(Bn,Ht,-Zt.get(Bn,Ht));Zt.set(Ht,Ht,1+Zt.get(Ht,Ht));for(let Bn=0;Bn<Ht-1;Bn++)Zt.set(Bn,Ht,0)}else{for(let Bn=0;Bn<T;Bn++)Zt.set(Bn,Ht,0);Zt.set(Ht,Ht,1)}}if(qe)for(let Ht=z-1;Ht>=0;Ht--){if(Ht<Ai&&Lt[Ht]!==0)for(let Bn=Ht+1;Bn<z;Bn++){let Xn=0;for(let Kn=Ht+1;Kn<z;Kn++)Xn+=zn.get(Kn,Ht)*zn.get(Kn,Bn);Xn=-Xn/zn.get(Ht+1,Ht);for(let Kn=Ht+1;Kn<z;Kn++)zn.set(Kn,Bn,zn.get(Kn,Bn)+Xn*zn.get(Kn,Ht))}for(let Bn=0;Bn<z;Bn++)zn.set(Bn,Ht,0);zn.set(Ht,Ht,1)}let Jn=Hn-1,Ii=0,ti=Number.EPSILON;for(;Hn>0;){let Ht,Bn;for(Ht=Hn-2;Ht>=-1&&Ht!==-1;Ht--){const Xn=Number.MIN_VALUE+ti*Math.abs(st[Ht]+Math.abs(st[Ht+1]));if(Math.abs(Lt[Ht])<=Xn||Number.isNaN(Lt[Ht])){Lt[Ht]=0;break}}if(Ht===Hn-2)Bn=4;else{let Xn;for(Xn=Hn-1;Xn>=Ht&&Xn!==Ht;Xn--){let Kn=(Xn!==Hn?Math.abs(Lt[Xn]):0)+(Xn!==Ht+1?Math.abs(Lt[Xn-1]):0);if(Math.abs(st[Xn])<=ti*Kn){st[Xn]=0;break}}Xn===Ht?Bn=3:Xn===Hn-1?Bn=1:(Bn=2,Ht=Xn)}switch(Ht++,Bn){case 1:{let Xn=Lt[Hn-2];Lt[Hn-2]=0;for(let Kn=Hn-2;Kn>=Ht;Kn--){let Bi=Me(st[Kn],Xn),br=st[Kn]/Bi,Vi=Xn/Bi;if(st[Kn]=Bi,Kn!==Ht&&(Xn=-Vi*Lt[Kn-1],Lt[Kn-1]=br*Lt[Kn-1]),qe)for(let lr=0;lr<z;lr++)Bi=br*zn.get(lr,Kn)+Vi*zn.get(lr,Hn-1),zn.set(lr,Hn-1,-Vi*zn.get(lr,Kn)+br*zn.get(lr,Hn-1)),zn.set(lr,Kn,Bi)}break}case 2:{let Xn=Lt[Ht-1];Lt[Ht-1]=0;for(let Kn=Ht;Kn<Hn;Kn++){let Bi=Me(st[Kn],Xn),br=st[Kn]/Bi,Vi=Xn/Bi;if(st[Kn]=Bi,Xn=-Vi*Lt[Kn],Lt[Kn]=br*Lt[Kn],Ue)for(let lr=0;lr<T;lr++)Bi=br*Zt.get(lr,Kn)+Vi*Zt.get(lr,Ht-1),Zt.set(lr,Ht-1,-Vi*Zt.get(lr,Kn)+br*Zt.get(lr,Ht-1)),Zt.set(lr,Kn,Bi)}break}case 3:{const Xn=Math.max(Math.abs(st[Hn-1]),Math.abs(st[Hn-2]),Math.abs(Lt[Hn-2]),Math.abs(st[Ht]),Math.abs(Lt[Ht])),Kn=st[Hn-1]/Xn,Bi=st[Hn-2]/Xn,br=Lt[Hn-2]/Xn,Vi=st[Ht]/Xn,lr=Lt[Ht]/Xn,Qi=((Bi+Kn)*(Bi-Kn)+br*br)/2,gi=Kn*br*(Kn*br);let Rn=0;(Qi!==0||gi!==0)&&(Qi<0?Rn=0-Math.sqrt(Qi*Qi+gi):Rn=Math.sqrt(Qi*Qi+gi),Rn=gi/(Qi+Rn));let vs=(Vi+Kn)*(Vi-Kn)+Rn,Ss=Vi*lr;for(let Si=Ht;Si<Hn-1;Si++){let Lr=Me(vs,Ss);Lr===0&&(Lr=Number.MIN_VALUE);let mr=vs/Lr,Wr=Ss/Lr;if(Si!==Ht&&(Lt[Si-1]=Lr),vs=mr*st[Si]+Wr*Lt[Si],Lt[Si]=mr*Lt[Si]-Wr*st[Si],Ss=Wr*st[Si+1],st[Si+1]=mr*st[Si+1],qe)for(let ei=0;ei<z;ei++)Lr=mr*zn.get(ei,Si)+Wr*zn.get(ei,Si+1),zn.set(ei,Si+1,-Wr*zn.get(ei,Si)+mr*zn.get(ei,Si+1)),zn.set(ei,Si,Lr);if(Lr=Me(vs,Ss),Lr===0&&(Lr=Number.MIN_VALUE),mr=vs/Lr,Wr=Ss/Lr,st[Si]=Lr,vs=mr*Lt[Si]+Wr*st[Si+1],st[Si+1]=-Wr*Lt[Si]+mr*st[Si+1],Ss=Wr*Lt[Si+1],Lt[Si+1]=mr*Lt[Si+1],Ue&&Si<T-1)for(let ei=0;ei<T;ei++)Lr=mr*Zt.get(ei,Si)+Wr*Zt.get(ei,Si+1),Zt.set(ei,Si+1,-Wr*Zt.get(ei,Si)+mr*Zt.get(ei,Si+1)),Zt.set(ei,Si,Lr)}Lt[Hn-2]=vs,Ii=Ii+1;break}case 4:{if(st[Ht]<=0&&(st[Ht]=st[Ht]<0?-st[Ht]:0,qe))for(let Xn=0;Xn<=Jn;Xn++)zn.set(Xn,Ht,-zn.get(Xn,Ht));for(;Ht<Jn&&!(st[Ht]>=st[Ht+1]);){let Xn=st[Ht];if(st[Ht]=st[Ht+1],st[Ht+1]=Xn,qe&&Ht<z-1)for(let Kn=0;Kn<z;Kn++)Xn=zn.get(Kn,Ht+1),zn.set(Kn,Ht+1,zn.get(Kn,Ht)),zn.set(Kn,Ht,Xn);if(Ue&&Ht<T-1)for(let Kn=0;Kn<T;Kn++)Xn=Zt.get(Kn,Ht+1),Zt.set(Kn,Ht+1,Zt.get(Kn,Ht)),Zt.set(Kn,Ht,Xn);Ht++}Ii=0,Hn--;break}}}if(Ct){let Ht=zn;zn=Zt,Zt=Ht}this.m=T,this.n=z,this.s=st,this.U=Zt,this.V=zn}solve(V){let H=V,T=this.threshold,z=this.s.length,J=Bt.zeros(z,z);for(let Et=0;Et<z;Et++)Math.abs(this.s[Et])<=T?J.set(Et,Et,0):J.set(Et,Et,1/this.s[Et]);let Pe=this.U,Oe=this.rightSingularVectors,Ue=Oe.mmul(J),qe=Oe.rows,Ct=Pe.rows,dt=Bt.zeros(qe,Ct);for(let Et=0;Et<qe;Et++)for(let Cn=0;Cn<Ct;Cn++){let st=0;for(let Zt=0;Zt<z;Zt++)st+=Ue.get(Et,Zt)*Pe.get(Cn,Zt);dt.set(Et,Cn,st)}return dt.mmul(H)}solveForDiagonal(V){return this.solve(Bt.diag(V))}inverse(){let V=this.V,H=this.threshold,T=V.rows,z=V.columns,J=new Bt(T,this.s.length);for(let Ct=0;Ct<T;Ct++)for(let dt=0;dt<z;dt++)Math.abs(this.s[dt])>H&&J.set(Ct,dt,V.get(Ct,dt)/this.s[dt]);let Pe=this.U,Oe=Pe.rows,Ue=Pe.columns,qe=new Bt(T,Oe);for(let Ct=0;Ct<T;Ct++)for(let dt=0;dt<Oe;dt++){let Et=0;for(let Cn=0;Cn<Ue;Cn++)Et+=J.get(Ct,Cn)*Pe.get(dt,Cn);qe.set(Ct,dt,Et)}return qe}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let V=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,H=0,T=this.s;for(let z=0,J=T.length;z<J;z++)T[z]>V&&H++;return H}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Bt.diag(this.s)}}function vt(_e,V=!1){return _e=le.checkMatrix(_e),V?new lt(_e).inverse():ft(_e,Bt.eye(_e.rows))}function ft(_e,V,H=!1){return _e=le.checkMatrix(_e),V=le.checkMatrix(V),H?new lt(_e).solve(V):_e.isSquare()?new B(_e).solve(V):new Ce(_e).solve(V)}function ot(_e){if(_e=Bt.checkMatrix(_e),_e.isSquare()){if(_e.columns===0)return 1;let V,H,T,z;if(_e.columns===2)return V=_e.get(0,0),H=_e.get(0,1),T=_e.get(1,0),z=_e.get(1,1),V*z-H*T;if(_e.columns===3){let J,Pe,Oe;return J=new Ci(_e,[1,2],[1,2]),Pe=new Ci(_e,[1,2],[0,2]),Oe=new Ci(_e,[1,2],[0,1]),V=_e.get(0,0),H=_e.get(0,1),T=_e.get(0,2),V*ot(J)-H*ot(Pe)+T*ot(Oe)}else return new B(_e).determinant}else throw Error("determinant can only be calculated for a square matrix")}function yt(_e,V){let H=[];for(let T=0;T<_e;T++)T!==V&&H.push(T);return H}function Ut(_e,V,H,T=1e-9,z=1e-9){if(_e>z)return new Array(V.rows+1).fill(0);{let J=V.addRow(H,[0]);for(let Pe=0;Pe<J.rows;Pe++)Math.abs(J.get(Pe,0))<T&&J.set(Pe,0,0);return J.to1DArray()}}function Fn(_e,V={}){const{thresholdValue:H=1e-9,thresholdError:T=1e-9}=V;_e=Bt.checkMatrix(_e);let z=_e.rows,J=new Bt(z,z);for(let Pe=0;Pe<z;Pe++){let Oe=Bt.columnVector(_e.getRow(Pe)),Ue=_e.subMatrixRow(yt(z,Pe)).transpose(),Ct=new lt(Ue).solve(Oe),dt=Bt.sub(Oe,Ue.mmul(Ct)).abs().max();J.setRow(Pe,Ut(dt,Ct,Pe,H,T))}return J}function Qn(_e,V=Number.EPSILON){if(_e=Bt.checkMatrix(_e),_e.isEmpty())return _e.transpose();let H=new lt(_e,{autoTranspose:!0}),T=H.leftSingularVectors,z=H.rightSingularVectors,J=H.diagonal;for(let Pe=0;Pe<J.length;Pe++)Math.abs(J[Pe])>V?J[Pe]=1/J[Pe]:J[Pe]=0;return z.mmul(Bt.diag(J).mmul(T.transpose()))}function Fe(_e,V=_e,H={}){_e=new Bt(_e);let T=!1;if(typeof V=="object"&&!Bt.isMatrix(V)&&!Array.isArray(V)?(H=V,V=_e,T=!0):V=new Bt(V),_e.rows!==V.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:z=!0}=H;z&&(_e=_e.center("column"),T||(V=V.center("column")));const J=_e.transpose().mmul(V);for(let Pe=0;Pe<J.rows;Pe++)for(let Oe=0;Oe<J.columns;Oe++)J.set(Pe,Oe,J.get(Pe,Oe)*(1/(_e.rows-1)));return J}function ct(_e,V=_e,H={}){_e=new Bt(_e);let T=!1;if(typeof V=="object"&&!Bt.isMatrix(V)&&!Array.isArray(V)?(H=V,V=_e,T=!0):V=new Bt(V),_e.rows!==V.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:z=!0,scale:J=!0}=H;z&&(_e.center("column"),T||V.center("column")),J&&(_e.scale("column"),T||V.scale("column"));const Pe=_e.standardDeviation("column",{unbiased:!0}),Oe=T?Pe:V.standardDeviation("column",{unbiased:!0}),Ue=_e.transpose().mmul(V);for(let qe=0;qe<Ue.rows;qe++)for(let Ct=0;Ct<Ue.columns;Ct++)Ue.set(qe,Ct,Ue.get(qe,Ct)*(1/(Pe[qe]*Oe[Ct]))*(1/(_e.rows-1)));return Ue}class ut{constructor(V,H={}){const{assumeSymmetric:T=!1}=H;if(V=le.checkMatrix(V),!V.isSquare())throw new Error("Matrix is not a square matrix");if(V.isEmpty())throw new Error("Matrix must be non-empty");let z=V.columns,J=new Bt(z,z),Pe=new Float64Array(z),Oe=new Float64Array(z),Ue=V,qe,Ct,dt=!1;if(T?dt=!0:dt=V.isSymmetric(),dt){for(qe=0;qe<z;qe++)for(Ct=0;Ct<z;Ct++)J.set(qe,Ct,Ue.get(qe,Ct));jt(z,Oe,Pe,J),qt(z,Oe,Pe,J)}else{let Et=new Bt(z,z),Cn=new Float64Array(z);for(Ct=0;Ct<z;Ct++)for(qe=0;qe<z;qe++)Et.set(qe,Ct,Ue.get(qe,Ct));Dt(z,Et,Cn,J),hn(z,Oe,Pe,J,Et)}this.n=z,this.e=Oe,this.d=Pe,this.V=J}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let V=this.n,H=this.e,T=this.d,z=new Bt(V,V),J,Pe;for(J=0;J<V;J++){for(Pe=0;Pe<V;Pe++)z.set(J,Pe,0);z.set(J,J,T[J]),H[J]>0?z.set(J,J+1,H[J]):H[J]<0&&z.set(J,J-1,H[J])}return z}}function jt(_e,V,H,T){let z,J,Pe,Oe,Ue,qe,Ct,dt;for(Ue=0;Ue<_e;Ue++)H[Ue]=T.get(_e-1,Ue);for(Oe=_e-1;Oe>0;Oe--){for(dt=0,Pe=0,qe=0;qe<Oe;qe++)dt=dt+Math.abs(H[qe]);if(dt===0)for(V[Oe]=H[Oe-1],Ue=0;Ue<Oe;Ue++)H[Ue]=T.get(Oe-1,Ue),T.set(Oe,Ue,0),T.set(Ue,Oe,0);else{for(qe=0;qe<Oe;qe++)H[qe]/=dt,Pe+=H[qe]*H[qe];for(z=H[Oe-1],J=Math.sqrt(Pe),z>0&&(J=-J),V[Oe]=dt*J,Pe=Pe-z*J,H[Oe-1]=z-J,Ue=0;Ue<Oe;Ue++)V[Ue]=0;for(Ue=0;Ue<Oe;Ue++){for(z=H[Ue],T.set(Ue,Oe,z),J=V[Ue]+T.get(Ue,Ue)*z,qe=Ue+1;qe<=Oe-1;qe++)J+=T.get(qe,Ue)*H[qe],V[qe]+=T.get(qe,Ue)*z;V[Ue]=J}for(z=0,Ue=0;Ue<Oe;Ue++)V[Ue]/=Pe,z+=V[Ue]*H[Ue];for(Ct=z/(Pe+Pe),Ue=0;Ue<Oe;Ue++)V[Ue]-=Ct*H[Ue];for(Ue=0;Ue<Oe;Ue++){for(z=H[Ue],J=V[Ue],qe=Ue;qe<=Oe-1;qe++)T.set(qe,Ue,T.get(qe,Ue)-(z*V[qe]+J*H[qe]));H[Ue]=T.get(Oe-1,Ue),T.set(Oe,Ue,0)}}H[Oe]=Pe}for(Oe=0;Oe<_e-1;Oe++){if(T.set(_e-1,Oe,T.get(Oe,Oe)),T.set(Oe,Oe,1),Pe=H[Oe+1],Pe!==0){for(qe=0;qe<=Oe;qe++)H[qe]=T.get(qe,Oe+1)/Pe;for(Ue=0;Ue<=Oe;Ue++){for(J=0,qe=0;qe<=Oe;qe++)J+=T.get(qe,Oe+1)*T.get(qe,Ue);for(qe=0;qe<=Oe;qe++)T.set(qe,Ue,T.get(qe,Ue)-J*H[qe])}}for(qe=0;qe<=Oe;qe++)T.set(qe,Oe+1,0)}for(Ue=0;Ue<_e;Ue++)H[Ue]=T.get(_e-1,Ue),T.set(_e-1,Ue,0);T.set(_e-1,_e-1,1),V[0]=0}function qt(_e,V,H,T){let z,J,Pe,Oe,Ue,qe,Ct,dt,Et,Cn,st,Zt,zn,Lt,En,qn,ui;for(Pe=1;Pe<_e;Pe++)V[Pe-1]=V[Pe];V[_e-1]=0;let Ai=0,or=0,Hn=Number.EPSILON;for(qe=0;qe<_e;qe++){for(or=Math.max(or,Math.abs(H[qe])+Math.abs(V[qe])),Ct=qe;Ct<_e&&!(Math.abs(V[Ct])<=Hn*or);)Ct++;if(Ct>qe){ui=0;do{for(ui=ui+1,z=H[qe],dt=(H[qe+1]-z)/(2*V[qe]),Et=Me(dt,1),dt<0&&(Et=-Et),H[qe]=V[qe]/(dt+Et),H[qe+1]=V[qe]*(dt+Et),Cn=H[qe+1],J=z-H[qe],Pe=qe+2;Pe<_e;Pe++)H[Pe]-=J;for(Ai=Ai+J,dt=H[Ct],st=1,Zt=st,zn=st,Lt=V[qe+1],En=0,qn=0,Pe=Ct-1;Pe>=qe;Pe--)for(zn=Zt,Zt=st,qn=En,z=st*V[Pe],J=st*dt,Et=Me(dt,V[Pe]),V[Pe+1]=En*Et,En=V[Pe]/Et,st=dt/Et,dt=st*H[Pe]-En*z,H[Pe+1]=J+En*(st*z+En*H[Pe]),Ue=0;Ue<_e;Ue++)J=T.get(Ue,Pe+1),T.set(Ue,Pe+1,En*T.get(Ue,Pe)+st*J),T.set(Ue,Pe,st*T.get(Ue,Pe)-En*J);dt=-En*qn*zn*Lt*V[qe]/Cn,V[qe]=En*dt,H[qe]=st*dt}while(Math.abs(V[qe])>Hn*or)}H[qe]=H[qe]+Ai,V[qe]=0}for(Pe=0;Pe<_e-1;Pe++){for(Ue=Pe,dt=H[Pe],Oe=Pe+1;Oe<_e;Oe++)H[Oe]<dt&&(Ue=Oe,dt=H[Oe]);if(Ue!==Pe)for(H[Ue]=H[Pe],H[Pe]=dt,Oe=0;Oe<_e;Oe++)dt=T.get(Oe,Pe),T.set(Oe,Pe,T.get(Oe,Ue)),T.set(Oe,Ue,dt)}}function Dt(_e,V,H,T){let z=0,J=_e-1,Pe,Oe,Ue,qe,Ct,dt,Et;for(dt=z+1;dt<=J-1;dt++){for(Et=0,qe=dt;qe<=J;qe++)Et=Et+Math.abs(V.get(qe,dt-1));if(Et!==0){for(Ue=0,qe=J;qe>=dt;qe--)H[qe]=V.get(qe,dt-1)/Et,Ue+=H[qe]*H[qe];for(Oe=Math.sqrt(Ue),H[dt]>0&&(Oe=-Oe),Ue=Ue-H[dt]*Oe,H[dt]=H[dt]-Oe,Ct=dt;Ct<_e;Ct++){for(Pe=0,qe=J;qe>=dt;qe--)Pe+=H[qe]*V.get(qe,Ct);for(Pe=Pe/Ue,qe=dt;qe<=J;qe++)V.set(qe,Ct,V.get(qe,Ct)-Pe*H[qe])}for(qe=0;qe<=J;qe++){for(Pe=0,Ct=J;Ct>=dt;Ct--)Pe+=H[Ct]*V.get(qe,Ct);for(Pe=Pe/Ue,Ct=dt;Ct<=J;Ct++)V.set(qe,Ct,V.get(qe,Ct)-Pe*H[Ct])}H[dt]=Et*H[dt],V.set(dt,dt-1,Et*Oe)}}for(qe=0;qe<_e;qe++)for(Ct=0;Ct<_e;Ct++)T.set(qe,Ct,qe===Ct?1:0);for(dt=J-1;dt>=z+1;dt--)if(V.get(dt,dt-1)!==0){for(qe=dt+1;qe<=J;qe++)H[qe]=V.get(qe,dt-1);for(Ct=dt;Ct<=J;Ct++){for(Oe=0,qe=dt;qe<=J;qe++)Oe+=H[qe]*T.get(qe,Ct);for(Oe=Oe/H[dt]/V.get(dt,dt-1),qe=dt;qe<=J;qe++)T.set(qe,Ct,T.get(qe,Ct)+Oe*H[qe])}}}function hn(_e,V,H,T,z){let J=_e-1,Pe=0,Oe=_e-1,Ue=Number.EPSILON,qe=0,Ct=0,dt=0,Et=0,Cn=0,st=0,Zt=0,zn=0,Lt,En,qn,ui,Ai,or,Hn,Jn,Ii,ti,Ht,Bn,Xn,Kn,Bi;for(Lt=0;Lt<_e;Lt++)for((Lt<Pe||Lt>Oe)&&(H[Lt]=z.get(Lt,Lt),V[Lt]=0),En=Math.max(Lt-1,0);En<_e;En++)Ct=Ct+Math.abs(z.get(Lt,En));for(;J>=Pe;){for(ui=J;ui>Pe&&(st=Math.abs(z.get(ui-1,ui-1))+Math.abs(z.get(ui,ui)),st===0&&(st=Ct),!(Math.abs(z.get(ui,ui-1))<Ue*st));)ui--;if(ui===J)z.set(J,J,z.get(J,J)+qe),H[J]=z.get(J,J),V[J]=0,J--,zn=0;else if(ui===J-1){if(Hn=z.get(J,J-1)*z.get(J-1,J),dt=(z.get(J-1,J-1)-z.get(J,J))/2,Et=dt*dt+Hn,Zt=Math.sqrt(Math.abs(Et)),z.set(J,J,z.get(J,J)+qe),z.set(J-1,J-1,z.get(J-1,J-1)+qe),Jn=z.get(J,J),Et>=0){for(Zt=dt>=0?dt+Zt:dt-Zt,H[J-1]=Jn+Zt,H[J]=H[J-1],Zt!==0&&(H[J]=Jn-Hn/Zt),V[J-1]=0,V[J]=0,Jn=z.get(J,J-1),st=Math.abs(Jn)+Math.abs(Zt),dt=Jn/st,Et=Zt/st,Cn=Math.sqrt(dt*dt+Et*Et),dt=dt/Cn,Et=Et/Cn,En=J-1;En<_e;En++)Zt=z.get(J-1,En),z.set(J-1,En,Et*Zt+dt*z.get(J,En)),z.set(J,En,Et*z.get(J,En)-dt*Zt);for(Lt=0;Lt<=J;Lt++)Zt=z.get(Lt,J-1),z.set(Lt,J-1,Et*Zt+dt*z.get(Lt,J)),z.set(Lt,J,Et*z.get(Lt,J)-dt*Zt);for(Lt=Pe;Lt<=Oe;Lt++)Zt=T.get(Lt,J-1),T.set(Lt,J-1,Et*Zt+dt*T.get(Lt,J)),T.set(Lt,J,Et*T.get(Lt,J)-dt*Zt)}else H[J-1]=Jn+dt,H[J]=Jn+dt,V[J-1]=Zt,V[J]=-Zt;J=J-2,zn=0}else{if(Jn=z.get(J,J),Ii=0,Hn=0,ui<J&&(Ii=z.get(J-1,J-1),Hn=z.get(J,J-1)*z.get(J-1,J)),zn===10){for(qe+=Jn,Lt=Pe;Lt<=J;Lt++)z.set(Lt,Lt,z.get(Lt,Lt)-Jn);st=Math.abs(z.get(J,J-1))+Math.abs(z.get(J-1,J-2)),Jn=Ii=.75*st,Hn=-.4375*st*st}if(zn===30&&(st=(Ii-Jn)/2,st=st*st+Hn,st>0)){for(st=Math.sqrt(st),Ii<Jn&&(st=-st),st=Jn-Hn/((Ii-Jn)/2+st),Lt=Pe;Lt<=J;Lt++)z.set(Lt,Lt,z.get(Lt,Lt)-st);qe+=st,Jn=Ii=Hn=.964}for(zn=zn+1,Ai=J-2;Ai>=ui&&(Zt=z.get(Ai,Ai),Cn=Jn-Zt,st=Ii-Zt,dt=(Cn*st-Hn)/z.get(Ai+1,Ai)+z.get(Ai,Ai+1),Et=z.get(Ai+1,Ai+1)-Zt-Cn-st,Cn=z.get(Ai+2,Ai+1),st=Math.abs(dt)+Math.abs(Et)+Math.abs(Cn),dt=dt/st,Et=Et/st,Cn=Cn/st,!(Ai===ui||Math.abs(z.get(Ai,Ai-1))*(Math.abs(Et)+Math.abs(Cn))<Ue*(Math.abs(dt)*(Math.abs(z.get(Ai-1,Ai-1))+Math.abs(Zt)+Math.abs(z.get(Ai+1,Ai+1))))));)Ai--;for(Lt=Ai+2;Lt<=J;Lt++)z.set(Lt,Lt-2,0),Lt>Ai+2&&z.set(Lt,Lt-3,0);for(qn=Ai;qn<=J-1&&(Kn=qn!==J-1,qn!==Ai&&(dt=z.get(qn,qn-1),Et=z.get(qn+1,qn-1),Cn=Kn?z.get(qn+2,qn-1):0,Jn=Math.abs(dt)+Math.abs(Et)+Math.abs(Cn),Jn!==0&&(dt=dt/Jn,Et=Et/Jn,Cn=Cn/Jn)),Jn!==0);qn++)if(st=Math.sqrt(dt*dt+Et*Et+Cn*Cn),dt<0&&(st=-st),st!==0){for(qn!==Ai?z.set(qn,qn-1,-st*Jn):ui!==Ai&&z.set(qn,qn-1,-z.get(qn,qn-1)),dt=dt+st,Jn=dt/st,Ii=Et/st,Zt=Cn/st,Et=Et/dt,Cn=Cn/dt,En=qn;En<_e;En++)dt=z.get(qn,En)+Et*z.get(qn+1,En),Kn&&(dt=dt+Cn*z.get(qn+2,En),z.set(qn+2,En,z.get(qn+2,En)-dt*Zt)),z.set(qn,En,z.get(qn,En)-dt*Jn),z.set(qn+1,En,z.get(qn+1,En)-dt*Ii);for(Lt=0;Lt<=Math.min(J,qn+3);Lt++)dt=Jn*z.get(Lt,qn)+Ii*z.get(Lt,qn+1),Kn&&(dt=dt+Zt*z.get(Lt,qn+2),z.set(Lt,qn+2,z.get(Lt,qn+2)-dt*Cn)),z.set(Lt,qn,z.get(Lt,qn)-dt),z.set(Lt,qn+1,z.get(Lt,qn+1)-dt*Et);for(Lt=Pe;Lt<=Oe;Lt++)dt=Jn*T.get(Lt,qn)+Ii*T.get(Lt,qn+1),Kn&&(dt=dt+Zt*T.get(Lt,qn+2),T.set(Lt,qn+2,T.get(Lt,qn+2)-dt*Cn)),T.set(Lt,qn,T.get(Lt,qn)-dt),T.set(Lt,qn+1,T.get(Lt,qn+1)-dt*Et)}}}if(Ct!==0){for(J=_e-1;J>=0;J--)if(dt=H[J],Et=V[J],Et===0)for(ui=J,z.set(J,J,1),Lt=J-1;Lt>=0;Lt--){for(Hn=z.get(Lt,Lt)-dt,Cn=0,En=ui;En<=J;En++)Cn=Cn+z.get(Lt,En)*z.get(En,J);if(V[Lt]<0)Zt=Hn,st=Cn;else if(ui=Lt,V[Lt]===0?z.set(Lt,J,Hn!==0?-Cn/Hn:-Cn/(Ue*Ct)):(Jn=z.get(Lt,Lt+1),Ii=z.get(Lt+1,Lt),Et=(H[Lt]-dt)*(H[Lt]-dt)+V[Lt]*V[Lt],or=(Jn*st-Zt*Cn)/Et,z.set(Lt,J,or),z.set(Lt+1,J,Math.abs(Jn)>Math.abs(Zt)?(-Cn-Hn*or)/Jn:(-st-Ii*or)/Zt)),or=Math.abs(z.get(Lt,J)),Ue*or*or>1)for(En=Lt;En<=J;En++)z.set(En,J,z.get(En,J)/or)}else if(Et<0)for(ui=J-1,Math.abs(z.get(J,J-1))>Math.abs(z.get(J-1,J))?(z.set(J-1,J-1,Et/z.get(J,J-1)),z.set(J-1,J,-(z.get(J,J)-dt)/z.get(J,J-1))):(Bi=Rt(0,-z.get(J-1,J),z.get(J-1,J-1)-dt,Et),z.set(J-1,J-1,Bi[0]),z.set(J-1,J,Bi[1])),z.set(J,J-1,0),z.set(J,J,1),Lt=J-2;Lt>=0;Lt--){for(ti=0,Ht=0,En=ui;En<=J;En++)ti=ti+z.get(Lt,En)*z.get(En,J-1),Ht=Ht+z.get(Lt,En)*z.get(En,J);if(Hn=z.get(Lt,Lt)-dt,V[Lt]<0)Zt=Hn,Cn=ti,st=Ht;else if(ui=Lt,V[Lt]===0?(Bi=Rt(-ti,-Ht,Hn,Et),z.set(Lt,J-1,Bi[0]),z.set(Lt,J,Bi[1])):(Jn=z.get(Lt,Lt+1),Ii=z.get(Lt+1,Lt),Bn=(H[Lt]-dt)*(H[Lt]-dt)+V[Lt]*V[Lt]-Et*Et,Xn=(H[Lt]-dt)*2*Et,Bn===0&&Xn===0&&(Bn=Ue*Ct*(Math.abs(Hn)+Math.abs(Et)+Math.abs(Jn)+Math.abs(Ii)+Math.abs(Zt))),Bi=Rt(Jn*Cn-Zt*ti+Et*Ht,Jn*st-Zt*Ht-Et*ti,Bn,Xn),z.set(Lt,J-1,Bi[0]),z.set(Lt,J,Bi[1]),Math.abs(Jn)>Math.abs(Zt)+Math.abs(Et)?(z.set(Lt+1,J-1,(-ti-Hn*z.get(Lt,J-1)+Et*z.get(Lt,J))/Jn),z.set(Lt+1,J,(-Ht-Hn*z.get(Lt,J)-Et*z.get(Lt,J-1))/Jn)):(Bi=Rt(-Cn-Ii*z.get(Lt,J-1),-st-Ii*z.get(Lt,J),Zt,Et),z.set(Lt+1,J-1,Bi[0]),z.set(Lt+1,J,Bi[1]))),or=Math.max(Math.abs(z.get(Lt,J-1)),Math.abs(z.get(Lt,J))),Ue*or*or>1)for(En=Lt;En<=J;En++)z.set(En,J-1,z.get(En,J-1)/or),z.set(En,J,z.get(En,J)/or)}for(Lt=0;Lt<_e;Lt++)if(Lt<Pe||Lt>Oe)for(En=Lt;En<_e;En++)T.set(Lt,En,z.get(Lt,En));for(En=_e-1;En>=Pe;En--)for(Lt=Pe;Lt<=Oe;Lt++){for(Zt=0,qn=Pe;qn<=Math.min(En,Oe);qn++)Zt=Zt+T.get(Lt,qn)*z.get(qn,En);T.set(Lt,En,Zt)}}}function Rt(_e,V,H,T){let z,J;return Math.abs(H)>Math.abs(T)?(z=T/H,J=H+z*T,[(_e+z*V)/J,(V-z*_e)/J]):(z=H/T,J=T+z*H,[(z*_e+V)/J,(z*V-_e)/J])}class nn{constructor(V){if(V=le.checkMatrix(V),!V.isSymmetric())throw new Error("Matrix is not symmetric");let H=V,T=H.rows,z=new Bt(T,T),J=!0,Pe,Oe,Ue;for(Oe=0;Oe<T;Oe++){let qe=0;for(Ue=0;Ue<Oe;Ue++){let Ct=0;for(Pe=0;Pe<Ue;Pe++)Ct+=z.get(Ue,Pe)*z.get(Oe,Pe);Ct=(H.get(Oe,Ue)-Ct)/z.get(Ue,Ue),z.set(Oe,Ue,Ct),qe=qe+Ct*Ct}for(qe=H.get(Oe,Oe)-qe,J&=qe>0,z.set(Oe,Oe,Math.sqrt(Math.max(qe,0))),Ue=Oe+1;Ue<T;Ue++)z.set(Oe,Ue,0)}this.L=z,this.positiveDefinite=Boolean(J)}isPositiveDefinite(){return this.positiveDefinite}solve(V){V=le.checkMatrix(V);let H=this.L,T=H.rows;if(V.rows!==T)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let z=V.columns,J=V.clone(),Pe,Oe,Ue;for(Ue=0;Ue<T;Ue++)for(Oe=0;Oe<z;Oe++){for(Pe=0;Pe<Ue;Pe++)J.set(Ue,Oe,J.get(Ue,Oe)-J.get(Pe,Oe)*H.get(Ue,Pe));J.set(Ue,Oe,J.get(Ue,Oe)/H.get(Ue,Ue))}for(Ue=T-1;Ue>=0;Ue--)for(Oe=0;Oe<z;Oe++){for(Pe=Ue+1;Pe<T;Pe++)J.set(Ue,Oe,J.get(Ue,Oe)-J.get(Pe,Oe)*H.get(Pe,Ue));J.set(Ue,Oe,J.get(Ue,Oe)/H.get(Ue,Ue))}return J}get lowerTriangularMatrix(){return this.L}}class ln{constructor(V,H={}){V=le.checkMatrix(V);let{Y:T}=H;const{scaleScores:z=!1,maxIterations:J=1e3,terminationCriteria:Pe=1e-10}=H;let Oe;if(T){if(Array.isArray(T)&&typeof T[0]=="number"?T=Bt.columnVector(T):T=le.checkMatrix(T),T.rows!==V.rows)throw new Error("Y should have the same number of rows as X");Oe=T.getColumnVector(0)}else Oe=V.getColumnVector(0);let Ue=1,qe,Ct,dt,Et;for(let Cn=0;Cn<J&&Ue>Pe;Cn++)dt=V.transpose().mmul(Oe).div(Oe.transpose().mmul(Oe).get(0,0)),dt=dt.div(dt.norm()),qe=V.mmul(dt).div(dt.transpose().mmul(dt).get(0,0)),Cn>0&&(Ue=qe.clone().sub(Et).pow(2).sum()),Et=qe.clone(),T?(Ct=T.transpose().mmul(qe).div(qe.transpose().mmul(qe).get(0,0)),Ct=Ct.div(Ct.norm()),Oe=T.mmul(Ct).div(Ct.transpose().mmul(Ct).get(0,0))):Oe=qe;if(T){let Cn=V.transpose().mmul(qe).div(qe.transpose().mmul(qe).get(0,0));Cn=Cn.div(Cn.norm());let st=V.clone().sub(qe.clone().mmul(Cn.transpose())),Zt=Oe.transpose().mmul(qe).div(qe.transpose().mmul(qe).get(0,0)),zn=T.clone().sub(qe.clone().mulS(Zt.get(0,0)).mmul(Ct.transpose()));this.t=qe,this.p=Cn.transpose(),this.w=dt.transpose(),this.q=Ct,this.u=Oe,this.s=qe.transpose().mmul(qe),this.xResidual=st,this.yResidual=zn,this.betas=Zt}else this.w=dt.transpose(),this.s=qe.transpose().mmul(qe).sqrt(),z?this.t=qe.clone().div(this.s.get(0,0)):this.t=qe,this.xResidual=V.sub(qe.mmul(dt.transpose()))}}}},fn={};function In(w){var Z=fn[w];if(Z!==void 0)return Z.exports;var f=fn[w]={id:w,loaded:!1,exports:{}};return bi[w].call(f.exports,f,f.exports,In),f.loaded=!0,f.exports}(()=>{In.d=(w,Z)=>{for(var f in Z)In.o(Z,f)&&!In.o(w,f)&&Object.defineProperty(w,f,{enumerable:!0,get:Z[f]})}})(),(()=>{In.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(w){if(typeof window=="object")return window}}()})(),(()=>{In.o=(w,Z)=>Object.prototype.hasOwnProperty.call(w,Z)})(),(()=>{In.r=w=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})}})(),(()=>{In.nmd=w=>(w.paths=[],w.children||(w.children=[]),w)})();var je=In(7150);return je})()})},15052:function(pr){(function(bi,fn){pr.exports=fn()})(this,function(){"use strict";function bi(Z,f){var g=Object.keys(Z);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(Z);f&&(y=y.filter(function(A){return Object.getOwnPropertyDescriptor(Z,A).enumerable})),g.push.apply(g,y)}return g}function fn(Z){for(var f=1;f<arguments.length;f++){var g=arguments[f]!=null?arguments[f]:{};f%2?bi(Object(g),!0).forEach(function(y){je(Z,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(g)):bi(Object(g)).forEach(function(y){Object.defineProperty(Z,y,Object.getOwnPropertyDescriptor(g,y))})}return Z}function In(Z,f,g,y,A,M,E){try{var C=Z[M](E),D=C.value}catch(L){return void g(L)}C.done?f(D):Promise.resolve(D).then(y,A)}function je(Z,f,g){return f in Z?Object.defineProperty(Z,f,{value:g,enumerable:!0,configurable:!0,writable:!0}):Z[f]=g,Z}function w(Z){return{A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:69,Z:90,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,R0:96,R1:97,R2:98,R3:99,R4:100,R5:101,R6:102,R7:103,R8:104,R9:105,"R*":106,"R+":107,Renter:108,"R-":109,"R.":110,"R/":111,enter:13,shift:16,ctrl:17,alt:18,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,delete:8,command:91}[Z]}return new function Z(){var f=this;(function(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")})(this,Z),je(this,"register",function(g){g.canvas?g.root?(f.canvas=g.canvas,f.hotkeyFromConfig=g.config||[],g.root.addEventListener("keydown",f.handleKeydown),g.canvas.on("events",f._updateSelectedItem)):console.warn("register\u6570\u636Eroot\u5B57\u6BB5\u4E0D\u5B58\u5728=>",g):console.warn("register\u6570\u636Ecanvas\u5B57\u6BB5\u4E0D\u5B58\u5728=>",g)}),je(this,"_unfocus",function(){f.selectedItems.nodes.length!==0&&f.selectedItems.nodes.forEach(function(g){return g.unfocus()}),f.selectedItems.edges.length!==0&&f.selectedItems.edges.forEach(function(g){return g.unfocus()}),f.selectedItems.groups.length!==0&&f.selectedItems.groups.forEach(function(g){return g.unFocus()})}),je(this,"_updateSelectedItem",function(){var g,y=(g=regeneratorRuntime.mark(function A(M){var E;return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:E=M.type,C.t0=E,C.next=C.t0==="node:click"?4:C.t0==="link:click"?8:C.t0==="group:click"?12:C.t0==="canvas:click"?16:19;break;case 4:return f._unfocus(),M.node.focus(),f.selectedItems={nodes:[M.node],edges:[],groups:[]},C.abrupt("break",19);case 8:return f._unfocus(),M.edge.focus(),f.selectedItems={nodes:[],edges:[M.edge],groups:[]},C.abrupt("break",19);case 12:return f._unfocus(),M.group.focus(),f.selectedItems={nodes:[],edges:[],groups:[M.group]},C.abrupt("break",19);case 16:return f._unfocus(),f.selectedItems={nodes:[],edges:[],groups:[]},C.abrupt("break",19);case 19:case"end":return C.stop()}},A)}),function(){var A=this,M=arguments;return new Promise(function(E,C){var D=g.apply(A,M);function L(R){In(D,E,C,L,O,"next",R)}function O(R){In(D,E,C,L,O,"throw",R)}L(void 0)})});return function(A){return y.apply(this,arguments)}}()),je(this,"handleKeydown",function(g){g.preventDefault();var y=g.target,A=(y||{}).tagName,M=g.keyCode||g.which||g.charCode,E=g.ctrlKey===!0?17:"T",C=g.metaKey===!0?91:"T",D=g.altKey===!0?18:"T",L=g.shiftKey===!0?16:"T";if(A!=="INPUT"&&A!=="TEXTAREA"&&!y.hasAttribute("contenteditable")){var O="".concat(E,"-").concat(C,"-").concat(D,"-").concat(L,"-").concat(M),R={"17-T-T-16-90":f.onRedo,"T-91-T-16-90":f.onRedo,"17-T-T-T-90":f.onUndo,"T-91-T-T-90":f.onUndo,"17-T-T-T-68":f.onDelete,"T-91-T-T-68":f.onDelete,"T-T-T-T-8":f.onDelete,"17-T-T-T-67":f.onCopy,"T-91-T-T-67":f.onCopy,"17-T-T-T-86":f.onPaste,"T-91-T-T-86":f.onPaste,"17-T-T-T-65":f.onSeleteAll,"T-91-T-T-65":f.onSeleteAll},W={};f.hotkeyFromConfig.forEach(function(ie){var q=ie.key.split("+"),we=f.hasKey(q,"ctrl")?w("ctrl"):"T",de=f.hasKey(q,"shift")?w("shift"):"T",fe=f.hasKey(q,"alt")?w("alt"):"T",F=f.hasKey(q,"command")?w("command"):"T",be=w(q[q.length-1]),pe="".concat(we,"-").concat(F,"-").concat(fe,"-").concat(de,"-").concat(be);W[pe]=ie.handler});var G=Object.assign({},R,W);if(G[O])return G[O]()}}),je(this,"hasKey",function(g,y){return g.indexOf(y)>-1}),je(this,"onDelete",function(){var g=f.selectedItems,y=g.nodes,A=g.edges,M=g.groups;y&&f.canvas.removeNodes(y.map(function(E){return E.id})),A&&f.canvas.removeEdges(A.map(function(E){return E.id})),M&&f.canvas.removeGroups(M.map(function(E){return E.id}))}),je(this,"onUndo",function(){f.canvas.undo()}),je(this,"onRedo",function(){f.canvas.redo()}),je(this,"onCopy",function(){f.copyItems=f.selectedItems}),je(this,"onPaste",function(){f.copyItems||console.log("\u590D\u5236\u7684\u5185\u5BB9\u4E3A\u7A7A"),f.copyItems.nodes&&f.copyItems.nodes.forEach(function(g){var y=g.options,A=fn(fn({},y),{},{id:y.id+"_copy",left:y.left+20,top:y.top+20});f.canvas.addNode(A)})}),je(this,"onSeleteAll",function(){var g=f.canvas,y=g.nodes,A=g.edges,M=g.groups;f.selectedItems.nodes=y,f.selectedItems.edges=A,f.selectedItems.groups=M,f.canvas.nodes.forEach(function(E){E.focus()}),f.canvas.edges.forEach(function(E){E.focus()}),f.canvas.groups.forEach(function(E){E.focus()})}),this.addCanvas={},this.hotkeyFromConfig={},this.selectedItems={nodes:[],edges:[],groups:[]},this.copyItems={}}})},67467:function(pr,bi){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */bi.read=function(fn,In,je,w,Z){var f,g,y=Z*8-w-1,A=(1<<y)-1,M=A>>1,E=-7,C=je?Z-1:0,D=je?-1:1,L=fn[In+C];for(C+=D,f=L&(1<<-E)-1,L>>=-E,E+=y;E>0;f=f*256+fn[In+C],C+=D,E-=8);for(g=f&(1<<-E)-1,f>>=-E,E+=w;E>0;g=g*256+fn[In+C],C+=D,E-=8);if(f===0)f=1-M;else{if(f===A)return g?NaN:(L?-1:1)*Infinity;g=g+Math.pow(2,w),f=f-M}return(L?-1:1)*g*Math.pow(2,f-w)},bi.write=function(fn,In,je,w,Z,f){var g,y,A,M=f*8-Z-1,E=(1<<M)-1,C=E>>1,D=Z===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=w?0:f-1,O=w?1:-1,R=In<0||In===0&&1/In<0?1:0;for(In=Math.abs(In),isNaN(In)||In===Infinity?(y=isNaN(In)?1:0,g=E):(g=Math.floor(Math.log(In)/Math.LN2),In*(A=Math.pow(2,-g))<1&&(g--,A*=2),g+C>=1?In+=D/A:In+=D*Math.pow(2,1-C),In*A>=2&&(g++,A/=2),g+C>=E?(y=0,g=E):g+C>=1?(y=(In*A-1)*Math.pow(2,Z),g=g+C):(y=In*Math.pow(2,C-1)*Math.pow(2,Z),g=0));Z>=8;fn[je+L]=y&255,L+=O,y/=256,Z-=8);for(g=g<<Z|y,M+=Z;M>0;fn[je+L]=g&255,L+=O,g/=256,M-=8);fn[je+L-O]|=R*128}},38092:function(pr,bi){var fn,In;/*!
* jQuery JavaScript Library v3.6.0
* https://jquery.com/
*
* Includes Sizzle.js
* https://sizzlejs.com/
*
* Copyright OpenJS Foundation and other contributors
* Released under the MIT license
* https://jquery.org/license
*
* Date: 2021-03-02T17:08Z
*/(function(je,w){"use strict";typeof pr.exports=="object"?pr.exports=je.document?w(je,!0):function(Z){if(!Z.document)throw new Error("jQuery requires a window with a document");return w(Z)}:w(je)})(typeof window!="undefined"?window:this,function(je,w){"use strict";var Z=[],f=Object.getPrototypeOf,g=Z.slice,y=Z.flat?function(x){return Z.flat.call(x)}:function(x){return Z.concat.apply([],x)},A=Z.push,M=Z.indexOf,E={},C=E.toString,D=E.hasOwnProperty,L=D.toString,O=L.call(Object),R={},W=function($){return typeof $=="function"&&typeof $.nodeType!="number"&&typeof $.item!="function"},G=function($){return $!=null&&$===$.window},ie=je.document,q={type:!0,src:!0,nonce:!0,noModule:!0};function we(x,$,re){re=re||ie;var ge,Re,m=re.createElement("script");if(m.text=x,$)for(ge in q)Re=$[ge]||$.getAttribute&&$.getAttribute(ge),Re&&m.setAttribute(ge,Re);re.head.appendChild(m).parentNode.removeChild(m)}function de(x){return x==null?x+"":typeof x=="object"||typeof x=="function"?E[C.call(x)]||"object":typeof x}var fe="3.6.0",F=function(x,$){return new F.fn.init(x,$)};F.fn=F.prototype={jquery:fe,constructor:F,length:0,toArray:function(){return g.call(this)},get:function(x){return x==null?g.call(this):x<0?this[x+this.length]:this[x]},pushStack:function(x){var $=F.merge(this.constructor(),x);return $.prevObject=this,$},each:function(x){return F.each(this,x)},map:function(x){return this.pushStack(F.map(this,function($,re){return x.call($,re,$)}))},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(F.grep(this,function(x,$){return($+1)%2}))},odd:function(){return this.pushStack(F.grep(this,function(x,$){return $%2}))},eq:function(x){var $=this.length,re=+x+(x<0?$:0);return this.pushStack(re>=0&&re<$?[this[re]]:[])},end:function(){return this.prevObject||this.constructor()},push:A,sort:Z.sort,splice:Z.splice},F.extend=F.fn.extend=function(){var x,$,re,ge,Re,m,S=arguments[0]||{},j=1,Y=arguments.length,he=!1;for(typeof S=="boolean"&&(he=S,S=arguments[j]||{},j++),typeof S!="object"&&!W(S)&&(S={}),j===Y&&(S=this,j--);j<Y;j++)if((x=arguments[j])!=null)for($ in x)ge=x[$],!($==="__proto__"||S===ge)&&(he&&ge&&(F.isPlainObject(ge)||(Re=Array.isArray(ge)))?(re=S[$],Re&&!Array.isArray(re)?m=[]:!Re&&!F.isPlainObject(re)?m={}:m=re,Re=!1,S[$]=F.extend(he,m,ge)):ge!==void 0&&(S[$]=ge));return S},F.extend({expando:"jQuery"+(fe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(x){throw new Error(x)},noop:function(){},isPlainObject:function(x){var $,re;return!x||C.call(x)!=="[object Object]"?!1:($=f(x),$?(re=D.call($,"constructor")&&$.constructor,typeof re=="function"&&L.call(re)===O):!0)},isEmptyObject:function(x){var $;for($ in x)return!1;return!0},globalEval:function(x,$,re){we(x,{nonce:$&&$.nonce},re)},each:function(x,$){var re,ge=0;if(be(x))for(re=x.length;ge<re&&$.call(x[ge],ge,x[ge])!==!1;ge++);else for(ge in x)if($.call(x[ge],ge,x[ge])===!1)break;return x},makeArray:function(x,$){var re=$||[];return x!=null&&(be(Object(x))?F.merge(re,typeof x=="string"?[x]:x):A.call(re,x)),re},inArray:function(x,$,re){return $==null?-1:M.call($,x,re)},merge:function(x,$){for(var re=+$.length,ge=0,Re=x.length;ge<re;ge++)x[Re++]=$[ge];return x.length=Re,x},grep:function(x,$,re){for(var ge,Re=[],m=0,S=x.length,j=!re;m<S;m++)ge=!$(x[m],m),ge!==j&&Re.push(x[m]);return Re},map:function(x,$,re){var ge,Re,m=0,S=[];if(be(x))for(ge=x.length;m<ge;m++)Re=$(x[m],m,re),Re!=null&&S.push(Re);else for(m in x)Re=$(x[m],m,re),Re!=null&&S.push(Re);return y(S)},guid:1,support:R}),typeof Symbol=="function"&&(F.fn[Symbol.iterator]=Z[Symbol.iterator]),F.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(x,$){E["[object "+$+"]"]=$.toLowerCase()});function be(x){var $=!!x&&"length"in x&&x.length,re=de(x);return W(x)||G(x)?!1:re==="array"||$===0||typeof $=="number"&&$>0&&$-1 in x}var pe=function(x){var $,re,ge,Re,m,S,j,Y,he,ye,ke,Ve,Xe,wt,tn,mn,Xt,Ln,si,ni="sizzle"+1*new Date,Gn=x.document,ur=0,zi=0,hr=xs(),ji=xs(),ai=xs(),vr=xs(),cr=function(Ke,bt){return Ke===bt&&(ke=!0),0},ci={}.hasOwnProperty,ns=[],Gs=ns.pop,Xr=ns.push,Hs=ns.push,xo=ns.slice,Vr=function(Ke,bt){for(var xt=0,Dn=Ke.length;xt<Dn;xt++)if(Ke[xt]===bt)return xt;return-1},Do="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ir="[\\x20\\t\\r\\n\\f]",Ts="(?:\\\\[\\da-fA-F]{1,6}"+ir+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",ba="\\["+ir+"*("+Ts+")(?:"+ir+"*([*^$|!~]?=)"+ir+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Ts+"))|)"+ir+"*\\]",dn=":("+Ts+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+ba+")*)|.*)\\)|)",Mt=new RegExp(ir+"+","g"),oi=new RegExp("^"+ir+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ir+"+$","g"),lo=new RegExp("^"+ir+"*,"+ir+"*"),na=new RegExp("^"+ir+"*([>+~]|"+ir+")"+ir+"*"),gl=new RegExp(ir+"|>"),au=new RegExp(dn),Ms=new RegExp("^"+Ts+"$"),Za={ID:new RegExp("^#("+Ts+")"),CLASS:new RegExp("^\\.("+Ts+")"),TAG:new RegExp("^("+Ts+"|[*])"),ATTR:new RegExp("^"+ba),PSEUDO:new RegExp("^"+dn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ir+"*(even|odd|(([+-]|)(\\d*)n|)"+ir+"*(?:([+-]|)"+ir+"*(\\d+)|))"+ir+"*\\)|)","i"),bool:new RegExp("^(?:"+Do+")$","i"),needsContext:new RegExp("^"+ir+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ir+"*((?:-\\d)?\\d*)"+ir+"*\\)|)(?=[^-]|$)","i")},Xa=/HTML$/i,Hu=/^(?:input|select|textarea|button)$/i,zu=/^h\d$/i,Bo=/^[^{]+\{\s*\[native \w/,Fl=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,lu=/[+~]/,Io=new RegExp("\\\\[\\da-fA-F]{1,6}"+ir+"?|\\\\([^\\r\\n\\f])","g"),Wo=function(Ke,bt){var xt="0x"+Ke.slice(1)-65536;return bt||(xt<0?String.fromCharCode(xt+65536):String.fromCharCode(xt>>10|55296,xt&1023|56320))},_s=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,pl=function(Ke,bt){return bt?Ke==="\0"?"\uFFFD":Ke.slice(0,-1)+"\\"+Ke.charCodeAt(Ke.length-1).toString(16)+" ":"\\"+Ke},Bl=function(){Ve()},No=pi(function(Ke){return Ke.disabled===!0&&Ke.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Hs.apply(ns=xo.call(Gn.childNodes),Gn.childNodes),ns[Gn.childNodes.length].nodeType}catch(Ke){Hs={apply:ns.length?function(bt,xt){Xr.apply(bt,xo.call(xt))}:function(bt,xt){for(var Dn=bt.length,on=0;bt[Dn++]=xt[on++];);bt.length=Dn-1}}}function _r(Ke,bt,xt,Dn){var on,Te,Ye,ht,Vt,It,cn,rn=bt&&bt.ownerDocument,Vn=bt?bt.nodeType:9;if(xt=xt||[],typeof Ke!="string"||!Ke||Vn!==1&&Vn!==9&&Vn!==11)return xt;if(!Dn&&(Ve(bt),bt=bt||Xe,tn)){if(Vn!==11&&(Vt=Fl.exec(Ke)))if(on=Vt[1]){if(Vn===9)if(Ye=bt.getElementById(on)){if(Ye.id===on)return xt.push(Ye),xt}else return xt;else if(rn&&(Ye=rn.getElementById(on))&&si(bt,Ye)&&Ye.id===on)return xt.push(Ye),xt}else{if(Vt[2])return Hs.apply(xt,bt.getElementsByTagName(Ke)),xt;if((on=Vt[3])&&re.getElementsByClassName&&bt.getElementsByClassName)return Hs.apply(xt,bt.getElementsByClassName(on)),xt}if(re.qsa&&!vr[Ke+" "]&&(!mn||!mn.test(Ke))&&(Vn!==1||bt.nodeName.toLowerCase()!=="object")){if(cn=Ke,rn=bt,Vn===1&&(gl.test(Ke)||na.test(Ke))){for(rn=lu.test(Ke)&&Qt(bt.parentNode)||bt,(rn!==bt||!re.scope)&&((ht=bt.getAttribute("id"))?ht=ht.replace(_s,pl):bt.setAttribute("id",ht=ni)),It=S(Ke),Te=It.length;Te--;)It[Te]=(ht?"#"+ht:":scope")+" "+xn(It[Te]);cn=It.join(",")}try{return Hs.apply(xt,rn.querySelectorAll(cn)),xt}catch(Zn){vr(Ke,!0)}finally{ht===ni&&bt.removeAttribute("id")}}}return Y(Ke.replace(oi,"$1"),bt,xt,Dn)}function xs(){var Ke=[];function bt(xt,Dn){return Ke.push(xt+" ")>ge.cacheLength&&delete bt[Ke.shift()],bt[xt+" "]=Dn}return bt}function Kr(Ke){return Ke[ni]=!0,Ke}function qs(Ke){var bt=Xe.createElement("fieldset");try{return!!Ke(bt)}catch(xt){return!1}finally{bt.parentNode&&bt.parentNode.removeChild(bt),bt=null}}function uu(Ke,bt){for(var xt=Ke.split("|"),Dn=xt.length;Dn--;)ge.attrHandle[xt[Dn]]=bt}function Hr(Ke,bt){var xt=bt&&Ke,Dn=xt&&Ke.nodeType===1&&bt.nodeType===1&&Ke.sourceIndex-bt.sourceIndex;if(Dn)return Dn;if(xt){for(;xt=xt.nextSibling;)if(xt===bt)return-1}return Ke?1:-1}function ia(Ke){return function(bt){var xt=bt.nodeName.toLowerCase();return xt==="input"&&bt.type===Ke}}function as(Ke){return function(bt){var xt=bt.nodeName.toLowerCase();return(xt==="input"||xt==="button")&&bt.type===Ke}}function Qs(Ke){return function(bt){return"form"in bt?bt.parentNode&&bt.disabled===!1?"label"in bt?"label"in bt.parentNode?bt.parentNode.disabled===Ke:bt.disabled===Ke:bt.isDisabled===Ke||bt.isDisabled!==!Ke&&No(bt)===Ke:bt.disabled===Ke:"label"in bt?bt.disabled===Ke:!1}}function uo(Ke){return Kr(function(bt){return bt=+bt,Kr(function(xt,Dn){for(var on,Te=Ke([],xt.length,bt),Ye=Te.length;Ye--;)xt[on=Te[Ye]]&&(xt[on]=!(Dn[on]=xt[on]))})})}function Qt(Ke){return Ke&&typeof Ke.getElementsByTagName!="undefined"&&Ke}re=_r.support={},m=_r.isXML=function(Ke){var bt=Ke&&Ke.namespaceURI,xt=Ke&&(Ke.ownerDocument||Ke).documentElement;return!Xa.test(bt||xt&&xt.nodeName||"HTML")},Ve=_r.setDocument=function(Ke){var bt,xt,Dn=Ke?Ke.ownerDocument||Ke:Gn;return Dn==Xe||Dn.nodeType!==9||!Dn.documentElement||(Xe=Dn,wt=Xe.documentElement,tn=!m(Xe),Gn!=Xe&&(xt=Xe.defaultView)&&xt.top!==xt&&(xt.addEventListener?xt.addEventListener("unload",Bl,!1):xt.attachEvent&&xt.attachEvent("onunload",Bl)),re.scope=qs(function(on){return wt.appendChild(on).appendChild(Xe.createElement("div")),typeof on.querySelectorAll!="undefined"&&!on.querySelectorAll(":scope fieldset div").length}),re.attributes=qs(function(on){return on.className="i",!on.getAttribute("className")}),re.getElementsByTagName=qs(function(on){return on.appendChild(Xe.createComment("")),!on.getElementsByTagName("*").length}),re.getElementsByClassName=Bo.test(Xe.getElementsByClassName),re.getById=qs(function(on){return wt.appendChild(on).id=ni,!Xe.getElementsByName||!Xe.getElementsByName(ni).length}),re.getById?(ge.filter.ID=function(on){var Te=on.replace(Io,Wo);return function(Ye){return Ye.getAttribute("id")===Te}},ge.find.ID=function(on,Te){if(typeof Te.getElementById!="undefined"&&tn){var Ye=Te.getElementById(on);return Ye?[Ye]:[]}}):(ge.filter.ID=function(on){var Te=on.replace(Io,Wo);return function(Ye){var ht=typeof Ye.getAttributeNode!="undefined"&&Ye.getAttributeNode("id");return ht&&ht.value===Te}},ge.find.ID=function(on,Te){if(typeof Te.getElementById!="undefined"&&tn){var Ye,ht,Vt,It=Te.getElementById(on);if(It){if(Ye=It.getAttributeNode("id"),Ye&&Ye.value===on)return[It];for(Vt=Te.getElementsByName(on),ht=0;It=Vt[ht++];)if(Ye=It.getAttributeNode("id"),Ye&&Ye.value===on)return[It]}return[]}}),ge.find.TAG=re.getElementsByTagName?function(on,Te){if(typeof Te.getElementsByTagName!="undefined")return Te.getElementsByTagName(on);if(re.qsa)return Te.querySelectorAll(on)}:function(on,Te){var Ye,ht=[],Vt=0,It=Te.getElementsByTagName(on);if(on==="*"){for(;Ye=It[Vt++];)Ye.nodeType===1&&ht.push(Ye);return ht}return It},ge.find.CLASS=re.getElementsByClassName&&function(on,Te){if(typeof Te.getElementsByClassName!="undefined"&&tn)return Te.getElementsByClassName(on)},Xt=[],mn=[],(re.qsa=Bo.test(Xe.querySelectorAll))&&(qs(function(on){var Te;wt.appendChild(on).innerHTML="<a id='"+ni+"'></a><select id='"+ni+"-\r\\' msallowcapture=''><option selected=''></option></select>",on.querySelectorAll("[msallowcapture^='']").length&&mn.push("[*^$]="+ir+`*(?:''|"")`),on.querySelectorAll("[selected]").length||mn.push("\\["+ir+"*(?:value|"+Do+")"),on.querySelectorAll("[id~="+ni+"-]").length||mn.push("~="),Te=Xe.createElement("input"),Te.setAttribute("name",""),on.appendChild(Te),on.querySelectorAll("[name='']").length||mn.push("\\["+ir+"*name"+ir+"*="+ir+`*(?:''|"")`),on.querySelectorAll(":checked").length||mn.push(":checked"),on.querySelectorAll("a#"+ni+"+*").length||mn.push(".#.+[+~]"),on.querySelectorAll("\\\f"),mn.push("[\\r\\n\\f]")}),qs(function(on){on.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Te=Xe.createElement("input");Te.setAttribute("type","hidden"),on.appendChild(Te).setAttribute("name","D"),on.querySelectorAll("[name=d]").length&&mn.push("name"+ir+"*[*^$|!~]?="),on.querySelectorAll(":enabled").length!==2&&mn.push(":enabled",":disabled"),wt.appendChild(on).disabled=!0,on.querySelectorAll(":disabled").length!==2&&mn.push(":enabled",":disabled"),on.querySelectorAll("*,:x"),mn.push(",.*:")})),(re.matchesSelector=Bo.test(Ln=wt.matches||wt.webkitMatchesSelector||wt.mozMatchesSelector||wt.oMatchesSelector||wt.msMatchesSelector))&&qs(function(on){re.disconnectedMatch=Ln.call(on,"*"),Ln.call(on,"[s!='']:x"),Xt.push("!=",dn)}),mn=mn.length&&new RegExp(mn.join("|")),Xt=Xt.length&&new RegExp(Xt.join("|")),bt=Bo.test(wt.compareDocumentPosition),si=bt||Bo.test(wt.contains)?function(on,Te){var Ye=on.nodeType===9?on.documentElement:on,ht=Te&&Te.parentNode;return on===ht||!!(ht&&ht.nodeType===1&&(Ye.contains?Ye.contains(ht):on.compareDocumentPosition&&on.compareDocumentPosition(ht)&16))}:function(on,Te){if(Te){for(;Te=Te.parentNode;)if(Te===on)return!0}return!1},cr=bt?function(on,Te){if(on===Te)return ke=!0,0;var Ye=!on.compareDocumentPosition-!Te.compareDocumentPosition;return Ye||(Ye=(on.ownerDocument||on)==(Te.ownerDocument||Te)?on.compareDocumentPosition(Te):1,Ye&1||!re.sortDetached&&Te.compareDocumentPosition(on)===Ye?on==Xe||on.ownerDocument==Gn&&si(Gn,on)?-1:Te==Xe||Te.ownerDocument==Gn&&si(Gn,Te)?1:ye?Vr(ye,on)-Vr(ye,Te):0:Ye&4?-1:1)}:function(on,Te){if(on===Te)return ke=!0,0;var Ye,ht=0,Vt=on.parentNode,It=Te.parentNode,cn=[on],rn=[Te];if(!Vt||!It)return on==Xe?-1:Te==Xe?1:Vt?-1:It?1:ye?Vr(ye,on)-Vr(ye,Te):0;if(Vt===It)return Hr(on,Te);for(Ye=on;Ye=Ye.parentNode;)cn.unshift(Ye);for(Ye=Te;Ye=Ye.parentNode;)rn.unshift(Ye);for(;cn[ht]===rn[ht];)ht++;return ht?Hr(cn[ht],rn[ht]):cn[ht]==Gn?-1:rn[ht]==Gn?1:0}),Xe},_r.matches=function(Ke,bt){return _r(Ke,null,null,bt)},_r.matchesSelector=function(Ke,bt){if(Ve(Ke),re.matchesSelector&&tn&&!vr[bt+" "]&&(!Xt||!Xt.test(bt))&&(!mn||!mn.test(bt)))try{var xt=Ln.call(Ke,bt);if(xt||re.disconnectedMatch||Ke.document&&Ke.document.nodeType!==11)return xt}catch(Dn){vr(bt,!0)}return _r(bt,Xe,null,[Ke]).length>0},_r.contains=function(Ke,bt){return(Ke.ownerDocument||Ke)!=Xe&&Ve(Ke),si(Ke,bt)},_r.attr=function(Ke,bt){(Ke.ownerDocument||Ke)!=Xe&&Ve(Ke);var xt=ge.attrHandle[bt.toLowerCase()],Dn=xt&&ci.call(ge.attrHandle,bt.toLowerCase())?xt(Ke,bt,!tn):void 0;return Dn!==void 0?Dn:re.attributes||!tn?Ke.getAttribute(bt):(Dn=Ke.getAttributeNode(bt))&&Dn.specified?Dn.value:null},_r.escape=function(Ke){return(Ke+"").replace(_s,pl)},_r.error=function(Ke){throw new Error("Syntax error, unrecognized expression: "+Ke)},_r.uniqueSort=function(Ke){var bt,xt=[],Dn=0,on=0;if(ke=!re.detectDuplicates,ye=!re.sortStable&&Ke.slice(0),Ke.sort(cr),ke){for(;bt=Ke[on++];)bt===Ke[on]&&(Dn=xt.push(on));for(;Dn--;)Ke.splice(xt[Dn],1)}return ye=null,Ke},Re=_r.getText=function(Ke){var bt,xt="",Dn=0,on=Ke.nodeType;if(on){if(on===1||on===9||on===11){if(typeof Ke.textContent=="string")return Ke.textContent;for(Ke=Ke.firstChild;Ke;Ke=Ke.nextSibling)xt+=Re(Ke)}else if(on===3||on===4)return Ke.nodeValue}else for(;bt=Ke[Dn++];)xt+=Re(bt);return xt},ge=_r.selectors={cacheLength:50,createPseudo:Kr,match:Za,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Ke){return Ke[1]=Ke[1].replace(Io,Wo),Ke[3]=(Ke[3]||Ke[4]||Ke[5]||"").replace(Io,Wo),Ke[2]==="~="&&(Ke[3]=" "+Ke[3]+" "),Ke.slice(0,4)},CHILD:function(Ke){return Ke[1]=Ke[1].toLowerCase(),Ke[1].slice(0,3)==="nth"?(Ke[3]||_r.error(Ke[0]),Ke[4]=+(Ke[4]?Ke[5]+(Ke[6]||1):2*(Ke[3]==="even"||Ke[3]==="odd")),Ke[5]=+(Ke[7]+Ke[8]||Ke[3]==="odd")):Ke[3]&&_r.error(Ke[0]),Ke},PSEUDO:function(Ke){var bt,xt=!Ke[6]&&Ke[2];return Za.CHILD.test(Ke[0])?null:(Ke[3]?Ke[2]=Ke[4]||Ke[5]||"":xt&&au.test(xt)&&(bt=S(xt,!0))&&(bt=xt.indexOf(")",xt.length-bt)-xt.length)&&(Ke[0]=Ke[0].slice(0,bt),Ke[2]=xt.slice(0,bt)),Ke.slice(0,3))}},filter:{TAG:function(Ke){var bt=Ke.replace(Io,Wo).toLowerCase();return Ke==="*"?function(){return!0}:function(xt){return xt.nodeName&&xt.nodeName.toLowerCase()===bt}},CLASS:function(Ke){var bt=hr[Ke+" "];return bt||(bt=new RegExp("(^|"+ir+")"+Ke+"("+ir+"|$)"))&&hr(Ke,function(xt){return bt.test(typeof xt.className=="string"&&xt.className||typeof xt.getAttribute!="undefined"&&xt.getAttribute("class")||"")})},ATTR:function(Ke,bt,xt){return function(Dn){var on=_r.attr(Dn,Ke);return on==null?bt==="!=":bt?(on+="",bt==="="?on===xt:bt==="!="?on!==xt:bt==="^="?xt&&on.indexOf(xt)===0:bt==="*="?xt&&on.indexOf(xt)>-1:bt==="$="?xt&&on.slice(-xt.length)===xt:bt==="~="?(" "+on.replace(Mt," ")+" ").indexOf(xt)>-1:bt==="|="?on===xt||on.slice(0,xt.length+1)===xt+"-":!1):!0}},CHILD:function(Ke,bt,xt,Dn,on){var Te=Ke.slice(0,3)!=="nth",Ye=Ke.slice(-4)!=="last",ht=bt==="of-type";return Dn===1&&on===0?function(Vt){return!!Vt.parentNode}:function(Vt,It,cn){var rn,Vn,Zn,jn,ri,yi,Ui=Te!==Ye?"nextSibling":"previousSibling",Oi=Vt.parentNode,Ni=ht&&Vt.nodeName.toLowerCase(),Dr=!cn&&!ht,zr=!1;if(Oi){if(Te){for(;Ui;){for(jn=Vt;jn=jn[Ui];)if(ht?jn.nodeName.toLowerCase()===Ni:jn.nodeType===1)return!1;yi=Ui=Ke==="only"&&!yi&&"nextSibling"}return!0}if(yi=[Ye?Oi.firstChild:Oi.lastChild],Ye&&Dr){for(jn=Oi,Zn=jn[ni]||(jn[ni]={}),Vn=Zn[jn.uniqueID]||(Zn[jn.uniqueID]={}),rn=Vn[Ke]||[],ri=rn[0]===ur&&rn[1],zr=ri&&rn[2],jn=ri&&Oi.childNodes[ri];jn=++ri&&jn&&jn[Ui]||(zr=ri=0)||yi.pop();)if(jn.nodeType===1&&++zr&&jn===Vt){Vn[Ke]=[ur,ri,zr];break}}else if(Dr&&(jn=Vt,Zn=jn[ni]||(jn[ni]={}),Vn=Zn[jn.uniqueID]||(Zn[jn.uniqueID]={}),rn=Vn[Ke]||[],ri=rn[0]===ur&&rn[1],zr=ri),zr===!1)for(;(jn=++ri&&jn&&jn[Ui]||(zr=ri=0)||yi.pop())&&!((ht?jn.nodeName.toLowerCase()===Ni:jn.nodeType===1)&&++zr&&(Dr&&(Zn=jn[ni]||(jn[ni]={}),Vn=Zn[jn.uniqueID]||(Zn[jn.uniqueID]={}),Vn[Ke]=[ur,zr]),jn===Vt)););return zr-=on,zr===Dn||zr%Dn==0&&zr/Dn>=0}}},PSEUDO:function(Ke,bt){var xt,Dn=ge.pseudos[Ke]||ge.setFilters[Ke.toLowerCase()]||_r.error("unsupported pseudo: "+Ke);return Dn[ni]?Dn(bt):Dn.length>1?(xt=[Ke,Ke,"",bt],ge.setFilters.hasOwnProperty(Ke.toLowerCase())?Kr(function(on,Te){for(var Ye,ht=Dn(on,bt),Vt=ht.length;Vt--;)Ye=Vr(on,ht[Vt]),on[Ye]=!(Te[Ye]=ht[Vt])}):function(on){return Dn(on,0,xt)}):Dn}},pseudos:{not:Kr(function(Ke){var bt=[],xt=[],Dn=j(Ke.replace(oi,"$1"));return Dn[ni]?Kr(function(on,Te,Ye,ht){for(var Vt,It=Dn(on,null,ht,[]),cn=on.length;cn--;)(Vt=It[cn])&&(on[cn]=!(Te[cn]=Vt))}):function(on,Te,Ye){return bt[0]=on,Dn(bt,null,Ye,xt),bt[0]=null,!xt.pop()}}),has:Kr(function(Ke){return function(bt){return _r(Ke,bt).length>0}}),contains:Kr(function(Ke){return Ke=Ke.replace(Io,Wo),function(bt){return(bt.textContent||Re(bt)).indexOf(Ke)>-1}}),lang:Kr(function(Ke){return Ms.test(Ke||"")||_r.error("unsupported lang: "+Ke),Ke=Ke.replace(Io,Wo).toLowerCase(),function(bt){var xt;do if(xt=tn?bt.lang:bt.getAttribute("xml:lang")||bt.getAttribute("lang"))return xt=xt.toLowerCase(),xt===Ke||xt.indexOf(Ke+"-")===0;while((bt=bt.parentNode)&&bt.nodeType===1);return!1}}),target:function(Ke){var bt=x.location&&x.location.hash;return bt&&bt.slice(1)===Ke.id},root:function(Ke){return Ke===wt},focus:function(Ke){return Ke===Xe.activeElement&&(!Xe.hasFocus||Xe.hasFocus())&&!!(Ke.type||Ke.href||~Ke.tabIndex)},enabled:Qs(!1),disabled:Qs(!0),checked:function(Ke){var bt=Ke.nodeName.toLowerCase();return bt==="input"&&!!Ke.checked||bt==="option"&&!!Ke.selected},selected:function(Ke){return Ke.parentNode&&Ke.parentNode.selectedIndex,Ke.selected===!0},empty:function(Ke){for(Ke=Ke.firstChild;Ke;Ke=Ke.nextSibling)if(Ke.nodeType<6)return!1;return!0},parent:function(Ke){return!ge.pseudos.empty(Ke)},header:function(Ke){return zu.test(Ke.nodeName)},input:function(Ke){return Hu.test(Ke.nodeName)},button:function(Ke){var bt=Ke.nodeName.toLowerCase();return bt==="input"&&Ke.type==="button"||bt==="button"},text:function(Ke){var bt;return Ke.nodeName.toLowerCase()==="input"&&Ke.type==="text"&&((bt=Ke.getAttribute("type"))==null||bt.toLowerCase()==="text")},first:uo(function(){return[0]}),last:uo(function(Ke,bt){return[bt-1]}),eq:uo(function(Ke,bt,xt){return[xt<0?xt+bt:xt]}),even:uo(function(Ke,bt){for(var xt=0;xt<bt;xt+=2)Ke.push(xt);return Ke}),odd:uo(function(Ke,bt){for(var xt=1;xt<bt;xt+=2)Ke.push(xt);return Ke}),lt:uo(function(Ke,bt,xt){for(var Dn=xt<0?xt+bt:xt>bt?bt:xt;--Dn>=0;)Ke.push(Dn);return Ke}),gt:uo(function(Ke,bt,xt){for(var Dn=xt<0?xt+bt:xt;++Dn<bt;)Ke.push(Dn);return Ke})}},ge.pseudos.nth=ge.pseudos.eq;for($ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})ge.pseudos[$]=ia($);for($ in{submit:!0,reset:!0})ge.pseudos[$]=as($);function Pn(){}Pn.prototype=ge.filters=ge.pseudos,ge.setFilters=new Pn,S=_r.tokenize=function(Ke,bt){var xt,Dn,on,Te,Ye,ht,Vt,It=ji[Ke+" "];if(It)return bt?0:It.slice(0);for(Ye=Ke,ht=[],Vt=ge.preFilter;Ye;){(!xt||(Dn=lo.exec(Ye)))&&(Dn&&(Ye=Ye.slice(Dn[0].length)||Ye),ht.push(on=[])),xt=!1,(Dn=na.exec(Ye))&&(xt=Dn.shift(),on.push({value:xt,type:Dn[0].replace(oi," ")}),Ye=Ye.slice(xt.length));for(Te in ge.filter)(Dn=Za[Te].exec(Ye))&&(!Vt[Te]||(Dn=Vt[Te](Dn)))&&(xt=Dn.shift(),on.push({value:xt,type:Te,matches:Dn}),Ye=Ye.slice(xt.length));if(!xt)break}return bt?Ye.length:Ye?_r.error(Ke):ji(Ke,ht).slice(0)};function xn(Ke){for(var bt=0,xt=Ke.length,Dn="";bt<xt;bt++)Dn+=Ke[bt].value;return Dn}function pi(Ke,bt,xt){var Dn=bt.dir,on=bt.next,Te=on||Dn,Ye=xt&&Te==="parentNode",ht=zi++;return bt.first?function(Vt,It,cn){for(;Vt=Vt[Dn];)if(Vt.nodeType===1||Ye)return Ke(Vt,It,cn);return!1}:function(Vt,It,cn){var rn,Vn,Zn,jn=[ur,ht];if(cn){for(;Vt=Vt[Dn];)if((Vt.nodeType===1||Ye)&&Ke(Vt,It,cn))return!0}else for(;Vt=Vt[Dn];)if(Vt.nodeType===1||Ye)if(Zn=Vt[ni]||(Vt[ni]={}),Vn=Zn[Vt.uniqueID]||(Zn[Vt.uniqueID]={}),on&&on===Vt.nodeName.toLowerCase())Vt=Vt[Dn]||Vt;else{if((rn=Vn[Te])&&rn[0]===ur&&rn[1]===ht)return jn[2]=rn[2];if(Vn[Te]=jn,jn[2]=Ke(Vt,It,cn))return!0}return!1}}function Wi(Ke){return Ke.length>1?function(bt,xt,Dn){for(var on=Ke.length;on--;)if(!Ke[on](bt,xt,Dn))return!1;return!0}:Ke[0]}function At(Ke,bt,xt){for(var Dn=0,on=bt.length;Dn<on;Dn++)_r(Ke,bt[Dn],xt);return xt}function bn(Ke,bt,xt,Dn,on){for(var Te,Ye=[],ht=0,Vt=Ke.length,It=bt!=null;ht<Vt;ht++)(Te=Ke[ht])&&(!xt||xt(Te,Dn,on))&&(Ye.push(Te),It&&bt.push(ht));return Ye}function sn(Ke,bt,xt,Dn,on,Te){return Dn&&!Dn[ni]&&(Dn=sn(Dn)),on&&!on[ni]&&(on=sn(on,Te)),Kr(function(Ye,ht,Vt,It){var cn,rn,Vn,Zn=[],jn=[],ri=ht.length,yi=Ye||At(bt||"*",Vt.nodeType?[Vt]:Vt,[]),Ui=Ke&&(Ye||!bt)?bn(yi,Zn,Ke,Vt,It):yi,Oi=xt?on||(Ye?Ke:ri||Dn)?[]:ht:Ui;if(xt&&xt(Ui,Oi,Vt,It),Dn)for(cn=bn(Oi,jn),Dn(cn,[],Vt,It),rn=cn.length;rn--;)(Vn=cn[rn])&&(Oi[jn[rn]]=!(Ui[jn[rn]]=Vn));if(Ye){if(on||Ke){if(on){for(cn=[],rn=Oi.length;rn--;)(Vn=Oi[rn])&&cn.push(Ui[rn]=Vn);on(null,Oi=[],cn,It)}for(rn=Oi.length;rn--;)(Vn=Oi[rn])&&(cn=on?Vr(Ye,Vn):Zn[rn])>-1&&(Ye[cn]=!(ht[cn]=Vn))}}else Oi=bn(Oi===ht?Oi.splice(ri,Oi.length):Oi),on?on(null,ht,Oi,It):Hs.apply(ht,Oi)})}function fi(Ke){for(var bt,xt,Dn,on=Ke.length,Te=ge.relative[Ke[0].type],Ye=Te||ge.relative[" "],ht=Te?1:0,Vt=pi(function(rn){return rn===bt},Ye,!0),It=pi(function(rn){return Vr(bt,rn)>-1},Ye,!0),cn=[function(rn,Vn,Zn){var jn=!Te&&(Zn||Vn!==he)||((bt=Vn).nodeType?Vt(rn,Vn,Zn):It(rn,Vn,Zn));return bt=null,jn}];ht<on;ht++)if(xt=ge.relative[Ke[ht].type])cn=[pi(Wi(cn),xt)];else{if(xt=ge.filter[Ke[ht].type].apply(null,Ke[ht].matches),xt[ni]){for(Dn=++ht;Dn<on&&!ge.relative[Ke[Dn].type];Dn++);return sn(ht>1&&Wi(cn),ht>1&&xn(Ke.slice(0,ht-1).concat({value:Ke[ht-2].type===" "?"*":""})).replace(oi,"$1"),xt,ht<Dn&&fi(Ke.slice(ht,Dn)),Dn<on&&fi(Ke=Ke.slice(Dn)),Dn<on&&xn(Ke))}cn.push(xt)}return Wi(cn)}function Ji(Ke,bt){var xt=bt.length>0,Dn=Ke.length>0,on=function(Te,Ye,ht,Vt,It){var cn,rn,Vn,Zn=0,jn="0",ri=Te&&[],yi=[],Ui=he,Oi=Te||Dn&&ge.find.TAG("*",It),Ni=ur+=Ui==null?1:Math.random()||.1,Dr=Oi.length;for(It&&(he=Ye==Xe||Ye||It);jn!==Dr&&(cn=Oi[jn])!=null;jn++){if(Dn&&cn){for(rn=0,!Ye&&cn.ownerDocument!=Xe&&(Ve(cn),ht=!tn);Vn=Ke[rn++];)if(Vn(cn,Ye||Xe,ht)){Vt.push(cn);break}It&&(ur=Ni)}xt&&((cn=!Vn&&cn)&&Zn--,Te&&ri.push(cn))}if(Zn+=jn,xt&&jn!==Zn){for(rn=0;Vn=bt[rn++];)Vn(ri,yi,Ye,ht);if(Te){if(Zn>0)for(;jn--;)ri[jn]||yi[jn]||(yi[jn]=Gs.call(Vt));yi=bn(yi)}Hs.apply(Vt,yi),It&&!Te&&yi.length>0&&Zn+bt.length>1&&_r.uniqueSort(Vt)}return It&&(ur=Ni,he=Ui),ri};return xt?Kr(on):on}return j=_r.compile=function(Ke,bt){var xt,Dn=[],on=[],Te=ai[Ke+" "];if(!Te){for(bt||(bt=S(Ke)),xt=bt.length;xt--;)Te=fi(bt[xt]),Te[ni]?Dn.push(Te):on.push(Te);Te=ai(Ke,Ji(on,Dn)),Te.selector=Ke}return Te},Y=_r.select=function(Ke,bt,xt,Dn){var on,Te,Ye,ht,Vt,It=typeof Ke=="function"&&Ke,cn=!Dn&&S(Ke=It.selector||Ke);if(xt=xt||[],cn.length===1){if(Te=cn[0]=cn[0].slice(0),Te.length>2&&(Ye=Te[0]).type==="ID"&&bt.nodeType===9&&tn&&ge.relative[Te[1].type]){if(bt=(ge.find.ID(Ye.matches[0].replace(Io,Wo),bt)||[])[0],bt)It&&(bt=bt.parentNode);else return xt;Ke=Ke.slice(Te.shift().value.length)}for(on=Za.needsContext.test(Ke)?0:Te.length;on--&&(Ye=Te[on],!ge.relative[ht=Ye.type]);)if((Vt=ge.find[ht])&&(Dn=Vt(Ye.matches[0].replace(Io,Wo),lu.test(Te[0].type)&&Qt(bt.parentNode)||bt))){if(Te.splice(on,1),Ke=Dn.length&&xn(Te),!Ke)return Hs.apply(xt,Dn),xt;break}}return(It||j(Ke,cn))(Dn,bt,!tn,xt,!bt||lu.test(Ke)&&Qt(bt.parentNode)||bt),xt},re.sortStable=ni.split("").sort(cr).join("")===ni,re.detectDuplicates=!!ke,Ve(),re.sortDetached=qs(function(Ke){return Ke.compareDocumentPosition(Xe.createElement("fieldset"))&1}),qs(function(Ke){return Ke.innerHTML="<a href='#'></a>",Ke.firstChild.getAttribute("href")==="#"})||uu("type|href|height|width",function(Ke,bt,xt){if(!xt)return Ke.getAttribute(bt,bt.toLowerCase()==="type"?1:2)}),(!re.attributes||!qs(function(Ke){return Ke.innerHTML="<input/>",Ke.firstChild.setAttribute("value",""),Ke.firstChild.getAttribute("value")===""}))&&uu("value",function(Ke,bt,xt){if(!xt&&Ke.nodeName.toLowerCase()==="input")return Ke.defaultValue}),qs(function(Ke){return Ke.getAttribute("disabled")==null})||uu(Do,function(Ke,bt,xt){var Dn;if(!xt)return Ke[bt]===!0?bt.toLowerCase():(Dn=Ke.getAttributeNode(bt))&&Dn.specified?Dn.value:null}),_r}(je);F.find=pe,F.expr=pe.selectors,F.expr[":"]=F.expr.pseudos,F.uniqueSort=F.unique=pe.uniqueSort,F.text=pe.getText,F.isXMLDoc=pe.isXML,F.contains=pe.contains,F.escapeSelector=pe.escape;var ae=function(x,$,re){for(var ge=[],Re=re!==void 0;(x=x[$])&&x.nodeType!==9;)if(x.nodeType===1){if(Re&&F(x).is(re))break;ge.push(x)}return ge},Q=function(x,$){for(var re=[];x;x=x.nextSibling)x.nodeType===1&&x!==$&&re.push(x);return re},I=F.expr.match.needsContext;function oe(x,$){return x.nodeName&&x.nodeName.toLowerCase()===$.toLowerCase()}var te=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function ue(x,$,re){return W($)?F.grep(x,function(ge,Re){return!!$.call(ge,Re,ge)!==re}):$.nodeType?F.grep(x,function(ge){return ge===$!==re}):typeof $!="string"?F.grep(x,function(ge){return M.call($,ge)>-1!==re}):F.filter($,x,re)}F.filter=function(x,$,re){var ge=$[0];return re&&(x=":not("+x+")"),$.length===1&&ge.nodeType===1?F.find.matchesSelector(ge,x)?[ge]:[]:F.find.matches(x,F.grep($,function(Re){return Re.nodeType===1}))},F.fn.extend({find:function(x){var $,re,ge=this.length,Re=this;if(typeof x!="string")return this.pushStack(F(x).filter(function(){for($=0;$<ge;$++)if(F.contains(Re[$],this))return!0}));for(re=this.pushStack([]),$=0;$<ge;$++)F.find(x,Re[$],re);return ge>1?F.uniqueSort(re):re},filter:function(x){return this.pushStack(ue(this,x||[],!1))},not:function(x){return this.pushStack(ue(this,x||[],!0))},is:function(x){return!!ue(this,typeof x=="string"&&I.test(x)?F(x):x||[],!1).length}});var De,ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ne=F.fn.init=function(x,$,re){var ge,Re;if(!x)return this;if(re=re||De,typeof x=="string")if(x[0]==="<"&&x[x.length-1]===">"&&x.length>=3?ge=[null,x,null]:ge=ve.exec(x),ge&&(ge[1]||!$))if(ge[1]){if($=$ instanceof F?$[0]:$,F.merge(this,F.parseHTML(ge[1],$&&$.nodeType?$.ownerDocument||$:ie,!0)),te.test(ge[1])&&F.isPlainObject($))for(ge in $)W(this[ge])?this[ge]($[ge]):this.attr(ge,$[ge]);return this}else return Re=ie.getElementById(ge[2]),Re&&(this[0]=Re,this.length=1),this;else return!$||$.jquery?($||re).find(x):this.constructor($).find(x);else{if(x.nodeType)return this[0]=x,this.length=1,this;if(W(x))return re.ready!==void 0?re.ready(x):x(F)}return F.makeArray(x,this)};Ne.prototype=F.fn,De=F(ie);var Ge=/^(?:parents|prev(?:Until|All))/,$e={children:!0,contents:!0,next:!0,prev:!0};F.fn.extend({has:function(x){var $=F(x,this),re=$.length;return this.filter(function(){for(var ge=0;ge<re;ge++)if(F.contains(this,$[ge]))return!0})},closest:function(x,$){var re,ge=0,Re=this.length,m=[],S=typeof x!="string"&&F(x);if(!I.test(x)){for(;ge<Re;ge++)for(re=this[ge];re&&re!==$;re=re.parentNode)if(re.nodeType<11&&(S?S.index(re)>-1:re.nodeType===1&&F.find.matchesSelector(re,x))){m.push(re);break}}return this.pushStack(m.length>1?F.uniqueSort(m):m)},index:function(x){return x?typeof x=="string"?M.call(F(x),this[0]):M.call(this,x.jquery?x[0]:x):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(x,$){return this.pushStack(F.uniqueSort(F.merge(this.get(),F(x,$))))},addBack:function(x){return this.add(x==null?this.prevObject:this.prevObject.filter(x))}});function Be(x,$){for(;(x=x[$])&&x.nodeType!==1;);return x}F.each({parent:function(x){var $=x.parentNode;return $&&$.nodeType!==11?$:null},parents:function(x){return ae(x,"parentNode")},parentsUntil:function(x,$,re){return ae(x,"parentNode",re)},next:function(x){return Be(x,"nextSibling")},prev:function(x){return Be(x,"previousSibling")},nextAll:function(x){return ae(x,"nextSibling")},prevAll:function(x){return ae(x,"previousSibling")},nextUntil:function(x,$,re){return ae(x,"nextSibling",re)},prevUntil:function(x,$,re){return ae(x,"previousSibling",re)},siblings:function(x){return Q((x.parentNode||{}).firstChild,x)},children:function(x){return Q(x.firstChild)},contents:function(x){return x.contentDocument!=null&&f(x.contentDocument)?x.contentDocument:(oe(x,"template")&&(x=x.content||x),F.merge([],x.childNodes))}},function(x,$){F.fn[x]=function(re,ge){var Re=F.map(this,$,re);return x.slice(-5)!=="Until"&&(ge=re),ge&&typeof ge=="string"&&(Re=F.filter(ge,Re)),this.length>1&&($e[x]||F.uniqueSort(Re),Ge.test(x)&&Re.reverse()),this.pushStack(Re)}});var mt=/[^\x20\t\r\n\f]+/g;function Ot(x){var $={};return F.each(x.match(mt)||[],function(re,ge){$[ge]=!0}),$}F.Callbacks=function(x){x=typeof x=="string"?Ot(x):F.extend({},x);var $,re,ge,Re,m=[],S=[],j=-1,Y=function(){for(Re=Re||x.once,ge=$=!0;S.length;j=-1)for(re=S.shift();++j<m.length;)m[j].apply(re[0],re[1])===!1&&x.stopOnFalse&&(j=m.length,re=!1);x.memory||(re=!1),$=!1,Re&&(re?m=[]:m="")},he={add:function(){return m&&(re&&!$&&(j=m.length-1,S.push(re)),function ye(ke){F.each(ke,function(Ve,Xe){W(Xe)?(!x.unique||!he.has(Xe))&&m.push(Xe):Xe&&Xe.length&&de(Xe)!=="string"&&ye(Xe)})}(arguments),re&&!$&&Y()),this},remove:function(){return F.each(arguments,function(ye,ke){for(var Ve;(Ve=F.inArray(ke,m,Ve))>-1;)m.splice(Ve,1),Ve<=j&&j--}),this},has:function(ye){return ye?F.inArray(ye,m)>-1:m.length>0},empty:function(){return m&&(m=[]),this},disable:function(){return Re=S=[],m=re="",this},disabled:function(){return!m},lock:function(){return Re=S=[],!re&&!$&&(m=re=""),this},locked:function(){return!!Re},fireWith:function(ye,ke){return Re||(ke=ke||[],ke=[ye,ke.slice?ke.slice():ke],S.push(ke),$||Y()),this},fire:function(){return he.fireWith(this,arguments),this},fired:function(){return!!ge}};return he};function kt(x){return x}function Tt(x){throw x}function Jt(x,$,re,ge){var Re;try{x&&W(Re=x.promise)?Re.call(x).done($).fail(re):x&&W(Re=x.then)?Re.call(x,$,re):$.apply(void 0,[x].slice(ge))}catch(m){re.apply(void 0,[m])}}F.extend({Deferred:function(x){var $=[["notify","progress",F.Callbacks("memory"),F.Callbacks("memory"),2],["resolve","done",F.Callbacks("once memory"),F.Callbacks("once memory"),0,"resolved"],["reject","fail",F.Callbacks("once memory"),F.Callbacks("once memory"),1,"rejected"]],re="pending",ge={state:function(){return re},always:function(){return Re.done(arguments).fail(arguments),this},catch:function(m){return ge.then(null,m)},pipe:function(){var m=arguments;return F.Deferred(function(S){F.each($,function(j,Y){var he=W(m[Y[4]])&&m[Y[4]];Re[Y[1]](function(){var ye=he&&he.apply(this,arguments);ye&&W(ye.promise)?ye.promise().progress(S.notify).done(S.resolve).fail(S.reject):S[Y[0]+"With"](this,he?[ye]:arguments)})}),m=null}).promise()},then:function(m,S,j){var Y=0;function he(ye,ke,Ve,Xe){return function(){var wt=this,tn=arguments,mn=function(){var Ln,si;if(!(ye<Y)){if(Ln=Ve.apply(wt,tn),Ln===ke.promise())throw new TypeError("Thenable self-resolution");si=Ln&&(typeof Ln=="object"||typeof Ln=="function")&&Ln.then,W(si)?Xe?si.call(Ln,he(Y,ke,kt,Xe),he(Y,ke,Tt,Xe)):(Y++,si.call(Ln,he(Y,ke,kt,Xe),he(Y,ke,Tt,Xe),he(Y,ke,kt,ke.notifyWith))):(Ve!==kt&&(wt=void 0,tn=[Ln]),(Xe||ke.resolveWith)(wt,tn))}},Xt=Xe?mn:function(){try{mn()}catch(Ln){F.Deferred.exceptionHook&&F.Deferred.exceptionHook(Ln,Xt.stackTrace),ye+1>=Y&&(Ve!==Tt&&(wt=void 0,tn=[Ln]),ke.rejectWith(wt,tn))}};ye?Xt():(F.Deferred.getStackHook&&(Xt.stackTrace=F.Deferred.getStackHook()),je.setTimeout(Xt))}}return F.Deferred(function(ye){$[0][3].add(he(0,ye,W(j)?j:kt,ye.notifyWith)),$[1][3].add(he(0,ye,W(m)?m:kt)),$[2][3].add(he(0,ye,W(S)?S:Tt))}).promise()},promise:function(m){return m!=null?F.extend(m,ge):ge}},Re={};return F.each($,function(m,S){var j=S[2],Y=S[5];ge[S[1]]=j.add,Y&&j.add(function(){re=Y},$[3-m][2].disable,$[3-m][3].disable,$[0][2].lock,$[0][3].lock),j.add(S[3].fire),Re[S[0]]=function(){return Re[S[0]+"With"](this===Re?void 0:this,arguments),this},Re[S[0]+"With"]=j.fireWith}),ge.promise(Re),x&&x.call(Re,Re),Re},when:function(x){var $=arguments.length,re=$,ge=Array(re),Re=g.call(arguments),m=F.Deferred(),S=function(j){return function(Y){ge[j]=this,Re[j]=arguments.length>1?g.call(arguments):Y,--$||m.resolveWith(ge,Re)}};if($<=1&&(Jt(x,m.done(S(re)).resolve,m.reject,!$),m.state()==="pending"||W(Re[re]&&Re[re].then)))return m.then();for(;re--;)Jt(Re[re],S(re),m.reject);return m.promise()}});var Mn=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;F.Deferred.exceptionHook=function(x,$){je.console&&je.console.warn&&x&&Mn.test(x.name)&&je.console.warn("jQuery.Deferred exception: "+x.message,x.stack,$)},F.readyException=function(x){je.setTimeout(function(){throw x})};var Yt=F.Deferred();F.fn.ready=function(x){return Yt.then(x).catch(function($){F.readyException($)}),this},F.extend({isReady:!1,readyWait:1,ready:function(x){(x===!0?--F.readyWait:F.isReady)||(F.isReady=!0,!(x!==!0&&--F.readyWait>0)&&Yt.resolveWith(ie,[F]))}}),F.ready.then=Yt.then;function pn(){ie.removeEventListener("DOMContentLoaded",pn),je.removeEventListener("load",pn),F.ready()}ie.readyState==="complete"||ie.readyState!=="loading"&&!ie.documentElement.doScroll?je.setTimeout(F.ready):(ie.addEventListener("DOMContentLoaded",pn),je.addEventListener("load",pn));var gt=function(x,$,re,ge,Re,m,S){var j=0,Y=x.length,he=re==null;if(de(re)==="object"){Re=!0;for(j in re)gt(x,$,j,re[j],!0,m,S)}else if(ge!==void 0&&(Re=!0,W(ge)||(S=!0),he&&(S?($.call(x,ge),$=null):(he=$,$=function(ye,ke,Ve){return he.call(F(ye),Ve)})),$))for(;j<Y;j++)$(x[j],re,S?ge:ge.call(x[j],j,$(x[j],re)));return Re?x:he?$.call(x):Y?$(x[0],re):m},_t=/^-ms-/,Gt=/-([a-z])/g;function Ft(x,$){return $.toUpperCase()}function zt(x){return x.replace(_t,"ms-").replace(Gt,Ft)}var en=function(x){return x.nodeType===1||x.nodeType===9||!+x.nodeType};function Bt(){this.expando=F.expando+Bt.uid++}Bt.uid=1,Bt.prototype={cache:function(x){var $=x[this.expando];return $||($={},en(x)&&(x.nodeType?x[this.expando]=$:Object.defineProperty(x,this.expando,{value:$,configurable:!0}))),$},set:function(x,$,re){var ge,Re=this.cache(x);if(typeof $=="string")Re[zt($)]=re;else for(ge in $)Re[zt(ge)]=$[ge];return Re},get:function(x,$){return $===void 0?this.cache(x):x[this.expando]&&x[this.expando][zt($)]},access:function(x,$,re){return $===void 0||$&&typeof $=="string"&&re===void 0?this.get(x,$):(this.set(x,$,re),re!==void 0?re:$)},remove:function(x,$){var re,ge=x[this.expando];if(ge!==void 0){if($!==void 0)for(Array.isArray($)?$=$.map(zt):($=zt($),$=$ in ge?[$]:$.match(mt)||[]),re=$.length;re--;)delete ge[$[re]];($===void 0||F.isEmptyObject(ge))&&(x.nodeType?x[this.expando]=void 0:delete x[this.expando])}},hasData:function(x){var $=x[this.expando];return $!==void 0&&!F.isEmptyObject($)}};var an=new Bt,Di=new Bt,_i=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,wi=/[A-Z]/g;function On(x){return x==="true"?!0:x==="false"?!1:x==="null"?null:x===+x+""?+x:_i.test(x)?JSON.parse(x):x}function Pt(x,$,re){var ge;if(re===void 0&&x.nodeType===1)if(ge="data-"+$.replace(wi,"-$&").toLowerCase(),re=x.getAttribute(ge),typeof re=="string"){try{re=On(re)}catch(Re){}Di.set(x,$,re)}else re=void 0;return re}F.extend({hasData:function(x){return Di.hasData(x)||an.hasData(x)},data:function(x,$,re){return Di.access(x,$,re)},removeData:function(x,$){Di.remove(x,$)},_data:function(x,$,re){return an.access(x,$,re)},_removeData:function(x,$){an.remove(x,$)}}),F.fn.extend({data:function(x,$){var re,ge,Re,m=this[0],S=m&&m.attributes;if(x===void 0){if(this.length&&(Re=Di.get(m),m.nodeType===1&&!an.get(m,"hasDataAttrs"))){for(re=S.length;re--;)S[re]&&(ge=S[re].name,ge.indexOf("data-")===0&&(ge=zt(ge.slice(5)),Pt(m,ge,Re[ge])));an.set(m,"hasDataAttrs",!0)}return Re}return typeof x=="object"?this.each(function(){Di.set(this,x)}):gt(this,function(j){var Y;if(m&&j===void 0)return Y=Di.get(m,x),Y!==void 0||(Y=Pt(m,x),Y!==void 0)?Y:void 0;this.each(function(){Di.set(this,x,j)})},null,$,arguments.length>1,null,!0)},removeData:function(x){return this.each(function(){Di.remove(this,x)})}}),F.extend({queue:function(x,$,re){var ge;if(x)return $=($||"fx")+"queue",ge=an.get(x,$),re&&(!ge||Array.isArray(re)?ge=an.access(x,$,F.makeArray(re)):ge.push(re)),ge||[]},dequeue:function(x,$){$=$||"fx";var re=F.queue(x,$),ge=re.length,Re=re.shift(),m=F._queueHooks(x,$),S=function(){F.dequeue(x,$)};Re==="inprogress"&&(Re=re.shift(),ge--),Re&&($==="fx"&&re.unshift("inprogress"),delete m.stop,Re.call(x,S,m)),!ge&&m&&m.empty.fire()},_queueHooks:function(x,$){var re=$+"queueHooks";return an.get(x,re)||an.access(x,re,{empty:F.Callbacks("once memory").add(function(){an.remove(x,[$+"queue",re])})})}}),F.fn.extend({queue:function(x,$){var re=2;return typeof x!="string"&&($=x,x="fx",re--),arguments.length<re?F.queue(this[0],x):$===void 0?this:this.each(function(){var ge=F.queue(this,x,$);F._queueHooks(this,x),x==="fx"&&ge[0]!=="inprogress"&&F.dequeue(this,x)})},dequeue:function(x){return this.each(function(){F.dequeue(this,x)})},clearQueue:function(x){return this.queue(x||"fx",[])},promise:function(x,$){var re,ge=1,Re=F.Deferred(),m=this,S=this.length,j=function(){--ge||Re.resolveWith(m,[m])};for(typeof x!="string"&&($=x,x=void 0),x=x||"fx";S--;)re=an.get(m[S],x+"queueHooks"),re&&re.empty&&(ge++,re.empty.add(j));return j(),Re.promise($)}});var et=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ci=new RegExp("^(?:([+-])=|)("+et+")([a-z%]*)$","i"),li=["Top","Right","Bottom","Left"],kn=ie.documentElement,Ae=function(x){return F.contains(x.ownerDocument,x)},le={composed:!0};kn.getRootNode&&(Ae=function(x){return F.contains(x.ownerDocument,x)||x.getRootNode(le)===x.ownerDocument});var ne=function(x,$){return x=$||x,x.style.display==="none"||x.style.display===""&&Ae(x)&&F.css(x,"display")==="none"};function B(x,$,re,ge){var Re,m,S=20,j=ge?function(){return ge.cur()}:function(){return F.css(x,$,"")},Y=j(),he=re&&re[3]||(F.cssNumber[$]?"":"px"),ye=x.nodeType&&(F.cssNumber[$]||he!=="px"&&+Y)&&Ci.exec(F.css(x,$));if(ye&&ye[3]!==he){for(Y=Y/2,he=he||ye[3],ye=+Y||1;S--;)F.style(x,$,ye+he),(1-m)*(1-(m=j()/Y||.5))<=0&&(S=0),ye=ye/m;ye=ye*2,F.style(x,$,ye+he),re=re||[]}return re&&(ye=+ye||+Y||0,Re=re[1]?ye+(re[1]+1)*re[2]:+re[2],ge&&(ge.unit=he,ge.start=ye,ge.end=Re)),Re}var Me={};function Ce(x){var $,re=x.ownerDocument,ge=x.nodeName,Re=Me[ge];return Re||($=re.body.appendChild(re.createElement(ge)),Re=F.css($,"display"),$.parentNode.removeChild($),Re==="none"&&(Re="block"),Me[ge]=Re,Re)}function lt(x,$){for(var re,ge,Re=[],m=0,S=x.length;m<S;m++)ge=x[m],!!ge.style&&(re=ge.style.display,$?(re==="none"&&(Re[m]=an.get(ge,"display")||null,Re[m]||(ge.style.display="")),ge.style.display===""&&ne(ge)&&(Re[m]=Ce(ge))):re!=="none"&&(Re[m]="none",an.set(ge,"display",re)));for(m=0;m<S;m++)Re[m]!=null&&(x[m].style.display=Re[m]);return x}F.fn.extend({show:function(){return lt(this,!0)},hide:function(){return lt(this)},toggle:function(x){return typeof x=="boolean"?x?this.show():this.hide():this.each(function(){ne(this)?F(this).show():F(this).hide()})}});var vt=/^(?:checkbox|radio)$/i,ft=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ot=/^$|^module$|\/(?:java|ecma)script/i;(function(){var x=ie.createDocumentFragment(),$=x.appendChild(ie.createElement("div")),re=ie.createElement("input");re.setAttribute("type","radio"),re.setAttribute("checked","checked"),re.setAttribute("name","t"),$.appendChild(re),R.checkClone=$.cloneNode(!0).cloneNode(!0).lastChild.checked,$.innerHTML="<textarea>x</textarea>",R.noCloneChecked=!!$.cloneNode(!0).lastChild.defaultValue,$.innerHTML="<option></option>",R.option=!!$.lastChild})();var yt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td,R.option||(yt.optgroup=yt.option=[1,"<select multiple='multiple'>","</select>"]);function Ut(x,$){var re;return typeof x.getElementsByTagName!="undefined"?re=x.getElementsByTagName($||"*"):typeof x.querySelectorAll!="undefined"?re=x.querySelectorAll($||"*"):re=[],$===void 0||$&&oe(x,$)?F.merge([x],re):re}function Fn(x,$){for(var re=0,ge=x.length;re<ge;re++)an.set(x[re],"globalEval",!$||an.get($[re],"globalEval"))}var Qn=/<|&#?\w+;/;function Fe(x,$,re,ge,Re){for(var m,S,j,Y,he,ye,ke=$.createDocumentFragment(),Ve=[],Xe=0,wt=x.length;Xe<wt;Xe++)if(m=x[Xe],m||m===0)if(de(m)==="object")F.merge(Ve,m.nodeType?[m]:m);else if(!Qn.test(m))Ve.push($.createTextNode(m));else{for(S=S||ke.appendChild($.createElement("div")),j=(ft.exec(m)||["",""])[1].toLowerCase(),Y=yt[j]||yt._default,S.innerHTML=Y[1]+F.htmlPrefilter(m)+Y[2],ye=Y[0];ye--;)S=S.lastChild;F.merge(Ve,S.childNodes),S=ke.firstChild,S.textContent=""}for(ke.textContent="",Xe=0;m=Ve[Xe++];){if(ge&&F.inArray(m,ge)>-1){Re&&Re.push(m);continue}if(he=Ae(m),S=Ut(ke.appendChild(m),"script"),he&&Fn(S),re)for(ye=0;m=S[ye++];)ot.test(m.type||"")&&re.push(m)}return ke}var ct=/^([^.]*)(?:\.(.+)|)/;function ut(){return!0}function jt(){return!1}function qt(x,$){return x===Dt()==($==="focus")}function Dt(){try{return ie.activeElement}catch(x){}}function hn(x,$,re,ge,Re,m){var S,j;if(typeof $=="object"){typeof re!="string"&&(ge=ge||re,re=void 0);for(j in $)hn(x,j,re,ge,$[j],m);return x}if(ge==null&&Re==null?(Re=re,ge=re=void 0):Re==null&&(typeof re=="string"?(Re=ge,ge=void 0):(Re=ge,ge=re,re=void 0)),Re===!1)Re=jt;else if(!Re)return x;return m===1&&(S=Re,Re=function(Y){return F().off(Y),S.apply(this,arguments)},Re.guid=S.guid||(S.guid=F.guid++)),x.each(function(){F.event.add(this,$,Re,ge,re)})}F.event={global:{},add:function(x,$,re,ge,Re){var m,S,j,Y,he,ye,ke,Ve,Xe,wt,tn,mn=an.get(x);if(!!en(x))for(re.handler&&(m=re,re=m.handler,Re=m.selector),Re&&F.find.matchesSelector(kn,Re),re.guid||(re.guid=F.guid++),(Y=mn.events)||(Y=mn.events=Object.create(null)),(S=mn.handle)||(S=mn.handle=function(Xt){return typeof F!="undefined"&&F.event.triggered!==Xt.type?F.event.dispatch.apply(x,arguments):void 0}),$=($||"").match(mt)||[""],he=$.length;he--;)j=ct.exec($[he])||[],Xe=tn=j[1],wt=(j[2]||"").split(".").sort(),!!Xe&&(ke=F.event.special[Xe]||{},Xe=(Re?ke.delegateType:ke.bindType)||Xe,ke=F.event.special[Xe]||{},ye=F.extend({type:Xe,origType:tn,data:ge,handler:re,guid:re.guid,selector:Re,needsContext:Re&&F.expr.match.needsContext.test(Re),namespace:wt.join(".")},m),(Ve=Y[Xe])||(Ve=Y[Xe]=[],Ve.delegateCount=0,(!ke.setup||ke.setup.call(x,ge,wt,S)===!1)&&x.addEventListener&&x.addEventListener(Xe,S)),ke.add&&(ke.add.call(x,ye),ye.handler.guid||(ye.handler.guid=re.guid)),Re?Ve.splice(Ve.delegateCount++,0,ye):Ve.push(ye),F.event.global[Xe]=!0)},remove:function(x,$,re,ge,Re){var m,S,j,Y,he,ye,ke,Ve,Xe,wt,tn,mn=an.hasData(x)&&an.get(x);if(!(!mn||!(Y=mn.events))){for($=($||"").match(mt)||[""],he=$.length;he--;){if(j=ct.exec($[he])||[],Xe=tn=j[1],wt=(j[2]||"").split(".").sort(),!Xe){for(Xe in Y)F.event.remove(x,Xe+$[he],re,ge,!0);continue}for(ke=F.event.special[Xe]||{},Xe=(ge?ke.delegateType:ke.bindType)||Xe,Ve=Y[Xe]||[],j=j[2]&&new RegExp("(^|\\.)"+wt.join("\\.(?:.*\\.|)")+"(\\.|$)"),S=m=Ve.length;m--;)ye=Ve[m],(Re||tn===ye.origType)&&(!re||re.guid===ye.guid)&&(!j||j.test(ye.namespace))&&(!ge||ge===ye.selector||ge==="**"&&ye.selector)&&(Ve.splice(m,1),ye.selector&&Ve.delegateCount--,ke.remove&&ke.remove.call(x,ye));S&&!Ve.length&&((!ke.teardown||ke.teardown.call(x,wt,mn.handle)===!1)&&F.removeEvent(x,Xe,mn.handle),delete Y[Xe])}F.isEmptyObject(Y)&&an.remove(x,"handle events")}},dispatch:function(x){var $,re,ge,Re,m,S,j=new Array(arguments.length),Y=F.event.fix(x),he=(an.get(this,"events")||Object.create(null))[Y.type]||[],ye=F.event.special[Y.type]||{};for(j[0]=Y,$=1;$<arguments.length;$++)j[$]=arguments[$];if(Y.delegateTarget=this,!(ye.preDispatch&&ye.preDispatch.call(this,Y)===!1)){for(S=F.event.handlers.call(this,Y,he),$=0;(Re=S[$++])&&!Y.isPropagationStopped();)for(Y.currentTarget=Re.elem,re=0;(m=Re.handlers[re++])&&!Y.isImmediatePropagationStopped();)(!Y.rnamespace||m.namespace===!1||Y.rnamespace.test(m.namespace))&&(Y.handleObj=m,Y.data=m.data,ge=((F.event.special[m.origType]||{}).handle||m.handler).apply(Re.elem,j),ge!==void 0&&(Y.result=ge)===!1&&(Y.preventDefault(),Y.stopPropagation()));return ye.postDispatch&&ye.postDispatch.call(this,Y),Y.result}},handlers:function(x,$){var re,ge,Re,m,S,j=[],Y=$.delegateCount,he=x.target;if(Y&&he.nodeType&&!(x.type==="click"&&x.button>=1)){for(;he!==this;he=he.parentNode||this)if(he.nodeType===1&&!(x.type==="click"&&he.disabled===!0)){for(m=[],S={},re=0;re<Y;re++)ge=$[re],Re=ge.selector+" ",S[Re]===void 0&&(S[Re]=ge.needsContext?F(Re,this).index(he)>-1:F.find(Re,this,null,[he]).length),S[Re]&&m.push(ge);m.length&&j.push({elem:he,handlers:m})}}return he=this,Y<$.length&&j.push({elem:he,handlers:$.slice(Y)}),j},addProp:function(x,$){Object.defineProperty(F.Event.prototype,x,{enumerable:!0,configurable:!0,get:W($)?function(){if(this.originalEvent)return $(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[x]},set:function(re){Object.defineProperty(this,x,{enumerable:!0,configurable:!0,writable:!0,value:re})}})},fix:function(x){return x[F.expando]?x:new F.Event(x)},special:{load:{noBubble:!0},click:{setup:function(x){var $=this||x;return vt.test($.type)&&$.click&&oe($,"input")&&Rt($,"click",ut),!1},trigger:function(x){var $=this||x;return vt.test($.type)&&$.click&&oe($,"input")&&Rt($,"click"),!0},_default:function(x){var $=x.target;return vt.test($.type)&&$.click&&oe($,"input")&&an.get($,"click")||oe($,"a")}},beforeunload:{postDispatch:function(x){x.result!==void 0&&x.originalEvent&&(x.originalEvent.returnValue=x.result)}}}};function Rt(x,$,re){if(!re){an.get(x,$)===void 0&&F.event.add(x,$,ut);return}an.set(x,$,!1),F.event.add(x,$,{namespace:!1,handler:function(ge){var Re,m,S=an.get(this,$);if(ge.isTrigger&1&&this[$]){if(S.length)(F.event.special[$]||{}).delegateType&&ge.stopPropagation();else if(S=g.call(arguments),an.set(this,$,S),Re=re(this,$),this[$](),m=an.get(this,$),S!==m||Re?an.set(this,$,!1):m={},S!==m)return ge.stopImmediatePropagation(),ge.preventDefault(),m&&m.value}else S.length&&(an.set(this,$,{value:F.event.trigger(F.extend(S[0],F.Event.prototype),S.slice(1),this)}),ge.stopImmediatePropagation())}})}F.removeEvent=function(x,$,re){x.removeEventListener&&x.removeEventListener($,re)},F.Event=function(x,$){if(!(this instanceof F.Event))return new F.Event(x,$);x&&x.type?(this.originalEvent=x,this.type=x.type,this.isDefaultPrevented=x.defaultPrevented||x.defaultPrevented===void 0&&x.returnValue===!1?ut:jt,this.target=x.target&&x.target.nodeType===3?x.target.parentNode:x.target,this.currentTarget=x.currentTarget,this.relatedTarget=x.relatedTarget):this.type=x,$&&F.extend(this,$),this.timeStamp=x&&x.timeStamp||Date.now(),this[F.expando]=!0},F.Event.prototype={constructor:F.Event,isDefaultPrevented:jt,isPropagationStopped:jt,isImmediatePropagationStopped:jt,isSimulated:!1,preventDefault:function(){var x=this.originalEvent;this.isDefaultPrevented=ut,x&&!this.isSimulated&&x.preventDefault()},stopPropagation:function(){var x=this.originalEvent;this.isPropagationStopped=ut,x&&!this.isSimulated&&x.stopPropagation()},stopImmediatePropagation:function(){var x=this.originalEvent;this.isImmediatePropagationStopped=ut,x&&!this.isSimulated&&x.stopImmediatePropagation(),this.stopPropagation()}},F.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},F.event.addProp),F.each({focus:"focusin",blur:"focusout"},function(x,$){F.event.special[x]={setup:function(){return Rt(this,x,qt),!1},trigger:function(){return Rt(this,x),!0},_default:function(){return!0},delegateType:$}}),F.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(x,$){F.event.special[x]={delegateType:$,bindType:$,handle:function(re){var ge,Re=this,m=re.relatedTarget,S=re.handleObj;return(!m||m!==Re&&!F.contains(Re,m))&&(re.type=S.origType,ge=S.handler.apply(this,arguments),re.type=$),ge}}}),F.fn.extend({on:function(x,$,re,ge){return hn(this,x,$,re,ge)},one:function(x,$,re,ge){return hn(this,x,$,re,ge,1)},off:function(x,$,re){var ge,Re;if(x&&x.preventDefault&&x.handleObj)return ge=x.handleObj,F(x.delegateTarget).off(ge.namespace?ge.origType+"."+ge.namespace:ge.origType,ge.selector,ge.handler),this;if(typeof x=="object"){for(Re in x)this.off(Re,$,x[Re]);return this}return($===!1||typeof $=="function")&&(re=$,$=void 0),re===!1&&(re=jt),this.each(function(){F.event.remove(this,x,re,$)})}});var nn=/<script|<style|<link/i,ln=/checked\s*(?:[^=]|=\s*.checked.)/i,_e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function V(x,$){return oe(x,"table")&&oe($.nodeType!==11?$:$.firstChild,"tr")&&F(x).children("tbody")[0]||x}function H(x){return x.type=(x.getAttribute("type")!==null)+"/"+x.type,x}function T(x){return(x.type||"").slice(0,5)==="true/"?x.type=x.type.slice(5):x.removeAttribute("type"),x}function z(x,$){var re,ge,Re,m,S,j,Y;if($.nodeType===1){if(an.hasData(x)&&(m=an.get(x),Y=m.events,Y)){an.remove($,"handle events");for(Re in Y)for(re=0,ge=Y[Re].length;re<ge;re++)F.event.add($,Re,Y[Re][re])}Di.hasData(x)&&(S=Di.access(x),j=F.extend({},S),Di.set($,j))}}function J(x,$){var re=$.nodeName.toLowerCase();re==="input"&&vt.test(x.type)?$.checked=x.checked:(re==="input"||re==="textarea")&&($.defaultValue=x.defaultValue)}function Pe(x,$,re,ge){$=y($);var Re,m,S,j,Y,he,ye=0,ke=x.length,Ve=ke-1,Xe=$[0],wt=W(Xe);if(wt||ke>1&&typeof Xe=="string"&&!R.checkClone&&ln.test(Xe))return x.each(function(tn){var mn=x.eq(tn);wt&&($[0]=Xe.call(this,tn,mn.html())),Pe(mn,$,re,ge)});if(ke&&(Re=Fe($,x[0].ownerDocument,!1,x,ge),m=Re.firstChild,Re.childNodes.length===1&&(Re=m),m||ge)){for(S=F.map(Ut(Re,"script"),H),j=S.length;ye<ke;ye++)Y=Re,ye!==Ve&&(Y=F.clone(Y,!0,!0),j&&F.merge(S,Ut(Y,"script"))),re.call(x[ye],Y,ye);if(j)for(he=S[S.length-1].ownerDocument,F.map(S,T),ye=0;ye<j;ye++)Y=S[ye],ot.test(Y.type||"")&&!an.access(Y,"globalEval")&&F.contains(he,Y)&&(Y.src&&(Y.type||"").toLowerCase()!=="module"?F._evalUrl&&!Y.noModule&&F._evalUrl(Y.src,{nonce:Y.nonce||Y.getAttribute("nonce")},he):we(Y.textContent.replace(_e,""),Y,he))}return x}function Oe(x,$,re){for(var ge,Re=$?F.filter($,x):x,m=0;(ge=Re[m])!=null;m++)!re&&ge.nodeType===1&&F.cleanData(Ut(ge)),ge.parentNode&&(re&&Ae(ge)&&Fn(Ut(ge,"script")),ge.parentNode.removeChild(ge));return x}F.extend({htmlPrefilter:function(x){return x},clone:function(x,$,re){var ge,Re,m,S,j=x.cloneNode(!0),Y=Ae(x);if(!R.noCloneChecked&&(x.nodeType===1||x.nodeType===11)&&!F.isXMLDoc(x))for(S=Ut(j),m=Ut(x),ge=0,Re=m.length;ge<Re;ge++)J(m[ge],S[ge]);if($)if(re)for(m=m||Ut(x),S=S||Ut(j),ge=0,Re=m.length;ge<Re;ge++)z(m[ge],S[ge]);else z(x,j);return S=Ut(j,"script"),S.length>0&&Fn(S,!Y&&Ut(x,"script")),j},cleanData:function(x){for(var $,re,ge,Re=F.event.special,m=0;(re=x[m])!==void 0;m++)if(en(re)){if($=re[an.expando]){if($.events)for(ge in $.events)Re[ge]?F.event.remove(re,ge):F.removeEvent(re,ge,$.handle);re[an.expando]=void 0}re[Di.expando]&&(re[Di.expando]=void 0)}}}),F.fn.extend({detach:function(x){return Oe(this,x,!0)},remove:function(x){return Oe(this,x)},text:function(x){return gt(this,function($){return $===void 0?F.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=$)})},null,x,arguments.length)},append:function(){return Pe(this,arguments,function(x){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var $=V(this,x);$.appendChild(x)}})},prepend:function(){return Pe(this,arguments,function(x){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var $=V(this,x);$.insertBefore(x,$.firstChild)}})},before:function(){return Pe(this,arguments,function(x){this.parentNode&&this.parentNode.insertBefore(x,this)})},after:function(){return Pe(this,arguments,function(x){this.parentNode&&this.parentNode.insertBefore(x,this.nextSibling)})},empty:function(){for(var x,$=0;(x=this[$])!=null;$++)x.nodeType===1&&(F.cleanData(Ut(x,!1)),x.textContent="");return this},clone:function(x,$){return x=x==null?!1:x,$=$==null?x:$,this.map(function(){return F.clone(this,x,$)})},html:function(x){return gt(this,function($){var re=this[0]||{},ge=0,Re=this.length;if($===void 0&&re.nodeType===1)return re.innerHTML;if(typeof $=="string"&&!nn.test($)&&!yt[(ft.exec($)||["",""])[1].toLowerCase()]){$=F.htmlPrefilter($);try{for(;ge<Re;ge++)re=this[ge]||{},re.nodeType===1&&(F.cleanData(Ut(re,!1)),re.innerHTML=$);re=0}catch(m){}}re&&this.empty().append($)},null,x,arguments.length)},replaceWith:function(){var x=[];return Pe(this,arguments,function($){var re=this.parentNode;F.inArray(this,x)<0&&(F.cleanData(Ut(this)),re&&re.replaceChild($,this))},x)}}),F.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(x,$){F.fn[x]=function(re){for(var ge,Re=[],m=F(re),S=m.length-1,j=0;j<=S;j++)ge=j===S?this:this.clone(!0),F(m[j])[$](ge),A.apply(Re,ge.get());return this.pushStack(Re)}});var Ue=new RegExp("^("+et+")(?!px)[a-z%]+$","i"),qe=function(x){var $=x.ownerDocument.defaultView;return(!$||!$.opener)&&($=je),$.getComputedStyle(x)},Ct=function(x,$,re){var ge,Re,m={};for(Re in $)m[Re]=x.style[Re],x.style[Re]=$[Re];ge=re.call(x);for(Re in $)x.style[Re]=m[Re];return ge},dt=new RegExp(li.join("|"),"i");(function(){function x(){if(!!he){Y.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",he.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",kn.appendChild(Y).appendChild(he);var ye=je.getComputedStyle(he);re=ye.top!=="1%",j=$(ye.marginLeft)===12,he.style.right="60%",m=$(ye.right)===36,ge=$(ye.width)===36,he.style.position="absolute",Re=$(he.offsetWidth/3)===12,kn.removeChild(Y),he=null}}function $(ye){return Math.round(parseFloat(ye))}var re,ge,Re,m,S,j,Y=ie.createElement("div"),he=ie.createElement("div");!he.style||(he.style.backgroundClip="content-box",he.cloneNode(!0).style.backgroundClip="",R.clearCloneStyle=he.style.backgroundClip==="content-box",F.extend(R,{boxSizingReliable:function(){return x(),ge},pixelBoxStyles:function(){return x(),m},pixelPosition:function(){return x(),re},reliableMarginLeft:function(){return x(),j},scrollboxSize:function(){return x(),Re},reliableTrDimensions:function(){var ye,ke,Ve,Xe;return S==null&&(ye=ie.createElement("table"),ke=ie.createElement("tr"),Ve=ie.createElement("div"),ye.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ke.style.cssText="border:1px solid",ke.style.height="1px",Ve.style.height="9px",Ve.style.display="block",kn.appendChild(ye).appendChild(ke).appendChild(Ve),Xe=je.getComputedStyle(ke),S=parseInt(Xe.height,10)+parseInt(Xe.borderTopWidth,10)+parseInt(Xe.borderBottomWidth,10)===ke.offsetHeight,kn.removeChild(ye)),S}}))})();function Et(x,$,re){var ge,Re,m,S,j=x.style;return re=re||qe(x),re&&(S=re.getPropertyValue($)||re[$],S===""&&!Ae(x)&&(S=F.style(x,$)),!R.pixelBoxStyles()&&Ue.test(S)&&dt.test($)&&(ge=j.width,Re=j.minWidth,m=j.maxWidth,j.minWidth=j.maxWidth=j.width=S,S=re.width,j.width=ge,j.minWidth=Re,j.maxWidth=m)),S!==void 0?S+"":S}function Cn(x,$){return{get:function(){if(x()){delete this.get;return}return(this.get=$).apply(this,arguments)}}}var st=["Webkit","Moz","ms"],Zt=ie.createElement("div").style,zn={};function Lt(x){for(var $=x[0].toUpperCase()+x.slice(1),re=st.length;re--;)if(x=st[re]+$,x in Zt)return x}function En(x){var $=F.cssProps[x]||zn[x];return $||(x in Zt?x:zn[x]=Lt(x)||x)}var qn=/^(none|table(?!-c[ea]).+)/,ui=/^--/,Ai={position:"absolute",visibility:"hidden",display:"block"},or={letterSpacing:"0",fontWeight:"400"};function Hn(x,$,re){var ge=Ci.exec($);return ge?Math.max(0,ge[2]-(re||0))+(ge[3]||"px"):$}function Jn(x,$,re,ge,Re,m){var S=$==="width"?1:0,j=0,Y=0;if(re===(ge?"border":"content"))return 0;for(;S<4;S+=2)re==="margin"&&(Y+=F.css(x,re+li[S],!0,Re)),ge?(re==="content"&&(Y-=F.css(x,"padding"+li[S],!0,Re)),re!=="margin"&&(Y-=F.css(x,"border"+li[S]+"Width",!0,Re))):(Y+=F.css(x,"padding"+li[S],!0,Re),re!=="padding"?Y+=F.css(x,"border"+li[S]+"Width",!0,Re):j+=F.css(x,"border"+li[S]+"Width",!0,Re));return!ge&&m>=0&&(Y+=Math.max(0,Math.ceil(x["offset"+$[0].toUpperCase()+$.slice(1)]-m-Y-j-.5))||0),Y}function Ii(x,$,re){var ge=qe(x),Re=!R.boxSizingReliable()||re,m=Re&&F.css(x,"boxSizing",!1,ge)==="border-box",S=m,j=Et(x,$,ge),Y="offset"+$[0].toUpperCase()+$.slice(1);if(Ue.test(j)){if(!re)return j;j="auto"}return(!R.boxSizingReliable()&&m||!R.reliableTrDimensions()&&oe(x,"tr")||j==="auto"||!parseFloat(j)&&F.css(x,"display",!1,ge)==="inline")&&x.getClientRects().length&&(m=F.css(x,"boxSizing",!1,ge)==="border-box",S=Y in x,S&&(j=x[Y])),j=parseFloat(j)||0,j+Jn(x,$,re||(m?"border":"content"),S,ge,j)+"px"}F.extend({cssHooks:{opacity:{get:function(x,$){if($){var re=Et(x,"opacity");return re===""?"1":re}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(x,$,re,ge){if(!(!x||x.nodeType===3||x.nodeType===8||!x.style)){var Re,m,S,j=zt($),Y=ui.test($),he=x.style;if(Y||($=En(j)),S=F.cssHooks[$]||F.cssHooks[j],re!==void 0){if(m=typeof re,m==="string"&&(Re=Ci.exec(re))&&Re[1]&&(re=B(x,$,Re),m="number"),re==null||re!==re)return;m==="number"&&!Y&&(re+=Re&&Re[3]||(F.cssNumber[j]?"":"px")),!R.clearCloneStyle&&re===""&&$.indexOf("background")===0&&(he[$]="inherit"),(!S||!("set"in S)||(re=S.set(x,re,ge))!==void 0)&&(Y?he.setProperty($,re):he[$]=re)}else return S&&"get"in S&&(Re=S.get(x,!1,ge))!==void 0?Re:he[$]}},css:function(x,$,re,ge){var Re,m,S,j=zt($),Y=ui.test($);return Y||($=En(j)),S=F.cssHooks[$]||F.cssHooks[j],S&&"get"in S&&(Re=S.get(x,!0,re)),Re===void 0&&(Re=Et(x,$,ge)),Re==="normal"&&$ in or&&(Re=or[$]),re===""||re?(m=parseFloat(Re),re===!0||isFinite(m)?m||0:Re):Re}}),F.each(["height","width"],function(x,$){F.cssHooks[$]={get:function(re,ge,Re){if(ge)return qn.test(F.css(re,"display"))&&(!re.getClientRects().length||!re.getBoundingClientRect().width)?Ct(re,Ai,function(){return Ii(re,$,Re)}):Ii(re,$,Re)},set:function(re,ge,Re){var m,S=qe(re),j=!R.scrollboxSize()&&S.position==="absolute",Y=j||Re,he=Y&&F.css(re,"boxSizing",!1,S)==="border-box",ye=Re?Jn(re,$,Re,he,S):0;return he&&j&&(ye-=Math.ceil(re["offset"+$[0].toUpperCase()+$.slice(1)]-parseFloat(S[$])-Jn(re,$,"border",!1,S)-.5)),ye&&(m=Ci.exec(ge))&&(m[3]||"px")!=="px"&&(re.style[$]=ge,ge=F.css(re,$)),Hn(re,ge,ye)}}}),F.cssHooks.marginLeft=Cn(R.reliableMarginLeft,function(x,$){if($)return(parseFloat(Et(x,"marginLeft"))||x.getBoundingClientRect().left-Ct(x,{marginLeft:0},function(){return x.getBoundingClientRect().left}))+"px"}),F.each({margin:"",padding:"",border:"Width"},function(x,$){F.cssHooks[x+$]={expand:function(re){for(var ge=0,Re={},m=typeof re=="string"?re.split(" "):[re];ge<4;ge++)Re[x+li[ge]+$]=m[ge]||m[ge-2]||m[0];return Re}},x!=="margin"&&(F.cssHooks[x+$].set=Hn)}),F.fn.extend({css:function(x,$){return gt(this,function(re,ge,Re){var m,S,j={},Y=0;if(Array.isArray(ge)){for(m=qe(re),S=ge.length;Y<S;Y++)j[ge[Y]]=F.css(re,ge[Y],!1,m);return j}return Re!==void 0?F.style(re,ge,Re):F.css(re,ge)},x,$,arguments.length>1)}});function ti(x,$,re,ge,Re){return new ti.prototype.init(x,$,re,ge,Re)}F.Tween=ti,ti.prototype={constructor:ti,init:function(x,$,re,ge,Re,m){this.elem=x,this.prop=re,this.easing=Re||F.easing._default,this.options=$,this.start=this.now=this.cur(),this.end=ge,this.unit=m||(F.cssNumber[re]?"":"px")},cur:function(){var x=ti.propHooks[this.prop];return x&&x.get?x.get(this):ti.propHooks._default.get(this)},run:function(x){var $,re=ti.propHooks[this.prop];return this.options.duration?this.pos=$=F.easing[this.easing](x,this.options.duration*x,0,1,this.options.duration):this.pos=$=x,this.now=(this.end-this.start)*$+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),re&&re.set?re.set(this):ti.propHooks._default.set(this),this}},ti.prototype.init.prototype=ti.prototype,ti.propHooks={_default:{get:function(x){var $;return x.elem.nodeType!==1||x.elem[x.prop]!=null&&x.elem.style[x.prop]==null?x.elem[x.prop]:($=F.css(x.elem,x.prop,""),!$||$==="auto"?0:$)},set:function(x){F.fx.step[x.prop]?F.fx.step[x.prop](x):x.elem.nodeType===1&&(F.cssHooks[x.prop]||x.elem.style[En(x.prop)]!=null)?F.style(x.elem,x.prop,x.now+x.unit):x.elem[x.prop]=x.now}}},ti.propHooks.scrollTop=ti.propHooks.scrollLeft={set:function(x){x.elem.nodeType&&x.elem.parentNode&&(x.elem[x.prop]=x.now)}},F.easing={linear:function(x){return x},swing:function(x){return .5-Math.cos(x*Math.PI)/2},_default:"swing"},F.fx=ti.prototype.init,F.fx.step={};var Ht,Bn,Xn=/^(?:toggle|show|hide)$/,Kn=/queueHooks$/;function Bi(){Bn&&(ie.hidden===!1&&je.requestAnimationFrame?je.requestAnimationFrame(Bi):je.setTimeout(Bi,F.fx.interval),F.fx.tick())}function br(){return je.setTimeout(function(){Ht=void 0}),Ht=Date.now()}function Vi(x,$){var re,ge=0,Re={height:x};for($=$?1:0;ge<4;ge+=2-$)re=li[ge],Re["margin"+re]=Re["padding"+re]=x;return $&&(Re.opacity=Re.width=x),Re}function lr(x,$,re){for(var ge,Re=(Rn.tweeners[$]||[]).concat(Rn.tweeners["*"]),m=0,S=Re.length;m<S;m++)if(ge=Re[m].call(re,$,x))return ge}function Qi(x,$,re){var ge,Re,m,S,j,Y,he,ye,ke="width"in $||"height"in $,Ve=this,Xe={},wt=x.style,tn=x.nodeType&&ne(x),mn=an.get(x,"fxshow");re.queue||(S=F._queueHooks(x,"fx"),S.unqueued==null&&(S.unqueued=0,j=S.empty.fire,S.empty.fire=function(){S.unqueued||j()}),S.unqueued++,Ve.always(function(){Ve.always(function(){S.unqueued--,F.queue(x,"fx").length||S.empty.fire()})}));for(ge in $)if(Re=$[ge],Xn.test(Re)){if(delete $[ge],m=m||Re==="toggle",Re===(tn?"hide":"show"))if(Re==="show"&&mn&&mn[ge]!==void 0)tn=!0;else continue;Xe[ge]=mn&&mn[ge]||F.style(x,ge)}if(Y=!F.isEmptyObject($),!(!Y&&F.isEmptyObject(Xe))){ke&&x.nodeType===1&&(re.overflow=[wt.overflow,wt.overflowX,wt.overflowY],he=mn&&mn.display,he==null&&(he=an.get(x,"display")),ye=F.css(x,"display"),ye==="none"&&(he?ye=he:(lt([x],!0),he=x.style.display||he,ye=F.css(x,"display"),lt([x]))),(ye==="inline"||ye==="inline-block"&&he!=null)&&F.css(x,"float")==="none"&&(Y||(Ve.done(function(){wt.display=he}),he==null&&(ye=wt.display,he=ye==="none"?"":ye)),wt.display="inline-block")),re.overflow&&(wt.overflow="hidden",Ve.always(function(){wt.overflow=re.overflow[0],wt.overflowX=re.overflow[1],wt.overflowY=re.overflow[2]})),Y=!1;for(ge in Xe)Y||(mn?"hidden"in mn&&(tn=mn.hidden):mn=an.access(x,"fxshow",{display:he}),m&&(mn.hidden=!tn),tn&&lt([x],!0),Ve.done(function(){tn||lt([x]),an.remove(x,"fxshow");for(ge in Xe)F.style(x,ge,Xe[ge])})),Y=lr(tn?mn[ge]:0,ge,Ve),ge in mn||(mn[ge]=Y.start,tn&&(Y.end=Y.start,Y.start=0))}}function gi(x,$){var re,ge,Re,m,S;for(re in x)if(ge=zt(re),Re=$[ge],m=x[re],Array.isArray(m)&&(Re=m[1],m=x[re]=m[0]),re!==ge&&(x[ge]=m,delete x[re]),S=F.cssHooks[ge],S&&"expand"in S){m=S.expand(m),delete x[ge];for(re in m)re in x||(x[re]=m[re],$[re]=Re)}else $[ge]=Re}function Rn(x,$,re){var ge,Re,m=0,S=Rn.prefilters.length,j=F.Deferred().always(function(){delete Y.elem}),Y=function(){if(Re)return!1;for(var ke=Ht||br(),Ve=Math.max(0,he.startTime+he.duration-ke),Xe=Ve/he.duration||0,wt=1-Xe,tn=0,mn=he.tweens.length;tn<mn;tn++)he.tweens[tn].run(wt);return j.notifyWith(x,[he,wt,Ve]),wt<1&&mn?Ve:(mn||j.notifyWith(x,[he,1,0]),j.resolveWith(x,[he]),!1)},he=j.promise({elem:x,props:F.extend({},$),opts:F.extend(!0,{specialEasing:{},easing:F.easing._default},re),originalProperties:$,originalOptions:re,startTime:Ht||br(),duration:re.duration,tweens:[],createTween:function(ke,Ve){var Xe=F.Tween(x,he.opts,ke,Ve,he.opts.specialEasing[ke]||he.opts.easing);return he.tweens.push(Xe),Xe},stop:function(ke){var Ve=0,Xe=ke?he.tweens.length:0;if(Re)return this;for(Re=!0;Ve<Xe;Ve++)he.tweens[Ve].run(1);return ke?(j.notifyWith(x,[he,1,0]),j.resolveWith(x,[he,ke])):j.rejectWith(x,[he,ke]),this}}),ye=he.props;for(gi(ye,he.opts.specialEasing);m<S;m++)if(ge=Rn.prefilters[m].call(he,x,ye,he.opts),ge)return W(ge.stop)&&(F._queueHooks(he.elem,he.opts.queue).stop=ge.stop.bind(ge)),ge;return F.map(ye,lr,he),W(he.opts.start)&&he.opts.start.call(x,he),he.progress(he.opts.progress).done(he.opts.done,he.opts.complete).fail(he.opts.fail).always(he.opts.always),F.fx.timer(F.extend(Y,{elem:x,anim:he,queue:he.opts.queue})),he}F.Animation=F.extend(Rn,{tweeners:{"*":[function(x,$){var re=this.createTween(x,$);return B(re.elem,x,Ci.exec($),re),re}]},tweener:function(x,$){W(x)?($=x,x=["*"]):x=x.match(mt);for(var re,ge=0,Re=x.length;ge<Re;ge++)re=x[ge],Rn.tweeners[re]=Rn.tweeners[re]||[],Rn.tweeners[re].unshift($)},prefilters:[Qi],prefilter:function(x,$){$?Rn.prefilters.unshift(x):Rn.prefilters.push(x)}}),F.speed=function(x,$,re){var ge=x&&typeof x=="object"?F.extend({},x):{complete:re||!re&&$||W(x)&&x,duration:x,easing:re&&$||$&&!W($)&&$};return F.fx.off?ge.duration=0:typeof ge.duration!="number"&&(ge.duration in F.fx.speeds?ge.duration=F.fx.speeds[ge.duration]:ge.duration=F.fx.speeds._default),(ge.queue==null||ge.queue===!0)&&(ge.queue="fx"),ge.old=ge.complete,ge.complete=function(){W(ge.old)&&ge.old.call(this),ge.queue&&F.dequeue(this,ge.queue)},ge},F.fn.extend({fadeTo:function(x,$,re,ge){return this.filter(ne).css("opacity",0).show().end().animate({opacity:$},x,re,ge)},animate:function(x,$,re,ge){var Re=F.isEmptyObject(x),m=F.speed($,re,ge),S=function(){var j=Rn(this,F.extend({},x),m);(Re||an.get(this,"finish"))&&j.stop(!0)};return S.finish=S,Re||m.queue===!1?this.each(S):this.queue(m.queue,S)},stop:function(x,$,re){var ge=function(Re){var m=Re.stop;delete Re.stop,m(re)};return typeof x!="string"&&(re=$,$=x,x=void 0),$&&this.queue(x||"fx",[]),this.each(function(){var Re=!0,m=x!=null&&x+"queueHooks",S=F.timers,j=an.get(this);if(m)j[m]&&j[m].stop&&ge(j[m]);else for(m in j)j[m]&&j[m].stop&&Kn.test(m)&&ge(j[m]);for(m=S.length;m--;)S[m].elem===this&&(x==null||S[m].queue===x)&&(S[m].anim.stop(re),Re=!1,S.splice(m,1));(Re||!re)&&F.dequeue(this,x)})},finish:function(x){return x!==!1&&(x=x||"fx"),this.each(function(){var $,re=an.get(this),ge=re[x+"queue"],Re=re[x+"queueHooks"],m=F.timers,S=ge?ge.length:0;for(re.finish=!0,F.queue(this,x,[]),Re&&Re.stop&&Re.stop.call(this,!0),$=m.length;$--;)m[$].elem===this&&m[$].queue===x&&(m[$].anim.stop(!0),m.splice($,1));for($=0;$<S;$++)ge[$]&&ge[$].finish&&ge[$].finish.call(this);delete re.finish})}}),F.each(["toggle","show","hide"],function(x,$){var re=F.fn[$];F.fn[$]=function(ge,Re,m){return ge==null||typeof ge=="boolean"?re.apply(this,arguments):this.animate(Vi($,!0),ge,Re,m)}}),F.each({slideDown:Vi("show"),slideUp:Vi("hide"),slideToggle:Vi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(x,$){F.fn[x]=function(re,ge,Re){return this.animate($,re,ge,Re)}}),F.timers=[],F.fx.tick=function(){var x,$=0,re=F.timers;for(Ht=Date.now();$<re.length;$++)x=re[$],!x()&&re[$]===x&&re.splice($--,1);re.length||F.fx.stop(),Ht=void 0},F.fx.timer=function(x){F.timers.push(x),F.fx.start()},F.fx.interval=13,F.fx.start=function(){Bn||(Bn=!0,Bi())},F.fx.stop=function(){Bn=null},F.fx.speeds={slow:600,fast:200,_default:400},F.fn.delay=function(x,$){return x=F.fx&&F.fx.speeds[x]||x,$=$||"fx",this.queue($,function(re,ge){var Re=je.setTimeout(re,x);ge.stop=function(){je.clearTimeout(Re)}})},function(){var x=ie.createElement("input"),$=ie.createElement("select"),re=$.appendChild(ie.createElement("option"));x.type="checkbox",R.checkOn=x.value!=="",R.optSelected=re.selected,x=ie.createElement("input"),x.value="t",x.type="radio",R.radioValue=x.value==="t"}();var vs,Ss=F.expr.attrHandle;F.fn.extend({attr:function(x,$){return gt(this,F.attr,x,$,arguments.length>1)},removeAttr:function(x){return this.each(function(){F.removeAttr(this,x)})}}),F.extend({attr:function(x,$,re){var ge,Re,m=x.nodeType;if(!(m===3||m===8||m===2)){if(typeof x.getAttribute=="undefined")return F.prop(x,$,re);if((m!==1||!F.isXMLDoc(x))&&(Re=F.attrHooks[$.toLowerCase()]||(F.expr.match.bool.test($)?vs:void 0)),re!==void 0){if(re===null){F.removeAttr(x,$);return}return Re&&"set"in Re&&(ge=Re.set(x,re,$))!==void 0?ge:(x.setAttribute($,re+""),re)}return Re&&"get"in Re&&(ge=Re.get(x,$))!==null?ge:(ge=F.find.attr(x,$),ge==null?void 0:ge)}},attrHooks:{type:{set:function(x,$){if(!R.radioValue&&$==="radio"&&oe(x,"input")){var re=x.value;return x.setAttribute("type",$),re&&(x.value=re),$}}}},removeAttr:function(x,$){var re,ge=0,Re=$&&$.match(mt);if(Re&&x.nodeType===1)for(;re=Re[ge++];)x.removeAttribute(re)}}),vs={set:function(x,$,re){return $===!1?F.removeAttr(x,re):x.setAttribute(re,re),re}},F.each(F.expr.match.bool.source.match(/\w+/g),function(x,$){var re=Ss[$]||F.find.attr;Ss[$]=function(ge,Re,m){var S,j,Y=Re.toLowerCase();return m||(j=Ss[Y],Ss[Y]=S,S=re(ge,Re,m)!=null?Y:null,Ss[Y]=j),S}});var Si=/^(?:input|select|textarea|button)$/i,Lr=/^(?:a|area)$/i;F.fn.extend({prop:function(x,$){return gt(this,F.prop,x,$,arguments.length>1)},removeProp:function(x){return this.each(function(){delete this[F.propFix[x]||x]})}}),F.extend({prop:function(x,$,re){var ge,Re,m=x.nodeType;if(!(m===3||m===8||m===2))return(m!==1||!F.isXMLDoc(x))&&($=F.propFix[$]||$,Re=F.propHooks[$]),re!==void 0?Re&&"set"in Re&&(ge=Re.set(x,re,$))!==void 0?ge:x[$]=re:Re&&"get"in Re&&(ge=Re.get(x,$))!==null?ge:x[$]},propHooks:{tabIndex:{get:function(x){var $=F.find.attr(x,"tabindex");return $?parseInt($,10):Si.test(x.nodeName)||Lr.test(x.nodeName)&&x.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),R.optSelected||(F.propHooks.selected={get:function(x){var $=x.parentNode;return $&&$.parentNode&&$.parentNode.selectedIndex,null},set:function(x){var $=x.parentNode;$&&($.selectedIndex,$.parentNode&&$.parentNode.selectedIndex)}}),F.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){F.propFix[this.toLowerCase()]=this});function mr(x){var $=x.match(mt)||[];return $.join(" ")}function Wr(x){return x.getAttribute&&x.getAttribute("class")||""}function ei(x){return Array.isArray(x)?x:typeof x=="string"?x.match(mt)||[]:[]}F.fn.extend({addClass:function(x){var $,re,ge,Re,m,S,j,Y=0;if(W(x))return this.each(function(he){F(this).addClass(x.call(this,he,Wr(this)))});if($=ei(x),$.length){for(;re=this[Y++];)if(Re=Wr(re),ge=re.nodeType===1&&" "+mr(Re)+" ",ge){for(S=0;m=$[S++];)ge.indexOf(" "+m+" ")<0&&(ge+=m+" ");j=mr(ge),Re!==j&&re.setAttribute("class",j)}}return this},removeClass:function(x){var $,re,ge,Re,m,S,j,Y=0;if(W(x))return this.each(function(he){F(this).removeClass(x.call(this,he,Wr(this)))});if(!arguments.length)return this.attr("class","");if($=ei(x),$.length){for(;re=this[Y++];)if(Re=Wr(re),ge=re.nodeType===1&&" "+mr(Re)+" ",ge){for(S=0;m=$[S++];)for(;ge.indexOf(" "+m+" ")>-1;)ge=ge.replace(" "+m+" "," ");j=mr(ge),Re!==j&&re.setAttribute("class",j)}}return this},toggleClass:function(x,$){var re=typeof x,ge=re==="string"||Array.isArray(x);return typeof $=="boolean"&&ge?$?this.addClass(x):this.removeClass(x):W(x)?this.each(function(Re){F(this).toggleClass(x.call(this,Re,Wr(this),$),$)}):this.each(function(){var Re,m,S,j;if(ge)for(m=0,S=F(this),j=ei(x);Re=j[m++];)S.hasClass(Re)?S.removeClass(Re):S.addClass(Re);else(x===void 0||re==="boolean")&&(Re=Wr(this),Re&&an.set(this,"__className__",Re),this.setAttribute&&this.setAttribute("class",Re||x===!1?"":an.get(this,"__className__")||""))})},hasClass:function(x){var $,re,ge=0;for($=" "+x+" ";re=this[ge++];)if(re.nodeType===1&&(" "+mr(Wr(re))+" ").indexOf($)>-1)return!0;return!1}});var Jo=/\r/g;F.fn.extend({val:function(x){var $,re,ge,Re=this[0];return arguments.length?(ge=W(x),this.each(function(m){var S;this.nodeType===1&&(ge?S=x.call(this,m,F(this).val()):S=x,S==null?S="":typeof S=="number"?S+="":Array.isArray(S)&&(S=F.map(S,function(j){return j==null?"":j+""})),$=F.valHooks[this.type]||F.valHooks[this.nodeName.toLowerCase()],(!$||!("set"in $)||$.set(this,S,"value")===void 0)&&(this.value=S))})):Re?($=F.valHooks[Re.type]||F.valHooks[Re.nodeName.toLowerCase()],$&&"get"in $&&(re=$.get(Re,"value"))!==void 0?re:(re=Re.value,typeof re=="string"?re.replace(Jo,""):re==null?"":re)):void 0}}),F.extend({valHooks:{option:{get:function(x){var $=F.find.attr(x,"value");return $!=null?$:mr(F.text(x))}},select:{get:function(x){var $,re,ge,Re=x.options,m=x.selectedIndex,S=x.type==="select-one",j=S?null:[],Y=S?m+1:Re.length;for(m<0?ge=Y:ge=S?m:0;ge<Y;ge++)if(re=Re[ge],(re.selected||ge===m)&&!re.disabled&&(!re.parentNode.disabled||!oe(re.parentNode,"optgroup"))){if($=F(re).val(),S)return $;j.push($)}return j},set:function(x,$){for(var re,ge,Re=x.options,m=F.makeArray($),S=Re.length;S--;)ge=Re[S],(ge.selected=F.inArray(F.valHooks.option.get(ge),m)>-1)&&(re=!0);return re||(x.selectedIndex=-1),m}}}}),F.each(["radio","checkbox"],function(){F.valHooks[this]={set:function(x,$){if(Array.isArray($))return x.checked=F.inArray(F(x).val(),$)>-1}},R.checkOn||(F.valHooks[this].get=function(x){return x.getAttribute("value")===null?"on":x.value})}),R.focusin="onfocusin"in je;var va=/^(?:focusinfocus|focusoutblur)$/,Es=function(x){x.stopPropagation()};F.extend(F.event,{trigger:function(x,$,re,ge){var Re,m,S,j,Y,he,ye,ke,Ve=[re||ie],Xe=D.call(x,"type")?x.type:x,wt=D.call(x,"namespace")?x.namespace.split("."):[];if(m=ke=S=re=re||ie,!(re.nodeType===3||re.nodeType===8)&&!va.test(Xe+F.event.triggered)&&(Xe.indexOf(".")>-1&&(wt=Xe.split("."),Xe=wt.shift(),wt.sort()),Y=Xe.indexOf(":")<0&&"on"+Xe,x=x[F.expando]?x:new F.Event(Xe,typeof x=="object"&&x),x.isTrigger=ge?2:3,x.namespace=wt.join("."),x.rnamespace=x.namespace?new RegExp("(^|\\.)"+wt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,x.result=void 0,x.target||(x.target=re),$=$==null?[x]:F.makeArray($,[x]),ye=F.event.special[Xe]||{},!(!ge&&ye.trigger&&ye.trigger.apply(re,$)===!1))){if(!ge&&!ye.noBubble&&!G(re)){for(j=ye.delegateType||Xe,va.test(j+Xe)||(m=m.parentNode);m;m=m.parentNode)Ve.push(m),S=m;S===(re.ownerDocument||ie)&&Ve.push(S.defaultView||S.parentWindow||je)}for(Re=0;(m=Ve[Re++])&&!x.isPropagationStopped();)ke=m,x.type=Re>1?j:ye.bindType||Xe,he=(an.get(m,"events")||Object.create(null))[x.type]&&an.get(m,"handle"),he&&he.apply(m,$),he=Y&&m[Y],he&&he.apply&&en(m)&&(x.result=he.apply(m,$),x.result===!1&&x.preventDefault());return x.type=Xe,!ge&&!x.isDefaultPrevented()&&(!ye._default||ye._default.apply(Ve.pop(),$)===!1)&&en(re)&&Y&&W(re[Xe])&&!G(re)&&(S=re[Y],S&&(re[Y]=null),F.event.triggered=Xe,x.isPropagationStopped()&&ke.addEventListener(Xe,Es),re[Xe](),x.isPropagationStopped()&&ke.removeEventListener(Xe,Es),F.event.triggered=void 0,S&&(re[Y]=S)),x.result}},simulate:function(x,$,re){var ge=F.extend(new F.Event,re,{type:x,isSimulated:!0});F.event.trigger(ge,null,$)}}),F.fn.extend({trigger:function(x,$){return this.each(function(){F.event.trigger(x,$,this)})},triggerHandler:function(x,$){var re=this[0];if(re)return F.event.trigger(x,$,re,!0)}}),R.focusin||F.each({focus:"focusin",blur:"focusout"},function(x,$){var re=function(ge){F.event.simulate($,ge.target,F.event.fix(ge))};F.event.special[$]={setup:function(){var ge=this.ownerDocument||this.document||this,Re=an.access(ge,$);Re||ge.addEventListener(x,re,!0),an.access(ge,$,(Re||0)+1)},teardown:function(){var ge=this.ownerDocument||this.document||this,Re=an.access(ge,$)-1;Re?an.access(ge,$,Re):(ge.removeEventListener(x,re,!0),an.remove(ge,$))}}});var $t=je.location,Lo={guid:Date.now()},Oa=/\?/;F.parseXML=function(x){var $,re;if(!x||typeof x!="string")return null;try{$=new je.DOMParser().parseFromString(x,"text/xml")}catch(ge){}return re=$&&$.getElementsByTagName("parsererror")[0],(!$||re)&&F.error("Invalid XML: "+(re?F.map(re.childNodes,function(ge){return ge.textContent}).join(`
`):x)),$};var ea=/\[\]$/,ao=/\r?\n/g,_a=/^(?:submit|button|image|reset|file)$/i,Ls=/^(?:input|select|textarea|keygen)/i;function ta(x,$,re,ge){var Re;if(Array.isArray($))F.each($,function(m,S){re||ea.test(x)?ge(x,S):ta(x+"["+(typeof S=="object"&&S!=null?m:"")+"]",S,re,ge)});else if(!re&&de($)==="object")for(Re in $)ta(x+"["+Re+"]",$[Re],re,ge);else ge(x,$)}F.param=function(x,$){var re,ge=[],Re=function(m,S){var j=W(S)?S():S;ge[ge.length]=encodeURIComponent(m)+"="+encodeURIComponent(j==null?"":j)};if(x==null)return"";if(Array.isArray(x)||x.jquery&&!F.isPlainObject(x))F.each(x,function(){Re(this.name,this.value)});else for(re in x)ta(re,x[re],$,Re);return ge.join("&")},F.fn.extend({serialize:function(){return F.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var x=F.prop(this,"elements");return x?F.makeArray(x):this}).filter(function(){var x=this.type;return this.name&&!F(this).is(":disabled")&&Ls.test(this.nodeName)&&!_a.test(x)&&(this.checked||!vt.test(x))}).map(function(x,$){var re=F(this).val();return re==null?null:Array.isArray(re)?F.map(re,function(ge){return{name:$.name,value:ge.replace(ao,`\r
`)}}):{name:$.name,value:re.replace(ao,`\r
`)}}).get()}});var ya=/%20/g,Ka=/#.*$/,fl=/([?&])_=[^&]*/,Pl=/^(.*?):[ \t]*([^\r\n]*)$/mg,Ga=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ya=/^(?:GET|HEAD)$/,bc=/^\/\//,se={},Ie={},Je="*/".concat("*"),Wt=ie.createElement("a");Wt.href=$t.href;function gn(x){return function($,re){typeof $!="string"&&(re=$,$="*");var ge,Re=0,m=$.toLowerCase().match(mt)||[];if(W(re))for(;ge=m[Re++];)ge[0]==="+"?(ge=ge.slice(1)||"*",(x[ge]=x[ge]||[]).unshift(re)):(x[ge]=x[ge]||[]).push(re)}}function Nn(x,$,re,ge){var Re={},m=x===Ie;function S(j){var Y;return Re[j]=!0,F.each(x[j]||[],function(he,ye){var ke=ye($,re,ge);if(typeof ke=="string"&&!m&&!Re[ke])return $.dataTypes.unshift(ke),S(ke),!1;if(m)return!(Y=ke)}),Y}return S($.dataTypes[0])||!Re["*"]&&S("*")}function $n(x,$){var re,ge,Re=F.ajaxSettings.flatOptions||{};for(re in $)$[re]!==void 0&&((Re[re]?x:ge||(ge={}))[re]=$[re]);return ge&&F.extend(!0,x,ge),x}function Un(x,$,re){for(var ge,Re,m,S,j=x.contents,Y=x.dataTypes;Y[0]==="*";)Y.shift(),ge===void 0&&(ge=x.mimeType||$.getResponseHeader("Content-Type"));if(ge){for(Re in j)if(j[Re]&&j[Re].test(ge)){Y.unshift(Re);break}}if(Y[0]in re)m=Y[0];else{for(Re in re){if(!Y[0]||x.converters[Re+" "+Y[0]]){m=Re;break}S||(S=Re)}m=m||S}if(m)return m!==Y[0]&&Y.unshift(m),re[m]}function Ei(x,$,re,ge){var Re,m,S,j,Y,he={},ye=x.dataTypes.slice();if(ye[1])for(S in x.converters)he[S.toLowerCase()]=x.converters[S];for(m=ye.shift();m;)if(x.responseFields[m]&&(re[x.responseFields[m]]=$),!Y&&ge&&x.dataFilter&&($=x.dataFilter($,x.dataType)),Y=m,m=ye.shift(),m){if(m==="*")m=Y;else if(Y!=="*"&&Y!==m){if(S=he[Y+" "+m]||he["* "+m],!S){for(Re in he)if(j=Re.split(" "),j[1]===m&&(S=he[Y+" "+j[0]]||he["* "+j[0]],S)){S===!0?S=he[Re]:he[Re]!==!0&&(m=j[0],ye.unshift(j[1]));break}}if(S!==!0)if(S&&x.throws)$=S($);else try{$=S($)}catch(ke){return{state:"parsererror",error:S?ke:"No conversion from "+Y+" to "+m}}}}return{state:"success",data:$}}F.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:$t.href,type:"GET",isLocal:Ga.test($t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Je,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":F.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(x,$){return $?$n($n(x,F.ajaxSettings),$):$n(F.ajaxSettings,x)},ajaxPrefilter:gn(se),ajaxTransport:gn(Ie),ajax:function(x,$){typeof x=="object"&&($=x,x=void 0),$=$||{};var re,ge,Re,m,S,j,Y,he,ye,ke,Ve=F.ajaxSetup({},$),Xe=Ve.context||Ve,wt=Ve.context&&(Xe.nodeType||Xe.jquery)?F(Xe):F.event,tn=F.Deferred(),mn=F.Callbacks("once memory"),Xt=Ve.statusCode||{},Ln={},si={},ni="canceled",Gn={readyState:0,getResponseHeader:function(zi){var hr;if(Y){if(!m)for(m={};hr=Pl.exec(Re);)m[hr[1].toLowerCase()+" "]=(m[hr[1].toLowerCase()+" "]||[]).concat(hr[2]);hr=m[zi.toLowerCase()+" "]}return hr==null?null:hr.join(", ")},getAllResponseHeaders:function(){return Y?Re:null},setRequestHeader:function(zi,hr){return Y==null&&(zi=si[zi.toLowerCase()]=si[zi.toLowerCase()]||zi,Ln[zi]=hr),this},overrideMimeType:function(zi){return Y==null&&(Ve.mimeType=zi),this},statusCode:function(zi){var hr;if(zi)if(Y)Gn.always(zi[Gn.status]);else for(hr in zi)Xt[hr]=[Xt[hr],zi[hr]];return this},abort:function(zi){var hr=zi||ni;return re&&re.abort(hr),ur(0,hr),this}};if(tn.promise(Gn),Ve.url=((x||Ve.url||$t.href)+"").replace(bc,$t.protocol+"//"),Ve.type=$.method||$.type||Ve.method||Ve.type,Ve.dataTypes=(Ve.dataType||"*").toLowerCase().match(mt)||[""],Ve.crossDomain==null){j=ie.createElement("a");try{j.href=Ve.url,j.href=j.href,Ve.crossDomain=Wt.protocol+"//"+Wt.host!=j.protocol+"//"+j.host}catch(zi){Ve.crossDomain=!0}}if(Ve.data&&Ve.processData&&typeof Ve.data!="string"&&(Ve.data=F.param(Ve.data,Ve.traditional)),Nn(se,Ve,$,Gn),Y)return Gn;he=F.event&&Ve.global,he&&F.active++==0&&F.event.trigger("ajaxStart"),Ve.type=Ve.type.toUpperCase(),Ve.hasContent=!Ya.test(Ve.type),ge=Ve.url.replace(Ka,""),Ve.hasContent?Ve.data&&Ve.processData&&(Ve.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Ve.data=Ve.data.replace(ya,"+")):(ke=Ve.url.slice(ge.length),Ve.data&&(Ve.processData||typeof Ve.data=="string")&&(ge+=(Oa.test(ge)?"&":"?")+Ve.data,delete Ve.data),Ve.cache===!1&&(ge=ge.replace(fl,"$1"),ke=(Oa.test(ge)?"&":"?")+"_="+Lo.guid+++ke),Ve.url=ge+ke),Ve.ifModified&&(F.lastModified[ge]&&Gn.setRequestHeader("If-Modified-Since",F.lastModified[ge]),F.etag[ge]&&Gn.setRequestHeader("If-None-Match",F.etag[ge])),(Ve.data&&Ve.hasContent&&Ve.contentType!==!1||$.contentType)&&Gn.setRequestHeader("Content-Type",Ve.contentType),Gn.setRequestHeader("Accept",Ve.dataTypes[0]&&Ve.accepts[Ve.dataTypes[0]]?Ve.accepts[Ve.dataTypes[0]]+(Ve.dataTypes[0]!=="*"?", "+Je+"; q=0.01":""):Ve.accepts["*"]);for(ye in Ve.headers)Gn.setRequestHeader(ye,Ve.headers[ye]);if(Ve.beforeSend&&(Ve.beforeSend.call(Xe,Gn,Ve)===!1||Y))return Gn.abort();if(ni="abort",mn.add(Ve.complete),Gn.done(Ve.success),Gn.fail(Ve.error),re=Nn(Ie,Ve,$,Gn),!re)ur(-1,"No Transport");else{if(Gn.readyState=1,he&&wt.trigger("ajaxSend",[Gn,Ve]),Y)return Gn;Ve.async&&Ve.timeout>0&&(S=je.setTimeout(function(){Gn.abort("timeout")},Ve.timeout));try{Y=!1,re.send(Ln,ur)}catch(zi){if(Y)throw zi;ur(-1,zi)}}function ur(zi,hr,ji,ai){var vr,cr,ci,ns,Gs,Xr=hr;Y||(Y=!0,S&&je.clearTimeout(S),re=void 0,Re=ai||"",Gn.readyState=zi>0?4:0,vr=zi>=200&&zi<300||zi===304,ji&&(ns=Un(Ve,Gn,ji)),!vr&&F.inArray("script",Ve.dataTypes)>-1&&F.inArray("json",Ve.dataTypes)<0&&(Ve.converters["text script"]=function(){}),ns=Ei(Ve,ns,Gn,vr),vr?(Ve.ifModified&&(Gs=Gn.getResponseHeader("Last-Modified"),Gs&&(F.lastModified[ge]=Gs),Gs=Gn.getResponseHeader("etag"),Gs&&(F.etag[ge]=Gs)),zi===204||Ve.type==="HEAD"?Xr="nocontent":zi===304?Xr="notmodified":(Xr=ns.state,cr=ns.data,ci=ns.error,vr=!ci)):(ci=Xr,(zi||!Xr)&&(Xr="error",zi<0&&(zi=0))),Gn.status=zi,Gn.statusText=(hr||Xr)+"",vr?tn.resolveWith(Xe,[cr,Xr,Gn]):tn.rejectWith(Xe,[Gn,Xr,ci]),Gn.statusCode(Xt),Xt=void 0,he&&wt.trigger(vr?"ajaxSuccess":"ajaxError",[Gn,Ve,vr?cr:ci]),mn.fireWith(Xe,[Gn,Xr]),he&&(wt.trigger("ajaxComplete",[Gn,Ve]),--F.active||F.event.trigger("ajaxStop")))}return Gn},getJSON:function(x,$,re){return F.get(x,$,re,"json")},getScript:function(x,$){return F.get(x,void 0,$,"script")}}),F.each(["get","post"],function(x,$){F[$]=function(re,ge,Re,m){return W(ge)&&(m=m||Re,Re=ge,ge=void 0),F.ajax(F.extend({url:re,type:$,dataType:m,data:ge,success:Re},F.isPlainObject(re)&&re))}}),F.ajaxPrefilter(function(x){var $;for($ in x.headers)$.toLowerCase()==="content-type"&&(x.contentType=x.headers[$]||"")}),F._evalUrl=function(x,$,re){return F.ajax({url:x,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(ge){F.globalEval(ge,$,re)}})},F.fn.extend({wrapAll:function(x){var $;return this[0]&&(W(x)&&(x=x.call(this[0])),$=F(x,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&$.insertBefore(this[0]),$.map(function(){for(var re=this;re.firstElementChild;)re=re.firstElementChild;return re}).append(this)),this},wrapInner:function(x){return W(x)?this.each(function($){F(this).wrapInner(x.call(this,$))}):this.each(function(){var $=F(this),re=$.contents();re.length?re.wrapAll(x):$.append(x)})},wrap:function(x){var $=W(x);return this.each(function(re){F(this).wrapAll($?x.call(this,re):x)})},unwrap:function(x){return this.parent(x).not("body").each(function(){F(this).replaceWith(this.childNodes)}),this}}),F.expr.pseudos.hidden=function(x){return!F.expr.pseudos.visible(x)},F.expr.pseudos.visible=function(x){return!!(x.offsetWidth||x.offsetHeight||x.getClientRects().length)},F.ajaxSettings.xhr=function(){try{return new je.XMLHttpRequest}catch(x){}};var Ti={0:200,1223:204},Hi=F.ajaxSettings.xhr();R.cors=!!Hi&&"withCredentials"in Hi,R.ajax=Hi=!!Hi,F.ajaxTransport(function(x){var $,re;if(R.cors||Hi&&!x.crossDomain)return{send:function(ge,Re){var m,S=x.xhr();if(S.open(x.type,x.url,x.async,x.username,x.password),x.xhrFields)for(m in x.xhrFields)S[m]=x.xhrFields[m];x.mimeType&&S.overrideMimeType&&S.overrideMimeType(x.mimeType),!x.crossDomain&&!ge["X-Requested-With"]&&(ge["X-Requested-With"]="XMLHttpRequest");for(m in ge)S.setRequestHeader(m,ge[m]);$=function(j){return function(){$&&($=re=S.onload=S.onerror=S.onabort=S.ontimeout=S.onreadystatechange=null,j==="abort"?S.abort():j==="error"?typeof S.status!="number"?Re(0,"error"):Re(S.status,S.statusText):Re(Ti[S.status]||S.status,S.statusText,(S.responseType||"text")!=="text"||typeof S.responseText!="string"?{binary:S.response}:{text:S.responseText},S.getAllResponseHeaders()))}},S.onload=$(),re=S.onerror=S.ontimeout=$("error"),S.onabort!==void 0?S.onabort=re:S.onreadystatechange=function(){S.readyState===4&&je.setTimeout(function(){$&&re()})},$=$("abort");try{S.send(x.hasContent&&x.data||null)}catch(j){if($)throw j}},abort:function(){$&&$()}}}),F.ajaxPrefilter(function(x){x.crossDomain&&(x.contents.script=!1)}),F.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(x){return F.globalEval(x),x}}}),F.ajaxPrefilter("script",function(x){x.cache===void 0&&(x.cache=!1),x.crossDomain&&(x.type="GET")}),F.ajaxTransport("script",function(x){if(x.crossDomain||x.scriptAttrs){var $,re;return{send:function(ge,Re){$=F("<script>").attr(x.scriptAttrs||{}).prop({charset:x.scriptCharset,src:x.url}).on("load error",re=function(m){$.remove(),re=null,m&&Re(m.type==="error"?404:200,m.type)}),ie.head.appendChild($[0])},abort:function(){re&&re()}}}});var Mi=[],xi=/(=)\?(?=&|$)|\?\?/;F.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var x=Mi.pop()||F.expando+"_"+Lo.guid++;return this[x]=!0,x}}),F.ajaxPrefilter("json jsonp",function(x,$,re){var ge,Re,m,S=x.jsonp!==!1&&(xi.test(x.url)?"url":typeof x.data=="string"&&(x.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&xi.test(x.data)&&"data");if(S||x.dataTypes[0]==="jsonp")return ge=x.jsonpCallback=W(x.jsonpCallback)?x.jsonpCallback():x.jsonpCallback,S?x[S]=x[S].replace(xi,"$1"+ge):x.jsonp!==!1&&(x.url+=(Oa.test(x.url)?"&":"?")+x.jsonp+"="+ge),x.converters["script json"]=function(){return m||F.error(ge+" was not called"),m[0]},x.dataTypes[0]="json",Re=je[ge],je[ge]=function(){m=arguments},re.always(function(){Re===void 0?F(je).removeProp(ge):je[ge]=Re,x[ge]&&(x.jsonpCallback=$.jsonpCallback,Mi.push(ge)),m&&W(Re)&&Re(m[0]),m=Re=void 0}),"script"}),R.createHTMLDocument=function(){var x=ie.implementation.createHTMLDocument("").body;return x.innerHTML="<form></form><form></form>",x.childNodes.length===2}(),F.parseHTML=function(x,$,re){if(typeof x!="string")return[];typeof $=="boolean"&&(re=$,$=!1);var ge,Re,m;return $||(R.createHTMLDocument?($=ie.implementation.createHTMLDocument(""),ge=$.createElement("base"),ge.href=ie.location.href,$.head.appendChild(ge)):$=ie),Re=te.exec(x),m=!re&&[],Re?[$.createElement(Re[1])]:(Re=Fe([x],$,m),m&&m.length&&F(m).remove(),F.merge([],Re.childNodes))},F.fn.load=function(x,$,re){var ge,Re,m,S=this,j=x.indexOf(" ");return j>-1&&(ge=mr(x.slice(j)),x=x.slice(0,j)),W($)?(re=$,$=void 0):$&&typeof $=="object"&&(Re="POST"),S.length>0&&F.ajax({url:x,type:Re||"GET",dataType:"html",data:$}).done(function(Y){m=arguments,S.html(ge?F("<div>").append(F.parseHTML(Y)).find(ge):Y)}).always(re&&function(Y,he){S.each(function(){re.apply(this,m||[Y.responseText,he,Y])})}),this},F.expr.pseudos.animated=function(x){return F.grep(F.timers,function($){return x===$.elem}).length},F.offset={setOffset:function(x,$,re){var ge,Re,m,S,j,Y,he,ye=F.css(x,"position"),ke=F(x),Ve={};ye==="static"&&(x.style.position="relative"),j=ke.offset(),m=F.css(x,"top"),Y=F.css(x,"left"),he=(ye==="absolute"||ye==="fixed")&&(m+Y).indexOf("auto")>-1,he?(ge=ke.position(),S=ge.top,Re=ge.left):(S=parseFloat(m)||0,Re=parseFloat(Y)||0),W($)&&($=$.call(x,re,F.extend({},j))),$.top!=null&&(Ve.top=$.top-j.top+S),$.left!=null&&(Ve.left=$.left-j.left+Re),"using"in $?$.using.call(x,Ve):ke.css(Ve)}},F.fn.extend({offset:function(x){if(arguments.length)return x===void 0?this:this.each(function(Re){F.offset.setOffset(this,x,Re)});var $,re,ge=this[0];if(!!ge)return ge.getClientRects().length?($=ge.getBoundingClientRect(),re=ge.ownerDocument.defaultView,{top:$.top+re.pageYOffset,left:$.left+re.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var x,$,re,ge=this[0],Re={top:0,left:0};if(F.css(ge,"position")==="fixed")$=ge.getBoundingClientRect();else{for($=this.offset(),re=ge.ownerDocument,x=ge.offsetParent||re.documentElement;x&&(x===re.body||x===re.documentElement)&&F.css(x,"position")==="static";)x=x.parentNode;x&&x!==ge&&x.nodeType===1&&(Re=F(x).offset(),Re.top+=F.css(x,"borderTopWidth",!0),Re.left+=F.css(x,"borderLeftWidth",!0))}return{top:$.top-Re.top-F.css(ge,"marginTop",!0),left:$.left-Re.left-F.css(ge,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var x=this.offsetParent;x&&F.css(x,"position")==="static";)x=x.offsetParent;return x||kn})}}),F.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(x,$){var re=$==="pageYOffset";F.fn[x]=function(ge){return gt(this,function(Re,m,S){var j;if(G(Re)?j=Re:Re.nodeType===9&&(j=Re.defaultView),S===void 0)return j?j[$]:Re[m];j?j.scrollTo(re?j.pageXOffset:S,re?S:j.pageYOffset):Re[m]=S},x,ge,arguments.length)}}),F.each(["top","left"],function(x,$){F.cssHooks[$]=Cn(R.pixelPosition,function(re,ge){if(ge)return ge=Et(re,$),Ue.test(ge)?F(re).position()[$]+"px":ge})}),F.each({Height:"height",Width:"width"},function(x,$){F.each({padding:"inner"+x,content:$,"":"outer"+x},function(re,ge){F.fn[ge]=function(Re,m){var S=arguments.length&&(re||typeof Re!="boolean"),j=re||(Re===!0||m===!0?"margin":"border");return gt(this,function(Y,he,ye){var ke;return G(Y)?ge.indexOf("outer")===0?Y["inner"+x]:Y.document.documentElement["client"+x]:Y.nodeType===9?(ke=Y.documentElement,Math.max(Y.body["scroll"+x],ke["scroll"+x],Y.body["offset"+x],ke["offset"+x],ke["client"+x])):ye===void 0?F.css(Y,he,j):F.style(Y,he,ye,j)},$,S?Re:void 0,S)}})}),F.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(x,$){F.fn[$]=function(re){return this.on($,re)}}),F.fn.extend({bind:function(x,$,re){return this.on(x,null,$,re)},unbind:function(x,$){return this.off(x,null,$)},delegate:function(x,$,re,ge){return this.on($,x,re,ge)},undelegate:function(x,$,re){return arguments.length===1?this.off(x,"**"):this.off($,x||"**",re)},hover:function(x,$){return this.mouseenter(x).mouseleave($||x)}}),F.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(x,$){F.fn[$]=function(re,ge){return arguments.length>0?this.on($,null,re,ge):this.trigger($)}});var Ir=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;F.proxy=function(x,$){var re,ge,Re;if(typeof $=="string"&&(re=x[$],$=x,x=re),!!W(x))return ge=g.call(arguments,2),Re=function(){return x.apply($||this,ge.concat(g.call(arguments)))},Re.guid=x.guid=x.guid||F.guid++,Re},F.holdReady=function(x){x?F.readyWait++:F.ready(!0)},F.isArray=Array.isArray,F.parseJSON=JSON.parse,F.nodeName=oe,F.isFunction=W,F.isWindow=G,F.camelCase=zt,F.type=de,F.now=Date.now,F.isNumeric=function(x){var $=F.type(x);return($==="number"||$==="string")&&!isNaN(x-parseFloat(x))},F.trim=function(x){return x==null?"":(x+"").replace(Ir,"")},fn=[],In=function(){return F}.apply(bi,fn),In!==void 0&&(pr.exports=In);var xr=je.jQuery,Or=je.$;return F.noConflict=function(x){return je.$===F&&(je.$=Or),x&&je.jQuery===F&&(je.jQuery=xr),F},typeof w=="undefined"&&(je.jQuery=je.$=F),F})},89392:function(pr,bi,fn){pr=fn.nmd(pr);var In;/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(){var je,w="4.17.21",Z=200,f="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",g="Expected a function",y="Invalid `variable` option passed into `_.template`",A="__lodash_hash_undefined__",M=500,E="__lodash_placeholder__",C=1,D=2,L=4,O=1,R=2,W=1,G=2,ie=4,q=8,we=16,de=32,fe=64,F=128,be=256,pe=512,ae=30,Q="...",I=800,oe=16,te=1,ue=2,De=3,ve=1/0,Ne=9007199254740991,Ge=17976931348623157e292,$e=0/0,Be=4294967295,mt=Be-1,Ot=Be>>>1,kt=[["ary",F],["bind",W],["bindKey",G],["curry",q],["curryRight",we],["flip",pe],["partial",de],["partialRight",fe],["rearg",be]],Tt="[object Arguments]",Jt="[object Array]",Mn="[object AsyncFunction]",Yt="[object Boolean]",pn="[object Date]",gt="[object DOMException]",_t="[object Error]",Gt="[object Function]",Ft="[object GeneratorFunction]",zt="[object Map]",en="[object Number]",Bt="[object Null]",an="[object Object]",Di="[object Promise]",_i="[object Proxy]",wi="[object RegExp]",On="[object Set]",Pt="[object String]",et="[object Symbol]",Ci="[object Undefined]",li="[object WeakMap]",kn="[object WeakSet]",Ae="[object ArrayBuffer]",le="[object DataView]",ne="[object Float32Array]",B="[object Float64Array]",Me="[object Int8Array]",Ce="[object Int16Array]",lt="[object Int32Array]",vt="[object Uint8Array]",ft="[object Uint8ClampedArray]",ot="[object Uint16Array]",yt="[object Uint32Array]",Ut=/\b__p \+= '';/g,Fn=/\b(__p \+=) '' \+/g,Qn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Fe=/&(?:amp|lt|gt|quot|#39);/g,ct=/[&<>"']/g,ut=RegExp(Fe.source),jt=RegExp(ct.source),qt=/<%-([\s\S]+?)%>/g,Dt=/<%([\s\S]+?)%>/g,hn=/<%=([\s\S]+?)%>/g,Rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nn=/^\w*$/,ln=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_e=/[\\^$.*+?()[\]{}|]/g,V=RegExp(_e.source),H=/^\s+/,T=/\s/,z=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,J=/\{\n\/\* \[wrapped with (.+)\] \*/,Pe=/,? & /,Oe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ue=/[()=,{}\[\]\/\s]/,qe=/\\(\\)?/g,Ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,Et=/^[-+]0x[0-9a-f]+$/i,Cn=/^0b[01]+$/i,st=/^\[object .+?Constructor\]$/,Zt=/^0o[0-7]+$/i,zn=/^(?:0|[1-9]\d*)$/,Lt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,En=/($^)/,qn=/['\n\r\u2028\u2029\\]/g,ui="\\ud800-\\udfff",Ai="\\u0300-\\u036f",or="\\ufe20-\\ufe2f",Hn="\\u20d0-\\u20ff",Jn=Ai+or+Hn,Ii="\\u2700-\\u27bf",ti="a-z\\xdf-\\xf6\\xf8-\\xff",Ht="\\xac\\xb1\\xd7\\xf7",Bn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Xn="\\u2000-\\u206f",Kn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Bi="A-Z\\xc0-\\xd6\\xd8-\\xde",br="\\ufe0e\\ufe0f",Vi=Ht+Bn+Xn+Kn,lr="['\u2019]",Qi="["+ui+"]",gi="["+Vi+"]",Rn="["+Jn+"]",vs="\\d+",Ss="["+Ii+"]",Si="["+ti+"]",Lr="[^"+ui+Vi+vs+Ii+ti+Bi+"]",mr="\\ud83c[\\udffb-\\udfff]",Wr="(?:"+Rn+"|"+mr+")",ei="[^"+ui+"]",Jo="(?:\\ud83c[\\udde6-\\uddff]){2}",va="[\\ud800-\\udbff][\\udc00-\\udfff]",Es="["+Bi+"]",$t="\\u200d",Lo="(?:"+Si+"|"+Lr+")",Oa="(?:"+Es+"|"+Lr+")",ea="(?:"+lr+"(?:d|ll|m|re|s|t|ve))?",ao="(?:"+lr+"(?:D|LL|M|RE|S|T|VE))?",_a=Wr+"?",Ls="["+br+"]?",ta="(?:"+$t+"(?:"+[ei,Jo,va].join("|")+")"+Ls+_a+")*",ya="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ka="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",fl=Ls+_a+ta,Pl="(?:"+[Ss,Jo,va].join("|")+")"+fl,Ga="(?:"+[ei+Rn+"?",Rn,Jo,va,Qi].join("|")+")",Ya=RegExp(lr,"g"),bc=RegExp(Rn,"g"),se=RegExp(mr+"(?="+mr+")|"+Ga+fl,"g"),Ie=RegExp([Es+"?"+Si+"+"+ea+"(?="+[gi,Es,"$"].join("|")+")",Oa+"+"+ao+"(?="+[gi,Es+Lo,"$"].join("|")+")",Es+"?"+Lo+"+"+ea,Es+"+"+ao,Ka,ya,vs,Pl].join("|"),"g"),Je=RegExp("["+$t+ui+Jn+br+"]"),Wt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,gn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Nn=-1,$n={};$n[ne]=$n[B]=$n[Me]=$n[Ce]=$n[lt]=$n[vt]=$n[ft]=$n[ot]=$n[yt]=!0,$n[Tt]=$n[Jt]=$n[Ae]=$n[Yt]=$n[le]=$n[pn]=$n[_t]=$n[Gt]=$n[zt]=$n[en]=$n[an]=$n[wi]=$n[On]=$n[Pt]=$n[li]=!1;var Un={};Un[Tt]=Un[Jt]=Un[Ae]=Un[le]=Un[Yt]=Un[pn]=Un[ne]=Un[B]=Un[Me]=Un[Ce]=Un[lt]=Un[zt]=Un[en]=Un[an]=Un[wi]=Un[On]=Un[Pt]=Un[et]=Un[vt]=Un[ft]=Un[ot]=Un[yt]=!0,Un[_t]=Un[Gt]=Un[li]=!1;var Ei={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Ti={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hi={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Mi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xi=parseFloat,Ir=parseInt,xr=typeof fn.g=="object"&&fn.g&&fn.g.Object===Object&&fn.g,Or=typeof self=="object"&&self&&self.Object===Object&&self,x=xr||Or||Function("return this")(),$=bi&&!bi.nodeType&&bi,re=$&&!0&&pr&&!pr.nodeType&&pr,ge=re&&re.exports===$,Re=ge&&xr.process,m=function(){try{var Qt=re&&re.require&&re.require("util").types;return Qt||Re&&Re.binding&&Re.binding("util")}catch(Pn){}}(),S=m&&m.isArrayBuffer,j=m&&m.isDate,Y=m&&m.isMap,he=m&&m.isRegExp,ye=m&&m.isSet,ke=m&&m.isTypedArray;function Ve(Qt,Pn,xn){switch(xn.length){case 0:return Qt.call(Pn);case 1:return Qt.call(Pn,xn[0]);case 2:return Qt.call(Pn,xn[0],xn[1]);case 3:return Qt.call(Pn,xn[0],xn[1],xn[2])}return Qt.apply(Pn,xn)}function Xe(Qt,Pn,xn,pi){for(var Wi=-1,At=Qt==null?0:Qt.length;++Wi<At;){var bn=Qt[Wi];Pn(pi,bn,xn(bn),Qt)}return pi}function wt(Qt,Pn){for(var xn=-1,pi=Qt==null?0:Qt.length;++xn<pi&&Pn(Qt[xn],xn,Qt)!==!1;);return Qt}function tn(Qt,Pn){for(var xn=Qt==null?0:Qt.length;xn--&&Pn(Qt[xn],xn,Qt)!==!1;);return Qt}function mn(Qt,Pn){for(var xn=-1,pi=Qt==null?0:Qt.length;++xn<pi;)if(!Pn(Qt[xn],xn,Qt))return!1;return!0}function Xt(Qt,Pn){for(var xn=-1,pi=Qt==null?0:Qt.length,Wi=0,At=[];++xn<pi;){var bn=Qt[xn];Pn(bn,xn,Qt)&&(At[Wi++]=bn)}return At}function Ln(Qt,Pn){var xn=Qt==null?0:Qt.length;return!!xn&&ns(Qt,Pn,0)>-1}function si(Qt,Pn,xn){for(var pi=-1,Wi=Qt==null?0:Qt.length;++pi<Wi;)if(xn(Pn,Qt[pi]))return!0;return!1}function ni(Qt,Pn){for(var xn=-1,pi=Qt==null?0:Qt.length,Wi=Array(pi);++xn<pi;)Wi[xn]=Pn(Qt[xn],xn,Qt);return Wi}function Gn(Qt,Pn){for(var xn=-1,pi=Pn.length,Wi=Qt.length;++xn<pi;)Qt[Wi+xn]=Pn[xn];return Qt}function ur(Qt,Pn,xn,pi){var Wi=-1,At=Qt==null?0:Qt.length;for(pi&&At&&(xn=Qt[++Wi]);++Wi<At;)xn=Pn(xn,Qt[Wi],Wi,Qt);return xn}function zi(Qt,Pn,xn,pi){var Wi=Qt==null?0:Qt.length;for(pi&&Wi&&(xn=Qt[--Wi]);Wi--;)xn=Pn(xn,Qt[Wi],Wi,Qt);return xn}function hr(Qt,Pn){for(var xn=-1,pi=Qt==null?0:Qt.length;++xn<pi;)if(Pn(Qt[xn],xn,Qt))return!0;return!1}var ji=xo("length");function ai(Qt){return Qt.split("")}function vr(Qt){return Qt.match(Oe)||[]}function cr(Qt,Pn,xn){var pi;return xn(Qt,function(Wi,At,bn){if(Pn(Wi,At,bn))return pi=At,!1}),pi}function ci(Qt,Pn,xn,pi){for(var Wi=Qt.length,At=xn+(pi?1:-1);pi?At--:++At<Wi;)if(Pn(Qt[At],At,Qt))return At;return-1}function ns(Qt,Pn,xn){return Pn===Pn?No(Qt,Pn,xn):ci(Qt,Xr,xn)}function Gs(Qt,Pn,xn,pi){for(var Wi=xn-1,At=Qt.length;++Wi<At;)if(pi(Qt[Wi],Pn))return Wi;return-1}function Xr(Qt){return Qt!==Qt}function Hs(Qt,Pn){var xn=Qt==null?0:Qt.length;return xn?Ts(Qt,Pn)/xn:$e}function xo(Qt){return function(Pn){return Pn==null?je:Pn[Qt]}}function Vr(Qt){return function(Pn){return Qt==null?je:Qt[Pn]}}function Do(Qt,Pn,xn,pi,Wi){return Wi(Qt,function(At,bn,sn){xn=pi?(pi=!1,At):Pn(xn,At,bn,sn)}),xn}function ir(Qt,Pn){var xn=Qt.length;for(Qt.sort(Pn);xn--;)Qt[xn]=Qt[xn].value;return Qt}function Ts(Qt,Pn){for(var xn,pi=-1,Wi=Qt.length;++pi<Wi;){var At=Pn(Qt[pi]);At!==je&&(xn=xn===je?At:xn+At)}return xn}function ba(Qt,Pn){for(var xn=-1,pi=Array(Qt);++xn<Qt;)pi[xn]=Pn(xn);return pi}function dn(Qt,Pn){return ni(Pn,function(xn){return[xn,Qt[xn]]})}function Mt(Qt){return Qt&&Qt.slice(0,qs(Qt)+1).replace(H,"")}function oi(Qt){return function(Pn){return Qt(Pn)}}function lo(Qt,Pn){return ni(Pn,function(xn){return Qt[xn]})}function na(Qt,Pn){return Qt.has(Pn)}function gl(Qt,Pn){for(var xn=-1,pi=Qt.length;++xn<pi&&ns(Pn,Qt[xn],0)>-1;);return xn}function au(Qt,Pn){for(var xn=Qt.length;xn--&&ns(Pn,Qt[xn],0)>-1;);return xn}function Ms(Qt,Pn){for(var xn=Qt.length,pi=0;xn--;)Qt[xn]===Pn&&++pi;return pi}var Za=Vr(Ei),Xa=Vr(Ti);function Hu(Qt){return"\\"+Mi[Qt]}function zu(Qt,Pn){return Qt==null?je:Qt[Pn]}function Bo(Qt){return Je.test(Qt)}function Fl(Qt){return Wt.test(Qt)}function lu(Qt){for(var Pn,xn=[];!(Pn=Qt.next()).done;)xn.push(Pn.value);return xn}function Io(Qt){var Pn=-1,xn=Array(Qt.size);return Qt.forEach(function(pi,Wi){xn[++Pn]=[Wi,pi]}),xn}function Wo(Qt,Pn){return function(xn){return Qt(Pn(xn))}}function _s(Qt,Pn){for(var xn=-1,pi=Qt.length,Wi=0,At=[];++xn<pi;){var bn=Qt[xn];(bn===Pn||bn===E)&&(Qt[xn]=E,At[Wi++]=xn)}return At}function pl(Qt){var Pn=-1,xn=Array(Qt.size);return Qt.forEach(function(pi){xn[++Pn]=pi}),xn}function Bl(Qt){var Pn=-1,xn=Array(Qt.size);return Qt.forEach(function(pi){xn[++Pn]=[pi,pi]}),xn}function No(Qt,Pn,xn){for(var pi=xn-1,Wi=Qt.length;++pi<Wi;)if(Qt[pi]===Pn)return pi;return-1}function _r(Qt,Pn,xn){for(var pi=xn+1;pi--;)if(Qt[pi]===Pn)return pi;return pi}function xs(Qt){return Bo(Qt)?Hr(Qt):ji(Qt)}function Kr(Qt){return Bo(Qt)?ia(Qt):ai(Qt)}function qs(Qt){for(var Pn=Qt.length;Pn--&&T.test(Qt.charAt(Pn)););return Pn}var uu=Vr(Hi);function Hr(Qt){for(var Pn=se.lastIndex=0;se.test(Qt);)++Pn;return Pn}function ia(Qt){return Qt.match(se)||[]}function as(Qt){return Qt.match(Ie)||[]}var Qs=function Qt(Pn){Pn=Pn==null?x:uo.defaults(x.Object(),Pn,uo.pick(x,gn));var xn=Pn.Array,pi=Pn.Date,Wi=Pn.Error,At=Pn.Function,bn=Pn.Math,sn=Pn.Object,fi=Pn.RegExp,Ji=Pn.String,Ke=Pn.TypeError,bt=xn.prototype,xt=At.prototype,Dn=sn.prototype,on=Pn["__core-js_shared__"],Te=xt.toString,Ye=Dn.hasOwnProperty,ht=0,Vt=function(){var d=/[^.]+$/.exec(on&&on.keys&&on.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),It=Dn.toString,cn=Te.call(sn),rn=x._,Vn=fi("^"+Te.call(Ye).replace(_e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zn=ge?Pn.Buffer:je,jn=Pn.Symbol,ri=Pn.Uint8Array,yi=Zn?Zn.allocUnsafe:je,Ui=Wo(sn.getPrototypeOf,sn),Oi=sn.create,Ni=Dn.propertyIsEnumerable,Dr=bt.splice,zr=jn?jn.isConcatSpreadable:je,Ds=jn?jn.iterator:je,kr=jn?jn.toStringTag:je,ml=function(){try{var d=Ll(sn,"defineProperty");return d({},"",{}),d}catch(b){}}(),Wl=Pn.clearTimeout!==x.clearTimeout&&Pn.clearTimeout,Vo=pi&&pi.now!==x.Date.now&&pi.now,$h=Pn.setTimeout!==x.setTimeout&&Pn.setTimeout,Vl=bn.ceil,jr=bn.floor,Kh=sn.getOwnPropertySymbols,Xc=Zn?Zn.isBuffer:je,Am=Pn.isFinite,qc=bt.join,ra=Wo(sn.keys,sn),cs=bn.max,Ho=bn.min,Rm=pi.now,Pm=Pn.parseInt,z0=bn.random,Js=bt.reverse,Ys=Ll(Pn,"DataView"),Gh=Ll(Pn,"Map"),wc=Ll(Pn,"Promise"),cu=Ll(Pn,"Set"),rf=Ll(Pn,"WeakMap"),sa=Ll(sn,"create"),qa=rf&&new rf,ys={},Uu=Ql(Ys),Qc=Ql(Gh),Cc=Ql(wc),Ar=Ql(cu),Jc=Ql(rf),Yh=jn?jn.prototype:je,Zh=Yh?Yh.valueOf:je,Fm=Yh?Yh.toString:je;function tt(d){if(Ps(d)&&!dr(d)&&!(d instanceof yn)){if(d instanceof zo)return d;if(Ye.call(d,"__wrapped__"))return xf(d)}return new zo(d)}var co=function(){function d(){}return function(b){if(!rs(b))return{};if(Oi)return Oi(b);d.prototype=b;var U=new d;return d.prototype=je,U}}();function ju(){}function zo(d,b){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=je}tt.templateSettings={escape:qt,evaluate:Dt,interpolate:hn,variable:"",imports:{_:tt}},tt.prototype=ju.prototype,tt.prototype.constructor=tt,zo.prototype=co(ju.prototype),zo.prototype.constructor=zo;function yn(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Be,this.__views__=[]}function nt(){var d=new yn(this.__wrapped__);return d.__actions__=Uo(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Uo(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Uo(this.__views__),d}function eh(){if(this.__filtered__){var d=new yn(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function eo(){var d=this.__wrapped__.value(),b=this.__dir__,U=dr(d),me=b<0,He=U?d.length:0,c=Zl(0,He,this.__views__),p=c.start,k=c.end,X=k-p,xe=me?k:p-1,We=this.__iteratees__,it=We.length,pt=0,Nt=Ho(X,this.__takeCount__);if(!U||!me&&He==X&&Nt==X)return ho(d,this.__actions__);var vn=[];e:for(;X--&&pt<Nt;){xe+=b;for(var wn=-1,Sn=d[xe];++wn<it;){var Yn=We[wn],ii=Yn.iteratee,ki=Yn.type,Gi=ii(Sn);if(ki==ue)Sn=Gi;else if(!Gi){if(ki==te)continue e;break e}}vn[pt++]=Sn}return vn}yn.prototype=co(ju.prototype),yn.prototype.constructor=yn;function To(d){var b=-1,U=d==null?0:d.length;for(this.clear();++b<U;){var me=d[b];this.set(me[0],me[1])}}function Nr(){this.__data__=sa?sa(null):{},this.size=0}function nb(d){var b=this.has(d)&&delete this.__data__[d];return this.size-=b?1:0,b}function Bm(d){var b=this.__data__;if(sa){var U=b[d];return U===A?je:U}return Ye.call(b,d)?b[d]:je}function U0(d){var b=this.__data__;return sa?b[d]!==je:Ye.call(b,d)}function hu(d,b){var U=this.__data__;return this.size+=this.has(d)?0:1,U[d]=sa&&b===je?A:b,this}To.prototype.clear=Nr,To.prototype.delete=nb,To.prototype.get=Bm,To.prototype.has=U0,To.prototype.set=hu;function du(d){var b=-1,U=d==null?0:d.length;for(this.clear();++b<U;){var me=d[b];this.set(me[0],me[1])}}function Wm(){this.__data__=[],this.size=0}function Hl(d){var b=this.__data__,U=Mo(b,d);if(U<0)return!1;var me=b.length-1;return U==me?b.pop():Dr.call(b,U,1),--this.size,!0}function Tg(d){var b=this.__data__,U=Mo(b,d);return U<0?je:b[U][1]}function j0(d){return Mo(this.__data__,d)>-1}function fu(d,b){var U=this.__data__,me=Mo(U,d);return me<0?(++this.size,U.push([d,b])):U[me][1]=b,this}du.prototype.clear=Wm,du.prototype.delete=Hl,du.prototype.get=Tg,du.prototype.has=j0,du.prototype.set=fu;function gu(d){var b=-1,U=d==null?0:d.length;for(this.clear();++b<U;){var me=d[b];this.set(me[0],me[1])}}function Mg(){this.size=0,this.__data__={hash:new To,map:new(Gh||du),string:new To}}function Vm(d){var b=dh(this,d).delete(d);return this.size-=b?1:0,b}function Hm(d){return dh(this,d).get(d)}function is(d){return dh(this,d).has(d)}function to(d,b){var U=dh(this,d),me=U.size;return U.set(d,b),this.size+=U.size==me?0:1,this}gu.prototype.clear=Mg,gu.prototype.delete=Vm,gu.prototype.get=Hm,gu.prototype.has=is,gu.prototype.set=to;function Sc(d){var b=-1,U=d==null?0:d.length;for(this.__data__=new gu;++b<U;)this.add(d[b])}function ib(d){return this.__data__.set(d,A),this}function vl(d){return this.__data__.has(d)}Sc.prototype.add=Sc.prototype.push=ib,Sc.prototype.has=vl;function no(d){var b=this.__data__=new du(d);this.size=b.size}function Og(){this.__data__=new du,this.size=0}function pu(d){var b=this.__data__,U=b.delete(d);return this.size=b.size,U}function $0(d){return this.__data__.get(d)}function kg(d){return this.__data__.has(d)}function io(d,b){var U=this.__data__;if(U instanceof du){var me=U.__data__;if(!Gh||me.length<Z-1)return me.push([d,b]),this.size=++U.size,this;U=this.__data__=new gu(me)}return U.set(d,b),this.size=U.size,this}no.prototype.clear=Og,no.prototype.delete=pu,no.prototype.get=$0,no.prototype.has=kg,no.prototype.set=io;function Ag(d,b){var U=dr(d),me=!U&&Pc(d),He=!U&&!me&&er(d),c=!U&&!me&&!He&&ac(d),p=U||me||He||c,k=p?ba(d.length,Ji):[],X=k.length;for(var xe in d)(b||Ye.call(d,xe))&&!(p&&(xe=="length"||He&&(xe=="offset"||xe=="parent")||c&&(xe=="buffer"||xe=="byteLength"||xe=="byteOffset")||Dl(xe,X)))&&k.push(xe);return k}function Rg(d){var b=d.length;return b?d[wl(0,b-1)]:je}function zm(d,b){return ql(Uo(d),$u(b,0,d.length))}function Pg(d){return ql(Uo(d))}function Ec(d,b,U){(U!==je&&!Wa(d[b],U)||U===je&&!(b in d))&&wa(d,b,U)}function _l(d,b,U){var me=d[b];(!(Ye.call(d,b)&&Wa(me,U))||U===je&&!(b in d))&&wa(d,b,U)}function Mo(d,b){for(var U=d.length;U--;)if(Wa(d[U][0],b))return U;return-1}function Fg(d,b,U,me){return Os(d,function(He,c,p){b(me,He,U(He),p)}),me}function Bg(d,b){return d&&Cl(b,_o(b),d)}function Wg(d,b){return d&&Cl(b,la(b),d)}function wa(d,b,U){b=="__proto__"&&ml?ml(d,b,{configurable:!0,enumerable:!0,value:U,writable:!0}):d[b]=U}function Lc(d,b){for(var U=-1,me=b.length,He=xn(me),c=d==null;++U<me;)He[U]=c?je:Mv(d,b[U]);return He}function $u(d,b,U){return d===d&&(U!==je&&(d=d<=U?d:U),b!==je&&(d=d>=b?d:b)),d}function hi(d,b,U,me,He,c){var p,k=b&C,X=b&D,xe=b&L;if(U&&(p=He?U(d,me,He,c):U(d)),p!==je)return p;if(!rs(d))return d;var We=dr(d);if(We){if(p=X0(d),!k)return Uo(d,p)}else{var it=Rr(d),pt=it==Gt||it==Ft;if(er(d))return yf(d,k);if(it==an||it==Tt||pt&&!He){if(p=X||pt?{}:As(d),!k)return X?sd(d,Wg(p,d)):Xg(d,Bg(p,d))}else{if(!Un[it])return He?d:{};p=tp(d,it,k)}}c||(c=new no);var Nt=c.get(d);if(Nt)return Nt;c.set(d,p),Fc(d)?d.forEach(function(Sn){p.add(hi(Sn,b,U,Sn,d,c))}):aa(d)&&d.forEach(function(Sn,Yn){p.set(Yn,hi(Sn,b,U,Yn,d,c))});var vn=xe?X?Sa:Ca:X?la:_o,wn=We?je:vn(d);return wt(wn||d,function(Sn,Yn){wn&&(Yn=Sn,Sn=d[Yn]),_l(p,Yn,hi(Sn,b,U,Yn,d,c))}),p}function Gr(d){var b=_o(d);return function(U){return zl(U,d,b)}}function zl(d,b,U){var me=U.length;if(d==null)return!me;for(d=sn(d);me--;){var He=U[me],c=b[He],p=d[He];if(p===je&&!(He in d)||!c(p))return!1}return!0}function sf(d,b,U){if(typeof d!="function")throw new Ke(g);return Ju(function(){d.apply(je,U)},b)}function yl(d,b,U,me){var He=-1,c=Ln,p=!0,k=d.length,X=[],xe=b.length;if(!k)return X;U&&(b=ni(b,oi(U))),me?(c=si,p=!1):b.length>=Z&&(c=na,p=!1,b=new Sc(b));e:for(;++He<k;){var We=d[He],it=U==null?We:U(We);if(We=me||We!==0?We:0,p&&it===it){for(var pt=xe;pt--;)if(b[pt]===it)continue e;X.push(We)}else c(b,it,me)||X.push(We)}return X}var Os=Us(bl),mi=Us(Qh,!0);function Xh(d,b){var U=!0;return Os(d,function(me,He,c){return U=!!b(me,He,c),U}),U}function qh(d,b,U){for(var me=-1,He=d.length;++me<He;){var c=d[me],p=b(c);if(p!=null&&(k===je?p===p&&!gs(p):U(p,k)))var k=p,X=c}return X}function mu(d,b,U,me){var He=d.length;for(U=fr(U),U<0&&(U=-U>He?0:He+U),me=me===je||me>He?He:fr(me),me<0&&(me+=He),me=U>me?0:Yf(me);U<me;)d[U++]=b;return d}function Ul(d,b){var U=[];return Os(d,function(me,He,c){b(me,He,c)&&U.push(me)}),U}function vi(d,b,U,me,He){var c=-1,p=d.length;for(U||(U=qu),He||(He=[]);++c<p;){var k=d[c];b>0&&U(k)?b>1?vi(k,b-1,U,me,He):Gn(He,k):me||(He[He.length]=k)}return He}var of=tl(),th=tl(!0);function bl(d,b){return d&&of(d,b,_o)}function Qh(d,b){return d&&th(d,b,_o)}function zs(d,b){return Xt(b,function(U){return Nl(d[U])})}function vu(d,b){b=el(b,d);for(var U=0,me=b.length;d!=null&&U<me;)d=d[$o(b[U++])];return U&&U==me?d:je}function xc(d,b,U){var me=b(d);return dr(d)?me:Gn(me,U(d))}function ds(d){return d==null?d===je?Ci:Bt:kr&&kr in sn(d)?xl(d):qm(d)}function jl(d,b){return d>b}function af(d,b){return d!=null&&Ye.call(d,b)}function Dc(d,b){return d!=null&&b in sn(d)}function Um(d,b,U){return d>=Ho(b,U)&&d<cs(b,U)}function fs(d,b,U){for(var me=U?si:Ln,He=d[0].length,c=d.length,p=c,k=xn(c),X=Infinity,xe=[];p--;){var We=d[p];p&&b&&(We=ni(We,oi(b))),X=Ho(We.length,X),k[p]=!U&&(b||He>=120&&We.length>=120)?new Sc(p&&We):je}We=d[0];var it=-1,pt=k[0];e:for(;++it<He&&xe.length<X;){var Nt=We[it],vn=b?b(Nt):Nt;if(Nt=U||Nt!==0?Nt:0,!(pt?na(pt,vn):me(xe,vn,U))){for(p=c;--p;){var wn=k[p];if(!(wn?na(wn,vn):me(d[p],vn,U)))continue e}pt&&pt.push(vn),xe.push(Nt)}}return xe}function Vg(d,b,U,me){return bl(d,function(He,c,p){b(me,U(He),c,p)}),me}function $l(d,b,U){b=el(b,d),d=Qm(d,b);var me=d==null?d:d[$o(il(b))];return me==null?je:Ve(me,d,U)}function K0(d){return Ps(d)&&ds(d)==Tt}function Hg(d){return Ps(d)&&ds(d)==Ae}function lf(d){return Ps(d)&&ds(d)==pn}function Jh(d,b,U,me,He){return d===b?!0:d==null||b==null||!Ps(d)&&!Ps(b)?d!==d&&b!==b:uf(d,b,U,me,Jh,He)}function uf(d,b,U,me,He,c){var p=dr(d),k=dr(b),X=p?Jt:Rr(d),xe=k?Jt:Rr(b);X=X==Tt?an:X,xe=xe==Tt?an:xe;var We=X==an,it=xe==an,pt=X==xe;if(pt&&er(d)){if(!er(b))return!1;p=!0,We=!1}if(pt&&!We)return c||(c=new no),p||ac(d)?oa(d,b,U,me,He,c):Fa(d,b,X,U,me,He,c);if(!(U&O)){var Nt=We&&Ye.call(d,"__wrapped__"),vn=it&&Ye.call(b,"__wrapped__");if(Nt||vn){var wn=Nt?d.value():d,Sn=vn?b.value():b;return c||(c=new no),He(wn,Sn,U,me,c)}}return pt?(c||(c=new no),ep(d,b,U,me,He,c)):!1}function zg(d){return Ps(d)&&Rr(d)==zt}function Ug(d,b,U,me){var He=U.length,c=He,p=!me;if(d==null)return!c;for(d=sn(d);He--;){var k=U[He];if(p&&k[2]?k[1]!==d[k[0]]:!(k[0]in d))return!1}for(;++He<c;){k=U[He];var X=k[0],xe=d[X],We=k[1];if(p&&k[2]){if(xe===je&&!(X in d))return!1}else{var it=new no;if(me)var pt=me(xe,We,X,d,b,it);if(!(pt===je?Jh(We,xe,O|R,me,it):pt))return!1}}return!0}function cf(d){if(!rs(d)||Cu(d))return!1;var b=Nl(d)?Vn:st;return b.test(Ql(d))}function Ku(d){return Ps(d)&&ds(d)==wi}function ka(d){return Ps(d)&&Rr(d)==On}function Oo(d){return Ps(d)&&$f(d.length)&&!!$n[ds(d)]}function _u(d){return typeof d=="function"?d:d==null?wo:typeof d=="object"?dr(d)?Qa(d[0],d[1]):yu(d):sg(d)}function nh(d){if(!fh(d))return ra(d);var b=[];for(var U in sn(d))Ye.call(d,U)&&U!="constructor"&&b.push(U);return b}function jg(d){if(!rs(d))return fd(d);var b=fh(d),U=[];for(var me in d)me=="constructor"&&(b||!Ye.call(d,me))||U.push(me);return U}function hf(d,b){return d<b}function df(d,b){var U=-1,me=Da(d)?xn(d.length):[];return Os(d,function(He,c,p){me[++U]=b(He,c,p)}),me}function yu(d){var b=Oc(d);return b.length==1&&b[0][2]?Il(b[0][0],b[0][1]):function(U){return U===d||Ug(U,d,b)}}function Qa(d,b){return dd(d)&&Ef(b)?Il($o(d),b):function(U){var me=Mv(U,d);return me===je&&me===b?Qf(U,d):Jh(b,me,O|R)}}function ed(d,b,U,me,He){d!==b&&of(b,function(c,p){if(He||(He=new no),rs(c))Ic(d,b,p,U,ed,me,He);else{var k=me?me(Qu(d,p),c,p+"",d,b,He):je;k===je&&(k=c),Ec(d,p,k)}},la)}function Ic(d,b,U,me,He,c,p){var k=Qu(d,U),X=Qu(b,U),xe=p.get(X);if(xe){Ec(d,U,xe);return}var We=c?c(k,X,U+"",d,b,p):je,it=We===je;if(it){var pt=dr(X),Nt=!pt&&er(X),vn=!pt&&!Nt&&ac(X);We=X,pt||Nt||vn?dr(k)?We=k:js(k)?We=Uo(k):Nt?(it=!1,We=yf(X,!0)):vn?(it=!1,We=Mc(X,!0)):We=[]:yh(X)||Pc(X)?(We=k,Pc(k)?We=Eh(k):(!rs(k)||Nl(k))&&(We=As(X))):it=!1}it&&(p.set(X,We),He(We,X,me,c,p),p.delete(X)),Ec(d,U,We)}function ff(d,b){var U=d.length;if(!!U)return b+=b<0?U:0,Dl(b,U)?d[b]:je}function td(d,b,U){b.length?b=ni(b,function(c){return dr(c)?function(p){return vu(p,c.length===1?c[0]:c)}:c}):b=[wo];var me=-1;b=ni(b,oi(Zi()));var He=df(d,function(c,p,k){var X=ni(b,function(xe){return xe(c)});return{criteria:X,index:++me,value:c}});return ir(He,function(c,p){return Z0(c,p,U)})}function $g(d,b){return ih(d,b,function(U,me){return Qf(d,me)})}function ih(d,b,U){for(var me=-1,He=b.length,c={};++me<He;){var p=b[me],k=vu(d,p);U(k,p)&&Tc(c,el(p,d),k)}return c}function Zs(d){return function(b){return vu(b,d)}}function Gu(d,b,U,me){var He=me?Gs:ns,c=-1,p=b.length,k=d;for(d===b&&(b=Uo(b)),U&&(k=ni(d,oi(U)));++c<p;)for(var X=0,xe=b[c],We=U?U(xe):xe;(X=He(k,We,X,me))>-1;)k!==d&&Dr.call(k,X,1),Dr.call(d,X,1);return d}function nd(d,b){for(var U=d?b.length:0,me=U-1;U--;){var He=b[U];if(U==me||He!==c){var c=He;Dl(He)?Dr.call(d,He,1):pf(d,He)}}return d}function wl(d,b){return d+jr(z0()*(b-d+1))}function Nc(d,b,U,me){for(var He=-1,c=cs(Vl((b-d)/(U||1)),0),p=xn(c);c--;)p[me?c:++He]=d,d+=U;return p}function rh(d,b){var U="";if(!d||b<1||b>Ne)return U;do b%2&&(U+=d),b=jr(b/2),b&&(d+=d);while(b);return U}function wr(d,b){return Lf(gh(d,b,wo),d+"")}function jm(d){return Rg(uc(d))}function Kg(d,b){var U=uc(d);return ql(U,$u(b,0,U.length))}function Tc(d,b,U,me){if(!rs(d))return d;b=el(b,d);for(var He=-1,c=b.length,p=c-1,k=d;k!=null&&++He<c;){var X=$o(b[He]),xe=U;if(X==="__proto__"||X==="constructor"||X==="prototype")return d;if(He!=p){var We=k[X];xe=me?me(We,X,k):je,xe===je&&(xe=rs(We)?We:Dl(b[He+1])?[]:{})}_l(k,X,xe),k=k[X]}return d}var gf=qa?function(d,b){return qa.set(d,b),d}:wo,Cr=ml?function(d,b){return ml(d,"toString",{configurable:!0,enumerable:!1,value:ng(b),writable:!0})}:wo;function G0(d){return ql(uc(d))}function Aa(d,b,U){var me=-1,He=d.length;b<0&&(b=-b>He?0:He+b),U=U>He?He:U,U<0&&(U+=He),He=b>U?0:U-b>>>0,b>>>=0;for(var c=xn(He);++me<He;)c[me]=d[me+b];return c}function sh(d,b){var U;return Os(d,function(me,He,c){return U=b(me,He,c),!U}),!!U}function oh(d,b,U){var me=0,He=d==null?me:d.length;if(typeof b=="number"&&b===b&&He<=Ot){for(;me<He;){var c=me+He>>>1,p=d[c];p!==null&&!gs(p)&&(U?p<=b:p<b)?me=c+1:He=c}return He}return Gg(d,b,wo,U)}function Gg(d,b,U,me){var He=0,c=d==null?0:d.length;if(c===0)return 0;b=U(b);for(var p=b!==b,k=b===null,X=gs(b),xe=b===je;He<c;){var We=jr((He+c)/2),it=U(d[We]),pt=it!==je,Nt=it===null,vn=it===it,wn=gs(it);if(p)var Sn=me||vn;else xe?Sn=vn&&(me||pt):k?Sn=vn&&pt&&(me||!Nt):X?Sn=vn&&pt&&!Nt&&(me||!wn):Nt||wn?Sn=!1:Sn=me?it<=b:it<b;Sn?He=We+1:c=We}return Ho(c,mt)}function Ja(d,b){for(var U=-1,me=d.length,He=0,c=[];++U<me;){var p=d[U],k=b?b(p):p;if(!U||!Wa(k,X)){var X=k;c[He++]=p===0?0:p}}return c}function ko(d){return typeof d=="number"?d:gs(d)?$e:+d}function Ra(d){if(typeof d=="string")return d;if(dr(d))return ni(d,Ra)+"";if(gs(d))return Fm?Fm.call(d):"";var b=d+"";return b=="0"&&1/d==-ve?"-0":b}function Pa(d,b,U){var me=-1,He=Ln,c=d.length,p=!0,k=[],X=k;if(U)p=!1,He=si;else if(c>=Z){var xe=b?null:rb(d);if(xe)return pl(xe);p=!1,He=na,X=new Sc}else X=b?[]:k;e:for(;++me<c;){var We=d[me],it=b?b(We):We;if(We=U||We!==0?We:0,p&&it===it){for(var pt=X.length;pt--;)if(X[pt]===it)continue e;b&&X.push(it),k.push(We)}else He(X,it,U)||(X!==k&&X.push(it),k.push(We))}return k}function pf(d,b){return b=el(b,d),d=Qm(d,b),d==null||delete d[$o(il(b))]}function mf(d,b,U,me){return Tc(d,b,U(vu(d,b)),me)}function Kl(d,b,U,me){for(var He=d.length,c=me?He:-1;(me?c--:++c<He)&&b(d[c],c,d););return U?Aa(d,me?0:c,me?c+1:He):Aa(d,me?c+1:0,me?He:c)}function ho(d,b){var U=d;return U instanceof yn&&(U=U.value()),ur(b,function(me,He){return He.func.apply(He.thisArg,Gn([me],He.args))},U)}function fo(d,b,U){var me=d.length;if(me<2)return me?Pa(d[0]):[];for(var He=-1,c=xn(me);++He<me;)for(var p=d[He],k=-1;++k<me;)k!=He&&(c[He]=yl(c[He]||p,d[k],b,U));return Pa(vi(c,1),b,U)}function vf(d,b,U){for(var me=-1,He=d.length,c=b.length,p={};++me<He;){var k=me<c?b[me]:je;U(p,d[me],k)}return p}function _f(d){return js(d)?d:[]}function ah(d){return typeof d=="function"?d:wo}function el(d,b){return dr(d)?d:dd(d,b)?[d]:Eu(Li(d))}var Yg=wr;function Gl(d,b,U){var me=d.length;return U=U===je?me:U,!b&&U>=me?d:Aa(d,b,U)}var id=Wl||function(d){return x.clearTimeout(d)};function yf(d,b){if(b)return d.slice();var U=d.length,me=yi?yi(U):new d.constructor(U);return d.copy(me),me}function Yl(d){var b=new d.constructor(d.byteLength);return new ri(b).set(new ri(d)),b}function Y0(d,b){var U=b?Yl(d.buffer):d.buffer;return new d.constructor(U,d.byteOffset,d.byteLength)}function Yu(d){var b=new d.constructor(d.source,dt.exec(d));return b.lastIndex=d.lastIndex,b}function rd(d){return Zh?sn(Zh.call(d)):{}}function Mc(d,b){var U=b?Yl(d.buffer):d.buffer;return new d.constructor(U,d.byteOffset,d.length)}function go(d,b){if(d!==b){var U=d!==je,me=d===null,He=d===d,c=gs(d),p=b!==je,k=b===null,X=b===b,xe=gs(b);if(!k&&!xe&&!c&&d>b||c&&p&&X&&!k&&!xe||me&&p&&X||!U&&X||!He)return 1;if(!me&&!c&&!xe&&d<b||xe&&U&&He&&!me&&!c||k&&U&&He||!p&&He||!X)return-1}return 0}function Z0(d,b,U){for(var me=-1,He=d.criteria,c=b.criteria,p=He.length,k=U.length;++me<p;){var X=go(He[me],c[me]);if(X){if(me>=k)return X;var xe=U[me];return X*(xe=="desc"?-1:1)}}return d.index-b.index}function Zg(d,b,U,me){for(var He=-1,c=d.length,p=U.length,k=-1,X=b.length,xe=cs(c-p,0),We=xn(X+xe),it=!me;++k<X;)We[k]=b[k];for(;++He<p;)(it||He<c)&&(We[U[He]]=d[He]);for(;xe--;)We[k++]=d[He++];return We}function bf(d,b,U,me){for(var He=-1,c=d.length,p=-1,k=U.length,X=-1,xe=b.length,We=cs(c-k,0),it=xn(We+xe),pt=!me;++He<We;)it[He]=d[He];for(var Nt=He;++X<xe;)it[Nt+X]=b[X];for(;++p<k;)(pt||He<c)&&(it[Nt+U[p]]=d[He++]);return it}function Uo(d,b){var U=-1,me=d.length;for(b||(b=xn(me));++U<me;)b[U]=d[U];return b}function Cl(d,b,U,me){var He=!U;U||(U={});for(var c=-1,p=b.length;++c<p;){var k=b[c],X=me?me(U[k],d[k],k,U,d):je;X===je&&(X=d[k]),He?wa(U,k,X):_l(U,k,X)}return U}function Xg(d,b){return Cl(d,Xi(d),b)}function sd(d,b){return Cl(d,po(d),b)}function od(d,b){return function(U,me){var He=dr(U)?Xe:Fg,c=b?b():{};return He(U,d,Zi(me,2),c)}}function ro(d){return wr(function(b,U){var me=-1,He=U.length,c=He>1?U[He-1]:je,p=He>2?U[2]:je;for(c=d.length>3&&typeof c=="function"?(He--,c):je,p&&mo(U[0],U[1],p)&&(c=He<3?je:c,He=1),b=sn(b);++me<He;){var k=U[me];k&&d(b,k,me,c)}return b})}function Us(d,b){return function(U,me){if(U==null)return U;if(!Da(U))return d(U,me);for(var He=U.length,c=b?He:-1,p=sn(U);(b?c--:++c<He)&&me(p[c],c,p)!==!1;);return U}}function tl(d){return function(b,U,me){for(var He=-1,c=sn(b),p=me(b),k=p.length;k--;){var X=p[d?k:++He];if(U(c[X],X,c)===!1)break}return b}}function $m(d,b,U){var me=b&W,He=Zu(d);function c(){var p=this&&this!==x&&this instanceof c?He:d;return p.apply(me?U:this,arguments)}return c}function lh(d){return function(b){b=Li(b);var U=Bo(b)?Kr(b):je,me=U?U[0]:b.charAt(0),He=U?Gl(U,1).join(""):b.slice(1);return me[d]()+He}}function nl(d){return function(b){return ur(Uv(Ap(b).replace(Ya,"")),d,"")}}function Zu(d){return function(){var b=arguments;switch(b.length){case 0:return new d;case 1:return new d(b[0]);case 2:return new d(b[0],b[1]);case 3:return new d(b[0],b[1],b[2]);case 4:return new d(b[0],b[1],b[2],b[3]);case 5:return new d(b[0],b[1],b[2],b[3],b[4]);case 6:return new d(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new d(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var U=co(d.prototype),me=d.apply(U,b);return rs(me)?me:U}}function Km(d,b,U){var me=Zu(d);function He(){for(var c=arguments.length,p=xn(c),k=c,X=Ea(He);k--;)p[k]=arguments[k];var xe=c<3&&p[0]!==X&&p[c-1]!==X?[]:_s(p,X);if(c-=xe.length,c<U)return ud(d,b,bu,He.placeholder,je,p,xe,je,je,U-c);var We=this&&this!==x&&this instanceof He?me:d;return Ve(We,this,p)}return He}function Gm(d){return function(b,U,me){var He=sn(b);if(!Da(b)){var c=Zi(U,3);b=_o(b),U=function(k){return c(He[k],k,He)}}var p=d(b,U,me);return p>-1?He[c?b[p]:p]:je}}function qg(d){return ks(function(b){var U=b.length,me=U,He=zo.prototype.thru;for(d&&b.reverse();me--;){var c=b[me];if(typeof c!="function")throw new Ke(g);if(He&&!p&&Xu(c)=="wrapper")var p=new zo([],!0)}for(me=p?me:U;++me<U;){c=b[me];var k=Xu(c),X=k=="wrapper"?Zm(c):je;X&&wu(X[0])&&X[1]==(F|q|de|be)&&!X[4].length&&X[9]==1?p=p[Xu(X[0])].apply(p,X[3]):p=c.length==1&&wu(c)?p[k]():p.thru(c)}return function(){var xe=arguments,We=xe[0];if(p&&xe.length==1&&dr(We))return p.plant(We).value();for(var it=0,pt=U?b[it].apply(this,xe):We;++it<U;)pt=b[it].call(this,pt);return pt}})}function bu(d,b,U,me,He,c,p,k,X,xe){var We=b&F,it=b&W,pt=b&G,Nt=b&(q|we),vn=b&pe,wn=pt?je:Zu(d);function Sn(){for(var Yn=arguments.length,ii=xn(Yn),ki=Yn;ki--;)ii[ki]=arguments[ki];if(Nt)var Gi=Ea(Sn),Ri=Ms(ii,Gi);if(me&&(ii=Zg(ii,me,He,Nt)),c&&(ii=bf(ii,c,p,Nt)),Yn-=Ri,Nt&&Yn<xe){var Ki=_s(ii,Gi);return ud(d,b,bu,Sn.placeholder,U,ii,Ki,k,X,xe-Yn)}var rr=it?U:this,Ks=pt?rr[d]:d;return Yn=ii.length,k?ii=np(ii,k):vn&&Yn>1&&ii.reverse(),We&&X<Yn&&(ii.length=X),this&&this!==x&&this instanceof Sn&&(Ks=wn||Zu(Ks)),Ks.apply(rr,ii)}return Sn}function ad(d,b){return function(U,me){return Vg(U,d,b(me),{})}}function wf(d,b){return function(U,me){var He;if(U===je&&me===je)return b;if(U!==je&&(He=U),me!==je){if(He===je)return me;typeof U=="string"||typeof me=="string"?(U=Ra(U),me=Ra(me)):(U=ko(U),me=ko(me)),He=d(U,me)}return He}}function uh(d){return ks(function(b){return b=ni(b,oi(Zi())),wr(function(U){var me=this;return d(b,function(He){return Ve(He,me,U)})})})}function ld(d,b){b=b===je?" ":Ra(b);var U=b.length;if(U<2)return U?rh(b,d):b;var me=rh(b,Vl(d/xs(b)));return Bo(b)?Gl(Kr(me),0,d).join(""):me.slice(0,d)}function Ao(d,b,U,me){var He=b&W,c=Zu(d);function p(){for(var k=-1,X=arguments.length,xe=-1,We=me.length,it=xn(We+X),pt=this&&this!==x&&this instanceof p?c:d;++xe<We;)it[xe]=me[xe];for(;X--;)it[xe++]=arguments[++k];return Ve(pt,He?U:this,it)}return p}function Ym(d){return function(b,U,me){return me&&typeof me!="number"&&mo(b,U,me)&&(U=me=je),b=Iu(b),U===je?(U=b,b=0):U=Iu(U),me=me===je?b<U?1:-1:Iu(me),Nc(b,U,me,d)}}function ch(d){return function(b,U){return typeof b=="string"&&typeof U=="string"||(b=Ha(b),U=Ha(U)),d(b,U)}}function ud(d,b,U,me,He,c,p,k,X,xe){var We=b&q,it=We?p:je,pt=We?je:p,Nt=We?c:je,vn=We?je:c;b|=We?de:fe,b&=~(We?fe:de),b&ie||(b&=~(W|G));var wn=[d,b,He,Nt,it,vn,pt,k,X,xe],Sn=U.apply(je,wn);return wu(d)&&Jm(Sn,wn),Sn.placeholder=me,gd(Sn,d,b)}function cd(d){var b=bn[d];return function(U,me){if(U=Ha(U),me=me==null?0:Ho(fr(me),292),me&&Am(U)){var He=(Li(U)+"e").split("e"),c=b(He[0]+"e"+(+He[1]+me));return He=(Li(c)+"e").split("e"),+(He[0]+"e"+(+He[1]-me))}return b(U)}}var rb=cu&&1/pl(new cu([,-0]))[1]==ve?function(d){return new cu(d)}:rg;function Qg(d){return function(b){var U=Rr(b);return U==zt?Io(b):U==On?Bl(b):dn(b,d(b))}}function Sl(d,b,U,me,He,c,p,k){var X=b&G;if(!X&&typeof d!="function")throw new Ke(g);var xe=me?me.length:0;if(xe||(b&=~(de|fe),me=He=je),p=p===je?p:cs(fr(p),0),k=k===je?k:fr(k),xe-=He?He.length:0,b&fe){var We=me,it=He;me=He=je}var pt=X?je:Zm(d),Nt=[d,b,U,me,He,We,it,c,p,k];if(pt&&Xl(Nt,pt),d=Nt[0],b=Nt[1],U=Nt[2],me=Nt[3],He=Nt[4],k=Nt[9]=Nt[9]===je?X?0:d.length:cs(Nt[9]-xe,0),!k&&b&(q|we)&&(b&=~(q|we)),!b||b==W)var vn=$m(d,b,U);else b==q||b==we?vn=Km(d,b,k):(b==de||b==(W|de))&&!He.length?vn=Ao(d,b,U,me):vn=bu.apply(je,Nt);var wn=pt?gf:Jm;return gd(wn(vn,Nt),d,b)}function hh(d,b,U,me){return d===je||Wa(d,Dn[U])&&!Ye.call(me,U)?b:d}function Jg(d,b,U,me,He,c){return rs(d)&&rs(b)&&(c.set(b,d),ed(d,b,je,Jg,c),c.delete(b)),d}function El(d){return yh(d)?je:d}function oa(d,b,U,me,He,c){var p=U&O,k=d.length,X=b.length;if(k!=X&&!(p&&X>k))return!1;var xe=c.get(d),We=c.get(b);if(xe&&We)return xe==b&&We==d;var it=-1,pt=!0,Nt=U&R?new Sc:je;for(c.set(d,b),c.set(b,d);++it<k;){var vn=d[it],wn=b[it];if(me)var Sn=p?me(wn,vn,it,b,d,c):me(vn,wn,it,d,b,c);if(Sn!==je){if(Sn)continue;pt=!1;break}if(Nt){if(!hr(b,function(Yn,ii){if(!na(Nt,ii)&&(vn===Yn||He(vn,Yn,U,me,c)))return Nt.push(ii)})){pt=!1;break}}else if(!(vn===wn||He(vn,wn,U,me,c))){pt=!1;break}}return c.delete(d),c.delete(b),pt}function Fa(d,b,U,me,He,c,p){switch(U){case le:if(d.byteLength!=b.byteLength||d.byteOffset!=b.byteOffset)return!1;d=d.buffer,b=b.buffer;case Ae:return!(d.byteLength!=b.byteLength||!c(new ri(d),new ri(b)));case Yt:case pn:case en:return Wa(+d,+b);case _t:return d.name==b.name&&d.message==b.message;case wi:case Pt:return d==b+"";case zt:var k=Io;case On:var X=me&O;if(k||(k=pl),d.size!=b.size&&!X)return!1;var xe=p.get(d);if(xe)return xe==b;me|=R,p.set(d,b);var We=oa(k(d),k(b),me,He,c,p);return p.delete(d),We;case et:if(Zh)return Zh.call(d)==Zh.call(b)}return!1}function ep(d,b,U,me,He,c){var p=U&O,k=Ca(d),X=k.length,xe=Ca(b),We=xe.length;if(X!=We&&!p)return!1;for(var it=X;it--;){var pt=k[it];if(!(p?pt in b:Ye.call(b,pt)))return!1}var Nt=c.get(d),vn=c.get(b);if(Nt&&vn)return Nt==b&&vn==d;var wn=!0;c.set(d,b),c.set(b,d);for(var Sn=p;++it<X;){pt=k[it];var Yn=d[pt],ii=b[pt];if(me)var ki=p?me(ii,Yn,pt,b,d,c):me(Yn,ii,pt,d,b,c);if(!(ki===je?Yn===ii||He(Yn,ii,U,me,c):ki)){wn=!1;break}Sn||(Sn=pt=="constructor")}if(wn&&!Sn){var Gi=d.constructor,Ri=b.constructor;Gi!=Ri&&"constructor"in d&&"constructor"in b&&!(typeof Gi=="function"&&Gi instanceof Gi&&typeof Ri=="function"&&Ri instanceof Ri)&&(wn=!1)}return c.delete(d),c.delete(b),wn}function ks(d){return Lf(gh(d,je,md),d+"")}function Ca(d){return xc(d,_o,Xi)}function Sa(d){return xc(d,la,po)}var Zm=qa?function(d){return qa.get(d)}:rg;function Xu(d){for(var b=d.name+"",U=ys[b],me=Ye.call(ys,b)?U.length:0;me--;){var He=U[me],c=He.func;if(c==null||c==d)return He.name}return b}function Ea(d){var b=Ye.call(tt,"placeholder")?tt:d;return b.placeholder}function Zi(){var d=tt.iteratee||Dd;return d=d===Dd?_u:d,arguments.length?d(arguments[0],arguments[1]):d}function dh(d,b){var U=d.__data__;return Sf(b)?U[typeof b=="string"?"string":"hash"]:U.map}function Oc(d){for(var b=_o(d),U=b.length;U--;){var me=b[U],He=d[me];b[U]=[me,He,Ef(He)]}return b}function Ll(d,b){var U=zu(d,b);return cf(U)?U:je}function xl(d){var b=Ye.call(d,kr),U=d[kr];try{d[kr]=je;var me=!0}catch(c){}var He=It.call(d);return me&&(b?d[kr]=U:delete d[kr]),He}var Xi=Kh?function(d){return d==null?[]:(d=sn(d),Xt(Kh(d),function(b){return Ni.call(d,b)}))}:Up,po=Kh?function(d){for(var b=[];d;)Gn(b,Xi(d)),d=Ui(d);return b}:Up,Rr=ds;(Ys&&Rr(new Ys(new ArrayBuffer(1)))!=le||Gh&&Rr(new Gh)!=zt||wc&&Rr(wc.resolve())!=Di||cu&&Rr(new cu)!=On||rf&&Rr(new rf)!=li)&&(Rr=function(d){var b=ds(d),U=b==an?d.constructor:je,me=U?Ql(U):"";if(me)switch(me){case Uu:return le;case Qc:return zt;case Cc:return Di;case Ar:return On;case Jc:return li}return b});function Zl(d,b,U){for(var me=-1,He=U.length;++me<He;){var c=U[me],p=c.size;switch(c.type){case"drop":d+=p;break;case"dropRight":b-=p;break;case"take":b=Ho(b,d+p);break;case"takeRight":d=cs(d,b-p);break}}return{start:d,end:b}}function Xm(d){var b=d.match(J);return b?b[1].split(Pe):[]}function hd(d,b,U){b=el(b,d);for(var me=-1,He=b.length,c=!1;++me<He;){var p=$o(b[me]);if(!(c=d!=null&&U(d,p)))break;d=d[p]}return c||++me!=He?c:(He=d==null?0:d.length,!!He&&$f(He)&&Dl(p,He)&&(dr(d)||Pc(d)))}function X0(d){var b=d.length,U=new d.constructor(b);return b&&typeof d[0]=="string"&&Ye.call(d,"index")&&(U.index=d.index,U.input=d.input),U}function As(d){return typeof d.constructor=="function"&&!fh(d)?co(Ui(d)):{}}function tp(d,b,U){var me=d.constructor;switch(b){case Ae:return Yl(d);case Yt:case pn:return new me(+d);case le:return Y0(d,U);case ne:case B:case Me:case Ce:case lt:case vt:case ft:case ot:case yt:return Mc(d,U);case zt:return new me;case en:case Pt:return new me(d);case wi:return Yu(d);case On:return new me;case et:return rd(d)}}function Cf(d,b){var U=b.length;if(!U)return d;var me=U-1;return b[me]=(U>1?"& ":"")+b[me],b=b.join(U>2?", ":" "),d.replace(z,`{
/* [wrapped with `+b+`] */
`)}function qu(d){return dr(d)||Pc(d)||!!(zr&&d&&d[zr])}function Dl(d,b){var U=typeof d;return b=b==null?Ne:b,!!b&&(U=="number"||U!="symbol"&&zn.test(d))&&d>-1&&d%1==0&&d<b}function mo(d,b,U){if(!rs(U))return!1;var me=typeof b;return(me=="number"?Da(U)&&Dl(b,U.length):me=="string"&&b in U)?Wa(U[b],d):!1}function dd(d,b){if(dr(d))return!1;var U=typeof d;return U=="number"||U=="symbol"||U=="boolean"||d==null||gs(d)?!0:nn.test(d)||!Rt.test(d)||b!=null&&d in sn(b)}function Sf(d){var b=typeof d;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?d!=="__proto__":d===null}function wu(d){var b=Xu(d),U=tt[b];if(typeof U!="function"||!(b in yn.prototype))return!1;if(d===U)return!0;var me=Zm(U);return!!me&&d===me[0]}function Cu(d){return!!Vt&&Vt in d}var jo=on?Nl:Nd;function fh(d){var b=d&&d.constructor,U=typeof b=="function"&&b.prototype||Dn;return d===U}function Ef(d){return d===d&&!rs(d)}function Il(d,b){return function(U){return U==null?!1:U[d]===b&&(b!==je||d in sn(U))}}function Su(d){var b=Cd(d,function(me){return U.size===M&&U.clear(),me}),U=b.cache;return b}function Xl(d,b){var U=d[1],me=b[1],He=U|me,c=He<(W|G|F),p=me==F&&U==q||me==F&&U==be&&d[7].length<=b[8]||me==(F|be)&&b[7].length<=b[8]&&U==q;if(!(c||p))return d;me&W&&(d[2]=b[2],He|=U&W?0:ie);var k=b[3];if(k){var X=d[3];d[3]=X?Zg(X,k,b[4]):k,d[4]=X?_s(d[3],E):b[4]}return k=b[5],k&&(X=d[5],d[5]=X?bf(X,k,b[6]):k,d[6]=X?_s(d[5],E):b[6]),k=b[7],k&&(d[7]=k),me&F&&(d[8]=d[8]==null?b[8]:Ho(d[8],b[8])),d[9]==null&&(d[9]=b[9]),d[0]=b[0],d[1]=He,d}function fd(d){var b=[];if(d!=null)for(var U in sn(d))b.push(U);return b}function qm(d){return It.call(d)}function gh(d,b,U){return b=cs(b===je?d.length-1:b,0),function(){for(var me=arguments,He=-1,c=cs(me.length-b,0),p=xn(c);++He<c;)p[He]=me[b+He];He=-1;for(var k=xn(b+1);++He<b;)k[He]=me[He];return k[b]=U(p),Ve(d,this,k)}}function Qm(d,b){return b.length<2?d:vu(d,Aa(b,0,-1))}function np(d,b){for(var U=d.length,me=Ho(b.length,U),He=Uo(d);me--;){var c=b[me];d[me]=Dl(c,U)?He[c]:je}return d}function Qu(d,b){if(!(b==="constructor"&&typeof d[b]=="function")&&b!="__proto__")return d[b]}var Jm=ec(gf),Ju=$h||function(d,b){return x.setTimeout(d,b)},Lf=ec(Cr);function gd(d,b,U){var me=b+"";return Lf(d,Cf(me,ev(Xm(me),U)))}function ec(d){var b=0,U=0;return function(){var me=Rm(),He=oe-(me-U);if(U=me,He>0){if(++b>=I)return arguments[0]}else b=0;return d.apply(je,arguments)}}function ql(d,b){var U=-1,me=d.length,He=me-1;for(b=b===je?me:b;++U<b;){var c=wl(U,He),p=d[c];d[c]=d[U],d[U]=p}return d.length=b,d}var Eu=Su(function(d){var b=[];return d.charCodeAt(0)===46&&b.push(""),d.replace(ln,function(U,me,He,c){b.push(He?c.replace(qe,"$1"):me||U)}),b});function $o(d){if(typeof d=="string"||gs(d))return d;var b=d+"";return b=="0"&&1/d==-ve?"-0":b}function Ql(d){if(d!=null){try{return Te.call(d)}catch(b){}try{return d+""}catch(b){}}return""}function ev(d,b){return wt(kt,function(U){var me="_."+U[0];b&U[1]&&!Ln(d,me)&&d.push(me)}),d.sort()}function xf(d){if(d instanceof yn)return d.clone();var b=new zo(d.__wrapped__,d.__chain__);return b.__actions__=Uo(d.__actions__),b.__index__=d.__index__,b.__values__=d.__values__,b}function Df(d,b,U){(U?mo(d,b,U):b===je)?b=1:b=cs(fr(b),0);var me=d==null?0:d.length;if(!me||b<1)return[];for(var He=0,c=0,p=xn(Vl(me/b));He<me;)p[c++]=Aa(d,He,He+=b);return p}function vo(d){for(var b=-1,U=d==null?0:d.length,me=0,He=[];++b<U;){var c=d[b];c&&(He[me++]=c)}return He}function kc(){var d=arguments.length;if(!d)return[];for(var b=xn(d-1),U=arguments[0],me=d;me--;)b[me-1]=arguments[me];return Gn(dr(U)?Uo(U):[U],vi(b,1))}var ip=wr(function(d,b){return js(d)?yl(d,vi(b,1,js,!0)):[]}),tv=wr(function(d,b){var U=il(b);return js(U)&&(U=je),js(d)?yl(d,vi(b,1,js,!0),Zi(U,2)):[]}),q0=wr(function(d,b){var U=il(b);return js(U)&&(U=je),js(d)?yl(d,vi(b,1,js,!0),je,U):[]});function rp(d,b,U){var me=d==null?0:d.length;return me?(b=U||b===je?1:fr(b),Aa(d,b<0?0:b,me)):[]}function nv(d,b,U){var me=d==null?0:d.length;return me?(b=U||b===je?1:fr(b),b=me-b,Aa(d,0,b<0?0:b)):[]}function Q0(d,b){return d&&d.length?Kl(d,Zi(b,3),!0,!0):[]}function pd(d,b){return d&&d.length?Kl(d,Zi(b,3),!0):[]}function If(d,b,U,me){var He=d==null?0:d.length;return He?(U&&typeof U!="number"&&mo(d,b,U)&&(U=0,me=He),mu(d,b,U,me)):[]}function Nf(d,b,U){var me=d==null?0:d.length;if(!me)return-1;var He=U==null?0:fr(U);return He<0&&(He=cs(me+He,0)),ci(d,Zi(b,3),He)}function sp(d,b,U){var me=d==null?0:d.length;if(!me)return-1;var He=me-1;return U!==je&&(He=fr(U),He=U<0?cs(me+He,0):Ho(He,me-1)),ci(d,Zi(b,3),He,!0)}function md(d){var b=d==null?0:d.length;return b?vi(d,1):[]}function Tf(d){var b=d==null?0:d.length;return b?vi(d,ve):[]}function J0(d,b){var U=d==null?0:d.length;return U?(b=b===je?1:fr(b),vi(d,b)):[]}function op(d){for(var b=-1,U=d==null?0:d.length,me={};++b<U;){var He=d[b];me[He[0]]=He[1]}return me}function Mf(d){return d&&d.length?d[0]:je}function ap(d,b,U){var me=d==null?0:d.length;if(!me)return-1;var He=U==null?0:fr(U);return He<0&&(He=cs(me+He,0)),ns(d,b,He)}function e_(d){var b=d==null?0:d.length;return b?Aa(d,0,-1):[]}var t_=wr(function(d){var b=ni(d,_f);return b.length&&b[0]===d[0]?fs(b):[]}),n_=wr(function(d){var b=il(d),U=ni(d,_f);return b===il(U)?b=je:U.pop(),U.length&&U[0]===d[0]?fs(U,Zi(b,2)):[]}),iv=wr(function(d){var b=il(d),U=ni(d,_f);return b=typeof b=="function"?b:je,b&&U.pop(),U.length&&U[0]===d[0]?fs(U,je,b):[]});function i_(d,b){return d==null?"":qc.call(d,b)}function il(d){var b=d==null?0:d.length;return b?d[b-1]:je}function rv(d,b,U){var me=d==null?0:d.length;if(!me)return-1;var He=me;return U!==je&&(He=fr(U),He=He<0?cs(me+He,0):Ho(He,me-1)),b===b?_r(d,b,He):ci(d,Xr,He,!0)}function sv(d,b){return d&&d.length?ff(d,fr(b)):je}var Jl=wr(Of);function Of(d,b){return d&&d.length&&b&&b.length?Gu(d,b):d}function Ba(d,b,U){return d&&d.length&&b&&b.length?Gu(d,b,Zi(U,2)):d}function lp(d,b,U){return d&&d.length&&b&&b.length?Gu(d,b,je,U):d}var r_=ks(function(d,b){var U=d==null?0:d.length,me=Lc(d,b);return nd(d,ni(b,function(He){return Dl(He,U)?+He:He}).sort(go)),me});function s_(d,b){var U=[];if(!(d&&d.length))return U;var me=-1,He=[],c=d.length;for(b=Zi(b,3);++me<c;){var p=d[me];b(p,me,d)&&(U.push(p),He.push(me))}return nd(d,He),U}function vd(d){return d==null?d:Js.call(d)}function o_(d,b,U){var me=d==null?0:d.length;return me?(U&&typeof U!="number"&&mo(d,b,U)?(b=0,U=me):(b=b==null?0:fr(b),U=U===je?me:fr(U)),Aa(d,b,U)):[]}function ov(d,b){return oh(d,b)}function a_(d,b,U){return Gg(d,b,Zi(U,2))}function l_(d,b){var U=d==null?0:d.length;if(U){var me=oh(d,b);if(me<U&&Wa(d[me],b))return me}return-1}function up(d,b){return oh(d,b,!0)}function u_(d,b,U){return Gg(d,b,Zi(U,2),!0)}function av(d,b){var U=d==null?0:d.length;if(U){var me=oh(d,b,!0)-1;if(Wa(d[me],b))return me}return-1}function lv(d){return d&&d.length?Ja(d):[]}function La(d,b){return d&&d.length?Ja(d,Zi(b,2)):[]}function c_(d){var b=d==null?0:d.length;return b?Aa(d,1,b):[]}function uv(d,b,U){return d&&d.length?(b=U||b===je?1:fr(b),Aa(d,0,b<0?0:b)):[]}function ls(d,b,U){var me=d==null?0:d.length;return me?(b=U||b===je?1:fr(b),b=me-b,Aa(d,b<0?0:b,me)):[]}function sb(d,b){return d&&d.length?Kl(d,Zi(b,3),!1,!0):[]}function h_(d,b){return d&&d.length?Kl(d,Zi(b,3)):[]}var d_=wr(function(d){return Pa(vi(d,1,js,!0))}),cv=wr(function(d){var b=il(d);return js(b)&&(b=je),Pa(vi(d,1,js,!0),Zi(b,2))}),kf=wr(function(d){var b=il(d);return b=typeof b=="function"?b:je,Pa(vi(d,1,js,!0),je,b)});function rl(d){return d&&d.length?Pa(d):[]}function f_(d,b){return d&&d.length?Pa(d,Zi(b,2)):[]}function us(d,b){return b=typeof b=="function"?b:je,d&&d.length?Pa(d,je,b):[]}function Ko(d){if(!(d&&d.length))return[];var b=0;return d=Xt(d,function(U){if(js(U))return b=cs(U.length,b),!0}),ba(b,function(U){return ni(d,xo(U))})}function Af(d,b){if(!(d&&d.length))return[];var U=Ko(d);return b==null?U:ni(U,function(me){return Ve(b,je,me)})}var sl=wr(function(d,b){return js(d)?yl(d,b):[]}),ob=wr(function(d){return fo(Xt(d,js))}),ab=wr(function(d){var b=il(d);return js(b)&&(b=je),fo(Xt(d,js),Zi(b,2))}),Rf=wr(function(d){var b=il(d);return b=typeof b=="function"?b:je,fo(Xt(d,js),je,b)}),cp=wr(Ko);function hv(d,b){return vf(d||[],b||[],_l)}function lb(d,b){return vf(d||[],b||[],Tc)}var dv=wr(function(d){var b=d.length,U=b>1?d[b-1]:je;return U=typeof U=="function"?(d.pop(),U):je,Af(d,U)});function tc(d){var b=tt(d);return b.__chain__=!0,b}function fv(d,b){return b(d),d}function ph(d,b){return b(d)}var hp=ks(function(d){var b=d.length,U=b?d[0]:0,me=this.__wrapped__,He=function(c){return Lc(c,d)};return b>1||this.__actions__.length||!(me instanceof yn)||!Dl(U)?this.thru(He):(me=me.slice(U,+U+(b?1:0)),me.__actions__.push({func:ph,args:[He],thisArg:je}),new zo(me,this.__chain__).thru(function(c){return b&&!c.length&&c.push(je),c}))});function Pf(){return tc(this)}function gv(){return new zo(this.value(),this.__chain__)}function dp(){this.__values__===je&&(this.__values__=Sh(this.value()));var d=this.__index__>=this.__values__.length,b=d?je:this.__values__[this.__index__++];return{done:d,value:b}}function mh(){return this}function fp(d){for(var b,U=this;U instanceof ju;){var me=xf(U);me.__index__=0,me.__values__=je,b?He.__wrapped__=me:b=me;var He=me;U=U.__wrapped__}return He.__wrapped__=d,b}function gp(){var d=this.__wrapped__;if(d instanceof yn){var b=d;return this.__actions__.length&&(b=new yn(this)),b=b.reverse(),b.__actions__.push({func:ph,args:[vd],thisArg:je}),new zo(b,this.__chain__)}return this.thru(vd)}function g_(){return ho(this.__wrapped__,this.__actions__)}var pp=od(function(d,b,U){Ye.call(d,U)?++d[U]:wa(d,U,1)});function mp(d,b,U){var me=dr(d)?mn:Xh;return U&&mo(d,b,U)&&(b=je),me(d,Zi(b,3))}function vp(d,b){var U=dr(d)?Xt:Ul;return U(d,Zi(b,3))}var _p=Gm(Nf),yp=Gm(sp);function bp(d,b){return vi(nc(d,b),1)}function wp(d,b){return vi(nc(d,b),ve)}function _d(d,b,U){return U=U===je?1:fr(U),vi(nc(d,b),U)}function Lu(d,b){var U=dr(d)?wt:Os;return U(d,Zi(b,3))}function Cp(d,b){var U=dr(d)?tn:mi;return U(d,Zi(b,3))}var pv=od(function(d,b,U){Ye.call(d,U)?d[U].push(b):wa(d,U,[b])});function p_(d,b,U,me){d=Da(d)?d:uc(d),U=U&&!me?fr(U):0;var He=d.length;return U<0&&(U=cs(He+U,0)),wh(d)?U<=He&&d.indexOf(b,U)>-1:!!He&&ns(d,b,U)>-1}var m_=wr(function(d,b,U){var me=-1,He=typeof b=="function",c=Da(d)?xn(d.length):[];return Os(d,function(p){c[++me]=He?Ve(b,p,U):$l(p,b,U)}),c}),mv=od(function(d,b,U){wa(d,U,b)});function nc(d,b){var U=dr(d)?ni:df;return U(d,Zi(b,3))}function vv(d,b,U,me){return d==null?[]:(dr(b)||(b=b==null?[]:[b]),U=me?je:U,dr(U)||(U=U==null?[]:[U]),td(d,b,U))}var bs=od(function(d,b,U){d[U?0:1].push(b)},function(){return[[],[]]});function v_(d,b,U){var me=dr(d)?ur:Do,He=arguments.length<3;return me(d,Zi(b,4),U,He,Os)}function Ff(d,b,U){var me=dr(d)?zi:Do,He=arguments.length<3;return me(d,Zi(b,4),U,He,mi)}function vh(d,b){var U=dr(d)?Xt:Ul;return U(d,ic(Zi(b,3)))}function Bf(d){var b=dr(d)?Rg:jm;return b(d)}function __(d,b,U){(U?mo(d,b,U):b===je)?b=1:b=fr(b);var me=dr(d)?zm:Kg;return me(d,b)}function _v(d){var b=dr(d)?Pg:G0;return b(d)}function ub(d){if(d==null)return 0;if(Da(d))return wh(d)?xs(d):d.length;var b=Rr(d);return b==zt||b==On?d.size:nh(d).length}function Ac(d,b,U){var me=dr(d)?hr:sh;return U&&mo(d,b,U)&&(b=je),me(d,Zi(b,3))}var Sp=wr(function(d,b){if(d==null)return[];var U=b.length;return U>1&&mo(d,b[0],b[1])?b=[]:U>2&&mo(b[0],b[1],b[2])&&(b=[b[0]]),td(d,vi(b,1),[])}),yd=Vo||function(){return x.Date.now()};function yv(d,b){if(typeof b!="function")throw new Ke(g);return d=fr(d),function(){if(--d<1)return b.apply(this,arguments)}}function Ep(d,b,U){return b=U?je:b,b=d&&b==null?d.length:b,Sl(d,F,je,je,je,je,b)}function Wf(d,b){var U;if(typeof b!="function")throw new Ke(g);return d=fr(d),function(){return--d>0&&(U=b.apply(this,arguments)),d<=1&&(b=je),U}}var Vf=wr(function(d,b,U){var me=W;if(U.length){var He=_s(U,Ea(Vf));me|=de}return Sl(d,me,b,U,He)}),bd=wr(function(d,b,U){var me=W|G;if(U.length){var He=_s(U,Ea(bd));me|=de}return Sl(b,me,d,U,He)});function bv(d,b,U){b=U?je:b;var me=Sl(d,q,je,je,je,je,je,b);return me.placeholder=bv.placeholder,me}function wv(d,b,U){b=U?je:b;var me=Sl(d,we,je,je,je,je,je,b);return me.placeholder=wv.placeholder,me}function wd(d,b,U){var me,He,c,p,k,X,xe=0,We=!1,it=!1,pt=!0;if(typeof d!="function")throw new Ke(g);b=Ha(b)||0,rs(U)&&(We=!!U.leading,it="maxWait"in U,c=it?cs(Ha(U.maxWait)||0,b):c,pt="trailing"in U?!!U.trailing:pt);function Nt(Ki){var rr=me,Ks=He;return me=He=je,xe=Ki,p=d.apply(Ks,rr),p}function vn(Ki){return xe=Ki,k=Ju(Yn,b),We?Nt(Ki):p}function wn(Ki){var rr=Ki-X,Ks=Ki-xe,Yo=b-rr;return it?Ho(Yo,c-Ks):Yo}function Sn(Ki){var rr=Ki-X,Ks=Ki-xe;return X===je||rr>=b||rr<0||it&&Ks>=c}function Yn(){var Ki=yd();if(Sn(Ki))return ii(Ki);k=Ju(Yn,wn(Ki))}function ii(Ki){return k=je,pt&&me?Nt(Ki):(me=He=je,p)}function ki(){k!==je&&id(k),xe=0,me=X=He=k=je}function Gi(){return k===je?p:ii(yd())}function Ri(){var Ki=yd(),rr=Sn(Ki);if(me=arguments,He=this,X=Ki,rr){if(k===je)return vn(X);if(it)return id(k),k=Ju(Yn,b),Nt(X)}return k===je&&(k=Ju(Yn,b)),p}return Ri.cancel=ki,Ri.flush=Gi,Ri}var Hf=wr(function(d,b){return sf(d,1,b)}),Cv=wr(function(d,b,U){return sf(d,Ha(b)||0,U)});function Sv(d){return Sl(d,pe)}function Cd(d,b){if(typeof d!="function"||b!=null&&typeof b!="function")throw new Ke(g);var U=function(){var me=arguments,He=b?b.apply(this,me):me[0],c=U.cache;if(c.has(He))return c.get(He);var p=d.apply(this,me);return U.cache=c.set(He,p)||c,p};return U.cache=new(Cd.Cache||gu),U}Cd.Cache=gu;function ic(d){if(typeof d!="function")throw new Ke(g);return function(){var b=arguments;switch(b.length){case 0:return!d.call(this);case 1:return!d.call(this,b[0]);case 2:return!d.call(this,b[0],b[1]);case 3:return!d.call(this,b[0],b[1],b[2])}return!d.apply(this,b)}}function Rs(d){return Wf(2,d)}var Lp=Yg(function(d,b){b=b.length==1&&dr(b[0])?ni(b[0],oi(Zi())):ni(vi(b,1),oi(Zi()));var U=b.length;return wr(function(me){for(var He=-1,c=Ho(me.length,U);++He<c;)me[He]=b[He].call(this,me[He]);return Ve(d,this,me)})}),xp=wr(function(d,b){var U=_s(b,Ea(xp));return Sl(d,de,je,b,U)}),xu=wr(function(d,b){var U=_s(b,Ea(xu));return Sl(d,fe,je,b,U)}),Rc=ks(function(d,b){return Sl(d,be,je,je,je,b)});function y_(d,b){if(typeof d!="function")throw new Ke(g);return b=b===je?b:fr(b),wr(d,b)}function eu(d,b){if(typeof d!="function")throw new Ke(g);return b=b==null?0:cs(fr(b),0),wr(function(U){var me=U[b],He=Gl(U,0,b);return me&&Gn(He,me),Ve(d,this,He)})}function rc(d,b,U){var me=!0,He=!0;if(typeof d!="function")throw new Ke(g);return rs(U)&&(me="leading"in U?!!U.leading:me,He="trailing"in U?!!U.trailing:He),wd(d,b,{leading:me,maxWait:b,trailing:He})}function zf(d){return Ep(d,1)}function Ev(d,b){return xp(ah(b),d)}function Dp(){if(!arguments.length)return[];var d=arguments[0];return dr(d)?d:[d]}function b_(d){return hi(d,L)}function Ip(d,b){return b=typeof b=="function"?b:je,hi(d,L,b)}function Lv(d){return hi(d,C|L)}function xv(d,b){return b=typeof b=="function"?b:je,hi(d,C|L,b)}function _h(d,b){return b==null||zl(d,b,_o(b))}function Wa(d,b){return d===b||d!==d&&b!==b}var w_=ch(jl),Dv=ch(function(d,b){return d>=b}),Pc=K0(function(){return arguments}())?K0:function(d){return Ps(d)&&Ye.call(d,"callee")&&!Ni.call(d,"callee")},dr=xn.isArray,xa=S?oi(S):Hg;function Da(d){return d!=null&&$f(d.length)&&!Nl(d)}function js(d){return Ps(d)&&Da(d)}function sc(d){return d===!0||d===!1||Ps(d)&&ds(d)==Yt}var er=Xc||Nd,Uf=j?oi(j):lf;function Ia(d){return Ps(d)&&d.nodeType===1&&!yh(d)}function $s(d){if(d==null)return!0;if(Da(d)&&(dr(d)||typeof d=="string"||typeof d.splice=="function"||er(d)||ac(d)||Pc(d)))return!d.length;var b=Rr(d);if(b==zt||b==On)return!d.size;if(fh(d))return!nh(d).length;for(var U in d)if(Ye.call(d,U))return!1;return!0}function C_(d,b){return Jh(d,b)}function oc(d,b,U){U=typeof U=="function"?U:je;var me=U?U(d,b):je;return me===je?Jh(d,b,je,U):!!me}function Np(d){if(!Ps(d))return!1;var b=ds(d);return b==_t||b==gt||typeof d.message=="string"&&typeof d.name=="string"&&!yh(d)}function jf(d){return typeof d=="number"&&Am(d)}function Nl(d){if(!rs(d))return!1;var b=ds(d);return b==Gt||b==Ft||b==Mn||b==_i}function Va(d){return typeof d=="number"&&d==fr(d)}function $f(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=Ne}function rs(d){var b=typeof d;return d!=null&&(b=="object"||b=="function")}function Ps(d){return d!=null&&typeof d=="object"}var aa=Y?oi(Y):zg;function Kf(d,b){return d===b||Ug(d,b,Oc(b))}function Sd(d,b,U){return U=typeof U=="function"?U:je,Ug(d,b,Oc(b),U)}function ws(d){return Du(d)&&d!=+d}function Fs(d){if(jo(d))throw new Wi(f);return cf(d)}function Iv(d){return d===null}function $r(d){return d==null}function Du(d){return typeof d=="number"||Ps(d)&&ds(d)==en}function yh(d){if(!Ps(d)||ds(d)!=an)return!1;var b=Ui(d);if(b===null)return!0;var U=Ye.call(b,"constructor")&&b.constructor;return typeof U=="function"&&U instanceof U&&Te.call(U)==cn}var Tp=he?oi(he):Ku;function bh(d){return Va(d)&&d>=-Ne&&d<=Ne}var Fc=ye?oi(ye):ka;function wh(d){return typeof d=="string"||!dr(d)&&Ps(d)&&ds(d)==Pt}function gs(d){return typeof d=="symbol"||Ps(d)&&ds(d)==et}var ac=ke?oi(ke):Oo;function Nv(d){return d===je}function Mp(d){return Ps(d)&&Rr(d)==li}function Gf(d){return Ps(d)&&ds(d)==kn}var Ro=ch(hf),Ch=ch(function(d,b){return d<=b});function Sh(d){if(!d)return[];if(Da(d))return wh(d)?Kr(d):Uo(d);if(Ds&&d[Ds])return lu(d[Ds]());var b=Rr(d),U=b==zt?Io:b==On?pl:uc;return U(d)}function Iu(d){if(!d)return d===0?d:0;if(d=Ha(d),d===ve||d===-ve){var b=d<0?-1:1;return b*Ge}return d===d?d:0}function fr(d){var b=Iu(d),U=b%1;return b===b?U?b-U:b:0}function Yf(d){return d?$u(fr(d),0,Be):0}function Ha(d){if(typeof d=="number")return d;if(gs(d))return $e;if(rs(d)){var b=typeof d.valueOf=="function"?d.valueOf():d;d=rs(b)?b+"":b}if(typeof d!="string")return d===0?d:+d;d=Mt(d);var U=Cn.test(d);return U||Zt.test(d)?Ir(d.slice(2),U?2:8):Et.test(d)?$e:+d}function Eh(d){return Cl(d,la(d))}function Na(d){return d?$u(fr(d),-Ne,Ne):d===0?d:0}function Li(d){return d==null?"":Ra(d)}var Tv=ro(function(d,b){if(fh(b)||Da(b)){Cl(b,_o(b),d);return}for(var U in b)Ye.call(b,U)&&_l(d,U,b[U])}),za=ro(function(d,b){Cl(b,la(b),d)}),tu=ro(function(d,b,U,me){Cl(b,la(b),d,me)}),cb=ro(function(d,b,U,me){Cl(b,_o(b),d,me)}),qr=ks(Lc);function S_(d,b){var U=co(d);return b==null?U:Bg(U,b)}var Zf=wr(function(d,b){d=sn(d);var U=-1,me=b.length,He=me>2?b[2]:je;for(He&&mo(b[0],b[1],He)&&(me=1);++U<me;)for(var c=b[U],p=la(c),k=-1,X=p.length;++k<X;){var xe=p[k],We=d[xe];(We===je||Wa(We,Dn[xe])&&!Ye.call(d,xe))&&(d[xe]=c[xe])}return d}),Xf=wr(function(d){return d.push(je,Jg),Ve(so,je,d)});function Ed(d,b){return cr(d,Zi(b,3),bl)}function E_(d,b){return cr(d,Zi(b,3),Qh)}function qf(d,b){return d==null?d:of(d,Zi(b,3),la)}function L_(d,b){return d==null?d:th(d,Zi(b,3),la)}function Op(d,b){return d&&bl(d,Zi(b,3))}function Lh(d,b){return d&&Qh(d,Zi(b,3))}function x_(d){return d==null?[]:zs(d,_o(d))}function lc(d){return d==null?[]:zs(d,la(d))}function Mv(d,b,U){var me=d==null?je:vu(d,b);return me===je?U:me}function Ov(d,b){return d!=null&&hd(d,b,af)}function Qf(d,b){return d!=null&&hd(d,b,Dc)}var Ua=ad(function(d,b,U){b!=null&&typeof b.toString!="function"&&(b=It.call(b)),d[b]=U},ng(wo)),D_=ad(function(d,b,U){b!=null&&typeof b.toString!="function"&&(b=It.call(b)),Ye.call(d,b)?d[b].push(U):d[b]=[U]},Zi),Tl=wr($l);function _o(d){return Da(d)?Ag(d):nh(d)}function la(d){return Da(d)?Ag(d,!0):jg(d)}function kv(d,b){var U={};return b=Zi(b,3),bl(d,function(me,He,c){wa(U,b(me,He,c),me)}),U}function hb(d,b){var U={};return b=Zi(b,3),bl(d,function(me,He,c){wa(U,He,b(me,He,c))}),U}var I_=ro(function(d,b,U){ed(d,b,U)}),so=ro(function(d,b,U,me){ed(d,b,U,me)}),Go=ks(function(d,b){var U={};if(d==null)return U;var me=!1;b=ni(b,function(c){return c=el(c,d),me||(me=c.length>1),c}),Cl(d,Sa(d),U),me&&(U=hi(U,C|D|L,El));for(var He=b.length;He--;)pf(U,b[He]);return U});function Av(d,b){return Jf(d,ic(Zi(b)))}var Rv=ks(function(d,b){return d==null?{}:$g(d,b)});function Jf(d,b){if(d==null)return{};var U=ni(Sa(d),function(me){return[me]});return b=Zi(b),ih(d,U,function(me,He){return b(me,He[0])})}function N_(d,b,U){b=el(b,d);var me=-1,He=b.length;for(He||(He=1,d=je);++me<He;){var c=d==null?je:d[$o(b[me])];c===je&&(me=He,c=U),d=Nl(c)?c.call(d):c}return d}function Po(d,b,U){return d==null?d:Tc(d,b,U)}function Ld(d,b,U,me){return me=typeof me=="function"?me:je,d==null?d:Tc(d,b,U,me)}var eg=Qg(_o),xh=Qg(la);function db(d,b,U){var me=dr(d),He=me||er(d)||ac(d);if(b=Zi(b,4),U==null){var c=d&&d.constructor;He?U=me?new c:[]:rs(d)?U=Nl(c)?co(Ui(d)):{}:U={}}return(He?wt:bl)(d,function(p,k,X){return b(U,p,k,X)}),U}function Pv(d,b){return d==null?!0:pf(d,b)}function xd(d,b,U){return d==null?d:mf(d,b,ah(U))}function ol(d,b,U,me){return me=typeof me=="function"?me:je,d==null?d:mf(d,b,ah(U),me)}function uc(d){return d==null?[]:lo(d,_o(d))}function T_(d){return d==null?[]:lo(d,la(d))}function M_(d,b,U){return U===je&&(U=b,b=je),U!==je&&(U=Ha(U),U=U===U?U:0),b!==je&&(b=Ha(b),b=b===b?b:0),$u(Ha(d),b,U)}function O_(d,b,U){return b=Iu(b),U===je?(U=b,b=0):U=Iu(U),d=Ha(d),Um(d,b,U)}function k_(d,b,U){if(U&&typeof U!="boolean"&&mo(d,b,U)&&(b=U=je),U===je&&(typeof b=="boolean"?(U=b,b=je):typeof d=="boolean"&&(U=d,d=je)),d===je&&b===je?(d=0,b=1):(d=Iu(d),b===je?(b=d,d=0):b=Iu(b)),d>b){var me=d;d=b,b=me}if(U||d%1||b%1){var He=z0();return Ho(d+He*(b-d+xi("1e-"+((He+"").length-1))),b)}return wl(d,b)}var cc=nl(function(d,b,U){return b=b.toLowerCase(),d+(U?kp(b):b)});function kp(d){return Ih(Li(d).toLowerCase())}function Ap(d){return d=Li(d),d&&d.replace(Lt,Za).replace(bc,"")}function Fv(d,b,U){d=Li(d),b=Ra(b);var me=d.length;U=U===je?me:$u(fr(U),0,me);var He=U;return U-=b.length,U>=0&&d.slice(U,He)==b}function hc(d){return d=Li(d),d&&jt.test(d)?d.replace(ct,Xa):d}function Rp(d){return d=Li(d),d&&V.test(d)?d.replace(_e,"\\$&"):d}var Bv=nl(function(d,b,U){return d+(U?"-":"")+b.toLowerCase()}),Wv=nl(function(d,b,U){return d+(U?" ":"")+b.toLowerCase()}),A_=lh("toLowerCase");function Vv(d,b,U){d=Li(d),b=fr(b);var me=b?xs(d):0;if(!b||me>=b)return d;var He=(b-me)/2;return ld(jr(He),U)+d+ld(Vl(He),U)}function Pp(d,b,U){d=Li(d),b=fr(b);var me=b?xs(d):0;return b&&me<b?d+ld(b-me,U):d}function Hv(d,b,U){d=Li(d),b=fr(b);var me=b?xs(d):0;return b&&me<b?ld(b-me,U)+d:d}function R_(d,b,U){return U||b==null?b=0:b&&(b=+b),Pm(Li(d).replace(H,""),b||0)}function P_(d,b,U){return(U?mo(d,b,U):b===je)?b=1:b=fr(b),rh(Li(d),b)}function yo(){var d=arguments,b=Li(d[0]);return d.length<3?b:b.replace(d[1],d[2])}var Fp=nl(function(d,b,U){return d+(U?"_":"")+b.toLowerCase()});function al(d,b,U){return U&&typeof U!="number"&&mo(d,b,U)&&(b=U=je),U=U===je?Be:U>>>0,U?(d=Li(d),d&&(typeof b=="string"||b!=null&&!Tp(b))&&(b=Ra(b),!b&&Bo(d))?Gl(Kr(d),0,U):d.split(b,U)):[]}var zv=nl(function(d,b,U){return d+(U?" ":"")+Ih(b)});function tg(d,b,U){return d=Li(d),U=U==null?0:$u(fr(U),0,d.length),b=Ra(b),d.slice(U,U+b.length)==b}function F_(d,b,U){var me=tt.templateSettings;U&&mo(d,b,U)&&(b=je),d=Li(d),b=tu({},b,me,hh);var He=tu({},b.imports,me.imports,hh),c=_o(He),p=lo(He,c),k,X,xe=0,We=b.interpolate||En,it="__p += '",pt=fi((b.escape||En).source+"|"+We.source+"|"+(We===hn?Ct:En).source+"|"+(b.evaluate||En).source+"|$","g"),Nt="//# sourceURL="+(Ye.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Nn+"]")+`
`;d.replace(pt,function(Sn,Yn,ii,ki,Gi,Ri){return ii||(ii=ki),it+=d.slice(xe,Ri).replace(qn,Hu),Yn&&(k=!0,it+=`' +
__e(`+Yn+`) +
'`),Gi&&(X=!0,it+=`';
`+Gi+`;
__p += '`),ii&&(it+=`' +
((__t = (`+ii+`)) == null ? '' : __t) +
'`),xe=Ri+Sn.length,Sn}),it+=`';
`;var vn=Ye.call(b,"variable")&&b.variable;if(!vn)it=`with (obj) {
`+it+`
}
`;else if(Ue.test(vn))throw new Wi(y);it=(X?it.replace(Ut,""):it).replace(Fn,"$1").replace(Qn,"$1;"),it="function("+(vn||"obj")+`) {
`+(vn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(X?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+it+`return __p
}`;var wn=jv(function(){return At(c,Nt+"return "+it).apply(je,p)});if(wn.source=it,Np(wn))throw wn;return wn}function bo(d){return Li(d).toLowerCase()}function B_(d){return Li(d).toUpperCase()}function Dh(d,b,U){if(d=Li(d),d&&(U||b===je))return Mt(d);if(!d||!(b=Ra(b)))return d;var me=Kr(d),He=Kr(b),c=gl(me,He),p=au(me,He)+1;return Gl(me,c,p).join("")}function Bp(d,b,U){if(d=Li(d),d&&(U||b===je))return d.slice(0,qs(d)+1);if(!d||!(b=Ra(b)))return d;var me=Kr(d),He=au(me,Kr(b))+1;return Gl(me,0,He).join("")}function nu(d,b,U){if(d=Li(d),d&&(U||b===je))return d.replace(H,"");if(!d||!(b=Ra(b)))return d;var me=Kr(d),He=gl(me,Kr(b));return Gl(me,He).join("")}function Wp(d,b){var U=ae,me=Q;if(rs(b)){var He="separator"in b?b.separator:He;U="length"in b?fr(b.length):U,me="omission"in b?Ra(b.omission):me}d=Li(d);var c=d.length;if(Bo(d)){var p=Kr(d);c=p.length}if(U>=c)return d;var k=U-xs(me);if(k<1)return me;var X=p?Gl(p,0,k).join(""):d.slice(0,k);if(He===je)return X+me;if(p&&(k+=X.length-k),Tp(He)){if(d.slice(k).search(He)){var xe,We=X;for(He.global||(He=fi(He.source,Li(dt.exec(He))+"g")),He.lastIndex=0;xe=He.exec(We);)var it=xe.index;X=X.slice(0,it===je?k:it)}}else if(d.indexOf(Ra(He),k)!=k){var pt=X.lastIndexOf(He);pt>-1&&(X=X.slice(0,pt))}return X+me}function Vp(d){return d=Li(d),d&&ut.test(d)?d.replace(Fe,uu):d}var W_=nl(function(d,b,U){return d+(U?" ":"")+b.toUpperCase()}),Ih=lh("toUpperCase");function Uv(d,b,U){return d=Li(d),b=U?je:b,b===je?Fl(d)?as(d):vr(d):d.match(b)||[]}var jv=wr(function(d,b){try{return Ve(d,je,b)}catch(U){return Np(U)?U:new Wi(U)}}),V_=ks(function(d,b){return wt(b,function(U){U=$o(U),wa(d,U,Vf(d[U],d))}),d});function H_(d){var b=d==null?0:d.length,U=Zi();return d=b?ni(d,function(me){if(typeof me[1]!="function")throw new Ke(g);return[U(me[0]),me[1]]}):[],wr(function(me){for(var He=-1;++He<b;){var c=d[He];if(Ve(c[0],this,me))return Ve(c[1],this,me)}})}function Hp(d){return Gr(hi(d,C))}function ng(d){return function(){return d}}function $v(d,b){return d==null||d!==d?b:d}var Kv=qg(),z_=qg(!0);function wo(d){return d}function Dd(d){return _u(typeof d=="function"?d:hi(d,C))}function zp(d){return yu(hi(d,C))}function Ta(d,b){return Qa(d,hi(b,C))}var ig=wr(function(d,b){return function(U){return $l(U,d,b)}}),ua=wr(function(d,b){return function(U){return $l(d,U,b)}});function Id(d,b,U){var me=_o(b),He=zs(b,me);U==null&&!(rs(b)&&(He.length||!me.length))&&(U=b,b=d,d=this,He=zs(b,_o(b)));var c=!(rs(U)&&"chain"in U)||!!U.chain,p=Nl(d);return wt(He,function(k){var X=b[k];d[k]=X,p&&(d.prototype[k]=function(){var xe=this.__chain__;if(c||xe){var We=d(this.__wrapped__),it=We.__actions__=Uo(this.__actions__);return it.push({func:X,args:arguments,thisArg:d}),We.__chain__=xe,We}return X.apply(d,Gn([this.value()],arguments))})}),d}function U_(){return x._===this&&(x._=rn),this}function rg(){}function Gv(d){return d=fr(d),wr(function(b){return ff(b,d)})}var Nh=uh(ni),iu=uh(mn),Yv=uh(hr);function sg(d){return dd(d)?xo($o(d)):Zs(d)}function Ur(d){return function(b){return d==null?je:vu(d,b)}}var dc=Ym(),og=Ym(!0);function Up(){return[]}function Nd(){return!1}function Td(){return{}}function Th(){return""}function Md(){return!0}function ru(d,b){if(d=fr(d),d<1||d>Ne)return[];var U=Be,me=Ho(d,Be);b=Zi(b),d-=Be;for(var He=ba(me,b);++U<d;)b(U);return He}function Bc(d){return dr(d)?ni(d,$o):gs(d)?[d]:Uo(Eu(Li(d)))}function j_(d){var b=++ht;return Li(d)+b}var ag=wf(function(d,b){return d+b},0),lg=cd("ceil"),$_=wf(function(d,b){return d/b},1),K_=cd("floor");function jp(d){return d&&d.length?qh(d,wo,jl):je}function $p(d,b){return d&&d.length?qh(d,Zi(b,2),jl):je}function Kp(d){return Hs(d,wo)}function Gp(d,b){return Hs(d,Zi(b,2))}function Zv(d){return d&&d.length?qh(d,wo,hf):je}function G_(d,b){return d&&d.length?qh(d,Zi(b,2),hf):je}var Od=wf(function(d,b){return d*b},1),Is=cd("round"),Xv=wf(function(d,b){return d-b},0);function Y_(d){return d&&d.length?Ts(d,wo):0}function fb(d,b){return d&&d.length?Ts(d,Zi(b,2)):0}return tt.after=yv,tt.ary=Ep,tt.assign=Tv,tt.assignIn=za,tt.assignInWith=tu,tt.assignWith=cb,tt.at=qr,tt.before=Wf,tt.bind=Vf,tt.bindAll=V_,tt.bindKey=bd,tt.castArray=Dp,tt.chain=tc,tt.chunk=Df,tt.compact=vo,tt.concat=kc,tt.cond=H_,tt.conforms=Hp,tt.constant=ng,tt.countBy=pp,tt.create=S_,tt.curry=bv,tt.curryRight=wv,tt.debounce=wd,tt.defaults=Zf,tt.defaultsDeep=Xf,tt.defer=Hf,tt.delay=Cv,tt.difference=ip,tt.differenceBy=tv,tt.differenceWith=q0,tt.drop=rp,tt.dropRight=nv,tt.dropRightWhile=Q0,tt.dropWhile=pd,tt.fill=If,tt.filter=vp,tt.flatMap=bp,tt.flatMapDeep=wp,tt.flatMapDepth=_d,tt.flatten=md,tt.flattenDeep=Tf,tt.flattenDepth=J0,tt.flip=Sv,tt.flow=Kv,tt.flowRight=z_,tt.fromPairs=op,tt.functions=x_,tt.functionsIn=lc,tt.groupBy=pv,tt.initial=e_,tt.intersection=t_,tt.intersectionBy=n_,tt.intersectionWith=iv,tt.invert=Ua,tt.invertBy=D_,tt.invokeMap=m_,tt.iteratee=Dd,tt.keyBy=mv,tt.keys=_o,tt.keysIn=la,tt.map=nc,tt.mapKeys=kv,tt.mapValues=hb,tt.matches=zp,tt.matchesProperty=Ta,tt.memoize=Cd,tt.merge=I_,tt.mergeWith=so,tt.method=ig,tt.methodOf=ua,tt.mixin=Id,tt.negate=ic,tt.nthArg=Gv,tt.omit=Go,tt.omitBy=Av,tt.once=Rs,tt.orderBy=vv,tt.over=Nh,tt.overArgs=Lp,tt.overEvery=iu,tt.overSome=Yv,tt.partial=xp,tt.partialRight=xu,tt.partition=bs,tt.pick=Rv,tt.pickBy=Jf,tt.property=sg,tt.propertyOf=Ur,tt.pull=Jl,tt.pullAll=Of,tt.pullAllBy=Ba,tt.pullAllWith=lp,tt.pullAt=r_,tt.range=dc,tt.rangeRight=og,tt.rearg=Rc,tt.reject=vh,tt.remove=s_,tt.rest=y_,tt.reverse=vd,tt.sampleSize=__,tt.set=Po,tt.setWith=Ld,tt.shuffle=_v,tt.slice=o_,tt.sortBy=Sp,tt.sortedUniq=lv,tt.sortedUniqBy=La,tt.split=al,tt.spread=eu,tt.tail=c_,tt.take=uv,tt.takeRight=ls,tt.takeRightWhile=sb,tt.takeWhile=h_,tt.tap=fv,tt.throttle=rc,tt.thru=ph,tt.toArray=Sh,tt.toPairs=eg,tt.toPairsIn=xh,tt.toPath=Bc,tt.toPlainObject=Eh,tt.transform=db,tt.unary=zf,tt.union=d_,tt.unionBy=cv,tt.unionWith=kf,tt.uniq=rl,tt.uniqBy=f_,tt.uniqWith=us,tt.unset=Pv,tt.unzip=Ko,tt.unzipWith=Af,tt.update=xd,tt.updateWith=ol,tt.values=uc,tt.valuesIn=T_,tt.without=sl,tt.words=Uv,tt.wrap=Ev,tt.xor=ob,tt.xorBy=ab,tt.xorWith=Rf,tt.zip=cp,tt.zipObject=hv,tt.zipObjectDeep=lb,tt.zipWith=dv,tt.entries=eg,tt.entriesIn=xh,tt.extend=za,tt.extendWith=tu,Id(tt,tt),tt.add=ag,tt.attempt=jv,tt.camelCase=cc,tt.capitalize=kp,tt.ceil=lg,tt.clamp=M_,tt.clone=b_,tt.cloneDeep=Lv,tt.cloneDeepWith=xv,tt.cloneWith=Ip,tt.conformsTo=_h,tt.deburr=Ap,tt.defaultTo=$v,tt.divide=$_,tt.endsWith=Fv,tt.eq=Wa,tt.escape=hc,tt.escapeRegExp=Rp,tt.every=mp,tt.find=_p,tt.findIndex=Nf,tt.findKey=Ed,tt.findLast=yp,tt.findLastIndex=sp,tt.findLastKey=E_,tt.floor=K_,tt.forEach=Lu,tt.forEachRight=Cp,tt.forIn=qf,tt.forInRight=L_,tt.forOwn=Op,tt.forOwnRight=Lh,tt.get=Mv,tt.gt=w_,tt.gte=Dv,tt.has=Ov,tt.hasIn=Qf,tt.head=Mf,tt.identity=wo,tt.includes=p_,tt.indexOf=ap,tt.inRange=O_,tt.invoke=Tl,tt.isArguments=Pc,tt.isArray=dr,tt.isArrayBuffer=xa,tt.isArrayLike=Da,tt.isArrayLikeObject=js,tt.isBoolean=sc,tt.isBuffer=er,tt.isDate=Uf,tt.isElement=Ia,tt.isEmpty=$s,tt.isEqual=C_,tt.isEqualWith=oc,tt.isError=Np,tt.isFinite=jf,tt.isFunction=Nl,tt.isInteger=Va,tt.isLength=$f,tt.isMap=aa,tt.isMatch=Kf,tt.isMatchWith=Sd,tt.isNaN=ws,tt.isNative=Fs,tt.isNil=$r,tt.isNull=Iv,tt.isNumber=Du,tt.isObject=rs,tt.isObjectLike=Ps,tt.isPlainObject=yh,tt.isRegExp=Tp,tt.isSafeInteger=bh,tt.isSet=Fc,tt.isString=wh,tt.isSymbol=gs,tt.isTypedArray=ac,tt.isUndefined=Nv,tt.isWeakMap=Mp,tt.isWeakSet=Gf,tt.join=i_,tt.kebabCase=Bv,tt.last=il,tt.lastIndexOf=rv,tt.lowerCase=Wv,tt.lowerFirst=A_,tt.lt=Ro,tt.lte=Ch,tt.max=jp,tt.maxBy=$p,tt.mean=Kp,tt.meanBy=Gp,tt.min=Zv,tt.minBy=G_,tt.stubArray=Up,tt.stubFalse=Nd,tt.stubObject=Td,tt.stubString=Th,tt.stubTrue=Md,tt.multiply=Od,tt.nth=sv,tt.noConflict=U_,tt.noop=rg,tt.now=yd,tt.pad=Vv,tt.padEnd=Pp,tt.padStart=Hv,tt.parseInt=R_,tt.random=k_,tt.reduce=v_,tt.reduceRight=Ff,tt.repeat=P_,tt.replace=yo,tt.result=N_,tt.round=Is,tt.runInContext=Qt,tt.sample=Bf,tt.size=ub,tt.snakeCase=Fp,tt.some=Ac,tt.sortedIndex=ov,tt.sortedIndexBy=a_,tt.sortedIndexOf=l_,tt.sortedLastIndex=up,tt.sortedLastIndexBy=u_,tt.sortedLastIndexOf=av,tt.startCase=zv,tt.startsWith=tg,tt.subtract=Xv,tt.sum=Y_,tt.sumBy=fb,tt.template=F_,tt.times=ru,tt.toFinite=Iu,tt.toInteger=fr,tt.toLength=Yf,tt.toLower=bo,tt.toNumber=Ha,tt.toSafeInteger=Na,tt.toString=Li,tt.toUpper=B_,tt.trim=Dh,tt.trimEnd=Bp,tt.trimStart=nu,tt.truncate=Wp,tt.unescape=Vp,tt.uniqueId=j_,tt.upperCase=W_,tt.upperFirst=Ih,tt.each=Lu,tt.eachRight=Cp,tt.first=Mf,Id(tt,function(){var d={};return bl(tt,function(b,U){Ye.call(tt.prototype,U)||(d[U]=b)}),d}(),{chain:!1}),tt.VERSION=w,wt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){tt[d].placeholder=tt}),wt(["drop","take"],function(d,b){yn.prototype[d]=function(U){U=U===je?1:cs(fr(U),0);var me=this.__filtered__&&!b?new yn(this):this.clone();return me.__filtered__?me.__takeCount__=Ho(U,me.__takeCount__):me.__views__.push({size:Ho(U,Be),type:d+(me.__dir__<0?"Right":"")}),me},yn.prototype[d+"Right"]=function(U){return this.reverse()[d](U).reverse()}}),wt(["filter","map","takeWhile"],function(d,b){var U=b+1,me=U==te||U==De;yn.prototype[d]=function(He){var c=this.clone();return c.__iteratees__.push({iteratee:Zi(He,3),type:U}),c.__filtered__=c.__filtered__||me,c}}),wt(["head","last"],function(d,b){var U="take"+(b?"Right":"");yn.prototype[d]=function(){return this[U](1).value()[0]}}),wt(["initial","tail"],function(d,b){var U="drop"+(b?"":"Right");yn.prototype[d]=function(){return this.__filtered__?new yn(this):this[U](1)}}),yn.prototype.compact=function(){return this.filter(wo)},yn.prototype.find=function(d){return this.filter(d).head()},yn.prototype.findLast=function(d){return this.reverse().find(d)},yn.prototype.invokeMap=wr(function(d,b){return typeof d=="function"?new yn(this):this.map(function(U){return $l(U,d,b)})}),yn.prototype.reject=function(d){return this.filter(ic(Zi(d)))},yn.prototype.slice=function(d,b){d=fr(d);var U=this;return U.__filtered__&&(d>0||b<0)?new yn(U):(d<0?U=U.takeRight(-d):d&&(U=U.drop(d)),b!==je&&(b=fr(b),U=b<0?U.dropRight(-b):U.take(b-d)),U)},yn.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},yn.prototype.toArray=function(){return this.take(Be)},bl(yn.prototype,function(d,b){var U=/^(?:filter|find|map|reject)|While$/.test(b),me=/^(?:head|last)$/.test(b),He=tt[me?"take"+(b=="last"?"Right":""):b],c=me||/^find/.test(b);!He||(tt.prototype[b]=function(){var p=this.__wrapped__,k=me?[1]:arguments,X=p instanceof yn,xe=k[0],We=X||dr(p),it=function(Yn){var ii=He.apply(tt,Gn([Yn],k));return me&&pt?ii[0]:ii};We&&U&&typeof xe=="function"&&xe.length!=1&&(X=We=!1);var pt=this.__chain__,Nt=!!this.__actions__.length,vn=c&&!pt,wn=X&&!Nt;if(!c&&We){p=wn?p:new yn(this);var Sn=d.apply(p,k);return Sn.__actions__.push({func:ph,args:[it],thisArg:je}),new zo(Sn,pt)}return vn&&wn?d.apply(this,k):(Sn=this.thru(it),vn?me?Sn.value()[0]:Sn.value():Sn)})}),wt(["pop","push","shift","sort","splice","unshift"],function(d){var b=bt[d],U=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",me=/^(?:pop|shift)$/.test(d);tt.prototype[d]=function(){var He=arguments;if(me&&!this.__chain__){var c=this.value();return b.apply(dr(c)?c:[],He)}return this[U](function(p){return b.apply(dr(p)?p:[],He)})}}),bl(yn.prototype,function(d,b){var U=tt[b];if(U){var me=U.name+"";Ye.call(ys,me)||(ys[me]=[]),ys[me].push({name:b,func:U})}}),ys[bu(je,G).name]=[{name:"wrapper",func:je}],yn.prototype.clone=nt,yn.prototype.reverse=eh,yn.prototype.value=eo,tt.prototype.at=hp,tt.prototype.chain=Pf,tt.prototype.commit=gv,tt.prototype.next=dp,tt.prototype.plant=fp,tt.prototype.reverse=gp,tt.prototype.toJSON=tt.prototype.valueOf=tt.prototype.value=g_,tt.prototype.first=tt.prototype.head,Ds&&(tt.prototype[Ds]=mh),tt},uo=Qs();x._=uo,In=function(){return uo}.call(bi,fn,bi,pr),In!==je&&(pr.exports=In)}).call(this)},83036:function(pr,bi,fn){"use strict";var In={};fn.r(In),fn.d(In,{CancellationTokenSource:function(){return EF},Emitter:function(){return LF},KeyCode:function(){return xF},KeyMod:function(){return DF},MarkerSeverity:function(){return OF},MarkerTag:function(){return kF},Position:function(){return IF},Range:function(){return NF},Selection:function(){return TF},SelectionDirection:function(){return MF},Token:function(){return RF},Uri:function(){return AF},editor:function(){return jh},languages:function(){return PF}});function je(r,e){let t;return e.length===0?t=r:t=r.replace(/\{(\d+)\}/g,function(n,i){const s=i[0];return typeof e[s]!="undefined"?e[s]:n}),t}function w(r,e,...t){return je(e,t)}var Z=fn(97671),f;const g="en";let y=!1,A=!1,M=!1,E=!1,C=!1,D=!1,L=!1,O,R=null,W,G;const ie=typeof self=="object"?self:typeof fn.g=="object"?fn.g:{};let q;typeof ie.vscode!="undefined"&&typeof ie.vscode.process!="undefined"?q=ie.vscode.process:typeof Z!="undefined"&&(q=Z);const we=typeof((f=q==null?void 0:q.versions)===null||f===void 0?void 0:f.electron)=="string"&&q.type==="renderer",de=we&&(q==null?void 0:q.sandboxed),F=typeof(()=>{if(de)return"bypassHeatCheck";const r=q==null?void 0:q.env.VSCODE_BROWSER_CODE_LOADING;if(typeof r=="string")return r==="none"||r==="code"||r==="bypassHeatCheck"||r==="bypassHeatCheckAndEagerCompile"?r:"bypassHeatCheck"})()=="string";if(typeof navigator=="object"&&!we)G=navigator.userAgent,y=G.indexOf("Windows")>=0,A=G.indexOf("Macintosh")>=0,L=(G.indexOf("Macintosh")>=0||G.indexOf("iPad")>=0||G.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,M=G.indexOf("Linux")>=0,D=!0,O=navigator.language,R=O;else if(typeof q=="object"){y=q.platform==="win32",A=q.platform==="darwin",M=q.platform==="linux",E=M&&!!q.env.SNAP&&!!q.env.SNAP_REVISION,O=g,R=g;const r=q.env.VSCODE_NLS_CONFIG;if(r)try{const e=JSON.parse(r),t=e.availableLanguages["*"];O=e.locale,R=t||g,W=e._translationsConfigFile}catch(e){}C=!0}else console.error("Unable to resolve platform.");let be=0;A?be=1:y?be=3:M&&(be=2);const pe=y,ae=A,Q=M,I=C,oe=D,te=L,ue=G,De=function(){if(ie.setImmediate)return ie.setImmediate.bind(ie);if(typeof ie.postMessage=="function"&&!ie.importScripts){let t=[];ie.addEventListener("message",i=>{if(i.data&&i.data.vscodeSetImmediateId)for(let s=0,o=t.length;s<o;s++){const a=t[s];if(a.id===i.data.vscodeSetImmediateId){t.splice(s,1),a.callback();return}}});let n=0;return i=>{const s=++n;t.push({id:s,callback:i}),ie.postMessage({vscodeSetImmediateId:s},"*")}}if(typeof(q==null?void 0:q.nextTick)=="function")return q.nextTick.bind(q);const e=Promise.resolve();return t=>e.then(t)}(),ve=A||L?2:y?1:3;let Ne=!0,Ge=!1;function $e(){if(!Ge){Ge=!0;const r=new Uint8Array(2);r[0]=1,r[1]=2,Ne=new Uint16Array(r.buffer)[0]===(2<<8)+1}return Ne}const Be="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function mt(r=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of Be)r.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const Ot=mt();function kt(r){let e=Ot;if(r&&r instanceof RegExp)if(r.global)e=r;else{let t="g";r.ignoreCase&&(t+="i"),r.multiline&&(t+="m"),r.unicode&&(t+="u"),e=new RegExp(r.source,t)}return e.lastIndex=0,e}const Tt={maxLen:1e3,windowSize:15,timeBudget:150};function Jt(r,e,t,n,i=Tt){if(t.length>i.maxLen){let u=r-i.maxLen/2;return u<0?u=0:n+=u,t=t.substring(u,r+i.maxLen/2),Jt(r,e,t,n,i)}const s=Date.now(),o=r-1-n;let a=-1,l=null;for(let u=1;!(Date.now()-s>=i.timeBudget);u++){const h=o-i.windowSize*u;e.lastIndex=Math.max(0,h);const v=Mn(e,t,o,a);if(!v&&l||(l=v,h<=0))break;a=h}if(l){let u={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,u}return null}function Mn(r,e,t,n){let i;for(;i=r.exec(e);){const s=i.index||0;if(s<=t&&r.lastIndex>=t)return i;if(n>0&&s>n)return null}return null}const Yt=8;class pn{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class gt{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class _t{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class Gt{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}compute(e,t,n){return n}}class Ft{constructor(e,t=null){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0,this.deps=t}validate(e){return this.defaultValue}}class zt{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}validate(e){return typeof e=="undefined"?this.defaultValue:e}compute(e,t,n){return n}}function en(r,e){return typeof r=="undefined"?e:r==="false"?!1:Boolean(r)}class Bt extends zt{constructor(e,t,n,i=void 0){typeof i!="undefined"&&(i.type="boolean",i.default=n),super(e,t,n,i)}validate(e){return en(e,this.defaultValue)}}class an extends zt{constructor(e,t,n,i,s,o=void 0){typeof o!="undefined"&&(o.type="integer",o.default=n,o.minimum=i,o.maximum=s),super(e,t,n,o),this.minimum=i,this.maximum=s}static clampedInt(e,t,n,i){if(typeof e=="undefined")return t;let s=parseInt(e,10);return isNaN(s)?t:(s=Math.max(n,s),s=Math.min(i,s),s|0)}validate(e){return an.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class Di extends zt{constructor(e,t,n,i,s){typeof s!="undefined"&&(s.type="number",s.default=n),super(e,t,n,s),this.validationFn=i}static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e=="undefined")return t;const n=parseFloat(e);return isNaN(n)?t:n}validate(e){return this.validationFn(Di.float(e,this.defaultValue))}}class _i extends zt{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,i=void 0){typeof i!="undefined"&&(i.type="string",i.default=n),super(e,t,n,i)}validate(e){return _i.string(e,this.defaultValue)}}function wi(r,e,t){return typeof r!="string"||t.indexOf(r)===-1?e:r}class On extends zt{constructor(e,t,n,i,s=void 0){typeof s!="undefined"&&(s.type="string",s.enum=i,s.default=n),super(e,t,n,s),this._allowedValues=i}validate(e){return wi(e,this.defaultValue,this._allowedValues)}}class Pt extends Gt{constructor(e,t,n,i,s,o,a=void 0){typeof a!="undefined"&&(a.type="string",a.enum=s,a.default=i),super(e,t,n,a),this._allowedValues=s,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function et(r){switch(r){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class Ci extends Gt{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[w("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),w("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),w("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:w("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}class li extends Gt{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(17,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:w("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:w("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:en(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:en(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function kn(r){switch(r){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var Ae;(function(r){r[r.Line=1]="Line",r[r.Block=2]="Block",r[r.Underline=3]="Underline",r[r.LineThin=4]="LineThin",r[r.BlockOutline=5]="BlockOutline",r[r.UnderlineThin=6]="UnderlineThin"})(Ae||(Ae={}));function le(r){switch(r){case"line":return Ae.Line;case"block":return Ae.Block;case"underline":return Ae.Underline;case"line-thin":return Ae.LineThin;case"block-outline":return Ae.BlockOutline;case"underline-thin":return Ae.UnderlineThin}}class ne extends Ft{constructor(){super(125,[63,31])}compute(e,t,n){const i=["monaco-editor"];return t.get(31)&&i.push(t.get(31)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(63)==="default"?i.push("mouse-default"):t.get(63)==="copy"&&i.push("mouse-copy"),t.get(98)&&i.push("showUnused"),t.get(123)&&i.push("showDeprecated"),i.join(" ")}}class B extends Bt{constructor(){super(30,"emptySelectionClipboard",!0,{description:w("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}class Me extends Gt{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:!0,autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(33,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:w("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"boolean",default:e.seedSearchStringFromSelection,description:w("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[w("editor.find.autoFindInSelection.never","Never turn on Find in selection automatically (default)."),w("editor.find.autoFindInSelection.always","Always turn on Find in selection automatically."),w("editor.find.autoFindInSelection.multiline","Turn on Find in selection automatically when multiple lines of content are selected.")],description:w("find.autoFindInSelection","Controls the condition for turning on find in selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:w("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:ae},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:w("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:w("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:en(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:en(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":wi(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:en(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:en(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:en(t.loop,this.defaultValue.loop)}}}class Ce extends Gt{constructor(){super(41,"fontLigatures",Ce.OFF,{anyOf:[{type:"boolean",description:w("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:w("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:w("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e=="undefined"?this.defaultValue:typeof e=="string"?e==="false"?Ce.OFF:e==="true"?Ce.ON:e:Boolean(e)?Ce.ON:Ce.OFF}}Ce.OFF='"liga" off, "calt" off',Ce.ON='"liga" on, "calt" on';class lt extends Ft{constructor(){super(40)}compute(e,t,n){return e.fontInfo}}class vt extends zt{constructor(){super(42,"fontSize",dt.fontSize,{type:"number",minimum:6,maximum:100,default:dt.fontSize,description:w("fontSize","Controls the font size in pixels.")})}validate(e){let t=Di.float(e,this.defaultValue);return t===0?dt.fontSize:Di.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}class ft extends Gt{constructor(){super(43,"fontWeight",dt.fontWeight,{anyOf:[{type:"number",minimum:ft.MINIMUM_VALUE,maximum:ft.MAXIMUM_VALUE,errorMessage:w("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:ft.SUGGESTION_VALUES}],default:dt.fontWeight,description:w("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(an.clampedInt(e,dt.fontWeight,ft.MINIMUM_VALUE,ft.MAXIMUM_VALUE))}}ft.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],ft.MINIMUM_VALUE=1,ft.MAXIMUM_VALUE=1e3;class ot extends Gt{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[w("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),w("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),w("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(47,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:w("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:w("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:w("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:w("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:w("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:w("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:w("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:w("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:w("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:w("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:w("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,i,s,o;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:wi(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:wi(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(n=a.multipleTypeDefinitions)!==null&&n!==void 0?n:wi(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(i=a.multipleDeclarations)!==null&&i!==void 0?i:wi(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(s=a.multipleImplementations)!==null&&s!==void 0?s:wi(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(o=a.multipleReferences)!==null&&o!==void 0?o:wi(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:_i.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:_i.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:_i.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:_i.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:_i.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class yt extends Gt{constructor(){const e={enabled:!0,delay:300,sticky:!0};super(50,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:w("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,description:w("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:w("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:en(t.enabled,this.defaultValue.enabled),delay:an.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:en(t.sticky,this.defaultValue.sticky)}}}class Ut extends Ft{constructor(){super(128,[46,55,35,62,90,57,58,92,115,118,119,120,2])}compute(e,t,n){return Ut.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=e.scrollBeyondLastLine?t-1:0,i=(e.viewLineCount+n)/(e.pixelRatio*e.height),s=Math.floor(e.viewLineCount/i);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:n,desiredRatio:i,minimapLineCount:s}}static _computeMinimapLayout(e,t){const n=e.outerWidth,i=e.outerHeight,s=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*i),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:i};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,u=e.typicalHalfwidthCharacterWidth,h=e.scrollBeyondLastLine,v=e.minimap.renderCharacters;let N=s>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const P=e.minimap.maxColumn,K=e.minimap.size,ee=e.minimap.side,Se=e.verticalScrollbarWidth,Le=e.viewLineCount,ce=e.remainingWidth,Ee=e.isViewportWrapping,ze=v?2:3;let Qe=Math.floor(s*i);const at=Qe/s;let Ze=!1,rt=!1,St=ze*N,un=N/s,Kt=1;if(K==="fill"||K==="fit"){const{typicalViewportLineCount:gr,extraLinesBeyondLastLine:Mr,desiredRatio:hs,minimapLineCount:Vu}=Ut.computeContainedMinimapLineCount({viewLineCount:Le,scrollBeyondLastLine:h,height:i,lineHeight:l,pixelRatio:s});if(Le/Vu>1)Ze=!0,rt=!0,N=1,St=1,un=N/s;else{let yc=!1,$a=N+1;if(K==="fit"){const nf=Math.ceil((Le+Mr)*St);Ee&&a&&ce<=t.stableFitRemainingWidth?(yc=!0,$a=t.stableFitMaxMinimapScale):yc=nf>Qe}if(K==="fill"||yc){Ze=!0;const nf=N;St=Math.min(l*s,Math.max(1,Math.floor(1/hs))),Ee&&a&&ce<=t.stableFitRemainingWidth&&($a=t.stableFitMaxMinimapScale),N=Math.min($a,Math.max(1,Math.floor(St/ze))),N>nf&&(Kt=Math.min(2,N/nf)),un=N/s/Kt,Qe=Math.ceil(Math.max(gr,Le+Mr)*St),Ee?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=ce,t.stableFitMaxMinimapScale=N):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const An=Math.floor(P*un),Wn=Math.min(An,Math.max(0,Math.floor((ce-Se-2)*un/(u+un)))+Yt);let $i=Math.floor(s*Wn);const Fi=$i/s;$i=Math.floor($i*Kt);const tr=v?1:2,yr=ee==="left"?0:n-Wn-Se;return{renderMinimap:tr,minimapLeft:yr,minimapWidth:Wn,minimapHeightIsEditorHeight:Ze,minimapIsSampling:rt,minimapScale:N,minimapLineHeight:St,minimapCanvasInnerWidth:$i,minimapCanvasInnerHeight:Qe,minimapCanvasOuterWidth:Fi,minimapCanvasOuterHeight:at}}static computeLayout(e,t){const n=t.outerWidth|0,i=t.outerHeight|0,s=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,u=t.pixelRatio,h=t.viewLineCount,v=e.get(120),N=v==="inherit"?e.get(119):v,P=N==="inherit"?e.get(115):N,K=e.get(118),ee=e.get(2),Se=t.isDominatedByLongLines,Le=e.get(46),ce=e.get(57).renderType!==0,Ee=e.get(58),ze=e.get(92),Qe=e.get(62),at=e.get(90),Ze=at.verticalScrollbarSize,rt=at.verticalHasArrows,St=at.arrowSize,un=at.horizontalScrollbarSize,Kt=e.get(55),An=e.get(35);let Wn;if(typeof Kt=="string"&&/^\d+(\.\d+)?ch$/.test(Kt)){const YE=parseFloat(Kt.substr(0,Kt.length-2));Wn=an.clampedInt(YE*a,0,0,1e3)}else Wn=an.clampedInt(Kt,0,0,1e3);An&&(Wn+=16);let $i=0;if(ce){const YE=Math.max(o,Ee);$i=Math.round(YE*l)}let Fi=0;Le&&(Fi=s);let tr=0,yr=tr+Fi,gr=yr+$i,Mr=gr+Wn;const hs=n-Fi-$i-Wn;let Vu=!1,Zc=!1,yc=-1;ee!==2&&(N==="inherit"&&Se?(Vu=!0,Zc=!0):P==="on"||P==="bounded"?Zc=!0:P==="wordWrapColumn"&&(yc=K));const $a=Ut._computeMinimapLayout({outerWidth:n,outerHeight:i,lineHeight:s,typicalHalfwidthCharacterWidth:a,pixelRatio:u,scrollBeyondLastLine:ze,minimap:Qe,verticalScrollbarWidth:Ze,viewLineCount:h,remainingWidth:hs,isViewportWrapping:Zc},t.memory||new _t);$a.renderMinimap!==0&&$a.minimapLeft===0&&(tr+=$a.minimapWidth,yr+=$a.minimapWidth,gr+=$a.minimapWidth,Mr+=$a.minimapWidth);const nf=hs-$a.minimapWidth,H1=Math.max(1,Math.floor((nf-Ze-2)/a)),UN=rt?St:0;return Zc&&(yc=Math.max(1,H1),P==="bounded"&&(yc=Math.min(yc,K))),{width:n,height:i,glyphMarginLeft:tr,glyphMarginWidth:Fi,lineNumbersLeft:yr,lineNumbersWidth:$i,decorationsLeft:gr,decorationsWidth:Wn,contentLeft:Mr,contentWidth:nf,minimap:$a,viewportColumn:H1,isWordWrapMinified:Vu,isViewportWrapping:Zc,wrappingColumn:yc,verticalScrollbarWidth:Ze,horizontalScrollbarHeight:un,overviewRuler:{top:UN,width:Ze,height:i-2*UN,right:0}}}}class Fn extends Gt{constructor(){const e={enabled:!0};super(54,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:w("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:en(e.enabled,this.defaultValue.enabled)}}}class Qn extends Gt{constructor(){const e={enabled:!0,fontSize:0,fontFamily:dt.fontFamily};super(124,"inlayHints",e,{"editor.inlayHints.enabled":{type:"boolean",default:e.enabled,description:w("inlayHints.enable","Enables the inlay hints in the editor.")},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:w("inlayHints.fontSize","Controls font size of inlay hints in the editor. When set to `0`, the 90% of `#editor.fontSize#` is used.")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,description:w("inlayHints.fontFamily","Controls font family of inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:en(t.enabled,this.defaultValue.enabled),fontSize:an.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:_i.string(t.fontFamily,this.defaultValue.fontFamily)}}}class Fe extends Di{constructor(){super(56,"lineHeight",dt.lineHeight,e=>Di.clamp(e,0,150),{markdownDescription:w("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}class ct extends Gt{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",renderCharacters:!0,maxColumn:120,scale:1};super(62,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:w("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[w("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),w("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),w("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:w("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:w("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:w("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:w("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:w("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:w("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:en(t.enabled,this.defaultValue.enabled),size:wi(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:wi(t.side,this.defaultValue.side,["right","left"]),showSlider:wi(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:en(t.renderCharacters,this.defaultValue.renderCharacters),scale:an.clampedInt(t.scale,1,1,3),maxColumn:an.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function ut(r){return r==="ctrlCmd"?ae?"metaKey":"ctrlKey":"altKey"}class jt extends Gt{constructor(){super(72,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:w("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:w("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:an.clampedInt(t.top,0,0,1e3),bottom:an.clampedInt(t.bottom,0,0,1e3)}}}class qt extends Gt{constructor(){const e={enabled:!0,cycle:!1};super(73,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:w("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:w("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:en(t.enabled,this.defaultValue.enabled),cycle:en(t.cycle,this.defaultValue.cycle)}}}class Dt extends Ft{constructor(){super(126)}compute(e,t,n){return e.pixelRatio}}class hn extends Gt{constructor(){const e={other:!0,comments:!1,strings:!1};super(76,"quickSuggestions",e,{anyOf:[{type:"boolean"},{type:"object",properties:{strings:{type:"boolean",default:e.strings,description:w("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{type:"boolean",default:e.comments,description:w("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{type:"boolean",default:e.other,description:w("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}}}],default:e,description:w("quickSuggestions","Controls whether suggestions should automatically show up while typing.")});this.defaultValue=e}validate(e){if(typeof e=="boolean")return e;if(e&&typeof e=="object"){const t=e,n={other:en(t.other,this.defaultValue.other),comments:en(t.comments,this.defaultValue.comments),strings:en(t.strings,this.defaultValue.strings)};return n.other&&n.comments&&n.strings?!0:!n.other&&!n.comments&&!n.strings?!1:n}return this.defaultValue}}class Rt extends Gt{constructor(){super(57,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[w("lineNumbers.off","Line numbers are not rendered."),w("lineNumbers.on","Line numbers are rendered as absolute number."),w("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),w("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:w("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e!="undefined"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}function nn(r){const e=r.get(85);return e==="editable"?r.get(78):e!=="on"}class ln extends Gt{constructor(){const e=[],t={type:"number",description:w("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(89,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:w("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:w("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="number")t.push({column:an.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const i=n;t.push({column:an.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((n,i)=>n.column-i.column),t}return this.defaultValue}}function _e(r,e){if(typeof r!="string")return e;switch(r){case"hidden":return 2;case"visible":return 3;default:return 1}}class V extends Gt{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(90,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[w("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),w("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),w("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:w("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[w("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),w("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),w("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:w("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:w("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:w("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:w("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=an.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=an.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:an.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:_e(t.vertical,this.defaultValue.vertical),horizontal:_e(t.horizontal,this.defaultValue.horizontal),useShadows:en(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:en(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:en(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:en(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:en(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:an.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:i,verticalSliderSize:an.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:en(t.scrollByPage,this.defaultValue.scrollByPage)}}}class H extends Gt{constructor(){const e={enabled:!1,mode:"subwordDiff"};super(52,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:w("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.mode":{type:"string",enum:["prefix","subwordDiff"],enumDescriptions:[w("inlineSuggest.mode.prefix","Only render an inline suggestion if the replace text is a prefix of the insert text."),w("inlineSuggest.mode.subwordDiff","Only render an inline suggestion if the replace text is a subword of the insert text.")],default:e.mode,description:w("inlineSuggest.mode","Controls which mode to use for rendering inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:en(t.enabled,this.defaultValue.enabled),mode:wi(t.mode,this.defaultValue.mode,["prefix","subwordDiff"])}}}class T extends Gt{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"prefix",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(104,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[w("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),w("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:w("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:w("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:w("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:w("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:w("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:w("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:w("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:w("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.previewMode":{type:"string",enum:["prefix","subwordDiff"],enumDescriptions:[w("suggest.previewMode.prefix","Only render a preview if the replace text is a prefix of the insert text."),w("suggest.previewMode.subwordDiff","Only render a preview if the replace text is a subword of the insert text.")],default:e.previewMode,description:w("suggest.previewMode","Controls which mode to use for rendering the suggest preview.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:w("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:w("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:w("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:w("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:wi(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:en(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:en(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:en(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:en(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:en(t.showIcons,this.defaultValue.showIcons),showStatusBar:en(t.showStatusBar,this.defaultValue.showStatusBar),preview:en(t.preview,this.defaultValue.preview),previewMode:wi(t.previewMode,this.defaultValue.previewMode,["prefix","subwordDiff"]),showInlineDetails:en(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:en(t.showMethods,this.defaultValue.showMethods),showFunctions:en(t.showFunctions,this.defaultValue.showFunctions),showConstructors:en(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:en(t.showDeprecated,this.defaultValue.showDeprecated),showFields:en(t.showFields,this.defaultValue.showFields),showVariables:en(t.showVariables,this.defaultValue.showVariables),showClasses:en(t.showClasses,this.defaultValue.showClasses),showStructs:en(t.showStructs,this.defaultValue.showStructs),showInterfaces:en(t.showInterfaces,this.defaultValue.showInterfaces),showModules:en(t.showModules,this.defaultValue.showModules),showProperties:en(t.showProperties,this.defaultValue.showProperties),showEvents:en(t.showEvents,this.defaultValue.showEvents),showOperators:en(t.showOperators,this.defaultValue.showOperators),showUnits:en(t.showUnits,this.defaultValue.showUnits),showValues:en(t.showValues,this.defaultValue.showValues),showConstants:en(t.showConstants,this.defaultValue.showConstants),showEnums:en(t.showEnums,this.defaultValue.showEnums),showEnumMembers:en(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:en(t.showKeywords,this.defaultValue.showKeywords),showWords:en(t.showWords,this.defaultValue.showWords),showColors:en(t.showColors,this.defaultValue.showColors),showFiles:en(t.showFiles,this.defaultValue.showFiles),showReferences:en(t.showReferences,this.defaultValue.showReferences),showFolders:en(t.showFolders,this.defaultValue.showFolders),showTypeParameters:en(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:en(t.showSnippets,this.defaultValue.showSnippets),showUsers:en(t.showUsers,this.defaultValue.showUsers),showIssues:en(t.showIssues,this.defaultValue.showIssues)}}}class z extends Gt{constructor(){super(100,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:w("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:en(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}class J extends Ft{constructor(){super(127,[78])}compute(e,t,n){return t.get(78)?!0:e.tabFocusMode}}function Pe(r){switch(r){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}class Oe extends Ft{constructor(){super(129,[128])}compute(e,t,n){const i=t.get(128);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}}const dt={fontFamily:ae?"Menlo, Monaco, 'Courier New', monospace":Q?"'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback'":"Consolas, 'Courier New', monospace",fontWeight:"normal",fontSize:ae?12:14,lineHeight:0,letterSpacing:0},Et={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0},Cn=[];function st(r){return Cn[r.id]=r,r}const Zt={acceptSuggestionOnCommitCharacter:st(new Bt(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:w("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:st(new On(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",w("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:w("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:st(new Ci),accessibilityPageSize:st(new an(3,"accessibilityPageSize",10,1,1073741824,{description:w("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:st(new _i(4,"ariaLabel",w("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:st(new On(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",w("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),w("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:w("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:st(new On(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",w("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:w("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:st(new On(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",w("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:w("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:st(new On(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",w("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),w("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:w("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:st(new Pt(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],et,{enumDescriptions:[w("editor.autoIndent.none","The editor will not insert indentation automatically."),w("editor.autoIndent.keep","The editor will keep the current line's indentation."),w("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),w("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),w("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:w("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:st(new Bt(10,"automaticLayout",!1)),autoSurround:st(new On(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[w("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),w("editor.autoSurround.quotes","Surround with quotes but not brackets."),w("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:w("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),stickyTabStops:st(new Bt(102,"stickyTabStops",!1,{description:w("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:st(new Bt(12,"codeLens",!0,{description:w("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:st(new _i(13,"codeLensFontFamily","",{description:w("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:st(new an(14,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:w("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, the 90% of `#editor.fontSize#` is used.")})),colorDecorators:st(new Bt(15,"colorDecorators",!0,{description:w("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:st(new Bt(16,"columnSelection",!1,{description:w("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:st(new li),contextmenu:st(new Bt(18,"contextmenu",!0)),copyWithSyntaxHighlighting:st(new Bt(19,"copyWithSyntaxHighlighting",!0,{description:w("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:st(new Pt(20,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],kn,{description:w("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:st(new Bt(21,"cursorSmoothCaretAnimation",!1,{description:w("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:st(new Pt(22,"cursorStyle",Ae.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],le,{description:w("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:st(new an(23,"cursorSurroundingLines",0,0,1073741824,{description:w("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:st(new On(24,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[w("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),w("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:w("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:st(new an(25,"cursorWidth",0,0,1073741824,{markdownDescription:w("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:st(new Bt(26,"disableLayerHinting",!1)),disableMonospaceOptimizations:st(new Bt(27,"disableMonospaceOptimizations",!1)),domReadOnly:st(new Bt(28,"domReadOnly",!1)),dragAndDrop:st(new Bt(29,"dragAndDrop",!0,{description:w("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:st(new B),extraEditorClassName:st(new _i(31,"extraEditorClassName","")),fastScrollSensitivity:st(new Di(32,"fastScrollSensitivity",5,r=>r<=0?5:r,{markdownDescription:w("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:st(new Me),fixedOverflowWidgets:st(new Bt(34,"fixedOverflowWidgets",!1)),folding:st(new Bt(35,"folding",!0,{description:w("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:st(new On(36,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[w("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),w("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:w("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:st(new Bt(37,"foldingHighlight",!0,{description:w("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),unfoldOnClickAfterEndOfLine:st(new Bt(38,"unfoldOnClickAfterEndOfLine",!1,{description:w("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:st(new _i(39,"fontFamily",dt.fontFamily,{description:w("fontFamily","Controls the font family.")})),fontInfo:st(new lt),fontLigatures2:st(new Ce),fontSize:st(new vt),fontWeight:st(new ft),formatOnPaste:st(new Bt(44,"formatOnPaste",!1,{description:w("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:st(new Bt(45,"formatOnType",!1,{description:w("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:st(new Bt(46,"glyphMargin",!0,{description:w("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:st(new ot),hideCursorInOverviewRuler:st(new Bt(48,"hideCursorInOverviewRuler",!1,{description:w("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),highlightActiveIndentGuide:st(new Bt(49,"highlightActiveIndentGuide",!0,{description:w("highlightActiveIndentGuide","Controls whether the editor should highlight the active indent guide.")})),hover:st(new yt),inDiffEditor:st(new Bt(51,"inDiffEditor",!1)),letterSpacing:st(new Di(53,"letterSpacing",dt.letterSpacing,r=>Di.clamp(r,-5,20),{description:w("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:st(new Fn),lineDecorationsWidth:st(new zt(55,"lineDecorationsWidth",10)),lineHeight:st(new Fe),lineNumbers:st(new Rt),lineNumbersMinChars:st(new an(58,"lineNumbersMinChars",5,1,300)),linkedEditing:st(new Bt(59,"linkedEditing",!1,{description:w("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:st(new Bt(60,"links",!0,{description:w("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:st(new On(61,"matchBrackets","always",["always","near","never"],{description:w("matchBrackets","Highlight matching brackets.")})),minimap:st(new ct),mouseStyle:st(new On(63,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:st(new Di(64,"mouseWheelScrollSensitivity",1,r=>r===0?1:r,{markdownDescription:w("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:st(new Bt(65,"mouseWheelZoom",!1,{markdownDescription:w("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:st(new Bt(66,"multiCursorMergeOverlapping",!0,{description:w("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:st(new Pt(67,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],ut,{markdownEnumDescriptions:[w("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),w("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:w({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go To Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:st(new On(68,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[w("multiCursorPaste.spread","Each cursor pastes a single line of the text."),w("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:w("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:st(new Bt(69,"occurrencesHighlight",!0,{description:w("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:st(new Bt(70,"overviewRulerBorder",!0,{description:w("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:st(new an(71,"overviewRulerLanes",3,0,3)),padding:st(new jt),parameterHints:st(new qt),peekWidgetDefaultFocus:st(new On(74,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[w("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),w("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:w("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:st(new Bt(75,"definitionLinkOpensInPeek",!1,{description:w("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:st(new hn),quickSuggestionsDelay:st(new an(77,"quickSuggestionsDelay",10,0,1073741824,{description:w("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:st(new Bt(78,"readOnly",!1)),renameOnType:st(new Bt(79,"renameOnType",!1,{description:w("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:w("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:st(new Bt(80,"renderControlCharacters",!1,{description:w("renderControlCharacters","Controls whether the editor should render control characters.")})),renderIndentGuides:st(new Bt(81,"renderIndentGuides",!0,{description:w("renderIndentGuides","Controls whether the editor should render indent guides.")})),renderFinalNewline:st(new Bt(82,"renderFinalNewline",!0,{description:w("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:st(new On(83,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",w("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:w("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:st(new Bt(84,"renderLineHighlightOnlyWhenFocus",!1,{description:w("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:st(new On(85,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:st(new On(86,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",w("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),w("renderWhitespace.selection","Render whitespace characters only on selected text."),w("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:w("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:st(new an(87,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:st(new Bt(88,"roundedSelection",!0,{description:w("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:st(new ln),scrollbar:st(new V),scrollBeyondLastColumn:st(new an(91,"scrollBeyondLastColumn",5,0,1073741824,{description:w("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:st(new Bt(92,"scrollBeyondLastLine",!0,{description:w("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:st(new Bt(93,"scrollPredominantAxis",!0,{description:w("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:st(new Bt(94,"selectionClipboard",!0,{description:w("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Q})),selectionHighlight:st(new Bt(95,"selectionHighlight",!0,{description:w("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:st(new Bt(96,"selectOnLineNumbers",!0)),showFoldingControls:st(new On(97,"showFoldingControls","mouseover",["always","mouseover"],{enumDescriptions:[w("showFoldingControls.always","Always show the folding controls."),w("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:w("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:st(new Bt(98,"showUnused",!0,{description:w("showUnused","Controls fading out of unused code.")})),showDeprecated:st(new Bt(123,"showDeprecated",!0,{description:w("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:st(new Qn),snippetSuggestions:st(new On(99,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[w("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),w("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),w("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),w("snippetSuggestions.none","Do not show snippet suggestions.")],description:w("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:st(new z),smoothScrolling:st(new Bt(101,"smoothScrolling",!1,{description:w("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:st(new an(103,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:st(new T),inlineSuggest:st(new H),suggestFontSize:st(new an(105,"suggestFontSize",0,0,1e3,{markdownDescription:w("suggestFontSize","Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")})),suggestLineHeight:st(new an(106,"suggestLineHeight",0,0,1e3,{markdownDescription:w("suggestLineHeight","Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used. The minimum value is 8.")})),suggestOnTriggerCharacters:st(new Bt(107,"suggestOnTriggerCharacters",!0,{description:w("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:st(new On(108,"suggestSelection","recentlyUsed",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[w("suggestSelection.first","Always select the first suggestion."),w("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),w("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:w("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:st(new On(109,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[w("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),w("tabCompletion.off","Disable tab completions."),w("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:w("tabCompletion","Enables tab completions.")})),tabIndex:st(new an(110,"tabIndex",0,-1,1073741824)),unusualLineTerminators:st(new On(111,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[w("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),w("unusualLineTerminators.off","Unusual line terminators are ignored."),w("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:w("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:st(new Bt(112,"useShadowDOM",!0)),useTabStops:st(new Bt(113,"useTabStops",!0,{description:w("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:st(new _i(114,"wordSeparators",Be,{description:w("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:st(new On(115,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[w("wordWrap.off","Lines will never wrap."),w("wordWrap.on","Lines will wrap at the viewport width."),w({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),w({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:w({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:st(new _i(116,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:st(new _i(117,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:st(new an(118,"wordWrapColumn",80,1,1073741824,{markdownDescription:w({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:st(new On(119,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:st(new On(120,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:st(new Pt(121,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],Pe,{enumDescriptions:[w("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),w("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),w("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),w("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:w("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:st(new On(122,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[w("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),w("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:w("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:st(new ne),pixelRatio:st(new Dt),tabFocusMode:st(new J),layoutInfo:st(new Ut),wrappingInfo:st(new Oe)};class zn{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const Lt=new zn;function En(r){or(r)||Lt.onUnexpectedError(r)}function qn(r){or(r)||Lt.onUnexpectedExternalError(r)}function ui(r){if(r instanceof Error){let{name:e,message:t}=r;const n=r.stacktrace||r.stack;return{$isError:!0,name:e,message:t,stack:n}}return r}const Ai="Canceled";function or(r){return r instanceof Error&&r.name===Ai&&r.message===Ai}function Hn(){const r=new Error(Ai);return r.name=r.message,r}function Jn(r){return r?new Error(`Illegal argument: ${r}`):new Error("Illegal argument")}function Ii(r){return r?new Error(`Illegal state: ${r}`):new Error("Illegal state")}var ti;(function(r){function e(ce){return ce&&typeof ce=="object"&&typeof ce[Symbol.iterator]=="function"}r.is=e;const t=Object.freeze([]);function n(){return t}r.empty=n;function*i(ce){yield ce}r.single=i;function s(ce){return ce||t}r.from=s;function o(ce){return!ce||ce[Symbol.iterator]().next().done===!0}r.isEmpty=o;function a(ce){return ce[Symbol.iterator]().next().value}r.first=a;function l(ce,Ee){for(const ze of ce)if(Ee(ze))return!0;return!1}r.some=l;function u(ce,Ee){for(const ze of ce)if(Ee(ze))return ze}r.find=u;function*h(ce,Ee){for(const ze of ce)Ee(ze)&&(yield ze)}r.filter=h;function*v(ce,Ee){let ze=0;for(const Qe of ce)yield Ee(Qe,ze++)}r.map=v;function*N(...ce){for(const Ee of ce)for(const ze of Ee)yield ze}r.concat=N;function*P(ce){for(const Ee of ce)for(const ze of Ee)yield ze}r.concatNested=P;function K(ce,Ee,ze){let Qe=ze;for(const at of ce)Qe=Ee(Qe,at);return Qe}r.reduce=K;function*ee(ce,Ee,ze=ce.length){for(Ee<0&&(Ee+=ce.length),ze<0?ze+=ce.length:ze>ce.length&&(ze=ce.length);Ee<ze;Ee++)yield ce[Ee]}r.slice=ee;function Se(ce,Ee=Number.POSITIVE_INFINITY){const ze=[];if(Ee===0)return[ze,ce];const Qe=ce[Symbol.iterator]();for(let at=0;at<Ee;at++){const Ze=Qe.next();if(Ze.done)return[ze,r.empty()];ze.push(Ze.value)}return[ze,{[Symbol.iterator](){return Qe}}]}r.consume=Se;function Le(ce,Ee,ze=(Qe,at)=>Qe===at){const Qe=ce[Symbol.iterator](),at=Ee[Symbol.iterator]();for(;;){const Ze=Qe.next(),rt=at.next();if(Ze.done!==rt.done)return!1;if(Ze.done)return!0;if(!ze(Ze.value,rt.value))return!1}}r.equals=Le})(ti||(ti={}));const Ht=!1;let Bn=null;if(Ht){const r="__is_disposable_tracked__";Bn=new class{trackDisposable(e){const t=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[r]||console.log(t)},3e3)}markTracked(e){if(e&&e!==Rn.None)try{e[r]=!0}catch(t){}}}}function Xn(r){!Bn||Bn.markTracked(r)}function Kn(r){return Bn&&Bn.trackDisposable(r),r}class Bi extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`);this.errors=e}}function br(r){return typeof r.dispose=="function"&&r.dispose.length===0}function Vi(r){if(ti.is(r)){let e=[];for(const t of r)if(t){Xn(t);try{t.dispose()}catch(n){e.push(n)}}if(e.length===1)throw e[0];if(e.length>1)throw new Bi(e);return Array.isArray(r)?[]:r}else if(r)return Xn(r),r.dispose(),r}function lr(...r){return r.forEach(Xn),Qi(()=>Vi(r))}function Qi(r){const e=Kn({dispose:()=>{Xn(e),r()}});return e}class gi{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(Xn(this),this._isDisposed=!0,this.clear())}clear(){try{Vi(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return Xn(e),this._isDisposed?gi.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}gi.DISABLE_DISPOSED_WARNING=!1;class Rn{constructor(){this._store=new gi,Kn(this)}dispose(){Xn(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}Rn.None=Object.freeze({dispose(){}});class vs{constructor(){this._isDisposed=!1,Kn(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),e&&Xn(e),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,Xn(this),(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}}class Ss{constructor(e){this.object=e}dispose(){}}class Si{constructor(e){this.element=e,this.next=Si.Undefined,this.prev=Si.Undefined}}Si.Undefined=new Si(void 0);class Lr{constructor(){this._first=Si.Undefined,this._last=Si.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Si.Undefined}clear(){let e=this._first;for(;e!==Si.Undefined;){const t=e.next;e.prev=Si.Undefined,e.next=Si.Undefined,e=t}this._first=Si.Undefined,this._last=Si.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new Si(e);if(this._first===Si.Undefined)this._first=n,this._last=n;else if(t){const s=this._last;this._last=n,n.prev=s,s.next=n}else{const s=this._first;this._first=n,n.next=s,s.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==Si.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Si.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Si.Undefined&&e.next!==Si.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Si.Undefined&&e.next===Si.Undefined?(this._first=Si.Undefined,this._last=Si.Undefined):e.next===Si.Undefined?(this._last=this._last.prev,this._last.next=Si.Undefined):e.prev===Si.Undefined&&(this._first=this._first.next,this._first.prev=Si.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Si.Undefined;)yield e.element,e=e.next}}const mr=ie.performance&&typeof ie.performance.now=="function";class Wr{constructor(e){this._highResolution=mr&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new Wr(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?ie.performance.now():Date.now()}}var ei;(function(r){r.None=()=>Rn.None;function e(ce){return(Ee,ze=null,Qe)=>{let at=!1,Ze;return Ze=ce(rt=>{if(!at)return Ze?Ze.dispose():at=!0,Ee.call(ze,rt)},null,Qe),at&&Ze.dispose(),Ze}}r.once=e;function t(ce,Ee){return l((ze,Qe=null,at)=>ce(Ze=>ze.call(Qe,Ee(Ze)),null,at))}r.map=t;function n(ce,Ee){return l((ze,Qe=null,at)=>ce(Ze=>{Ee(Ze),ze.call(Qe,Ze)},null,at))}r.forEach=n;function i(ce,Ee){return l((ze,Qe=null,at)=>ce(Ze=>Ee(Ze)&&ze.call(Qe,Ze),null,at))}r.filter=i;function s(ce){return ce}r.signal=s;function o(...ce){return(Ee,ze=null,Qe)=>lr(...ce.map(at=>at(Ze=>Ee.call(ze,Ze),null,Qe)))}r.any=o;function a(ce,Ee,ze){let Qe=ze;return t(ce,at=>(Qe=Ee(Qe,at),Qe))}r.reduce=a;function l(ce){let Ee;const ze=new $t({onFirstListenerAdd(){Ee=ce(ze.fire,ze)},onLastListenerRemove(){Ee.dispose()}});return ze.event}function u(ce,Ee,ze=100,Qe=!1,at){let Ze,rt,St,un=0;const Kt=new $t({leakWarningThreshold:at,onFirstListenerAdd(){Ze=ce(An=>{un++,rt=Ee(rt,An),Qe&&!St&&(Kt.fire(rt),rt=void 0),clearTimeout(St),St=setTimeout(()=>{const Wn=rt;rt=void 0,St=void 0,(!Qe||un>1)&&Kt.fire(Wn),un=0},ze)})},onLastListenerRemove(){Ze.dispose()}});return Kt.event}r.debounce=u;function h(ce,Ee=(ze,Qe)=>ze===Qe){let ze=!0,Qe;return i(ce,at=>{const Ze=ze||!Ee(at,Qe);return ze=!1,Qe=at,Ze})}r.latch=h;function v(ce,Ee){return[r.filter(ce,Ee),r.filter(ce,ze=>!Ee(ze))]}r.split=v;function N(ce,Ee=!1,ze=[]){let Qe=ze.slice(),at=ce(St=>{Qe?Qe.push(St):rt.fire(St)});const Ze=()=>{Qe&&Qe.forEach(St=>rt.fire(St)),Qe=null},rt=new $t({onFirstListenerAdd(){at||(at=ce(St=>rt.fire(St)))},onFirstListenerDidAdd(){Qe&&(Ee?setTimeout(Ze):Ze())},onLastListenerRemove(){at&&at.dispose(),at=null}});return rt.event}r.buffer=N;class P{constructor(Ee){this.event=Ee}map(Ee){return new P(t(this.event,Ee))}forEach(Ee){return new P(n(this.event,Ee))}filter(Ee){return new P(i(this.event,Ee))}reduce(Ee,ze){return new P(a(this.event,Ee,ze))}latch(){return new P(h(this.event))}debounce(Ee,ze=100,Qe=!1,at){return new P(u(this.event,Ee,ze,Qe,at))}on(Ee,ze,Qe){return this.event(Ee,ze,Qe)}once(Ee,ze,Qe){return e(this.event)(Ee,ze,Qe)}}function K(ce){return new P(ce)}r.chain=K;function ee(ce,Ee,ze=Qe=>Qe){const Qe=(...St)=>rt.fire(ze(...St)),at=()=>ce.on(Ee,Qe),Ze=()=>ce.removeListener(Ee,Qe),rt=new $t({onFirstListenerAdd:at,onLastListenerRemove:Ze});return rt.event}r.fromNodeEventEmitter=ee;function Se(ce,Ee,ze=Qe=>Qe){const Qe=(...St)=>rt.fire(ze(...St)),at=()=>ce.addEventListener(Ee,Qe),Ze=()=>ce.removeEventListener(Ee,Qe),rt=new $t({onFirstListenerAdd:at,onLastListenerRemove:Ze});return rt.event}r.fromDOMEventEmitter=Se;function Le(ce){return new Promise(Ee=>e(ce)(Ee))}r.toPromise=Le})(ei||(ei={}));class Jo{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${Jo._idPool++}`}start(e){this._stopWatch=new Wr(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}Jo._idPool=0;let va=-1;class Es{constructor(e,t=Math.random().toString(18).slice(2,5)){this.customThreshold=e,this.name=t,this._warnCountdown=0}dispose(){this._stacks&&this._stacks.clear()}check(e){let t=va;if(typeof this.customThreshold=="number"&&(t=this.customThreshold),t<=0||e<t)return;this._stacks||(this._stacks=new Map);const n=new Error().stack.split(`
`).slice(3).join(`
`),i=this._stacks.get(n)||0;if(this._stacks.set(n,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=t*.5;let s,o=0;for(const[a,l]of this._stacks)(!s||o<l)&&(s=a,o=l);console.warn(`[${this.name}] potential listener LEAK detected, having ${e} listeners already. MOST frequent listener (${o}):`),console.warn(s)}return()=>{const s=this._stacks.get(n)||0;this._stacks.set(n,s-1)}}}class $t{constructor(e){var t;this._disposed=!1,this._options=e,this._leakageMon=va>0?new Es(this._options&&this._options.leakWarningThreshold):void 0,this._perfMon=((t=this._options)===null||t===void 0?void 0:t._profName)?new Jo(this._options._profName):void 0}get event(){return this._event||(this._event=(e,t,n)=>{var i;this._listeners||(this._listeners=new Lr);const s=this._listeners.isEmpty();s&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const o=this._listeners.push(t?[e,t]:e);s&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const a=(i=this._leakageMon)===null||i===void 0?void 0:i.check(this._listeners.size);let l;return l={dispose:()=>{a&&a(),l.dispose=$t._noop,this._disposed||(o(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))}},n instanceof gi?n.add(l):Array.isArray(n)&&n.push(l),l}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new Lr);for(let i of this._listeners)this._deliveryQueue.push([i,e]);for((t=this._perfMon)===null||t===void 0||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[i,s]=this._deliveryQueue.shift();try{typeof i=="function"?i.call(void 0,s):i[0].call(i[1],s)}catch(o){En(o)}}(n=this._perfMon)===null||n===void 0||n.stop()}}dispose(){var e,t,n,i,s;this._disposed||(this._disposed=!0,(e=this._listeners)===null||e===void 0||e.clear(),(t=this._deliveryQueue)===null||t===void 0||t.clear(),(i=(n=this._options)===null||n===void 0?void 0:n.onLastListenerRemove)===null||i===void 0||i.call(n),(s=this._leakageMon)===null||s===void 0||s.dispose())}}$t._noop=function(){};class Lo extends $t{constructor(e){super(e);this._isPaused=0,this._eventQueue=new Lr,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused==0)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class Oa extends Lo{constructor(e){var t;super(e);this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class ea{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,i)=>e(s=>{const o=this.buffers[this.buffers.length-1];o?o.push(()=>t.call(n,s)):t.call(n,s)},void 0,i)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e();return this.buffers.pop(),t.forEach(i=>i()),n}}class ao{constructor(){this.listening=!1,this.inputEvent=ei.None,this.inputEventListener=Rn.None,this.emitter=new $t({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const _a=Object.freeze(function(r,e){const t=setTimeout(r.bind(e),0);return{dispose(){clearTimeout(t)}}});var Ls;(function(r){function e(t){return t===r.None||t===r.Cancelled||t instanceof ta?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}r.isCancellationToken=e,r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ei.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:_a})})(Ls||(Ls={}));class ta{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?_a:(this._emitter||(this._emitter=new $t),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class ya{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new ta),this._token}cancel(){this._token?this._token instanceof ta&&this._token.cancel():this._token=Ls.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof ta&&this._token.dispose():this._token=Ls.None}}class Ka{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const fl=new Ka,Pl=new Ka,Ga=new Ka;(function(){function r(e,t,n=t,i=n){fl.define(e,t),Pl.define(e,n),Ga.define(e,i)}r(0,"unknown"),r(1,"Backspace"),r(2,"Tab"),r(3,"Enter"),r(4,"Shift"),r(5,"Ctrl"),r(6,"Alt"),r(7,"PauseBreak"),r(8,"CapsLock"),r(9,"Escape"),r(10,"Space"),r(11,"PageUp"),r(12,"PageDown"),r(13,"End"),r(14,"Home"),r(15,"LeftArrow","Left"),r(16,"UpArrow","Up"),r(17,"RightArrow","Right"),r(18,"DownArrow","Down"),r(19,"Insert"),r(20,"Delete"),r(21,"0"),r(22,"1"),r(23,"2"),r(24,"3"),r(25,"4"),r(26,"5"),r(27,"6"),r(28,"7"),r(29,"8"),r(30,"9"),r(31,"A"),r(32,"B"),r(33,"C"),r(34,"D"),r(35,"E"),r(36,"F"),r(37,"G"),r(38,"H"),r(39,"I"),r(40,"J"),r(41,"K"),r(42,"L"),r(43,"M"),r(44,"N"),r(45,"O"),r(46,"P"),r(47,"Q"),r(48,"R"),r(49,"S"),r(50,"T"),r(51,"U"),r(52,"V"),r(53,"W"),r(54,"X"),r(55,"Y"),r(56,"Z"),r(57,"Meta"),r(58,"ContextMenu"),r(59,"F1"),r(60,"F2"),r(61,"F3"),r(62,"F4"),r(63,"F5"),r(64,"F6"),r(65,"F7"),r(66,"F8"),r(67,"F9"),r(68,"F10"),r(69,"F11"),r(70,"F12"),r(71,"F13"),r(72,"F14"),r(73,"F15"),r(74,"F16"),r(75,"F17"),r(76,"F18"),r(77,"F19"),r(78,"NumLock"),r(79,"ScrollLock"),r(80,";",";","OEM_1"),r(81,"=","=","OEM_PLUS"),r(82,",",",","OEM_COMMA"),r(83,"-","-","OEM_MINUS"),r(84,".",".","OEM_PERIOD"),r(85,"/","/","OEM_2"),r(86,"`","`","OEM_3"),r(110,"ABNT_C1"),r(111,"ABNT_C2"),r(87,"[","[","OEM_4"),r(88,"\\","\\","OEM_5"),r(89,"]","]","OEM_6"),r(90,"'","'","OEM_7"),r(91,"OEM_8"),r(92,"OEM_102"),r(93,"NumPad0"),r(94,"NumPad1"),r(95,"NumPad2"),r(96,"NumPad3"),r(97,"NumPad4"),r(98,"NumPad5"),r(99,"NumPad6"),r(100,"NumPad7"),r(101,"NumPad8"),r(102,"NumPad9"),r(103,"NumPad_Multiply"),r(104,"NumPad_Add"),r(105,"NumPad_Separator"),r(106,"NumPad_Subtract"),r(107,"NumPad_Decimal"),r(108,"NumPad_Divide")})();var Ya;(function(r){function e(o){return fl.keyCodeToStr(o)}r.toString=e;function t(o){return fl.strToKeyCode(o)}r.fromString=t;function n(o){return Pl.keyCodeToStr(o)}r.toUserSettingsUS=n;function i(o){return Ga.keyCodeToStr(o)}r.toUserSettingsGeneral=i;function s(o){return Pl.strToKeyCode(o)||Ga.strToKeyCode(o)}r.fromUserSettings=s})(Ya||(Ya={}));function bc(r,e){const t=(e&65535)<<16>>>0;return(r|t)>>>0}function se(r,e){if(r===0)return null;const t=(r&65535)>>>0,n=(r&4294901760)>>>16;return n!==0?new Wt([Ie(t,e),Ie(n,e)]):new Wt([Ie(t,e)])}function Ie(r,e){const t=!!(r&2048),n=!!(r&256),i=e===2?n:t,s=!!(r&1024),o=!!(r&512),a=e===2?t:n,l=r&255;return new Je(i,s,o,a,l)}class Je{constructor(e,t,n,i,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyCode=s}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new Wt([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class Wt{constructor(e){if(e.length===0)throw Jn("parts");this.parts=e}}class gn{constructor(e,t,n,i,s,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyLabel=s,this.keyAriaLabel=o}}class Nn{}var $n=fn(97671);let Un;if(typeof ie.vscode!="undefined"&&typeof ie.vscode.process!="undefined"){const r=ie.vscode.process;Un={get platform(){return r.platform},get env(){return r.env},cwd(){return r.cwd()},nextTick(e){return De(e)}}}else typeof $n!="undefined"?Un={get platform(){return $n.platform},get env(){return{NODE_ENV:"production"}},cwd(){return{NODE_ENV:"production"}.VSCODE_CWD||$n.cwd()},nextTick(r){return $n.nextTick(r)}}:Un={get platform(){return pe?"win32":ae?"darwin":"linux"},nextTick(r){return De(r)},get env(){return{}},cwd(){return"/"}};const Ei=Un.cwd,Ti=Un.env,Hi=Un.platform,Mi=65,xi=97,Ir=90,xr=122,Or=46,x=47,$=92,re=58,ge=63;class Re extends Error{constructor(e,t,n){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";const s=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${s} ${i} of type ${t}`;o+=`. Received type ${typeof n}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function m(r,e){if(typeof r!="string")throw new Re(e,"string",r)}function S(r){return r===x||r===$}function j(r){return r===x}function Y(r){return r>=Mi&&r<=Ir||r>=xi&&r<=xr}function he(r,e,t,n){let i="",s=0,o=-1,a=0,l=0;for(let u=0;u<=r.length;++u){if(u<r.length)l=r.charCodeAt(u);else{if(n(l))break;l=x}if(n(l)){if(!(o===u-1||a===1))if(a===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==Or||i.charCodeAt(i.length-2)!==Or){if(i.length>2){const h=i.lastIndexOf(t);h===-1?(i="",s=0):(i=i.slice(0,h),s=i.length-1-i.lastIndexOf(t)),o=u,a=0;continue}else if(i.length!==0){i="",s=0,o=u,a=0;continue}}e&&(i+=i.length>0?`${t}..`:"..",s=2)}else i.length>0?i+=`${t}${r.slice(o+1,u)}`:i=r.slice(o+1,u),s=u-o-1;o=u,a=0}else l===Or&&a!==-1?++a:a=-1}return i}function ye(r,e){if(e===null||typeof e!="object")throw new Re("pathObject","Object",e);const t=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${n}`:`${t}${r}${n}`:n}const ke={resolve(...r){let e="",t="",n=!1;for(let i=r.length-1;i>=-1;i--){let s;if(i>=0){if(s=r[i],m(s,"path"),s.length===0)continue}else e.length===0?s=Ei():(s={NODE_ENV:"production"}[`=${e}`]||Ei(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===$)&&(s=`${e}\\`));const o=s.length;let a=0,l="",u=!1;const h=s.charCodeAt(0);if(o===1)S(h)&&(a=1,u=!0);else if(S(h))if(u=!0,S(s.charCodeAt(1))){let v=2,N=v;for(;v<o&&!S(s.charCodeAt(v));)v++;if(v<o&&v!==N){const P=s.slice(N,v);for(N=v;v<o&&S(s.charCodeAt(v));)v++;if(v<o&&v!==N){for(N=v;v<o&&!S(s.charCodeAt(v));)v++;(v===o||v!==N)&&(l=`\\\\${P}\\${s.slice(N,v)}`,a=v)}}}else a=1;else Y(h)&&s.charCodeAt(1)===re&&(l=s.slice(0,2),a=2,o>2&&S(s.charCodeAt(2))&&(u=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${s.slice(a)}\\${t}`,n=u,u&&e.length>0)break}return t=he(t,!n,"\\",S),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(r){m(r,"path");const e=r.length;if(e===0)return".";let t=0,n,i=!1;const s=r.charCodeAt(0);if(e===1)return j(s)?"\\":r;if(S(s))if(i=!0,S(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!S(r.charCodeAt(a));)a++;if(a<e&&a!==l){const u=r.slice(l,a);for(l=a;a<e&&S(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!S(r.charCodeAt(a));)a++;if(a===e)return`\\\\${u}\\${r.slice(l)}\\`;a!==l&&(n=`\\\\${u}\\${r.slice(l,a)}`,t=a)}}}else t=1;else Y(s)&&r.charCodeAt(1)===re&&(n=r.slice(0,2),t=2,e>2&&S(r.charCodeAt(2))&&(i=!0,t=3));let o=t<e?he(r.slice(t),!i,"\\",S):"";return o.length===0&&!i&&(o="."),o.length>0&&S(r.charCodeAt(e-1))&&(o+="\\"),n===void 0?i?`\\${o}`:o:i?`${n}\\${o}`:`${n}${o}`},isAbsolute(r){m(r,"path");const e=r.length;if(e===0)return!1;const t=r.charCodeAt(0);return S(t)||e>2&&Y(t)&&r.charCodeAt(1)===re&&S(r.charCodeAt(2))},join(...r){if(r.length===0)return".";let e,t;for(let s=0;s<r.length;++s){const o=r[s];m(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof t=="string"&&S(t.charCodeAt(0))){++i;const s=t.length;s>1&&S(t.charCodeAt(1))&&(++i,s>2&&(S(t.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&S(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ke.normalize(e)},relative(r,e){if(m(r,"from"),m(e,"to"),r===e)return"";const t=ke.resolve(r),n=ke.resolve(e);if(t===n||(r=t.toLowerCase(),e=n.toLowerCase(),r===e))return"";let i=0;for(;i<r.length&&r.charCodeAt(i)===$;)i++;let s=r.length;for(;s-1>i&&r.charCodeAt(s-1)===$;)s--;const o=s-i;let a=0;for(;a<e.length&&e.charCodeAt(a)===$;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===$;)l--;const u=l-a,h=o<u?o:u;let v=-1,N=0;for(;N<h;N++){const K=r.charCodeAt(i+N);if(K!==e.charCodeAt(a+N))break;K===$&&(v=N)}if(N!==h){if(v===-1)return n}else{if(u>h){if(e.charCodeAt(a+N)===$)return n.slice(a+N+1);if(N===2)return n.slice(a+N)}o>h&&(r.charCodeAt(i+N)===$?v=N:N===2&&(v=3)),v===-1&&(v=0)}let P="";for(N=i+v+1;N<=s;++N)(N===s||r.charCodeAt(N)===$)&&(P+=P.length===0?"..":"\\..");return a+=v,P.length>0?`${P}${n.slice(a,l)}`:(n.charCodeAt(a)===$&&++a,n.slice(a,l))},toNamespacedPath(r){if(typeof r!="string")return r;if(r.length===0)return"";const e=ke.resolve(r);if(e.length<=2)return r;if(e.charCodeAt(0)===$){if(e.charCodeAt(1)===$){const t=e.charCodeAt(2);if(t!==ge&&t!==Or)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Y(e.charCodeAt(0))&&e.charCodeAt(1)===re&&e.charCodeAt(2)===$)return`\\\\?\\${e}`;return r},dirname(r){m(r,"path");const e=r.length;if(e===0)return".";let t=-1,n=0;const i=r.charCodeAt(0);if(e===1)return S(i)?r:".";if(S(i)){if(t=n=1,S(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!S(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&S(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!S(r.charCodeAt(a));)a++;if(a===e)return r;a!==l&&(t=n=a+1)}}}}else Y(i)&&r.charCodeAt(1)===re&&(t=e>2&&S(r.charCodeAt(2))?3:2,n=t);let s=-1,o=!0;for(let a=e-1;a>=n;--a)if(S(r.charCodeAt(a))){if(!o){s=a;break}}else o=!1;if(s===-1){if(t===-1)return".";s=t}return r.slice(0,s)},basename(r,e){e!==void 0&&m(e,"ext"),m(r,"path");let t=0,n=-1,i=!0,s;if(r.length>=2&&Y(r.charCodeAt(0))&&r.charCodeAt(1)===re&&(t=2),e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let o=e.length-1,a=-1;for(s=r.length-1;s>=t;--s){const l=r.charCodeAt(s);if(S(l)){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o==-1&&(n=s):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(s=r.length-1;s>=t;--s)if(S(r.charCodeAt(s))){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":r.slice(t,n)},extname(r){m(r,"path");let e=0,t=-1,n=0,i=-1,s=!0,o=0;r.length>=2&&r.charCodeAt(1)===re&&Y(r.charCodeAt(0))&&(e=n=2);for(let a=r.length-1;a>=e;--a){const l=r.charCodeAt(a);if(S(l)){if(!s){n=a+1;break}continue}i===-1&&(s=!1,i=a+1),l===Or?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||i===-1||o===0||o===1&&t===i-1&&t===n+1?"":r.slice(t,i)},format:ye.bind(null,"\\"),parse(r){m(r,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;const t=r.length;let n=0,i=r.charCodeAt(0);if(t===1)return S(i)?(e.root=e.dir=r,e):(e.base=e.name=r,e);if(S(i)){if(n=1,S(r.charCodeAt(1))){let v=2,N=v;for(;v<t&&!S(r.charCodeAt(v));)v++;if(v<t&&v!==N){for(N=v;v<t&&S(r.charCodeAt(v));)v++;if(v<t&&v!==N){for(N=v;v<t&&!S(r.charCodeAt(v));)v++;v===t?n=v:v!==N&&(n=v+1)}}}}else if(Y(i)&&r.charCodeAt(1)===re){if(t<=2)return e.root=e.dir=r,e;if(n=2,S(r.charCodeAt(2))){if(t===3)return e.root=e.dir=r,e;n=3}}n>0&&(e.root=r.slice(0,n));let s=-1,o=n,a=-1,l=!0,u=r.length-1,h=0;for(;u>=n;--u){if(i=r.charCodeAt(u),S(i)){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),i===Or?s===-1?s=u:h!==1&&(h=1):s!==-1&&(h=-1)}return a!==-1&&(s===-1||h===0||h===1&&s===a-1&&s===o+1?e.base=e.name=r.slice(o,a):(e.name=r.slice(o,s),e.base=r.slice(o,a),e.ext=r.slice(s,a))),o>0&&o!==n?e.dir=r.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Ve={resolve(...r){let e="",t=!1;for(let n=r.length-1;n>=-1&&!t;n--){const i=n>=0?r[n]:Ei();m(i,"path"),i.length!==0&&(e=`${i}/${e}`,t=i.charCodeAt(0)===x)}return e=he(e,!t,"/",j),t?`/${e}`:e.length>0?e:"."},normalize(r){if(m(r,"path"),r.length===0)return".";const e=r.charCodeAt(0)===x,t=r.charCodeAt(r.length-1)===x;return r=he(r,!e,"/",j),r.length===0?e?"/":t?"./":".":(t&&(r+="/"),e?`/${r}`:r)},isAbsolute(r){return m(r,"path"),r.length>0&&r.charCodeAt(0)===x},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const n=r[t];m(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Ve.normalize(e)},relative(r,e){if(m(r,"from"),m(e,"to"),r===e||(r=Ve.resolve(r),e=Ve.resolve(e),r===e))return"";const t=1,n=r.length,i=n-t,s=1,o=e.length-s,a=i<o?i:o;let l=-1,u=0;for(;u<a;u++){const v=r.charCodeAt(t+u);if(v!==e.charCodeAt(s+u))break;v===x&&(l=u)}if(u===a)if(o>a){if(e.charCodeAt(s+u)===x)return e.slice(s+u+1);if(u===0)return e.slice(s+u)}else i>a&&(r.charCodeAt(t+u)===x?l=u:u===0&&(l=0));let h="";for(u=t+l+1;u<=n;++u)(u===n||r.charCodeAt(u)===x)&&(h+=h.length===0?"..":"/..");return`${h}${e.slice(s+l)}`},toNamespacedPath(r){return r},dirname(r){if(m(r,"path"),r.length===0)return".";const e=r.charCodeAt(0)===x;let t=-1,n=!0;for(let i=r.length-1;i>=1;--i)if(r.charCodeAt(i)===x){if(!n){t=i;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":r.slice(0,t)},basename(r,e){e!==void 0&&m(e,"ext"),m(r,"path");let t=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let o=e.length-1,a=-1;for(s=r.length-1;s>=0;--s){const l=r.charCodeAt(s);if(l===x){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o==-1&&(n=s):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===x){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":r.slice(t,n)},extname(r){m(r,"path");let e=-1,t=0,n=-1,i=!0,s=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===x){if(!i){t=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===Or?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":r.slice(e,n)},format:ye.bind(null,"/"),parse(r){m(r,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;const t=r.charCodeAt(0)===x;let n;t?(e.root="/",n=1):n=0;let i=-1,s=0,o=-1,a=!0,l=r.length-1,u=0;for(;l>=n;--l){const h=r.charCodeAt(l);if(h===x){if(!a){s=l+1;break}continue}o===-1&&(a=!1,o=l+1),h===Or?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(o!==-1){const h=s===0&&t?1:s;i===-1||u===0||u===1&&i===o-1&&i===s+1?e.base=e.name=r.slice(h,o):(e.name=r.slice(h,i),e.base=r.slice(h,o),e.ext=r.slice(i,o))}return s>0?e.dir=r.slice(0,s-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Ve.win32=ke.win32=ke,Ve.posix=ke.posix=Ve;const Xe=Hi==="win32"?ke.normalize:Ve.normalize,wt=Hi==="win32"?ke.resolve:Ve.resolve,tn=Hi==="win32"?ke.relative:Ve.relative,mn=Hi==="win32"?ke.dirname:Ve.dirname,Xt=Hi==="win32"?ke.basename:Ve.basename,Ln=Hi==="win32"?ke.extname:Ve.extname,si=Hi==="win32"?ke.sep:Ve.sep,ni=/^\w[\w\d+.-]*$/,Gn=/^\//,ur=/^\/\//;function zi(r,e){if(!r.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${r.authority}", path: "${r.path}", query: "${r.query}", fragment: "${r.fragment}"}`);if(r.scheme&&!ni.test(r.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(r.path){if(r.authority){if(!Gn.test(r.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(ur.test(r.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function hr(r,e){return!r&&!e?"file":r}function ji(r,e){switch(r){case"https":case"http":case"file":e?e[0]!==vr&&(e=vr+e):e=vr;break}return e}const ai="",vr="/",cr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class ci{constructor(e,t,n,i,s,o=!1){typeof e=="object"?(this.scheme=e.scheme||ai,this.authority=e.authority||ai,this.path=e.path||ai,this.query=e.query||ai,this.fragment=e.fragment||ai):(this.scheme=hr(e,o),this.authority=t||ai,this.path=ji(this.scheme,n||ai),this.query=i||ai,this.fragment=s||ai,zi(this,o))}static isUri(e){return e instanceof ci?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return Vr(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:i,query:s,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=ai),n===void 0?n=this.authority:n===null&&(n=ai),i===void 0?i=this.path:i===null&&(i=ai),s===void 0?s=this.query:s===null&&(s=ai),o===void 0?o=this.fragment:o===null&&(o=ai),t===this.scheme&&n===this.authority&&i===this.path&&s===this.query&&o===this.fragment?this:new Gs(t,n,i,s,o)}static parse(e,t=!1){const n=cr.exec(e);return n?new Gs(n[2]||ai,ba(n[4]||ai),ba(n[5]||ai),ba(n[7]||ai),ba(n[9]||ai),t):new Gs(ai,ai,ai,ai,ai)}static file(e){let t=ai;if(pe&&(e=e.replace(/\\/g,vr)),e[0]===vr&&e[1]===vr){const n=e.indexOf(vr,2);n===-1?(t=e.substring(2),e=vr):(t=e.substring(2,n),e=e.substring(n)||vr)}return new Gs("file",t,e,ai,ai)}static from(e){const t=new Gs(e.scheme,e.authority,e.path,e.query,e.fragment);return zi(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return pe&&e.scheme==="file"?n=ci.file(ke.join(Vr(e,!0),...t)).path:n=Ve.join(e.path,...t),e.with({path:n})}toString(e=!1){return Do(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof ci)return e;{const t=new Gs(e);return t._formatted=e.external,t._fsPath=e._sep===ns?e.fsPath:null,t}}else return e}}const ns=pe?1:void 0;class Gs extends ci{constructor(){super(...arguments);this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Vr(this,!1)),this._fsPath}toString(e=!1){return e?Do(this,!0):(this._formatted||(this._formatted=Do(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=ns),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const Xr={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function Hs(r,e){let t,n=-1;for(let i=0;i<r.length;i++){const s=r.charCodeAt(i);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47)n!==-1&&(t+=encodeURIComponent(r.substring(n,i)),n=-1),t!==void 0&&(t+=r.charAt(i));else{t===void 0&&(t=r.substr(0,i));const o=Xr[s];o!==void 0?(n!==-1&&(t+=encodeURIComponent(r.substring(n,i)),n=-1),t+=o):n===-1&&(n=i)}}return n!==-1&&(t+=encodeURIComponent(r.substring(n))),t!==void 0?t:r}function xo(r){let e;for(let t=0;t<r.length;t++){const n=r.charCodeAt(t);n===35||n===63?(e===void 0&&(e=r.substr(0,t)),e+=Xr[n]):e!==void 0&&(e+=r[t])}return e!==void 0?e:r}function Vr(r,e){let t;return r.authority&&r.path.length>1&&r.scheme==="file"?t=`//${r.authority}${r.path}`:r.path.charCodeAt(0)===47&&(r.path.charCodeAt(1)>=65&&r.path.charCodeAt(1)<=90||r.path.charCodeAt(1)>=97&&r.path.charCodeAt(1)<=122)&&r.path.charCodeAt(2)===58?e?t=r.path.substr(1):t=r.path[1].toLowerCase()+r.path.substr(2):t=r.path,pe&&(t=t.replace(/\//g,"\\")),t}function Do(r,e){const t=e?xo:Hs;let n="",{scheme:i,authority:s,path:o,query:a,fragment:l}=r;if(i&&(n+=i,n+=":"),(s||i==="file")&&(n+=vr,n+=vr),s){let u=s.indexOf("@");if(u!==-1){const h=s.substr(0,u);s=s.substr(u+1),u=h.indexOf(":"),u===-1?n+=t(h,!1):(n+=t(h.substr(0,u),!1),n+=":",n+=t(h.substr(u+1),!1)),n+="@"}s=s.toLowerCase(),u=s.indexOf(":"),u===-1?n+=t(s,!1):(n+=t(s.substr(0,u),!1),n+=s.substr(u))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const u=o.charCodeAt(1);u>=65&&u<=90&&(o=`/${String.fromCharCode(u+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const u=o.charCodeAt(0);u>=65&&u<=90&&(o=`${String.fromCharCode(u+32)}:${o.substr(2)}`)}n+=t(o,!0)}return a&&(n+="?",n+=t(a,!1)),l&&(n+="#",n+=e?l:Hs(l,!1)),n}function ir(r){try{return decodeURIComponent(r)}catch(e){return r.length>3?r.substr(0,3)+ir(r.substr(3)):r}}const Ts=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ba(r){return r.match(Ts)?r.replace(Ts,e=>ir(e)):r}class dn{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new dn(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return dn.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return dn.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return dn.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let n=e.lineNumber|0,i=t.lineNumber|0;if(n===i){let s=e.column|0,o=t.column|0;return s-o}return n-i}clone(){return new dn(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new dn(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}}class Mt{constructor(e,t,n,i){e>n||e===n&&t>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return Mt.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Mt.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}containsRange(e){return Mt.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Mt.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Mt.plusRange(this,e)}static plusRange(e,t){let n,i,s,o;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(s=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(s=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(s=e.endLineNumber,o=e.endColumn),new Mt(n,i,s,o)}intersectRanges(e){return Mt.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,o=e.endColumn,a=t.startLineNumber,l=t.startColumn,u=t.endLineNumber,h=t.endColumn;return n<a?(n=a,i=l):n===a&&(i=Math.max(i,l)),s>u?(s=u,o=h):s===u&&(o=Math.min(o,h)),n>s||n===s&&i>o?null:new Mt(n,i,s,o)}equalsRange(e){return Mt.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Mt.getEndPosition(this)}static getEndPosition(e){return new dn(e.endLineNumber,e.endColumn)}getStartPosition(){return Mt.getStartPosition(this)}static getStartPosition(e){return new dn(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Mt(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Mt(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Mt.collapseToStart(this)}static collapseToStart(e){return new Mt(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new Mt(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Mt(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const s=e.startLineNumber|0,o=t.startLineNumber|0;if(s===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const u=e.endLineNumber|0,h=t.endLineNumber|0;if(u===h){const v=e.endColumn|0,N=t.endColumn|0;return v-N}return u-h}return a-l}return s-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}}class oi extends Mt{constructor(e,t,n,i){super(e,t,n,i);this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=i}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return oi.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new oi(this.startLineNumber,this.startColumn,e,t):new oi(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new dn(this.positionLineNumber,this.positionColumn)}setStartPosition(e,t){return this.getDirection()===0?new oi(e,t,this.endLineNumber,this.endColumn):new oi(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new oi(e.lineNumber,e.column,t.lineNumber,t.column)}static liftSelection(e){return new oi(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,i,s){return s===0?new oi(e,t,n,i):new oi(n,i,e,t)}}class lo{constructor(e,t,n){this._tokenBrand=void 0,this.offset=e|0,this.type=t,this.language=n}toString(){return"("+this.offset+", "+this.type+")"}}class na{constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}class gl{constructor(e,t){this._tokenizationResult2Brand=void 0,this.tokens=e,this.endState=t}}var au;(function(r){r[r.Unknown=0]="Unknown",r[r.Disabled=1]="Disabled",r[r.Enabled=2]="Enabled"})(au||(au={}));var Ms;(function(r){r[r.KeepWhitespace=1]="KeepWhitespace",r[r.InsertAsSnippet=4]="InsertAsSnippet"})(Ms||(Ms={}));var Za;(function(r){r[r.Method=0]="Method",r[r.Function=1]="Function",r[r.Constructor=2]="Constructor",r[r.Field=3]="Field",r[r.Variable=4]="Variable",r[r.Class=5]="Class",r[r.Struct=6]="Struct",r[r.Interface=7]="Interface",r[r.Module=8]="Module",r[r.Property=9]="Property",r[r.Event=10]="Event",r[r.Operator=11]="Operator",r[r.Unit=12]="Unit",r[r.Value=13]="Value",r[r.Constant=14]="Constant",r[r.Enum=15]="Enum",r[r.EnumMember=16]="EnumMember",r[r.Keyword=17]="Keyword",r[r.Text=18]="Text",r[r.Color=19]="Color",r[r.File=20]="File",r[r.Reference=21]="Reference",r[r.Customcolor=22]="Customcolor",r[r.Folder=23]="Folder",r[r.TypeParameter=24]="TypeParameter",r[r.User=25]="User",r[r.Issue=26]="Issue",r[r.Snippet=27]="Snippet"})(Za||(Za={}));var Xa;(function(r){r[r.Deprecated=1]="Deprecated"})(Xa||(Xa={}));var Hu;(function(r){r[r.Invoke=0]="Invoke",r[r.TriggerCharacter=1]="TriggerCharacter",r[r.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Hu||(Hu={}));var zu;(function(r){r[r.EXACT=0]="EXACT",r[r.ABOVE=1]="ABOVE",r[r.BELOW=2]="BELOW"})(zu||(zu={}));var Bo;(function(r){r[r.NotSet=0]="NotSet",r[r.ContentFlush=1]="ContentFlush",r[r.RecoverFromMarkers=2]="RecoverFromMarkers",r[r.Explicit=3]="Explicit",r[r.Paste=4]="Paste",r[r.Undo=5]="Undo",r[r.Redo=6]="Redo"})(Bo||(Bo={}));var Fl;(function(r){r[r.LF=1]="LF",r[r.CRLF=2]="CRLF"})(Fl||(Fl={}));var lu;(function(r){r[r.Text=0]="Text",r[r.Read=1]="Read",r[r.Write=2]="Write"})(lu||(lu={}));var Io;(function(r){r[r.None=0]="None",r[r.Keep=1]="Keep",r[r.Brackets=2]="Brackets",r[r.Advanced=3]="Advanced",r[r.Full=4]="Full"})(Io||(Io={}));var Wo;(function(r){r[r.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",r[r.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",r[r.accessibilitySupport=2]="accessibilitySupport",r[r.accessibilityPageSize=3]="accessibilityPageSize",r[r.ariaLabel=4]="ariaLabel",r[r.autoClosingBrackets=5]="autoClosingBrackets",r[r.autoClosingDelete=6]="autoClosingDelete",r[r.autoClosingOvertype=7]="autoClosingOvertype",r[r.autoClosingQuotes=8]="autoClosingQuotes",r[r.autoIndent=9]="autoIndent",r[r.automaticLayout=10]="automaticLayout",r[r.autoSurround=11]="autoSurround",r[r.codeLens=12]="codeLens",r[r.codeLensFontFamily=13]="codeLensFontFamily",r[r.codeLensFontSize=14]="codeLensFontSize",r[r.colorDecorators=15]="colorDecorators",r[r.columnSelection=16]="columnSelection",r[r.comments=17]="comments",r[r.contextmenu=18]="contextmenu",r[r.copyWithSyntaxHighlighting=19]="copyWithSyntaxHighlighting",r[r.cursorBlinking=20]="cursorBlinking",r[r.cursorSmoothCaretAnimation=21]="cursorSmoothCaretAnimation",r[r.cursorStyle=22]="cursorStyle",r[r.cursorSurroundingLines=23]="cursorSurroundingLines",r[r.cursorSurroundingLinesStyle=24]="cursorSurroundingLinesStyle",r[r.cursorWidth=25]="cursorWidth",r[r.disableLayerHinting=26]="disableLayerHinting",r[r.disableMonospaceOptimizations=27]="disableMonospaceOptimizations",r[r.domReadOnly=28]="domReadOnly",r[r.dragAndDrop=29]="dragAndDrop",r[r.emptySelectionClipboard=30]="emptySelectionClipboard",r[r.extraEditorClassName=31]="extraEditorClassName",r[r.fastScrollSensitivity=32]="fastScrollSensitivity",r[r.find=33]="find",r[r.fixedOverflowWidgets=34]="fixedOverflowWidgets",r[r.folding=35]="folding",r[r.foldingStrategy=36]="foldingStrategy",r[r.foldingHighlight=37]="foldingHighlight",r[r.unfoldOnClickAfterEndOfLine=38]="unfoldOnClickAfterEndOfLine",r[r.fontFamily=39]="fontFamily",r[r.fontInfo=40]="fontInfo",r[r.fontLigatures=41]="fontLigatures",r[r.fontSize=42]="fontSize",r[r.fontWeight=43]="fontWeight",r[r.formatOnPaste=44]="formatOnPaste",r[r.formatOnType=45]="formatOnType",r[r.glyphMargin=46]="glyphMargin",r[r.gotoLocation=47]="gotoLocation",r[r.hideCursorInOverviewRuler=48]="hideCursorInOverviewRuler",r[r.highlightActiveIndentGuide=49]="highlightActiveIndentGuide",r[r.hover=50]="hover",r[r.inDiffEditor=51]="inDiffEditor",r[r.inlineSuggest=52]="inlineSuggest",r[r.letterSpacing=53]="letterSpacing",r[r.lightbulb=54]="lightbulb",r[r.lineDecorationsWidth=55]="lineDecorationsWidth",r[r.lineHeight=56]="lineHeight",r[r.lineNumbers=57]="lineNumbers",r[r.lineNumbersMinChars=58]="lineNumbersMinChars",r[r.linkedEditing=59]="linkedEditing",r[r.links=60]="links",r[r.matchBrackets=61]="matchBrackets",r[r.minimap=62]="minimap",r[r.mouseStyle=63]="mouseStyle",r[r.mouseWheelScrollSensitivity=64]="mouseWheelScrollSensitivity",r[r.mouseWheelZoom=65]="mouseWheelZoom",r[r.multiCursorMergeOverlapping=66]="multiCursorMergeOverlapping",r[r.multiCursorModifier=67]="multiCursorModifier",r[r.multiCursorPaste=68]="multiCursorPaste",r[r.occurrencesHighlight=69]="occurrencesHighlight",r[r.overviewRulerBorder=70]="overviewRulerBorder",r[r.overviewRulerLanes=71]="overviewRulerLanes",r[r.padding=72]="padding",r[r.parameterHints=73]="parameterHints",r[r.peekWidgetDefaultFocus=74]="peekWidgetDefaultFocus",r[r.definitionLinkOpensInPeek=75]="definitionLinkOpensInPeek",r[r.quickSuggestions=76]="quickSuggestions",r[r.quickSuggestionsDelay=77]="quickSuggestionsDelay",r[r.readOnly=78]="readOnly",r[r.renameOnType=79]="renameOnType",r[r.renderControlCharacters=80]="renderControlCharacters",r[r.renderIndentGuides=81]="renderIndentGuides",r[r.renderFinalNewline=82]="renderFinalNewline",r[r.renderLineHighlight=83]="renderLineHighlight",r[r.renderLineHighlightOnlyWhenFocus=84]="renderLineHighlightOnlyWhenFocus",r[r.renderValidationDecorations=85]="renderValidationDecorations",r[r.renderWhitespace=86]="renderWhitespace",r[r.revealHorizontalRightPadding=87]="revealHorizontalRightPadding",r[r.roundedSelection=88]="roundedSelection",r[r.rulers=89]="rulers",r[r.scrollbar=90]="scrollbar",r[r.scrollBeyondLastColumn=91]="scrollBeyondLastColumn",r[r.scrollBeyondLastLine=92]="scrollBeyondLastLine",r[r.scrollPredominantAxis=93]="scrollPredominantAxis",r[r.selectionClipboard=94]="selectionClipboard",r[r.selectionHighlight=95]="selectionHighlight",r[r.selectOnLineNumbers=96]="selectOnLineNumbers",r[r.showFoldingControls=97]="showFoldingControls",r[r.showUnused=98]="showUnused",r[r.snippetSuggestions=99]="snippetSuggestions",r[r.smartSelect=100]="smartSelect",r[r.smoothScrolling=101]="smoothScrolling",r[r.stickyTabStops=102]="stickyTabStops",r[r.stopRenderingLineAfter=103]="stopRenderingLineAfter",r[r.suggest=104]="suggest",r[r.suggestFontSize=105]="suggestFontSize",r[r.suggestLineHeight=106]="suggestLineHeight",r[r.suggestOnTriggerCharacters=107]="suggestOnTriggerCharacters",r[r.suggestSelection=108]="suggestSelection",r[r.tabCompletion=109]="tabCompletion",r[r.tabIndex=110]="tabIndex",r[r.unusualLineTerminators=111]="unusualLineTerminators",r[r.useShadowDOM=112]="useShadowDOM",r[r.useTabStops=113]="useTabStops",r[r.wordSeparators=114]="wordSeparators",r[r.wordWrap=115]="wordWrap",r[r.wordWrapBreakAfterCharacters=116]="wordWrapBreakAfterCharacters",r[r.wordWrapBreakBeforeCharacters=117]="wordWrapBreakBeforeCharacters",r[r.wordWrapColumn=118]="wordWrapColumn",r[r.wordWrapOverride1=119]="wordWrapOverride1",r[r.wordWrapOverride2=120]="wordWrapOverride2",r[r.wrappingIndent=121]="wrappingIndent",r[r.wrappingStrategy=122]="wrappingStrategy",r[r.showDeprecated=123]="showDeprecated",r[r.inlayHints=124]="inlayHints",r[r.editorClassName=125]="editorClassName",r[r.pixelRatio=126]="pixelRatio",r[r.tabFocusMode=127]="tabFocusMode",r[r.layoutInfo=128]="layoutInfo",r[r.wrappingInfo=129]="wrappingInfo"})(Wo||(Wo={}));var _s;(function(r){r[r.TextDefined=0]="TextDefined",r[r.LF=1]="LF",r[r.CRLF=2]="CRLF"})(_s||(_s={}));var pl;(function(r){r[r.LF=0]="LF",r[r.CRLF=1]="CRLF"})(pl||(pl={}));var Bl;(function(r){r[r.None=0]="None",r[r.Indent=1]="Indent",r[r.IndentOutdent=2]="IndentOutdent",r[r.Outdent=3]="Outdent"})(Bl||(Bl={}));var No;(function(r){r[r.Other=0]="Other",r[r.Type=1]="Type",r[r.Parameter=2]="Parameter"})(No||(No={}));var _r;(function(r){r[r.Automatic=0]="Automatic",r[r.Explicit=1]="Explicit"})(_r||(_r={}));var xs;(function(r){r[r.DependsOnKbLayout=-1]="DependsOnKbLayout",r[r.Unknown=0]="Unknown",r[r.Backspace=1]="Backspace",r[r.Tab=2]="Tab",r[r.Enter=3]="Enter",r[r.Shift=4]="Shift",r[r.Ctrl=5]="Ctrl",r[r.Alt=6]="Alt",r[r.PauseBreak=7]="PauseBreak",r[r.CapsLock=8]="CapsLock",r[r.Escape=9]="Escape",r[r.Space=10]="Space",r[r.PageUp=11]="PageUp",r[r.PageDown=12]="PageDown",r[r.End=13]="End",r[r.Home=14]="Home",r[r.LeftArrow=15]="LeftArrow",r[r.UpArrow=16]="UpArrow",r[r.RightArrow=17]="RightArrow",r[r.DownArrow=18]="DownArrow",r[r.Insert=19]="Insert",r[r.Delete=20]="Delete",r[r.KEY_0=21]="KEY_0",r[r.KEY_1=22]="KEY_1",r[r.KEY_2=23]="KEY_2",r[r.KEY_3=24]="KEY_3",r[r.KEY_4=25]="KEY_4",r[r.KEY_5=26]="KEY_5",r[r.KEY_6=27]="KEY_6",r[r.KEY_7=28]="KEY_7",r[r.KEY_8=29]="KEY_8",r[r.KEY_9=30]="KEY_9",r[r.KEY_A=31]="KEY_A",r[r.KEY_B=32]="KEY_B",r[r.KEY_C=33]="KEY_C",r[r.KEY_D=34]="KEY_D",r[r.KEY_E=35]="KEY_E",r[r.KEY_F=36]="KEY_F",r[r.KEY_G=37]="KEY_G",r[r.KEY_H=38]="KEY_H",r[r.KEY_I=39]="KEY_I",r[r.KEY_J=40]="KEY_J",r[r.KEY_K=41]="KEY_K",r[r.KEY_L=42]="KEY_L",r[r.KEY_M=43]="KEY_M",r[r.KEY_N=44]="KEY_N",r[r.KEY_O=45]="KEY_O",r[r.KEY_P=46]="KEY_P",r[r.KEY_Q=47]="KEY_Q",r[r.KEY_R=48]="KEY_R",r[r.KEY_S=49]="KEY_S",r[r.KEY_T=50]="KEY_T",r[r.KEY_U=51]="KEY_U",r[r.KEY_V=52]="KEY_V",r[r.KEY_W=53]="KEY_W",r[r.KEY_X=54]="KEY_X",r[r.KEY_Y=55]="KEY_Y",r[r.KEY_Z=56]="KEY_Z",r[r.Meta=57]="Meta",r[r.ContextMenu=58]="ContextMenu",r[r.F1=59]="F1",r[r.F2=60]="F2",r[r.F3=61]="F3",r[r.F4=62]="F4",r[r.F5=63]="F5",r[r.F6=64]="F6",r[r.F7=65]="F7",r[r.F8=66]="F8",r[r.F9=67]="F9",r[r.F10=68]="F10",r[r.F11=69]="F11",r[r.F12=70]="F12",r[r.F13=71]="F13",r[r.F14=72]="F14",r[r.F15=73]="F15",r[r.F16=74]="F16",r[r.F17=75]="F17",r[r.F18=76]="F18",r[r.F19=77]="F19",r[r.NumLock=78]="NumLock",r[r.ScrollLock=79]="ScrollLock",r[r.US_SEMICOLON=80]="US_SEMICOLON",r[r.US_EQUAL=81]="US_EQUAL",r[r.US_COMMA=82]="US_COMMA",r[r.US_MINUS=83]="US_MINUS",r[r.US_DOT=84]="US_DOT",r[r.US_SLASH=85]="US_SLASH",r[r.US_BACKTICK=86]="US_BACKTICK",r[r.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",r[r.US_BACKSLASH=88]="US_BACKSLASH",r[r.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",r[r.US_QUOTE=90]="US_QUOTE",r[r.OEM_8=91]="OEM_8",r[r.OEM_102=92]="OEM_102",r[r.NUMPAD_0=93]="NUMPAD_0",r[r.NUMPAD_1=94]="NUMPAD_1",r[r.NUMPAD_2=95]="NUMPAD_2",r[r.NUMPAD_3=96]="NUMPAD_3",r[r.NUMPAD_4=97]="NUMPAD_4",r[r.NUMPAD_5=98]="NUMPAD_5",r[r.NUMPAD_6=99]="NUMPAD_6",r[r.NUMPAD_7=100]="NUMPAD_7",r[r.NUMPAD_8=101]="NUMPAD_8",r[r.NUMPAD_9=102]="NUMPAD_9",r[r.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",r[r.NUMPAD_ADD=104]="NUMPAD_ADD",r[r.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",r[r.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",r[r.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",r[r.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",r[r.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",r[r.ABNT_C1=110]="ABNT_C1",r[r.ABNT_C2=111]="ABNT_C2",r[r.MAX_VALUE=112]="MAX_VALUE"})(xs||(xs={}));var Kr;(function(r){r[r.Hint=1]="Hint",r[r.Info=2]="Info",r[r.Warning=4]="Warning",r[r.Error=8]="Error"})(Kr||(Kr={}));var qs;(function(r){r[r.Unnecessary=1]="Unnecessary",r[r.Deprecated=2]="Deprecated"})(qs||(qs={}));var uu;(function(r){r[r.Inline=1]="Inline",r[r.Gutter=2]="Gutter"})(uu||(uu={}));var Hr;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.TEXTAREA=1]="TEXTAREA",r[r.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",r[r.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",r[r.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",r[r.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",r[r.CONTENT_TEXT=6]="CONTENT_TEXT",r[r.CONTENT_EMPTY=7]="CONTENT_EMPTY",r[r.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",r[r.CONTENT_WIDGET=9]="CONTENT_WIDGET",r[r.OVERVIEW_RULER=10]="OVERVIEW_RULER",r[r.SCROLLBAR=11]="SCROLLBAR",r[r.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",r[r.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(Hr||(Hr={}));var ia;(function(r){r[r.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",r[r.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",r[r.TOP_CENTER=2]="TOP_CENTER"})(ia||(ia={}));var as;(function(r){r[r.Left=1]="Left",r[r.Center=2]="Center",r[r.Right=4]="Right",r[r.Full=7]="Full"})(as||(as={}));var Qs;(function(r){r[r.Off=0]="Off",r[r.On=1]="On",r[r.Relative=2]="Relative",r[r.Interval=3]="Interval",r[r.Custom=4]="Custom"})(Qs||(Qs={}));var uo;(function(r){r[r.None=0]="None",r[r.Text=1]="Text",r[r.Blocks=2]="Blocks"})(uo||(uo={}));var Qt;(function(r){r[r.Smooth=0]="Smooth",r[r.Immediate=1]="Immediate"})(Qt||(Qt={}));var Pn;(function(r){r[r.Auto=1]="Auto",r[r.Hidden=2]="Hidden",r[r.Visible=3]="Visible"})(Pn||(Pn={}));var xn;(function(r){r[r.LTR=0]="LTR",r[r.RTL=1]="RTL"})(xn||(xn={}));var pi;(function(r){r[r.Invoke=1]="Invoke",r[r.TriggerCharacter=2]="TriggerCharacter",r[r.ContentChange=3]="ContentChange"})(pi||(pi={}));var Wi;(function(r){r[r.File=0]="File",r[r.Module=1]="Module",r[r.Namespace=2]="Namespace",r[r.Package=3]="Package",r[r.Class=4]="Class",r[r.Method=5]="Method",r[r.Property=6]="Property",r[r.Field=7]="Field",r[r.Constructor=8]="Constructor",r[r.Enum=9]="Enum",r[r.Interface=10]="Interface",r[r.Function=11]="Function",r[r.Variable=12]="Variable",r[r.Constant=13]="Constant",r[r.String=14]="String",r[r.Number=15]="Number",r[r.Boolean=16]="Boolean",r[r.Array=17]="Array",r[r.Object=18]="Object",r[r.Key=19]="Key",r[r.Null=20]="Null",r[r.EnumMember=21]="EnumMember",r[r.Struct=22]="Struct",r[r.Event=23]="Event",r[r.Operator=24]="Operator",r[r.TypeParameter=25]="TypeParameter"})(Wi||(Wi={}));var At;(function(r){r[r.Deprecated=1]="Deprecated"})(At||(At={}));var bn;(function(r){r[r.Hidden=0]="Hidden",r[r.Blink=1]="Blink",r[r.Smooth=2]="Smooth",r[r.Phase=3]="Phase",r[r.Expand=4]="Expand",r[r.Solid=5]="Solid"})(bn||(bn={}));var sn;(function(r){r[r.Line=1]="Line",r[r.Block=2]="Block",r[r.Underline=3]="Underline",r[r.LineThin=4]="LineThin",r[r.BlockOutline=5]="BlockOutline",r[r.UnderlineThin=6]="UnderlineThin"})(sn||(sn={}));var fi;(function(r){r[r.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",r[r.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",r[r.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",r[r.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(fi||(fi={}));var Ji;(function(r){r[r.None=0]="None",r[r.Same=1]="Same",r[r.Indent=2]="Indent",r[r.DeepIndent=3]="DeepIndent"})(Ji||(Ji={}));class Ke{static chord(e,t){return bc(e,t)}}Ke.CtrlCmd=2048,Ke.Shift=1024,Ke.Alt=512,Ke.WinCtrl=256;function bt(){return{editor:void 0,languages:void 0,CancellationTokenSource:ya,Emitter:$t,KeyCode:xs,KeyMod:Ke,Position:dn,Range:Mt,Selection:oi,SelectionDirection:xn,MarkerSeverity:Kr,MarkerTag:qs,Uri:ci,Token:lo}}var xt;(function(r){r.serviceIds=new Map,r.DI_TARGET="$di$target",r.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[r.DI_DEPENDENCIES]||[]}r.getServiceDependencies=e})(xt||(xt={}));const Dn=Te("instantiationService");function on(r,e,t,n){e[xt.DI_TARGET]===e?e[xt.DI_DEPENDENCIES].push({id:r,index:t,optional:n}):(e[xt.DI_DEPENDENCIES]=[{id:r,index:t,optional:n}],e[xt.DI_TARGET]=e)}function Te(r){if(xt.serviceIds.has(r))return xt.serviceIds.get(r);const e=function(t,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");on(e,t,i,!1)};return e.toString=()=>r,xt.serviceIds.set(r,e),e}function Ye(r){return function(e,t,n){if(arguments.length!==3)throw new Error("@optional-decorator can only be used to decorate a parameter");on(r,e,n,!0)}}const ht=Te("codeEditorService");class Vt{constructor(){this._zoomLevel=0,this._lastZoomLevelChangeTime=0,this._onDidChangeZoomLevel=new $t,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this._zoomFactor=1}getZoomLevel(){return this._zoomLevel}getTimeSinceLastZoomLevelChanged(){return Date.now()-this._lastZoomLevelChangeTime}getZoomFactor(){return this._zoomFactor}getPixelRatio(){let e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}}Vt.INSTANCE=new Vt;function It(){return Vt.INSTANCE.getZoomLevel()}function cn(){return Vt.INSTANCE.getTimeSinceLastZoomLevelChanged()}function rn(r){return Vt.INSTANCE.onDidChangeZoomLevel(r)}function Vn(){return Vt.INSTANCE.getZoomFactor()}function Zn(){return Vt.INSTANCE.getPixelRatio()}const jn=navigator.userAgent,ri=jn.indexOf("Firefox")>=0,yi=jn.indexOf("AppleWebKit")>=0,Ui=jn.indexOf("Chrome")>=0,Oi=!Ui&&jn.indexOf("Safari")>=0,Ni=!Ui&&!Oi&&yi,Dr=jn.indexOf("Android")>=0,zr=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches;let Ds=new Array(230),kr=new Array(112);(function(){for(let e=0;e<kr.length;e++)kr[e]=-1;function r(e,t){Ds[e]=t,kr[t]=e}r(3,7),r(8,1),r(9,2),r(13,3),r(16,4),r(17,5),r(18,6),r(19,7),r(20,8),r(27,9),r(32,10),r(33,11),r(34,12),r(35,13),r(36,14),r(37,15),r(38,16),r(39,17),r(40,18),r(45,19),r(46,20),r(48,21),r(49,22),r(50,23),r(51,24),r(52,25),r(53,26),r(54,27),r(55,28),r(56,29),r(57,30),r(65,31),r(66,32),r(67,33),r(68,34),r(69,35),r(70,36),r(71,37),r(72,38),r(73,39),r(74,40),r(75,41),r(76,42),r(77,43),r(78,44),r(79,45),r(80,46),r(81,47),r(82,48),r(83,49),r(84,50),r(85,51),r(86,52),r(87,53),r(88,54),r(89,55),r(90,56),r(93,58),r(96,93),r(97,94),r(98,95),r(99,96),r(100,97),r(101,98),r(102,99),r(103,100),r(104,101),r(105,102),r(106,103),r(107,104),r(108,105),r(109,106),r(110,107),r(111,108),r(112,59),r(113,60),r(114,61),r(115,62),r(116,63),r(117,64),r(118,65),r(119,66),r(120,67),r(121,68),r(122,69),r(123,70),r(124,71),r(125,72),r(126,73),r(127,74),r(128,75),r(129,76),r(130,77),r(144,78),r(145,79),r(186,80),r(187,81),r(188,82),r(189,83),r(190,84),r(191,85),r(192,86),r(193,110),r(194,111),r(219,87),r(220,88),r(221,89),r(222,90),r(223,91),r(226,92),r(229,109),ri?(r(59,80),r(107,81),r(109,83),ae&&r(224,57)):yi&&(r(91,57),r(ae?93:92,57))})();function ml(r){if(r.charCode){let e=String.fromCharCode(r.charCode).toUpperCase();return Ya.fromString(e)}return Ds[r.keyCode]||0}const Wl=ae?256:2048,Vo=512,$h=1024,Vl=ae?2048:256;class jr{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=ml(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=Wl),this.altKey&&(t|=Vo),this.shiftKey&&(t|=$h),this.metaKey&&(t|=Vl),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Je(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let Kh=!1,Xc=null;function Am(r){if(!r.parent||r.parent===r)return null;try{let e=r.location,t=r.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&(e.protocol!==t.protocol||e.hostname!==t.hostname||e.port!==t.port))return Kh=!0,null}catch(e){return Kh=!0,null}return r.parent}class qc{static getSameOriginWindowChain(){if(!Xc){Xc=[];let e=window,t;do t=Am(e),t?Xc.push({window:e,iframeElement:e.frameElement||null}):Xc.push({window:e,iframeElement:null}),e=t;while(e)}return Xc.slice(0)}static hasDifferentOriginAncestor(){return Xc||this.getSameOriginWindowChain(),Kh}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,i=0,s=this.getSameOriginWindowChain();for(const o of s){if(n+=o.window.scrollY,i+=o.window.scrollX,o.window===t||!o.iframeElement)break;let a=o.iframeElement.getBoundingClientRect();n+=a.top,i+=a.left}return{top:n,left:i}}}class ra{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=qc.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class cs{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){let i=e,s=e;if(typeof i.wheelDeltaY!="undefined")this.deltaY=i.wheelDeltaY/120;else if(typeof s.VERTICAL_AXIS!="undefined"&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?ri&&!ae?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof i.wheelDeltaX!="undefined")Oi&&pe?this.deltaX=-(i.wheelDeltaX/120):this.deltaX=i.wheelDeltaX/120;else if(typeof s.HORIZONTAL_AXIS!="undefined"&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?ri&&!ae?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}var Ho=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function Rm(r){return!!r&&typeof r.then=="function"}function Pm(r){const e=new ya,t=r(e.token),n=new Promise((i,s)=>{e.token.onCancellationRequested(()=>{s(Hn())}),Promise.resolve(t).then(o=>{e.dispose(),i(o)},o=>{e.dispose(),s(o)})});return new class{cancel(){e.cancel()}then(i,s){return n.then(i,s)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}function z0(r,e,t){return Promise.race([r,new Promise(n=>e.onCancellationRequested(()=>n(t)))])}class Js{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{this.queuedPromise=null;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(i=>{this.activePromise=null,t(i)},i=>{this.activePromise=null,n(i)})})}}class Ys{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,i)=>{this.doResolve=n,this.doReject=i}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const n=this.task;return this.task=null,n()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},t),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(Hn()),this.completionPromise=null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancel()}}class Gh{constructor(e){this.delayer=new Ys(e),this.throttler=new Js}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}}function wc(r,e){return e?new Promise((t,n)=>{const i=setTimeout(t,r);e.onCancellationRequested(()=>{clearTimeout(i),n(Hn())})}):Pm(t=>wc(r,t))}function cu(r,e=0){const t=setTimeout(r,e);return Qi(()=>clearTimeout(t))}function rf(r,e=n=>!!n,t=null){let n=0;const i=r.length,s=()=>{if(n>=i)return Promise.resolve(t);const o=r[n++];return Promise.resolve(o()).then(l=>e(l)?Promise.resolve(l):s())};return s()}class sa{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class qa{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class ys{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}let Uu;(function(){if(typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"){const r=Object.freeze({didTimeout:!0,timeRemaining(){return 15}});Uu=e=>{const t=setTimeout(()=>e(r));let n=!1;return{dispose(){n||(n=!0,clearTimeout(t))}}}}else Uu=(r,e)=>{const t=requestIdleCallback(r,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(t))}}}})();class Qc{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=Uu(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}}var Cc;(function(r){function e(t){return Ho(this,void 0,void 0,function*(){let n;const i=yield Promise.all(t.map(s=>s.then(o=>o,o=>{n||(n=o)})));if(typeof n!="undefined")throw n;return i})}r.settled=e})(Cc||(Cc={}));var Ar;(function(r){r.inMemory="inmemory",r.vscode="vscode",r.internal="private",r.walkThrough="walkThrough",r.walkThroughSnippet="walkThroughSnippet",r.http="http",r.https="https",r.file="file",r.mailto="mailto",r.untitled="untitled",r.data="data",r.command="command",r.vscodeRemote="vscode-remote",r.vscodeRemoteResource="vscode-remote-resource",r.userData="vscode-userdata",r.vscodeCustomEditor="vscode-custom-editor",r.vscodeNotebook="vscode-notebook",r.vscodeNotebookCell="vscode-notebook-cell",r.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",r.vscodeNotebookCellOutput="vscode-notebook-cell-output",r.vscodeInteractive="vscode-interactive",r.vscodeInteractiveInput="vscode-interactive-input",r.vscodeSettings="vscode-settings",r.vscodeWorkspaceTrust="vscode-workspace-trust",r.vscodeTerminal="vscode-terminal",r.webviewPanel="webview-panel",r.vscodeWebview="vscode-webview",r.extension="extension",r.vscodeFileResource="vscode-file",r.tmp="tmp"})(Ar||(Ar={}));class Jc{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&(n=`[${n}]`);const i=this._ports[t],s=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(o+=`&tkn=${encodeURIComponent(s)}`),ci.from({scheme:oe?this._preferredWebSchema:Ar.vscodeRemoteResource,authority:`${n}:${i}`,path:"/vscode-remote-resource",query:o})}}const Yh=new Jc;class Zh{constructor(){this.FALLBACK_AUTHORITY="vscode-app"}asBrowserUri(e,t,n){const i=this.toUri(e,t);if(i.scheme===Ar.vscodeRemote)return Yh.rewrite(i);let s=!1;return I&&(n||F)&&i.scheme===Ar.file&&(s=!0),i.scheme===Ar.file&&typeof ie.importScripts=="function"&&ie.origin==="vscode-file://vscode-app"&&(s=!0),s?i.with({scheme:Ar.vscodeFileResource,authority:i.authority||this.FALLBACK_AUTHORITY,query:null,fragment:null}):i}toUri(e,t){return ci.isUri(e)?e:ci.parse(t.toUrl(e))}}const Fm=new Zh,tt={clipboard:{writeText:I||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:I||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>I||zr?0:navigator.keyboard||Oi?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0)};function co(r){for(;r.firstChild;)r.firstChild.remove()}function ju(r){var e;return(e=r==null?void 0:r.isConnected)!==null&&e!==void 0?e:!1}class zo{constructor(e,t,n,i){this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){!this._handler||(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function yn(r,e,t,n){return new zo(r,e,t,n)}function nt(r){return function(e){return r(new ra(e))}}function eh(r){return function(e){return r(new jr(e))}}let eo=function(e,t,n,i){let s=n;return t==="click"||t==="mousedown"?s=nt(n):(t==="keydown"||t==="keypress"||t==="keyup")&&(s=eh(n)),yn(e,t,s,i)},To=function(e,t,n){let i=nt(t);return Nr(e,i,n)};function Nr(r,e,t){return yn(r,platform.isIOS&&BrowserFeatures.pointerEvents?hi.POINTER_DOWN:hi.MOUSE_DOWN,e,t)}function nb(r,e,t){return yn(r,platform.isIOS&&BrowserFeatures.pointerEvents?hi.POINTER_UP:hi.MOUSE_UP,e,t)}function Bm(r,e){return yn(r,"mouseout",t=>{let n=t.relatedTarget;for(;n&&n!==r;)n=n.parentNode;n!==r&&e(t)})}function U0(r,e){return yn(r,"pointerout",t=>{let n=t.relatedTarget;for(;n&&n!==r;)n=n.parentNode;n!==r&&e(t)})}let hu=null;function du(r){if(!hu){const e=t=>setTimeout(()=>t(new Date().getTime()),0);hu=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return hu.call(self,r)}let Wm,Hl;class Tg{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){En(e)}}static sort(e,t){return t.priority-e.priority}}(function(){let r=[],e=null,t=!1,n=!1,i=()=>{for(t=!1,e=r,r=[],n=!0;e.length>0;)e.sort(Tg.sort),e.shift().execute();n=!1};Hl=(s,o=0)=>{let a=new Tg(s,o);return r.push(a),t||(t=!0,du(i)),a},Wm=(s,o)=>{if(n){let a=new Tg(s,o);return e.push(a),a}else return Hl(s,o)}})();const j0=8,fu=function(r,e){return e};class gu extends Rn{constructor(e,t,n,i=fu,s=j0){super();let o=null,a=0,l=this._register(new sa),u=()=>{a=new Date().getTime(),n(o),o=null};this._register(yn(e,t,h=>{o=i(o,h);let v=new Date().getTime()-a;v>=s?(l.cancel(),u()):l.setIfNotSet(u,s-v)}))}}function Mg(r,e,t,n,i){return new gu(r,e,t,n,i)}function Vm(r){return document.defaultView.getComputedStyle(r,null)}function Hm(r){if(r!==document.body)return new to(r.clientWidth,r.clientHeight);if(te&&window.visualViewport)return new to(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new to(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new to(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new to(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class is{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){let i=Vm(e),s="0";return i&&(i.getPropertyValue?s=i.getPropertyValue(t):s=i.getAttribute(n)),is.convertToPixels(e,s)}static getBorderLeftWidth(e){return is.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return is.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return is.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return is.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return is.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return is.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return is.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return is.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return is.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return is.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return is.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return is.getDimension(e,"margin-bottom","marginBottom")}}class to{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new to(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof to?e:new to(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}function Sc(r){let e=r.offsetParent,t=r.offsetTop,n=r.offsetLeft;for(;(r=r.parentNode)!==null&&r!==document.body&&r!==document.documentElement;){t-=r.scrollTop;const i=zm(r)?null:Vm(r);i&&(n-=i.direction!=="rtl"?r.scrollLeft:-r.scrollLeft),r===e&&(n+=is.getBorderLeftWidth(r),t+=is.getBorderTopWidth(r),t+=r.offsetTop,n+=r.offsetLeft,e=r.offsetParent)}return{left:n,top:t}}function ib(r,e,t){typeof e=="number"&&(r.style.width=`${e}px`),typeof t=="number"&&(r.style.height=`${t}px`)}function vl(r){let e=r.getBoundingClientRect();return{left:e.left+no.scrollX,top:e.top+no.scrollY,width:e.width,height:e.height}}const no=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function Og(r){let e=is.getMarginLeft(r)+is.getMarginRight(r);return r.offsetWidth+e}function pu(r){let e=is.getBorderLeftWidth(r)+is.getBorderRightWidth(r),t=is.getPaddingLeft(r)+is.getPaddingRight(r);return r.offsetWidth-e-t}function $0(r){let e=is.getBorderTopWidth(r)+is.getBorderBottomWidth(r),t=is.getPaddingTop(r)+is.getPaddingBottom(r);return r.offsetHeight-e-t}function kg(r){let e=is.getMarginTop(r)+is.getMarginBottom(r);return r.offsetHeight+e}function io(r,e){for(;r;){if(r===e)return!0;r=r.parentNode}return!1}function Ag(r,e,t){for(;r&&r.nodeType===r.ELEMENT_NODE;){if(r.classList.contains(e))return r;if(t){if(typeof t=="string"){if(r.classList.contains(t))return null}else if(r===t)return null}r=r.parentNode}return null}function Rg(r,e,t){return!!Ag(r,e,t)}function zm(r){return r&&!!r.host&&!!r.mode}function Pg(r){return!!Ec(r)}function Ec(r){for(;r.parentNode;){if(r===document.body)return null;r=r.parentNode}return zm(r)?r:null}function _l(){let r=document.activeElement;for(;r==null?void 0:r.shadowRoot;)r=r.shadowRoot.activeElement;return r}function Mo(r=document.getElementsByTagName("head")[0]){let e=document.createElement("style");return e.type="text/css",e.media="screen",r.appendChild(e),e}let Fg=null;function Bg(){return Fg||(Fg=Mo()),Fg}function Wg(r){var e,t;return((e=r==null?void 0:r.sheet)===null||e===void 0?void 0:e.rules)?r.sheet.rules:((t=r==null?void 0:r.sheet)===null||t===void 0?void 0:t.cssRules)?r.sheet.cssRules:[]}function wa(r,e,t=Bg()){!t||!e||t.sheet.insertRule(r+"{"+e+"}",0)}function Lc(r,e=Bg()){if(!e)return;let t=Wg(e),n=[];for(let i=0;i<t.length;i++)t[i].selectorText.indexOf(r)!==-1&&n.push(i);for(let i=n.length-1;i>=0;i--)e.sheet.deleteRule(n[i])}function $u(r){return typeof HTMLElement=="object"?r instanceof HTMLElement:r&&typeof r=="object"&&r.nodeType===1&&typeof r.nodeName=="string"}const hi={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:yi?"webkitAnimationStart":"animationstart",ANIMATION_END:yi?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:yi?"webkitAnimationIteration":"animationiteration"},Gr={stop:function(r,e){r.preventDefault?r.preventDefault():r.returnValue=!1,e&&(r.stopPropagation?r.stopPropagation():r.cancelBubble=!0)}};function zl(r){let e=[];for(let t=0;r&&r.nodeType===r.ELEMENT_NODE;t++)e[t]=r.scrollTop,r=r.parentNode;return e}function sf(r,e){for(let t=0;r&&r.nodeType===r.ELEMENT_NODE;t++)r.scrollTop!==e[t]&&(r.scrollTop=e[t]),r=r.parentNode}class yl extends Rn{constructor(e){super();this._onDidFocus=this._register(new $t),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new $t),this.onDidBlur=this._onDidBlur.event;let t=io(document.activeElement,e),n=!1;const i=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},s=()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{io(document.activeElement,e)!==t&&(t?s():i())},this._register(yn(e,hi.FOCUS,i,!0)),this._register(yn(e,hi.BLUR,s,!0))}}function Os(r){return new yl(r)}function mi(r,...e){if(r.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function Xh(r,...e){r.innerText="",mi(r,...e)}const qh=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var mu;(function(r){r.HTML="http://www.w3.org/1999/xhtml",r.SVG="http://www.w3.org/2000/svg"})(mu||(mu={}));function Ul(r,e,t,...n){let i=qh.exec(e);if(!i)throw new Error("Bad use of emmet");t=Object.assign({},t||{});let s=i[1]||"div",o;return r!==mu.HTML?o=document.createElementNS(r,s):o=document.createElement(s),i[3]&&(o.id=i[3]),i[4]&&(o.className=i[4].replace(/\./g," ").trim()),Object.keys(t).forEach(a=>{const l=t[a];typeof l!="undefined"&&(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...n),o}function vi(r,e,...t){return Ul(mu.HTML,r,e,...t)}vi.SVG=function(r,e,...t){return Ul(mu.SVG,r,e,...t)};function of(...r){for(let e of r)e.style.display="",e.removeAttribute("aria-hidden")}function th(...r){for(let e of r)e.style.display="none",e.setAttribute("aria-hidden","true")}function bl(r){return Array.prototype.slice.call(document.getElementsByTagName(r),0)}function Qh(r){const e=window.devicePixelRatio*r;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function zs(r){window.open(r,"_blank","noopener")}function vu(r){const e=()=>{r(),t=Hl(e)};let t=Hl(e);return Qi(()=>t.dispose())}Yh.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function xc(r){return r?`url('${Fm.asBrowserUri(r).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function ds(r){return`'${r.replace(/'/g,"%27")}'`}class jl extends $t{constructor(){super();this._subscriptions=new gi,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(yn(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new jr(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(yn(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(yn(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(yn(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(yn(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(yn(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return jl.instance||(jl.instance=new jl),jl.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}function af(r,e){const t=window.matchMedia(r);typeof t.addEventListener=="function"?t.addEventListener("change",e):t.addListener(e)}function Dc(r){return!r||typeof r!="string"?!0:r.trim().length===0}const Um=/{(\d+)}/g;function fs(r,...e){return e.length===0?r:r.replace(Um,function(t,n){const i=parseInt(n,10);return isNaN(i)||i<0||i>=e.length?t:e[i]})}function Vg(r){return r.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function $l(r){return r.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function K0(r,e=" "){const t=Hg(r,e);return lf(t,e)}function Hg(r,e){if(!r||!e)return r;const t=e.length;if(t===0||r.length===0)return r;let n=0;for(;r.indexOf(e,n)===n;)n=n+t;return r.substring(n)}function lf(r,e){if(!r||!e)return r;const t=e.length,n=r.length;if(t===0||n===0)return r;let i=n,s=-1;for(;s=r.lastIndexOf(e,i-1),!(s===-1||s+t!==i);){if(s===0)return"";i=s}return r.substring(0,i)}function Jh(r){return r.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function uf(r){return r.replace(/\*/g,"")}function zg(r,e,t={}){if(!r)throw new Error("Cannot create regex from empty string");e||(r=$l(r)),t.wholeWord&&(/\B/.test(r.charAt(0))||(r="\\b"+r),/\B/.test(r.charAt(r.length-1))||(r=r+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(r,n)}function Ug(r){return r.source==="^"||r.source==="^$"||r.source==="$"||r.source==="^\\s*$"?!1:!!(r.exec("")&&r.lastIndex===0)}function cf(r){return(r.global?"g":"")+(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")}function Ku(r){return r.split(/\r\n|\r|\n/)}function ka(r){for(let e=0,t=r.length;e<t;e++){const n=r.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function Oo(r,e=0,t=r.length){for(let n=e;n<t;n++){const i=r.charCodeAt(n);if(i!==32&&i!==9)return r.substring(e,n)}return r.substring(e,t)}function _u(r,e=r.length-1){for(let t=e;t>=0;t--){const n=r.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function nh(r,e){return r<e?-1:r>e?1:0}function jg(r,e,t=0,n=r.length,i=0,s=e.length){for(;t<n&&i<s;t++,i++){let l=r.charCodeAt(t),u=e.charCodeAt(i);if(l<u)return-1;if(l>u)return 1}const o=n-t,a=s-i;return o<a?-1:o>a?1:0}function hf(r,e){return df(r,e,0,r.length,0,e.length)}function df(r,e,t=0,n=r.length,i=0,s=e.length){for(;t<n&&i<s;t++,i++){let l=r.charCodeAt(t),u=e.charCodeAt(i);if(l===u)continue;const h=l-u;if(!(h===32&&Qa(u))&&!(h===-32&&Qa(l)))return yu(l)&&yu(u)?h:jg(r.toLowerCase(),e.toLowerCase(),t,n,i,s)}const o=n-t,a=s-i;return o<a?-1:o>a?1:0}function yu(r){return r>=97&&r<=122}function Qa(r){return r>=65&&r<=90}function ed(r){return yu(r)||Qa(r)}function Ic(r,e){return r.length===e.length&&ff(r,e)}function ff(r,e,t=r.length){for(let n=0;n<t;n++){const i=r.charCodeAt(n),s=e.charCodeAt(n);if(i!==s){if(ed(i)&&ed(s)){const o=Math.abs(i-s);if(o!==0&&o!==32)return!1}else if(String.fromCharCode(i).toLowerCase()!==String.fromCharCode(s).toLowerCase())return!1}}return!0}function td(r,e){const t=e.length;return e.length>r.length?!1:ff(r,e,t)}function $g(r,e){let t,n=Math.min(r.length,e.length);for(t=0;t<n;t++)if(r.charCodeAt(t)!==e.charCodeAt(t))return t;return n}function ih(r,e){let t,n=Math.min(r.length,e.length);const i=r.length-1,s=e.length-1;for(t=0;t<n;t++)if(r.charCodeAt(i-t)!==e.charCodeAt(s-t))return t;return n}function Zs(r){return 55296<=r&&r<=56319}function Gu(r){return 56320<=r&&r<=57343}function nd(r,e){return(r-55296<<10)+(e-56320)+65536}function wl(r,e,t){const n=r.charCodeAt(t);if(Zs(n)&&t+1<e){const i=r.charCodeAt(t+1);if(Gu(i))return nd(n,i)}return n}function Nc(r,e){const t=r.charCodeAt(e-1);if(Gu(t)&&e>1){const n=r.charCodeAt(e-2);if(Zs(n))return nd(n,t)}return t}function rh(r,e){const t=fo.getInstance(),n=e,i=r.length,s=wl(r,i,e);e+=s>=65536?2:1;let o=t.getGraphemeBreakType(s);for(;e<i;){const a=wl(r,i,e),l=t.getGraphemeBreakType(a);if(ho(o,l))break;e+=a>=65536?2:1,o=l}return e-n}function wr(r,e){const t=fo.getInstance(),n=e,i=Nc(r,e);e-=i>=65536?2:1;let s=t.getGraphemeBreakType(i);for(;e>0;){const o=Nc(r,e),a=t.getGraphemeBreakType(o);if(ho(a,s))break;e-=o>=65536?2:1,s=a}return n-e}function jm(r){const e=r.byteLength,t=[];let n=0;for(;n<e;){const i=r[n];let s;if(i>=240&&n+3<e?s=(r[n++]&7)<<18>>>0|(r[n++]&63)<<12>>>0|(r[n++]&63)<<6>>>0|(r[n++]&63)<<0>>>0:i>=224&&n+2<e?s=(r[n++]&15)<<12>>>0|(r[n++]&63)<<6>>>0|(r[n++]&63)<<0>>>0:i>=192&&n+1<e?s=(r[n++]&31)<<6>>>0|(r[n++]&63)<<0>>>0:s=r[n++],s>=0&&s<=55295||s>=57344&&s<=65535)t.push(String.fromCharCode(s));else if(s>=65536&&s<=1114111){const o=s-65536,a=55296+((o&1047552)>>>10),l=56320+((o&1023)>>>0);t.push(String.fromCharCode(a)),t.push(String.fromCharCode(l))}else t.push(String.fromCharCode(65533))}return t.join("")}const Kg=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u08BD\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE33\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDCFF]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD50-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function Tc(r){return Kg.test(r)}const gf=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD00-\uDDFF\uDE70-\uDED6])/;function Cr(r){return gf.test(r)}const G0=/^[\t\n\r\x20-\x7E]*$/;function Aa(r){return G0.test(r)}const sh=/[\u2028\u2029]/;function oh(r){return sh.test(r)}function Gg(r){for(let e=0,t=r.length;e<t;e++)if(Ja(r.charCodeAt(e)))return!0;return!1}function Ja(r){return r=+r,r>=11904&&r<=55215||r>=63744&&r<=64255||r>=65281&&r<=65374}function ko(r){return r>=127462&&r<=127487||r===8986||r===8987||r===9200||r===9203||r>=9728&&r<=10175||r===11088||r===11093||r>=127744&&r<=128591||r>=128640&&r<=128764||r>=128992&&r<=129003||r>=129280&&r<=129535||r>=129648&&r<=129750}const Ra=String.fromCharCode(65279);function Pa(r){return!!(r&&r.length>0&&r.charCodeAt(0)===65279)}function pf(r,e=!1){return r?(e&&(r=r.replace(/\\./g,"")),r.toLowerCase()!==r):!1}function mf(r){const e=90-65+1;return r=r%(2*e),r<e?String.fromCharCode(97+r):String.fromCharCode(65+r-e)}function Kl(r){return fo.getInstance().getGraphemeBreakType(r)}function ho(r,e){return r===0?e!==5&&e!==7:r===2&&e===3?!1:r===4||r===2||r===3||e===4||e===2||e===3?!0:!(r===8&&(e===8||e===9||e===11||e===12)||(r===11||r===9)&&(e===9||e===10)||(r===12||r===10)&&e===10||e===5||e===13||e===7||r===1||r===13&&e===14||r===6&&e===6)}class fo{constructor(){this._data=vf()}static getInstance(){return fo._INSTANCE||(fo._INSTANCE=new fo),fo._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let i=1;for(;i<=n;)if(e<t[3*i])i=2*i;else if(e>t[3*i+1])i=2*i+1;else return t[3*i+2];return 0}}fo._INSTANCE=null;function vf(){return JSON.parse("[0,0,0,51592,51592,11,44424,44424,11,72251,72254,5,7150,7150,7,48008,48008,11,55176,55176,11,128420,128420,14,3276,3277,5,9979,9980,14,46216,46216,11,49800,49800,11,53384,53384,11,70726,70726,5,122915,122916,5,129320,129327,14,2558,2558,5,5906,5908,5,9762,9763,14,43360,43388,8,45320,45320,11,47112,47112,11,48904,48904,11,50696,50696,11,52488,52488,11,54280,54280,11,70082,70083,1,71350,71350,7,73111,73111,5,127892,127893,14,128726,128727,14,129473,129474,14,2027,2035,5,2901,2902,5,3784,3789,5,6754,6754,5,8418,8420,5,9877,9877,14,11088,11088,14,44008,44008,5,44872,44872,11,45768,45768,11,46664,46664,11,47560,47560,11,48456,48456,11,49352,49352,11,50248,50248,11,51144,51144,11,52040,52040,11,52936,52936,11,53832,53832,11,54728,54728,11,69811,69814,5,70459,70460,5,71096,71099,7,71998,71998,5,72874,72880,5,119149,119149,7,127374,127374,14,128335,128335,14,128482,128482,14,128765,128767,14,129399,129400,14,129680,129685,14,1476,1477,5,2377,2380,7,2759,2760,5,3137,3140,7,3458,3459,7,4153,4154,5,6432,6434,5,6978,6978,5,7675,7679,5,9723,9726,14,9823,9823,14,9919,9923,14,10035,10036,14,42736,42737,5,43596,43596,5,44200,44200,11,44648,44648,11,45096,45096,11,45544,45544,11,45992,45992,11,46440,46440,11,46888,46888,11,47336,47336,11,47784,47784,11,48232,48232,11,48680,48680,11,49128,49128,11,49576,49576,11,50024,50024,11,50472,50472,11,50920,50920,11,51368,51368,11,51816,51816,11,52264,52264,11,52712,52712,11,53160,53160,11,53608,53608,11,54056,54056,11,54504,54504,11,54952,54952,11,68108,68111,5,69933,69940,5,70197,70197,7,70498,70499,7,70845,70845,5,71229,71229,5,71727,71735,5,72154,72155,5,72344,72345,5,73023,73029,5,94095,94098,5,121403,121452,5,126981,127182,14,127538,127546,14,127990,127990,14,128391,128391,14,128445,128449,14,128500,128505,14,128752,128752,14,129160,129167,14,129356,129356,14,129432,129442,14,129648,129651,14,129751,131069,14,173,173,4,1757,1757,1,2274,2274,1,2494,2494,5,2641,2641,5,2876,2876,5,3014,3016,7,3262,3262,7,3393,3396,5,3570,3571,7,3968,3972,5,4228,4228,7,6086,6086,5,6679,6680,5,6912,6915,5,7080,7081,5,7380,7392,5,8252,8252,14,9096,9096,14,9748,9749,14,9784,9786,14,9833,9850,14,9890,9894,14,9938,9938,14,9999,9999,14,10085,10087,14,12349,12349,14,43136,43137,7,43454,43456,7,43755,43755,7,44088,44088,11,44312,44312,11,44536,44536,11,44760,44760,11,44984,44984,11,45208,45208,11,45432,45432,11,45656,45656,11,45880,45880,11,46104,46104,11,46328,46328,11,46552,46552,11,46776,46776,11,47000,47000,11,47224,47224,11,47448,47448,11,47672,47672,11,47896,47896,11,48120,48120,11,48344,48344,11,48568,48568,11,48792,48792,11,49016,49016,11,49240,49240,11,49464,49464,11,49688,49688,11,49912,49912,11,50136,50136,11,50360,50360,11,50584,50584,11,50808,50808,11,51032,51032,11,51256,51256,11,51480,51480,11,51704,51704,11,51928,51928,11,52152,52152,11,52376,52376,11,52600,52600,11,52824,52824,11,53048,53048,11,53272,53272,11,53496,53496,11,53720,53720,11,53944,53944,11,54168,54168,11,54392,54392,11,54616,54616,11,54840,54840,11,55064,55064,11,65438,65439,5,69633,69633,5,69837,69837,1,70018,70018,7,70188,70190,7,70368,70370,7,70465,70468,7,70712,70719,5,70835,70840,5,70850,70851,5,71132,71133,5,71340,71340,7,71458,71461,5,71985,71989,7,72002,72002,7,72193,72202,5,72281,72283,5,72766,72766,7,72885,72886,5,73104,73105,5,92912,92916,5,113824,113827,4,119173,119179,5,121505,121519,5,125136,125142,5,127279,127279,14,127489,127490,14,127570,127743,14,127900,127901,14,128254,128254,14,128369,128370,14,128400,128400,14,128425,128432,14,128468,128475,14,128489,128494,14,128715,128720,14,128745,128745,14,128759,128760,14,129004,129023,14,129296,129304,14,129340,129342,14,129388,129392,14,129404,129407,14,129454,129455,14,129485,129487,14,129659,129663,14,129719,129727,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2363,2363,7,2402,2403,5,2507,2508,7,2622,2624,7,2691,2691,7,2786,2787,5,2881,2884,5,3006,3006,5,3072,3072,5,3170,3171,5,3267,3268,7,3330,3331,7,3406,3406,1,3538,3540,5,3655,3662,5,3897,3897,5,4038,4038,5,4184,4185,5,4352,4447,8,6068,6069,5,6155,6157,5,6448,6449,7,6742,6742,5,6783,6783,5,6966,6970,5,7042,7042,7,7143,7143,7,7212,7219,5,7412,7412,5,8206,8207,4,8294,8303,4,8596,8601,14,9410,9410,14,9742,9742,14,9757,9757,14,9770,9770,14,9794,9794,14,9828,9828,14,9855,9855,14,9882,9882,14,9900,9903,14,9929,9933,14,9963,9967,14,9987,9988,14,10006,10006,14,10062,10062,14,10175,10175,14,11744,11775,5,42607,42607,5,43043,43044,7,43263,43263,5,43444,43445,7,43569,43570,5,43698,43700,5,43766,43766,5,44032,44032,11,44144,44144,11,44256,44256,11,44368,44368,11,44480,44480,11,44592,44592,11,44704,44704,11,44816,44816,11,44928,44928,11,45040,45040,11,45152,45152,11,45264,45264,11,45376,45376,11,45488,45488,11,45600,45600,11,45712,45712,11,45824,45824,11,45936,45936,11,46048,46048,11,46160,46160,11,46272,46272,11,46384,46384,11,46496,46496,11,46608,46608,11,46720,46720,11,46832,46832,11,46944,46944,11,47056,47056,11,47168,47168,11,47280,47280,11,47392,47392,11,47504,47504,11,47616,47616,11,47728,47728,11,47840,47840,11,47952,47952,11,48064,48064,11,48176,48176,11,48288,48288,11,48400,48400,11,48512,48512,11,48624,48624,11,48736,48736,11,48848,48848,11,48960,48960,11,49072,49072,11,49184,49184,11,49296,49296,11,49408,49408,11,49520,49520,11,49632,49632,11,49744,49744,11,49856,49856,11,49968,49968,11,50080,50080,11,50192,50192,11,50304,50304,11,50416,50416,11,50528,50528,11,50640,50640,11,50752,50752,11,50864,50864,11,50976,50976,11,51088,51088,11,51200,51200,11,51312,51312,11,51424,51424,11,51536,51536,11,51648,51648,11,51760,51760,11,51872,51872,11,51984,51984,11,52096,52096,11,52208,52208,11,52320,52320,11,52432,52432,11,52544,52544,11,52656,52656,11,52768,52768,11,52880,52880,11,52992,52992,11,53104,53104,11,53216,53216,11,53328,53328,11,53440,53440,11,53552,53552,11,53664,53664,11,53776,53776,11,53888,53888,11,54000,54000,11,54112,54112,11,54224,54224,11,54336,54336,11,54448,54448,11,54560,54560,11,54672,54672,11,54784,54784,11,54896,54896,11,55008,55008,11,55120,55120,11,64286,64286,5,66272,66272,5,68900,68903,5,69762,69762,7,69817,69818,5,69927,69931,5,70003,70003,5,70070,70078,5,70094,70094,7,70194,70195,7,70206,70206,5,70400,70401,5,70463,70463,7,70475,70477,7,70512,70516,5,70722,70724,5,70832,70832,5,70842,70842,5,70847,70848,5,71088,71089,7,71102,71102,7,71219,71226,5,71231,71232,5,71342,71343,7,71453,71455,5,71463,71467,5,71737,71738,5,71995,71996,5,72000,72000,7,72145,72147,7,72160,72160,5,72249,72249,7,72273,72278,5,72330,72342,5,72752,72758,5,72850,72871,5,72882,72883,5,73018,73018,5,73031,73031,5,73109,73109,5,73461,73462,7,94031,94031,5,94192,94193,7,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,126976,126979,14,127184,127231,14,127344,127345,14,127405,127461,14,127514,127514,14,127561,127567,14,127778,127779,14,127896,127896,14,127985,127986,14,127995,127999,5,128326,128328,14,128360,128366,14,128378,128378,14,128394,128397,14,128405,128406,14,128422,128423,14,128435,128443,14,128453,128464,14,128479,128480,14,128484,128487,14,128496,128498,14,128640,128709,14,128723,128724,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129096,129103,14,129292,129292,14,129311,129311,14,129329,129330,14,129344,129349,14,129360,129374,14,129394,129394,14,129402,129402,14,129413,129425,14,129445,129450,14,129466,129471,14,129483,129483,14,129511,129535,14,129653,129655,14,129667,129670,14,129705,129711,14,129731,129743,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2307,2307,7,2366,2368,7,2382,2383,7,2434,2435,7,2497,2500,5,2519,2519,5,2563,2563,7,2631,2632,5,2677,2677,5,2750,2752,7,2763,2764,7,2817,2817,5,2879,2879,5,2891,2892,7,2914,2915,5,3008,3008,5,3021,3021,5,3076,3076,5,3146,3149,5,3202,3203,7,3264,3265,7,3271,3272,7,3298,3299,5,3390,3390,5,3402,3404,7,3426,3427,5,3535,3535,5,3544,3550,7,3635,3635,7,3763,3763,7,3893,3893,5,3953,3966,5,3981,3991,5,4145,4145,7,4157,4158,5,4209,4212,5,4237,4237,5,4520,4607,10,5970,5971,5,6071,6077,5,6089,6099,5,6277,6278,5,6439,6440,5,6451,6456,7,6683,6683,5,6744,6750,5,6765,6770,7,6846,6846,5,6964,6964,5,6972,6972,5,7019,7027,5,7074,7077,5,7083,7085,5,7146,7148,7,7154,7155,7,7222,7223,5,7394,7400,5,7416,7417,5,8204,8204,5,8233,8233,4,8288,8292,4,8413,8416,5,8482,8482,14,8986,8987,14,9193,9203,14,9654,9654,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9775,14,9792,9792,14,9800,9811,14,9825,9826,14,9831,9831,14,9852,9853,14,9872,9873,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9936,9936,14,9941,9960,14,9974,9974,14,9982,9985,14,9992,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10145,10145,14,11013,11015,14,11503,11505,5,12334,12335,5,12951,12951,14,42612,42621,5,43014,43014,5,43047,43047,7,43204,43205,5,43335,43345,5,43395,43395,7,43450,43451,7,43561,43566,5,43573,43574,5,43644,43644,5,43710,43711,5,43758,43759,7,44005,44005,5,44012,44012,7,44060,44060,11,44116,44116,11,44172,44172,11,44228,44228,11,44284,44284,11,44340,44340,11,44396,44396,11,44452,44452,11,44508,44508,11,44564,44564,11,44620,44620,11,44676,44676,11,44732,44732,11,44788,44788,11,44844,44844,11,44900,44900,11,44956,44956,11,45012,45012,11,45068,45068,11,45124,45124,11,45180,45180,11,45236,45236,11,45292,45292,11,45348,45348,11,45404,45404,11,45460,45460,11,45516,45516,11,45572,45572,11,45628,45628,11,45684,45684,11,45740,45740,11,45796,45796,11,45852,45852,11,45908,45908,11,45964,45964,11,46020,46020,11,46076,46076,11,46132,46132,11,46188,46188,11,46244,46244,11,46300,46300,11,46356,46356,11,46412,46412,11,46468,46468,11,46524,46524,11,46580,46580,11,46636,46636,11,46692,46692,11,46748,46748,11,46804,46804,11,46860,46860,11,46916,46916,11,46972,46972,11,47028,47028,11,47084,47084,11,47140,47140,11,47196,47196,11,47252,47252,11,47308,47308,11,47364,47364,11,47420,47420,11,47476,47476,11,47532,47532,11,47588,47588,11,47644,47644,11,47700,47700,11,47756,47756,11,47812,47812,11,47868,47868,11,47924,47924,11,47980,47980,11,48036,48036,11,48092,48092,11,48148,48148,11,48204,48204,11,48260,48260,11,48316,48316,11,48372,48372,11,48428,48428,11,48484,48484,11,48540,48540,11,48596,48596,11,48652,48652,11,48708,48708,11,48764,48764,11,48820,48820,11,48876,48876,11,48932,48932,11,48988,48988,11,49044,49044,11,49100,49100,11,49156,49156,11,49212,49212,11,49268,49268,11,49324,49324,11,49380,49380,11,49436,49436,11,49492,49492,11,49548,49548,11,49604,49604,11,49660,49660,11,49716,49716,11,49772,49772,11,49828,49828,11,49884,49884,11,49940,49940,11,49996,49996,11,50052,50052,11,50108,50108,11,50164,50164,11,50220,50220,11,50276,50276,11,50332,50332,11,50388,50388,11,50444,50444,11,50500,50500,11,50556,50556,11,50612,50612,11,50668,50668,11,50724,50724,11,50780,50780,11,50836,50836,11,50892,50892,11,50948,50948,11,51004,51004,11,51060,51060,11,51116,51116,11,51172,51172,11,51228,51228,11,51284,51284,11,51340,51340,11,51396,51396,11,51452,51452,11,51508,51508,11,51564,51564,11,51620,51620,11,51676,51676,11,51732,51732,11,51788,51788,11,51844,51844,11,51900,51900,11,51956,51956,11,52012,52012,11,52068,52068,11,52124,52124,11,52180,52180,11,52236,52236,11,52292,52292,11,52348,52348,11,52404,52404,11,52460,52460,11,52516,52516,11,52572,52572,11,52628,52628,11,52684,52684,11,52740,52740,11,52796,52796,11,52852,52852,11,52908,52908,11,52964,52964,11,53020,53020,11,53076,53076,11,53132,53132,11,53188,53188,11,53244,53244,11,53300,53300,11,53356,53356,11,53412,53412,11,53468,53468,11,53524,53524,11,53580,53580,11,53636,53636,11,53692,53692,11,53748,53748,11,53804,53804,11,53860,53860,11,53916,53916,11,53972,53972,11,54028,54028,11,54084,54084,11,54140,54140,11,54196,54196,11,54252,54252,11,54308,54308,11,54364,54364,11,54420,54420,11,54476,54476,11,54532,54532,11,54588,54588,11,54644,54644,11,54700,54700,11,54756,54756,11,54812,54812,11,54868,54868,11,54924,54924,11,54980,54980,11,55036,55036,11,55092,55092,11,55148,55148,11,55216,55238,9,65056,65071,5,65529,65531,4,68097,68099,5,68159,68159,5,69446,69456,5,69688,69702,5,69808,69810,7,69815,69816,7,69821,69821,1,69888,69890,5,69932,69932,7,69957,69958,7,70016,70017,5,70067,70069,7,70079,70080,7,70089,70092,5,70095,70095,5,70191,70193,5,70196,70196,5,70198,70199,5,70367,70367,5,70371,70378,5,70402,70403,7,70462,70462,5,70464,70464,5,70471,70472,7,70487,70487,5,70502,70508,5,70709,70711,7,70720,70721,7,70725,70725,7,70750,70750,5,70833,70834,7,70841,70841,7,70843,70844,7,70846,70846,7,70849,70849,7,71087,71087,5,71090,71093,5,71100,71101,5,71103,71104,5,71216,71218,7,71227,71228,7,71230,71230,7,71339,71339,5,71341,71341,5,71344,71349,5,71351,71351,5,71456,71457,7,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123628,123631,5,125252,125258,5,126980,126980,14,127183,127183,14,127245,127247,14,127340,127343,14,127358,127359,14,127377,127386,14,127462,127487,6,127491,127503,14,127535,127535,14,127548,127551,14,127568,127569,14,127744,127777,14,127780,127891,14,127894,127895,14,127897,127899,14,127902,127984,14,127987,127989,14,127991,127994,14,128000,128253,14,128255,128317,14,128329,128334,14,128336,128359,14,128367,128368,14,128371,128377,14,128379,128390,14,128392,128393,14,128398,128399,14,128401,128404,14,128407,128419,14,128421,128421,14,128424,128424,14,128433,128434,14,128444,128444,14,128450,128452,14,128465,128467,14,128476,128478,14,128481,128481,14,128483,128483,14,128488,128488,14,128495,128495,14,128499,128499,14,128506,128591,14,128710,128714,14,128721,128722,14,128725,128725,14,128728,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129664,129666,14,129671,129679,14,129686,129704,14,129712,129718,14,129728,129730,14,129744,129750,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2259,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3134,3136,5,3142,3144,5,3157,3158,5,3201,3201,5,3260,3260,5,3263,3263,5,3266,3266,5,3270,3270,5,3274,3275,7,3285,3286,5,3328,3329,5,3387,3388,5,3391,3392,7,3398,3400,7,3405,3405,5,3415,3415,5,3457,3457,5,3530,3530,5,3536,3537,7,3542,3542,5,3551,3551,5,3633,3633,5,3636,3642,5,3761,3761,5,3764,3772,5,3864,3865,5,3895,3895,5,3902,3903,7,3967,3967,7,3974,3975,5,3993,4028,5,4141,4144,5,4146,4151,5,4155,4156,7,4182,4183,7,4190,4192,5,4226,4226,5,4229,4230,5,4253,4253,5,4448,4519,9,4957,4959,5,5938,5940,5,6002,6003,5,6070,6070,7,6078,6085,7,6087,6088,7,6109,6109,5,6158,6158,4,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6848,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7673,5,8203,8203,4,8205,8205,13,8232,8232,4,8234,8238,4,8265,8265,14,8293,8293,4,8400,8412,5,8417,8417,5,8421,8432,5,8505,8505,14,8617,8618,14,9000,9000,14,9167,9167,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9776,9783,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9935,14,9937,9937,14,9939,9940,14,9961,9962,14,9968,9973,14,9975,9978,14,9981,9981,14,9986,9986,14,9989,9989,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10084,14,10133,10135,14,10160,10160,14,10548,10549,14,11035,11036,14,11093,11093,14,11647,11647,5,12330,12333,5,12336,12336,14,12441,12442,5,12953,12953,14,42608,42610,5,42654,42655,5,43010,43010,5,43019,43019,5,43045,43046,5,43052,43052,5,43188,43203,7,43232,43249,5,43302,43309,5,43346,43347,7,43392,43394,5,43443,43443,5,43446,43449,5,43452,43453,5,43493,43493,5,43567,43568,7,43571,43572,7,43587,43587,5,43597,43597,7,43696,43696,5,43703,43704,5,43713,43713,5,43756,43757,5,43765,43765,7,44003,44004,7,44006,44007,7,44009,44010,7,44013,44013,5,44033,44059,12,44061,44087,12,44089,44115,12,44117,44143,12,44145,44171,12,44173,44199,12,44201,44227,12,44229,44255,12,44257,44283,12,44285,44311,12,44313,44339,12,44341,44367,12,44369,44395,12,44397,44423,12,44425,44451,12,44453,44479,12,44481,44507,12,44509,44535,12,44537,44563,12,44565,44591,12,44593,44619,12,44621,44647,12,44649,44675,12,44677,44703,12,44705,44731,12,44733,44759,12,44761,44787,12,44789,44815,12,44817,44843,12,44845,44871,12,44873,44899,12,44901,44927,12,44929,44955,12,44957,44983,12,44985,45011,12,45013,45039,12,45041,45067,12,45069,45095,12,45097,45123,12,45125,45151,12,45153,45179,12,45181,45207,12,45209,45235,12,45237,45263,12,45265,45291,12,45293,45319,12,45321,45347,12,45349,45375,12,45377,45403,12,45405,45431,12,45433,45459,12,45461,45487,12,45489,45515,12,45517,45543,12,45545,45571,12,45573,45599,12,45601,45627,12,45629,45655,12,45657,45683,12,45685,45711,12,45713,45739,12,45741,45767,12,45769,45795,12,45797,45823,12,45825,45851,12,45853,45879,12,45881,45907,12,45909,45935,12,45937,45963,12,45965,45991,12,45993,46019,12,46021,46047,12,46049,46075,12,46077,46103,12,46105,46131,12,46133,46159,12,46161,46187,12,46189,46215,12,46217,46243,12,46245,46271,12,46273,46299,12,46301,46327,12,46329,46355,12,46357,46383,12,46385,46411,12,46413,46439,12,46441,46467,12,46469,46495,12,46497,46523,12,46525,46551,12,46553,46579,12,46581,46607,12,46609,46635,12,46637,46663,12,46665,46691,12,46693,46719,12,46721,46747,12,46749,46775,12,46777,46803,12,46805,46831,12,46833,46859,12,46861,46887,12,46889,46915,12,46917,46943,12,46945,46971,12,46973,46999,12,47001,47027,12,47029,47055,12,47057,47083,12,47085,47111,12,47113,47139,12,47141,47167,12,47169,47195,12,47197,47223,12,47225,47251,12,47253,47279,12,47281,47307,12,47309,47335,12,47337,47363,12,47365,47391,12,47393,47419,12,47421,47447,12,47449,47475,12,47477,47503,12,47505,47531,12,47533,47559,12,47561,47587,12,47589,47615,12,47617,47643,12,47645,47671,12,47673,47699,12,47701,47727,12,47729,47755,12,47757,47783,12,47785,47811,12,47813,47839,12,47841,47867,12,47869,47895,12,47897,47923,12,47925,47951,12,47953,47979,12,47981,48007,12,48009,48035,12,48037,48063,12,48065,48091,12,48093,48119,12,48121,48147,12,48149,48175,12,48177,48203,12,48205,48231,12,48233,48259,12,48261,48287,12,48289,48315,12,48317,48343,12,48345,48371,12,48373,48399,12,48401,48427,12,48429,48455,12,48457,48483,12,48485,48511,12,48513,48539,12,48541,48567,12,48569,48595,12,48597,48623,12,48625,48651,12,48653,48679,12,48681,48707,12,48709,48735,12,48737,48763,12,48765,48791,12,48793,48819,12,48821,48847,12,48849,48875,12,48877,48903,12,48905,48931,12,48933,48959,12,48961,48987,12,48989,49015,12,49017,49043,12,49045,49071,12,49073,49099,12,49101,49127,12,49129,49155,12,49157,49183,12,49185,49211,12,49213,49239,12,49241,49267,12,49269,49295,12,49297,49323,12,49325,49351,12,49353,49379,12,49381,49407,12,49409,49435,12,49437,49463,12,49465,49491,12,49493,49519,12,49521,49547,12,49549,49575,12,49577,49603,12,49605,49631,12,49633,49659,12,49661,49687,12,49689,49715,12,49717,49743,12,49745,49771,12,49773,49799,12,49801,49827,12,49829,49855,12,49857,49883,12,49885,49911,12,49913,49939,12,49941,49967,12,49969,49995,12,49997,50023,12,50025,50051,12,50053,50079,12,50081,50107,12,50109,50135,12,50137,50163,12,50165,50191,12,50193,50219,12,50221,50247,12,50249,50275,12,50277,50303,12,50305,50331,12,50333,50359,12,50361,50387,12,50389,50415,12,50417,50443,12,50445,50471,12,50473,50499,12,50501,50527,12,50529,50555,12,50557,50583,12,50585,50611,12,50613,50639,12,50641,50667,12,50669,50695,12,50697,50723,12,50725,50751,12,50753,50779,12,50781,50807,12,50809,50835,12,50837,50863,12,50865,50891,12,50893,50919,12,50921,50947,12,50949,50975,12,50977,51003,12,51005,51031,12,51033,51059,12,51061,51087,12,51089,51115,12,51117,51143,12,51145,51171,12,51173,51199,12,51201,51227,12,51229,51255,12,51257,51283,12,51285,51311,12,51313,51339,12,51341,51367,12,51369,51395,12,51397,51423,12,51425,51451,12,51453,51479,12,51481,51507,12,51509,51535,12,51537,51563,12,51565,51591,12,51593,51619,12,51621,51647,12,51649,51675,12,51677,51703,12,51705,51731,12,51733,51759,12,51761,51787,12,51789,51815,12,51817,51843,12,51845,51871,12,51873,51899,12,51901,51927,12,51929,51955,12,51957,51983,12,51985,52011,12,52013,52039,12,52041,52067,12,52069,52095,12,52097,52123,12,52125,52151,12,52153,52179,12,52181,52207,12,52209,52235,12,52237,52263,12,52265,52291,12,52293,52319,12,52321,52347,12,52349,52375,12,52377,52403,12,52405,52431,12,52433,52459,12,52461,52487,12,52489,52515,12,52517,52543,12,52545,52571,12,52573,52599,12,52601,52627,12,52629,52655,12,52657,52683,12,52685,52711,12,52713,52739,12,52741,52767,12,52769,52795,12,52797,52823,12,52825,52851,12,52853,52879,12,52881,52907,12,52909,52935,12,52937,52963,12,52965,52991,12,52993,53019,12,53021,53047,12,53049,53075,12,53077,53103,12,53105,53131,12,53133,53159,12,53161,53187,12,53189,53215,12,53217,53243,12,53245,53271,12,53273,53299,12,53301,53327,12,53329,53355,12,53357,53383,12,53385,53411,12,53413,53439,12,53441,53467,12,53469,53495,12,53497,53523,12,53525,53551,12,53553,53579,12,53581,53607,12,53609,53635,12,53637,53663,12,53665,53691,12,53693,53719,12,53721,53747,12,53749,53775,12,53777,53803,12,53805,53831,12,53833,53859,12,53861,53887,12,53889,53915,12,53917,53943,12,53945,53971,12,53973,53999,12,54001,54027,12,54029,54055,12,54057,54083,12,54085,54111,12,54113,54139,12,54141,54167,12,54169,54195,12,54197,54223,12,54225,54251,12,54253,54279,12,54281,54307,12,54309,54335,12,54337,54363,12,54365,54391,12,54393,54419,12,54421,54447,12,54449,54475,12,54477,54503,12,54505,54531,12,54533,54559,12,54561,54587,12,54589,54615,12,54617,54643,12,54645,54671,12,54673,54699,12,54701,54727,12,54729,54755,12,54757,54783,12,54785,54811,12,54813,54839,12,54841,54867,12,54869,54895,12,54897,54923,12,54925,54951,12,54953,54979,12,54981,55007,12,55009,55035,12,55037,55063,12,55065,55091,12,55093,55119,12,55121,55147,12,55149,55175,12,55177,55203,12,55243,55291,10,65024,65039,5,65279,65279,4,65520,65528,4,66045,66045,5,66422,66426,5,68101,68102,5,68152,68154,5,68325,68326,5,69291,69292,5,69632,69632,7,69634,69634,7,69759,69761,5]")}function _f(r,e){if(r===0)return 0;const t=ah(r,e);if(t!==void 0)return t;const n=Nc(e,r);return r-=el(n),r}function ah(r,e){let t=Nc(e,r);for(r-=el(t);Yg(t)||t===65039||t===8419;){if(r===0)return;t=Nc(e,r),r-=el(t)}if(!!ko(t)){if(r>=0){const n=Nc(e,r);n===8205&&(r-=el(n))}return r}}function el(r){return r>=65536?2:1}function Yg(r){return 127995<=r&&r<=127999}var Gl,id;class yf{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class Yl{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?jg(e,this._value,0,e.length,this._from,this._to):df(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Y0{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?jg(e,this._value,0,e.length,this._from,this._to):df(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Yu{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new Y0(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return hf(e,this._value.scheme);if(this._states[this._stateIdx]===2)return hf(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return nh(e,this._value.query);if(this._states[this._stateIdx]===5)return nh(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class rd{isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}}class Mc{constructor(e){this._iter=e}static forUris(e=()=>!1){return new Mc(new Yu(e))}static forStrings(){return new Mc(new yf)}static forConfigKeys(){return new Mc(new Yl)}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let i;for(this._root||(this._root=new rd,this._root.segment=n.value()),i=this._root;;){const o=n.cmp(i.segment);if(o>0)i.left||(i.left=new rd,i.left.segment=n.value()),i=i.left;else if(o<0)i.right||(i.right=new rd,i.right.segment=n.value()),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new rd,i.mid.segment=n.value()),i=i.mid;else break}const s=i.value;return i.value=t,i.key=e,s}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const n=this._iter.reset(e),i=[];let s=this._root;for(;s;){const o=n.cmp(s.segment);if(o>0)i.push([1,s]),s=s.left;else if(o<0)i.push([-1,s]),s=s.right;else if(n.hasNext())n.next(),i.push([0,s]),s=s.mid;else{for(t?(s.left=void 0,s.mid=void 0,s.right=void 0):s.value=void 0;i.length>0&&s.isEmpty();){let[a,l]=i.pop();switch(a){case 1:l.left=void 0;break;case 0:l.mid=void 0;break;case-1:l.right=void 0;break}s=l}break}}}findSubstr(e){const t=this._iter.reset(e);let n=this._root,i;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){if(!e)return;const t=[e];for(;t.length>0;){const n=t.pop();n&&(n.value&&(yield[n.key,n.value]),n.left&&t.push(n.left),n.mid&&t.push(n.mid),n.right&&t.push(n.right))}}}class go{constructor(e,t){this[Gl]="ResourceMap",e instanceof go?(this.map=new Map(e.map),this.toKey=t!=null?t:go.defaultToKey):(this.map=new Map,this.toKey=e!=null?e:go.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),t),this}get(e){return this.map.get(this.toKey(e))}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t!="undefined"&&(e=e.bind(t));for(let[n,i]of this.map)e(i,ci.parse(n),this)}values(){return this.map.values()}*keys(){for(let e of this.map.keys())yield ci.parse(e)}*entries(){for(let e of this.map.entries())yield[ci.parse(e[0]),e[1]]}*[(Gl=Symbol.toStringTag,Symbol.iterator)](){for(let e of this.map)yield[ci.parse(e[0]),e[1]]}}go.defaultToKey=r=>r.toString();class Z0{constructor(){this[id]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(!!n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let i=this._map.get(e);if(i)i.value=t,n!==0&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(!!t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}values(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}[(id=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}class Zg extends Z0{constructor(e,t=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}var bf=fn(692).Buffer;const Uo=typeof bf!="undefined",Cl=typeof TextDecoder!="undefined";let Xg;class sd{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return Uo&&!bf.isBuffer(e)&&(e=bf.from(e.buffer,e.byteOffset,e.byteLength)),new sd(e)}toString(){return Uo?this.buffer.toString():Cl?(Xg||(Xg=new TextDecoder),Xg.decode(this.buffer)):jm(this.buffer)}}function od(r,e){return r[e+0]<<0>>>0|r[e+1]<<8>>>0}function ro(r,e,t){r[t+0]=e&255,e=e>>>8,r[t+1]=e&255}function Us(r,e){return r[e]*Math.pow(2,24)+r[e+1]*Math.pow(2,16)+r[e+2]*Math.pow(2,8)+r[e+3]}function tl(r,e,t){r[t+3]=e,e=e>>>8,r[t+2]=e,e=e>>>8,r[t+1]=e,e=e>>>8,r[t]=e}function $m(r,e){return r[e]}function lh(r,e,t){r[t]=e}function nl(r){let e=JSON.parse(r);return e=Zu(e),e}function Zu(r,e=0){if(!r||e>200)return r;if(typeof r=="object"){switch(r.$mid){case 1:return ci.revive(r);case 2:return new RegExp(r.source,r.flags)}if(r instanceof sd||r instanceof Uint8Array)return r;if(Array.isArray(r))for(let t=0;t<r.length;++t)r[t]=Zu(r[t],e+1);else for(const t in r)Object.hasOwnProperty.call(r,t)&&(r[t]=Zu(r[t],e+1))}return r}function Km(r){return r.replace(/[\\/]/g,Ve.sep)}function Gm(r){return r.indexOf("/")===-1&&(r=Km(r)),/^[a-zA-Z]:(\/|$)/.test(r)&&(r="/"+r),r}function qg(r,e,t,n=si){if(r===e)return!0;if(!r||!e||e.length>r.length)return!1;if(t){if(!td(r,e))return!1;if(e.length===r.length)return!0;let s=e.length;return e.charAt(e.length-1)===n&&s--,r.charAt(s)===n}return e.charAt(e.length-1)!==n&&(e+=n),r.indexOf(e)===0}function bu(r){return r>=65&&r<=90||r>=97&&r<=122}function ad(r){const e=normalize(r);return isWindows?r.length>3?!1:wf(e)&&(r.length===2||e.charCodeAt(2)===92):e===posix.sep}function wf(r){return isWindows?bu(r.charCodeAt(0))&&r.charCodeAt(1)===58:!1}function uh(r){return Vr(r,!0)}class ld{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:nh(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}joinPath(e,...t){return ci.joinPath(e,...t)}basenameOrAuthority(e){return ud(e)||e.authority}basename(e){return Ve.basename(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Ar.file?t=ci.file(mn(uh(e))).path:(t=Ve.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Ar.file?t=ci.file(Xe(uh(e))).path:t=Ve.normalize(e.path),e.with({path:t})}resolvePath(e,t){if(e.scheme===Ar.file){const n=ci.file(wt(uh(e),t));return e.with({authority:n.authority,path:n.path})}return t=Gm(t),e.with({path:Ve.resolve(e.path,t)})}}const Ao=new ld(()=>!1),Ym=Ao.isEqual.bind(Ao),ch=Ao.basenameOrAuthority.bind(Ao),ud=Ao.basename.bind(Ao),cd=Ao.dirname.bind(Ao),rb=Ao.joinPath.bind(Ao),Qg=Ao.normalizePath.bind(Ao),Sl=Ao.resolvePath.bind(Ao);var hh;(function(r){r.META_DATA_LABEL="label",r.META_DATA_DESCRIPTION="description",r.META_DATA_SIZE="size",r.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&n.set(a,l)});const s=t.path.substring(0,t.path.indexOf(";"));return s&&n.set(r.META_DATA_MIME,s),n}r.parseMetaData=e})(hh||(hh={}));function Jg(r){return Array.isArray(r)}function El(r){return typeof r=="string"}function oa(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function Fa(r){return typeof r=="number"&&!isNaN(r)}function ep(r){return r===!0||r===!1}function ks(r){return typeof r=="undefined"}function Ca(r){return ks(r)||r===null}function Sa(r,e){if(!r)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function Zm(r){if(Ca(r))throw new Error("Assertion Failed: argument is undefined or null");return r}function Xu(r){return typeof r=="function"}function Ea(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++)Zi(r[n],e[n])}function Zi(r,e){if(El(e)){if(typeof r!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(Xu(e)){try{if(r instanceof e)return}catch(t){}if(!Ca(r)&&r.constructor===e||e.length===1&&e.call(void 0,r)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function dh(r){let e=[],t=Object.getPrototypeOf(r);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}function Oc(r){const e=[];for(const t of dh(r))typeof r[t]=="function"&&e.push(t);return e}function Ll(r,e){const t=i=>function(){const s=Array.prototype.slice.call(arguments,0);return e(i,s)};let n={};for(const i of r)n[i]=t(i);return n}function xl(r){return r===null?void 0:r}function Xi(r){throw new Error("Unreachable")}const po=Te("commandService"),Rr=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new $t,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(r,e){if(!r)throw new Error("invalid command");if(typeof r=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:r,handler:e})}if(r.description){const o=[];for(let l of r.description.args)o.push(l.constraint);const a=r.handler;r.handler=function(l,...u){return Ea(u,o),a(l,...u)}}const{id:t}=r;let n=this._commands.get(t);n||(n=new Lr,this._commands.set(t,n));let i=n.unshift(r),s=Qi(()=>{i();const o=this._commands.get(t);(o==null?void 0:o.isEmpty())&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),s}registerCommandAlias(r,e){return Rr.registerCommand(r,(t,...n)=>t.get(po).executeCommand(e,...n))}getCommand(r){const e=this._commands.get(r);if(!(!e||e.isEmpty()))return ti.first(e)}getCommands(){const r=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&r.set(e,t)}return r}};Rr.registerCommand("noop",()=>{});var Zl;(function(r){r[r.API=0]="API",r[r.USER=1]="USER"})(Zl||(Zl={}));var Xm=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const hd=Te("openerService"),X0=Object.freeze({_serviceBrand:void 0,registerOpener(){return Rn.None},registerValidator(){return Rn.None},registerExternalUriResolver(){return Rn.None},setDefaultExternalOpener(){},registerExternalOpener(){return Rn.None},open(){return Xm(this,void 0,void 0,function*(){return!1})},resolveExternalUri(r){return Xm(this,void 0,void 0,function*(){return{resolved:r,dispose(){}}})}});function As(r,e){return ci.isUri(r)?Ic(r.scheme,e):td(r,e+":")}var tp=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Cf=function(r,e){return function(t,n){e(t,n,r)}},qu=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let Dl=class{constructor(e){this._commandService=e}open(e,t){return qu(this,void 0,void 0,function*(){if(!As(e,Ar.command))return!1;if(!(t==null?void 0:t.allowCommands))return!0;typeof e=="string"&&(e=ci.parse(e));let n=[];try{n=nl(decodeURIComponent(e.query))}catch(i){try{n=nl(e.query)}catch(s){}}return Array.isArray(n)||(n=[n]),yield this._commandService.executeCommand(e.path,...n),!0})}};Dl=tp([Cf(0,po)],Dl);let mo=class{constructor(e){this._editorService=e}open(e,t){return qu(this,void 0,void 0,function*(){typeof e=="string"&&(e=ci.parse(e));let n;const i=/^L?(\d+)(?:,(\d+))?/.exec(e.fragment);return i&&(n={startLineNumber:parseInt(i[1]),startColumn:i[2]?parseInt(i[2]):1},e=e.with({fragment:""})),e.scheme===Ar.file&&(e=Qg(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:n,context:(t==null?void 0:t.fromUserGesture)?Zl.USER:Zl.API},t==null?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0})}};mo=tp([Cf(0,ht)],mo);let dd=class{constructor(e,t){this._openers=new Lr,this._validators=new Lr,this._resolvers=new Lr,this._resolvedUriTargets=new go(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new Lr,this._defaultExternalOpener={openExternal:n=>qu(this,void 0,void 0,function*(){return As(n,Ar.http)||As(n,Ar.https)?zs(n):window.location.href=n,!0})},this._openers.push({open:(n,i)=>qu(this,void 0,void 0,function*(){return(i==null?void 0:i.openExternal)||As(n,Ar.mailto)||As(n,Ar.http)||As(n,Ar.https)?(yield this._doOpenExternal(n,i),!0):!1})}),this._openers.push(new Dl(t)),this._openers.push(new mo(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){var n;return qu(this,void 0,void 0,function*(){const i=typeof e=="string"?ci.parse(e):e,s=(n=this._resolvedUriTargets.get(i))!==null&&n!==void 0?n:e;for(const o of this._validators)if(!(yield o.shouldOpen(s)))return!1;for(const o of this._openers)if(yield o.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return qu(this,void 0,void 0,function*(){for(const n of this._resolvers)try{const i=yield n.resolveExternalUri(e,t);if(i)return this._resolvedUriTargets.has(i.resolved)||this._resolvedUriTargets.set(i.resolved,e),i}catch(i){}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return qu(this,void 0,void 0,function*(){const n=typeof e=="string"?ci.parse(e):e;let i;try{i=(yield this.resolveExternalUri(n,t)).resolved}catch(o){i=n}let s;if(typeof e=="string"&&n.toString()===i.toString()?s=e:s=encodeURI(i.toString(!0)),t==null?void 0:t.allowContributedOpeners){const o=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(s,{sourceUri:n,preferredOpenerId:o},Ls.None))return!0}return this._defaultExternalOpener.openExternal(s,{sourceUri:n},Ls.None)})}dispose(){this._validators.clear()}};dd=tp([Cf(0,ht),Cf(1,po)],dd);function Sf(r,e){if(!r)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function wu(r){if(!r||typeof r!="object"||r instanceof RegExp)return r;const e=Array.isArray(r)?[]:{};return Object.keys(r).forEach(t=>{r[t]&&typeof r[t]=="object"?e[t]=wu(r[t]):e[t]=r[t]}),e}function Cu(r){if(!r||typeof r!="object")return r;const e=[r];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(jo.call(t,n)){const i=t[n];typeof i=="object"&&!Object.isFrozen(i)&&e.push(i)}}return r}const jo=Object.prototype.hasOwnProperty;function fh(r,e){return Ef(r,e,new Set)}function Ef(r,e,t){if(isUndefinedOrNull(r))return r;const n=e(r);if(typeof n!="undefined")return n;if(isArray(r)){const i=[];for(const s of r)i.push(Ef(s,e,t));return i}if(isObject(r)){if(t.has(r))throw new Error("Cannot clone recursive data-structure");t.add(r);const i={};for(let s in r)jo.call(r,s)&&(i[s]=Ef(r[s],e,t));return t.delete(r),i}return r}function Il(r,e,t=!0){return oa(r)?(oa(e)&&Object.keys(e).forEach(n=>{n in r?t&&(oa(r[n])&&oa(e[n])?Il(r[n],e[n],t):r[n]=e[n]):r[n]=e[n]}),r):e}function Su(r,e){if(r===e)return!0;if(r==null||e===null||e===void 0||typeof r!=typeof e||typeof r!="object"||Array.isArray(r)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(r)){if(r.length!==e.length)return!1;for(t=0;t<r.length;t++)if(!Su(r[t],e[t]))return!1}else{const i=[];for(n in r)i.push(n);i.sort();const s=[];for(n in e)s.push(n);if(s.sort(),!Su(i,s))return!1;for(t=0;t<i.length;t++)if(!Su(r[i[t]],e[i[t]]))return!1}return!0}function Xl(r,e,t){const n=e(r);return typeof n=="undefined"?t:n}const fd={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class qm extends Rn{constructor(e,t={}){super();this._onDidUpdate=this._register(new $t),this._editor=e,this._options=Il(t,fd,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=Boolean(this._options.alwaysRevealFirst),this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(n=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(n=>{this.revealFirst=!0})),this._init()}_init(){!!this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(n=>{this.ranges.push({rhs:!0,range:new Mt(n.modifiedStartLineNumber,n.modifiedStartColumn,n.modifiedEndLineNumber,n.modifiedEndColumn)})}):this.ranges.push({rhs:!0,range:new Mt(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber,1)})}),this.ranges.sort((t,n)=>t.range.getStartPosition().isBeforeOrEqual(n.range.getStartPosition())?-1:n.range.getStartPosition().isBeforeOrEqual(t.range.getStartPosition())?1:0),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1,n=this._editor.getPosition();if(!n){this.nextIdx=0;return}for(let i=0,s=this.ranges.length;i<s&&!t;i++){let o=this.ranges[i].range;n.isBeforeOrEqual(o.getStartPosition())&&(this.nextIdx=i+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(Sf(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let n=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let i=n.range.getStartPosition();this._editor.setPosition(i),this._editor.revealPositionInCenter(i,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}const gh=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new $t,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(r){r=Math.min(Math.max(-5,r),20),this._zoomLevel!==r&&(this._zoomLevel=r,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},Qm=ae?1.5:1.35,np=8;class Qu{constructor(e){this._bareFontInfoBrand=void 0,this.zoomLevel=e.zoomLevel,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,n,i){const s=e.get(39),o=e.get(43),a=e.get(42),l=e.get(41),u=e.get(56),h=e.get(53);return Qu._create(s,o,a,l,u,h,t,n,i)}static _create(e,t,n,i,s,o,a,l,u){s===0?s=Qm*n:s<np&&(s=s*n),s=Math.round(s),s<np&&(s=np);const h=1+(u?0:gh.getZoomLevel()*.1);return n*=h,s*=h,new Qu({zoomLevel:a,pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:i,lineHeight:s,letterSpacing:o})}getId(){return this.zoomLevel+"-"+this.pixelRatio+"-"+this.fontFamily+"-"+this.fontWeight+"-"+this.fontSize+"-"+this.fontFeatureSettings+"-"+this.lineHeight+"-"+this.letterSpacing}getMassagedFontFamily(){return/[,"']/.test(this.fontFamily)?this.fontFamily:/[+ ]/.test(this.fontFamily)?`"${this.fontFamily}"`:this.fontFamily}}const Jm=1;class Ju extends Qu{constructor(e,t){super(e);this._editorStylingBrand=void 0,this.version=Jm,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}function Lf(r){return r&&typeof r.id=="string"}const gd={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var ec;(function(r){r[r.Left=1]="Left",r[r.Center=2]="Center",r[r.Right=4]="Right",r[r.Full=7]="Full"})(ec||(ec={}));var ql;(function(r){r[r.Inline=1]="Inline",r[r.Gutter=2]="Gutter"})(ql||(ql={}));class Eu{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=Boolean(e.insertSpaces),this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=Boolean(e.trimAutoWhitespace)}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class $o{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}class Ql{constructor(e,t,n,i,s,o){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=i,this.isAutoWhitespaceEdit=s,this._isTracked=o}}class ev{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}function xf(r){return Df(r,0)}function Df(r,e){switch(typeof r){case"object":return r===null?vo(349,e):Array.isArray(r)?tv(r,e):q0(r,e);case"string":return ip(r,e);case"boolean":return kc(r,e);case"number":return vo(r,e);case"undefined":return vo(937,e);default:return vo(617,e)}}function vo(r,e){return(e<<5)-e+r|0}function kc(r,e){return vo(r?433:863,e)}function ip(r,e){e=vo(149417,e);for(let t=0,n=r.length;t<n;t++)e=vo(r.charCodeAt(t),e);return e}function tv(r,e){return e=vo(104579,e),r.reduce((t,n)=>Df(n,t),e)}function q0(r,e){return e=vo(181387,e),Object.keys(r).sort().reduce((t,n)=>(t=ip(n,t),Df(r[n],t)),e)}function rp(r,e,t=32){const n=t-e,i=~((1<<n)-1);return(r<<e|(i&r)>>>n)>>>0}function nv(r,e=0,t=r.byteLength,n=0){for(let i=0;i<t;i++)r[e+i]=n}function Q0(r,e,t="0"){for(;r.length<e;)r=t+r;return r}function pd(r,e=32){return r instanceof ArrayBuffer?Array.from(new Uint8Array(r)).map(t=>t.toString(16).padStart(2,"0")).join(""):Q0((r>>>0).toString(16),e/4)}class If{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let i=this._buffLen,s=this._leftoverHighSurrogate,o,a;for(s!==0?(o=s,a=-1,s=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(Zs(o))if(a+1<t){const u=e.charCodeAt(a+1);Gu(u)?(a++,l=nd(o,u)):l=65533}else{s=o;break}else Gu(o)&&(l=65533);if(i=this._push(n,i,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=i,this._leftoverHighSurrogate=s}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),pd(this._h0)+pd(this._h1)+pd(this._h2)+pd(this._h3)+pd(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,nv(this._buff,this._buffLen),this._buffLen>56&&(this._step(),nv(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=If._bigBlock32,t=this._buffDV;for(let v=0;v<64;v+=4)e.setUint32(v,t.getUint32(v,!1),!1);for(let v=64;v<320;v+=4)e.setUint32(v,rp(e.getUint32(v-12,!1)^e.getUint32(v-32,!1)^e.getUint32(v-56,!1)^e.getUint32(v-64,!1),1),!1);let n=this._h0,i=this._h1,s=this._h2,o=this._h3,a=this._h4,l,u,h;for(let v=0;v<80;v++)v<20?(l=i&s|~i&o,u=1518500249):v<40?(l=i^s^o,u=1859775393):v<60?(l=i&s|i&o|s&o,u=2400959708):(l=i^s^o,u=3395469782),h=rp(n,5)+l+a+u+e.getUint32(v*4,!1)&4294967295,a=o,o=s,s=rp(i,30),i=n,n=h;this._h0=this._h0+n&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+s&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}}If._bigBlock32=new DataView(new ArrayBuffer(320));const Nf="**",sp="/",md="[/\\\\]",Tf="[^/\\\\]",J0=/\//g;function op(r){switch(r){case 0:return"";case 1:return`${Tf}*?`;default:return`(?:${md}|${Tf}+${md}|${md}${Tf}+)*?`}}function Mf(r,e){if(!r)return[];const t=[];let n=!1,i=!1,s="";for(const o of r){switch(o){case e:if(!n&&!i){t.push(s),s="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1;break}s+=o}return s&&t.push(s),t}function ap(r){if(!r)return"";let e="";const t=Mf(r,sp);if(t.every(n=>n===Nf))e=".*";else{let n=!1;t.forEach((i,s)=>{if(i===Nf){n||(e+=op(2),n=!0);return}let o=!1,a="",l=!1,u="";for(const h of i){if(h!=="}"&&o){a+=h;continue}if(l&&(h!=="]"||!u)){let v;h==="-"?v=h:(h==="^"||h==="!")&&!u?v="^":h===sp?v="":v=$l(h),u+=v;continue}switch(h){case"{":o=!0;continue;case"[":l=!0;continue;case"}":e+=`(?:${Mf(a,",").map(P=>ap(P)).join("|")})`,o=!1,a="";break;case"]":e+="["+u+"]",l=!1,u="";break;case"?":e+=Tf;continue;case"*":e+=op(1);continue;default:e+=$l(h)}}s<t.length-1&&(t[s+1]!==Nf||s+2<t.length)&&(e+=md),n=!1})}return e}const e_=/^\*\*\/\*\.[\w\.-]+$/,t_=/^\*\*\/([\w\.-]+)\/?$/,n_=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,iv=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,i_=/^\*\*((\/[\w\.-]+)+)\/?$/,il=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,rv=new Zg(1e4),sv=function(){return!1},Jl=function(){return null};function Of(r,e){if(!r)return Jl;let t;typeof r!="string"?t=r.pattern:t=r,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let i=rv.get(n);if(i)return Ba(i,r);let s;if(e_.test(t)){const o=t.substr(4);i=function(a,l){return typeof a=="string"&&a.endsWith(o)?t:null}}else(s=t_.exec(lp(t,e)))?i=r_(s[1],t):(e.trimForExclusions?iv:n_).test(t)?i=s_(t,e):(s=i_.exec(lp(t,e)))?i=vd(s[1].substr(1),t,!0):(s=il.exec(lp(t,e)))?i=vd(s[1],t,!1):i=o_(t);return rv.set(n,i),Ba(i,r)}function Ba(r,e){return typeof e=="string"?r:function(t,n){return qg(t,e.base)?r(tn(e.base,t),n):null}}function lp(r,e){return e.trimForExclusions&&r.endsWith("/**")?r.substr(0,r.length-2):r}function r_(r,e){const t=`/${r}`,n=`\\${r}`,i=function(o,a){return typeof o!="string"?null:a?a===r?e:null:o===r||o.endsWith(t)||o.endsWith(n)?e:null},s=[r];return i.basenames=s,i.patterns=[e],i.allBasenames=s,i}function s_(r,e){const t=av(r.slice(1,-1).split(",").map(a=>Of(a,e)).filter(a=>a!==Jl),r),n=t.length;if(!n)return Jl;if(n===1)return t[0];const i=function(a,l){for(let u=0,h=t.length;u<h;u++)if(t[u](a,l))return r;return null},s=t.find(a=>!!a.allBasenames);s&&(i.allBasenames=s.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(i.allPaths=o),i}function vd(r,e,t){const n=si===Ve.sep,i=n?r:r.replace(J0,si),s=si+i,o=Ve.sep+r,a=t?function(l,u){return typeof l=="string"&&(l===i||l.endsWith(s)||!n&&(l===r||l.endsWith(o)))?e:null}:function(l,u){return typeof l=="string"&&(l===i||!n&&l===r)?e:null};return a.allPaths=[(t?"*/":"./")+r],a}function o_(r){try{const e=new RegExp(`^${ap(r)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?r:null}}catch(e){return Jl}}function ov(r,e,t){return!r||typeof e!="string"?!1:a_(r)(e,void 0,t)}function a_(r,e={}){if(!r)return sv;if(typeof r=="string"||l_(r)){const t=Of(r,e);if(t===Jl)return sv;const n=function(i,s){return!!t(i,s)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return up(r,e)}function l_(r){const e=r;return e&&typeof e.base=="string"&&typeof e.pattern=="string"}function up(r,e){const t=av(Object.getOwnPropertyNames(r).map(a=>u_(a,r[a],e)).filter(a=>a!==Jl)),n=t.length;if(!n)return Jl;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=function(h,v){for(let N=0,P=t.length;N<P;N++){const K=t[N](h,v);if(K)return K}return null},l=t.find(h=>!!h.allBasenames);l&&(a.allBasenames=l.allBasenames);const u=t.reduce((h,v)=>v.allPaths?h.concat(v.allPaths):h,[]);return u.length&&(a.allPaths=u),a}const i=function(a,l,u){let h;for(let v=0,N=t.length;v<N;v++){const P=t[v];P.requiresSiblings&&u&&(l||(l=Xt(a)),h||(h=l.substr(0,l.length-Ln(a).length)));const K=P(a,l,h,u);if(K)return K}return null},s=t.find(a=>!!a.allBasenames);s&&(i.allBasenames=s.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(i.allPaths=o),i}function u_(r,e,t){if(e===!1)return Jl;const n=Of(r,t);if(n===Jl)return Jl;if(typeof e=="boolean")return n;if(e){const i=e.when;if(typeof i=="string"){const s=(o,a,l,u)=>{if(!u||!n(o,a))return null;const h=i.replace("$(basename)",l),v=u(h);return Rm(v)?v.then(N=>N?r:null):v?r:null};return s.requiresSiblings=!0,s}}return n}function av(r,e){const t=r.filter(a=>!!a.basenames);if(t.length<2)return r;const n=t.reduce((a,l)=>{const u=l.basenames;return u?a.concat(u):a},[]);let i;if(e){i=[];for(let a=0,l=n.length;a<l;a++)i.push(e)}else i=t.reduce((a,l)=>{const u=l.patterns;return u?a.concat(u):a},[]);const s=function(a,l){if(typeof a!="string")return null;if(!l){let h;for(h=a.length;h>0;h--){const v=a.charCodeAt(h-1);if(v===47||v===92)break}l=a.substr(h)}const u=n.indexOf(l);return u!==-1?i[u]:null};s.basenames=n,s.patterns=i,s.allBasenames=n;const o=r.filter(a=>!a.basenames);return o.push(s),o}function lv(r,e,t,n){if(Array.isArray(r)){let i=0;for(const s of r){const o=lv(s,e,t,n);if(o===10)return o;o>i&&(i=o)}return i}else{if(typeof r=="string")return n?r==="*"?5:r===t?10:0:0;if(r){const{language:i,pattern:s,scheme:o,hasAccessToAllModels:a}=r;if(!n&&!a)return 0;let l=0;if(o)if(o===e.scheme)l=10;else if(o==="*")l=5;else return 0;if(i)if(i===t)l=10;else if(i==="*")l=Math.max(l,5);else return 0;if(s){let u;if(typeof s=="string"?u=s:u=Object.assign(Object.assign({},s),{base:Xe(s.base)}),u===e.fsPath||ov(u,e.fsPath))l=10;else return 0}return l}else return 0}}const La=Te("modelService");function c_(r){return!r.isTooLargeForSyncing()&&!r.isForSimpleWidget}function uv(r){return typeof r=="string"?!1:Array.isArray(r)?r.every(uv):!!r.exclusive}class ls{constructor(){this._clock=0,this._entries=[],this._onDidChange=new $t}get onDidChange(){return this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Qi(()=>{if(n){let i=this._entries.indexOf(n);i>=0&&(this._entries.splice(i,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(let n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,n=>t.push(n.provider)),t}orderedGroups(e){const t=[];let n,i;return this._orderedForEach(e,s=>{n&&i===s._score?n.push(s.provider):(i=s._score,n=[s.provider],t.push(n))}),t}_orderedForEach(e,t){if(!!e){this._updateScores(e);for(const n of this._entries)n._score>0&&t(n)}}_updateScores(e){let t={uri:e.uri.toString(),language:e.getLanguageIdentifier().language};if(!(this._lastCandidate&&this._lastCandidate.language===t.language&&this._lastCandidate.uri===t.uri)){this._lastCandidate=t;for(let n of this._entries)if(n._score=lv(n.selector,e.uri,e.getLanguageIdentifier().language,c_(e)),uv(n.selector)&&n._score>0){for(let i of this._entries)i._score=0;n._score=1e3;break}this._entries.sort(ls._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}class sb{constructor(e,t,n=Number.MAX_SAFE_INTEGER){this._registry=e,this.min=t,this.max=n,this._cache=new LRUCache(50,.7)}_key(e){return e.id+hash(this._registry.all(e))}_clamp(e){return e===void 0?this.min:Math.min(this.max,Math.max(this.min,Math.floor(e*1.3)))}get(e){const t=this._key(e),n=this._cache.get(t);return this._clamp(n==null?void 0:n.value)}update(e,t){const n=this._key(e);let i=this._cache.get(n);return i||(i=new MovingAverage,this._cache.set(n,i)),i.update(t),this.get(e)}}class h_{constructor(){this._map=new Map,this._promises=new Map,this._onDidChange=new $t,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),Qi(()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))})}registerPromise(e,t){let n=null,i=!1;return this._promises.set(e,t.then(s=>{this._promises.delete(e),!(i||!s)&&(n=this.register(e,s))})),Qi(()=>{i=!0,n&&n.dispose()})}getPromise(e){const t=this.get(e);if(t)return Promise.resolve(t);const n=this._promises.get(e);return n?n.then(i=>this.get(e)):null}get(e){return this._map.get(e)||null}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}class d_{constructor(){this._icons=new Map,this._onDidRegister=new $t}add(e){const t=this._icons.get(e.id);t?e.description?t.description=e.description:console.error(`Duplicate registration of codicon ${e.id}`):(this._icons.set(e.id,e),this._onDidRegister.fire(e))}get(e){return this._icons.get(e)}get all(){return this._icons.values()}get onDidRegister(){return this._onDidRegister.event}}const cv=new d_,kf=cv;function rl(r,e){return new us(r,e)}function f_(r){return r?r.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}class us{constructor(e,t,n){this.id=e,this.definition=t,this.description=n,cv.add(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}}var Ko;(function(r){r.iconNameSegment="[A-Za-z0-9]+",r.iconNameExpression="[A-Za-z0-9\\-]+",r.iconModifierExpression="~[A-Za-z]+";const e=new RegExp(`^(${r.iconNameExpression})(${r.iconModifierExpression})?$`);function t(s){if(s instanceof us)return["codicon","codicon-"+s.id];const o=e.exec(s.id);if(!o)return t(us.error);let[,a,l]=o;const u=["codicon","codicon-"+a];return l&&u.push("codicon-modifier-"+l.substr(1)),u}r.asClassNameArray=t;function n(s){return t(s).join(" ")}r.asClassName=n;function i(s){return"."+t(s).join(".")}r.asCSSSelector=i})(Ko||(Ko={})),function(r){r.add=new r("add",{fontCharacter:"\\ea60"}),r.plus=new r("plus",{fontCharacter:"\\ea60"}),r.gistNew=new r("gist-new",{fontCharacter:"\\ea60"}),r.repoCreate=new r("repo-create",{fontCharacter:"\\ea60"}),r.lightbulb=new r("lightbulb",{fontCharacter:"\\ea61"}),r.lightBulb=new r("light-bulb",{fontCharacter:"\\ea61"}),r.repo=new r("repo",{fontCharacter:"\\ea62"}),r.repoDelete=new r("repo-delete",{fontCharacter:"\\ea62"}),r.gistFork=new r("gist-fork",{fontCharacter:"\\ea63"}),r.repoForked=new r("repo-forked",{fontCharacter:"\\ea63"}),r.gitPullRequest=new r("git-pull-request",{fontCharacter:"\\ea64"}),r.gitPullRequestAbandoned=new r("git-pull-request-abandoned",{fontCharacter:"\\ea64"}),r.recordKeys=new r("record-keys",{fontCharacter:"\\ea65"}),r.keyboard=new r("keyboard",{fontCharacter:"\\ea65"}),r.tag=new r("tag",{fontCharacter:"\\ea66"}),r.tagAdd=new r("tag-add",{fontCharacter:"\\ea66"}),r.tagRemove=new r("tag-remove",{fontCharacter:"\\ea66"}),r.person=new r("person",{fontCharacter:"\\ea67"}),r.personFollow=new r("person-follow",{fontCharacter:"\\ea67"}),r.personOutline=new r("person-outline",{fontCharacter:"\\ea67"}),r.personFilled=new r("person-filled",{fontCharacter:"\\ea67"}),r.gitBranch=new r("git-branch",{fontCharacter:"\\ea68"}),r.gitBranchCreate=new r("git-branch-create",{fontCharacter:"\\ea68"}),r.gitBranchDelete=new r("git-branch-delete",{fontCharacter:"\\ea68"}),r.sourceControl=new r("source-control",{fontCharacter:"\\ea68"}),r.mirror=new r("mirror",{fontCharacter:"\\ea69"}),r.mirrorPublic=new r("mirror-public",{fontCharacter:"\\ea69"}),r.star=new r("star",{fontCharacter:"\\ea6a"}),r.starAdd=new r("star-add",{fontCharacter:"\\ea6a"}),r.starDelete=new r("star-delete",{fontCharacter:"\\ea6a"}),r.starEmpty=new r("star-empty",{fontCharacter:"\\ea6a"}),r.comment=new r("comment",{fontCharacter:"\\ea6b"}),r.commentAdd=new r("comment-add",{fontCharacter:"\\ea6b"}),r.alert=new r("alert",{fontCharacter:"\\ea6c"}),r.warning=new r("warning",{fontCharacter:"\\ea6c"}),r.search=new r("search",{fontCharacter:"\\ea6d"}),r.searchSave=new r("search-save",{fontCharacter:"\\ea6d"}),r.logOut=new r("log-out",{fontCharacter:"\\ea6e"}),r.signOut=new r("sign-out",{fontCharacter:"\\ea6e"}),r.logIn=new r("log-in",{fontCharacter:"\\ea6f"}),r.signIn=new r("sign-in",{fontCharacter:"\\ea6f"}),r.eye=new r("eye",{fontCharacter:"\\ea70"}),r.eyeUnwatch=new r("eye-unwatch",{fontCharacter:"\\ea70"}),r.eyeWatch=new r("eye-watch",{fontCharacter:"\\ea70"}),r.circleFilled=new r("circle-filled",{fontCharacter:"\\ea71"}),r.primitiveDot=new r("primitive-dot",{fontCharacter:"\\ea71"}),r.closeDirty=new r("close-dirty",{fontCharacter:"\\ea71"}),r.debugBreakpoint=new r("debug-breakpoint",{fontCharacter:"\\ea71"}),r.debugBreakpointDisabled=new r("debug-breakpoint-disabled",{fontCharacter:"\\ea71"}),r.debugHint=new r("debug-hint",{fontCharacter:"\\ea71"}),r.primitiveSquare=new r("primitive-square",{fontCharacter:"\\ea72"}),r.edit=new r("edit",{fontCharacter:"\\ea73"}),r.pencil=new r("pencil",{fontCharacter:"\\ea73"}),r.info=new r("info",{fontCharacter:"\\ea74"}),r.issueOpened=new r("issue-opened",{fontCharacter:"\\ea74"}),r.gistPrivate=new r("gist-private",{fontCharacter:"\\ea75"}),r.gitForkPrivate=new r("git-fork-private",{fontCharacter:"\\ea75"}),r.lock=new r("lock",{fontCharacter:"\\ea75"}),r.mirrorPrivate=new r("mirror-private",{fontCharacter:"\\ea75"}),r.close=new r("close",{fontCharacter:"\\ea76"}),r.removeClose=new r("remove-close",{fontCharacter:"\\ea76"}),r.x=new r("x",{fontCharacter:"\\ea76"}),r.repoSync=new r("repo-sync",{fontCharacter:"\\ea77"}),r.sync=new r("sync",{fontCharacter:"\\ea77"}),r.clone=new r("clone",{fontCharacter:"\\ea78"}),r.desktopDownload=new r("desktop-download",{fontCharacter:"\\ea78"}),r.beaker=new r("beaker",{fontCharacter:"\\ea79"}),r.microscope=new r("microscope",{fontCharacter:"\\ea79"}),r.vm=new r("vm",{fontCharacter:"\\ea7a"}),r.deviceDesktop=new r("device-desktop",{fontCharacter:"\\ea7a"}),r.file=new r("file",{fontCharacter:"\\ea7b"}),r.fileText=new r("file-text",{fontCharacter:"\\ea7b"}),r.more=new r("more",{fontCharacter:"\\ea7c"}),r.ellipsis=new r("ellipsis",{fontCharacter:"\\ea7c"}),r.kebabHorizontal=new r("kebab-horizontal",{fontCharacter:"\\ea7c"}),r.mailReply=new r("mail-reply",{fontCharacter:"\\ea7d"}),r.reply=new r("reply",{fontCharacter:"\\ea7d"}),r.organization=new r("organization",{fontCharacter:"\\ea7e"}),r.organizationFilled=new r("organization-filled",{fontCharacter:"\\ea7e"}),r.organizationOutline=new r("organization-outline",{fontCharacter:"\\ea7e"}),r.newFile=new r("new-file",{fontCharacter:"\\ea7f"}),r.fileAdd=new r("file-add",{fontCharacter:"\\ea7f"}),r.newFolder=new r("new-folder",{fontCharacter:"\\ea80"}),r.fileDirectoryCreate=new r("file-directory-create",{fontCharacter:"\\ea80"}),r.trash=new r("trash",{fontCharacter:"\\ea81"}),r.trashcan=new r("trashcan",{fontCharacter:"\\ea81"}),r.history=new r("history",{fontCharacter:"\\ea82"}),r.clock=new r("clock",{fontCharacter:"\\ea82"}),r.folder=new r("folder",{fontCharacter:"\\ea83"}),r.fileDirectory=new r("file-directory",{fontCharacter:"\\ea83"}),r.symbolFolder=new r("symbol-folder",{fontCharacter:"\\ea83"}),r.logoGithub=new r("logo-github",{fontCharacter:"\\ea84"}),r.markGithub=new r("mark-github",{fontCharacter:"\\ea84"}),r.github=new r("github",{fontCharacter:"\\ea84"}),r.terminal=new r("terminal",{fontCharacter:"\\ea85"}),r.console=new r("console",{fontCharacter:"\\ea85"}),r.repl=new r("repl",{fontCharacter:"\\ea85"}),r.zap=new r("zap",{fontCharacter:"\\ea86"}),r.symbolEvent=new r("symbol-event",{fontCharacter:"\\ea86"}),r.error=new r("error",{fontCharacter:"\\ea87"}),r.stop=new r("stop",{fontCharacter:"\\ea87"}),r.variable=new r("variable",{fontCharacter:"\\ea88"}),r.symbolVariable=new r("symbol-variable",{fontCharacter:"\\ea88"}),r.array=new r("array",{fontCharacter:"\\ea8a"}),r.symbolArray=new r("symbol-array",{fontCharacter:"\\ea8a"}),r.symbolModule=new r("symbol-module",{fontCharacter:"\\ea8b"}),r.symbolPackage=new r("symbol-package",{fontCharacter:"\\ea8b"}),r.symbolNamespace=new r("symbol-namespace",{fontCharacter:"\\ea8b"}),r.symbolObject=new r("symbol-object",{fontCharacter:"\\ea8b"}),r.symbolMethod=new r("symbol-method",{fontCharacter:"\\ea8c"}),r.symbolFunction=new r("symbol-function",{fontCharacter:"\\ea8c"}),r.symbolConstructor=new r("symbol-constructor",{fontCharacter:"\\ea8c"}),r.symbolBoolean=new r("symbol-boolean",{fontCharacter:"\\ea8f"}),r.symbolNull=new r("symbol-null",{fontCharacter:"\\ea8f"}),r.symbolNumeric=new r("symbol-numeric",{fontCharacter:"\\ea90"}),r.symbolNumber=new r("symbol-number",{fontCharacter:"\\ea90"}),r.symbolStructure=new r("symbol-structure",{fontCharacter:"\\ea91"}),r.symbolStruct=new r("symbol-struct",{fontCharacter:"\\ea91"}),r.symbolParameter=new r("symbol-parameter",{fontCharacter:"\\ea92"}),r.symbolTypeParameter=new r("symbol-type-parameter",{fontCharacter:"\\ea92"}),r.symbolKey=new r("symbol-key",{fontCharacter:"\\ea93"}),r.symbolText=new r("symbol-text",{fontCharacter:"\\ea93"}),r.symbolReference=new r("symbol-reference",{fontCharacter:"\\ea94"}),r.goToFile=new r("go-to-file",{fontCharacter:"\\ea94"}),r.symbolEnum=new r("symbol-enum",{fontCharacter:"\\ea95"}),r.symbolValue=new r("symbol-value",{fontCharacter:"\\ea95"}),r.symbolRuler=new r("symbol-ruler",{fontCharacter:"\\ea96"}),r.symbolUnit=new r("symbol-unit",{fontCharacter:"\\ea96"}),r.activateBreakpoints=new r("activate-breakpoints",{fontCharacter:"\\ea97"}),r.archive=new r("archive",{fontCharacter:"\\ea98"}),r.arrowBoth=new r("arrow-both",{fontCharacter:"\\ea99"}),r.arrowDown=new r("arrow-down",{fontCharacter:"\\ea9a"}),r.arrowLeft=new r("arrow-left",{fontCharacter:"\\ea9b"}),r.arrowRight=new r("arrow-right",{fontCharacter:"\\ea9c"}),r.arrowSmallDown=new r("arrow-small-down",{fontCharacter:"\\ea9d"}),r.arrowSmallLeft=new r("arrow-small-left",{fontCharacter:"\\ea9e"}),r.arrowSmallRight=new r("arrow-small-right",{fontCharacter:"\\ea9f"}),r.arrowSmallUp=new r("arrow-small-up",{fontCharacter:"\\eaa0"}),r.arrowUp=new r("arrow-up",{fontCharacter:"\\eaa1"}),r.bell=new r("bell",{fontCharacter:"\\eaa2"}),r.bold=new r("bold",{fontCharacter:"\\eaa3"}),r.book=new r("book",{fontCharacter:"\\eaa4"}),r.bookmark=new r("bookmark",{fontCharacter:"\\eaa5"}),r.debugBreakpointConditionalUnverified=new r("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"}),r.debugBreakpointConditional=new r("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"}),r.debugBreakpointConditionalDisabled=new r("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"}),r.debugBreakpointDataUnverified=new r("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"}),r.debugBreakpointData=new r("debug-breakpoint-data",{fontCharacter:"\\eaa9"}),r.debugBreakpointDataDisabled=new r("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"}),r.debugBreakpointLogUnverified=new r("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"}),r.debugBreakpointLog=new r("debug-breakpoint-log",{fontCharacter:"\\eaab"}),r.debugBreakpointLogDisabled=new r("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"}),r.briefcase=new r("briefcase",{fontCharacter:"\\eaac"}),r.broadcast=new r("broadcast",{fontCharacter:"\\eaad"}),r.browser=new r("browser",{fontCharacter:"\\eaae"}),r.bug=new r("bug",{fontCharacter:"\\eaaf"}),r.calendar=new r("calendar",{fontCharacter:"\\eab0"}),r.caseSensitive=new r("case-sensitive",{fontCharacter:"\\eab1"}),r.check=new r("check",{fontCharacter:"\\eab2"}),r.checklist=new r("checklist",{fontCharacter:"\\eab3"}),r.chevronDown=new r("chevron-down",{fontCharacter:"\\eab4"}),r.chevronLeft=new r("chevron-left",{fontCharacter:"\\eab5"}),r.chevronRight=new r("chevron-right",{fontCharacter:"\\eab6"}),r.chevronUp=new r("chevron-up",{fontCharacter:"\\eab7"}),r.chromeClose=new r("chrome-close",{fontCharacter:"\\eab8"}),r.chromeMaximize=new r("chrome-maximize",{fontCharacter:"\\eab9"}),r.chromeMinimize=new r("chrome-minimize",{fontCharacter:"\\eaba"}),r.chromeRestore=new r("chrome-restore",{fontCharacter:"\\eabb"}),r.circleOutline=new r("circle-outline",{fontCharacter:"\\eabc"}),r.debugBreakpointUnverified=new r("debug-breakpoint-unverified",{fontCharacter:"\\eabc"}),r.circleSlash=new r("circle-slash",{fontCharacter:"\\eabd"}),r.circuitBoard=new r("circuit-board",{fontCharacter:"\\eabe"}),r.clearAll=new r("clear-all",{fontCharacter:"\\eabf"}),r.clippy=new r("clippy",{fontCharacter:"\\eac0"}),r.closeAll=new r("close-all",{fontCharacter:"\\eac1"}),r.cloudDownload=new r("cloud-download",{fontCharacter:"\\eac2"}),r.cloudUpload=new r("cloud-upload",{fontCharacter:"\\eac3"}),r.code=new r("code",{fontCharacter:"\\eac4"}),r.collapseAll=new r("collapse-all",{fontCharacter:"\\eac5"}),r.colorMode=new r("color-mode",{fontCharacter:"\\eac6"}),r.commentDiscussion=new r("comment-discussion",{fontCharacter:"\\eac7"}),r.compareChanges=new r("compare-changes",{fontCharacter:"\\eafd"}),r.creditCard=new r("credit-card",{fontCharacter:"\\eac9"}),r.dash=new r("dash",{fontCharacter:"\\eacc"}),r.dashboard=new r("dashboard",{fontCharacter:"\\eacd"}),r.database=new r("database",{fontCharacter:"\\eace"}),r.debugContinue=new r("debug-continue",{fontCharacter:"\\eacf"}),r.debugDisconnect=new r("debug-disconnect",{fontCharacter:"\\ead0"}),r.debugPause=new r("debug-pause",{fontCharacter:"\\ead1"}),r.debugRestart=new r("debug-restart",{fontCharacter:"\\ead2"}),r.debugStart=new r("debug-start",{fontCharacter:"\\ead3"}),r.debugStepInto=new r("debug-step-into",{fontCharacter:"\\ead4"}),r.debugStepOut=new r("debug-step-out",{fontCharacter:"\\ead5"}),r.debugStepOver=new r("debug-step-over",{fontCharacter:"\\ead6"}),r.debugStop=new r("debug-stop",{fontCharacter:"\\ead7"}),r.debug=new r("debug",{fontCharacter:"\\ead8"}),r.deviceCameraVideo=new r("device-camera-video",{fontCharacter:"\\ead9"}),r.deviceCamera=new r("device-camera",{fontCharacter:"\\eada"}),r.deviceMobile=new r("device-mobile",{fontCharacter:"\\eadb"}),r.diffAdded=new r("diff-added",{fontCharacter:"\\eadc"}),r.diffIgnored=new r("diff-ignored",{fontCharacter:"\\eadd"}),r.diffModified=new r("diff-modified",{fontCharacter:"\\eade"}),r.diffRemoved=new r("diff-removed",{fontCharacter:"\\eadf"}),r.diffRenamed=new r("diff-renamed",{fontCharacter:"\\eae0"}),r.diff=new r("diff",{fontCharacter:"\\eae1"}),r.discard=new r("discard",{fontCharacter:"\\eae2"}),r.editorLayout=new r("editor-layout",{fontCharacter:"\\eae3"}),r.emptyWindow=new r("empty-window",{fontCharacter:"\\eae4"}),r.exclude=new r("exclude",{fontCharacter:"\\eae5"}),r.extensions=new r("extensions",{fontCharacter:"\\eae6"}),r.eyeClosed=new r("eye-closed",{fontCharacter:"\\eae7"}),r.fileBinary=new r("file-binary",{fontCharacter:"\\eae8"}),r.fileCode=new r("file-code",{fontCharacter:"\\eae9"}),r.fileMedia=new r("file-media",{fontCharacter:"\\eaea"}),r.filePdf=new r("file-pdf",{fontCharacter:"\\eaeb"}),r.fileSubmodule=new r("file-submodule",{fontCharacter:"\\eaec"}),r.fileSymlinkDirectory=new r("file-symlink-directory",{fontCharacter:"\\eaed"}),r.fileSymlinkFile=new r("file-symlink-file",{fontCharacter:"\\eaee"}),r.fileZip=new r("file-zip",{fontCharacter:"\\eaef"}),r.files=new r("files",{fontCharacter:"\\eaf0"}),r.filter=new r("filter",{fontCharacter:"\\eaf1"}),r.flame=new r("flame",{fontCharacter:"\\eaf2"}),r.foldDown=new r("fold-down",{fontCharacter:"\\eaf3"}),r.foldUp=new r("fold-up",{fontCharacter:"\\eaf4"}),r.fold=new r("fold",{fontCharacter:"\\eaf5"}),r.folderActive=new r("folder-active",{fontCharacter:"\\eaf6"}),r.folderOpened=new r("folder-opened",{fontCharacter:"\\eaf7"}),r.gear=new r("gear",{fontCharacter:"\\eaf8"}),r.gift=new r("gift",{fontCharacter:"\\eaf9"}),r.gistSecret=new r("gist-secret",{fontCharacter:"\\eafa"}),r.gist=new r("gist",{fontCharacter:"\\eafb"}),r.gitCommit=new r("git-commit",{fontCharacter:"\\eafc"}),r.gitCompare=new r("git-compare",{fontCharacter:"\\eafd"}),r.gitMerge=new r("git-merge",{fontCharacter:"\\eafe"}),r.githubAction=new r("github-action",{fontCharacter:"\\eaff"}),r.githubAlt=new r("github-alt",{fontCharacter:"\\eb00"}),r.globe=new r("globe",{fontCharacter:"\\eb01"}),r.grabber=new r("grabber",{fontCharacter:"\\eb02"}),r.graph=new r("graph",{fontCharacter:"\\eb03"}),r.gripper=new r("gripper",{fontCharacter:"\\eb04"}),r.heart=new r("heart",{fontCharacter:"\\eb05"}),r.home=new r("home",{fontCharacter:"\\eb06"}),r.horizontalRule=new r("horizontal-rule",{fontCharacter:"\\eb07"}),r.hubot=new r("hubot",{fontCharacter:"\\eb08"}),r.inbox=new r("inbox",{fontCharacter:"\\eb09"}),r.issueClosed=new r("issue-closed",{fontCharacter:"\\eb0a"}),r.issueReopened=new r("issue-reopened",{fontCharacter:"\\eb0b"}),r.issues=new r("issues",{fontCharacter:"\\eb0c"}),r.italic=new r("italic",{fontCharacter:"\\eb0d"}),r.jersey=new r("jersey",{fontCharacter:"\\eb0e"}),r.json=new r("json",{fontCharacter:"\\eb0f"}),r.kebabVertical=new r("kebab-vertical",{fontCharacter:"\\eb10"}),r.key=new r("key",{fontCharacter:"\\eb11"}),r.law=new r("law",{fontCharacter:"\\eb12"}),r.lightbulbAutofix=new r("lightbulb-autofix",{fontCharacter:"\\eb13"}),r.linkExternal=new r("link-external",{fontCharacter:"\\eb14"}),r.link=new r("link",{fontCharacter:"\\eb15"}),r.listOrdered=new r("list-ordered",{fontCharacter:"\\eb16"}),r.listUnordered=new r("list-unordered",{fontCharacter:"\\eb17"}),r.liveShare=new r("live-share",{fontCharacter:"\\eb18"}),r.loading=new r("loading",{fontCharacter:"\\eb19"}),r.location=new r("location",{fontCharacter:"\\eb1a"}),r.mailRead=new r("mail-read",{fontCharacter:"\\eb1b"}),r.mail=new r("mail",{fontCharacter:"\\eb1c"}),r.markdown=new r("markdown",{fontCharacter:"\\eb1d"}),r.megaphone=new r("megaphone",{fontCharacter:"\\eb1e"}),r.mention=new r("mention",{fontCharacter:"\\eb1f"}),r.milestone=new r("milestone",{fontCharacter:"\\eb20"}),r.mortarBoard=new r("mortar-board",{fontCharacter:"\\eb21"}),r.move=new r("move",{fontCharacter:"\\eb22"}),r.multipleWindows=new r("multiple-windows",{fontCharacter:"\\eb23"}),r.mute=new r("mute",{fontCharacter:"\\eb24"}),r.noNewline=new r("no-newline",{fontCharacter:"\\eb25"}),r.note=new r("note",{fontCharacter:"\\eb26"}),r.octoface=new r("octoface",{fontCharacter:"\\eb27"}),r.openPreview=new r("open-preview",{fontCharacter:"\\eb28"}),r.package_=new r("package",{fontCharacter:"\\eb29"}),r.paintcan=new r("paintcan",{fontCharacter:"\\eb2a"}),r.pin=new r("pin",{fontCharacter:"\\eb2b"}),r.play=new r("play",{fontCharacter:"\\eb2c"}),r.run=new r("run",{fontCharacter:"\\eb2c"}),r.plug=new r("plug",{fontCharacter:"\\eb2d"}),r.preserveCase=new r("preserve-case",{fontCharacter:"\\eb2e"}),r.preview=new r("preview",{fontCharacter:"\\eb2f"}),r.project=new r("project",{fontCharacter:"\\eb30"}),r.pulse=new r("pulse",{fontCharacter:"\\eb31"}),r.question=new r("question",{fontCharacter:"\\eb32"}),r.quote=new r("quote",{fontCharacter:"\\eb33"}),r.radioTower=new r("radio-tower",{fontCharacter:"\\eb34"}),r.reactions=new r("reactions",{fontCharacter:"\\eb35"}),r.references=new r("references",{fontCharacter:"\\eb36"}),r.refresh=new r("refresh",{fontCharacter:"\\eb37"}),r.regex=new r("regex",{fontCharacter:"\\eb38"}),r.remoteExplorer=new r("remote-explorer",{fontCharacter:"\\eb39"}),r.remote=new r("remote",{fontCharacter:"\\eb3a"}),r.remove=new r("remove",{fontCharacter:"\\eb3b"}),r.replaceAll=new r("replace-all",{fontCharacter:"\\eb3c"}),r.replace=new r("replace",{fontCharacter:"\\eb3d"}),r.repoClone=new r("repo-clone",{fontCharacter:"\\eb3e"}),r.repoForcePush=new r("repo-force-push",{fontCharacter:"\\eb3f"}),r.repoPull=new r("repo-pull",{fontCharacter:"\\eb40"}),r.repoPush=new r("repo-push",{fontCharacter:"\\eb41"}),r.report=new r("report",{fontCharacter:"\\eb42"}),r.requestChanges=new r("request-changes",{fontCharacter:"\\eb43"}),r.rocket=new r("rocket",{fontCharacter:"\\eb44"}),r.rootFolderOpened=new r("root-folder-opened",{fontCharacter:"\\eb45"}),r.rootFolder=new r("root-folder",{fontCharacter:"\\eb46"}),r.rss=new r("rss",{fontCharacter:"\\eb47"}),r.ruby=new r("ruby",{fontCharacter:"\\eb48"}),r.saveAll=new r("save-all",{fontCharacter:"\\eb49"}),r.saveAs=new r("save-as",{fontCharacter:"\\eb4a"}),r.save=new r("save",{fontCharacter:"\\eb4b"}),r.screenFull=new r("screen-full",{fontCharacter:"\\eb4c"}),r.screenNormal=new r("screen-normal",{fontCharacter:"\\eb4d"}),r.searchStop=new r("search-stop",{fontCharacter:"\\eb4e"}),r.server=new r("server",{fontCharacter:"\\eb50"}),r.settingsGear=new r("settings-gear",{fontCharacter:"\\eb51"}),r.settings=new r("settings",{fontCharacter:"\\eb52"}),r.shield=new r("shield",{fontCharacter:"\\eb53"}),r.smiley=new r("smiley",{fontCharacter:"\\eb54"}),r.sortPrecedence=new r("sort-precedence",{fontCharacter:"\\eb55"}),r.splitHorizontal=new r("split-horizontal",{fontCharacter:"\\eb56"}),r.splitVertical=new r("split-vertical",{fontCharacter:"\\eb57"}),r.squirrel=new r("squirrel",{fontCharacter:"\\eb58"}),r.starFull=new r("star-full",{fontCharacter:"\\eb59"}),r.starHalf=new r("star-half",{fontCharacter:"\\eb5a"}),r.symbolClass=new r("symbol-class",{fontCharacter:"\\eb5b"}),r.symbolColor=new r("symbol-color",{fontCharacter:"\\eb5c"}),r.symbolConstant=new r("symbol-constant",{fontCharacter:"\\eb5d"}),r.symbolEnumMember=new r("symbol-enum-member",{fontCharacter:"\\eb5e"}),r.symbolField=new r("symbol-field",{fontCharacter:"\\eb5f"}),r.symbolFile=new r("symbol-file",{fontCharacter:"\\eb60"}),r.symbolInterface=new r("symbol-interface",{fontCharacter:"\\eb61"}),r.symbolKeyword=new r("symbol-keyword",{fontCharacter:"\\eb62"}),r.symbolMisc=new r("symbol-misc",{fontCharacter:"\\eb63"}),r.symbolOperator=new r("symbol-operator",{fontCharacter:"\\eb64"}),r.symbolProperty=new r("symbol-property",{fontCharacter:"\\eb65"}),r.wrench=new r("wrench",{fontCharacter:"\\eb65"}),r.wrenchSubaction=new r("wrench-subaction",{fontCharacter:"\\eb65"}),r.symbolSnippet=new r("symbol-snippet",{fontCharacter:"\\eb66"}),r.tasklist=new r("tasklist",{fontCharacter:"\\eb67"}),r.telescope=new r("telescope",{fontCharacter:"\\eb68"}),r.textSize=new r("text-size",{fontCharacter:"\\eb69"}),r.threeBars=new r("three-bars",{fontCharacter:"\\eb6a"}),r.thumbsdown=new r("thumbsdown",{fontCharacter:"\\eb6b"}),r.thumbsup=new r("thumbsup",{fontCharacter:"\\eb6c"}),r.tools=new r("tools",{fontCharacter:"\\eb6d"}),r.triangleDown=new r("triangle-down",{fontCharacter:"\\eb6e"}),r.triangleLeft=new r("triangle-left",{fontCharacter:"\\eb6f"}),r.triangleRight=new r("triangle-right",{fontCharacter:"\\eb70"}),r.triangleUp=new r("triangle-up",{fontCharacter:"\\eb71"}),r.twitter=new r("twitter",{fontCharacter:"\\eb72"}),r.unfold=new r("unfold",{fontCharacter:"\\eb73"}),r.unlock=new r("unlock",{fontCharacter:"\\eb74"}),r.unmute=new r("unmute",{fontCharacter:"\\eb75"}),r.unverified=new r("unverified",{fontCharacter:"\\eb76"}),r.verified=new r("verified",{fontCharacter:"\\eb77"}),r.versions=new r("versions",{fontCharacter:"\\eb78"}),r.vmActive=new r("vm-active",{fontCharacter:"\\eb79"}),r.vmOutline=new r("vm-outline",{fontCharacter:"\\eb7a"}),r.vmRunning=new r("vm-running",{fontCharacter:"\\eb7b"}),r.watch=new r("watch",{fontCharacter:"\\eb7c"}),r.whitespace=new r("whitespace",{fontCharacter:"\\eb7d"}),r.wholeWord=new r("whole-word",{fontCharacter:"\\eb7e"}),r.window=new r("window",{fontCharacter:"\\eb7f"}),r.wordWrap=new r("word-wrap",{fontCharacter:"\\eb80"}),r.zoomIn=new r("zoom-in",{fontCharacter:"\\eb81"}),r.zoomOut=new r("zoom-out",{fontCharacter:"\\eb82"}),r.listFilter=new r("list-filter",{fontCharacter:"\\eb83"}),r.listFlat=new r("list-flat",{fontCharacter:"\\eb84"}),r.listSelection=new r("list-selection",{fontCharacter:"\\eb85"}),r.selection=new r("selection",{fontCharacter:"\\eb85"}),r.listTree=new r("list-tree",{fontCharacter:"\\eb86"}),r.debugBreakpointFunctionUnverified=new r("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"}),r.debugBreakpointFunction=new r("debug-breakpoint-function",{fontCharacter:"\\eb88"}),r.debugBreakpointFunctionDisabled=new r("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"}),r.debugStackframeActive=new r("debug-stackframe-active",{fontCharacter:"\\eb89"}),r.debugStackframeDot=new r("debug-stackframe-dot",{fontCharacter:"\\eb8a"}),r.debugStackframe=new r("debug-stackframe",{fontCharacter:"\\eb8b"}),r.debugStackframeFocused=new r("debug-stackframe-focused",{fontCharacter:"\\eb8b"}),r.debugBreakpointUnsupported=new r("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"}),r.symbolString=new r("symbol-string",{fontCharacter:"\\eb8d"}),r.debugReverseContinue=new r("debug-reverse-continue",{fontCharacter:"\\eb8e"}),r.debugStepBack=new r("debug-step-back",{fontCharacter:"\\eb8f"}),r.debugRestartFrame=new r("debug-restart-frame",{fontCharacter:"\\eb90"}),r.callIncoming=new r("call-incoming",{fontCharacter:"\\eb92"}),r.callOutgoing=new r("call-outgoing",{fontCharacter:"\\eb93"}),r.menu=new r("menu",{fontCharacter:"\\eb94"}),r.expandAll=new r("expand-all",{fontCharacter:"\\eb95"}),r.feedback=new r("feedback",{fontCharacter:"\\eb96"}),r.groupByRefType=new r("group-by-ref-type",{fontCharacter:"\\eb97"}),r.ungroupByRefType=new r("ungroup-by-ref-type",{fontCharacter:"\\eb98"}),r.account=new r("account",{fontCharacter:"\\eb99"}),r.bellDot=new r("bell-dot",{fontCharacter:"\\eb9a"}),r.debugConsole=new r("debug-console",{fontCharacter:"\\eb9b"}),r.library=new r("library",{fontCharacter:"\\eb9c"}),r.output=new r("output",{fontCharacter:"\\eb9d"}),r.runAll=new r("run-all",{fontCharacter:"\\eb9e"}),r.syncIgnored=new r("sync-ignored",{fontCharacter:"\\eb9f"}),r.pinned=new r("pinned",{fontCharacter:"\\eba0"}),r.githubInverted=new r("github-inverted",{fontCharacter:"\\eba1"}),r.debugAlt=new r("debug-alt",{fontCharacter:"\\eb91"}),r.serverProcess=new r("server-process",{fontCharacter:"\\eba2"}),r.serverEnvironment=new r("server-environment",{fontCharacter:"\\eba3"}),r.pass=new r("pass",{fontCharacter:"\\eba4"}),r.stopCircle=new r("stop-circle",{fontCharacter:"\\eba5"}),r.playCircle=new r("play-circle",{fontCharacter:"\\eba6"}),r.record=new r("record",{fontCharacter:"\\eba7"}),r.debugAltSmall=new r("debug-alt-small",{fontCharacter:"\\eba8"}),r.vmConnect=new r("vm-connect",{fontCharacter:"\\eba9"}),r.cloud=new r("cloud",{fontCharacter:"\\ebaa"}),r.merge=new r("merge",{fontCharacter:"\\ebab"}),r.exportIcon=new r("export",{fontCharacter:"\\ebac"}),r.graphLeft=new r("graph-left",{fontCharacter:"\\ebad"}),r.magnet=new r("magnet",{fontCharacter:"\\ebae"}),r.notebook=new r("notebook",{fontCharacter:"\\ebaf"}),r.redo=new r("redo",{fontCharacter:"\\ebb0"}),r.checkAll=new r("check-all",{fontCharacter:"\\ebb1"}),r.pinnedDirty=new r("pinned-dirty",{fontCharacter:"\\ebb2"}),r.passFilled=new r("pass-filled",{fontCharacter:"\\ebb3"}),r.circleLargeFilled=new r("circle-large-filled",{fontCharacter:"\\ebb4"}),r.circleLargeOutline=new r("circle-large-outline",{fontCharacter:"\\ebb5"}),r.combine=new r("combine",{fontCharacter:"\\ebb6"}),r.gather=new r("gather",{fontCharacter:"\\ebb6"}),r.table=new r("table",{fontCharacter:"\\ebb7"}),r.variableGroup=new r("variable-group",{fontCharacter:"\\ebb8"}),r.typeHierarchy=new r("type-hierarchy",{fontCharacter:"\\ebb9"}),r.typeHierarchySub=new r("type-hierarchy-sub",{fontCharacter:"\\ebba"}),r.typeHierarchySuper=new r("type-hierarchy-super",{fontCharacter:"\\ebbb"}),r.gitPullRequestCreate=new r("git-pull-request-create",{fontCharacter:"\\ebbc"}),r.runAbove=new r("run-above",{fontCharacter:"\\ebbd"}),r.runBelow=new r("run-below",{fontCharacter:"\\ebbe"}),r.notebookTemplate=new r("notebook-template",{fontCharacter:"\\ebbf"}),r.debugRerun=new r("debug-rerun",{fontCharacter:"\\ebc0"}),r.workspaceTrusted=new r("workspace-trusted",{fontCharacter:"\\ebc1"}),r.workspaceUntrusted=new r("workspace-untrusted",{fontCharacter:"\\ebc2"}),r.workspaceUnspecified=new r("workspace-unspecified",{fontCharacter:"\\ebc3"}),r.terminalCmd=new r("terminal-cmd",{fontCharacter:"\\ebc4"}),r.terminalDebian=new r("terminal-debian",{fontCharacter:"\\ebc5"}),r.terminalLinux=new r("terminal-linux",{fontCharacter:"\\ebc6"}),r.terminalPowershell=new r("terminal-powershell",{fontCharacter:"\\ebc7"}),r.terminalTmux=new r("terminal-tmux",{fontCharacter:"\\ebc8"}),r.terminalUbuntu=new r("terminal-ubuntu",{fontCharacter:"\\ebc9"}),r.terminalBash=new r("terminal-bash",{fontCharacter:"\\ebca"}),r.arrowSwap=new r("arrow-swap",{fontCharacter:"\\ebcb"}),r.copy=new r("copy",{fontCharacter:"\\ebcc"}),r.personAdd=new r("person-add",{fontCharacter:"\\ebcd"}),r.filterFilled=new r("filter-filled",{fontCharacter:"\\ebce"}),r.wand=new r("wand",{fontCharacter:"\\ebcf"}),r.debugLineByLine=new r("debug-line-by-line",{fontCharacter:"\\ebd0"}),r.inspect=new r("inspect",{fontCharacter:"\\ebd1"}),r.dropDownButton=new r("drop-down-button",r.chevronDown.definition)}(us||(us={}));class Af{constructor(e,t){this.language=e,this.id=t}}class sl{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&1792)>>>8}static getFontStyle(e){return(e&14336)>>>11}static getForeground(e){return(e&8372224)>>>14}static getBackground(e){return(e&4286578688)>>>23}static getClassNameFromMetadata(e){let t=this.getForeground(e),n="mtk"+t,i=this.getFontStyle(e);return i&1&&(n+=" mtki"),i&2&&(n+=" mtkb"),i&4&&(n+=" mtku"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),i=this.getFontStyle(e);let s=`color: ${t[n]};`;return i&1&&(s+="font-style: italic;"),i&2&&(s+="font-weight: bold;"),i&4&&(s+="text-decoration: underline;"),s}}const ob=function(){let r=Object.create(null);return r[0]="symbol-method",r[1]="symbol-function",r[2]="symbol-constructor",r[3]="symbol-field",r[4]="symbol-variable",r[5]="symbol-class",r[6]="symbol-struct",r[7]="symbol-interface",r[8]="symbol-module",r[9]="symbol-property",r[10]="symbol-event",r[11]="symbol-operator",r[12]="symbol-unit",r[13]="symbol-value",r[14]="symbol-constant",r[15]="symbol-enum",r[16]="symbol-enum-member",r[17]="symbol-keyword",r[27]="symbol-snippet",r[18]="symbol-text",r[19]="symbol-color",r[20]="symbol-file",r[21]="symbol-reference",r[22]="symbol-customcolor",r[23]="symbol-folder",r[24]="symbol-type-parameter",r[25]="account",r[26]="issues",function(e){const t=r[e];let n=t&&kf.get(t);return n||(console.info("No codicon found for CompletionItemKind "+e),n=us.symbolProperty),n.classNames}}();let ab=function(){let r=Object.create(null);return r.method=0,r.function=1,r.constructor=2,r.field=3,r.variable=4,r.class=5,r.struct=6,r.interface=7,r.module=8,r.property=9,r.event=10,r.operator=11,r.unit=12,r.value=13,r.constant=14,r.enum=15,r["enum-member"]=16,r.enumMember=16,r.keyword=17,r.snippet=27,r.text=18,r.color=19,r.file=20,r.reference=21,r.customcolor=22,r.folder=23,r["type-parameter"]=24,r.typeParameter=24,r.account=25,r.issue=26,function(e,t){let n=r[e];return typeof n=="undefined"&&!t&&(n=9),n}}();var Rf;(function(r){r[r.Automatic=0]="Automatic",r[r.Explicit=1]="Explicit"})(Rf||(Rf={}));var cp;(function(r){r[r.Invoke=1]="Invoke",r[r.TriggerCharacter=2]="TriggerCharacter",r[r.ContentChange=3]="ContentChange"})(cp||(cp={}));var hv;(function(r){r[r.Text=0]="Text",r[r.Read=1]="Read",r[r.Write=2]="Write"})(hv||(hv={}));function lb(r){return r&&URI.isUri(r.uri)&&Range.isIRange(r.range)&&(Range.isIRange(r.originSelectionRange)||Range.isIRange(r.targetSelectionRange))}var dv;(function(r){const e=new Map;e.set("file",0),e.set("module",1),e.set("namespace",2),e.set("package",3),e.set("class",4),e.set("method",5),e.set("property",6),e.set("field",7),e.set("constructor",8),e.set("enum",9),e.set("interface",10),e.set("function",11),e.set("variable",12),e.set("constant",13),e.set("string",14),e.set("number",15),e.set("boolean",16),e.set("array",17),e.set("object",18),e.set("key",19),e.set("null",20),e.set("enum-member",21),e.set("struct",22),e.set("event",23),e.set("operator",24),e.set("type-parameter",25);const t=new Map;t.set(0,"file"),t.set(1,"module"),t.set(2,"namespace"),t.set(3,"package"),t.set(4,"class"),t.set(5,"method"),t.set(6,"property"),t.set(7,"field"),t.set(8,"constructor"),t.set(9,"enum"),t.set(10,"interface"),t.set(11,"function"),t.set(12,"variable"),t.set(13,"constant"),t.set(14,"string"),t.set(15,"number"),t.set(16,"boolean"),t.set(17,"array"),t.set(18,"object"),t.set(19,"key"),t.set(20,"null"),t.set(21,"enum-member"),t.set(22,"struct"),t.set(23,"event"),t.set(24,"operator"),t.set(25,"type-parameter");function n(o){return e.get(o)}r.fromString=n;function i(o){return t.get(o)}r.toString=i;function s(o,a){const l=t.get(o);let u=l&&kf.get("symbol-"+l);return u||(console.info("No codicon found for SymbolKind "+o),u=us.symbolProperty),`${a?"inline":"block"} ${u.classNames}`}r.toCssClassName=s})(dv||(dv={}));class tc{constructor(e){this.value=e}}tc.Comment=new tc("comment"),tc.Imports=new tc("imports"),tc.Region=new tc("region");var fv;(function(r){r[r.Other=0]="Other",r[r.Type=1]="Type",r[r.Parameter=2]="Parameter"})(fv||(fv={}));const ph=new ls,hp=new ls,Pf=new ls,gv=new ls,dp=new ls,mh=new ls,fp=new ls,gp=new ls,g_=new ls,pp=new ls,mp=new ls,vp=new ls,_p=new ls,yp=new ls,bp=new ls,wp=new ls,_d=new ls,Lu=new ls,Cp=new ls,pv=new ls,p_=new ls,m_=new ls,mv=new ls,nc=new ls,vv=new ls,bs=new h_;class v_{clone(){return this}equals(e){return this===e}}const Ff=new v_,vh="vs.editor.nullMode",Bf=new Af(vh,0);function __(r,e,t,n){return new na([new lo(n,"",r)],t)}function _v(r,e,t,n){let i=new Uint32Array(2);return i[0]=n,i[1]=(r<<0|0<<8|0<<11|1<<14|2<<23)>>>0,new gl(i,t===null?Ff:t)}const Ac=Te("editorWorkerService"),Sp=Te("modeService"),yd=Te("textModelService"),yv="$initialize";let Ep=!1;function Wf(r){!oe||(Ep||(Ep=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(r.message))}class Vf{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null)}setWorkerId(e){this._workerId=e}sendMessage(e,t){let n=String(++this._lastSentReq);return new Promise((i,s)=>{this._pendingReplies[n]={resolve:i,reject:s},this._send({vsWorker:this._workerId,req:n,method:e,args:t})})}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){if(e.seq){let s=e;if(!this._pendingReplies[s.seq]){console.warn("Got reply to unknown seq");return}let o=this._pendingReplies[s.seq];if(delete this._pendingReplies[s.seq],s.err){let a=s.err;s.err.$isError&&(a=new Error,a.name=s.err.name,a.message=s.err.message,a.stack=s.err.stack),o.reject(a);return}o.resolve(s.res);return}let t=e,n=t.req;this._handler.handleMessage(t.method,t.args).then(s=>{this._send({vsWorker:this._workerId,seq:n,res:s,err:void 0})},s=>{s.detail instanceof Error&&(s.detail=ui(s.detail)),this._send({vsWorker:this._workerId,seq:n,res:void 0,err:ui(s)})})}_send(e){let t=[];if(e.req){const n=e;for(let i=0;i<n.args.length;i++)n.args[i]instanceof ArrayBuffer&&t.push(n.args[i])}else{const n=e;n.res instanceof ArrayBuffer&&t.push(n.res)}this._handler.sendMessage(e,t)}}class bd extends Rn{constructor(e,t,n){super();let i=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",l=>{this._protocol.handleMessage(l)},l=>{i&&i(l)})),this._protocol=new Vf({sendMessage:(l,u)=>{this._worker.postMessage(l,u)},handleMessage:(l,u)=>{if(typeof n[l]!="function")return Promise.reject(new Error("Missing method "+l+" on main thread host."));try{return Promise.resolve(n[l].apply(n,u))}catch(h){return Promise.reject(h)}}}),this._protocol.setWorkerId(this._worker.getId());let s=null;typeof self.require!="undefined"&&typeof self.require.getConfig=="function"?s=self.require.getConfig():typeof self.requirejs!="undefined"&&(s=self.requirejs.s.contexts._.config);const o=Oc(n);this._onModuleLoaded=this._protocol.sendMessage(yv,[this._worker.getId(),JSON.parse(JSON.stringify(s)),t,o]);const a=(l,u)=>this._request(l,u);this._lazyProxy=new Promise((l,u)=>{i=u,this._onModuleLoaded.then(h=>{l(Ll(h,a))},h=>{u(h),this._onError("Worker failed to load "+t,h)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,i)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,i)},i)})}_onError(e,t){console.error(e),console.info(t)}}class bv{constructor(e,t){this._requestHandlerFactory=t,this._requestHandler=null,this._protocol=new Vf({sendMessage:(n,i)=>{e(n,i)},handleMessage:(n,i)=>this._handleMessage(n,i)})}onmessage(e){this._protocol.handleMessage(e)}_handleMessage(e,t){if(e===yv)return this.initialize(t[0],t[1],t[2],t[3]);if(!this._requestHandler||typeof this._requestHandler[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._requestHandler[e].apply(this._requestHandler,t))}catch(n){return Promise.reject(n)}}initialize(e,t,n,i){this._protocol.setWorkerId(e);const s=(a,l)=>this._protocol.sendMessage(a,l),o=types.createProxyObject(i,s);return this._requestHandlerFactory?(this._requestHandler=this._requestHandlerFactory(o),Promise.resolve(types.getAllMethodNames(this._requestHandler))):(t&&(typeof t.baseUrl!="undefined"&&delete t.baseUrl,typeof t.paths!="undefined"&&typeof t.paths.vs!="undefined"&&delete t.paths.vs,typeof t.trustedTypesPolicy!==void 0&&delete t.trustedTypesPolicy,t.catchError=!0,self.require.config(t)),new Promise((a,l)=>{self.require([n],u=>{if(this._requestHandler=u.create(o),!this._requestHandler){l(new Error("No RequestHandler!"));return}a(types.getAllMethodNames(this._requestHandler))},l)}))}}function wv(r){return new bv(r,null)}var wd;const Hf=(wd=window.trustedTypes)===null||wd===void 0?void 0:wd.createPolicy("defaultWorkerFactory",{createScriptURL:r=>r});function Cv(r,e){if(ie.MonacoEnvironment){if(typeof ie.MonacoEnvironment.getWorker=="function")return ie.MonacoEnvironment.getWorker(r,e);if(typeof ie.MonacoEnvironment.getWorkerUrl=="function"){const t=ie.MonacoEnvironment.getWorkerUrl(r,e);return new Worker(Hf?Hf.createScriptURL(t):t,{name:e})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function Sv(r){return typeof r.then=="function"}class Cd{constructor(e,t,n,i,s){this.id=t;const o=Cv("workerMain.js",n);Sv(o)?this.worker=o:this.worker=Promise.resolve(o),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){i(l.data)},a.onmessageerror=s,typeof a.addEventListener=="function"&&a.addEventListener("error",s)})}getId(){return this.id}postMessage(e,t){this.worker&&this.worker.then(n=>n.postMessage(e,t))}dispose(){this.worker&&this.worker.then(e=>e.terminate()),this.worker=null}}class ic{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){let i=++ic.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new Cd(e,i,this._label||"anonymous"+i,t,s=>{Wf(s),this._webWorkerFailedBeforeError=s,n(s)})}}ic.LAST_WORKER_ID=0;var Rs;(function(r){r[r.None=0]="None",r[r.Indent=1]="Indent",r[r.IndentOutdent=2]="IndentOutdent",r[r.Outdent=3]="Outdent"})(Rs||(Rs={}));class Lp{constructor(e){if(this._standardAutoClosingPairConditionalBrand=void 0,this.open=e.open,this.close=e.close,this._standardTokenMask=0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._standardTokenMask|=2;break;case"comment":this._standardTokenMask|=1;break;case"regex":this._standardTokenMask|=4;break}}isOK(e){return(this._standardTokenMask&e)==0}}class xp{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)xu(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),xu(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),xu(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),xu(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&xu(this.autoClosingPairsCloseSingleChar,t.close,t)}}function xu(r,e,t){r.has(e)?r.get(e).push(t):r.set(e,[t])}function Rc(r,e){let t=r.getCount(),n=r.findTokenIndexAtOffset(e),i=r.getLanguageId(n),s=n;for(;s+1<t&&r.getLanguageId(s+1)===i;)s++;let o=n;for(;o>0&&r.getLanguageId(o-1)===i;)o--;return new y_(r,i,o,s+1,r.getStartOffset(o),r.getEndOffset(s))}class y_{constructor(e,t,n,i,s,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=i,this.firstCharOffset=s,this._lastCharOffset=o}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function eu(r){return(r&7)!=0}class rc{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new Lp(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new Lp({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new Lp({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:rc.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}static shouldAutoClosePair(e,t,n){if(t.getTokenCount()===0)return!0;const i=t.findTokenIndexAtOffset(n-2),s=t.getStandardTokenType(i);return e.isOK(s)}getSurroundingPairs(){return this._surroundingPairs}}rc.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;let zf;function Ev(){return zf||(zf=new TextDecoder("UTF-16LE")),zf}let Dp;function b_(){return Dp||(Dp=new TextDecoder("UTF-16BE")),Dp}let Ip;function Lv(){return Ip||(Ip=$e()?Ev():b_()),Ip}const xv=typeof TextDecoder!="undefined";let _h,Wa;xv?(_h=r=>new Pc(r),Wa=w_):(_h=r=>new dr,Wa=Dv);function w_(r,e,t){const n=new Uint16Array(r.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?Dv(r,e,t):Ev().decode(n)}function Dv(r,e,t){let n=[],i=0;for(let s=0;s<t;s++){const o=od(r,e);e+=2,n[i++]=String.fromCharCode(o)}return n.join("")}class Pc{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return Lv().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||Zs(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}class dr{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}class xa{constructor(e,t,n,i,s,o){this._richEditBracketBrand=void 0,this.languageIdentifier=e,this.index=t,this.open=n,this.close=i,this.forwardRegex=s,this.reversedRegex=o,this._openSet=xa._toSet(this.open),this._closeSet=xa._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}function Da(r){const e=r.length;r=r.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const n=(o,a)=>{const[l,u]=o,[h,v]=a;return l===h||l===v||u===h||u===v},i=(o,a)=>{const l=Math.min(o,a),u=Math.max(o,a);for(let h=0;h<e;h++)t[h]===u&&(t[h]=l)};for(let o=0;o<e;o++){const a=r[o];for(let l=o+1;l<e;l++){const u=r[l];n(a,u)&&i(t[o],t[l])}}const s=[];for(let o=0;o<e;o++){let a=[],l=[];for(let u=0;u<e;u++)if(t[u]===o){const[h,v]=r[u];a.push(h),l.push(v)}a.length>0&&s.push({open:a,close:l})}return s}class js{constructor(e,t){this._richEditBracketsBrand=void 0;const n=Da(t);this.brackets=n.map((i,s)=>new xa(e,s,i.open,i.close,Ia(i.open,i.close,n,s),$s(i.open,i.close,n,s))),this.forwardRegex=C_(this.brackets),this.reversedRegex=oc(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const i of this.brackets){for(const s of i.open)this.textIsBracket[s]=i,this.textIsOpenBracket[s]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,s.length);for(const s of i.close)this.textIsBracket[s]=i,this.textIsOpenBracket[s]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,s.length)}}}function sc(r,e,t,n){for(let i=0,s=e.length;i<s;i++){if(i===t)continue;const o=e[i];for(const a of o.open)a.indexOf(r)>=0&&n.push(a);for(const a of o.close)a.indexOf(r)>=0&&n.push(a)}}function er(r,e){return r.length-e.length}function Uf(r){if(r.length<=1)return r;const e=[],t=new Set;for(const n of r)t.has(n)||(e.push(n),t.add(n));return e}function Ia(r,e,t,n){let i=[];i=i.concat(r),i=i.concat(e);for(let s=0,o=i.length;s<o;s++)sc(i[s],t,n,i);return i=Uf(i),i.sort(er),i.reverse(),jf(i)}function $s(r,e,t,n){let i=[];i=i.concat(r),i=i.concat(e);for(let s=0,o=i.length;s<o;s++)sc(i[s],t,n,i);return i=Uf(i),i.sort(er),i.reverse(),jf(i.map(Nl))}function C_(r){let e=[];for(const t of r){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=Uf(e),jf(e)}function oc(r){let e=[];for(const t of r){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=Uf(e),jf(e.map(Nl))}function Np(r){const e=/^[\w ]+$/.test(r);return r=$l(r),e?`\\b${r}\\b`:r}function jf(r){let e=`(${r.map(Np).join(")|(")})`;return zg(e,!0)}const Nl=function(){function r(n){if(xv){const i=new Uint16Array(n.length);let s=0;for(let o=n.length-1;o>=0;o--)i[s++]=n.charCodeAt(o);return Lv().decode(i)}else{let i=[],s=0;for(let o=n.length-1;o>=0;o--)i[s++]=n.charAt(o);return i.join("")}}let e=null,t=null;return function(i){return e!==i&&(e=i,t=r(e)),t}}();class Va{static _findPrevBracketInText(e,t,n,i){let s=n.match(e);if(!s)return null;let o=n.length-(s.index||0),a=s[0].length,l=i+o;return new Mt(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,i,s){const a=Nl(n).substring(n.length-s,n.length-i);return this._findPrevBracketInText(e,t,a,i)}static findNextBracketInText(e,t,n,i){let s=n.match(e);if(!s)return null;let o=s.index||0,a=s[0].length;if(a===0)return null;let l=i+o;return new Mt(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,i,s){const o=n.substring(i,s);return this.findNextBracketInText(e,t,o,i)}}class $f{constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const i=n.charAt(n.length-1);e.push(i)}return e=e.filter((t,n,i)=>i.indexOf(t)===n),e}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const i=t.findTokenIndexAtOffset(n-1);if(eu(t.getStandardTokenType(i)))return null;const s=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,n-1)+e,a=Va.findPrevBracketInRange(s,1,o,0,o.length);if(!a)return null;const l=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const h=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(h)?{matchOpenBracket:l}:null}}function rs(r){return r.global&&(r.lastIndex=0),!0}class Ps{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&rs(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&rs(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&rs(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&rs(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class aa{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=aa._createOpenBracketRegExp(t[0]),i=aa._createCloseBracketRegExp(t[1]);n&&i&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:i})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,i){if(e>=3)for(let s=0,o=this._regExpRules.length;s<o;s++){let a=this._regExpRules[s];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:i},{reg:a.previousLineText,text:t}].every(u=>u.reg?(u.reg.lastIndex=0,u.reg.test(u.text)):!0))return a.action}if(e>=2&&n.length>0&&i.length>0)for(let s=0,o=this._brackets.length;s<o;s++){let a=this._brackets[s];if(a.openRegExp.test(n)&&a.closeRegExp.test(i))return{indentAction:Rs.IndentOutdent}}if(e>=2&&n.length>0){for(let s=0,o=this._brackets.length;s<o;s++)if(this._brackets[s].openRegExp.test(n))return{indentAction:Rs.Indent}}return null}static _createOpenBracketRegExp(e){let t=$l(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",aa._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=$l(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,aa._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return En(t),null}}}class Kf{constructor(e,t){this._languageIdentifier=e,this._brackets=null,this._electricCharacter=null,this._conf=t,this._onEnterSupport=this._conf.brackets||this._conf.indentationRules||this._conf.onEnterRules?new aa(this._conf):null,this.comments=Kf._handleComments(this._conf),this.characterPair=new rc(this._conf),this.wordDefinition=this._conf.wordPattern||Ot,this.indentationRules=this._conf.indentationRules,this._conf.indentationRules?this.indentRulesSupport=new Ps(this._conf.indentationRules):this.indentRulesSupport=null,this.foldingRules=this._conf.folding||{}}get brackets(){return!this._brackets&&this._conf.brackets&&(this._brackets=new js(this._languageIdentifier,this._conf.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new $f(this.brackets)),this._electricCharacter}onEnter(e,t,n,i){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,i):null}static _handleComments(e){let t=e.comments;if(!t)return null;let n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){let[i,s]=t.blockComment;n.blockCommentStartToken=i,n.blockCommentEndToken=s}return n}}class Sd{constructor(e){this.languageIdentifier=e}}class ws{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class Fs{constructor(e){this.languageIdentifier=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new ws(e,t,++this._order);return this._entries.push(n),this._resolved=null,Qi(()=>{for(let i=0;i<this._entries.length;i++)if(this._entries[i]===n){this._entries.splice(i,1),this._resolved=null;break}})}getRichEditSupport(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new Kf(this.languageIdentifier,e))}return this._resolved}_resolve(){if(this._entries.length===0)return null;this._entries.sort(ws.cmp);const e={};for(const t of this._entries){const n=t.configuration;e.comments=n.comments||e.comments,e.brackets=n.brackets||e.brackets,e.wordPattern=n.wordPattern||e.wordPattern,e.indentationRules=n.indentationRules||e.indentationRules,e.onEnterRules=n.onEnterRules||e.onEnterRules,e.autoClosingPairs=n.autoClosingPairs||e.autoClosingPairs,e.surroundingPairs=n.surroundingPairs||e.surroundingPairs,e.autoCloseBefore=n.autoCloseBefore||e.autoCloseBefore,e.folding=n.folding||e.folding,e.__electricCharacterSupport=n.__electricCharacterSupport||e.__electricCharacterSupport}return e}}class Iv{constructor(){this._entries2=new Map,this._onDidChange=new $t,this.onDidChange=this._onDidChange.event}register(e,t,n=0){let i=this._entries2.get(e.id);i||(i=new Fs(e),this._entries2.set(e.id,i));const s=i.register(t,n);return this._onDidChange.fire(new Sd(e)),Qi(()=>{s.dispose(),this._onDidChange.fire(new Sd(e))})}_getRichEditSupport(e){const t=this._entries2.get(e);return t?t.getRichEditSupport():null}getIndentationRules(e){const t=this._getRichEditSupport(e);return t&&t.indentationRules||null}_getElectricCharacterSupport(e){let t=this._getRichEditSupport(e);return t&&t.electricCharacter||null}getElectricCharacters(e){let t=this._getElectricCharacterSupport(e);return t?t.getElectricCharacters():[]}onElectricCharacter(e,t,n){let i=Rc(t,n-1),s=this._getElectricCharacterSupport(i.languageId);return s?s.onElectricCharacter(e,i,n-i.firstCharOffset):null}getComments(e){let t=this._getRichEditSupport(e);return t&&t.comments||null}_getCharacterPairSupport(e){let t=this._getRichEditSupport(e);return t&&t.characterPair||null}getAutoClosingPairs(e){const t=this._getCharacterPairSupport(e);return new xp(t?t.getAutoClosingPairs():[])}getAutoCloseBeforeSet(e){let t=this._getCharacterPairSupport(e);return t?t.getAutoCloseBeforeSet():rc.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED}getSurroundingPairs(e){let t=this._getCharacterPairSupport(e);return t?t.getSurroundingPairs():[]}shouldAutoClosePair(e,t,n){const i=Rc(t,n-1);return rc.shouldAutoClosePair(e,i,n-i.firstCharOffset)}getWordDefinition(e){let t=this._getRichEditSupport(e);return kt(t&&t.wordDefinition||null)}getFoldingRules(e){let t=this._getRichEditSupport(e);return t?t.foldingRules:{}}getIndentRulesSupport(e){let t=this._getRichEditSupport(e);return t&&t.indentRulesSupport||null}getPrecedingValidLine(e,t,n){let i=e.getLanguageIdAtPosition(t,0);if(t>1){let s,o=-1;for(s=t-1;s>=1;s--){if(e.getLanguageIdAtPosition(s,0)!==i)return o;let a=e.getLineContent(s);if(n.shouldIgnore(a)||/^\s+$/.test(a)||a===""){o=s;continue}return s}}return-1}getInheritIndentForLine(e,t,n,i=!0){if(e<4)return null;const s=this.getIndentRulesSupport(t.getLanguageIdentifier().id);if(!s)return null;if(n<=1)return{indentation:"",action:null};const o=this.getPrecedingValidLine(t,n,s);if(o<0)return null;if(o<1)return{indentation:"",action:null};const a=t.getLineContent(o);if(s.shouldIncrease(a)||s.shouldIndentNextLine(a))return{indentation:Oo(a),action:Rs.Indent,line:o};if(s.shouldDecrease(a))return{indentation:Oo(a),action:null,line:o};{if(o===1)return{indentation:Oo(t.getLineContent(o)),action:null,line:o};const l=o-1,u=s.getIndentMetadata(t.getLineContent(l));if(!(u&(1|2))&&u&4){let h=0;for(let v=l-1;v>0;v--)if(!s.shouldIndentNextLine(t.getLineContent(v))){h=v;break}return{indentation:Oo(t.getLineContent(h+1)),action:null,line:h+1}}if(i)return{indentation:Oo(t.getLineContent(o)),action:null,line:o};for(let h=o;h>0;h--){const v=t.getLineContent(h);if(s.shouldIncrease(v))return{indentation:Oo(v),action:Rs.Indent,line:h};if(s.shouldIndentNextLine(v)){let N=0;for(let P=h-1;P>0;P--)if(!s.shouldIndentNextLine(t.getLineContent(h))){N=P;break}return{indentation:Oo(t.getLineContent(N+1)),action:null,line:N+1}}else if(s.shouldDecrease(v))return{indentation:Oo(v),action:null,line:h}}return{indentation:Oo(t.getLineContent(1)),action:null,line:1}}}getGoodIndentForLine(e,t,n,i,s){if(e<4)return null;const o=this._getRichEditSupport(n);if(!o)return null;const a=this.getIndentRulesSupport(n);if(!a)return null;const l=this.getInheritIndentForLine(e,t,i),u=t.getLineContent(i);if(l){const h=l.line;if(h!==void 0){const v=o.onEnter(e,"",t.getLineContent(h),"");if(v){let N=Oo(t.getLineContent(h));return v.removeText&&(N=N.substring(0,N.length-v.removeText)),v.indentAction===Rs.Indent||v.indentAction===Rs.IndentOutdent?N=s.shiftIndent(N):v.indentAction===Rs.Outdent&&(N=s.unshiftIndent(N)),a.shouldDecrease(u)&&(N=s.unshiftIndent(N)),v.appendText&&(N+=v.appendText),Oo(N)}}return a.shouldDecrease(u)?l.action===Rs.Indent?l.indentation:s.unshiftIndent(l.indentation):l.action===Rs.Indent?s.shiftIndent(l.indentation):l.indentation}return null}getIndentForEnter(e,t,n,i){if(e<4)return null;t.forceTokenization(n.startLineNumber);const s=t.getLineTokens(n.startLineNumber),o=Rc(s,n.startColumn-1),a=o.getLineContent();let l=!1,u;o.firstCharOffset>0&&s.getLanguageId(0)!==o.languageId?(l=!0,u=a.substr(0,n.startColumn-1-o.firstCharOffset)):u=s.getLineContent().substring(0,n.startColumn-1);let h;n.isEmpty()?h=a.substr(n.startColumn-1-o.firstCharOffset):h=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-o.firstCharOffset);const v=this.getIndentRulesSupport(o.languageId);if(!v)return null;const N=u,P=Oo(u),K={getLineTokens:ce=>t.getLineTokens(ce),getLanguageIdentifier:()=>t.getLanguageIdentifier(),getLanguageIdAtPosition:(ce,Ee)=>t.getLanguageIdAtPosition(ce,Ee),getLineContent:ce=>ce===n.startLineNumber?N:t.getLineContent(ce)},ee=Oo(s.getLineContent()),Se=this.getInheritIndentForLine(e,K,n.startLineNumber+1);if(!Se){const ce=l?ee:P;return{beforeEnter:ce,afterEnter:ce}}let Le=l?ee:Se.indentation;return Se.action===Rs.Indent&&(Le=i.shiftIndent(Le)),v.shouldDecrease(h)&&(Le=i.unshiftIndent(Le)),{beforeEnter:l?ee:P,afterEnter:Le}}getIndentActionForType(e,t,n,i,s){if(e<4)return null;const o=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn);if(o.firstCharOffset)return null;const a=this.getIndentRulesSupport(o.languageId);if(!a)return null;const l=o.getLineContent(),u=l.substr(0,n.startColumn-1-o.firstCharOffset);let h;if(n.isEmpty()?h=l.substr(n.startColumn-1-o.firstCharOffset):h=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-o.firstCharOffset),!a.shouldDecrease(u+h)&&a.shouldDecrease(u+i+h)){const v=this.getInheritIndentForLine(e,t,n.startLineNumber,!1);if(!v)return null;let N=v.indentation;return v.action!==Rs.Indent&&(N=s.unshiftIndent(N)),N}return null}getIndentMetadata(e,t){const n=this.getIndentRulesSupport(e.getLanguageIdentifier().id);return!n||t<1||t>e.getLineCount()?null:n.getIndentMetadata(e.getLineContent(t))}getEnterAction(e,t,n){const i=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn),s=this._getRichEditSupport(i.languageId);if(!s)return null;const o=i.getLineContent(),a=o.substr(0,n.startColumn-1-i.firstCharOffset);let l;n.isEmpty()?l=o.substr(n.startColumn-1-i.firstCharOffset):l=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-i.firstCharOffset);let u="";if(n.startLineNumber>1&&i.firstCharOffset===0){const ee=this.getScopedLineTokens(t,n.startLineNumber-1);ee.languageId===i.languageId&&(u=ee.getLineContent())}const h=s.onEnter(e,u,a,l);if(!h)return null;const v=h.indentAction;let N=h.appendText;const P=h.removeText||0;N?v===Rs.Indent&&(N="	"+N):v===Rs.Indent||v===Rs.IndentOutdent?N="	":N="";let K=this.getIndentationAtPosition(t,n.startLineNumber,n.startColumn);return P&&(K=K.substring(0,K.length-P)),{indentAction:v,appendText:N,removeText:P,indentation:K}}getIndentationAtPosition(e,t,n){const i=e.getLineContent(t);let s=Oo(i);return s.length>n-1&&(s=s.substring(0,n-1)),s}getScopedLineTokens(e,t,n){e.forceTokenization(t);const i=e.getLineTokens(t),s=typeof n=="undefined"?e.getLineMaxColumn(t)-1:n-1;return Rc(i,s)}getBracketsSupport(e){const t=this._getRichEditSupport(e);return t&&t.brackets||null}}const $r=new Iv;class Du{constructor(e,t,n,i){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class yh{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,i=e.length;n<i;n++)t[n]=e.charCodeAt(n);return t}}function Tp(r,e,t){return new gs(new yh(r),new yh(e)).ComputeDiff(t).changes}class bh{static Assert(e,t){if(!e)throw new Error(t)}}class Fc{static Copy(e,t,n,i,s){for(let o=0;o<s;o++)n[i+o]=e[t+o]}static Copy2(e,t,n,i,s){for(let o=0;o<s;o++)n[i+o]=e[t+o]}}class wh{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Du(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class gs{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[i,s,o]=gs._getElements(e),[a,l,u]=gs._getElements(t);this._hasStrings=o&&u,this._originalStringElements=i,this._originalElementsOrHash=s,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(gs._isStringArray(t)){const n=new Int32Array(t.length);for(let i=0,s=t.length;i<s;i++)n[i]=ip(t[i],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=gs._getStrictElement(this._originalSequence,e),i=gs._getStrictElement(this._modifiedSequence,t);return n===i}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,i,s){const o=[!1];let a=this.ComputeDiffRecursive(e,t,n,i,o);return s&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,n,i,s){for(s[0]=!1;e<=t&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&i>=n&&this.ElementsAreEqual(t,i);)t--,i--;if(e>t||n>i){let v;return n<=i?(bh.Assert(e===t+1,"originalStart should only be one more than originalEnd"),v=[new Du(e,0,n,i-n+1)]):e<=t?(bh.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),v=[new Du(e,t-e+1,n,0)]):(bh.Assert(e===t+1,"originalStart should only be one more than originalEnd"),bh.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),v=[]),v}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,i,o,a,s),u=o[0],h=a[0];if(l!==null)return l;if(!s[0]){const v=this.ComputeDiffRecursive(e,u,n,h,s);let N=[];return s[0]?N=[new Du(u+1,t-(u+1)+1,h+1,i-(h+1)+1)]:N=this.ComputeDiffRecursive(u+1,t,h+1,i,s),this.ConcatenateChanges(v,N)}return[new Du(e,t-e+1,n,i-n+1)]}WALKTRACE(e,t,n,i,s,o,a,l,u,h,v,N,P,K,ee,Se,Le,ce){let Ee=null,ze=null,Qe=new wh,at=t,Ze=n,rt=P[0]-Se[0]-i,St=-1073741824,un=this.m_forwardHistory.length-1;do{const Kt=rt+e;Kt===at||Kt<Ze&&u[Kt-1]<u[Kt+1]?(v=u[Kt+1],K=v-rt-i,v<St&&Qe.MarkNextChange(),St=v,Qe.AddModifiedElement(v+1,K),rt=Kt+1-e):(v=u[Kt-1]+1,K=v-rt-i,v<St&&Qe.MarkNextChange(),St=v-1,Qe.AddOriginalElement(v,K+1),rt=Kt-1-e),un>=0&&(u=this.m_forwardHistory[un],e=u[0],at=1,Ze=u.length-1)}while(--un>=-1);if(Ee=Qe.getReverseChanges(),ce[0]){let Kt=P[0]+1,An=Se[0]+1;if(Ee!==null&&Ee.length>0){const Wn=Ee[Ee.length-1];Kt=Math.max(Kt,Wn.getOriginalEnd()),An=Math.max(An,Wn.getModifiedEnd())}ze=[new Du(Kt,N-Kt+1,An,ee-An+1)]}else{Qe=new wh,at=o,Ze=a,rt=P[0]-Se[0]-l,St=1073741824,un=Le?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const Kt=rt+s;Kt===at||Kt<Ze&&h[Kt-1]>=h[Kt+1]?(v=h[Kt+1]-1,K=v-rt-l,v>St&&Qe.MarkNextChange(),St=v+1,Qe.AddOriginalElement(v+1,K+1),rt=Kt+1-s):(v=h[Kt-1],K=v-rt-l,v>St&&Qe.MarkNextChange(),St=v,Qe.AddModifiedElement(v+1,K+1),rt=Kt-1-s),un>=0&&(h=this.m_reverseHistory[un],s=h[0],at=1,Ze=h.length-1)}while(--un>=-1);ze=Qe.getChanges()}return this.ConcatenateChanges(Ee,ze)}ComputeRecursionPoint(e,t,n,i,s,o,a){let l=0,u=0,h=0,v=0,N=0,P=0;e--,n--,s[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const K=t-e+(i-n),ee=K+1,Se=new Int32Array(ee),Le=new Int32Array(ee),ce=i-n,Ee=t-e,ze=e-n,Qe=t-i,Ze=(Ee-ce)%2==0;Se[ce]=e,Le[Ee]=t,a[0]=!1;for(let rt=1;rt<=K/2+1;rt++){let St=0,un=0;h=this.ClipDiagonalBound(ce-rt,rt,ce,ee),v=this.ClipDiagonalBound(ce+rt,rt,ce,ee);for(let An=h;An<=v;An+=2){An===h||An<v&&Se[An-1]<Se[An+1]?l=Se[An+1]:l=Se[An-1]+1,u=l-(An-ce)-ze;const Wn=l;for(;l<t&&u<i&&this.ElementsAreEqual(l+1,u+1);)l++,u++;if(Se[An]=l,l+u>St+un&&(St=l,un=u),!Ze&&Math.abs(An-Ee)<=rt-1&&l>=Le[An])return s[0]=l,o[0]=u,Wn<=Le[An]&&1447>0&&rt<=1447+1?this.WALKTRACE(ce,h,v,ze,Ee,N,P,Qe,Se,Le,l,t,s,u,i,o,Ze,a):null}const Kt=(St-e+(un-n)-rt)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(St,Kt))return a[0]=!0,s[0]=St,o[0]=un,Kt>0&&1447>0&&rt<=1447+1?this.WALKTRACE(ce,h,v,ze,Ee,N,P,Qe,Se,Le,l,t,s,u,i,o,Ze,a):(e++,n++,[new Du(e,t-e+1,n,i-n+1)]);N=this.ClipDiagonalBound(Ee-rt,rt,Ee,ee),P=this.ClipDiagonalBound(Ee+rt,rt,Ee,ee);for(let An=N;An<=P;An+=2){An===N||An<P&&Le[An-1]>=Le[An+1]?l=Le[An+1]-1:l=Le[An-1],u=l-(An-Ee)-Qe;const Wn=l;for(;l>e&&u>n&&this.ElementsAreEqual(l,u);)l--,u--;if(Le[An]=l,Ze&&Math.abs(An-ce)<=rt&&l<=Se[An])return s[0]=l,o[0]=u,Wn>=Se[An]&&1447>0&&rt<=1447+1?this.WALKTRACE(ce,h,v,ze,Ee,N,P,Qe,Se,Le,l,t,s,u,i,o,Ze,a):null}if(rt<=1447){let An=new Int32Array(v-h+2);An[0]=ce-h+1,Fc.Copy2(Se,h,An,1,v-h+1),this.m_forwardHistory.push(An),An=new Int32Array(P-N+2),An[0]=Ee-N+1,Fc.Copy2(Le,N,An,1,P-N+1),this.m_reverseHistory.push(An)}}return this.WALKTRACE(ce,h,v,ze,Ee,N,P,Qe,Se,Le,l,t,s,u,i,o,Ze,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],i=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,s=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<i&&n.modifiedStart+n.modifiedLength<s&&(!o||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const u=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!u)break;n.originalStart++,n.modifiedStart++}let l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let i=0,s=0;if(t>0){const v=e[t-1];i=v.originalStart+v.originalLength,s=v.modifiedStart+v.modifiedLength}const o=n.originalLength>0,a=n.modifiedLength>0;let l=0,u=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let v=1;;v++){const N=n.originalStart-v,P=n.modifiedStart-v;if(N<i||P<s||o&&!this.OriginalElementsAreEqual(N,N+n.originalLength)||a&&!this.ModifiedElementsAreEqual(P,P+n.modifiedLength))break;const ee=(N===i&&P===s?5:0)+this._boundaryScore(N,n.originalLength,P,n.modifiedLength);ee>u&&(u=ee,l=v)}n.originalStart-=l,n.modifiedStart-=l;const h=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],h)){e[t-1]=h[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const i=e[t-1],s=e[t],o=s.originalStart-i.originalStart-i.originalLength,a=i.originalStart,l=s.originalStart+s.originalLength,u=l-a,h=i.modifiedStart,v=s.modifiedStart+s.modifiedLength,N=v-h;if(o<5&&u<20&&N<20){const P=this._findBetterContiguousSequence(a,u,h,N,o);if(P){const[K,ee]=P;(K!==i.originalStart+i.originalLength||ee!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=K-i.originalStart,i.modifiedLength=ee-i.modifiedStart,s.originalStart=K+o,s.modifiedStart=ee+o,s.originalLength=l-s.originalStart,s.modifiedLength=v-s.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,i,s){if(t<s||i<s)return null;const o=e+t-s+1,a=n+i-s+1;let l=0,u=0,h=0;for(let v=e;v<o;v++)for(let N=n;N<a;N++){const P=this._contiguousSequenceScore(v,N,s);P>0&&P>l&&(l=P,u=v,h=N)}return l>0?[u,h]:null}_contiguousSequenceScore(e,t,n){let i=0;for(let s=0;s<n;s++){if(!this.ElementsAreEqual(e+s,t+s))return 0;i+=this._originalStringElements[e+s].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,i){const s=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(n,i)?1:0;return s+o}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const i=new Array(e.length+t.length-1);return Fc.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],Fc.Copy(t,1,i,e.length,t.length-1),i}else{const i=new Array(e.length+t.length);return Fc.Copy(e,0,i,0,e.length),Fc.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,n){if(bh.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),bh.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const i=e.originalStart;let s=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new Du(i,s,o,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,i){if(e>=0&&e<i)return e;const s=n,o=i-n-1,a=t%2==0;if(e<0){const l=s%2==0;return a===l?0:1}else{const l=o%2==0;return a===l?i-1:i-2}}}const ac=3;function Nv(r,e,t,n){return new gs(r,e,t).ComputeDiff(n)}class Mp{constructor(e){const t=[],n=[];for(let i=0,s=e.length;i<s;i++)t[i]=fr(e[i],1),n[i]=Yf(e[i],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const i=[],s=[],o=[];let a=0;for(let l=t;l<=n;l++){const u=this.lines[l],h=e?this._startColumns[l]:1,v=e?this._endColumns[l]:u.length+1;for(let N=h;N<v;N++)i[a]=u.charCodeAt(N-1),s[a]=l+1,o[a]=N,a++}return new Gf(i,s,o)}}class Gf{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}getElements(){return this._charCodes}getStartLineNumber(e){return this._lineNumbers[e]}getStartColumn(e){return this._columns[e]}getEndLineNumber(e){return this._lineNumbers[e]}getEndColumn(e){return this._columns[e]+1}}class Ro{constructor(e,t,n,i,s,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=i,this.modifiedStartLineNumber=s,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){let i,s,o,a,l,u,h,v;return e.originalLength===0?(i=0,s=0,o=0,a=0):(i=t.getStartLineNumber(e.originalStart),s=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1)),e.modifiedLength===0?(l=0,u=0,h=0,v=0):(l=n.getStartLineNumber(e.modifiedStart),u=n.getStartColumn(e.modifiedStart),h=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),v=n.getEndColumn(e.modifiedStart+e.modifiedLength-1)),new Ro(i,s,o,a,l,u,h,v)}}function Ch(r){if(r.length<=1)return r;const e=[r[0]];let t=e[0];for(let n=1,i=r.length;n<i;n++){const s=r[n],o=s.originalStart-(t.originalStart+t.originalLength),a=s.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<ac?(t.originalLength=s.originalStart+s.originalLength-t.originalStart,t.modifiedLength=s.modifiedStart+s.modifiedLength-t.modifiedStart):(e.push(s),t=s)}return e}class Sh{constructor(e,t,n,i,s){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=i,this.charChanges=s}static createFromDiffResult(e,t,n,i,s,o,a){let l,u,h,v,N;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,u=0):(l=n.getStartLineNumber(t.originalStart),u=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(h=i.getStartLineNumber(t.modifiedStart)-1,v=0):(h=i.getStartLineNumber(t.modifiedStart),v=i.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&s()){const P=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),K=i.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);let ee=Nv(P,K,s,!0).changes;a&&(ee=Ch(ee)),N=[];for(let Se=0,Le=ee.length;Se<Le;Se++)N.push(Ro.createFromDiffChange(ee[Se],P,K))}return new Sh(l,u,h,v,N)}}class Iu{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new Mp(e),this.modified=new Mp(t),this.continueLineDiff=Ha(n.maxComputationTime),this.continueCharDiff=Ha(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=Nv(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,u=t.length;l<u;l++)a.push(Sh.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const i=[];let s=0,o=0;for(let a=-1,l=t.length;a<l;a++){const u=a+1<l?t[a+1]:null,h=u?u.originalStart:this.originalLines.length,v=u?u.modifiedStart:this.modifiedLines.length;for(;s<h&&o<v;){const N=this.originalLines[s],P=this.modifiedLines[o];if(N!==P){{let K=fr(N,1),ee=fr(P,1);for(;K>1&&ee>1;){const Se=N.charCodeAt(K-2),Le=P.charCodeAt(ee-2);if(Se!==Le)break;K--,ee--}(K>1||ee>1)&&this._pushTrimWhitespaceCharChange(i,s+1,1,K,o+1,1,ee)}{let K=Yf(N,1),ee=Yf(P,1);const Se=N.length+1,Le=P.length+1;for(;K<Se&&ee<Le;){const ce=N.charCodeAt(K-1),Ee=N.charCodeAt(ee-1);if(ce!==Ee)break;K++,ee++}(K<Se||ee<Le)&&this._pushTrimWhitespaceCharChange(i,s+1,K,Se,o+1,ee,Le)}}s++,o++}u&&(i.push(Sh.createFromDiffResult(this.shouldIgnoreTrimWhitespace,u,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=u.originalLength,o+=u.modifiedLength)}return{quitEarly:n,changes:i}}_pushTrimWhitespaceCharChange(e,t,n,i,s,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,i,s,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new Ro(t,n,t,i,s,o,s,a)]),e.push(new Sh(t,t,s,s,l))}_mergeTrimWhitespaceCharChange(e,t,n,i,s,o,a){const l=e.length;if(l===0)return!1;const u=e[l-1];return u.originalEndLineNumber===0||u.modifiedEndLineNumber===0?!1:u.originalEndLineNumber+1===t&&u.modifiedEndLineNumber+1===s?(u.originalEndLineNumber=t,u.modifiedEndLineNumber=s,this.shouldComputeCharChanges&&u.charChanges&&u.charChanges.push(new Ro(t,n,t,i,s,o,s,a)),!0):!1}}function fr(r,e){const t=ka(r);return t===-1?e:t+1}function Yf(r,e){const t=_u(r);return t===-1?e:t+2}function Ha(r){if(r===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<r}function Eh(r){return r<0?0:r>255?255:r|0}function Na(r){return r<0?0:r>4294967295?4294967295:r|0}class Li{constructor(e,t){this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class Tv{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=Na(e);const n=this.values,i=this.prefixSum,s=t.length;return s===0?!1:(this.values=new Uint32Array(n.length+s),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+s),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}changeValue(e,t){return e=Na(e),t=Na(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=Na(e),t=Na(t);const n=this.values,i=this.prefixSum;if(e>=n.length)return!1;let s=n.length-e;return t>=s&&(t=s),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=Na(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,i=0,s=0,o=0;for(;t<=n;)if(i=t+(n-t)/2|0,s=this.prefixSum[i],o=s-this.values[i],e<o)n=i-1;else if(e>=s)t=i+1;else break;return new Li(i,e-o)}}class za{constructor(e,t,n,i){this._uri=e,this._lines=t,this._eol=n,this._versionId=i,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new dn(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let i=0;i<t;i++)n[i]=this._lines[i].length+e;this._lineStarts=new Tv(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.changeValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;let n=Ku(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);let i=new Uint32Array(n.length-1);for(let s=1;s<n.length;s++)this._lines.splice(e.lineNumber+s-1,0,n[s]),i[s-1]=n[s].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,i)}}class tu{constructor(e){let t=Eh(e);this._defaultValue=t,this._asciiMap=tu._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);for(let n=0;n<256;n++)t[n]=e;return t}set(e,t){let n=Eh(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}class cb{constructor(){this._actual=new tu(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}}class qr{constructor(e,t,n){const i=new Uint8Array(e*t);for(let s=0,o=e*t;s<o;s++)i[s]=n;this._data=i,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}class S_{constructor(e){let t=0,n=0;for(let s=0,o=e.length;s<o;s++){let[a,l,u]=e[s];l>t&&(t=l),a>n&&(n=a),u>n&&(n=u)}t++,n++;let i=new qr(n,t,0);for(let s=0,o=e.length;s<o;s++){let[a,l,u]=e[s];i.set(a,l,u)}this._states=i,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let Zf=null;function Xf(){return Zf===null&&(Zf=new S_([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),Zf}let Ed=null;function E_(){if(Ed===null){Ed=new tu(0);const r=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let t=0;t<r.length;t++)Ed.set(r.charCodeAt(t),1);const e=".,;";for(let t=0;t<e.length;t++)Ed.set(e.charCodeAt(t),2)}return Ed}class qf{static _createLink(e,t,n,i,s){let o=s-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>i);if(i>0){const a=t.charCodeAt(i-1),l=t.charCodeAt(o);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&o--}return{range:{startLineNumber:n,startColumn:i+1,endLineNumber:n,endColumn:o+2},url:t.substring(i,o+1)}}static computeLinks(e,t=Xf()){const n=E_();let i=[];for(let s=1,o=e.getLineCount();s<=o;s++){const a=e.getLineContent(s),l=a.length;let u=0,h=0,v=0,N=1,P=!1,K=!1,ee=!1,Se=!1;for(;u<l;){let Le=!1;const ce=a.charCodeAt(u);if(N===13){let Ee;switch(ce){case 40:P=!0,Ee=0;break;case 41:Ee=P?0:1;break;case 91:ee=!0,K=!0,Ee=0;break;case 93:ee=!1,Ee=K?0:1;break;case 123:Se=!0,Ee=0;break;case 125:Ee=Se?0:1;break;case 39:Ee=v===34||v===96?0:1;break;case 34:Ee=v===39||v===96?0:1;break;case 96:Ee=v===39||v===34?0:1;break;case 42:Ee=v===42?1:0;break;case 124:Ee=v===124?1:0;break;case 32:Ee=ee?0:1;break;default:Ee=n.get(ce)}Ee===1&&(i.push(qf._createLink(n,a,s,h,u)),Le=!0)}else if(N===12){let Ee;ce===91?(K=!0,Ee=0):Ee=n.get(ce),Ee===1?Le=!0:N=13}else N=t.nextState(N,ce),N===0&&(Le=!0);Le&&(N=1,P=!1,K=!1,Se=!1,h=u+1,v=ce),u++}N===13&&i.push(qf._createLink(n,a,s,h,l))}return i}}function L_(r){return!r||typeof r.getLineCount!="function"||typeof r.getLineContent!="function"?[]:qf.computeLinks(r)}class Op{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,i,s){if(e&&t){let o=this.doNavigateValueSet(t,s);if(o)return{range:e,value:o}}if(n&&i){let o=this.doNavigateValueSet(i,s);if(o)return{range:n,value:o}}return null}doNavigateValueSet(e,t){let n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){let n=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),i=Number(e),s=parseFloat(e);return!isNaN(i)&&!isNaN(s)&&i===s?i===0&&!t?null:(i=Math.floor(i*n),i+=t?n:-n,String(i/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let i=null;for(let s=0,o=e.length;i===null&&s<o;s++)i=this.valueSetReplace(e[s],t,n);return i}valueSetReplace(e,t,n){let i=e.indexOf(t);return i>=0?(i+=n?1:-1,i<0?i=e.length-1:i%=e.length,e[i]):null}}Op.INSTANCE=new Op;var Lh=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class x_ extends za{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){let n=Jt(e.column,kt(t),this._lines[e.lineNumber-1],0);return n?new Mt(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let i=0,s="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=s.substring(a[o].start,a[o].end);o+=1,yield l}else if(i<t.length)s=t[i],a=n(s,e),o=0,i+=1;else break}}}getLineWords(e,t){let n=this._lines[e-1],i=this._wordenize(n,t),s=[];for(const o of i)s.push({word:n.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return s}_wordenize(e,t){const n=[];let i;for(t.lastIndex=0;(i=t.exec(e))&&i[0].length!==0;)n.push({start:i.index,end:i.index+i[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);let t=this._eol,n=e.startLineNumber-1,i=e.endLineNumber-1,s=[];s.push(this._lines[n].substring(e.startColumn-1));for(let o=n+1;o<i;o++)s.push(this._lines[o]);return s.push(this._lines[i].substring(0,e.endColumn-1)),s.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!dn.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,i=!1;if(t<1)t=1,n=1,i=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,i=!0;else{let s=this._lines[t-1].length+1;n<1?(n=1,i=!0):n>s&&(n=s,i=!0)}return i?{lineNumber:t,column:n}:e}}class lc{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){let e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new x_(ci.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){!this._models[e]||delete this._models[e]}computeDiff(e,t,n,i){return Lh(this,void 0,void 0,function*(){const s=this._getModel(e),o=this._getModel(t);if(!s||!o)return null;const a=s.getLinesContent(),l=o.getLinesContent(),h=new Iu(a,l,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:n,shouldMakePrettyDiff:!0,maxComputationTime:i}).computeDiff(),v=h.changes.length>0?!1:this._modelsAreIdentical(s,o);return{quitEarly:h.quitEarly,identical:v,changes:h.changes}})}_modelsAreIdentical(e,t){const n=e.getLineCount(),i=t.getLineCount();if(n!==i)return!1;for(let s=1;s<=n;s++){const o=e.getLineContent(s),a=t.getLineContent(s);if(o!==a)return!1}return!0}computeMoreMinimalEdits(e,t){return Lh(this,void 0,void 0,function*(){const n=this._getModel(e);if(!n)return t;const i=[];let s;t=t.slice(0).sort((o,a)=>{if(o.range&&a.range)return Mt.compareRangesUsingStarts(o.range,a.range);let l=o.range?0:1,u=a.range?0:1;return l-u});for(let{range:o,text:a,eol:l}of t){if(typeof l=="number"&&(s=l),Mt.isEmpty(o)&&!a)continue;const u=n.getValueInRange(o);if(a=a.replace(/\r\n|\n|\r/g,n.eol),u===a)continue;if(Math.max(a.length,u.length)>lc._diffLimit){i.push({range:o,text:a});continue}const h=Tp(u,a,!1),v=n.offsetAt(Mt.lift(o).getStartPosition());for(const N of h){const P=n.positionAt(v+N.originalStart),K=n.positionAt(v+N.originalStart+N.originalLength),ee={text:a.substr(N.modifiedStart,N.modifiedLength),range:{startLineNumber:P.lineNumber,startColumn:P.column,endLineNumber:K.lineNumber,endColumn:K.column}};n.getValueInRange(ee.range)!==ee.text&&i.push(ee)}}return typeof s=="number"&&i.push({eol:s,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),i})}computeLinks(e){return Lh(this,void 0,void 0,function*(){let t=this._getModel(e);return t?L_(t):null})}textualSuggest(e,t,n,i){return Lh(this,void 0,void 0,function*(){const s=new Wr(!0),o=new RegExp(n,i),a=new Set;e:for(let l of e){const u=this._getModel(l);if(!!u){for(let h of u.words(o))if(!(h===t||!isNaN(Number(h)))&&(a.add(h),a.size>lc._suggestionsLimit))break e}}return{words:Array.from(a),duration:s.elapsed()}})}computeWordRanges(e,t,n,i){return Lh(this,void 0,void 0,function*(){let s=this._getModel(e);if(!s)return Object.create(null);const o=new RegExp(n,i),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){let u=s.getLineWords(l,o);for(const h of u){if(!isNaN(Number(h.word)))continue;let v=a[h.word];v||(v=[],a[h.word]=v),v.push({startLineNumber:l,startColumn:h.startColumn,endLineNumber:l,endColumn:h.endColumn})}}return a})}navigateValueSet(e,t,n,i,s){return Lh(this,void 0,void 0,function*(){let o=this._getModel(e);if(!o)return null;let a=new RegExp(i,s);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});let l=o.getValueInRange(t),u=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!u)return null;let h=o.getValueInRange(u);return Op.INSTANCE.navigateValueSet(t,l,u,h,n)})}loadForeignModule(e,t,n){let o={host:Ll(n,(a,l)=>this._host.fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(Oc(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}lc._diffLimit=1e5,lc._suggestionsLimit=1e4;function Mv(r){return new lc(r,null)}typeof importScripts=="function"&&(ie.monaco=bt());const Ov=Te("textResourceConfigurationService"),Qf=Te("textResourcePropertiesService");function Ua(r,e=0){return r[r.length-(1+e)]}function D_(r){if(r.length===0)throw new Error("Invalid tail call");return[r.slice(0,r.length-1),r[r.length-1]]}function Tl(r,e,t=(n,i)=>n===i){if(r===e)return!0;if(!r||!e||r.length!==e.length)return!1;for(let n=0,i=r.length;n<i;n++)if(!t(r[n],e[n]))return!1;return!0}function _o(r,e,t){let n=0,i=r.length-1;for(;n<=i;){const s=(n+i)/2|0,o=t(r[s],e);if(o<0)n=s+1;else if(o>0)i=s-1;else return s}return-(n+1)}function la(r,e){let t=0,n=r.length;if(n===0)return 0;for(;t<n;){const i=Math.floor((t+n)/2);e(r[i])?n=i:t=i+1}return t}function kv(r,e,t){if(r=r|0,r>=e.length)throw new TypeError("invalid index");let n=e[Math.floor(e.length*Math.random())],i=[],s=[],o=[];for(let a of e){const l=t(a,n);l<0?i.push(a):l>0?s.push(a):o.push(a)}return r<i.length?kv(r,i,t):r<i.length+o.length?o[0]:kv(r-(i.length+o.length),s,t)}function hb(r,e){const t=[];let n;for(const i of r.slice(0).sort(e))!n||e(n[0],i)!==0?(n=[i],t.push(n)):n.push(i);return t}function I_(r){return r.filter(e=>!!e)}function so(r){return!Array.isArray(r)||r.length===0}function Go(r){return Array.isArray(r)&&r.length>0}function Av(r,e){if(!e)return r.filter((n,i)=>r.indexOf(n)===i);const t=Object.create(null);return r.filter(n=>{const i=e(n);return t[i]?!1:(t[i]=!0,!0)})}function Rv(r){const e=new Set;return r.filter(t=>e.has(t)?!1:(e.add(t),!0))}function Jf(r,e){return r.length>0?r[0]:e}function N_(r){return[].concat(...r)}function Po(r,e){let t=typeof e=="number"?r:0;typeof e=="number"?t=r:(t=0,e=r);const n=[];if(t<=e)for(let i=t;i<e;i++)n.push(i);else for(let i=t;i>e;i--)n.push(i);return n}function Ld(r,e,t){const n=r.slice(0,e),i=r.slice(e);return n.concat(t,i)}function eg(r,e){const t=r.indexOf(e);t>-1&&(r.splice(t,1),r.unshift(e))}function xh(r,e){const t=r.indexOf(e);t>-1&&(r.splice(t,1),r.push(e))}function db(r){return Array.isArray(r)?r:[r]}class Pv{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}}const xd=Te("logService");var ol;(function(r){r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.Off=6]="Off"})(ol||(ol={}));const uc=ol.Info;class T_ extends Rn{constructor(){super(...arguments);this.level=uc,this._onDidChangeLogLevel=this._register(new $t)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class M_ extends T_{constructor(e=uc){super();this.setLevel(e)}trace(e,...t){this.getLevel()<=ol.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=ol.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=ol.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=ol.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}}class O_ extends Rn{constructor(e){super();this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}}var k_=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},cc=function(r,e){return function(t,n){e(t,n,r)}},kp=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Ap=60*1e3,Fv=5*60*1e3;function hc(r,e){let t=r.getModel(e);return!(!t||t.isTooLargeForSyncing())}let Rp=class extends Rn{constructor(e,t,n){super();this._modelService=e,this._workerManager=this._register(new Wv(this._modelService)),this._logService=n,this._register(pv.register("*",{provideLinks:(i,s)=>hc(this._modelService,i.uri)?this._workerManager.withWorker().then(o=>o.computeLinks(i.uri)).then(o=>o&&{links:o}):Promise.resolve({links:[]})})),this._register(Pf.register("*",new Bv(this._workerManager,t,this._modelService)))}dispose(){super.dispose()}canComputeDiff(e,t){return hc(this._modelService,e)&&hc(this._modelService,t)}computeDiff(e,t,n,i){return this._workerManager.withWorker().then(s=>s.computeDiff(e,t,n,i))}computeMoreMinimalEdits(e,t){if(Go(t)){if(!hc(this._modelService,e))return Promise.resolve(t);const n=Wr.create(!0),i=this._workerManager.withWorker().then(s=>s.computeMoreMinimalEdits(e,t));return i.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed())),Promise.race([i,wc(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return hc(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then(i=>i.navigateValueSet(e,t,n))}canComputeWordRanges(e){return hc(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(n=>n.computeWordRanges(e,t))}};Rp=k_([cc(0,La),cc(1,Ov),cc(2,xd)],Rp);class Bv{constructor(e,t,n){this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return kp(this,void 0,void 0,function*(){const n=this._configurationService.getValue(e.uri,t,"editor");if(!n.wordBasedSuggestions)return;const i=[];if(n.wordBasedSuggestionsMode==="currentDocument")hc(this._modelService,e.uri)&&i.push(e.uri);else for(const v of this._modelService.getModels())!hc(this._modelService,v.uri)||(v===e?i.unshift(v.uri):(n.wordBasedSuggestionsMode==="allDocuments"||v.getLanguageIdentifier().id===e.getLanguageIdentifier().id)&&i.push(v.uri));if(i.length===0)return;const s=$r.getWordDefinition(e.getLanguageIdentifier().id),o=e.getWordAtPosition(t),a=o?new Mt(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):Mt.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),h=yield(yield this._workerManager.withWorker()).textualSuggest(i,o==null?void 0:o.word,s);if(!!h)return{duration:h.duration,suggestions:h.words.map(v=>({kind:18,label:v,insertText:v,range:{insert:l,replace:a}}))}})}}class Wv extends Rn{constructor(e){super();this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new qa).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(Fv/2)),this._register(this._modelService.onModelRemoved(n=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>Fv&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new Hv(this._modelService,!1,"editorWorkerService")),Promise.resolve(this._editorWorkerClient)}}class A_ extends Rn{constructor(e,t,n){super();if(this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){let i=new qa;i.cancelAndSet(()=>this._checkStopModelSync(),Math.round(Ap/2)),this._register(i)}}dispose(){for(let e in this._syncedModels)Vi(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e){for(const t of e){let n=t.toString();this._syncedModels[n]||this._beginModelSync(t),this._syncedModels[n]&&(this._syncedModelsLastUsedTime[n]=new Date().getTime())}}_checkStopModelSync(){let e=new Date().getTime(),t=[];for(let n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>Ap&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e){let t=this._modelService.getModel(e);if(!t||t.isTooLargeForSyncing())return;let n=e.toString();this._proxy.acceptNewModel({url:t.uri.toString(),lines:t.getLinesContent(),EOL:t.getEOL(),versionId:t.getVersionId()});const i=new gi;i.add(t.onDidChangeContent(s=>{this._proxy.acceptModelChanged(n.toString(),s)})),i.add(t.onWillDispose(()=>{this._stopModelSync(n)})),i.add(Qi(()=>{this._proxy.acceptRemovedModel(n)})),this._syncedModels[n]=i}_stopModelSync(e){let t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],Vi(t)}}class Vv{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class Pp{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class Hv extends Rn{constructor(e,t,n){super();this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new ic(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new bd(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new Pp(this)))}catch(e){Wf(e),this._worker=new Vv(new lc(new Pp(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(Wf(e),this._worker=new Vv(new lc(new Pp(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new A_(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e){return this._disposed?Promise.reject(Hn()):this._getProxy().then(t=>(this._getOrCreateModelManager(t).ensureSyncedResources(e),t))}computeDiff(e,t,n,i){return this._withSyncedResources([e,t]).then(s=>s.computeDiff(e.toString(),t.toString(),n,i))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(n=>n.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,n){return kp(this,void 0,void 0,function*(){const i=yield this._withSyncedResources(e),s=n.source,o=cf(n);return i.textualSuggest(e.map(a=>a.toString()),t,s,o)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{let i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);let s=$r.getWordDefinition(i.getLanguageIdentifier().id),o=s.source,a=cf(s);return n.computeWordRanges(e.toString(),t,o,a)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(i=>{let s=this._modelService.getModel(e);if(!s)return null;let o=$r.getWordDefinition(s.getLanguageIdentifier().id),a=o.source,l=cf(o);return i.navigateValueSet(e.toString(),t,n,a,l)})}dispose(){super.dispose(),this._disposed=!0}}function R_(r,e){return new P_(r,e)}class P_ extends Hv{constructor(e,t){super(e,t.keepIdleModels||!1,t.label);this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?Oc(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const i=(a,l)=>e.fmr(a,l),s=(a,l)=>function(){const u=Array.prototype.slice.call(arguments,0);return l(a,u)};let o={};for(const a of n)o[a]=s(a,i);return o})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}class yo{constructor(e,t){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t}static createEmpty(e){const t=yo.defaultTokenMetadata,n=new Uint32Array(2);return n[0]=e.length,n[1]=t,new yo(n,e)}equals(e){return e instanceof yo?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const i=t<<1,s=i+(n<<1);for(let o=i;o<s;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1];return sl.getLanguageId(t)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return sl.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return sl.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return sl.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return sl.getInlineStyleFromMetadata(n,t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return yo.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new Fp(this,e,t,n)}static convertToEndOffset(e,t){const i=(e.length>>>1)-1;for(let s=0;s<i;s++)e[s<<1]=e[s+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,i=(e.length>>>1)-1;for(;n<i;){const s=n+Math.floor((i-n)/2),o=e[s<<1];if(o===t)return s+1;o<t?n=s+1:o>t&&(i=s)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,i="";const s=new Array;let o=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){i+=this._text.substring(o,a);const u=this._tokens[(t<<1)+1];s.push(i.length,u),t++,o=a}else if(l){if(l.offset>o){i+=this._text.substring(o,l.offset);const u=this._tokens[(t<<1)+1];s.push(i.length,u),o=l.offset}i+=l.text,s.push(i.length,l.tokenMetadata),n++}else break}return new yo(new Uint32Array(s),i)}}yo.defaultTokenMetadata=(0<<11|1<<14|2<<23)>>>0;class Fp{constructor(e,t,n,i){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=i,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let s=this._firstTokenIndex,o=e.getCount();s<o&&!(e.getStartOffset(s)>=n);s++)this._tokensCount++}equals(e){return e instanceof Fp?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}class al{constructor(e,t,n,i){this.startColumn=e,this.endColumn=t,this.className=n,this.type=i,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,i=t.length;if(n!==i)return!1;for(let s=0;s<n;s++)if(!al._equals(e[s],t[s]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const i=t+1,s=n+1,o=n-t,a=[];let l=0;for(const u of e)u.endColumn<=i||u.startColumn>=s||(a[l++]=new al(Math.max(1,u.startColumn-i+1),Math.min(o+1,u.endColumn-i+1),u.className,u.type));return a}static filter(e,t,n,i){if(e.length===0)return[];let s=[],o=0;for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.range;if(h.endLineNumber<t||h.startLineNumber>t||h.isEmpty()&&(u.type===0||u.type===3))continue;const v=h.startLineNumber===t?h.startColumn:n,N=h.endLineNumber===t?h.endColumn:i;s[o++]=new al(v,N,u.inlineClassName,u.type)}return s}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn===t.startColumn){if(e.endColumn===t.endColumn){const n=al._typeCompare(e.type,t.type);return n===0?e.className<t.className?-1:e.className>t.className?1:0:n}return e.endColumn-t.endColumn}return e.startColumn-t.startColumn}}class zv{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=i}}class tg{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,i=e.length;n<i;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let i=0;for(;i+1<this.count&&this.stopOffsets[i]===this.stopOffsets[i+1];)i++;n.push(new zv(t,this.stopOffsets[i],this.classNames.join(" "),tg._metadata(this.metadata))),t=this.stopOffsets[i]+1,this.stopOffsets.splice(0,i+1),this.classNames.splice(0,i+1),this.metadata.splice(0,i+1),this.count-=i+1}return this.count>0&&t<e&&(n.push(new zv(t,e-1,this.classNames.join(" "),tg._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let i=0;i<this.count;i++)if(this.stopOffsets[i]>=e){this.stopOffsets.splice(i,0,e),this.classNames.splice(i,0,t),this.metadata.splice(i,0,n);break}this.count++}}class F_{static normalize(e,t){if(t.length===0)return[];let n=[];const i=new tg;let s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];let u=l.startColumn,h=l.endColumn;const v=l.className,N=l.type===1?2:l.type===2?4:0;if(u>1){const ee=e.charCodeAt(u-2);Zs(ee)&&u--}if(h>1){const ee=e.charCodeAt(h-2);Zs(ee)&&h--}const P=u-1,K=h-2;s=i.consumeLowerThan(P,s,n),i.count===0&&(s=P),i.insert(K,v,N)}return i.consumeLowerThan(1073741824,s,n),n}}class bo{constructor(e,t,n){this._linePartBrand=void 0,this.endIndex=e,this.type=t,this.metadata=n}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class B_{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class Dh{constructor(e,t,n,i,s,o,a,l,u,h,v,N,P,K,ee,Se,Le,ce,Ee){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=i,this.isBasicASCII=s,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=u.sort(al.compare),this.tabSize=h,this.startVisibleColumn=v,this.spaceWidth=N,this.stopRenderingLineAfter=ee,this.renderWhitespace=Se==="all"?4:Se==="boundary"?1:Se==="selection"?2:Se==="trailing"?3:0,this.renderControlCharacters=Le,this.fontLigatures=ce,this.selectionsOnLine=Ee&&Ee.sort((at,Ze)=>at.startOffset<Ze.startOffset?-1:1);const ze=Math.abs(K-N),Qe=Math.abs(P-N);ze<Qe?(this.renderSpaceWidth=K,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=P,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&al.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class Bp{constructor(e,t){this.partIndex=e,this.charIndex=t}}class nu{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,n,i){const s=(t<<16|n<<0)>>>0;this._data[e-1]=s,this._absoluteOffsets[e-1]=i+n}getAbsoluteOffset(e){return this._absoluteOffsets.length===0?0:this._absoluteOffsets[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=nu.getPartIndex(t),i=nu.getCharIndex(t);return new Bp(n,i)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;let i=(e<<16|n<<0)>>>0,s=0,o=this.length-1;for(;s+1<o;){let ee=s+o>>>1,Se=this._data[ee];if(Se===i)return ee;Se>i?o=ee:s=ee}if(s===o)return s;let a=this._data[s],l=this._data[o];if(a===i)return s;if(l===i)return o;let u=nu.getPartIndex(a),h=nu.getCharIndex(a),v=nu.getPartIndex(l),N;u!==v?N=t:N=nu.getCharIndex(l);let P=n-h,K=N-n;return P<=K?s:o}}class Wp{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function Vp(r,e){if(r.lineContent.length===0){if(r.lineDecorations.length>0){e.appendASCIIString("<span>");let t=0,n=0,i=0;for(const o of r.lineDecorations)(o.type===1||o.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(o.className),e.appendASCIIString('"></span>'),o.type===1&&(i|=1,t++),o.type===2&&(i|=2,n++));e.appendASCIIString("</span>");const s=new nu(1,t+n);return s.setColumnInfo(1,t,0,0),new Wp(s,!1,i)}return e.appendASCIIString("<span><span></span></span>"),new Wp(new nu(0,0),!1,0)}return $v(jv(r),e)}class W_{constructor(e,t,n,i){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=i}}function Ih(r){let e=_h(1e4),t=Vp(r,e);return new W_(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class Uv{constructor(e,t,n,i,s,o,a,l,u,h,v,N,P,K,ee){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=i,this.isOverflowing=s,this.parts=o,this.containsForeignElements=a,this.fauxIndentLength=l,this.tabSize=u,this.startVisibleColumn=h,this.containsRTL=v,this.spaceWidth=N,this.renderSpaceCharCode=P,this.renderWhitespace=K,this.renderControlCharacters=ee}}function jv(r){const e=r.lineContent;let t,n;r.stopRenderingLineAfter!==-1&&r.stopRenderingLineAfter<e.length?(t=!0,n=r.stopRenderingLineAfter):(t=!1,n=e.length);let i=V_(r.lineTokens,r.fauxIndentLength,n);(r.renderWhitespace===4||r.renderWhitespace===1||r.renderWhitespace===2&&!!r.selectionsOnLine||r.renderWhitespace===3)&&(i=Hp(r,e,n,i));let s=0;if(r.lineDecorations.length>0){for(let o=0,a=r.lineDecorations.length;o<a;o++){const l=r.lineDecorations[o];l.type===3||l.type===1?s|=1:l.type===2&&(s|=2)}i=ng(e,n,i,r.lineDecorations)}return r.containsRTL||(i=H_(e,i,!r.isBasicASCII||r.fontLigatures)),new Uv(r.useMonospaceOptimizations,r.canUseHalfwidthRightwardsArrow,e,n,t,i,s,r.fauxIndentLength,r.tabSize,r.startVisibleColumn,r.containsRTL,r.spaceWidth,r.renderSpaceCharCode,r.renderWhitespace,r.renderControlCharacters)}function V_(r,e,t){let n=[],i=0;e>0&&(n[i++]=new bo(e,"",0));for(let s=0,o=r.getCount();s<o;s++){const a=r.getEndOffset(s);if(a<=e)continue;const l=r.getClassName(s);if(a>=t){n[i++]=new bo(t,l,0);break}n[i++]=new bo(a,l,0)}return n}function H_(r,e,t){let n=0,i=[],s=0;if(t)for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.endIndex;if(n+50<u){const h=l.type,v=l.metadata;let N=-1,P=n;for(let K=n;K<u;K++)r.charCodeAt(K)===32&&(N=K),N!==-1&&K-P>=50&&(i[s++]=new bo(N+1,h,v),P=N+1,N=-1);P!==u&&(i[s++]=new bo(u,h,v))}else i[s++]=l;n=u}else for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.endIndex;let h=u-n;if(h>50){const v=l.type,N=l.metadata,P=Math.ceil(h/50);for(let K=1;K<P;K++){let ee=n+K*50;i[s++]=new bo(ee,v,N)}i[s++]=new bo(u,v,N)}else i[s++]=l;n=u}return i}function Hp(r,e,t,n){const i=r.continuesWithWrappedLine,s=r.fauxIndentLength,o=r.tabSize,a=r.startVisibleColumn,l=r.useMonospaceOptimizations,u=r.selectionsOnLine,h=r.renderWhitespace===1,v=r.renderWhitespace===3,N=r.renderSpaceWidth!==r.spaceWidth;let P=[],K=0,ee=0,Se=n[ee].type,Le=n[ee].endIndex;const ce=n.length;let Ee=!1,ze=ka(e),Qe;ze===-1?(Ee=!0,ze=t,Qe=t):Qe=_u(e);let at=!1,Ze=0,rt=u&&u[Ze],St=a%o;for(let Kt=s;Kt<t;Kt++){const An=e.charCodeAt(Kt);rt&&Kt>=rt.endOffset&&(Ze++,rt=u&&u[Ze]);let Wn;if(Kt<ze||Kt>Qe)Wn=!0;else if(An===9)Wn=!0;else if(An===32)if(h)if(at)Wn=!0;else{const $i=Kt+1<t?e.charCodeAt(Kt+1):0;Wn=$i===32||$i===9}else Wn=!0;else Wn=!1;if(Wn&&u&&(Wn=!!rt&&rt.startOffset<=Kt&&rt.endOffset>Kt),Wn&&v&&(Wn=Ee||Kt>Qe),at){if(!Wn||!l&&St>=o){if(N){const $i=K>0?P[K-1].endIndex:s;for(let Fi=$i+1;Fi<=Kt;Fi++)P[K++]=new bo(Fi,"mtkw",1)}else P[K++]=new bo(Kt,"mtkw",1);St=St%o}}else(Kt===Le||Wn&&Kt>s)&&(P[K++]=new bo(Kt,Se,0),St=St%o);for(An===9?St=o:Ja(An)?St+=2:St++,at=Wn;Kt===Le&&(ee++,ee<ce);)Se=n[ee].type,Le=n[ee].endIndex}let un=!1;if(at)if(i&&h){let Kt=t>0?e.charCodeAt(t-1):0,An=t>1?e.charCodeAt(t-2):0;Kt===32&&An!==32&&An!==9||(un=!0)}else un=!0;if(un)if(N){const Kt=K>0?P[K-1].endIndex:s;for(let An=Kt+1;An<=t;An++)P[K++]=new bo(An,"mtkw",1)}else P[K++]=new bo(t,"mtkw",1);else P[K++]=new bo(t,Se,0);return P}function ng(r,e,t,n){n.sort(al.compare);const i=F_.normalize(r,n),s=i.length;let o=0,a=[],l=0,u=0;for(let v=0,N=t.length;v<N;v++){const P=t[v],K=P.endIndex,ee=P.type,Se=P.metadata;for(;o<s&&i[o].startOffset<K;){const Le=i[o];if(Le.startOffset>u&&(u=Le.startOffset,a[l++]=new bo(u,ee,Se)),Le.endOffset+1<=K)u=Le.endOffset+1,a[l++]=new bo(u,ee+" "+Le.className,Se|Le.metadata),o++;else{u=K,a[l++]=new bo(u,ee+" "+Le.className,Se|Le.metadata);break}}K>u&&(u=K,a[l++]=new bo(u,ee,Se))}const h=t[t.length-1].endIndex;if(o<s&&i[o].startOffset===h)for(;o<s&&i[o].startOffset===h;){const v=i[o];a[l++]=new bo(u,v.className,v.metadata),o++}return a}function $v(r,e){const t=r.fontIsMonospace,n=r.canUseHalfwidthRightwardsArrow,i=r.containsForeignElements,s=r.lineContent,o=r.len,a=r.isOverflowing,l=r.parts,u=r.fauxIndentLength,h=r.tabSize,v=r.startVisibleColumn,N=r.containsRTL,P=r.spaceWidth,K=r.renderSpaceCharCode,ee=r.renderWhitespace,Se=r.renderControlCharacters,Le=new nu(o+1,l.length);let ce=!1,Ee=0,ze=v,Qe=0,at=0,Ze=0,rt=0;N?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let St=0,un=l.length;St<un;St++){rt+=Ze;const Kt=l[St],An=Kt.endIndex,Wn=Kt.type,$i=ee!==0&&Kt.isWhitespace(),Fi=$i&&!t&&(Wn==="mtkw"||!i),tr=Ee===An&&Kt.isPseudoAfter();if(Qe=0,e.appendASCIIString('<span class="'),e.appendASCIIString(Fi?"mtkz":Wn),e.appendASCII(34),$i){let yr=0;{let gr=Ee,Mr=ze;for(;gr<An;gr++){const Vu=(s.charCodeAt(gr)===9?h-Mr%h:1)|0;yr+=Vu,gr>=u&&(Mr+=Vu)}}for(Fi&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(P*yr)),e.appendASCIIString('px"')),e.appendASCII(62);Ee<An;Ee++){Le.setColumnInfo(Ee+1,St-at,Qe,rt),at=0;const gr=s.charCodeAt(Ee);let Mr;if(gr===9){Mr=h-ze%h|0,!n||Mr>1?e.write1(8594):e.write1(65515);for(let hs=2;hs<=Mr;hs++)e.write1(160)}else Mr=1,e.write1(K);Qe+=Mr,Ee>=u&&(ze+=Mr)}Ze=yr}else{let yr=0;for(e.appendASCII(62);Ee<An;Ee++){Le.setColumnInfo(Ee+1,St-at,Qe,rt),at=0;const gr=s.charCodeAt(Ee);let Mr=1,hs=1;switch(gr){case 9:Mr=h-ze%h,hs=Mr;for(let Vu=1;Vu<=Mr;Vu++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:Se?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:Ja(gr)&&hs++,Se&&gr<32?e.write1(9216+gr):Se&&gr===127?e.write1(9249):e.write1(gr)}Qe+=Mr,yr+=Mr,Ee>=u&&(ze+=hs)}Ze=yr}tr?at++:at=0,Ee>=o&&!ce&&Kt.isPseudoAfter()&&(ce=!0,Le.setColumnInfo(Ee+1,St,Qe,rt)),e.appendASCIIString("</span>")}return ce||Le.setColumnInfo(o+1,l.length-1,Qe,rt),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new Wp(Le,N,i)}class Kv{constructor(e,t,n,i){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=i|0}}class z_{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}}class wo{constructor(e,t,n,i,s){this.breakOffsets=e,this.breakOffsetsVisibleColumn=t,this.wrappedTextIndentLength=n,this.injectionTexts=i,this.injectionOffsets=s}getInputOffsetOfOutputPosition(e,t){let n=0;if(e===0?n=t:n=this.breakOffsets[e-1]+t,this.injectionOffsets!==null)for(let i=0;i<this.injectionOffsets.length&&n>this.injectionOffsets[i];i++)n<this.injectionOffsets[i]+this.injectionTexts[i].length?n=this.injectionOffsets[i]:n-=this.injectionTexts[i].length;return n}getOutputPositionOfInputOffset(e){let t=0;if(this.injectionOffsets!==null)for(let a=0;a<this.injectionOffsets.length&&!(e<this.injectionOffsets[a]);a++)t+=this.injectionTexts[a].length;e+=t;let n=0,i=this.breakOffsets.length-1,s=0,o=0;for(;n<=i;){s=n+(i-n)/2|0;const a=this.breakOffsets[s];if(o=s>0?this.breakOffsets[s-1]:0,e<o)i=s-1;else if(e>=a)n=s+1;else break}return new z_(s,e-o)}}class Dd{constructor(e,t){this.tabSize=e,this.data=t}}class zp{constructor(e,t,n,i,s,o){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=i,this.startVisibleColumn=s,this.tokens=o}}class Ta{constructor(e,t,n,i,s,o,a,l,u,h){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=i,this.isBasicASCII=Ta.isBasicASCII(n,o),this.containsRTL=Ta.containsRTL(n,this.isBasicASCII,s),this.tokens=a,this.inlineDecorations=l,this.tabSize=u,this.startVisibleColumn=h}static isBasicASCII(e,t){return t?Aa(e):!0}static containsRTL(e,t,n){return!t&&n?Tc(e):!1}}class ig{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}class ua{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}function Id(r){return Array.isArray(r)}function U_(r){return!Id(r)}function rg(r){return typeof r=="string"}function Gv(r){return!rg(r)}function Nh(r){return!r}function iu(r,e){return r.ignoreCase&&e?e.toLowerCase():e}function Yv(r){return r.replace(/[&<>'"_]/g,"-")}function sg(r,e){console.log(`${r.languageId}: ${e}`)}function Ur(r,e){return new Error(`${r.languageId}: ${e}`)}function dc(r,e,t,n,i){const s=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(s,function(a,l,u,h,v,N,P,K,ee){return Nh(u)?Nh(h)?!Nh(v)&&v<n.length?iu(r,n[v]):!Nh(P)&&r&&typeof r[P]=="string"?r[P]:(o===null&&(o=i.split("."),o.unshift(i)),!Nh(N)&&N<o.length?iu(r,o[N]):""):iu(r,t):"$"})}function og(r,e){let t=e;for(;t&&t.length>0;){const n=r.tokenizer[t];if(n)return n;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return null}function Up(r,e){let t=e;for(;t&&t.length>0;){if(r.stateNames[t])return!0;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return!1}const Nd=5;class Td{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new Th(e,t);let n=Th.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let i=this._entries[n];return i||(i=new Th(e,t),this._entries[n]=i,i)}}Td._INSTANCE=new Td(Nd);class Th{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return Th._equals(this,e)}push(e){return Td.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return Td.create(this.parent,e)}}class Md{constructor(e,t){this.modeId=e,this.state=t}equals(e){return this.modeId===e.modeId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new Md(this.modeId,this.state)}}class ru{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null)return new Bc(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new Bc(e,t);let n=Th.getStackElementId(e),i=this._entries[n];return i||(i=new Bc(e,null),this._entries[n]=i,i)}}ru._INSTANCE=new ru(Nd);class Bc{constructor(e,t){this.stack=e,this.embeddedModeData=t}clone(){return(this.embeddedModeData?this.embeddedModeData.clone():null)===this.embeddedModeData?this:ru.create(this.stack,this.embeddedModeData)}equals(e){return!(e instanceof Bc)||!this.stack.equals(e.stack)?!1:this.embeddedModeData===null&&e.embeddedModeData===null?!0:this.embeddedModeData===null||e.embeddedModeData===null?!1:this.embeddedModeData.equals(e.embeddedModeData)}}class j_{constructor(){this._tokens=[],this._language=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterMode(e,t){this._language=t}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._language||(this._lastTokenType=t,this._lastTokenLanguage=this._language,this._tokens.push(new lo(e,t,this._language)))}nestedModeTokenize(e,t,n,i){const s=n.modeId,o=n.state,a=bs.get(s);if(!a)return this.enterMode(i,s),this.emit(i,""),o;let l=a.tokenize(e,t,o,i);return this._tokens=this._tokens.concat(l.tokens),this._lastTokenType=null,this._lastTokenLanguage=null,this._language=null,l.endState}finalize(e){return new na(this._tokens,e)}}class ag{constructor(e,t){this._modeService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterMode(e,t){this._currentLanguageId=this._modeService.getLanguageIdentifier(t).id}emit(e,t){let n=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){let i=e!==null?e.length:0,s=t.length,o=n!==null?n.length:0;if(i===0&&s===0&&o===0)return new Uint32Array(0);if(i===0&&s===0)return n;if(s===0&&o===0)return e;let a=new Uint32Array(i+s+o);e!==null&&a.set(e);for(let l=0;l<s;l++)a[i+l]=t[l];return n!==null&&a.set(n,i+s),a}nestedModeTokenize(e,t,n,i){const s=n.modeId,o=n.state,a=bs.get(s);if(!a)return this.enterMode(i,s),this.emit(i,""),o;let l=a.tokenize2(e,t,o,i);return this._prependTokens=ag._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new gl(ag._merge(this._prependTokens,this._tokens,null),e)}}class lg{constructor(e,t,n,i){this._modeService=e,this._standaloneThemeService=t,this._modeId=n,this._lexer=i,this._embeddedModes=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let s=!1;this._tokenizationRegistryListener=bs.onDidChange(o=>{if(s)return;let a=!1;for(let l=0,u=o.changedLanguages.length;l<u;l++){let h=o.changedLanguages[l];if(this._embeddedModes[h]){a=!0;break}}a&&(s=!0,bs.fire([this._modeId]),s=!1)})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){let e=[];for(let t in this._embeddedModes){const n=bs.get(t);if(n){if(n instanceof lg){const s=n.getLoadStatus();s.loaded===!1&&e.push(s.promise)}continue}const i=bs.getPromise(t);i&&e.push(i)}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){let e=Td.create(null,this._lexer.start);return ru.create(e,null)}tokenize(e,t,n,i){let s=new j_,o=this._tokenize(e,t,n,i,s);return s.finalize(o)}tokenize2(e,t,n,i){let s=new ag(this._modeService,this._standaloneThemeService.getColorTheme().tokenTheme),o=this._tokenize(e,t,n,i,s);return s.finalize(o)}_tokenize(e,t,n,i,s){return n.embeddedModeData?this._nestedTokenize(e,t,n,i,s):this._myTokenize(e,t,n,i,s)}_findLeavingNestedModeOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=og(this._lexer,t.stack.state),!n))throw Ur(this._lexer,"tokenizer state is not defined: "+t.stack.state);let i=-1,s=!1;for(const o of n){if(!Gv(o.action)||o.action.nextEmbedded!=="@pop")continue;s=!0;let a=o.regex,l=o.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){let h=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),h)}let u=e.search(a);u===-1||u!==0&&o.matchOnlyAtLineStart||(i===-1||u<i)&&(i=u)}if(!s)throw Ur(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return i}_nestedTokenize(e,t,n,i,s){let o=this._findLeavingNestedModeOffset(e,n);if(o===-1){let u=s.nestedModeTokenize(e,t,n.embeddedModeData,i);return ru.create(n.stack,new Md(n.embeddedModeData.modeId,u))}let a=e.substring(0,o);a.length>0&&s.nestedModeTokenize(a,!1,n.embeddedModeData,i);let l=e.substring(o);return this._myTokenize(l,t,n,i+o,s)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,i,s){s.enterMode(i,this._modeId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let u=n.embeddedModeData,h=n.stack,v=0,N=null,P=!0;for(;P||v<l;){const K=v,ee=h.depth,Se=N?N.groups.length:0,Le=h.state;let ce=null,Ee=null,ze=null,Qe=null,at=null;if(N){ce=N.matches;const St=N.groups.shift();Ee=St.matched,ze=St.action,Qe=N.rule,N.groups.length===0&&(N=null)}else{if(!P&&v>=l)break;P=!1;let St=this._lexer.tokenizer[Le];if(!St&&(St=og(this._lexer,Le),!St))throw Ur(this._lexer,"tokenizer state is not defined: "+Le);let un=a.substr(v);for(const Kt of St)if((v===0||!Kt.matchOnlyAtLineStart)&&(ce=un.match(Kt.regex),ce)){Ee=ce[0],ze=Kt.action;break}}if(ce||(ce=[""],Ee=""),ze||(v<l&&(ce=[a.charAt(v)],Ee=ce[0]),ze=this._lexer.defaultToken),Ee===null)break;for(v+=Ee.length;U_(ze)&&Gv(ze)&&ze.test;)ze=ze.test(Ee,ce,Le,v===l);let Ze=null;if(typeof ze=="string"||Array.isArray(ze))Ze=ze;else if(ze.group)Ze=ze.group;else if(ze.token!==null&&ze.token!==void 0){if(ze.tokenSubst?Ze=dc(this._lexer,ze.token,Ee,ce,Le):Ze=ze.token,ze.nextEmbedded)if(ze.nextEmbedded==="@pop"){if(!u)throw Ur(this._lexer,"cannot pop embedded mode if not inside one");u=null}else{if(u)throw Ur(this._lexer,"cannot enter embedded mode from within an embedded mode");at=dc(this._lexer,ze.nextEmbedded,Ee,ce,Le)}if(ze.goBack&&(v=Math.max(0,v-ze.goBack)),ze.switchTo&&typeof ze.switchTo=="string"){let St=dc(this._lexer,ze.switchTo,Ee,ce,Le);if(St[0]==="@"&&(St=St.substr(1)),og(this._lexer,St))h=h.switchTo(St);else throw Ur(this._lexer,"trying to switch to a state '"+St+"' that is undefined in rule: "+this._safeRuleName(Qe))}else{if(ze.transform&&typeof ze.transform=="function")throw Ur(this._lexer,"action.transform not supported");if(ze.next)if(ze.next==="@push"){if(h.depth>=this._lexer.maxStack)throw Ur(this._lexer,"maximum tokenizer stack size reached: ["+h.state+","+h.parent.state+",...]");h=h.push(Le)}else if(ze.next==="@pop"){if(h.depth<=1)throw Ur(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(Qe));h=h.pop()}else if(ze.next==="@popall")h=h.popall();else{let St=dc(this._lexer,ze.next,Ee,ce,Le);if(St[0]==="@"&&(St=St.substr(1)),og(this._lexer,St))h=h.push(St);else throw Ur(this._lexer,"trying to set a next state '"+St+"' that is undefined in rule: "+this._safeRuleName(Qe))}}ze.log&&typeof ze.log=="string"&&sg(this._lexer,this._lexer.languageId+": "+dc(this._lexer,ze.log,Ee,ce,Le))}if(Ze===null)throw Ur(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(Qe));const rt=St=>{let un=this._modeService.getModeIdForLanguageName(St);un&&(St=un);const Kt=this._getNestedEmbeddedModeData(St);if(v<l){const An=e.substr(v);return this._nestedTokenize(An,t,ru.create(h,Kt),i+v,s)}else return ru.create(h,Kt)};if(Array.isArray(Ze)){if(N&&N.groups.length>0)throw Ur(this._lexer,"groups cannot be nested: "+this._safeRuleName(Qe));if(ce.length!==Ze.length+1)throw Ur(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(Qe));let St=0;for(let un=1;un<ce.length;un++)St+=ce[un].length;if(St!==Ee.length)throw Ur(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(Qe));N={rule:Qe,matches:ce,groups:[]};for(let un=0;un<Ze.length;un++)N.groups[un]={action:Ze[un],matched:ce[un+1]};v-=Ee.length;continue}else{if(Ze==="@rematch"&&(v-=Ee.length,Ee="",ce=null,Ze="",at!==null))return rt(at);if(Ee.length===0){if(l===0||ee!==h.depth||Le!==h.state||(N?N.groups.length:0)!==Se)continue;throw Ur(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(Qe))}let St=null;if(rg(Ze)&&Ze.indexOf("@brackets")===0){let un=Ze.substr("@brackets".length),Kt=$_(this._lexer,Ee);if(!Kt)throw Ur(this._lexer,"@brackets token returned but no bracket defined as: "+Ee);St=Yv(Kt.token+un)}else{let un=Ze===""?"":Ze+this._lexer.tokenPostfix;St=Yv(un)}K<o&&s.emit(K+i,St)}if(at!==null)return rt(at)}return ru.create(h,u)}_getNestedEmbeddedModeData(e){let t=this._locateMode(e);if(t){let n=bs.get(t);if(n)return new Md(t,n.getInitialState())}return new Md(t||vh,Ff)}_locateMode(e){if(!e||!this._modeService.isRegisteredMode(e))return null;if(e===this._modeId)return e;let t=this._modeService.getModeId(e);return t&&(this._modeService.triggerMode(t),this._embeddedModes[t]=!0),t}}function $_(r,e){if(!e)return null;e=iu(r,e);let t=r.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}function K_(r,e,t,n){return new lg(r,e,t,n)}var jp;const $p=(jp=window.trustedTypes)===null||jp===void 0?void 0:jp.createPolicy("standaloneColorizer",{createHTML:r=>r});class Kp{static colorizeElement(e,t,n,i){i=i||{};let s=i.theme||"vs",o=i.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();e.setTheme(s);let a=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+s;let l=u=>{var h;const v=(h=$p==null?void 0:$p.createHTML(u))!==null&&h!==void 0?h:u;n.innerHTML=v};return this.colorize(t,a||"",o,i).then(l,u=>console.error(u))}static colorize(e,t,n,i){let s=4;i&&typeof i.tabSize=="number"&&(s=i.tabSize),Pa(t)&&(t=t.substr(1));let o=Ku(t),a=e.getModeId(n);if(!a)return Promise.resolve(Zv(o,s));e.triggerMode(a);const l=bs.get(a);if(l)return Gp(o,s,l);const u=bs.getPromise(a);return u?new Promise((h,v)=>{u.then(N=>{Gp(o,s,N).then(h,v)},v)}):new Promise((h,v)=>{let N=null,P=null;const K=()=>{N&&(N.dispose(),N=null),P&&(P.dispose(),P=null);const ee=bs.get(a);if(ee){Gp(o,s,ee).then(h,v);return}h(Zv(o,s))};P=new sa,P.cancelAndSet(K,500),N=bs.onDidChange(ee=>{ee.changedLanguages.indexOf(a)>=0&&K()})})}static colorizeLine(e,t,n,i,s=4){const o=Ta.isBasicASCII(e,t),a=Ta.containsRTL(e,o,n);return Ih(new Dh(!1,!0,e,!1,o,a,0,i,[],s,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){let i=e.getLineContent(t);e.forceTokenization(t);let o=e.getLineTokens(t).inflate();return this.colorizeLine(i,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,n)}}function Gp(r,e,t){return new Promise((n,i)=>{const s=()=>{const o=G_(r,e,t);if(t instanceof lg){const a=t.getLoadStatus();if(a.loaded===!1){a.promise.then(s,i);return}}n(o)};s()})}function Zv(r,e){let t=[];const n=(0<<11|1<<14|2<<23)>>>0,i=new Uint32Array(2);i[0]=0,i[1]=n;for(let s=0,o=r.length;s<o;s++){let a=r[s];i[0]=a.length;const l=new yo(i,a),u=Ta.isBasicASCII(a,!0),h=Ta.containsRTL(a,u,!0);let v=Ih(new Dh(!1,!0,a,!1,u,h,0,l,[],e,0,0,0,0,-1,"none",!1,!1,null));t=t.concat(v.html),t.push("<br/>")}return t.join("")}function G_(r,e,t){let n=[],i=t.getInitialState();for(let s=0,o=r.length;s<o;s++){let a=r[s],l=t.tokenize2(a,!0,i,0);yo.convertToEndOffset(l.tokens,a.length);let u=new yo(l.tokens,a);const h=Ta.isBasicASCII(a,!0),v=Ta.containsRTL(a,h,!0);let N=Ih(new Dh(!1,!0,a,!1,h,v,0,u.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(N.html),n.push("<br/>"),i=l.endState}return n.join("")}var Od;(function(r){r[r.Ignore=0]="Ignore",r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error"})(Od||(Od={})),function(r){const e="error",t="warning",n="warn",i="info",s="ignore";function o(l){return l?Ic(e,l)?r.Error:Ic(t,l)||Ic(n,l)?r.Warning:Ic(i,l)?r.Info:r.Ignore:r.Ignore}r.fromValue=o;function a(l){switch(l){case r.Error:return e;case r.Warning:return t;case r.Info:return i;default:return s}}r.toString=a}(Od||(Od={}));var Is=Od;function Xv(r){return r&&typeof r.getEditorType=="function"?r.getEditorType()===gd.ICodeEditor:!1}function Y_(r){return r&&typeof r.getEditorType=="function"?r.getEditorType()===editorCommon.EditorType.IDiffEditor:!1}function fb(r){return Xv(r)?r:Y_(r)?r.getModifiedEditor():null}const d=Te("IWorkspaceEditService");function b(r){return oa(r)&&(Boolean(r.newUri)||Boolean(r.oldUri))}function U(r){return oa(r)&&ci.isUri(r.resource)&&oa(r.edit)}class me{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(U(t))return new He(t.resource,t.edit,t.modelVersionId,t.metadata);if(b(t))return new c(t.oldUri,t.newUri,t.options,t.metadata);throw new Error("Unsupported edit")})}}class He extends me{constructor(e,t,n,i){super(i);this.resource=e,this.textEdit=t,this.versionId=n}}class c extends me{constructor(e,t,n,i){super(i);this.oldResource=e,this.newResource=t,this.options=n}}class p{constructor(){this.data=new Map}add(e,t){Sf(El(e)),Sf(oa(t)),Sf(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const k=new p,X={JSONContribution:"base.contributions.json"};function xe(r){return r.length>0&&r.charAt(r.length-1)==="#"?r.substring(0,r.length-1):r}class We{constructor(){this._onDidChangeSchema=new $t,this.schemasById={}}registerSchema(e,t){this.schemasById[xe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const it=new We;k.add(X.JSONContribution,it);const pt={Configuration:"base.contributions.configuration"},Nt={properties:{},patternProperties:{}},vn={properties:{},patternProperties:{}},wn={properties:{},patternProperties:{}},Sn={properties:{},patternProperties:{}},Yn={properties:{},patternProperties:{}},ii={properties:{},patternProperties:{}},ki="vscode://schemas/settings/resourceLanguage",Gi=k.as(X.JSONContribution);class Ri{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new $t,this._onDidUpdateConfiguration=new $t,this.defaultValues={},this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:w("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},Gi.registerSchema(ki,this.resourceLanguageSettingsSchema)}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=[];e.forEach(i=>{n.push(...this.validateAndRegisterProperties(i,t,i.extensionInfo)),this.configurationContributors.push(i),this.registerJSONConfiguration(i)}),Gi.registerSchema(ki,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(n)}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}validateAndRegisterProperties(e,t=!0,n,i=3){var s;i=Ca(e.scope)?i:e.scope;let o=[],a=e.properties;if(a)for(let u in a){if(t&&oo(u)){delete a[u];continue}const h=a[u];if(this.updatePropertyDefaultValue(u,h),rr.test(u)?h.scope=void 0:(h.scope=Ca(h.scope)?i:h.scope,h.restricted=Ca(h.restricted)?!!((s=n==null?void 0:n.restrictedConfigurations)===null||s===void 0?void 0:s.includes(u)):h.restricted),a[u].hasOwnProperty("included")&&!a[u].included){this.excludedConfigurationProperties[u]=a[u],delete a[u];continue}else this.configurationProperties[u]=a[u];!a[u].deprecationMessage&&a[u].markdownDeprecationMessage&&(a[u].deprecationMessage=a[u].markdownDeprecationMessage),o.push(u)}let l=e.allOf;if(l)for(let u of l)o.push(...this.validateAndRegisterProperties(u,t,n,i));return o}getConfigurationProperties(){return this.configurationProperties}registerJSONConfiguration(e){const t=n=>{let i=n.properties;if(i)for(const o in i)this.updateSchema(o,i[o]);let s=n.allOf;s&&s.forEach(t)};t(e)}updateSchema(e,t){switch(Nt.properties[e]=t,t.scope){case 1:vn.properties[e]=t;break;case 2:wn.properties[e]=t;break;case 6:Sn.properties[e]=t;break;case 3:Yn.properties[e]=t;break;case 4:ii.properties[e]=t;break;case 5:ii.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:w("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:w("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:ki};this.updatePropertyDefaultValue(t,n),Nt.properties[t]=n,vn.properties[t]=n,wn.properties[t]=n,Sn.properties[t]=n,Yn.properties[t]=n,ii.properties[t]=n}this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){let n=this.defaultValues[e];ks(n)&&(n=t.default),ks(n)&&(n=Yo(t.type)),t.default=n}}const Ki="\\[.*\\]$",rr=new RegExp(Ki);function Ks(r){return r.substring(1,r.length-1)}function Yo(r){switch(Array.isArray(r)?r[0]:r){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const ll=new Ri;k.add(pt.Configuration,ll);function oo(r){return r.trim()?rr.test(r)?w("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",r):ll.getConfigurationProperties()[r]!==void 0?w("config.property.duplicate","Cannot register '{0}'. This property is already registered.",r):null:w("config.property.empty","Cannot register an empty property")}const Nu=Object.prototype.hasOwnProperty;function Wc(r,e){for(let t in r)if(Nu.call(r,t)&&e({key:t,value:r[t]},function(){delete r[t]})===!1)return}class gb{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);!n||(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);!n||n.forEach(t)}}const ZE=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new $t,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(r){this._tabFocus!==r&&(this._tabFocus=r,this._onDidChangeTabFocus.fire(this._tabFocus))}},XE=Object.hasOwnProperty;class $N{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class KN{constructor(){this._values=[]}_read(e){return this._values[e]}_write(e,t){this._values[e]=t}}class kd{static readOptions(e){const t=e,n=new KN;for(const i of Cn){const s=i.name==="_never_"?void 0:t[i.name];n._write(i.id,s)}return n}static validateOptions(e){const t=new gt;for(const n of Cn)t._write(n.id,n.validate(e._read(n.id)));return t}static computeOptions(e,t){const n=new $N;for(const i of Cn)n._write(i.id,i.compute(t,n,e._read(i.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object")return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?Tl(e,t):!1;for(let n in e)if(!kd._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let i=!1;for(const s of Cn){const o=!kd._deepEquals(e._read(s.id),t._read(s.id));n[s.id]=o,o&&(i=!0)}return i?new pn(n):null}}function GN(r){const e=r.wordWrap;e===!0?r.wordWrap="on":e===!1&&(r.wordWrap="off");const t=r.lineNumbers;t===!0?r.lineNumbers="on":t===!1&&(r.lineNumbers="off"),r.autoClosingBrackets===!1&&(r.autoClosingBrackets="never",r.autoClosingQuotes="never",r.autoSurround="never"),r.cursorBlinking==="visible"&&(r.cursorBlinking="solid");const s=r.renderWhitespace;s===!0?r.renderWhitespace="boundary":s===!1&&(r.renderWhitespace="none");const o=r.renderLineHighlight;o===!0?r.renderLineHighlight="line":o===!1&&(r.renderLineHighlight="none");const a=r.acceptSuggestionOnEnter;a===!0?r.acceptSuggestionOnEnter="on":a===!1&&(r.acceptSuggestionOnEnter="off");const l=r.tabCompletion;l===!1?r.tabCompletion="off":l===!0&&(r.tabCompletion="onlySnippets");const u=r.suggest;if(u&&typeof u.filteredTypes=="object"&&u.filteredTypes){const K={};K.method="showMethods",K.function="showFunctions",K.constructor="showConstructors",K.deprecated="showDeprecated",K.field="showFields",K.variable="showVariables",K.class="showClasses",K.struct="showStructs",K.interface="showInterfaces",K.module="showModules",K.property="showProperties",K.event="showEvents",K.operator="showOperators",K.unit="showUnits",K.value="showValues",K.constant="showConstants",K.enum="showEnums",K.enumMember="showEnumMembers",K.keyword="showKeywords",K.text="showWords",K.color="showColors",K.file="showFiles",K.reference="showReferences",K.folder="showFolders",K.typeParameter="showTypeParameters",K.snippet="showSnippets",Wc(K,ee=>{const Se=u.filteredTypes[ee.key];Se===!1&&(u[ee.value]=Se)})}const h=r.hover;h===!0?r.hover={enabled:!0}:h===!1&&(r.hover={enabled:!1});const v=r.parameterHints;v===!0?r.parameterHints={enabled:!0}:v===!1&&(r.parameterHints={enabled:!1});const N=r.autoIndent;N===!0?r.autoIndent="full":N===!1&&(r.autoIndent="advanced");const P=r.matchBrackets;P===!0?r.matchBrackets="always":P===!1&&(r.matchBrackets="never")}function qE(r){const e=wu(r);return GN(e),e}class pb extends Rn{constructor(e,t){super();this._onDidChange=this._register(new $t),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new $t),this.onDidChangeFast=this._onDidChangeFast.event,this.isSimpleWidget=e,this._isDominatedByLongLines=!1,this._computeOptionsMemory=new _t,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._rawOptions=qE(t),this._readOptions=kd.readOptions(this._rawOptions),this._validatedOptions=kd.validateOptions(this._readOptions),this._register(gh.onDidChangeZoomLevel(n=>this._recomputeOptions())),this._register(ZE.onDidChangeTabFocus(n=>this._recomputeOptions()))}observeReferenceElement(e){}updatePixelRatio(){}_recomputeOptions(){const e=this.options,t=this._computeInternalOptions();if(!e)this.options=t;else{const n=kd.checkEquals(e,t);if(n===null)return;this.options=t,this._onDidChangeFast.fire(n),this._onDidChange.fire(n)}}getRawOptions(){return this._rawOptions}_computeInternalOptions(){const e=this._getEnvConfiguration(),t=Qu.createFromValidatedSettings(this._validatedOptions,e.zoomLevel,e.pixelRatio,this.isSimpleWidget),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,fontInfo:this.readConfiguration(t),extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:ZE.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return kd.computeOptions(this._validatedOptions,n)}static _subsetEquals(e,t){for(const n in t)if(XE.call(t,n)){const i=t[n],s=e[n];if(s===i)continue;if(Array.isArray(s)&&Array.isArray(i)){if(!Tl(s,i))return!1;continue}if(s&&typeof s=="object"&&i&&typeof i=="object"){if(!this._subsetEquals(s,i))return!1;continue}return!1}return!0}updateOptions(e){if(typeof e=="undefined")return;const t=qE(e);pb._subsetEquals(this._rawOptions,t)||(this._rawOptions=Il(this._rawOptions,t||{}),this._readOptions=kd.readOptions(this._rawOptions),this._validatedOptions=kd.validateOptions(this._readOptions),this._recomputeOptions())}setIsDominatedByLongLines(e){this._isDominatedByLongLines=e,this._recomputeOptions()}setMaxLineNumber(e){const t=pb._digitCount(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}static _digitCount(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}}const YN=Object.freeze({id:"editor",order:5,type:"object",title:w("editorConfigurationTitle","Editor"),scope:5}),ZN=k.as(pt.Configuration),mb=Object.assign(Object.assign({},YN),{properties:{"editor.tabSize":{type:"number",default:Et.tabSize,minimum:1,markdownDescription:w("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:Et.insertSpaces,markdownDescription:w("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:Et.detectIndentation,markdownDescription:w("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:Et.trimAutoWhitespace,description:w("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Et.largeFileOptimizations,description:w("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:w("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[w("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),w("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),w("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:w("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[w("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),w("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),w("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:w("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:w("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:w("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:w("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:w("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:w("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:w("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:w("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[w("wordWrap.off","Lines will never wrap."),w("wordWrap.on","Lines will wrap at the viewport width."),w("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function XN(r){return typeof r.type!="undefined"||typeof r.anyOf!="undefined"}for(const r of Cn){const e=r.schema;if(typeof e!="undefined")if(XN(e))mb.properties[`editor.${r.name}`]=e;else for(let t in e)XE.call(e,t)&&(mb.properties[t]=e[t])}let vb=null;function QE(){return vb===null&&(vb=Object.create(null),Object.keys(mb.properties).forEach(r=>{vb[r]=!0})),vb}function qN(r){return QE()[`editor.${r}`]||!1}function QN(r){return QE()[`diffEditor.${r}`]||!1}ZN.registerConfiguration(mb);class JN{static insert(e,t){return{range:new Mt(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}const ca=Te("configurationService");function JE(r,e){const t=Object.create(null);for(let n in r)U1(t,n,r[n],e);return t}function U1(r,e,t,n){const i=e.split("."),s=i.pop();let o=r;for(let a=0;a<i.length;a++){let l=i[a],u=o[l];switch(typeof u){case"undefined":u=o[l]=Object.create(null);break;case"object":break;default:n(`Ignoring ${e} as ${i.slice(0,a+1).join(".")} is ${JSON.stringify(u)}`);return}o=u}if(typeof o=="object"&&o!==null)try{o[s]=t}catch(a){n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(o)}`)}else n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(o)}`)}function eT(r,e){const t=e.split(".");eL(r,t)}function eL(r,e){const t=e.shift();if(e.length===0){delete r[t];return}if(Object.keys(r).indexOf(t)!==-1){const n=r[t];typeof n=="object"&&!Array.isArray(n)&&(eL(n,e),Object.keys(n).length===0&&delete r[t])}}function tT(r,e,t){function n(o,a){let l=o;for(const u of a){if(typeof l!="object"||l===null)return;l=l[u]}return l}const i=e.split("."),s=n(r,i);return typeof s=="undefined"?t:s}function nT(){const r=k.as(pt.Configuration).getConfigurationProperties();return Object.keys(r)}function iT(){const r=Object.create(null),e=k.as(pt.Configuration).getConfigurationProperties();for(let t in e){let n=e[t].default;U1(r,t,n,i=>console.error(`Conflict in default settings: ${i}`))}return r}class Tu{constructor(e={},t=[],n=[]){this._contents=e,this._keys=t,this._overrides=n,this.isFrozen=!1}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?tT(this.contents,e):this.contents}override(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;let n={};for(const i of Av([...Object.keys(this.contents),...Object.keys(t)])){let s=this.contents[i],o=t[i];o&&(typeof s=="object"&&typeof o=="object"?(s=wu(s),this.mergeContents(s,o)):s=o),n[i]=s}return new Tu(n,this.keys,this.overrides)}merge(...e){const t=wu(this.contents),n=wu(this.overrides),i=[...this.keys];for(const s of e){this.mergeContents(t,s.contents);for(const o of s.overrides){const[a]=n.filter(l=>Tl(l.identifiers,o.identifiers));a?this.mergeContents(a.contents,o.contents):n.push(wu(o))}for(const o of s.keys)i.indexOf(o)===-1&&i.push(o)}return new Tu(t,i,n)}freeze(){return this.isFrozen=!0,this}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&oa(e[n])&&oa(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=wu(t[n])}}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?Cu(e):e}getContentsForOverrideIdentifer(e){for(const t of this.overrides)if(t.identifiers.indexOf(e)!==-1)return t.contents;return null}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),U1(this.contents,e,t,n=>{throw new Error(n)})}removeValue(e){this.removeKey(e)&&eT(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)e.indexOf(this.keys[n])===0&&(t=n);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}class rT extends Tu{constructor(){const e=iT(),t=nT(),n=[];for(const i of Object.keys(e))rr.test(i)&&n.push({identifiers:[Ks(i).trim()],keys:Object.keys(e[i]),contents:JE(e[i],s=>console.error(`Conflict in default settings file: ${s}`))});super(e,t,n)}}class _b{constructor(e,t,n=new Tu,i=new Tu,s=new go,o=new Tu,a=new go,l=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=n,this._workspaceConfiguration=i,this._folderConfigurations=s,this._memoryConfiguration=o,this._memoryConfigurationByResource=a,this._freeze=l,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new go,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidateConfigurationModel(t,n).getValue(e)}updateValue(e,t,n={}){let i;n.resource?(i=this._memoryConfigurationByResource.get(n.resource),i||(i=new Tu,this._memoryConfigurationByResource.set(n.resource,i))):i=this._memoryConfiguration,t===void 0?i.removeValue(e):i.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}getConsolidateConfigurationModel(e,t){let n=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?n.override(e.overrideIdentifier):n}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const i=t.getFolder(e);i&&(n=this.getFolderConsolidatedConfiguration(i.uri)||n);const s=this._memoryConfigurationByResource.get(e);s&&(n=n.merge(s))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),i=this._folderConfigurations.get(e);i?(t=n.merge(i),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:i,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:i,keys:s}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.user),i=this.parseConfigurationModel(e.workspace),s=e.folders.reduce((o,a)=>(o.set(ci.revive(a[0]),this.parseConfigurationModel(a[1])),o),new go);return new _b(t,n,new Tu,i,s,new Tu,new go,!1)}static parseConfigurationModel(e){return new Tu(e.contents,e.keys,e.overrides).freeze()}}class sT{constructor(e,t,n,i){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=i,this._previousConfiguration=void 0;const s=new Set;e.keys.forEach(a=>s.add(a)),e.overrides.forEach(([,a])=>a.forEach(l=>s.add(l))),this.affectedKeys=[...s.values()];const o=new Tu;this.affectedKeys.forEach(a=>o.setValue(a,{})),this.affectedKeysTree=o.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=_b.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){const i=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(n=this.previous)===null||n===void 0?void 0:n.workspace):void 0,s=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!Su(i,s)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let n=JE({[t]:!0},()=>{}),i;for(;typeof n=="object"&&(i=Object.keys(n)[0]);){if(e=e[i],!e)return!1;n=n[i]}return!0}}const oT=/^(cursor|delete)/;class aT extends Rn{constructor(e,t,n,i,s){super();this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=i,this._logService=s,this._onDidUpdateKeybindings=this._register(new $t),this._currentChord=null,this._currentChordChecker=new qa,this._currentChordStatusMessage=null,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new sa,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:ei.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(!!n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){const n=this.resolveKeyboardEvent(e);if(n.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[i]=n.getDispatchParts();if(i===null)return null;const s=this._contextKeyService.getContext(t),o=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(s,o,i)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(w("first.chord","({0}) was pressed. Waiting for second key of chord...",t));const n=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-n>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getSingleModifierDispatchParts();return i!==null&&this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${i}.`),this._currentSingleModifier=i,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):i!==null&&i===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${i} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1)}_doDispatch(e,t,n=!1){let i=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let s=null,o=null;if(n){const[h]=e.getSingleModifierDispatchParts();s=h,o=h}else[s]=e.getDispatchParts(),o=this._currentChord?this._currentChord.keypress:null;if(s===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),i;const a=this._contextKeyService.getContext(t),l=e.getLabel(),u=this._getResolver().resolve(a,o,s);return this._logService.trace("KeybindingService#dispatch",l,u==null?void 0:u.commandId),u&&u.enterChord?(i=!0,this._enterChordMode(s,l),i):(this._currentChord&&(!u||!u.commandId)&&(this._notificationService.status(w("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,l),{hideAfter:10*1e3}),i=!0),this._leaveChordMode(),u&&u.commandId&&(u.bubble||(i=!0),typeof u.commandArgs=="undefined"?this._commandService.executeCommand(u.commandId).then(void 0,h=>this._notificationService.warn(h)):this._commandService.executeCommand(u.commandId,u.commandArgs).then(void 0,h=>this._notificationService.warn(h)),oT.test(u.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:u.commandId,from:"keybinding"})),i)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class qv{constructor(e,t,n){this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let i=0,s=e.length;i<s;i++){const o=e[i].command;o&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=qv.combine(e,t);for(let i=0,s=this._keybindings.length;i<s;i++){let o=this._keybindings[i];o.keypressParts.length!==0&&(o.when&&o.when.type===0||this._addKeyPress(o.keypressParts[0],o))}}static _isTargetedForRemoval(e,t,n,i,s){return!(e.command!==i||t&&e.keypressParts[0]!==t||n&&e.keypressParts[1]!==n||s&&(!e.when||!s.equals(e.when)))}static combine(e,t){e=e.slice(0);let n=[];for(const i of t){if(!i.command||i.command.length===0||i.command.charAt(0)!=="-"){n.push(i);continue}const s=i.command.substr(1),o=i.keypressParts[0],a=i.keypressParts[1],l=i.when;for(let u=e.length-1;u>=0;u--)this._isTargetedForRemoval(e[u],o,a,s,l)&&e.splice(u,1)}return e.concat(n)}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n=="undefined"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let i=n.length-1;i>=0;i--){let s=n[i];if(s.command===t.command)continue;const o=s.keypressParts.length>1,a=t.keypressParts.length>1;o&&a&&s.keypressParts[1]!==t.keypressParts[1]||qv.whenIsEntirelyIncluded(s.when,t.when)&&this._removeFromLookupMap(s)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t=="undefined"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(typeof t!="undefined"){for(let n=0,i=t.length;n<i;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:this._implies(e,t)}static _implies(e,t){const n=e.negate(),i=o=>o.type===9?o.expr:[o];let s=i(n).concat(i(t));for(let o=0;o<s.length;o++){const l=s[o].negate();for(let u=o+1;u<s.length;u++){const h=s[u];if(l.equals(h))return!0}}return!1}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n=="undefined"||n.length===0)return null;if(n.length===1)return n[0];for(let i=n.length-1;i>=0;i--){const s=n[i];if(t.contextMatchesRules(s.when))return s}return n[n.length-1]}resolve(e,t,n){this._log(`| Resolving ${n}${t?` chorded from ${t}`:""}`);let i=null;if(t!==null){const o=this._map.get(t);if(typeof o=="undefined")return this._log("\\ No keybinding entries."),null;i=[];for(let a=0,l=o.length;a<l;a++){let u=o[a];u.keypressParts[1]===n&&i.push(u)}}else{const o=this._map.get(n);if(typeof o=="undefined")return this._log("\\ No keybinding entries."),null;i=o}let s=this._findCommand(e,i);return s?t===null&&s.keypressParts.length>1&&s.keypressParts[1]!==null?(this._log(`\\ From ${i.length} keybinding entries, matched chord, when: ${tL(s.when)}, source: ${nL(s)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${i.length} keybinding entries, matched ${s.command}, when: ${tL(s.when)}, source: ${nL(s)}.`),{enterChord:!1,leaveChord:s.keypressParts.length>1,commandId:s.command,commandArgs:s.commandArgs,bubble:s.bubble}):(this._log(`\\ From ${i.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){let i=t[n];if(!!qv.contextMatchesRules(e,i.when))return i}return null}static contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function tL(r){return r?`${r.serialize()}`:"no when condition"}function nL(r){return r.extensionId?r.isBuiltinExtension?`built-in extension ${r.extensionId}`:`user extension ${r.extensionId}`:r.isDefault?"built-in":"user"}class yb{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(ve===1){if(e&&e.win)return e.win}else if(ve===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=yb.bindToCurrentPlatform(e);if(t&&t.primary){const n=se(t.primary,ve);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,i=t.secondary.length;n<i;n++){const s=t.secondary[n],o=se(s,ve);o&&this._registerDefaultKeybinding(o,e.id,e.args,e.weight,-n-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),Rr.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&yb._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,i,s,o){ve===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:o,weight1:i,weight2:s,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(uT)),this._cachedMergedKeybindings.slice(0)}}const bb=new yb,lT={EditorModes:"platform.keybindingsRegistry"};k.add(lT.EditorModes,bb);function uT(r,e){return r.weight1!==e.weight1?r.weight1-e.weight1:r.command<e.command?-1:r.command>e.command?1:r.weight2-e.weight2}class iL{constructor(e,t,n,i,s,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?rL(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=rL(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=i,this.isDefault=s,this.extensionId=o,this.isBuiltinExtension=a}}function rL(r){let e=[];for(let t=0,n=r.length;t<n;t++){const i=r[t];if(!i)return e;e.push(i)}return e}class sL{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=n(a);if(l===null)return null;i[s]=hT(a,l,this.modifierLabels[e])}return i.join(" ")}}const oL=new sL({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:w({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:w({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:w({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:w({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:w({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:w({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:w({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:w({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),cT=new sL({ctrlKey:w({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:w({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:w({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:w({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:w({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:w({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:w({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:w({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:w({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:w({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:w({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:w({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"});function hT(r,e,t){if(e===null)return"";const n=[];return r.ctrlKey&&n.push(t.ctrlKey),r.shiftKey&&n.push(t.shiftKey),r.altKey&&n.push(t.altKey),r.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}class dT extends Nn{constructor(e,t){super();if(t.length===0)throw Jn("parts");this._os=e,this._parts=t}getLabel(){return oL.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return cT.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new gn(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}}class wb extends dT{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"\u2190";case 16:return"\u2191";case 17:return"\u2192";case 18:return"\u2193"}return Ya.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Ya.toString(e.keyCode)}_getDispatchPart(e){return wb.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Ya.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}}var VF=null;const Vc=Te("notificationService");class fT{}const gT=Te("contextService");class HF{constructor(e,t,n,i){this._id=e,this._configuration=n,this._ignorePathCasing=i,this._foldersMap=TernarySearchTree.forUris(this._ignorePathCasing),this.folders=t}get folders(){return this._folders}set folders(e){this._folders=e,this.updateFoldersMap()}get id(){return this._id}get configuration(){return this._configuration}set configuration(e){this._configuration=e}getFolder(e){return e&&this._foldersMap.findSubstr(e.with({scheme:e.scheme,authority:e.authority,path:e.path}))||null}updateFoldersMap(){this._foldersMap=TernarySearchTree.forUris(this._ignorePathCasing);for(const e of this.folders)this._foldersMap.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,configuration:this.configuration}}}class pT{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}var aL;(function(r){r.noSelection=w("noSelection","No selection"),r.singleSelectionRange=w("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),r.singleSelection=w("singleSelection","Line {0}, Column {1}"),r.multiSelectionRange=w("multiSelectionRange","{0} selections ({1} characters selected)"),r.multiSelection=w("multiSelection","{0} selections"),r.emergencyConfOn=w("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),r.openingDocs=w("openingDocs","Now opening the Editor Accessibility documentation page."),r.readonlyDiffEditor=w("readonlyDiffEditor"," in a read-only pane of a diff editor."),r.editableDiffEditor=w("editableDiffEditor"," in a pane of a diff editor."),r.readonlyEditor=w("readonlyEditor"," in a read-only code editor"),r.editableEditor=w("editableEditor"," in a code editor"),r.changeConfigToOnMac=w("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),r.changeConfigToOnWinLinux=w("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),r.auto_on=w("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),r.auto_off=w("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),r.tabFocusModeOnMsg=w("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),r.tabFocusModeOnMsgNoKb=w("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),r.tabFocusModeOffMsg=w("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),r.tabFocusModeOffMsgNoKb=w("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),r.openDocMac=w("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),r.openDocWinLinux=w("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),r.outroMsg=w("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),r.showAccessibilityHelpAction=w("showAccessibilityHelpAction","Show Accessibility Help")})(aL||(aL={}));var lL;(function(r){r.inspectTokensAction=w("inspectTokens","Developer: Inspect Tokens")})(lL||(lL={}));var uL;(function(r){r.gotoLineActionLabel=w("gotoLineActionLabel","Go to Line/Column...")})(uL||(uL={}));var cL;(function(r){r.helpQuickAccessActionLabel=w("helpQuickAccess","Show all Quick Access Providers")})(cL||(cL={}));var hL;(function(r){r.quickCommandActionLabel=w("quickCommandActionLabel","Command Palette"),r.quickCommandHelp=w("quickCommandActionHelp","Show And Run Commands")})(hL||(hL={}));var dL;(function(r){r.quickOutlineActionLabel=w("quickOutlineActionLabel","Go to Symbol..."),r.quickOutlineByCategoryActionLabel=w("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(dL||(dL={}));var Cb;(function(r){r.editorViewAccessibleLabel=w("editorViewAccessibleLabel","Editor content"),r.accessibilityHelpMessage=w("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(Cb||(Cb={}));var fL;(function(r){r.toggleHighContrast=w("toggleHighContrast","Toggle High Contrast Theme")})(fL||(fL={}));var j1;(function(r){r.bulkEditServiceSummary=w("bulkEditServiceSummary","Made {0} edits in {1} files")})(j1||(j1={}));var gL=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},pL=function(r,e){return function(t,n){e(t,n,r)}},mL=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class mT{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new $t}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}function vT(r,e,t){return Xv(r)?e(r):t(r)}let $1=class{constructor(e){this.modelService=e}setEditor(e){this.editor=e}createModelReference(e){let t=null;return this.editor&&(t=vT(this.editor,n=>this.findModel(n,e),n=>this.findModel(n.getOriginalEditor(),e)||this.findModel(n.getModifiedEditor(),e))),t?Promise.resolve(new Ss(new mT(t))):Promise.reject(new Error("Model not found"))}findModel(e,t){let n=this.modelService.getModel(t);return n&&n.uri.toString()!==t.toString()?null:n}};$1=gL([pL(0,La)],$1);class Sb{show(){return Sb.NULL_PROGRESS_RUNNER}showWhile(e,t){return mL(this,void 0,void 0,function*(){yield e})}}Sb.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class _T{confirm(e){return this.doConfirm(e).then(t=>({confirmed:t,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,n,i){return Promise.resolve({choice:0})}}class Eb{info(e){return this.notify({severity:Is.Info,message:e})}warn(e){return this.notify({severity:Is.Warning,message:e})}error(e){return this.notify({severity:Is.Error,message:e})}notify(e){switch(e.severity){case Is.Error:console.error(e.message);break;case Is.Warning:console.warn(e.message);break;default:console.log(e.message);break}return Eb.NO_OP}status(e,t){return Rn.None}}Eb.NO_OP=new fT;class yT{constructor(e){this._onWillExecuteCommand=new $t,this._onDidExecuteCommand=new $t,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=Rr.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const i=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(i)}catch(i){return Promise.reject(i)}}}class vL extends aT{constructor(e,t,n,i,s,o){super(e,t,n,i,s);this._cachedResolver=null,this._dynamicKeybindings=[],this._register(yn(o,hi.KEY_DOWN,a=>{const l=new jr(a);this._dispatch(l,l.target)&&(l.preventDefault(),l.stopPropagation())})),this._register(yn(window,hi.KEY_UP,a=>{const l=new jr(a);this._singleModifierDispatch(l,l.target)&&l.preventDefault()}))}addDynamicKeybinding(e,t,n,i){const s=se(t,ve),o=new gi;return s&&(this._dynamicKeybindings.push({keybinding:s,command:e,when:i,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),o.add(Qi(()=>{for(let a=0;a<this._dynamicKeybindings.length;a++)if(this._dynamicKeybindings[a].command===e){this._dynamicKeybindings.splice(a,1),this.updateResolver({source:1});return}}))),o.add(Rr.registerCommand(e,n)),this.updateResolver({source:1}),o}updateResolver(e){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(e)}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(bb.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new qv(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){let n=[],i=0;for(const s of e){const o=s.when||void 0,a=s.keybinding;if(!a)n[i++]=new iL(void 0,s.command,s.commandArgs,o,t,null,!1);else{const l=this.resolveKeybinding(a);for(const u of l)n[i++]=new iL(u,s.command,s.commandArgs,o,t,null,!1)}}return n}resolveKeybinding(e){return[new wb(e,ve)]}resolveKeyboardEvent(e){let t=new Je(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new wb(t,ve)}}function _L(r){return r&&typeof r=="object"&&(!r.overrideIdentifier||typeof r.overrideIdentifier=="string")&&(!r.resource||r.resource instanceof ci)}class yL{constructor(){this._onDidChangeConfiguration=new $t,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new _b(new rT,new Tu)}getValue(e,t){const n=typeof e=="string"?e:void 0,i=_L(e)?e:_L(t)?t:{};return this._configuration.getValue(n,i,void 0)}updateValues(e){const t={data:this._configuration.toData()};let n=[];for(const i of e){const[s,o]=i;this.getValue(s)!==o&&(this._configuration.updateValue(s,o),n.push(s))}if(n.length>0){const i=new sT({keys:n,overrides:[]},t,this._configuration);i.source=7,i.sourceConfig=null,this._onDidChangeConfiguration.fire(i)}return Promise.resolve()}}class bT{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new $t,this.configurationService.onDidChangeConfiguration(t=>{this._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:(n,i)=>t.affectsConfiguration(i)})})}getValue(e,t,n){const s=(dn.isIPosition(t)?t:null)?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0;return typeof s=="undefined"?this.configurationService.getValue():this.configurationService.getValue(s)}}let K1=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&n!=="auto"?n:Q||ae?`
`:`\r
`}};K1=gL([pL(0,ca)],K1);class wT{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}}class Lb{constructor(){const e=ci.from({scheme:Lb.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new pT({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}}Lb.SCHEME="inmemory";function xb(r,e,t){if(!e||!(r instanceof yL))return;let n=[];Object.keys(e).forEach(i=>{qN(i)&&n.push([`editor.${i}`,e[i]]),t&&QN(i)&&n.push([`diffEditor.${i}`,e[i]])}),n.length>0&&r.updateValues(n)}class CT{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return mL(this,void 0,void 0,function*(){const n=new Map;for(let o of e){if(!(o instanceof He))throw new Error("bad edit - only text edits are supported");const a=this._modelService.getModel(o.resource);if(!a)throw new Error("bad edit - model not found");if(typeof o.versionId=="number"&&a.getVersionId()!==o.versionId)throw new Error("bad state - model changed in the meantime");let l=n.get(a);l||(l=[],n.set(a,l)),l.push(JN.replaceMove(Mt.lift(o.textEdit.range),o.textEdit.text))}let i=0,s=0;for(const[o,a]of n)o.pushStackElement(),o.pushEditOperations([],a,()=>[]),o.pushStackElement(),s+=1,i+=a.length;return{ariaSummary:fs(j1.bulkEditServiceSummary,i,s)}})}}class ST{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}}class ET{constructor(e,t){this._codeEditorService=e,this._container=t,this.onDidLayout=ei.None}get dimension(){return this._dimension||(this._dimension=Hm(window.document.body)),this._dimension}get container(){return this._container}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}}const bL=2e4;let Yp,Db,G1,Ib,Y1;function LT(r){Yp=document.createElement("div"),Yp.className="monaco-aria-container";const e=()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),Yp.appendChild(n),n};Db=e(),G1=e();const t=()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("role","complementary"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),Yp.appendChild(n),n};Ib=t(),Y1=t(),r.appendChild(Yp)}function Z1(r){!Yp||(Db.textContent!==r?(co(G1),Nb(Db,r)):(co(Db),Nb(G1,r)))}function xT(r){!Yp||(ae?Z1(r):Ib.textContent!==r?(co(Y1),Nb(Ib,r)):(co(Ib),Nb(Y1,r)))}function Nb(r,e){co(r),e.length>bL&&(e=e.substr(0,bL)),r.textContent=e,r.style.visibility="hidden",r.style.visibility="visible"}const wL=Te("markerDecorationsService");var Tb=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class Mh extends Rn{constructor(e,t="",n="",i=!0,s){super();this._onDidChange=this._register(new $t),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._checked=!1,this._id=e,this._label=t,this._cssClass=n,this._enabled=i,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return Tb(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}class X1 extends Rn{constructor(){super(...arguments);this._onBeforeRun=this._register(new $t),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new $t),this.onDidRun=this._onDidRun.event}run(e,t){return Tb(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(i){n=i}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return Tb(this,void 0,void 0,function*(){yield e.run(t)})}}class Zp extends Mh{constructor(e){super(Zp.ID,e,e?"separator text":"separator");this.checked=!1,this.enabled=!1}}Zp.ID="vs.actions.separator";class CL{constructor(e,t,n,i){this.tooltip="",this.enabled=!0,this.checked=!1,this.id=e,this.label=t,this.class=i,this._actions=n}get actions(){return this._actions}dispose(){}run(){return Tb(this,void 0,void 0,function*(){})}}class Mb extends Mh{constructor(){super(Mb.ID,w("submenu.empty","(empty)"),void 0,!1)}}Mb.ID="vs.actions.empty";let Ob=ue||"";const Ml=new Map;Ml.set("false",!1),Ml.set("true",!0),Ml.set("isMac",ae),Ml.set("isLinux",Q),Ml.set("isWindows",pe),Ml.set("isWeb",oe),Ml.set("isMacNative",ae&&!oe),Ml.set("isEdge",Ob.indexOf("Edg/")>=0),Ml.set("isFirefox",Ob.indexOf("Firefox")>=0),Ml.set("isChrome",Ob.indexOf("Chrome")>=0),Ml.set("isSafari",Ob.indexOf("Safari")>=0);const DT=Object.prototype.hasOwnProperty;class ha{static has(e){return ug.create(e)}static equals(e,t){return X_.create(e,t)}static regex(e,t){return Bb.create(e,t)}static not(e){return Xp.create(e)}static and(...e){return Qv.create(e)}static or(...e){return qp.create(e)}static deserialize(e,t=!1){if(!!e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){let n=e.split("||");return qp.create(n.map(i=>this._deserializeAndExpression(i,t)))}static _deserializeAndExpression(e,t){let n=e.split("&&");return Qv.create(n.map(i=>this._deserializeOne(i,t)))}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf("!=")>=0){let n=e.split("!=");return kb.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("==")>=0){let n=e.split("==");return X_.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("=~")>=0){let n=e.split("=~");return Bb.create(n[0].trim(),this._deserializeRegexValue(n[1],t))}if(e.indexOf(" in ")>=0){let n=e.split(" in ");return q1.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const n=e.split(">=");return Rb.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const n=e.split(">");return Ab.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const n=e.split("<=");return Fb.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const n=e.split("<");return Pb.create(n[0].trim(),n[1].trim())}return/^\!\s*/.test(e)?Xp.create(e.substr(1).trim()):ug.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;let n=/^'([^']*)'$/.exec(e);return n?n[1].trim():e}static _deserializeRegexValue(e,t){if(Dc(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let n=e.indexOf("/"),i=e.lastIndexOf("/");if(n===i||n<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}let s=e.slice(n+1,i),o=e[i+1]==="i"?"i":"";try{return new RegExp(s,o)}catch(a){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${a}`);return console.warn(`bad regexp-value '${e}', parse error: ${a}`),null}}}function Z_(r,e){return r.cmp(e)}class Ad{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return Rd.INSTANCE}}Ad.INSTANCE=new Ad;class Rd{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Ad.INSTANCE}}Rd.INSTANCE=new Rd;class ug{constructor(e){this.key=e,this.type=2}static create(e){const t=Ml.get(e);return typeof t=="boolean"?t?Rd.INSTANCE:Ad.INSTANCE:new ug(e)}cmp(e){return e.type!==this.type?this.type-e.type:SL(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return Xp.create(this.key)}}class X_{constructor(e,t){this.key=e,this.value=t,this.type=4}static create(e,t){if(typeof t=="boolean")return t?ug.create(e):Xp.create(e);const n=Ml.get(e);return typeof n=="boolean"?t===(n?"true":"false")?Rd.INSTANCE:Ad.INSTANCE:new X_(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Qp(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return kb.create(this.key,this.value)}}class q1{constructor(e,t){this.key=e,this.valueKey=t,this.type=10}static create(e,t){return new q1(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Qp(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.indexOf(n)>=0:typeof n=="string"&&typeof t=="object"&&t!==null?DT.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return Q1.create(this)}}class Q1{constructor(e){this._actual=e,this.type=11}static create(e){return new Q1(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}class kb{constructor(e,t){this.key=e,this.value=t,this.type=5}static create(e,t){if(typeof t=="boolean")return t?Xp.create(e):ug.create(e);const n=Ml.get(e);return typeof n=="boolean"?t===(n?"true":"false")?Ad.INSTANCE:Rd.INSTANCE:new kb(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Qp(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return X_.create(this.key,this.value)}}class Xp{constructor(e){this.key=e,this.type=3}static create(e){const t=Ml.get(e);return typeof t=="boolean"?t?Ad.INSTANCE:Rd.INSTANCE:new Xp(e)}cmp(e){return e.type!==this.type?this.type-e.type:SL(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return ug.create(this.key)}}class Ab{constructor(e,t){this.key=e,this.value=t,this.type=12}static create(e,t){return new Ab(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Qp(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}evaluate(e){return parseFloat(e.getValue(this.key))>parseFloat(this.value)}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return Fb.create(this.key,this.value)}}class Rb{constructor(e,t){this.key=e,this.value=t,this.type=13}static create(e,t){return new Rb(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Qp(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}evaluate(e){return parseFloat(e.getValue(this.key))>=parseFloat(this.value)}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return Pb.create(this.key,this.value)}}class Pb{constructor(e,t){this.key=e,this.value=t,this.type=14}static create(e,t){return new Pb(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Qp(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}evaluate(e){return parseFloat(e.getValue(this.key))<parseFloat(this.value)}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return Rb.create(this.key,this.value)}}class Fb{constructor(e,t){this.key=e,this.value=t,this.type=15}static create(e,t){return new Fb(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Qp(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}evaluate(e){return parseFloat(e.getValue(this.key))<=parseFloat(this.value)}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return Ab.create(this.key,this.value)}}class Bb{constructor(e,t){this.key=e,this.regexp=t,this.type=7}static create(e,t){return new Bb(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return J1.create(this)}}class J1{constructor(e){this._actual=e,this.type=8}static create(e){return new J1(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}class Qv{constructor(e){this.expr=e,this.type=6}static create(e){return Qv._normalizeArr(e)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=Z_(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e){const t=[];let n=!1;for(const i of e)if(!!i){if(i.type===1){n=!0;continue}if(i.type===0)return Ad.INSTANCE;if(i.type===6){t.push(...i.expr);continue}t.push(i)}if(t.length===0&&n)return Rd.INSTANCE;if(t.length!==0){if(t.length===1)return t[0];for(t.sort(Z_);t.length>1;){const i=t[t.length-1];if(i.type!==9)break;t.pop();const s=t.pop(),o=qp.create(i.expr.map(a=>Qv.create([a,s])));o&&(t.push(o),t.sort(Z_))}return t.length===1?t[0]:new Qv(t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){let e=[];for(let t of this.expr)e.push(t.negate());return qp.create(e)}}class qp{constructor(e){this.expr=e,this.type=9}static create(e){const t=qp._normalizeArr(e);if(t.length!==0)return t.length===1?t[0]:new qp(t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=Z_(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e){let t=[],n=!1;if(e){for(let i=0,s=e.length;i<s;i++){const o=e[i];if(!!o){if(o.type===0){n=!0;continue}if(o.type===1)return[Rd.INSTANCE];if(o.type===9){t=t.concat(o.expr);continue}t.push(o)}}if(t.length===0&&n)return[Ad.INSTANCE];t.sort(Z_)}return t}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){let e=[];for(let n of this.expr)e.push(n.negate());const t=n=>n.type===9?n.expr:[n];for(;e.length>1;){const n=e.shift(),i=e.shift(),s=[];for(const o of t(n))for(const a of t(i))s.push(ha.and(o,a));e.unshift(ha.or(...s))}return e[0]}}class nr extends ug{constructor(e,t,n){super(e);this._defaultValue=t,typeof n=="object"?nr._info.push(Object.assign(Object.assign({},n),{key:e})):n!==!0&&nr._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}static all(){return nr._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return ha.not(this.key)}isEqualTo(e){return ha.equals(this.key,e)}}nr._info=[];const ps=Te("contextKeyService"),IT="setContext";function SL(r,e){return r<e?-1:r>e?1:0}function Qp(r,e,t,n){return r<t?-1:r>t?1:e<n?-1:e>n?1:0}var Oh;(function(r){r.DARK="dark",r.LIGHT="light",r.HIGH_CONTRAST="hc"})(Oh||(Oh={}));const Zo=Te("themeService");var eC;(function(r){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}r.isThemeColor=e})(eC||(eC={}));function q_(r){return{id:r}}var fc;(function(r){function e(a){return a&&typeof a=="object"&&typeof a.id=="string"&&(typeof a.color=="undefined"||eC.isThemeColor(a.color))}r.isThemeIcon=e;const t=new RegExp(`^\\$\\((${Ko.iconNameExpression}(?:${Ko.iconModifierExpression})?)\\)$`);function n(a){const l=t.exec(a);if(!l)return;let[,u]=l;return{id:u}}r.fromString=n;function i(a,l){let u=a.id;const h=u.lastIndexOf("~");return h!==-1&&(u=u.substring(0,h)),l&&(u=`${u}~${l}`),{id:u}}r.modify=i;function s(a,l){var u,h;return a.id===l.id&&((u=a.color)===null||u===void 0?void 0:u.id)===((h=l.color)===null||h===void 0?void 0:h.id)}r.isEqual=s;function o(a){return{id:a.id}}r.asThemeIcon=o,r.asClassNameArray=Ko.asClassNameArray,r.asClassName=Ko.asClassName,r.asCSSSelector=Ko.asCSSSelector})(fc||(fc={}));function Wb(r){switch(r){case Oh.DARK:return"vs-dark";case Oh.HIGH_CONTRAST:return"hc-black";default:return"vs"}}const EL={ThemingContribution:"base.contributions.theming"};class NT{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new $t}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Qi(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}let LL=new NT;k.add(EL.ThemingContribution,LL);function gc(r){return LL.onColorThemeChange(r)}class TT extends Rn{constructor(e){super();this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var MT=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},xL=function(r,e){return function(t,n){e(t,n,r)}};function Q_(r){return r.command!==void 0}class Jr{constructor(e){this.id=Jr._idPool++,this._debugName=e}}Jr._idPool=0,Jr.CommandPalette=new Jr("CommandPalette"),Jr.EditorContext=new Jr("EditorContext"),Jr.SimpleEditorContext=new Jr("SimpleEditorContext"),Jr.EditorContextCopy=new Jr("EditorContextCopy"),Jr.EditorContextPeek=new Jr("EditorContextPeek"),Jr.MenubarEditMenu=new Jr("MenubarEditMenu"),Jr.MenubarCopy=new Jr("MenubarCopy"),Jr.MenubarGoMenu=new Jr("MenubarGoMenu"),Jr.MenubarSelectionMenu=new Jr("MenubarSelectionMenu"),Jr.InlineCompletionsActions=new Jr("InlineCompletionsActions");const DL=Te("menuService"),J_=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new $t,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:r=>r===Jr.CommandPalette}}addCommand(r){return this.addCommands(ti.single(r))}addCommands(r){for(const e of r)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),Qi(()=>{let e=!1;for(const t of r)e=this._commands.delete(t.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(r){return this._commands.get(r)}getCommands(){const r=new Map;return this._commands.forEach((e,t)=>r.set(t,e)),r}appendMenuItem(r,e){return this.appendMenuItems(ti.single({id:r,item:e}))}appendMenuItems(r){const e=new Set,t=new Lr;for(const{id:n,item:i}of r){let s=this._menuItems.get(n);s||(s=new Lr,this._menuItems.set(n,s)),t.push(s.push(i)),e.add(n)}return this._onDidChangeMenu.fire(e),Qi(()=>{if(t.size>0){for(let n of t)n();this._onDidChangeMenu.fire(e),t.clear()}})}getMenuItems(r){let e;return this._menuItems.has(r)?e=[...this._menuItems.get(r)]:e=[],r===Jr.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(r){const e=new Set;for(const t of r)Q_(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||r.push({command:t})})}};class OT extends CL{constructor(e,t,n,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu");this.item=e,this._menuService=t,this._contextKeyService=n,this._options=i}get actions(){const e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),n=t.getActions(this._options);t.dispose();for(const[,i]of n)i.length>0&&(e.push(...i),e.push(new Zp));return e.length&&e.pop(),e}}let tC=class jN{constructor(e,t,n,i,s){var o;if(this._commandService=s,this.id=e.id,this.label=(n==null?void 0:n.renderShortTitle)&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(o=e.tooltip)!==null&&o!==void 0?o:"",this.enabled=!e.precondition||i.contextMatchesRules(e.precondition),this.checked=!1,e.toggled){const a=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=i.contextMatchesRules(a.condition),this.checked&&a.tooltip&&(this.tooltip=typeof a.tooltip=="string"?a.tooltip:a.tooltip.value),a.title&&(this.label=typeof a.title=="string"?a.title:a.title.value)}this.item=e,this.alt=t?new jN(t,void 0,n,i,s):void 0,this._options=n,fc.isThemeIcon(e.icon)&&(this.class=Ko.asClassName(e.icon))}dispose(){}run(...e){var t,n;let i=[];return((t=this._options)===null||t===void 0?void 0:t.arg)&&(i=[...i,this._options.arg]),((n=this._options)===null||n===void 0?void 0:n.shouldForwardArgs)&&(i=[...i,...e]),this._commandService.executeCommand(this.id,...i)}};tC=MT([xL(3,ps),xL(4,po)],tC);const Vb=Te("telemetryService");class Hb{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=ha.and(n,this.precondition):n=this.precondition);const i={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};bb.registerKeybindingRule(i)}}Rr.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){J_.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class nC extends Hb{constructor(){super(...arguments);this._implementations=[]}addImplementation(e,t,n){return this._implementations.push({priority:e,name:t,implementation:n}),this._implementations.sort((i,s)=>s.priority-i.priority),{dispose:()=>{for(let i=0;i<this._implementations.length;i++)if(this._implementations[i].implementation===n){this._implementations.splice(i,1);return}}}}runCommand(e,t){const n=e.get(xd);for(const i of this._implementations){const s=i.implementation(e,t);if(s)return n.trace(`Command '${this.id}' was handled by '${i.name}'.`),typeof s=="boolean"?void 0:s}}}class IL extends Hb{constructor(e,t){super(t);this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Jv extends Hb{static bindToContribution(e){return class extends Jv{constructor(n){super(n);this._callback=n.handler}runEditorCommand(n,i,s){e(i)&&this._callback(e(i),s)}}}runCommand(e,t){const n=e.get(ht),i=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(!!i)return i.invokeWithinContext(s=>{if(!!s.get(ps).contextMatchesRules(xl(this.precondition)))return this.runEditorCommand(s,i,t)})}}class zb extends Jv{constructor(e){super(zb.convertOptions(e));this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(i){return i.menuId||(i.menuId=Jr.EditorContext),i.title||(i.title=e.label),i.when=ha.and(e.precondition,i.when),i}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(Vb).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class zF extends null{constructor(){super(...arguments);this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,i)=>i[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const i of this._implementations){const s=i[1](e,t,n);if(s)return typeof s=="boolean"?void 0:s}}}function UF(r,e){CommandsRegistry.registerCommand(r,function(t,...n){const[i,s]=n;assertType(URI.isUri(i)),assertType(Position.isIPosition(s));const o=t.get(IModelService).getModel(i);if(o){const a=Position.lift(s);return e(o,a,...n.slice(2))}return t.get(ITextModelService).createModelReference(i).then(a=>new Promise((l,u)=>{try{const h=e(a.object.textEditorModel,Position.lift(s),n.slice(2));l(h)}catch(h){u(h)}}).finally(()=>{a.dispose()}))})}function jF(r,e){CommandsRegistry.registerCommand(r,function(t,...n){const[i]=n;assertType(URI.isUri(i));const s=t.get(IModelService).getModel(i);return s?e(s,...n.slice(1)):t.get(ITextModelService).createModelReference(i).then(o=>new Promise((a,l)=>{try{const u=e(o.object.textEditorModel,n.slice(1));a(u)}catch(u){l(u)}}).finally(()=>{o.dispose()}))})}function Yi(r){return Mu.INSTANCE.registerEditorCommand(r),r}function NL(r){const e=new r;return Mu.INSTANCE.registerEditorAction(e),e}function $F(r){return Mu.INSTANCE.registerEditorAction(r),r}function KF(r){Mu.INSTANCE.registerEditorAction(r)}function TL(r,e){Mu.INSTANCE.registerEditorContribution(r,e)}var e0;(function(r){function e(o){return Mu.INSTANCE.getEditorCommand(o)}r.getEditorCommand=e;function t(){return Mu.INSTANCE.getEditorActions()}r.getEditorActions=t;function n(){return Mu.INSTANCE.getEditorContributions()}r.getEditorContributions=n;function i(o){return Mu.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}r.getSomeEditorContributions=i;function s(){return Mu.INSTANCE.getDiffEditorContributions()}r.getDiffEditorContributions=s})(e0||(e0={}));const kT={EditorCommonContributions:"editor.contributions"};class Mu{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}Mu.INSTANCE=new Mu,k.add(kT.EditorCommonContributions,Mu.INSTANCE);function ey(r){return r.register(),r}const ML=ey(new nC({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2048|56},menuOpts:[{menuId:Jr.MenubarEditMenu,group:"1_do",title:w({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:Jr.CommandPalette,group:"",title:w("undo","Undo"),order:1}]}));ey(new IL(ML,{id:"default:undo",precondition:void 0}));const OL=ey(new nC({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2048|55,secondary:[2048|1024|56],mac:{primary:2048|1024|56}},menuOpts:[{menuId:Jr.MenubarEditMenu,group:"1_do",title:w({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:Jr.CommandPalette,group:"",title:w("redo","Redo"),order:1}]}));ey(new IL(OL,{id:"default:redo",precondition:void 0}));const AT=ey(new nC({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2048|31},menuOpts:[{menuId:Jr.MenubarSelectionMenu,group:"1_basic",title:w({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:Jr.CommandPalette,group:"",title:w("selectAll","Select All"),order:1}]}));var RT=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},PT=function(r,e){return function(t,n){e(t,n,r)}};let ty=class{constructor(e,t){}dispose(){}};ty.ID="editor.contrib.markerDecorations",ty=RT([PT(1,wL)],ty),TL(ty.ID,ty);class FT{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class iC{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");t.style.fontFamily=this._bareFontInfo.getMassagedFontFamily(),t.style.fontWeight=this._bareFontInfo.fontWeight,t.style.fontSize=this._bareFontInfo.fontSize+"px",t.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,t.style.lineHeight=this._bareFontInfo.lineHeight+"px",t.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",e.appendChild(t);const n=document.createElement("div");n.style.fontFamily=this._bareFontInfo.getMassagedFontFamily(),n.style.fontWeight="bold",n.style.fontSize=this._bareFontInfo.fontSize+"px",n.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,n.style.lineHeight=this._bareFontInfo.lineHeight+"px",n.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",e.appendChild(n);const i=document.createElement("div");i.style.fontFamily=this._bareFontInfo.getMassagedFontFamily(),i.style.fontWeight=this._bareFontInfo.fontWeight,i.style.fontSize=this._bareFontInfo.fontSize+"px",i.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,i.style.lineHeight=this._bareFontInfo.lineHeight+"px",i.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",i.style.fontStyle="italic",e.appendChild(i);const s=[];for(const o of this._requests){let a;o.type===0&&(a=t),o.type===2&&(a=n),o.type===1&&(a=i),a.appendChild(document.createElement("br"));const l=document.createElement("span");iC._render(l,o),a.appendChild(l),s.push(l)}this._container=e,this._testElements=s}static _render(e,t){if(t.chr===" "){let n="\xA0";for(let i=0;i<8;i++)n+=n;e.innerText=n}else{let n=t.chr;for(let i=0;i<8;i++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],i=this._testElements[e];n.fulfill(i.offsetWidth/256)}}}function BT(r,e){new iC(r,e).read()}class kL extends Rn{constructor(e,t,n){super();this.referenceDomElement=e,this.changeCallback=n,this.width=-1,this.height=-1,this.resizeObserver=null,this.measureReferenceDomElementToken=-1,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this.width}getHeight(){return this.height}startObserving(){typeof ResizeObserver!="undefined"?!this.resizeObserver&&this.referenceDomElement&&(this.resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this.resizeObserver.observe(this.referenceDomElement)):this.measureReferenceDomElementToken===-1&&(this.measureReferenceDomElementToken=setInterval(()=>this.observe(),100))}stopObserving(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.measureReferenceDomElementToken!==-1&&(clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,i=0;t?(n=t.width,i=t.height):this.referenceDomElement&&(n=this.referenceDomElement.clientWidth,i=this.referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),(this.width!==n||this.height!==i)&&(this.width=n,this.height=i,e&&this.changeCallback())}}class AL{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}function WT(){Jp.INSTANCE.clearCache()}class Jp extends Rn{constructor(){super();this._onDidChange=this._register(new $t),this.onDidChange=this._onDidChange.event,this._cache=new AL,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearCache(){this._cache=new AL,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readConfiguration(e){if(!this._cache.has(e)){let t=Jp._actualReadConfiguration(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new Ju({zoomLevel:It(),pixelRatio:Zn(),fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}static createRequest(e,t,n,i){const s=new FT(e,t);return n.push(s),i&&i.push(s),s}static _actualReadConfiguration(e){const t=[],n=[],i=this.createRequest("n",0,t,n),s=this.createRequest("\uFF4D",0,t,null),o=this.createRequest(" ",0,t,n),a=this.createRequest("0",0,t,n),l=this.createRequest("1",0,t,n),u=this.createRequest("2",0,t,n),h=this.createRequest("3",0,t,n),v=this.createRequest("4",0,t,n),N=this.createRequest("5",0,t,n),P=this.createRequest("6",0,t,n),K=this.createRequest("7",0,t,n),ee=this.createRequest("8",0,t,n),Se=this.createRequest("9",0,t,n),Le=this.createRequest("\u2192",0,t,n),ce=this.createRequest("\uFFEB",0,t,null),Ee=this.createRequest("\xB7",0,t,n),ze=this.createRequest(String.fromCharCode(11825),0,t,null);this.createRequest("|",0,t,n),this.createRequest("/",0,t,n),this.createRequest("-",0,t,n),this.createRequest("_",0,t,n),this.createRequest("i",0,t,n),this.createRequest("l",0,t,n),this.createRequest("m",0,t,n),this.createRequest("|",1,t,n),this.createRequest("_",1,t,n),this.createRequest("i",1,t,n),this.createRequest("l",1,t,n),this.createRequest("m",1,t,n),this.createRequest("n",1,t,n),this.createRequest("|",2,t,n),this.createRequest("_",2,t,n),this.createRequest("i",2,t,n),this.createRequest("l",2,t,n),this.createRequest("m",2,t,n),this.createRequest("n",2,t,n),BT(e,t);const Qe=Math.max(a.width,l.width,u.width,h.width,v.width,N.width,P.width,K.width,ee.width,Se.width);let at=e.fontFeatureSettings===Ce.OFF;const Ze=n[0].width;for(let un=1,Kt=n.length;at&&un<Kt;un++){const An=Ze-n[un].width;if(An<-.001||An>.001){at=!1;break}}let rt=!0;at&&ce.width!==Ze&&(rt=!1),ce.width>Le.width&&(rt=!1);const St=cn()>2e3;return new Ju({zoomLevel:It(),pixelRatio:Zn(),fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:at,typicalHalfwidthCharacterWidth:i.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:rt,spaceWidth:o.width,middotWidth:Ee.width,wsmiddotWidth:ze.width,maxDigitWidth:Qe},St)}}Jp.INSTANCE=new Jp;class ul extends pb{constructor(e,t,n=null,i){super(e,t);this.accessibilityService=i,this._elementSizeObserver=this._register(new kL(n,t.dimension,()=>this._recomputeOptions())),this._register(Jp.INSTANCE.onDidChange(()=>this._recomputeOptions())),this._validatedOptions.get(10)&&this._elementSizeObserver.startObserving(),this._register(rn(s=>this._recomputeOptions())),this._register(this.accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions())),this._recomputeOptions()}static applyFontInfoSlow(e,t){e.style.fontFamily=t.getMassagedFontFamily(),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px"}static applyFontInfo(e,t){e.setFontFamily(t.getMassagedFontFamily()),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)}observeReferenceElement(e){this._elementSizeObserver.observe(e)}updatePixelRatio(){this._recomputeOptions()}static _getExtraEditorClassName(){let e="";return!Oi&&!Ni&&(e+="no-user-select "),Oi&&(e+="no-minimap-shadow "),ae&&(e+="mac "),e}_getEnvConfiguration(){return{extraEditorClassName:ul._getExtraEditorClassName(),outerWidth:this._elementSizeObserver.getWidth(),outerHeight:this._elementSizeObserver.getHeight(),emptySelectionClipboard:yi||ri,pixelRatio:Zn(),zoomLevel:It(),accessibilitySupport:this.accessibilityService.isScreenReaderOptimized()?2:this.accessibilityService.getAccessibilitySupport()}}readConfiguration(e){return Jp.INSTANCE.readConfiguration(e)}}class RL{constructor(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._fontFeatureSettings="",this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+"px")}setWidth(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+"px")}setHeight(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+"px")}setTop(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+"px")}unsetTop(){this._top!==-1&&(this._top=-1,this.domNode.style.top="")}setLeft(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+"px")}setBottom(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+"px")}setRight(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+"px")}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+"px")}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setLineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+"px")}setLetterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+"px")}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function Sr(r){return new RL(r)}function Xs(r,e,t){let n=null,i=null;if(typeof t.value=="function"?(n="value",i=t.value,i.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",i=t.get),!i)throw new Error("not supported");const s=`$memoize$${e}`;t[n]=function(...o){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,o)}),this[s]}}var VT=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ms;(function(r){r.Tap="-monaco-gesturetap",r.Change="-monaco-gesturechange",r.Start="-monaco-gesturestart",r.End="-monaco-gesturesend",r.Contextmenu="-monaco-gesturecontextmenu"})(ms||(ms={}));class es extends Rn{constructor(){super();this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(yn(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(yn(document,"touchend",e=>this.onTouchEnd(e))),this._register(yn(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return es.isTouchDevice()?(es.INSTANCE||(es.INSTANCE=new es),es.INSTANCE.targets.push(e),{dispose:()=>{es.INSTANCE.targets=es.INSTANCE.targets.filter(t=>t!==e)}}):Rn.None}static ignoreTarget(e){return es.isTouchDevice()?(es.INSTANCE||(es.INSTANCE=new es),es.INSTANCE.ignoreTargets.push(e),{dispose:()=>{es.INSTANCE.ignoreTargets=es.INSTANCE.ignoreTargets.filter(t=>t!==e)}}):Rn.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,i=e.targetTouches.length;n<i;n++){let s=e.targetTouches.item(n);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:t,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[t],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};let o=this.newGestureEvent(ms.Start,s.target);o.pageX=s.pageX,o.pageY=s.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){let t=Date.now(),n=Object.keys(this.activeTouches).length;for(let i=0,s=e.changedTouches.length;i<s;i++){let o=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("move of an UNKNOWN touch",o);continue}let a=this.activeTouches[o.identifier],l=Date.now()-a.initialTimeStamp;if(l<es.HOLD_DELAY&&Math.abs(a.initialPageX-Ua(a.rollingPageX))<30&&Math.abs(a.initialPageY-Ua(a.rollingPageY))<30){let u=this.newGestureEvent(ms.Tap,a.initialTarget);u.pageX=Ua(a.rollingPageX),u.pageY=Ua(a.rollingPageY),this.dispatchEvent(u)}else if(l>=es.HOLD_DELAY&&Math.abs(a.initialPageX-Ua(a.rollingPageX))<30&&Math.abs(a.initialPageY-Ua(a.rollingPageY))<30){let u=this.newGestureEvent(ms.Contextmenu,a.initialTarget);u.pageX=Ua(a.rollingPageX),u.pageY=Ua(a.rollingPageY),this.dispatchEvent(u)}else if(n===1){let u=Ua(a.rollingPageX),h=Ua(a.rollingPageY),v=Ua(a.rollingTimestamps)-a.rollingTimestamps[0],N=u-a.rollingPageX[0],P=h-a.rollingPageY[0];const K=this.targets.filter(ee=>a.initialTarget instanceof Node&&ee.contains(a.initialTarget));this.inertia(K,t,Math.abs(N)/v,N>0?1:-1,u,Math.abs(P)/v,P>0?1:-1,h)}this.dispatchEvent(this.newGestureEvent(ms.End,a.initialTarget)),delete this.activeTouches[o.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===ms.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>es.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===ms.Change||e.type===ms.Contextmenu)&&(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,n,i,s,o,a,l){this.handle=Hl(()=>{let u=Date.now(),h=u-t,v=0,N=0,P=!0;n+=es.SCROLL_FRICTION*h,o+=es.SCROLL_FRICTION*h,n>0&&(P=!1,v=i*n*h),o>0&&(P=!1,N=a*o*h);let K=this.newGestureEvent(ms.Change);K.translationX=v,K.translationY=N,e.forEach(ee=>ee.dispatchEvent(K)),P||this.inertia(e,u,n,i,s+v,o,a,l+N)})}onTouchMove(e){let t=Date.now();for(let n=0,i=e.changedTouches.length;n<i;n++){let s=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("end of an UNKNOWN touch",s);continue}let o=this.activeTouches[s.identifier],a=this.newGestureEvent(ms.Change,o.initialTarget);a.translationX=s.pageX-Ua(o.rollingPageX),a.translationY=s.pageY-Ua(o.rollingPageY),a.pageX=s.pageX,a.pageY=s.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(s.pageX),o.rollingPageY.push(s.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}es.SCROLL_FRICTION=-.005,es.HOLD_DELAY=700,es.CLEAR_TAP_COUNT_TIME=400,VT([Xs],es,"isTouchDevice",null);function rC(r,e){let t=new ra(e);return t.preventDefault(),{leftButton:t.leftButton,buttons:t.buttons,posx:t.posx,posy:t.posy}}class Ub{constructor(){this._hooks=new gi,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(e,t,n,i,s){if(this.isMonitoring())return;this._mouseMoveEventMerger=n,this._mouseMoveCallback=i,this._onStopCallback=s;const o=qc.getSameOriginWindowChain(),a=te?"pointermove":"mousemove",l="mouseup",u=o.map(v=>v.window.document),h=Ec(e);h&&u.unshift(h);for(const v of u)this._hooks.add(Mg(v,a,N=>{if(N.buttons!==t){this.stopMonitoring(!0);return}this._mouseMoveCallback(N)},(N,P)=>this._mouseMoveEventMerger(N,P))),this._hooks.add(yn(v,l,N=>this.stopMonitoring(!0)));if(qc.hasDifferentOriginAncestor()){let v=o[o.length-1];this._hooks.add(yn(v.window.document,"mouseout",N=>{new ra(N).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(yn(v.window.document,"mouseover",N=>{new ra(N).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(yn(v.window.document.body,"mouseleave",N=>{this.stopMonitoring(!0)}))}}}class sC{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new PL(this.x-no.scrollX,this.y-no.scrollY)}}class PL{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new sC(this.clientX+no.scrollX,this.clientY+no.scrollY)}}class HT{constructor(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i,this._editorPagePositionBrand=void 0}}function FL(r){const e=vl(r);return new HT(e.left,e.top,e.width,e.height)}class em extends ra{constructor(e,t){super(e);this._editorMouseEventBrand=void 0,this.pos=new sC(this.posx,this.posy),this.editorPos=FL(t)}}class zT{constructor(e){this._editorViewDomNode=e}_create(e){return new em(e,this._editorViewDomNode)}onContextMenu(e,t){return yn(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return yn(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return yn(e,"mousedown",n=>{t(this._create(n))})}onMouseLeave(e,t){return Bm(e,n=>{t(this._create(n))})}onMouseMoveThrottled(e,t,n,i){return Mg(e,"mousemove",t,(o,a)=>n(o,this._create(a)),i)}}class UT{constructor(e){this._editorViewDomNode=e}_create(e){return new em(e,this._editorViewDomNode)}onPointerUp(e,t){return yn(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return yn(e,"pointerdown",n=>{t(this._create(n))})}onPointerLeave(e,t){return U0(e,n=>{t(this._create(n))})}onPointerMoveThrottled(e,t,n,i){return Mg(e,"pointermove",t,(o,a)=>n(o,this._create(a)),i)}}class jT extends Rn{constructor(e){super();this._editorViewDomNode=e,this._globalMouseMoveMonitor=this._register(new Ub),this._keydownListener=null}startMonitoring(e,t,n,i,s){this._keydownListener=eo(document,"keydown",a=>{a.toKeybinding().isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,a.browserEvent)},!0);const o=(a,l)=>n(a,new em(l,this._editorViewDomNode));this._globalMouseMoveMonitor.startMonitoring(e,t,o,i,a=>{this._keydownListener.dispose(),s(a)})}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}}class ny extends Rn{constructor(){super();this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,i=e.length;n<i;n++){let s=e[n];switch(s.type){case 0:this.onCompositionStart(s)&&(t=!0);break;case 1:this.onCompositionEnd(s)&&(t=!0);break;case 2:this.onConfigurationChanged(s)&&(t=!0);break;case 3:this.onCursorStateChanged(s)&&(t=!0);break;case 4:this.onDecorationsChanged(s)&&(t=!0);break;case 5:this.onFlushed(s)&&(t=!0);break;case 6:this.onFocusChanged(s)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(s)&&(t=!0);break;case 8:this.onLineMappingChanged(s)&&(t=!0);break;case 9:this.onLinesChanged(s)&&(t=!0);break;case 10:this.onLinesDeleted(s)&&(t=!0);break;case 11:this.onLinesInserted(s)&&(t=!0);break;case 12:this.onRevealRangeRequest(s)&&(t=!0);break;case 13:this.onScrollChanged(s)&&(t=!0);break;case 15:this.onTokensChanged(s)&&(t=!0);break;case 14:this.onThemeChanged(s)&&(t=!0);break;case 16:this.onTokensColorsChanged(s)&&(t=!0);break;case 17:this.onZonesChanged(s)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(s)}}t&&(this._shouldRender=!0)}}class Ou extends ny{constructor(e){super();this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class kh{static write(e,t){e instanceof RL,e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){let n=[],i=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[i++]=this.read(e)),e=e.parentElement;const s=new Uint8Array(i);for(let o=0;o<i;o++)s[o]=n[i-o-1];return s}}class $T{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class KT extends $T{constructor(e,t,n){super(e,t);this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class GT{constructor(e,t,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n}}class cg{constructor(e,t){this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class YT{constructor(e,t){this.outsideRenderedLine=e,this.left=Math.round(t)}}class ZT{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class BL{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class oC{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,i,s){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(n,i),o.getClientRects()}catch(a){return null}finally{this._detachRange(o,s)}}static _mergeAdjacentRanges(e){if(e.length===1)return[new cg(e[0].left,e[0].width)];e.sort(BL.compare);let t=[],n=0,i=e[0].left,s=e[0].width;for(let o=1,a=e.length;o<a;o++){const l=e[o],u=l.left,h=l.width;i+s+.9>=u?s=Math.max(s,u+h-i):(t[n++]=new cg(i,s),i=u,s=h)}return t[n++]=new cg(i,s),t}static _createHorizontalRangesFromClientRects(e,t){if(!e||e.length===0)return null;const n=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];n[i]=new BL(Math.max(0,o.left-t),o.width)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,n,i,s,o,a){const l=0,u=e.children.length-1;if(l>u)return null;if(t=Math.min(u,Math.max(l,t)),i=Math.min(u,Math.max(l,i)),t===i&&n===s&&n===0&&!e.children[t].firstChild){const P=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(P,o)}t!==i&&i>0&&s===0&&(i--,s=1073741824);let h=e.children[t].firstChild,v=e.children[i].firstChild;if((!h||!v)&&(!h&&n===0&&t>0&&(h=e.children[t-1].firstChild,n=1073741824),!v&&s===0&&i>0&&(v=e.children[i-1].firstChild,s=1073741824)),!h||!v)return null;n=Math.min(h.textContent.length,Math.max(0,n)),s=Math.min(v.textContent.length,Math.max(0,s));const N=this._readClientRects(h,n,v,s,a);return this._createHorizontalRangesFromClientRects(N,o)}}const XT=function(){return I?!0:!(Q||ri||Oi)}();let t0=!0;class WL{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectDeltaLeftRead=!1,this.endNode=t}get clientRectDeltaLeft(){return this._clientRectDeltaLeftRead||(this._clientRectDeltaLeftRead=!0,this._clientRectDeltaLeft=this._domNode.getBoundingClientRect().left),this._clientRectDeltaLeft}}class VL{constructor(e,t){this.themeType=t;const n=e.options,i=n.get(40);this.renderWhitespace=n.get(86),this.renderControlCharacters=n.get(80),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.useMonospaceOptimizations=i.isMonospace&&!n.get(27),this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(56),this.stopRenderingLineAfter=n.get(103),this.fontLigatures=n.get(41)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class Ah{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=Sr(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return this._options.themeType===Oh.HIGH_CONTRAST||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,i){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const s=n.getViewLineRenderingData(e),o=this._options,a=al.filter(s.inlineDecorations,e,s.minColumn,s.maxColumn);let l=null;if(o.themeType===Oh.HIGH_CONTRAST||this._options.renderWhitespace==="selection"){const N=n.selections;for(const P of N){if(P.endLineNumber<e||P.startLineNumber>e)continue;const K=P.startLineNumber===e?P.startColumn:s.minColumn,ee=P.endLineNumber===e?P.endColumn:s.maxColumn;K<ee&&(o.themeType===Oh.HIGH_CONTRAST||this._options.renderWhitespace!=="selection"?a.push(new al(K,ee,"inline-selected-text",0)):(l||(l=[]),l.push(new B_(K-1,ee-1))))}}const u=new Dh(o.useMonospaceOptimizations,o.canUseHalfwidthRightwardsArrow,s.content,s.continuesWithWrappedLine,s.isBasicASCII,s.containsRTL,s.minColumn-1,s.tokens,a,s.tabSize,s.startVisibleColumn,o.spaceWidth,o.middotWidth,o.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==Ce.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(u))return!1;i.appendASCIIString('<div style="top:'),i.appendASCIIString(String(t)),i.appendASCIIString("px;height:"),i.appendASCIIString(String(this._options.lineHeight)),i.appendASCIIString('px;" class="'),i.appendASCIIString(Ah.CLASS_NAME),i.appendASCIIString('">');const h=Vp(u,i);i.appendASCIIString("</div>");let v=null;return t0&&XT&&s.isBasicASCII&&o.useMonospaceOptimizations&&h.containsForeignElements===0&&s.content.length<300&&u.lineTokens.getCount()<100&&(v=new jb(this._renderedViewLine?this._renderedViewLine.domNode:null,u,h.characterMapping)),v||(v=zL(this._renderedViewLine?this._renderedViewLine.domNode:null,u,h.characterMapping,h.containsRTL,h.containsForeignElements)),this._renderedViewLine=v,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof jb:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof jb?this._renderedViewLine.monospaceAssumptionsAreValid():t0}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof jb&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n){if(!this._renderedViewLine)return null;e=e|0,t=t|0,e=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,e)),t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t));const i=this._renderedViewLine.input.stopRenderingLineAfter|0;let s=!1;i!==-1&&e>i+1&&t>i+1&&(s=!0),i!==-1&&e>i+1&&(e=i+1),i!==-1&&t>i+1&&(t=i+1);const o=this._renderedViewLine.getVisibleRangesForRange(e,t,n);return o&&o.length>0?new ZT(s,o):null}getColumnOfNodeOffset(e,t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,n):1}}Ah.CLASS_NAME="view-line";class jb{constructor(e,t,n){this.domNode=e,this.input=t,this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(){return this._getCharPosition(this._characterMapping.length)}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return t0;const e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),t0=!1),t0}toSlowRenderedLine(){return zL(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n){const i=this._getCharPosition(e),s=this._getCharPosition(t);return[new cg(i,s-i)]}_getCharPosition(e){const t=this._characterMapping.getAbsoluteOffset(e);return Math.round(this._charWidth*t)}getColumnOfNodeOffset(e,t,n){const i=t.textContent.length;let s=-1;for(;t;)t=t.previousSibling,s++;return this._characterMapping.getColumn(new Bp(s,n),i)}}class HL{constructor(e,t,n,i,s){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=s,this._cachedWidth=-1,this._pixelOffsetCache=null,!i||this._characterMapping.length===0){this._pixelOffsetCache=new Int32Array(Math.max(2,this._characterMapping.length+1));for(let o=0,a=this._characterMapping.length;o<=a;o++)this._pixelOffsetCache[o]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const i=this._readPixelOffset(this.domNode,e,n);if(i===-1)return null;const s=this._readPixelOffset(this.domNode,t,n);return s===-1?null:[new cg(i,s-i)]}return this._readVisibleRangesForRange(this.domNode,e,t,n)}_readVisibleRangesForRange(e,t,n,i){if(t===n){const s=this._readPixelOffset(e,t,i);return s===-1?null:[new cg(s,0)]}else return this._readRawVisibleRangesForRange(e,t,n,i)}_readPixelOffset(e,t,n){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();const i=this._getReadingTarget(e);return i.firstChild?i.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){const i=this._pixelOffsetCache[t];if(i!==-1)return i;const s=this._actualReadPixelOffset(e,t,n);return this._pixelOffsetCache[t]=s,s}return this._actualReadPixelOffset(e,t,n)}_actualReadPixelOffset(e,t,n){if(this._characterMapping.length===0){const a=oC.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,n.clientRectDeltaLeft,n.endNode);return!a||a.length===0?-1:a[0].left}if(t===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();const i=this._characterMapping.getDomPosition(t),s=oC.readHorizontalRanges(this._getReadingTarget(e),i.partIndex,i.charIndex,i.partIndex,i.charIndex,n.clientRectDeltaLeft,n.endNode);if(!s||s.length===0)return-1;const o=s[0].left;if(this.input.isBasicASCII){const a=this._characterMapping.getAbsoluteOffset(t),l=Math.round(this.input.spaceWidth*a);if(Math.abs(l-o)<=1)return l}return o}_readRawVisibleRangesForRange(e,t,n,i){if(t===1&&n===this._characterMapping.length)return[new cg(0,this.getWidth())];const s=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(n);return oC.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,o.partIndex,o.charIndex,i.clientRectDeltaLeft,i.endNode)}getColumnOfNodeOffset(e,t,n){const i=t.textContent.length;let s=-1;for(;t;)t=t.previousSibling,s++;return this._characterMapping.getColumn(new Bp(s,n),i)}}class qT extends HL{_readVisibleRangesForRange(e,t,n,i){const s=super._readVisibleRangesForRange(e,t,n,i);if(!s||s.length===0||t===n||t===1&&n===this._characterMapping.length)return s;if(!this.input.containsRTL){const o=this._readPixelOffset(e,n,i);if(o!==-1){const a=s[s.length-1];a.left<o&&(a.width=o-a.left)}}return s}}const zL=function(){return yi?QT:JT}();function QT(r,e,t,n,i){return new qT(r,e,t,n,i)}function JT(r,e,t,n,i){return new HL(r,e,t,n,i)}function $b(r){return r.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class Xo{constructor(e,t,n,i){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=i}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${$b(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${$b(this.oldText)}")`:`(replace@${this.oldPosition} "${$b(this.oldText)}" with "${$b(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const i=t.length;tl(e,i,n),n+=4;for(let s=0;s<i;s++)ro(e,t.charCodeAt(s),n),n+=2;return n}static _readString(e,t){const n=Us(e,t);return t+=4,Wa(e,t,n)}writeSize(){return 4+4+Xo._writeStringSize(this.oldText)+Xo._writeStringSize(this.newText)}write(e,t){return tl(e,this.oldPosition,t),t+=4,tl(e,this.newPosition,t),t+=4,t=Xo._writeString(e,this.oldText,t),t=Xo._writeString(e,this.newText,t),t}static read(e,t,n){const i=Us(e,t);t+=4;const s=Us(e,t);t+=4;const o=Xo._readString(e,t);t+=Xo._writeStringSize(o);const a=Xo._readString(e,t);return t+=Xo._writeStringSize(a),n.push(new Xo(i,o,s,a)),t}}function e2(r,e){return r===null||r.length===0?e:new Rh(r,e).compress()}class Rh{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(i),i=this._getCurr(++t);continue}if(i===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){const[u,h]=Rh._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(u),i=h;continue}if(n.newPosition<i.oldPosition){const[u,h]=Rh._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(u),n=h;continue}let a,l;if(i.oldEnd===n.newEnd)a=n,l=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){const[u,h]=Rh._splitPrev(n,i.oldLength);a=u,l=i,n=h,i=this._getCurr(++t)}else{const[u,h]=Rh._splitCurr(i,n.newLength);a=n,l=u,n=this._getPrev(++e),i=h}this._result[this._resultLen++]=new Xo(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const s=Rh._merge(this._result);return Rh._removeNoOps(s)}_acceptCurr(e){this._result[this._resultLen++]=Rh._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Rh._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Xo(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Xo(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),i=e.newText.substr(t);return[new Xo(e.oldPosition,e.oldText,e.newPosition,n),new Xo(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new Xo(e.oldPosition,n,e.newPosition,e.newText),new Xo(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],n=0,i=e[0];for(let s=1;s<e.length;s++){const o=e[s];i.oldEnd===o.oldPosition?i=new Xo(i.oldPosition,i.oldText+o.oldText,i.newPosition,i.newText+o.newText):(t[n++]=i,i=o)}return t[n++]=i,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let i=0;i<e.length;i++){const s=e[i];s.oldText!==s.newText&&(t[n++]=s)}return t}}function n0(r){return r.toString()}class Co{constructor(e,t,n,i,s,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=i,this.beforeCursorState=s,this.afterCursorState=o,this.changes=a}static create(e,t){const n=e.getAlternativeVersionId(),i=aC(e);return new Co(n,n,i,i,t,t,[])}append(e,t,n,i,s){t.length>0&&(this.changes=e2(this.changes,t)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(tl(e,t?t.length:0,n),n+=4,t)for(const i of t)tl(e,i.selectionStartLineNumber,n),n+=4,tl(e,i.selectionStartColumn,n),n+=4,tl(e,i.positionLineNumber,n),n+=4,tl(e,i.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const i=Us(e,t);t+=4;for(let s=0;s<i;s++){const o=Us(e,t);t+=4;const a=Us(e,t);t+=4;const l=Us(e,t);t+=4;const u=Us(e,t);t+=4,n.push(new oi(o,a,l,u))}return t}serialize(){let e=4+4+1+1+Co._writeSelectionsSize(this.beforeCursorState)+Co._writeSelectionsSize(this.afterCursorState)+4;for(const i of this.changes)e+=i.writeSize();const t=new Uint8Array(e);let n=0;tl(t,this.beforeVersionId,n),n+=4,tl(t,this.afterVersionId,n),n+=4,lh(t,this.beforeEOL,n),n+=1,lh(t,this.afterEOL,n),n+=1,n=Co._writeSelections(t,this.beforeCursorState,n),n=Co._writeSelections(t,this.afterCursorState,n),tl(t,this.changes.length,n),n+=4;for(const i of this.changes)n=i.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const i=Us(t,n);n+=4;const s=Us(t,n);n+=4;const o=$m(t,n);n+=1;const a=$m(t,n);n+=1;const l=[];n=Co._readSelections(t,n,l);const u=[];n=Co._readSelections(t,n,u);const h=Us(t,n);n+=4;const v=[];for(let N=0;N<h;N++)n=Xo.read(t,n,v);return new Co(i,s,o,a,l,u,v)}}class UL{constructor(e,t){this.model=e,this._data=Co.create(e,t)}get type(){return 0}get resource(){return ci.isUri(this.model)?this.model:this.model.uri}get label(){return w("edit","Typing")}toString(){return(this._data instanceof Co?this._data:Co.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(ci.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Co}append(e,t,n,i,s){this._data instanceof Co&&this._data.append(e,t,n,i,s)}close(){this._data instanceof Co&&(this._data=this._data.serialize())}open(){this._data instanceof Co||(this._data=Co.deserialize(this._data))}undo(){if(ci.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Co&&(this._data=this._data.serialize());const e=Co.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(ci.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Co&&(this._data=this._data.serialize());const e=Co.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Co&&(this._data=this._data.serialize()),this._data.byteLength+168}}class t2{constructor(e,t){this.type=1,this.label=e,this._isOpen=!0,this._editStackElementsArr=t.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const i=n0(n.resource);this._editStackElementsMap.set(i,n)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=n0(e);return this._editStackElementsMap.has(t)}setModel(e){const t=n0(ci.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=n0(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,i,s){const o=n0(e.uri);this._editStackElementsMap.get(o).append(e,t,n,i,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=n0(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(const t of this._editStackElementsArr)e.push(`${ud(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function aC(r){return r.getEOL()===`
`?0:1}function Pd(r){return r?r instanceof UL||r instanceof t2:!1}class lC{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Pd(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Pd(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(Pd(t)&&t.canAppend(this._model))return t;const n=new UL(this._model,e);return this._undoRedoService.pushElement(n),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],aC(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n){const i=this._getOrCreateEditStackElement(e),s=this._model.applyEdits(t,!0),o=lC._computeCursorState(n,s),a=s.map((l,u)=>({index:u,textChange:l.textChange}));return a.sort((l,u)=>l.textChange.oldPosition===u.textChange.oldPosition?l.index-u.index:l.textChange.oldPosition-u.textChange.oldPosition),i.append(this._model,a.map(l=>l.textChange),aC(this._model),this._model.getAlternativeVersionId(),o),o}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return En(n),null}}}class n2{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function i2(r,e,t,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let s;for(s=0;s<e&&s<n;s++){let N=r.charCodeAt(s),P=t.charCodeAt(s);if(N!==P)break}let o=0,a=0;for(let N=s;N<e;N++)r.charCodeAt(N)===32?o++:a++;let l=0,u=0;for(let N=s;N<n;N++)t.charCodeAt(N)===32?l++:u++;if(o>0&&a>0||l>0&&u>0)return;let h=Math.abs(a-u),v=Math.abs(o-l);if(h===0){i.spacesDiff=v,v>0&&0<=l-1&&l-1<r.length&&l<t.length&&t.charCodeAt(l)!==32&&r.charCodeAt(l-1)===32&&r.charCodeAt(r.length-1)===44&&(i.looksLikeAlignment=!0);return}if(v%h==0){i.spacesDiff=v/h;return}}function jL(r,e,t){const n=Math.min(r.getLineCount(),1e4);let i=0,s=0,o="",a=0;const l=[2,4,6,8,3,5,7],u=8;let h=[0,0,0,0,0,0,0,0,0],v=new n2;for(let K=1;K<=n;K++){let ee=r.getLineLength(K),Se=r.getLineContent(K);const Le=ee<=65536;let ce=!1,Ee=0,ze=0,Qe=0;for(let Ze=0,rt=ee;Ze<rt;Ze++){let St=Le?Se.charCodeAt(Ze):r.getLineCharCode(K,Ze);if(St===9)Qe++;else if(St===32)ze++;else{ce=!0,Ee=Ze;break}}if(!ce||(Qe>0?i++:ze>1&&s++,i2(o,a,Se,Ee,v),v.looksLikeAlignment&&!(t&&e===v.spacesDiff)))continue;let at=v.spacesDiff;at<=u&&h[at]++,o=Se,a=Ee}let N=t;i!==s&&(N=i<s);let P=e;if(N){let K=N?0:.1*n;l.forEach(ee=>{let Se=h[ee];Se>K&&(K=Se,P=ee)}),P===4&&h[4]>0&&h[2]>0&&h[2]>=h[4]/2&&(P=2)}return{insertSpaces:N,tabSize:P}}function cl(r){return(r.metadata&1)>>>0}function Qr(r,e){r.metadata=r.metadata&254|e<<0}function qo(r){return(r.metadata&2)>>>1==1}function Yr(r,e){r.metadata=r.metadata&253|(e?1:0)<<1}function $L(r){return(r.metadata&4)>>>2==1}function KL(r,e){r.metadata=r.metadata&251|(e?1:0)<<2}function r2(r){return(r.metadata&24)>>>3}function GL(r,e){r.metadata=r.metadata&231|e<<3}function s2(r){return(r.metadata&32)>>>5==1}function YL(r,e){r.metadata=r.metadata&223|(e?1:0)<<5}class ZL{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,Qr(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,KL(this,!1),GL(this,1),YL(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,Yr(this,!1)}reset(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i}setOptions(e){this.options=e;let t=this.options.className;KL(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),GL(this,this.options.stickiness),YL(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const qi=new ZL(null,0,0);qi.parent=qi,qi.left=qi,qi.right=qi,Qr(qi,0);class uC{constructor(){this.root=qi,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,i,s){return this.root===qi?[]:f2(this,e,t,n,i,s)}search(e,t,n){return this.root===qi?[]:d2(this,e,t,n)}collectNodesFromOwner(e){return c2(this,e)}collectNodesPostOrder(){return h2(this)}insert(e){XL(this,e),this._normalizeDeltaIfNecessary()}delete(e){qL(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let i=0;for(;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;const s=n.start+i,o=n.end+i;n.setCachedOffsets(s,o,t)}acceptReplace(e,t,n,i){const s=l2(this,e,e+t);for(let o=0,a=s.length;o<a;o++){const l=s[o];qL(this,l)}this._normalizeDeltaIfNecessary(),u2(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let o=0,a=s.length;o<a;o++){const l=s[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,a2(l,e,e+t,n,i),l.maxEnd=l.end,XL(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){!this.requestNormalizeDelta||(this.requestNormalizeDelta=!1,o2(this))}}function o2(r){let e=r.root,t=0;for(;e!==qi;){if(e.left!==qi&&!qo(e.left)){e=e.left;continue}if(e.right!==qi&&!qo(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,hg(e),Yr(e,!0),Yr(e.left,!1),Yr(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Yr(r.root,!1)}function i0(r,e,t,n){return r<t?!0:r>t||n===1?!1:n===2?!0:e}function a2(r,e,t,n,i){const s=r2(r),o=s===0||s===2,a=s===1||s===2,l=t-e,u=n,h=Math.min(l,u),v=r.start;let N=!1;const P=r.end;let K=!1;e<=v&&P<=t&&s2(r)&&(r.start=e,N=!0,r.end=e,K=!0);{const Se=i?1:l>0?2:0;!N&&i0(v,o,e,Se)&&(N=!0),!K&&i0(P,a,e,Se)&&(K=!0)}if(h>0&&!i){const Se=l>u?2:0;!N&&i0(v,o,e+h,Se)&&(N=!0),!K&&i0(P,a,e+h,Se)&&(K=!0)}{const Se=i?1:0;!N&&i0(v,o,t,Se)&&(r.start=e+u,N=!0),!K&&i0(P,a,t,Se)&&(r.end=e+u,K=!0)}const ee=u-l;N||(r.start=Math.max(0,v+ee)),K||(r.end=Math.max(0,P+ee)),r.start>r.end&&(r.end=r.start)}function l2(r,e,t){let n=r.root,i=0,s=0,o=0,a=0,l=[],u=0;for(;n!==qi;){if(qo(n)){Yr(n.left,!1),Yr(n.right,!1),n===n.parent.right&&(i-=n.parent.delta),n=n.parent;continue}if(!qo(n.left)){if(s=i+n.maxEnd,s<e){Yr(n,!0);continue}if(n.left!==qi){n=n.left;continue}}if(o=i+n.start,o>t){Yr(n,!0);continue}if(a=i+n.end,a>=e&&(n.setCachedOffsets(o,a,0),l[u++]=n),Yr(n,!0),n.right!==qi&&!qo(n.right)){i+=n.delta,n=n.right;continue}}return Yr(r.root,!1),l}function u2(r,e,t,n){let i=r.root,s=0,o=0,a=0;const l=n-(t-e);for(;i!==qi;){if(qo(i)){Yr(i.left,!1),Yr(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),hg(i),i=i.parent;continue}if(!qo(i.left)){if(o=s+i.maxEnd,o<e){Yr(i,!0);continue}if(i.left!==qi){i=i.left;continue}}if(a=s+i.start,a>t){i.start+=l,i.end+=l,i.delta+=l,(i.delta<-1073741824||i.delta>1073741824)&&(r.requestNormalizeDelta=!0),Yr(i,!0);continue}if(Yr(i,!0),i.right!==qi&&!qo(i.right)){s+=i.delta,i=i.right;continue}}Yr(r.root,!1)}function c2(r,e){let t=r.root,n=[],i=0;for(;t!==qi;){if(qo(t)){Yr(t.left,!1),Yr(t.right,!1),t=t.parent;continue}if(t.left!==qi&&!qo(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[i++]=t),Yr(t,!0),t.right!==qi&&!qo(t.right)){t=t.right;continue}}return Yr(r.root,!1),n}function h2(r){let e=r.root,t=[],n=0;for(;e!==qi;){if(qo(e)){Yr(e.left,!1),Yr(e.right,!1),e=e.parent;continue}if(e.left!==qi&&!qo(e.left)){e=e.left;continue}if(e.right!==qi&&!qo(e.right)){e=e.right;continue}t[n++]=e,Yr(e,!0)}return Yr(r.root,!1),t}function d2(r,e,t,n){let i=r.root,s=0,o=0,a=0,l=[],u=0;for(;i!==qi;){if(qo(i)){Yr(i.left,!1),Yr(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),i=i.parent;continue}if(i.left!==qi&&!qo(i.left)){i=i.left;continue}o=s+i.start,a=s+i.end,i.setCachedOffsets(o,a,n);let h=!0;if(e&&i.ownerId&&i.ownerId!==e&&(h=!1),t&&$L(i)&&(h=!1),h&&(l[u++]=i),Yr(i,!0),i.right!==qi&&!qo(i.right)){s+=i.delta,i=i.right;continue}}return Yr(r.root,!1),l}function f2(r,e,t,n,i,s){let o=r.root,a=0,l=0,u=0,h=0,v=[],N=0;for(;o!==qi;){if(qo(o)){Yr(o.left,!1),Yr(o.right,!1),o===o.parent.right&&(a-=o.parent.delta),o=o.parent;continue}if(!qo(o.left)){if(l=a+o.maxEnd,l<e){Yr(o,!0);continue}if(o.left!==qi){o=o.left;continue}}if(u=a+o.start,u>t){Yr(o,!0);continue}if(h=a+o.end,h>=e){o.setCachedOffsets(u,h,s);let P=!0;n&&o.ownerId&&o.ownerId!==n&&(P=!1),i&&$L(o)&&(P=!1),P&&(v[N++]=o)}if(Yr(o,!0),o.right!==qi&&!qo(o.right)){a+=o.delta,o=o.right;continue}}return Yr(r.root,!1),v}function XL(r,e){if(r.root===qi)return e.parent=qi,e.left=qi,e.right=qi,Qr(e,0),r.root=e,r.root;g2(r,e),dg(e.parent);let t=e;for(;t!==r.root&&cl(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;cl(n)===1?(Qr(t.parent,0),Qr(n,0),Qr(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,iy(r,t)),Qr(t.parent,0),Qr(t.parent.parent,1),ry(r,t.parent.parent))}else{const n=t.parent.parent.left;cl(n)===1?(Qr(t.parent,0),Qr(n,0),Qr(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,ry(r,t)),Qr(t.parent,0),Qr(t.parent.parent,1),iy(r,t.parent.parent))}return Qr(r.root,0),e}function g2(r,e){let t=0,n=r.root;const i=e.start,s=e.end;for(;;)if(m2(i,s,n.start+t,n.end+t)<0)if(n.left===qi){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===qi){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=qi,e.right=qi,Qr(e,1)}function qL(r,e){let t,n;if(e.left===qi?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===qi?(t=e.left,n=e):(n=p2(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(r.requestNormalizeDelta=!0)),n===r.root){r.root=t,Qr(t,0),e.detach(),cC(),hg(t),r.root.parent=qi;return}let i=cl(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,Qr(n,cl(e)),e===r.root?r.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==qi&&(n.left.parent=n),n.right!==qi&&(n.right.parent=n)),e.detach(),i){dg(t.parent),n!==e&&(dg(n),dg(n.parent)),cC();return}dg(t),dg(t.parent),n!==e&&(dg(n),dg(n.parent));let s;for(;t!==r.root&&cl(t)===0;)t===t.parent.left?(s=t.parent.right,cl(s)===1&&(Qr(s,0),Qr(t.parent,1),iy(r,t.parent),s=t.parent.right),cl(s.left)===0&&cl(s.right)===0?(Qr(s,1),t=t.parent):(cl(s.right)===0&&(Qr(s.left,0),Qr(s,1),ry(r,s),s=t.parent.right),Qr(s,cl(t.parent)),Qr(t.parent,0),Qr(s.right,0),iy(r,t.parent),t=r.root)):(s=t.parent.left,cl(s)===1&&(Qr(s,0),Qr(t.parent,1),ry(r,t.parent),s=t.parent.left),cl(s.left)===0&&cl(s.right)===0?(Qr(s,1),t=t.parent):(cl(s.left)===0&&(Qr(s.right,0),Qr(s,1),iy(r,s),s=t.parent.left),Qr(s,cl(t.parent)),Qr(t.parent,0),Qr(s.left,0),ry(r,t.parent),t=r.root));Qr(t,0),cC()}function p2(r){for(;r.left!==qi;)r=r.left;return r}function cC(){qi.parent=qi,qi.delta=0,qi.start=0,qi.end=0}function iy(r,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==qi&&(t.left.parent=e),t.parent=e.parent,e.parent===qi?r.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,hg(e),hg(t)}function ry(r,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(r.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==qi&&(t.right.parent=e),t.parent=e.parent,e.parent===qi?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,hg(e),hg(t)}function QL(r){let e=r.end;if(r.left!==qi){const t=r.left.maxEnd;t>e&&(e=t)}if(r.right!==qi){const t=r.right.maxEnd+r.delta;t>e&&(e=t)}return e}function hg(r){r.maxEnd=QL(r)}function dg(r){for(;r!==qi;){const e=QL(r);if(r.maxEnd===e)return;r.maxEnd=e,r=r.parent}}function m2(r,e,t,n){return r===t?e-n:r-t}class hC{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Pi)return dC(this.right);let e=this;for(;e.parent!==Pi&&e.parent.left!==e;)e=e.parent;return e.parent===Pi?Pi:e.parent}prev(){if(this.left!==Pi)return JL(this.left);let e=this;for(;e.parent!==Pi&&e.parent.right!==e;)e=e.parent;return e.parent===Pi?Pi:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const Pi=new hC(null,0);Pi.parent=Pi,Pi.left=Pi,Pi.right=Pi,Pi.color=0;function dC(r){for(;r.left!==Pi;)r=r.left;return r}function JL(r){for(;r.right!==Pi;)r=r.right;return r}function fC(r){return r===Pi?0:r.size_left+r.piece.length+fC(r.right)}function gC(r){return r===Pi?0:r.lf_left+r.piece.lineFeedCnt+gC(r.right)}function pC(){Pi.parent=Pi}function sy(r,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Pi&&(t.left.parent=e),t.parent=e.parent,e.parent===Pi?r.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function oy(r,e){let t=e.left;e.left=t.right,t.right!==Pi&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Pi?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function Kb(r,e){let t,n;if(e.left===Pi?(n=e,t=n.right):e.right===Pi?(n=e,t=n.left):(n=dC(e.right),t=n.right),n===r.root){r.root=t,t.color=0,e.detach(),pC(),r.root.parent=Pi;return}let i=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,ay(r,t)):(n.parent===e?t.parent=n:t.parent=n.parent,ay(r,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===r.root?r.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Pi&&(n.left.parent=n),n.right!==Pi&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,ay(r,n)),e.detach(),t.parent.left===t){let o=fC(t),a=gC(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){let l=o-t.parent.size_left,u=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,Fd(r,t.parent,l,u)}}if(ay(r,t.parent),i){pC();return}let s;for(;t!==r.root&&t.color===0;)t===t.parent.left?(s=t.parent.right,s.color===1&&(s.color=0,t.parent.color=1,sy(r,t.parent),s=t.parent.right),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.right.color===0&&(s.left.color=0,s.color=1,oy(r,s),s=t.parent.right),s.color=t.parent.color,t.parent.color=0,s.right.color=0,sy(r,t.parent),t=r.root)):(s=t.parent.left,s.color===1&&(s.color=0,t.parent.color=1,oy(r,t.parent),s=t.parent.left),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.left.color===0&&(s.right.color=0,s.color=1,sy(r,s),s=t.parent.left),s.color=t.parent.color,t.parent.color=0,s.left.color=0,oy(r,t.parent),t=r.root));t.color=0,pC()}function ex(r,e){for(ay(r,e);e!==r.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,sy(r,e)),e.parent.color=0,e.parent.parent.color=1,oy(r,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,oy(r,e)),e.parent.color=0,e.parent.parent.color=1,sy(r,e.parent.parent))}r.root.color=0}function Fd(r,e,t,n){for(;e!==r.root&&e!==Pi;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function ay(r,e){let t=0,n=0;if(e!==r.root){if(t===0){for(;e!==r.root&&e===e.parent.right;)e=e.parent;if(e===r.root)return;e=e.parent,t=fC(e.left)-e.size_left,n=gC(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n}for(;e!==r.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}class v2 extends tu{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}function _2(r){let e={};return t=>(e.hasOwnProperty(t)||(e[t]=r(t)),e[t])}const r0=_2(r=>new v2(r)),b2=999;class s0{constructor(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=w2(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=zg(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch(i){return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new C2(t,this.wordSeparators?r0(this.wordSeparators):null,n?this.searchString:null)}}function w2(r){if(!r||r.length===0)return!1;for(let e=0,t=r.length;e<t;e++)if(r.charCodeAt(e)===92){if(e++,e>=t)break;const i=r.charCodeAt(e);if(i===110||i===114||i===87||i===119)return!0}return!1}class C2{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}function tm(r,e,t){if(!t)return new $o(r,null);let n=[];for(let i=0,s=e.length;i<s;i++)n[i]=e[i];return new $o(r,n)}class tx{constructor(e){let t=[],n=0;for(let i=0,s=e.length;i<s;i++)e.charCodeAt(i)===10&&(t[n++]=i);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,i=t.length-1;if(i===-1||e<=t[0])return 0;for(;n<i;){const s=n+((i-n)/2>>0);t[s]>=e?i=s-1:t[s+1]>=e?(n=s,i=s):n=s+1}return n+1}}class Gb{static findMatches(e,t,n,i,s){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,n,new ly(o.wordSeparators,o.regex),i,s):this._doFindMatchesLineByLine(e,n,o,i,s):[]}static _getMultilineMatchRange(e,t,n,i,s,o){let a,l=0;i?(l=i.findLineFeedCountBeforeOffset(s),a=t+s+l):a=t+s;let u;if(i){let P=i.findLineFeedCountBeforeOffset(s+o.length)-l;u=a+o.length+P}else u=a+o.length;const h=e.getPositionAt(a),v=e.getPositionAt(u);return new Mt(h.lineNumber,h.column,v.lineNumber,v.column)}static _doFindMatchesMultiline(e,t,n,i,s){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new tx(a):null,u=[];let h=0,v;for(n.reset(0);v=n.next(a);)if(u[h++]=tm(this._getMultilineMatchRange(e,o,a,l,v.index,v[0]),v,i),h>=s)return u;return u}static _doFindMatchesLineByLine(e,t,n,i,s){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const u=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,u,t.startLineNumber,t.startColumn-1,a,o,i,s),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,o,i,s);for(let u=t.startLineNumber+1;u<t.endLineNumber&&a<s;u++)a=this._findMatchesInLine(n,e.getLineContent(u),u,0,a,o,i,s);if(a<s){const u=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,u,t.endLineNumber,0,a,o,i,s)}return o}static _findMatchesInLine(e,t,n,i,s,o,a,l){const u=e.wordSeparators;if(!a&&e.simpleSearch){const N=e.simpleSearch,P=N.length,K=t.length;let ee=-P;for(;(ee=t.indexOf(N,ee+P))!==-1;)if((!u||mC(u,t,K,ee,P))&&(o[s++]=new $o(new Mt(n,ee+1+i,n,ee+1+P+i),null),s>=l))return s;return s}const h=new ly(e.wordSeparators,e.regex);let v;h.reset(0);do if(v=h.next(t),v&&(o[s++]=tm(new Mt(n,v.index+1+i,n,v.index+1+v[0].length+i),v,a),s>=l))return s;while(v);return s}static findNextMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const o=new ly(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,n,o,i):this._doFindNextMatchLineByLine(e,n,o,i)}static _doFindNextMatchMultiline(e,t,n,i){const s=new dn(t.lineNumber,1),o=e.getOffsetAt(s),a=e.getLineCount(),l=e.getValueInRange(new Mt(s.lineNumber,s.column,a,e.getLineMaxColumn(a)),1),u=e.getEOL()===`\r
`?new tx(l):null;n.reset(t.column-1);let h=n.next(l);return h?tm(this._getMultilineMatchRange(e,o,l,u,h.index,h[0]),h,i):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new dn(1,1),n,i):null}static _doFindNextMatchLineByLine(e,t,n,i){const s=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(n,a,o,t.column,i);if(l)return l;for(let u=1;u<=s;u++){const h=(o+u-1)%s,v=e.getLineContent(h+1),N=this._findFirstMatchInLine(n,v,h+1,1,i);if(N)return N}return null}static _findFirstMatchInLine(e,t,n,i,s){e.reset(i-1);const o=e.next(t);return o?tm(new Mt(n,o.index+1,n,o.index+1+o[0].length),o,s):null}static findPreviousMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const o=new ly(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,n,o,i):this._doFindPreviousMatchLineByLine(e,n,o,i)}static _doFindPreviousMatchMultiline(e,t,n,i){const s=this._doFindMatchesMultiline(e,new Mt(1,1,t.lineNumber,t.column),n,i,10*b2);if(s.length>0)return s[s.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new dn(o,e.getLineMaxColumn(o)),n,i):null}static _doFindPreviousMatchLineByLine(e,t,n,i){const s=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,o,i);if(l)return l;for(let u=1;u<=s;u++){const h=(s+o-u-1)%s,v=e.getLineContent(h+1),N=this._findLastMatchInLine(n,v,h+1,i);if(N)return N}return null}static _findLastMatchInLine(e,t,n,i){let s=null,o;for(e.reset(0);o=e.next(t);)s=tm(new Mt(n,o.index+1,n,o.index+1+o[0].length),o,i);return s}}function S2(r,e,t,n,i){if(n===0)return!0;const s=e.charCodeAt(n-1);if(r.get(s)!==0||s===13||s===10)return!0;if(i>0){const o=e.charCodeAt(n);if(r.get(o)!==0)return!0}return!1}function E2(r,e,t,n,i){if(n+i===t)return!0;const s=e.charCodeAt(n+i);if(r.get(s)!==0||s===13||s===10)return!0;if(i>0){const o=e.charCodeAt(n+i-1);if(r.get(o)!==0)return!0}return!1}function mC(r,e,t,n,i){return S2(r,e,t,n,i)&&E2(r,e,t,n,i)}class ly{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const i=n.index,s=n[0].length;if(i===this._prevMatchStartIndex&&s===this._prevMatchLength){if(s===0){wl(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=s,!this._wordSeparators||mC(this._wordSeparators,e,t,i,s))return n}while(n);return null}}const Bd=65535;function nx(r){let e;return r[r.length-1]<65536?e=new Uint16Array(r.length):e=new Uint32Array(r.length),e.set(r,0),e}class L2{constructor(e,t,n,i,s){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=i,this.isBasicASCII=s}}function Wd(r,e=!0){let t=[0],n=1;for(let i=0,s=r.length;i<s;i++){const o=r.charCodeAt(i);o===13?i+1<s&&r.charCodeAt(i+1)===10?(t[n++]=i+2,i++):t[n++]=i+1:o===10&&(t[n++]=i+1)}return e?nx(t):t}function D2(r,e){r.length=0,r[0]=0;let t=1,n=0,i=0,s=0,o=!0;for(let l=0,u=e.length;l<u;l++){const h=e.charCodeAt(l);h===13?l+1<u&&e.charCodeAt(l+1)===10?(s++,r[t++]=l+2,l++):(n++,r[t++]=l+1):h===10?(i++,r[t++]=l+1):o&&h!==9&&(h<32||h>126)&&(o=!1)}const a=new L2(nx(r),n,i,s,o);return r.length=0,a}class Ol{constructor(e,t,n,i,s){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=s}}class nm{constructor(e,t){this.buffer=e,this.lineStarts=t}}class I2{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Pi&&e.iterate(e.root,n=>(n!==Pi&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class N2{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let i=0;i<n.length;i++){let s=n[i];if(s.node.parent===null||s.nodeStartOffset>=e){n[i]=null,t=!0;continue}}if(t){let i=[];for(const s of n)s!==null&&i.push(s);this._cache=i}}}class T2{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new nm("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Pi,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let i=null;for(let s=0,o=e.length;s<o;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=Wd(e[s].buffer));let a=new Ol(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),i=this.rbInsertRight(i,a)}this._searchCache=new N2(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=Bd,n=t-Math.floor(t/3),i=n*2,s="",o=0,a=[];if(this.iterate(this.root,l=>{let u=this.getNodeContent(l),h=u.length;if(o<=n||o+h<i)return s+=u,o+=h,!0;let v=s.replace(/\r\n|\r|\n/g,e);return a.push(new nm(v,Wd(v))),s=u,o=h,!0}),o>0){let l=s.replace(/\r\n|\r|\n/g,e);a.push(new nm(l,Wd(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new I2(this,e)}getOffsetAt(e,t){let n=0,i=this.root;for(;i!==Pi;)if(i.left!==Pi&&i.lf_left+1>=e)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt+1>=e)return n+=i.size_left,n+=this.getAccumulatedValue(i,e-i.lf_left-2)+t-1;e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,i=e;for(;t!==Pi;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let s=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+s.index,s.index===0){let o=this.getOffsetAt(n+1,1),a=i-o;return new dn(n+1,a+1)}return new dn(n+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===Pi){let s=this.getOffsetAt(n+1,1),o=i-e-s;return new dn(n+1,o+1)}else t=t.right;return new dn(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(n,i);return t?t!==this._EOL||!this._EOLNormalized?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,u=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(u+e.remainder,u+t.remainder)}let n=e.node,i=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),o=i.substring(s+e.remainder,s+n.piece.length);for(n=n.next();n!==Pi;){let a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,n.piece.length);n=n.next()}return o}getLinesContent(){let e=[],t=0,n="",i=!1;return this.iterate(this.root,s=>{if(s===Pi)return!0;const o=s.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,u=this._buffers[o.bufferIndex].lineStarts,h=o.start.line,v=o.end.line;let N=u[h]+o.start.column;if(i&&(l.charCodeAt(N)===10&&(N++,a--),e[t++]=n,n="",i=!1,a===0))return!0;if(h===v)return!this._EOLNormalized&&l.charCodeAt(N+a-1)===13?(i=!0,n+=l.substr(N,a-1)):n+=l.substr(N,a),!0;n+=this._EOLNormalized?l.substring(N,Math.max(N,u[h+1]-this._EOLLength)):l.substring(N,u[h+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let P=h+1;P<v;P++)n=this._EOLNormalized?l.substring(u[P],u[P+1]-this._EOLLength):l.substring(u[P],u[P+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(u[v]+o.end.column-1)===13?(i=!0,o.end.column===0?t--:n=l.substr(u[v],o.end.column-1)):n=l.substr(u[v],o.end.column),!0}),i&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}else{let t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,i,s,o,a,l,u,h,v){let N=this._buffers[e.piece.bufferIndex],P=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),K=this.offsetInBuffer(e.piece.bufferIndex,s),ee=this.offsetInBuffer(e.piece.bufferIndex,o),Se,Le={line:0,column:0},ce,Ee;t._wordSeparators?(ce=N.buffer.substring(K,ee),Ee=ze=>ze+K,t.reset(0)):(ce=N.buffer,Ee=ze=>ze,t.reset(K));do if(Se=t.next(ce),Se){if(Ee(Se.index)>=ee)return h;this.positionInBuffer(e,Ee(Se.index)-P,Le);let ze=this.getLineFeedCnt(e.piece.bufferIndex,s,Le),Qe=Le.line===s.line?Le.column-s.column+i:Le.column+1,at=Qe+Se[0].length;if(v[h++]=tm(new Mt(n+ze,Qe,n+ze,at),Se,l),Ee(Se.index)+Se[0].length>=ee||h>=u)return h}while(Se);return h}findMatchesLineByLine(e,t,n,i){const s=[];let o=0;const a=new ly(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];let u=this.nodeAt2(e.endLineNumber,e.endColumn);if(u===null)return[];let h=this.positionInBuffer(l.node,l.remainder),v=this.positionInBuffer(u.node,u.remainder);if(l.node===u.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,h,v,t,n,i,o,s),s;let N=e.startLineNumber,P=l.node;for(;P!==u.node;){let ee=this.getLineFeedCnt(P.piece.bufferIndex,h,P.piece.end);if(ee>=1){let Le=this._buffers[P.piece.bufferIndex].lineStarts,ce=this.offsetInBuffer(P.piece.bufferIndex,P.piece.start),Ee=Le[h.line+ee],ze=N===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(P,a,N,ze,h,this.positionInBuffer(P,Ee-ce),t,n,i,o,s),o>=i)return s;N+=ee}let Se=N===e.startLineNumber?e.startColumn-1:0;if(N===e.endLineNumber){const Le=this.getLineContent(N).substring(Se,e.endColumn-1);return o=this._findMatchesInLine(t,a,Le,e.endLineNumber,Se,o,s,n,i),s}if(o=this._findMatchesInLine(t,a,this.getLineContent(N).substr(Se),N,Se,o,s,n,i),o>=i)return s;N++,l=this.nodeAt2(N,1),P=l.node,h=this.positionInBuffer(l.node,l.remainder)}if(N===e.endLineNumber){let ee=N===e.startLineNumber?e.startColumn-1:0;const Se=this.getLineContent(N).substring(ee,e.endColumn-1);return o=this._findMatchesInLine(t,a,Se,e.endLineNumber,ee,o,s,n,i),s}let K=N===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(u.node,a,N,K,h,v,t,n,i,o,s),s}_findMatchesInLine(e,t,n,i,s,o,a,l,u){const h=e.wordSeparators;if(!l&&e.simpleSearch){const N=e.simpleSearch,P=N.length,K=n.length;let ee=-P;for(;(ee=n.indexOf(N,ee+P))!==-1;)if((!h||mC(h,n,K,ee,P))&&(a[o++]=new $o(new Mt(i,ee+1+s,i,ee+1+P+s),null),o>=u))return o;return o}let v;t.reset(0);do if(v=t.next(n),v&&(a[o++]=tm(new Mt(i,v.index+1+s,i,v.index+1+v[0].length+s),v,l),o>=u))return o;while(v);return o}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Pi){let{node:i,remainder:s,nodeStartOffset:o}=this.nodeAt(e),a=i.piece,l=a.bufferIndex,u=this.positionInBuffer(i,s);if(i.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<Bd){this.appendToNode(i,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(o+i.piece.length>e){let h=[],v=new Ol(a.bufferIndex,u,a.end,this.getLineFeedCnt(a.bufferIndex,u,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,u));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(i,s)===10){let ee={line:v.start.line+1,column:0};v=new Ol(v.bufferIndex,ee,v.end,this.getLineFeedCnt(v.bufferIndex,ee,v.end),v.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(i,s-1)===13){let ee=this.positionInBuffer(i,s-1);this.deleteNodeTail(i,ee),t="\r"+t,i.piece.length===0&&h.push(i)}else this.deleteNodeTail(i,u);else this.deleteNodeTail(i,u);let N=this.createNewPieces(t);v.length>0&&this.rbInsertRight(i,v);let P=i;for(let K=0;K<N.length;K++)P=this.rbInsertRight(P,N[K]);this.deleteNodes(h)}else this.insertContentToNodeRight(t,i)}else{let i=this.createNewPieces(t),s=this.rbInsertLeft(null,i[0]);for(let o=1;o<i.length;o++)s=this.rbInsertRight(s,i[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Pi)return;let n=this.nodeAt(e),i=this.nodeAt(e+t),s=n.node,o=i.node;if(s===o){let N=this.positionInBuffer(s,n.remainder),P=this.positionInBuffer(s,i.remainder);if(n.nodeStartOffset===e){if(t===s.piece.length){let K=s.next();Kb(this,s),this.validateCRLFWithPrevNode(K),this.computeBufferMetadata();return}this.deleteNodeHead(s,P),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),this.computeBufferMetadata();return}if(n.nodeStartOffset+s.piece.length===e+t){this.deleteNodeTail(s,N),this.validateCRLFWithNextNode(s),this.computeBufferMetadata();return}this.shrinkNode(s,N,P),this.computeBufferMetadata();return}let a=[],l=this.positionInBuffer(s,n.remainder);this.deleteNodeTail(s,l),this._searchCache.validate(e),s.piece.length===0&&a.push(s);let u=this.positionInBuffer(o,i.remainder);this.deleteNodeHead(o,u),o.piece.length===0&&a.push(o);let h=s.next();for(let N=h;N!==Pi&&N!==o;N=N.next())a.push(N);let v=s.piece.length===0?s.prev():s;this.deleteNodes(a),this.validateCRLFWithNextNode(v),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let o=t.piece,a={line:o.start.line+1,column:0},l=new Ol(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,Fd(this,t,-1,-1),t.piece.length===0&&n.push(t)}let i=this.createNewPieces(e),s=this.rbInsertLeft(t,i[i.length-1]);for(let o=i.length-2;o>=0;o--)s=this.rbInsertLeft(s,i[o]);this.validateCRLFWithPrevNode(s),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]),s=i;for(let o=1;o<n.length;o++)s=this.rbInsertRight(s,n[o]);this.validateCRLFWithPrevNode(i)}positionInBuffer(e,t,n){let i=e.piece,s=e.piece.bufferIndex,o=this._buffers[s].lineStarts,l=o[i.start.line]+i.start.column+t,u=i.start.line,h=i.end.line,v=0,N=0,P=0;for(;u<=h&&(v=u+(h-u)/2|0,P=o[v],v!==h);)if(N=o[v+1],l<P)h=v-1;else if(l>=N)u=v+1;else break;return n?(n.line=v,n.column=l-P,null):{line:v,column:l-P}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;let s=i[n.line+1],o=i[n.line]+n.column;if(s>o+1)return n.line-t.line;let a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)Kb(this,e[t])}createNewPieces(e){if(e.length>Bd){let h=[];for(;e.length>Bd;){const N=e.charCodeAt(Bd-1);let P;N===13||N>=55296&&N<=56319?(P=e.substring(0,Bd-1),e=e.substring(Bd-1)):(P=e.substring(0,Bd),e=e.substring(Bd));let K=Wd(P);h.push(new Ol(this._buffers.length,{line:0,column:0},{line:K.length-1,column:P.length-K[K.length-1]},K.length-1,P.length)),this._buffers.push(new nm(P,K))}let v=Wd(e);return h.push(new Ol(this._buffers.length,{line:0,column:0},{line:v.length-1,column:e.length-v[v.length-1]},v.length-1,e.length)),this._buffers.push(new nm(e,v)),h}let t=this._buffers[0].buffer.length;const n=Wd(e,!1);let i=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},i=this._lastChangeBufferPos;for(let h=0;h<n.length;h++)n[h]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let h=0;h<n.length;h++)n[h]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length;let o=this._buffers[0].lineStarts.length-1,a=s-this._buffers[0].lineStarts[o],l={line:o,column:a},u=new Ol(0,i,l,this.getLineFeedCnt(0,i,l),s-t);return this._lastChangeBufferPos=l,[u]}getLineRawContent(e,t=0){let n=this.root,i="",s=this._searchCache.get2(e);if(s){n=s.node;let o=this.getAccumulatedValue(n,e-s.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(s.nodeStartLineNumber+n.piece.lineFeedCnt===e)i=a.substring(l+o,l+n.piece.length);else{let u=this.getAccumulatedValue(n,e-s.nodeStartLineNumber);return a.substring(l+o,l+u-t)}}else{let o=0;const a=e;for(;n!==Pi;)if(n.left!==Pi&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),u=this.getAccumulatedValue(n,e-n.lf_left-1),h=this._buffers[n.piece.bufferIndex].buffer,v=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return o+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-n.lf_left)}),h.substring(v+l,v+u-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),u=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=u.substring(h+l,h+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,o+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==Pi;){let o=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=o.substring(l,l+a-t),i}else{let a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=o.substr(a,n.piece.length)}n=n.next()}return i}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==Pi;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,i=this.positionInBuffer(e,t),s=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let o=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(o!==s)return{index:o,remainder:0}}return{index:s,remainder:i.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,s=n.start.line+t+1;return s>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[s]-i[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,i=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.end),o=t,a=this.offsetInBuffer(n.bufferIndex,o),l=this.getLineFeedCnt(n.bufferIndex,n.start,o),u=l-i,h=a-s,v=n.length+h;e.piece=new Ol(n.bufferIndex,n.start,o,l,v),Fd(this,e,h,u)}deleteNodeHead(e,t){const n=e.piece,i=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.start),o=t,a=this.getLineFeedCnt(n.bufferIndex,o,n.end),l=this.offsetInBuffer(n.bufferIndex,o),u=a-i,h=s-l,v=n.length+h;e.piece=new Ol(n.bufferIndex,o,n.end,a,v),Fd(this,e,h,u)}shrinkNode(e,t,n){const i=e.piece,s=i.start,o=i.end,a=i.length,l=i.lineFeedCnt,u=t,h=this.getLineFeedCnt(i.bufferIndex,i.start,u),v=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,s);e.piece=new Ol(i.bufferIndex,i.start,u,h,v),Fd(this,e,v-a,h-l);let N=new Ol(i.bufferIndex,n,o,this.getLineFeedCnt(i.bufferIndex,n,o),this.offsetInBuffer(i.bufferIndex,o)-this.offsetInBuffer(i.bufferIndex,n)),P=this.rbInsertRight(e,N);this.validateCRLFWithPrevNode(P)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=Wd(t,!1);for(let P=0;P<s.length;P++)s[P]+=i;if(n){let P=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-P}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},u=e.piece.length+t.length,h=e.piece.lineFeedCnt,v=this.getLineFeedCnt(0,e.piece.start,l),N=v-h;e.piece=new Ol(e.piece.bufferIndex,e.piece.start,l,v,u),this._lastChangeBufferPos=l,Fd(this,e,t.length,N)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let i=0;for(;t!==Pi;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;let s={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(s),s}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,i=0;for(;n!==Pi;)if(n.left!==Pi&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let s=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(s+t-1,o),nodeStartOffset:i}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let s=this.getAccumulatedValue(n,e-n.lf_left-2);if(s+t-1<=n.piece.length)return{node:n,remainder:s+t-1,nodeStartOffset:i};t-=n.piece.length-s;break}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==Pi;){if(n.piece.lineFeedCnt>0){let s=this.getAccumulatedValue(n,0),o=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,s),nodeStartOffset:o}}else if(n.piece.length>=t-1){let s=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:s}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Pi||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,s=n[i]+t.start.column;return i===n.length-1||n[i+1]>s+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(s)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Pi||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],i=this._buffers[e.piece.bufferIndex].lineStarts,s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Ol(e.piece.bufferIndex,e.piece.start,s,a,o),Fd(this,e,-1,-1),e.piece.length===0&&n.push(e);let l={line:t.piece.start.line+1,column:0};const u=t.piece.length-1,h=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Ol(t.piece.bufferIndex,l,t.piece.end,h,u),Fd(this,t,-1,-1),t.piece.length===0&&n.push(t);let v=this.createNewPieces(`\r
`);this.rbInsertRight(e,v[0]);for(let N=0;N<n.length;N++)Kb(this,n[N])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)Kb(this,n);else{const i=n.piece,s={line:i.start.line+1,column:0},o=i.length-1,a=this.getLineFeedCnt(i.bufferIndex,s,i.end);n.piece=new Ol(i.bufferIndex,s,i.end,a,o),Fd(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Pi)return t(Pi);let n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Pi)return"";let t=this._buffers[e.piece.bufferIndex],n,i=e.piece,s=this.offsetInBuffer(i.bufferIndex,i.start),o=this.offsetInBuffer(i.bufferIndex,i.end);return n=t.buffer.substring(s,o),n}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,i)}rbInsertRight(e,t){let n=new hC(t,1);if(n.left=Pi,n.right=Pi,n.parent=Pi,n.size_left=0,n.lf_left=0,this.root===Pi)this.root=n,n.color=0;else if(e.right===Pi)e.right=n,n.parent=e;else{let s=dC(e.right);s.left=n,n.parent=s}return ex(this,n),n}rbInsertLeft(e,t){let n=new hC(t,1);if(n.left=Pi,n.right=Pi,n.parent=Pi,n.size_left=0,n.lf_left=0,this.root===Pi)this.root=n,n.color=0;else if(e.left===Pi)e.left=n,n.parent=e;else{let i=JL(e.left);i.right=n,n.parent=i}return ex(this,n),n}}function o0(r){let e=0,t=0,n=0,i=0;for(let s=0,o=r.length;s<o;s++){const a=r.charCodeAt(s);a===13?(e===0&&(t=s),e++,s+1<o&&r.charCodeAt(s+1)===10?(i|=2,s++):i|=3,n=s+1):a===10&&(i|=1,e===0&&(t=s),e++,n=s+1)}return e===0&&(t=r.length),[e,t,r.length-n,i]}function ix(r){return(r<<0|0<<8|0<<11|1<<14|2<<23)>>>0}const Vd=new Uint32Array(0).buffer;class vC{constructor(){this.tokens=[]}add(e,t){if(this.tokens.length>0){const n=this.tokens[this.tokens.length-1];if(n.startLineNumber+n.tokens.length-1+1===e){n.tokens.push(t);return}}this.tokens.push(new M2(e,[t]))}}class Yb{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),i=this._getEndCharacter(e-1);return new Mt(0,t+1,n,i+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const i=t+Math.floor((n-t)/2),s=this._getDeltaLine(i);if(s<e)t=i+1;else if(s>e)n=i-1;else{let o=i;for(;o>t&&this._getDeltaLine(o-1)===e;)o--;let a=i;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new rx(this._tokens.subarray(4*o,4*a+4))}}return this._getDeltaLine(t)===e?new rx(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,i){const s=this._tokens,o=this._tokenCount;let a=0,l=!1,u=0;for(let h=0;h<o;h++){const v=4*h,N=s[v],P=s[v+1],K=s[v+2],ee=s[v+3];if((N>e||N===e&&K>=t)&&(N<n||N===n&&P<=i))l=!0;else{if(a===0&&(u=N),l){const Se=4*a;s[Se]=N-u,s[Se+1]=P,s[Se+2]=K,s[Se+3]=ee}a++}}return this._tokenCount=a,u}split(e,t,n,i){const s=this._tokens,o=this._tokenCount;let a=[],l=[],u=a,h=0,v=0;for(let N=0;N<o;N++){const P=4*N,K=s[P],ee=s[P+1],Se=s[P+2],Le=s[P+3];if(K>e||K===e&&Se>=t){if(K<n||K===n&&ee<=i)continue;u!==l&&(u=l,h=0,v=K)}u[h++]=K-v,u[h++]=ee,u[h++]=Se,u[h++]=Le}return[new Yb(new Uint32Array(a)),new Yb(new Uint32Array(l)),v]}acceptDeleteRange(e,t,n,i,s){const o=this._tokens,a=this._tokenCount,l=i-t;let u=0,h=!1;for(let v=0;v<a;v++){const N=4*v;let P=o[N],K=o[N+1],ee=o[N+2];const Se=o[N+3];if(P<t||P===t&&ee<=n){u++;continue}else if(P===t&&K<n)P===i&&ee>s?ee-=s-n:ee=n;else if(P===t&&K===n)if(P===i&&ee>s)ee-=s-n;else{h=!0;continue}else if(P<i||P===i&&K<s)if(P===i&&ee>s)P===t?(K=n,ee=K+(ee-s)):(K=0,ee=K+(ee-s));else{h=!0;continue}else if(P>i){if(l===0&&!h){u=a;break}P-=l}else if(P===i&&K>=s)e&&P===0&&(K+=e,ee+=e),P-=l,K-=s-n,ee-=s-n;else throw new Error("Not possible!");const Le=4*u;o[Le]=P,o[Le+1]=K,o[Le+2]=ee,o[Le+3]=Se,u++}this._tokenCount=u}acceptInsertText(e,t,n,i,s,o){const a=n===0&&i===1&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),l=this._tokens,u=this._tokenCount;for(let h=0;h<u;h++){const v=4*h;let N=l[v],P=l[v+1],K=l[v+2];if(!(N<e||N===e&&K<t)){if(N===e&&K===t)if(a)K+=1;else continue;else if(N===e&&P<t&&t<K)n===0?K+=i:K=t;else{if(N===e&&P===t&&a)continue;if(N===e)if(N+=n,n===0)P+=i,K+=i;else{const ee=K-P;P=s+(P-t),K=P+ee}else N+=n}l[v]=N,l[v+1]=P,l[v+2]=K}}}}class rx{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}class Zb{constructor(e,t){this.startLineNumber=e,this.tokens=t,this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}toString(){return this.tokens.toString(this.startLineNumber)}_updateEndLineNumber(){this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}isEmpty(){return this.tokens.isEmpty()}getLineTokens(e){return this.startLineNumber<=e&&e<=this.endLineNumber?this.tokens.getLineTokens(e-this.startLineNumber):null}getRange(){const e=this.tokens.getRange();return e&&new Mt(this.startLineNumber+e.startLineNumber,e.startColumn,this.startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;this.startLineNumber+=this.tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber,[i,s,o]=this.tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new Zb(this.startLineNumber,i),new Zb(this.startLineNumber+o,s)]}applyEdit(e,t){const[n,i,s]=o0(t);this.acceptEdit(e,n,i,s,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,i,s){this._acceptDeleteRange(e),this._acceptInsertText(new dn(e.startLineNumber,e.startColumn),t,n,i,s),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;if(n<0){const s=n-t;this.startLineNumber-=s;return}const i=this.tokens.getMaxDeltaLine();if(!(t>=i+1)){if(t<0&&n>=i+1){this.startLineNumber=0,this.tokens.clear();return}if(t<0){const s=-t;this.startLineNumber-=s,this.tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this.tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,i,s){if(t===0&&n===0)return;const o=e.lineNumber-this.startLineNumber;if(o<0){this.startLineNumber+=t;return}const a=this.tokens.getMaxDeltaLine();o>=a+1||this.tokens.acceptInsertText(o,e.column-1,t,n,i,s)}}class M2{constructor(e,t){this.startLineNumber=e,this.tokens=t}}function Hd(r){return r instanceof Uint32Array?r:new Uint32Array(r)}class _C{constructor(){this._pieces=[],this._isComplete=!1}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const s=t[0].getRange(),o=t[t.length-1].getRange();if(!s||!o)return e;n=e.plusRange(s).plusRange(o)}let i=null;for(let s=0,o=this._pieces.length;s<o;s++){const a=this._pieces[s];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:s};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(s,1),s--,o--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:s};continue}const[l,u]=a.split(n);if(l.isEmpty()){i=i||{index:s};continue}u.isEmpty()||(this._pieces.splice(s,1,l,u),s++,o++,i=i||{index:s})}return i=i||{index:this._pieces.length},t.length>0&&(this._pieces=Ld(this._pieces,i.index,t)),n}isComplete(){return this._isComplete}addSemanticTokens(e,t){const n=this._pieces;if(n.length===0)return t;const i=_C._findFirstPieceWithLine(n,e),s=n[i].getLineTokens(e);if(!s)return t;const o=t.getCount(),a=s.getCount();let l=0,u=[],h=0,v=0;const N=(P,K)=>{P!==v&&(v=P,u[h++]=P,u[h++]=K)};for(let P=0;P<a;P++){const K=s.getStartCharacter(P),ee=s.getEndCharacter(P),Se=s.getMetadata(P),Le=((Se&1?2048:0)|(Se&2?4096:0)|(Se&4?8192:0)|(Se&8?8372224:0)|(Se&16?4286578688:0))>>>0,ce=~Le>>>0;for(;l<o&&t.getEndOffset(l)<=K;)N(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<K&&N(K,t.getMetadata(l));l<o&&t.getEndOffset(l)<ee;)N(t.getEndOffset(l),t.getMetadata(l)&ce|Se&Le),l++;if(l<o)N(ee,t.getMetadata(l)&ce|Se&Le),t.getEndOffset(l)===ee&&l++;else{const Ee=Math.min(Math.max(0,l-1),o-1);N(ee,t.getMetadata(Ee)&ce|Se&Le)}}for(;l<o;)N(t.getEndOffset(l),t.getMetadata(l)),l++;return new yo(new Uint32Array(u),t.getLineContent())}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;for(;n<i;){let s=n+Math.floor((i-n)/2);if(e[s].endLineNumber<t)n=s+1;else if(e[s].startLineNumber>t)i=s-1;else{for(;s>n&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}}return n}acceptEdit(e,t,n,i,s){for(const o of this._pieces)o.acceptEdit(e,t,n,i,s)}}class ku{constructor(){this._lineTokens=[],this._len=0}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),i!==null&&i!==Vd)return new yo(Hd(i),n);let s=new Uint32Array(2);return s[0]=n.length,s[1]=ix(e),new yo(s,n)}static _massageTokens(e,t,n){const i=n?Hd(n):null;if(t===0){let s=!1;if(i&&i.length>1&&(s=sl.getLanguageId(i[1])!==e),!s)return Vd}if(!i||i.length===0){const s=new Uint32Array(2);return s[0]=t,s[1]=ix(e),s.buffer}return i[i.length-2]=t,i.byteOffset===0&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=Ld(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,s){const o=ku._massageTokens(e,n,i);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,s?!ku._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=Hd(e),i=Hd(t);if(n.length!==i.length)return!1;for(let s=0,o=n.length;s<o;s++)if(n[s]!==i[s])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new dn(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=ku._delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=ku._deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let i=null;n<this._len&&(i=ku._deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=ku._append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const i=e.lineNumber-1;if(!(i>=this._len)){if(t===0){this._lineTokens[i]=ku._insert(this._lineTokens[i],e.column-1,n);return}this._lineTokens[i]=ku._deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=ku._insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}static _deleteBeginning(e,t){return e===null||e===Vd?e:ku._delete(e,0,t)}static _deleteEnding(e,t){if(e===null||e===Vd)return e;const n=Hd(e),i=n[n.length-2];return ku._delete(e,t,i)}static _delete(e,t,n){if(e===null||e===Vd||t===n)return e;const i=Hd(e),s=i.length>>>1;if(t===0&&i[i.length-2]===n)return Vd;const o=yo.findIndexInTokensArray(i,t),a=o>0?i[o-1<<1]:0,l=i[o<<1];if(n<l){const P=n-t;for(let K=o;K<s;K++)i[K<<1]-=P;return e}let u,h;a!==t?(i[o<<1]=t,u=o+1<<1,h=t):(u=o<<1,h=a);const v=n-t;for(let P=o+1;P<s;P++){const K=i[P<<1]-v;K>h&&(i[u++]=K,i[u++]=i[(P<<1)+1],h=K)}if(u===i.length)return e;let N=new Uint32Array(u);return N.set(i.subarray(0,u),0),N.buffer}static _append(e,t){if(t===Vd)return e;if(e===Vd)return t;if(e===null)return e;if(t===null)return null;const n=Hd(e),i=Hd(t),s=i.length>>>1;let o=new Uint32Array(n.length+i.length);o.set(n,0);let a=n.length;const l=n[n.length-2];for(let u=0;u<s;u++)o[a++]=i[u<<1]+l,o[a++]=i[(u<<1)+1];return o.buffer}static _insert(e,t,n){if(e===null||e===Vd)return e;const i=Hd(e),s=i.length>>>1;let o=yo.findIndexInTokensArray(i,t);o>0&&i[o-1<<1]===t&&o--;for(let a=o;a<s;a++)i[a<<1]+=n;return e}}class a0 extends Rn{constructor(e,t,n,i,s,o,a){super();this._onDidChangeContent=this._register(new $t),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=i,this._mightContainUnusualLineTerminators=s,this._pieceTree=new T2(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t;const i=this.getPositionAt(e),s=this.getPositionAt(n);return new Mt(i.lineNumber,i.column,s.lineNumber,s.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-n}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const i=e.startLineNumber,s=e.endLineNumber;for(let o=i;o<=s;o++){const a=this.getLineContent(o),l=o===i?e.startColumn-1:0,u=o===s?e.endColumn-1:a.length;for(let h=l;h<u;h++)Zs(a.charCodeAt(h))?(n=n+1,h=h+1):n=n+1}return n+=this._getEndOfLine(t).length*(s-i),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=ka(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=_u(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let i=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let ee=0;ee<e.length;ee++){let Se=e[ee];a&&Se._isTracked&&(a=!1);let Le=Se.range;if(Se.text){let at=!0;o||(at=!Aa(Se.text),o=at),!i&&at&&(i=Tc(Se.text)),!s&&at&&(s=oh(Se.text))}let ce="",Ee=0,ze=0,Qe=0;if(Se.text){let at;[Ee,ze,Qe,at]=o0(Se.text);const Ze=this.getEOL();at===0||at===(Ze===`\r
`?2:1)?ce=Se.text:ce=Se.text.replace(/\r\n|\r|\n/g,Ze)}l[ee]={sortIndex:ee,identifier:Se.identifier||null,range:Le,rangeOffset:this.getOffsetAt(Le.startLineNumber,Le.startColumn),rangeLength:this.getValueLengthInRange(Le),text:ce,eolCount:Ee,firstLineLength:ze,lastLineLength:Qe,forceMoveMarkers:Boolean(Se.forceMoveMarkers),isAutoWhitespaceEdit:Se.isAutoWhitespaceEdit||!1}}l.sort(a0._sortOpsAscending);let u=!1;for(let ee=0,Se=l.length-1;ee<Se;ee++){let Le=l[ee].range.getEndPosition(),ce=l[ee+1].range.getStartPosition();if(ce.isBeforeOrEqual(Le)){if(ce.isBefore(Le))throw new Error("Overlapping ranges are not allowed!");u=!0}}a&&(l=this._reduceOperations(l));let h=n||t?a0._getInverseEditRanges(l):[],v=[];if(t)for(let ee=0;ee<l.length;ee++){let Se=l[ee],Le=h[ee];if(Se.isAutoWhitespaceEdit&&Se.range.isEmpty())for(let ce=Le.startLineNumber;ce<=Le.endLineNumber;ce++){let Ee="";ce===Le.startLineNumber&&(Ee=this.getLineContent(Se.range.startLineNumber),ka(Ee)!==-1)||v.push({lineNumber:ce,oldContent:Ee})}}let N=null;if(n){let ee=0;N=[];for(let Se=0;Se<l.length;Se++){const Le=l[Se],ce=h[Se],Ee=this.getValueInRange(Le.range),ze=Le.rangeOffset+ee;ee+=Le.text.length-Ee.length,N[Se]={sortIndex:Le.sortIndex,identifier:Le.identifier,range:ce,text:Ee,textChange:new Xo(Le.rangeOffset,Ee,ze,Le.text)}}u||N.sort((Se,Le)=>Se.sortIndex-Le.sortIndex)}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=o;const P=this._doApplyEdits(l);let K=null;if(t&&v.length>0){v.sort((ee,Se)=>Se.lineNumber-ee.lineNumber),K=[];for(let ee=0,Se=v.length;ee<Se;ee++){let Le=v[ee].lineNumber;if(ee>0&&v[ee-1].lineNumber===Le)continue;let ce=v[ee].oldContent,Ee=this.getLineContent(Le);Ee.length===0||Ee===ce||ka(Ee)!==-1||K.push(Le)}}return this._onDidChangeContent.fire(),new ev(N,P,K)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,i=e[e.length-1].range,s=new Mt(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn);let o=n.startLineNumber,a=n.startColumn;const l=[];for(let P=0,K=e.length;P<K;P++){const ee=e[P],Se=ee.range;t=t||ee.forceMoveMarkers,l.push(this.getValueInRange(new Mt(o,a,Se.startLineNumber,Se.startColumn))),ee.text.length>0&&l.push(ee.text),o=Se.endLineNumber,a=Se.endColumn}const u=l.join(""),[h,v,N]=o0(u);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:u,eolCount:h,firstLineLength:v,lastLineLength:N,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(a0._sortOpsDescending);let t=[];for(let n=0;n<e.length;n++){let i=e[n];const s=i.range.startLineNumber,o=i.range.startColumn,a=i.range.endLineNumber,l=i.range.endColumn;if(s===a&&o===l&&i.text.length===0)continue;i.text?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,i.text,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength);const u=new Mt(s,o,a,l);t.push({range:u,rangeLength:i.rangeLength,text:i.text,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}static _getInverseEditRanges(e){let t=[],n=0,i=0,s=null;for(let o=0,a=e.length;o<a;o++){let l=e[o],u,h;s?s.range.endLineNumber===l.range.startLineNumber?(u=n,h=i+(l.range.startColumn-s.range.endColumn)):(u=n+(l.range.startLineNumber-s.range.endLineNumber),h=l.range.startColumn):(u=l.range.startLineNumber,h=l.range.startColumn);let v;if(l.text.length>0){const N=l.eolCount+1;N===1?v=new Mt(u,h,u,h+l.firstLineLength):v=new Mt(u,h,u+N-1,l.lastLineLength+1)}else v=new Mt(u,h,u,h);n=v.endLineNumber,i=v.endColumn,t.push(v),s=l}return t}static _sortOpsAscending(e,t){let n=Mt.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=Mt.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}class O2{constructor(e,t,n,i,s,o,a,l,u){this._chunks=e,this._bom=t,this._cr=n,this._lf=i,this._crlf=s,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=u}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e);let n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let s=0,o=n.length;s<o;s++){let a=n[s].buffer.replace(/\r\n|\r|\n/g,t),l=Wd(a);n[s]=new nm(a,l)}const i=new a0(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:i,disposable:i}}}class k2{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&Pa(e)&&(this.BOM=Ra,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=D2(this._tmpLineStarts,e);this.chunks.push(new nm(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=Tc(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=oh(e))}finish(e=!0){return this._finish(),new O2(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=Wd(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class A2{constructor(){this.changeType=1}}class zd{constructor(e,t,n,i,s){this.ownerId=e,this.lineNumber=t,this.column=n,this.order=i,this.text=s}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",i=0;for(const s of t)n+=e.substring(i,s.column-1),i=s.column-1,n+=s.text;return n+=e.substring(i),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new zd(n.ownerId,n.range.startLineNumber,n.range.startColumn,0,n.options.before.content)),n.options.after&&n.options.after.content.length>0&&t.push(new zd(n.ownerId,n.range.endLineNumber,n.range.endColumn,1,n.options.after.content));return t.sort((n,i)=>n.lineNumber===i.lineNumber?n.column===i.column?n.order-i.order:n.column-i.column:n.lineNumber-i.lineNumber),t}}class sx{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class R2{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class P2{constructor(e,t,n,i){this.changeType=4,this.injectedTexts=i,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class F2{constructor(){this.changeType=5}}class fg{constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.versionId,s=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new fg(n,i,s,o)}}class B2{constructor(e){this.changes=e}}class Xb{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=fg.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=Xb._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new Xb(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.eol,s=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush;return{changes:n,eol:i,versionId:s,isUndoing:o,isRedoing:a,isFlush:l}}}class W2{constructor(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}_reset(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)}flush(e){this._reset(e)}get invalidLineStartIndex(){return this._invalidLineStartIndex}_invalidateLine(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)}_isValid(e){return e<this._len?this._valid[e]:!1}getBeginState(e){return e<this._len?this._beginState[e]:null}_ensureLine(e){for(;e>=this._len;)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[],i=[];for(let s=0;s<t;s++)n[s]=null,i[s]=!1;this._beginState=Ld(this._beginState,e,n),this._valid=Ld(this._valid,e,i),this._len+=t}_setValid(e,t){this._ensureLine(e),this._valid[e]=t}_setBeginState(e,t){this._ensureLine(e),this._beginState[e]=t}setEndState(e,t,n){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t===e-1)return;const i=this.getBeginState(t+1);if(i===null||!n.equals(i)){this._setBeginState(t+1,n),this._invalidateLine(t+1);return}let s=t+1;for(;s<e&&this._isValid(s);)s++;this._invalidLineStartIndex=s}setFakeTokens(e){this._setValid(e,!1)}applyEdits(e,t){const n=e.endLineNumber-e.startLineNumber,s=Math.min(n,t);for(let o=s;o>=0;o--)this._invalidateLine(e.startLineNumber+o-1);this._acceptDeleteRange(e),this._acceptInsertText(new dn(e.startLineNumber,e.startColumn),t)}_acceptDeleteRange(e){e.startLineNumber-1>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){e.lineNumber-1>=this._len||this._insertLines(e.lineNumber,t)}}class V2 extends Rn{constructor(e){super();this._isDisposed=!1,this._textModel=e,this._tokenizationStateStore=new W2,this._tokenizationSupport=null,this._register(bs.onDidChange(t=>{const n=this._textModel.getLanguageIdentifier();t.changedLanguages.indexOf(n.language)!==-1&&(this._resetTokenizationState(),this._textModel.clearTokens())})),this._register(this._textModel.onDidChangeContentFast(t=>{if(t.isFlush){this._resetTokenizationState();return}for(let n=0,i=t.changes.length;n<i;n++){const s=t.changes[n],[o]=o0(s.text);this._tokenizationStateStore.applyEdits(s.range,o)}this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeAttached(()=>{this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeLanguage(()=>{this._resetTokenizationState(),this._textModel.clearTokens()})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}_resetTokenizationState(){const[e,t]=H2(this._textModel);this._tokenizationSupport=e,this._tokenizationStateStore.flush(t),this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&De(()=>{this._isDisposed||this._revalidateTokensNow()})}_revalidateTokensNow(e=this._textModel.getLineCount()){const t=1,n=new vC,i=Wr.create(!1);for(;this._hasLinesToTokenize()&&!(i.elapsed()>t||this._tokenizeOneInvalidLine(n)>=e););this._beginBackgroundTokenization(),this._textModel.setTokens(n.tokens)}tokenizeViewport(e,t){const n=new vC;this._tokenizeViewport(n,e,t),this._textModel.setTokens(n.tokens)}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){const t=new vC;this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.tokens)}isCheapToTokenize(e){if(!this._tokenizationSupport)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationSupport?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationSupport)return;const n=this._textModel.getLanguageIdentifier(),i=this._textModel.getLineCount(),s=t-1;for(let o=this._tokenizationStateStore.invalidLineStartIndex;o<=s;o++){const a=this._textModel.getLineContent(o+1),l=this._tokenizationStateStore.getBeginState(o),u=yC(n,this._tokenizationSupport,a,!0,l);e.add(o+1,u.tokens),this._tokenizationStateStore.setEndState(i,o,u.endState),o=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,n){if(!this._tokenizationSupport||n<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,n);return}let i=this._textModel.getLineFirstNonWhitespaceColumn(t),s=[],o=null;for(let u=t-1;i>0&&u>=1;u--){let h=this._textModel.getLineFirstNonWhitespaceColumn(u);if(h!==0&&h<i){if(o=this._tokenizationStateStore.getBeginState(u-1),o)break;s.push(this._textModel.getLineContent(u)),i=h}}o||(o=this._tokenizationSupport.getInitialState());const a=this._textModel.getLanguageIdentifier();let l=o;for(let u=s.length-1;u>=0;u--)l=yC(a,this._tokenizationSupport,s[u],!1,l).endState;for(let u=t;u<=n;u++){let h=this._textModel.getLineContent(u),v=yC(a,this._tokenizationSupport,h,!0,l);e.add(u,v.tokens),this._tokenizationStateStore.setFakeTokens(u-1),l=v.endState}}}function H2(r){const e=r.getLanguageIdentifier();let t=r.isTooLargeForTokenization()?null:bs.get(e.language),n=null;if(t)try{n=t.getInitialState()}catch(i){En(i),t=null}return[t,n]}function yC(r,e,t,n,i){let s=null;if(e)try{s=e.tokenize2(t,n,i.clone(),0)}catch(o){En(o)}return s||(s=_v(r.id,t,i,0)),yo.convertToEndOffset(s.tokens,t.length),s}function gg(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}class Tr{constructor(e,t,n,i=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=gg(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Hc{constructor(e,t,n,i){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=gg(Math.max(Math.min(1,t),0),3),this.l=gg(Math.max(Math.min(1,n),0),3),this.a=gg(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,s=e.a,o=Math.max(t,n,i),a=Math.min(t,n,i);let l=0,u=0;const h=(a+o)/2,v=o-a;if(v>0){switch(u=Math.min(h<=.5?v/(2*h):v/(2-2*h),1),o){case t:l=(n-i)/v+(n<i?6:0);break;case n:l=(i-t)/v+2;break;case i:l=(t-n)/v+4;break}l*=60,l=Math.round(l)}return new Hc(l,u,h,s)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:i,a:s}=e;let o,a,l;if(n===0)o=a=l=i;else{const u=i<.5?i*(1+n):i+n-i*n,h=2*i-u;o=Hc._hue2rgb(h,u,t+1/3),a=Hc._hue2rgb(h,u,t),l=Hc._hue2rgb(h,u,t-1/3)}return new Tr(Math.round(o*255),Math.round(a*255),Math.round(l*255),s)}}class l0{constructor(e,t,n,i){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=gg(Math.max(Math.min(1,t),0),3),this.v=gg(Math.max(Math.min(1,n),0),3),this.a=gg(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,s=Math.max(t,n,i),o=Math.min(t,n,i),a=s-o,l=s===0?0:a/s;let u;return a===0?u=0:s===t?u=((n-i)/a%6+6)%6:s===n?u=(i-t)/a+2:u=(t-n)/a+4,new l0(Math.round(u*60),l,s,e.a)}static toRGBA(e){const{h:t,s:n,v:i,a:s}=e,o=i*n,a=o*(1-Math.abs(t/60%2-1)),l=i-o;let[u,h,v]=[0,0,0];return t<60?(u=o,h=a):t<120?(u=a,h=o):t<180?(h=o,v=a):t<240?(h=a,v=o):t<300?(u=a,v=o):t<=360&&(u=o,v=a),u=Math.round((u+l)*255),h=Math.round((h+l)*255),v=Math.round((v+l)*255),new Tr(u,h,v,s)}}class Tn{constructor(e){if(e)if(e instanceof Tr)this.rgba=e;else if(e instanceof Hc)this._hsla=e,this.rgba=Hc.toRGBA(e);else if(e instanceof l0)this._hsva=e,this.rgba=l0.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return Tn.Format.CSS.parseHex(e)||Tn.red}get hsla(){return this._hsla?this._hsla:Hc.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:l0.fromRGBA(this.rgba)}equals(e){return!!e&&Tr.equals(this.rgba,e.rgba)&&Hc.equals(this.hsla,e.hsla)&&l0.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Tn._relativeLuminanceForComponent(this.rgba.r),t=Tn._relativeLuminanceForComponent(this.rgba.g),n=Tn._relativeLuminanceForComponent(this.rgba.b),i=.2126*e+.7152*t+.0722*n;return gg(i,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new Tn(new Hc(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Tn(new Hc(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:i,a:s}=this.rgba;return new Tn(new Tr(t,n,i,s*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new Tn(new Tr(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return""+Tn.Format.CSS.format(this)}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(s-i)/s,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(i-s)/i,e.darken(n)}}Tn.white=new Tn(new Tr(255,255,255,1)),Tn.black=new Tn(new Tr(0,0,0,1)),Tn.red=new Tn(new Tr(255,0,0,1)),Tn.blue=new Tn(new Tr(0,0,255,1)),Tn.cyan=new Tn(new Tr(0,255,255,1)),Tn.lightgrey=new Tn(new Tr(211,211,211,1)),Tn.transparent=new Tn(new Tr(0,0,0,0)),function(r){let e;(function(t){let n;(function(i){function s(ee){return ee.rgba.a===1?`rgb(${ee.rgba.r}, ${ee.rgba.g}, ${ee.rgba.b})`:r.Format.CSS.formatRGBA(ee)}i.formatRGB=s;function o(ee){return`rgba(${ee.rgba.r}, ${ee.rgba.g}, ${ee.rgba.b}, ${+ee.rgba.a.toFixed(2)})`}i.formatRGBA=o;function a(ee){return ee.hsla.a===1?`hsl(${ee.hsla.h}, ${(ee.hsla.s*100).toFixed(2)}%, ${(ee.hsla.l*100).toFixed(2)}%)`:r.Format.CSS.formatHSLA(ee)}i.formatHSL=a;function l(ee){return`hsla(${ee.hsla.h}, ${(ee.hsla.s*100).toFixed(2)}%, ${(ee.hsla.l*100).toFixed(2)}%, ${ee.hsla.a.toFixed(2)})`}i.formatHSLA=l;function u(ee){const Se=ee.toString(16);return Se.length!==2?"0"+Se:Se}function h(ee){return`#${u(ee.rgba.r)}${u(ee.rgba.g)}${u(ee.rgba.b)}`}i.formatHex=h;function v(ee,Se=!1){return Se&&ee.rgba.a===1?r.Format.CSS.formatHex(ee):`#${u(ee.rgba.r)}${u(ee.rgba.g)}${u(ee.rgba.b)}${u(Math.round(ee.rgba.a*255))}`}i.formatHexA=v;function N(ee){return ee.isOpaque()?r.Format.CSS.formatHex(ee):r.Format.CSS.formatRGBA(ee)}i.format=N;function P(ee){const Se=ee.length;if(Se===0||ee.charCodeAt(0)!==35)return null;if(Se===7){const Le=16*K(ee.charCodeAt(1))+K(ee.charCodeAt(2)),ce=16*K(ee.charCodeAt(3))+K(ee.charCodeAt(4)),Ee=16*K(ee.charCodeAt(5))+K(ee.charCodeAt(6));return new r(new Tr(Le,ce,Ee,1))}if(Se===9){const Le=16*K(ee.charCodeAt(1))+K(ee.charCodeAt(2)),ce=16*K(ee.charCodeAt(3))+K(ee.charCodeAt(4)),Ee=16*K(ee.charCodeAt(5))+K(ee.charCodeAt(6)),ze=16*K(ee.charCodeAt(7))+K(ee.charCodeAt(8));return new r(new Tr(Le,ce,Ee,ze/255))}if(Se===4){const Le=K(ee.charCodeAt(1)),ce=K(ee.charCodeAt(2)),Ee=K(ee.charCodeAt(3));return new r(new Tr(16*Le+Le,16*ce+ce,16*Ee+Ee))}if(Se===5){const Le=K(ee.charCodeAt(1)),ce=K(ee.charCodeAt(2)),Ee=K(ee.charCodeAt(3)),ze=K(ee.charCodeAt(4));return new r(new Tr(16*Le+Le,16*ce+ce,16*Ee+Ee,(16*ze+ze)/255))}return null}i.parseHex=P;function K(ee){switch(ee){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(n=t.CSS||(t.CSS={}))})(e=r.Format||(r.Format={}))}(Tn||(Tn={}));function z2(){return new k2}function U2(r){const e=z2();return e.acceptChunk(r),e.finish()}function ox(r,e){return(typeof r=="string"?U2(r):r).create(e)}let qb=0;const j2=999,$2=1e4;class K2{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let i=this._source.read();if(i===null)return this._eos=!0,t===0?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=64*1024)return e.join("")}while(!0)}}const uy=()=>{throw new Error("Invalid change accessor")};class Ud{constructor(){this._searchCanceledBrand=void 0}}Ud.INSTANCE=new Ud;function Qb(r){return r instanceof Ud?null:r}class hl extends Rn{constructor(e,t,n,i=null,s){super();this._onWillDispose=this._register(new $t),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new X2(h=>this.handleBeforeFireDecorationsChangedEvent(h))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new $t),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new $t),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new $t),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new $t),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new $t),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeContentOrInjectedText=this._register(new $t),this.onDidChangeContentOrInjectedText=this._onDidChangeContentOrInjectedText.event,this._eventEmitter=this._register(new q2),this._register(this._eventEmitter.fastEvent(h=>{this._onDidChangeContentOrInjectedText.fire(h.rawContentChangedEvent)})),qb++,this.id="$model"+qb,this.isForSimpleWidget=t.isForSimpleWidget,typeof i=="undefined"||i===null?this._associatedResource=ci.parse("inmemory://model/"+qb):this._associatedResource=i,this._undoRedoService=s,this._attachedEditorCount=0;const{textBuffer:o,disposable:a}=ox(e,t.defaultEOL);this._buffer=o,this._bufferDisposable=a,this._options=hl.resolveOptions(this._buffer,t);const l=this._buffer.getLineCount(),u=this._buffer.getValueLengthInRange(new Mt(1,1,l,this._buffer.getLineLength(l)+1),0);t.largeFileOptimizations?this._isTooLargeForTokenization=u>hl.LARGE_FILE_SIZE_THRESHOLD||l>hl.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=u>hl.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageIdentifier=n||Bf,this._languageRegistryListener=$r.onDidChange(h=>{h.languageIdentifier.id===this._languageIdentifier.id&&this._onDidChangeLanguageConfiguration.fire({})}),this._instanceId=mf(qb),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new ax,this._commandManager=new lC(this,s),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new ku,this._tokens2=new _C,this._tokenization=new V2(this)}static resolveOptions(e,t){if(t.detectIndentation){const n=jL(e,t.tabSize,t.insertSpaces);return new Eu({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL})}return new Eu({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL})}onDidChangeContentFast(e){return this._eventEmitter.fastEvent(t=>e(t.contentChangedEvent))}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;const e=new a0([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this._isDisposing||this._eventEmitter.fire(new Xb(e,t))}setValue(e){if(this._assertNotDisposed(),e===null)return;const{textBuffer:t,disposable:n}=ox(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,i,s,o,a){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:i}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:s,isRedoing:o,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new ax,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new fg([new A2],this._versionId,!1,!1),this._createContentChanged2(new Mt(1,1,s,o),0,i,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new fg([new F2],this._versionId,!1,!1),this._createContentChanged2(new Mt(1,1,s,o),0,i,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.search(0,!1,!1,e);this._ensureNodesHaveRanges(t)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,i=t.length;n<i;n++){const s=t[n],o=s.cachedAbsoluteStart-s.start,a=this._buffer.getOffsetAt(s.range.startLineNumber,s.range.startColumn),l=this._buffer.getOffsetAt(s.range.endLineNumber,s.range.endColumn);s.cachedAbsoluteStart=a,s.cachedAbsoluteEnd=l,s.cachedVersionId=e,s.start=a-o,s.end=l-o,hg(s)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&this._onDidChangeAttached.fire(void 0)}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&this._onDidChangeAttached.fire(void 0)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let i=1;i<=n;i++){const s=this._buffer.getLineLength(i);s>=$2?t+=s:e+=s}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=typeof e.tabSize!="undefined"?e.tabSize:this._options.tabSize,n=typeof e.indentSize!="undefined"?e.indentSize:this._options.indentSize,i=typeof e.insertSpaces!="undefined"?e.insertSpaces:this._options.insertSpaces,s=typeof e.trimAutoWhitespace!="undefined"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=new Eu({tabSize:t,indentSize:n,insertSpaces:i,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s});if(this._options.equals(o))return;let a=this._options.createChangeEvent(o);this._options=o,this._onDidChangeOptions.fire(a)}detectIndentation(e,t){this._assertNotDisposed();let n=jL(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}static _normalizeIndentationFromWhitespace(e,t,n){let i=0;for(let o=0;o<e.length;o++)e.charAt(o)==="	"?i+=t:i++;let s="";if(!n){let o=Math.floor(i/t);i=i%t;for(let a=0;a<o;a++)s+="	"}for(let o=0;o<i;o++)s+=" ";return s}static normalizeIndentation(e,t,n){let i=ka(e);return i===-1&&(i=e.length),hl._normalizeIndentationFromWhitespace(e.substring(0,i),t,n)+e.substring(i)}normalizeIndentation(e){return this._assertNotDisposed(),hl.normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(sh.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._buffer.getBOM()+i:i}createSnapshot(e=!1){return new K2(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+i:i}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,i=e.startColumn;let s=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),o=Math.floor(typeof i=="number"&&!isNaN(i)?i:1);if(s<1)s=1,o=1;else if(s>t)s=t,o=this.getLineMaxColumn(s);else if(o<=1)o=1;else{const v=this.getLineMaxColumn(s);o>=v&&(o=v)}const a=e.endLineNumber,l=e.endColumn;let u=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),h=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(u<1)u=1,h=1;else if(u>t)u=t,h=this.getLineMaxColumn(u);else if(h<=1)h=1;else{const v=this.getLineMaxColumn(u);h>=v&&(h=v)}return n===s&&i===o&&a===u&&l===h&&e instanceof Mt&&!(e instanceof oi)?e:new Mt(s,o,u,h)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const i=this._buffer.getLineCount();if(e>i)return!1;if(t===1)return!0;const s=this.getLineMaxColumn(e);if(t>s)return!1;if(n===1){const o=this._buffer.getLineCharCode(e,t-2);if(Zs(o))return!1}return!0}_validatePosition(e,t,n){const i=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),s=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(i<1)return new dn(1,1);if(i>o)return new dn(o,this.getLineMaxColumn(o));if(s<=1)return new dn(i,1);const a=this.getLineMaxColumn(i);if(s>=a)return new dn(i,a);if(n===1){const l=this._buffer.getLineCharCode(i,s-2);if(Zs(l))return new dn(i,s-1)}return new dn(i,s)}validatePosition(e){const t=1;return this._assertNotDisposed(),e instanceof dn&&this._isValidPosition(e.lineNumber,e.column,t)?e:this._validatePosition(e.lineNumber,e.column,t)}_isValidRange(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(n,i,0)||!this._isValidPosition(s,o,0))return!1;if(t===1){const a=i>1?this._buffer.getLineCharCode(n,i-2):0,l=o>1&&o<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,o-2):0,u=Zs(a),h=Zs(l);return!u&&!h}return!0}validateRange(e){const t=1;if(this._assertNotDisposed(),e instanceof Mt&&!(e instanceof oi)&&this._isValidRange(e,t))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),i=this._validatePosition(e.endLineNumber,e.endColumn,0),s=n.lineNumber,o=n.column,a=i.lineNumber,l=i.column;if(t===1){const u=o>1?this._buffer.getLineCharCode(s,o-2):0,h=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,v=Zs(u),N=Zs(h);return!v&&!N?new Mt(s,o,a,l):s===a&&o===l?new Mt(s,o-1,a,l-1):v&&N?new Mt(s,o-1,a,l+1):v?new Mt(s,o-1,a,l):new Mt(s,o,a,l+1)}return new Mt(s,o,a,l)}modifyPosition(e,t){this._assertNotDisposed();let n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new Mt(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,i){return this._buffer.findMatchesLineByLine(e,t,n,i)}findMatches(e,t,n,i,s,o,a=j2){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(v=>Mt.isIRange(v))&&(l=t.map(v=>this.validateRange(v)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((v,N)=>v.startLineNumber-N.startLineNumber||v.startColumn-N.startColumn);const u=[];u.push(l.reduce((v,N)=>Mt.areIntersecting(v,N)?v.plusRange(N):(u.push(v),N)));let h;if(!n&&e.indexOf(`
`)<0){const N=new s0(e,n,i,s).parseSearchRequest();if(!N)return[];h=P=>this.findMatchesLineByLine(P,N,o,a)}else h=v=>Gb.findMatches(this,new s0(e,n,i,s),v,o,a);return u.map(h).reduce((v,N)=>v.concat(N),[])}findNextMatch(e,t,n,i,s,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const u=new s0(e,n,i,s).parseSearchRequest();if(!u)return null;const h=this.getLineCount();let v=new Mt(a.lineNumber,a.column,h,this.getLineMaxColumn(h)),N=this.findMatchesLineByLine(v,u,o,1);return Gb.findNextMatch(this,new s0(e,n,i,s),a,o),N.length>0||(v=new Mt(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),N=this.findMatchesLineByLine(v,u,o,1),N.length>0)?N[0]:null}return Gb.findNextMatch(this,new s0(e,n,i,s),a,o)}findPreviousMatch(e,t,n,i,s,o){this._assertNotDisposed();const a=this.validatePosition(t);return Gb.findPreviousMatch(this,new s0(e,n,i,s),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof Ql?e:new Ql(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let i=t.map(o=>({range:this.validateRange(o.range),text:o.text})),s=!0;if(e)for(let o=0,a=e.length;o<a;o++){let l=e[o],u=!1;for(let h=0,v=i.length;h<v;h++){let N=i[h].range,P=N.startLineNumber>l.endLineNumber,K=l.startLineNumber>N.endLineNumber;if(!P&&!K){u=!0;break}}if(!u){s=!1;break}}if(s)for(let o=0,a=this._trimAutoWhitespaceLines.length;o<a;o++){let l=this._trimAutoWhitespaceLines[o],u=this.getLineMaxColumn(l),h=!0;for(let v=0,N=i.length;v<N;v++){let P=i[v].range,K=i[v].text;if(!(l<P.startLineNumber||l>P.endLineNumber)&&!(l===P.startLineNumber&&P.startColumn===u&&P.isEmpty()&&K&&K.length>0&&K.charAt(0)===`
`)&&!(l===P.startLineNumber&&P.startColumn===1&&P.isEmpty()&&K&&K.length>0&&K.charAt(K.length-1)===`
`)){h=!1;break}}if(h){const v=new Mt(l,1,l,u);t.push(new Ql(null,v,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n)}_applyUndo(e,t,n,i){const s=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new Mt(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(s,t,!0,!1,n,i)}_applyRedo(e,t,n,i){const s=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new Mt(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(s,t,!1,!0,n,i)}_applyUndoRedoEdits(e,t,n,i,s,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=i,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),i=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),o=i.changes;if(this._trimAutoWhitespaceLines=i.trimAutoWhitespaceLineNumbers,o.length!==0){for(let u=0,h=o.length;u<h;u++){const v=o[u],[N,P,K]=o0(v.text);this._tokens.acceptEdit(v.range,N,P),this._tokens2.acceptEdit(v.range,N,P,K,v.text.length>0?v.text.charCodeAt(0):0),this._decorationsTree.acceptReplace(v.rangeOffset,v.rangeLength,v.text.length,v.forceMoveMarkers)}let a=[];this._increaseVersionId();let l=n;for(let u=0,h=o.length;u<h;u++){const v=o[u],[N]=o0(v.text);this._onDidChangeDecorations.fire();const P=v.range.startLineNumber,K=v.range.endLineNumber,ee=K-P,Se=N,Le=Math.min(ee,Se),ce=Se-ee,Ee=s-l-ce+P,ze=Ee,Qe=Ee+Se,at=this._ensureNodesHaveRanges(this._decorationsTree.getInjectedTextInInterval(this.getOffsetAt(new dn(ze,1)),this.getOffsetAt(new dn(Qe,this.getLineMaxColumn(Qe))),0,this._versionId)),Ze=zd.fromDecorations(at),rt=new Pv(Ze);for(let St=Le;St>=0;St--){const un=P+St,Kt=Ee+St;rt.takeFromEndWhile(Wn=>Wn.lineNumber>Kt);const An=rt.takeFromEndWhile(Wn=>Wn.lineNumber===Kt);a.push(new sx(un,this.getLineContent(Kt),An))}if(Le<ee){const St=P+Le;a.push(new R2(St+1,K))}if(Le<Se){const St=new Pv(Ze),un=P+Le,Kt=Se-Le,An=s-l-Kt+un+1;let Wn=[],$i=[];for(let Fi=0;Fi<Kt;Fi++){let tr=An+Fi;$i[Fi]=this.getLineContent(tr),St.takeWhile(yr=>yr.lineNumber<tr),Wn[Fi]=St.takeWhile(yr=>yr.lineNumber===tr)}a.push(new P2(un+1,P+Se,$i,Wn))}l+=ce}this._emitContentChangedEvent(new fg(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return i.reverseEdits===null?void 0:i.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=[...e].map(i=>new sx(i,this.getLineContent(i),this._getInjectedTextInLine(i)));this._onDidChangeContentOrInjectedText.fire(new B2(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let n={addDecoration:(s,o)=>this._deltaDecorationsImpl(e,[],[{range:s,options:o}])[0],changeDecoration:(s,o)=>{this._changeDecorationImpl(s,o)},changeDecorationOptions:(s,o)=>{this._changeDecorationOptionsImpl(s,hx(o))},removeDecoration:s=>{this._deltaDecorationsImpl(e,[s],[])},deltaDecorations:(s,o)=>s.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,s,o)},i=null;try{i=t(n)}catch(s){En(s)}return n.addDecoration=uy,n.changeDecoration=uy,n.changeDecorationOptions=uy,n.removeDecoration=uy,n.deltaDecorations=uy,i}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const i=e?this._decorations[e]:null;if(!i)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:cx[n]}])[0]:null;if(!t)return this._decorationsTree.delete(i),delete this._decorations[i.id],null;const s=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),a=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(i),i.reset(this.getVersionId(),o,a,s),i.setOptions(cx[n]),this._decorationsTree.insert(i),i.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,i=t.length;n<i;n++){const s=t[n];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._getDecorationRange(t):null}_getDecorationRange(e){const t=this.getVersionId();return e.cachedVersionId!==t&&this._decorationsTree.resolveNode(e,t),e.range===null&&(e.range=this._getRangeAt(e.cachedAbsoluteStart,e.cachedAbsoluteEnd)),e.range}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,i=!1){let s=this.getLineCount(),o=Math.min(s,Math.max(1,e)),a=Math.min(s,Math.max(1,t)),l=this.getLineMaxColumn(a);return this._getDecorationsInRange(new Mt(o,1,a,l),n,i)}getDecorationsInRange(e,t=0,n=!1){let i=this.validateRange(e);return this._getDecorationsInRange(i,t,n)}getOverviewRulerDecorations(e=0,t=!1){const n=this.getVersionId(),i=this._decorationsTree.search(e,t,!0,n);return this._ensureNodesHaveRanges(i)}getInjectedTextDecorations(e=0){const t=this.getVersionId(),n=this._decorationsTree.getInjectedText(e,t);return this._ensureNodesHaveRanges(n)}_getInjectedTextInLine(e){const t=this.getVersionId(),n=this._buffer.getOffsetAt(e,1),i=n+this._buffer.getLineLength(e),s=this._decorationsTree.getInjectedTextInInterval(n,i,0,t);return this._ensureNodesHaveRanges(s),zd.fromDecorations(s).filter(o=>o.lineNumber===e)}getAllDecorations(e=0,t=!1){const n=this.getVersionId(),i=this._decorationsTree.search(e,t,!1,n);return this._ensureNodesHaveRanges(i)}_getDecorationsInRange(e,t,n){const i=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),s=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn),o=this.getVersionId(),a=this._decorationsTree.intervalSearch(i,s,t,n,o);return this._ensureNodesHaveRanges(a)}_ensureNodesHaveRanges(e){for(let t=0,n=e.length;t<n;t++){const i=e[t];i.range===null&&(i.range=this._getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd))}return e}_getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const i=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),o=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),s,o,i),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const i=!!(n.options.overviewRuler&&n.options.overviewRuler.color),s=!!(t.overviewRuler&&t.overviewRuler.color);this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),(n.options.after||t.after)&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.range.endLineNumber),(n.options.before||t.before)&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.range.startLineNumber),i!==s?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){const i=this.getVersionId(),s=t.length;let o=0;const a=n.length;let l=0,u=new Array(a);for(;o<s||l<a;){let h=null;if(o<s){do h=this._decorations[t[o++]];while(!h&&o<s);if(h){if(h.options.after){const v=this._getDecorationRange(h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(v.endLineNumber)}if(h.options.before){const v=this._getDecorationRange(h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(v.startLineNumber)}this._decorationsTree.delete(h),this._onDidChangeDecorations.checkAffectedAndFire(h.options)}}if(l<a){if(!h){const Se=++this._lastDecorationId,Le=`${this._instanceId};${Se}`;h=new ZL(Le,0,0),this._decorations[Le]=h}const v=n[l],N=this._validateRangeRelaxedNoAllocations(v.range),P=hx(v.options),K=this._buffer.getOffsetAt(N.startLineNumber,N.startColumn),ee=this._buffer.getOffsetAt(N.endLineNumber,N.endColumn);h.ownerId=e,h.reset(i,K,ee,N),h.setOptions(P),h.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(N.endLineNumber),h.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(N.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(P),this._decorationsTree.insert(h),u[l]=h.id,l++}else h&&delete this._decorations[h.id]}return u}setTokens(e){if(e.length===0)return;let t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];let o=0,a=0,l=!1;for(let u=0,h=s.tokens.length;u<h;u++){const v=s.startLineNumber+u;l?(this._tokens.setTokens(this._languageIdentifier.id,v-1,this._buffer.getLineLength(v),s.tokens[u],!1),a=v):this._tokens.setTokens(this._languageIdentifier.id,v-1,this._buffer.getLineLength(v),s.tokens[u],!0)&&(l=!0,o=v,a=v)}l&&t.push({fromLineNumber:o,toLineNumber:a})}t.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:t})}setSemanticTokens(e,t){this._tokens2.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._tokens2.isComplete()}hasSomeSemanticTokens(){return!this._tokens2.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._tokens2.setPartial(e,t);this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||this._onDidChangeTokens.fire(e)}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this.getLineContent(e),n=this._tokens.getTokens(this._languageIdentifier.id,e-1,t);return this._tokens2.addSemanticTokens(e,n)}getLanguageIdentifier(){return this._languageIdentifier}getModeId(){return this._languageIdentifier.language}setMode(e){if(this._languageIdentifier.id===e.id)return;let t={oldLanguage:this._languageIdentifier.language,newLanguage:e.language};this._languageIdentifier=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,t){const n=this.validatePosition(new dn(e,t)),i=this.getLineTokens(n.lineNumber);return i.getLanguageId(i.findTokenIndexAtOffset(n.column-1))}getWordAtPosition(e){this._assertNotDisposed();const t=this.validatePosition(e),n=this.getLineContent(t.lineNumber),i=this._getLineTokens(t.lineNumber),s=i.findTokenIndexAtOffset(t.column-1),[o,a]=hl._findLanguageBoundaries(i,s),l=Jt(t.column,$r.getWordDefinition(i.getLanguageId(s)),n.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(s>0&&o===t.column-1){const[u,h]=hl._findLanguageBoundaries(i,s-1),v=Jt(t.column,$r.getWordDefinition(i.getLanguageId(s-1)),n.substring(u,h),u);if(v&&v.startColumn<=e.column&&e.column<=v.endColumn)return v}return null}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let i=0;for(let o=t;o>=0&&e.getLanguageId(o)===n;o--)i=e.getStartOffset(o);let s=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===n;o++)s=e.getEndOffset(o);return[i,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}findMatchingBracketUp(e,t){let n=e.toLowerCase(),i=this.validatePosition(t),s=this._getLineTokens(i.lineNumber),o=s.getLanguageId(s.findTokenIndexAtOffset(i.column-1)),a=$r.getBracketsSupport(o);if(!a)return null;let l=a.textIsBracket[n];return l?Qb(this._findMatchingBracketUp(l,i,null)):null}matchBracket(e){return this._matchBracket(this.validatePosition(e))}_establishBracketSearchOffsets(e,t,n,i){const s=t.getCount(),o=t.getLanguageId(i);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let u=i-1;u>=0;u--){const h=t.getEndOffset(u);if(h<=a)break;if(eu(t.getStandardTokenType(u))||t.getLanguageId(u)!==o){a=h;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let u=i+1;u<s;u++){const h=t.getStartOffset(u);if(h>=l)break;if(eu(t.getStandardTokenType(u))||t.getLanguageId(u)!==o){l=h;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e){const t=e.lineNumber,n=this._getLineTokens(t),i=this._buffer.getLineContent(t),s=n.findTokenIndexAtOffset(e.column-1);if(s<0)return null;const o=$r.getBracketsSupport(n.getLanguageId(s));if(o&&!eu(n.getStandardTokenType(s))){let{searchStartOffset:a,searchEndOffset:l}=this._establishBracketSearchOffsets(e,n,o,s),u=null;for(;;){const h=Va.findNextBracketInRange(o.forwardRegex,t,i,a,l);if(!h)break;if(h.startColumn<=e.column&&e.column<=h.endColumn){const v=i.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),N=this._matchFoundBracket(h,o.textIsBracket[v],o.textIsOpenBracket[v],null);if(N){if(N instanceof Ud)return null;u=N}}a=h.endColumn-1}if(u)return u}if(s>0&&n.getStartOffset(s)===e.column-1){const a=s-1,l=$r.getBracketsSupport(n.getLanguageId(a));if(l&&!eu(n.getStandardTokenType(a))){let{searchStartOffset:u,searchEndOffset:h}=this._establishBracketSearchOffsets(e,n,l,a);const v=Va.findPrevBracketInRange(l.reversedRegex,t,i,u,h);if(v&&v.startColumn<=e.column&&e.column<=v.endColumn){const N=i.substring(v.startColumn-1,v.endColumn-1).toLowerCase(),P=this._matchFoundBracket(v,l.textIsBracket[N],l.textIsOpenBracket[N],null);if(P)return P instanceof Ud?null:P}}}return null}_matchFoundBracket(e,t,n,i){if(!t)return null;const s=n?this._findMatchingBracketDown(t,e.getEndPosition(),i):this._findMatchingBracketUp(t,e.getStartPosition(),i);return s?s instanceof Ud?s:[e,s]:null}_findMatchingBracketUp(e,t,n){const i=e.languageIdentifier.id,s=e.reversedRegex;let o=-1,a=0;const l=(u,h,v,N)=>{for(;;){if(n&&++a%100==0&&!n())return Ud.INSTANCE;const P=Va.findPrevBracketInRange(s,u,h,v,N);if(!P)break;const K=h.substring(P.startColumn-1,P.endColumn-1).toLowerCase();if(e.isOpen(K)?o++:e.isClose(K)&&o--,o===0)return P;N=P.startColumn-1}return null};for(let u=t.lineNumber;u>=1;u--){const h=this._getLineTokens(u),v=h.getCount(),N=this._buffer.getLineContent(u);let P=v-1,K=N.length,ee=N.length;u===t.lineNumber&&(P=h.findTokenIndexAtOffset(t.column-1),K=t.column-1,ee=t.column-1);let Se=!0;for(;P>=0;P--){const Le=h.getLanguageId(P)===i&&!eu(h.getStandardTokenType(P));if(Le)Se?K=h.getStartOffset(P):(K=h.getStartOffset(P),ee=h.getEndOffset(P));else if(Se&&K!==ee){const ce=l(u,N,K,ee);if(ce)return ce}Se=Le}if(Se&&K!==ee){const Le=l(u,N,K,ee);if(Le)return Le}}return null}_findMatchingBracketDown(e,t,n){const i=e.languageIdentifier.id,s=e.forwardRegex;let o=1,a=0;const l=(h,v,N,P)=>{for(;;){if(n&&++a%100==0&&!n())return Ud.INSTANCE;const K=Va.findNextBracketInRange(s,h,v,N,P);if(!K)break;const ee=v.substring(K.startColumn-1,K.endColumn-1).toLowerCase();if(e.isOpen(ee)?o++:e.isClose(ee)&&o--,o===0)return K;N=K.endColumn-1}return null},u=this.getLineCount();for(let h=t.lineNumber;h<=u;h++){const v=this._getLineTokens(h),N=v.getCount(),P=this._buffer.getLineContent(h);let K=0,ee=0,Se=0;h===t.lineNumber&&(K=v.findTokenIndexAtOffset(t.column-1),ee=t.column-1,Se=t.column-1);let Le=!0;for(;K<N;K++){const ce=v.getLanguageId(K)===i&&!eu(v.getStandardTokenType(K));if(ce)Le||(ee=v.getStartOffset(K)),Se=v.getEndOffset(K);else if(Le&&ee!==Se){const Ee=l(h,P,ee,Se);if(Ee)return Ee}Le=ce}if(Le&&ee!==Se){const ce=l(h,P,ee,Se);if(ce)return ce}}return null}findPrevBracket(e){const t=this.validatePosition(e);let n=-1,i=null;for(let s=t.lineNumber;s>=1;s--){const o=this._getLineTokens(s),a=o.getCount(),l=this._buffer.getLineContent(s);let u=a-1,h=l.length,v=l.length;if(s===t.lineNumber){u=o.findTokenIndexAtOffset(t.column-1),h=t.column-1,v=t.column-1;const P=o.getLanguageId(u);n!==P&&(n=P,i=$r.getBracketsSupport(n))}let N=!0;for(;u>=0;u--){const P=o.getLanguageId(u);if(n!==P){if(i&&N&&h!==v){const ee=Va.findPrevBracketInRange(i.reversedRegex,s,l,h,v);if(ee)return this._toFoundBracket(i,ee);N=!1}n=P,i=$r.getBracketsSupport(n)}const K=!!i&&!eu(o.getStandardTokenType(u));if(K)N?h=o.getStartOffset(u):(h=o.getStartOffset(u),v=o.getEndOffset(u));else if(i&&N&&h!==v){const ee=Va.findPrevBracketInRange(i.reversedRegex,s,l,h,v);if(ee)return this._toFoundBracket(i,ee)}N=K}if(i&&N&&h!==v){const P=Va.findPrevBracketInRange(i.reversedRegex,s,l,h,v);if(P)return this._toFoundBracket(i,P)}}return null}findNextBracket(e){const t=this.validatePosition(e),n=this.getLineCount();let i=-1,s=null;for(let o=t.lineNumber;o<=n;o++){const a=this._getLineTokens(o),l=a.getCount(),u=this._buffer.getLineContent(o);let h=0,v=0,N=0;if(o===t.lineNumber){h=a.findTokenIndexAtOffset(t.column-1),v=t.column-1,N=t.column-1;const K=a.getLanguageId(h);i!==K&&(i=K,s=$r.getBracketsSupport(i))}let P=!0;for(;h<l;h++){const K=a.getLanguageId(h);if(i!==K){if(s&&P&&v!==N){const Se=Va.findNextBracketInRange(s.forwardRegex,o,u,v,N);if(Se)return this._toFoundBracket(s,Se);P=!1}i=K,s=$r.getBracketsSupport(i)}const ee=!!s&&!eu(a.getStandardTokenType(h));if(ee)P||(v=a.getStartOffset(h)),N=a.getEndOffset(h);else if(s&&P&&v!==N){const Se=Va.findNextBracketInRange(s.forwardRegex,o,u,v,N);if(Se)return this._toFoundBracket(s,Se)}P=ee}if(s&&P&&v!==N){const K=Va.findNextBracketInRange(s.forwardRegex,o,u,v,N);if(K)return this._toFoundBracket(s,K)}}return null}findEnclosingBrackets(e,t){let n;if(typeof t=="undefined")n=null;else{const P=Date.now();n=()=>Date.now()-P<=t}const i=this.validatePosition(e),s=this.getLineCount(),o=new Map;let a=[];const l=(P,K)=>{if(!o.has(P)){let ee=[];for(let Se=0,Le=K?K.brackets.length:0;Se<Le;Se++)ee[Se]=0;o.set(P,ee)}a=o.get(P)};let u=0;const h=(P,K,ee,Se,Le)=>{for(;;){if(n&&++u%100==0&&!n())return Ud.INSTANCE;const ce=Va.findNextBracketInRange(P.forwardRegex,K,ee,Se,Le);if(!ce)break;const Ee=ee.substring(ce.startColumn-1,ce.endColumn-1).toLowerCase(),ze=P.textIsBracket[Ee];if(ze&&(ze.isOpen(Ee)?a[ze.index]++:ze.isClose(Ee)&&a[ze.index]--,a[ze.index]===-1))return this._matchFoundBracket(ce,ze,!1,n);Se=ce.endColumn-1}return null};let v=-1,N=null;for(let P=i.lineNumber;P<=s;P++){const K=this._getLineTokens(P),ee=K.getCount(),Se=this._buffer.getLineContent(P);let Le=0,ce=0,Ee=0;if(P===i.lineNumber){Le=K.findTokenIndexAtOffset(i.column-1),ce=i.column-1,Ee=i.column-1;const Qe=K.getLanguageId(Le);v!==Qe&&(v=Qe,N=$r.getBracketsSupport(v),l(v,N))}let ze=!0;for(;Le<ee;Le++){const Qe=K.getLanguageId(Le);if(v!==Qe){if(N&&ze&&ce!==Ee){const Ze=h(N,P,Se,ce,Ee);if(Ze)return Qb(Ze);ze=!1}v=Qe,N=$r.getBracketsSupport(v),l(v,N)}const at=!!N&&!eu(K.getStandardTokenType(Le));if(at)ze||(ce=K.getStartOffset(Le)),Ee=K.getEndOffset(Le);else if(N&&ze&&ce!==Ee){const Ze=h(N,P,Se,ce,Ee);if(Ze)return Qb(Ze)}ze=at}if(N&&ze&&ce!==Ee){const Qe=h(N,P,Se,ce,Ee);if(Qe)return Qb(Qe)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.getValueInRange(t);n=n.toLowerCase();let i=e.textIsBracket[n];return i?{range:t,open:i.open,close:i.close,isOpen:e.textIsOpenBracket[n]}:null}static computeIndentLevel(e,t){let n=0,i=0,s=e.length;for(;i<s;){let o=e.charCodeAt(i);if(o===32)n++;else if(o===9)n=n-n%t+t;else break;i++}return i===s?-1:n}_computeIndentLevel(e){return hl.computeIndentLevel(this._buffer.getLineContent(e+1),this._options.tabSize)}getActiveIndentGuide(e,t,n){this._assertNotDisposed();const i=this.getLineCount();if(e<1||e>i)throw new Error("Illegal value for lineNumber");const s=$r.getFoldingRules(this._languageIdentifier.id),o=Boolean(s&&s.offSide);let a=-2,l=-1,u=-2,h=-1;const v=Ze=>{if(a!==-1&&(a===-2||a>Ze-1)){a=-1,l=-1;for(let rt=Ze-2;rt>=0;rt--){let St=this._computeIndentLevel(rt);if(St>=0){a=rt,l=St;break}}}if(u===-2){u=-1,h=-1;for(let rt=Ze;rt<i;rt++){let St=this._computeIndentLevel(rt);if(St>=0){u=rt,h=St;break}}}};let N=-2,P=-1,K=-2,ee=-1;const Se=Ze=>{if(N===-2){N=-1,P=-1;for(let rt=Ze-2;rt>=0;rt--){let St=this._computeIndentLevel(rt);if(St>=0){N=rt,P=St;break}}}if(K!==-1&&(K===-2||K<Ze-1)){K=-1,ee=-1;for(let rt=Ze;rt<i;rt++){let St=this._computeIndentLevel(rt);if(St>=0){K=rt,ee=St;break}}}};let Le=0,ce=!0,Ee=0,ze=!0,Qe=0,at=0;for(let Ze=0;ce||ze;Ze++){const rt=e-Ze,St=e+Ze;Ze>1&&(rt<1||rt<t)&&(ce=!1),Ze>1&&(St>i||St>n)&&(ze=!1),Ze>5e4&&(ce=!1,ze=!1);let un=-1;if(ce){const An=this._computeIndentLevel(rt-1);An>=0?(u=rt-1,h=An,un=Math.ceil(An/this._options.indentSize)):(v(rt),un=this._getIndentLevelForWhitespaceLine(o,l,h))}let Kt=-1;if(ze){const An=this._computeIndentLevel(St-1);An>=0?(N=St-1,P=An,Kt=Math.ceil(An/this._options.indentSize)):(Se(St),Kt=this._getIndentLevelForWhitespaceLine(o,P,ee))}if(Ze===0){at=un;continue}if(Ze===1){if(St<=i&&Kt>=0&&at+1===Kt){ce=!1,Le=St,Ee=St,Qe=Kt;continue}if(rt>=1&&un>=0&&un-1===at){ze=!1,Le=rt,Ee=rt,Qe=un;continue}if(Le=e,Ee=e,Qe=at,Qe===0)return{startLineNumber:Le,endLineNumber:Ee,indent:Qe}}ce&&(un>=Qe?Le=rt:ce=!1),ze&&(Kt>=Qe?Ee=St:ze=!1)}return{startLineNumber:Le,endLineNumber:Ee,indent:Qe}}getLinesIndentGuides(e,t){this._assertNotDisposed();const n=this.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const i=$r.getFoldingRules(this._languageIdentifier.id),s=Boolean(i&&i.offSide);let o=new Array(t-e+1),a=-2,l=-1,u=-2,h=-1;for(let v=e;v<=t;v++){let N=v-e;const P=this._computeIndentLevel(v-1);if(P>=0){a=v-1,l=P,o[N]=Math.ceil(P/this._options.indentSize);continue}if(a===-2){a=-1,l=-1;for(let K=v-2;K>=0;K--){let ee=this._computeIndentLevel(K);if(ee>=0){a=K,l=ee;break}}}if(u!==-1&&(u===-2||u<v-1)){u=-1,h=-1;for(let K=v;K<n;K++){let ee=this._computeIndentLevel(K);if(ee>=0){u=K,h=ee;break}}}o[N]=this._getIndentLevelForWhitespaceLine(s,l,h)}return o}_getIndentLevelForWhitespaceLine(e,t,n){return t===-1||n===-1?0:t<n?1+Math.floor(t/this._options.indentSize):t===n?Math.ceil(n/this._options.indentSize):e?Math.ceil(n/this._options.indentSize):1+Math.floor(n/this._options.indentSize)}normalizePosition(e,t){return e}getLineIndentColumn(e){return G2(this.getLineContent(e))+1}}hl.MODEL_SYNC_LIMIT=50*1024*1024,hl.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024,hl.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3,hl.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Et.tabSize,indentSize:Et.indentSize,insertSpaces:Et.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Et.trimAutoWhitespace,largeFileOptimizations:Et.largeFileOptimizations};function G2(r){let e=0;for(const t of r)if(t===" "||t==="	")e++;else break;return e}function bC(r){return!!(r.options.overviewRuler&&r.options.overviewRuler.color)}function wC(r){return!!r.options.after||!!r.options.before}class ax{constructor(){this._decorationsTree0=new uC,this._decorationsTree1=new uC,this._injectedTextDecorationsTree=new uC}intervalSearch(e,t,n,i,s){const o=this._decorationsTree0.intervalSearch(e,t,n,i,s),a=this._decorationsTree1.intervalSearch(e,t,n,i,s),l=this._injectedTextDecorationsTree.intervalSearch(e,t,n,i,s);return o.concat(a).concat(l)}getInjectedTextInInterval(e,t,n,i){return this._injectedTextDecorationsTree.intervalSearch(e,t,n,!1,i)}getInjectedText(e,t){return this._injectedTextDecorationsTree.search(e,!1,t)}search(e,t,n,i){if(n)return this._decorationsTree1.search(e,t,i);{const s=this._decorationsTree0.search(e,t,i),o=this._decorationsTree1.search(e,t,i),a=this._injectedTextDecorationsTree.search(e,t,i);return s.concat(o).concat(a)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),i=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(i)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){wC(e)?this._injectedTextDecorationsTree.insert(e):bC(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){wC(e)?this._injectedTextDecorationsTree.delete(e):bC(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}resolveNode(e,t){wC(e)?this._injectedTextDecorationsTree.resolveNode(e,t):bC(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i),this._injectedTextDecorationsTree.acceptReplace(e,t,n,i)}}function pg(r){return r.replace(/[^a-z0-9\-_]/gi," ")}class lx{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class Y2 extends lx{constructor(e){super(e);this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:ec.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}}class Z2 extends lx{constructor(e){super(e);this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?Tn.fromHex(e):t.getColor(e.id)}}class ux{constructor(e){this.content=e||""}}class Fo{constructor(e){this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?pg(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new Y2(e.overviewRuler):null,this.minimap=e.minimap?new Z2(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?pg(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?pg(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?pg(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?pg(e.marginClassName):null,this.inlineClassName=e.inlineClassName?pg(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?pg(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?pg(e.afterContentClassName):null,this.after=e.after?new ux(e.after.content):null,this.before=e.before?new ux(e.before.content):null}static register(e){return new Fo(e)}static createDynamic(e){return new Fo(e)}}Fo.EMPTY=Fo.register({description:"empty"});const cx=[Fo.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Fo.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Fo.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Fo.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function hx(r){return r instanceof Fo?r:Fo.createDynamic(r)}class X2 extends Rn{constructor(e){super();this.handleBeforeFire=e,this._actual=this._register(new $t),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(t)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class q2 extends Rn{constructor(){super();this._fastEmitter=this._register(new $t),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new $t),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}const Q2=()=>!0,dx=()=>!1,J2=r=>r===" "||r==="	";class pc{constructor(e,t,n){this._cursorMoveConfigurationBrand=void 0,this._languageIdentifier=e;const i=n.options,s=i.get(128);this.readOnly=i.get(78),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=i.get(102),this.lineHeight=i.get(56),this.pageSize=Math.max(1,Math.floor(s.height/this.lineHeight)-2),this.useTabStops=i.get(113),this.wordSeparators=i.get(114),this.emptySelectionClipboard=i.get(30),this.copyWithSyntaxHighlighting=i.get(19),this.multiCursorMergeOverlapping=i.get(66),this.multiCursorPaste=i.get(68),this.autoClosingBrackets=i.get(5),this.autoClosingQuotes=i.get(8),this.autoClosingDelete=i.get(6),this.autoClosingOvertype=i.get(7),this.autoSurround=i.get(11),this.autoIndent=i.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:pc._getShouldAutoClose(e,this.autoClosingQuotes),bracket:pc._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=$r.getAutoClosingPairs(e.id);let o=pc._getSurroundingPairs(e);if(o)for(const a of o)this.surroundingPairs[a.open]=a.close}static shouldRecreate(e){return e.hasChanged(128)||e.hasChanged(114)||e.hasChanged(30)||e.hasChanged(66)||e.hasChanged(68)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(113)||e.hasChanged(56)||e.hasChanged(78)}get electricChars(){if(!this._electricChars){this._electricChars={};let e=pc._getElectricCharacters(this._languageIdentifier);if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}normalizeIndentation(e){return hl.normalizeIndentation(e,this.indentSize,this.insertSpaces)}static _getElectricCharacters(e){try{return $r.getElectricCharacters(e.id)}catch(t){return En(t),null}}static _getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return J2;case"languageDefined":return pc._getLanguageDefinedShouldAutoClose(e);case"always":return Q2;case"never":return dx}}static _getLanguageDefinedShouldAutoClose(e){try{const t=$r.getAutoCloseBeforeSet(e.id);return n=>t.indexOf(n)!==-1}catch(t){return En(t),dx}}static _getSurroundingPairs(e){try{return $r.getSurroundingPairs(e.id)}catch(t){return En(t),null}}}class Qo{constructor(e,t,n,i){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=n,this.leftoverVisibleColumns=i,this.selection=Qo._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,i){return e?new Qo(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new dn(t,n),i):new Qo(new Mt(t,n,t,n),i,new dn(t,n),i)}static _computeSelection(e,t){let n,i,s,o;return e.isEmpty()?(n=e.startLineNumber,i=e.startColumn,s=t.lineNumber,o=t.column):t.isBeforeOrEqual(e.getStartPosition())?(n=e.endLineNumber,i=e.endColumn,s=t.lineNumber,o=t.column):(n=e.startLineNumber,i=e.startColumn,s=t.lineNumber,o=t.column),new oi(n,i,s,o)}}class fx{constructor(e,t,n){this._cursorContextBrand=void 0,this.model=e,this.coordinatesConverter=t,this.cursorConfig=n}}class eM{constructor(e){this.modelState=e,this.viewState=null}}class tM{constructor(e){this.modelState=null,this.viewState=e}}class ar{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new eM(e)}static fromViewState(e){return new tM(e)}static fromModelSelection(e){const t=e.selectionStartLineNumber,n=e.selectionStartColumn,i=e.positionLineNumber,s=e.positionColumn,o=new Qo(new Mt(t,n,t,n),0,new dn(i,s),0);return ar.fromModelState(o)}static fromModelSelections(e){let t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this.fromModelSelection(e[n]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class kl{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}class Zr{static visibleColumnFromColumn(e,t,n){const i=e.length,s=t-1<i?t-1:i;let o=0,a=0;for(;a<s;){const l=wl(e,s,a);if(a+=l>=65536?2:1,l===9)o=Zr.nextRenderTabStop(o,n);else{let u=Kl(l);for(;a<s;){const h=wl(e,s,a),v=Kl(h);if(ho(u,v))break;a+=h>=65536?2:1,u=v}Ja(l)||ko(l)?o=o+2:o=o+1}}return o}static visibleColumnsByColumns(e,t){const n=e.length;let i=new Array;i.push(-1);let s=0,o=0;for(;o<n;){const a=wl(e,n,o);if(o+=a>=65536?2:1,i.push(s),a>=65536&&i.push(s),a===9)s=Zr.nextRenderTabStop(s,t);else{let l=Kl(a);for(;o<n;){const u=wl(e,n,o),h=Kl(u);if(ho(l,h))break;o+=u>=65536?2:1,i.push(s),a>=65536&&i.push(s),l=h}Ja(a)||ko(a)?s=s+2:s=s+1}}return i.push(s),i}static visibleColumnFromColumn2(e,t,n){return this.visibleColumnFromColumn(t.getLineContent(n.lineNumber),n.column,e.tabSize)}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const i=e.length;let s=0,o=1,a=0;for(;a<i;){const l=wl(e,i,a);a+=l>=65536?2:1;let u;if(l===9)u=Zr.nextRenderTabStop(s,n);else{let v=Kl(l);for(;a<i;){const N=wl(e,i,a),P=Kl(N);if(ho(v,P))break;a+=N>=65536?2:1,v=P}Ja(l)||ko(l)?u=s+2:u=s+1}const h=a+1;if(u>=t){const v=t-s;return u-t<v?h:o}s=u,o=h}return i+1}static columnFromVisibleColumn2(e,t,n,i){let s=this.columnFromVisibleColumn(t.getLineContent(n),i,e.tabSize),o=t.getLineMinColumn(n);if(s<o)return o;let a=t.getLineMaxColumn(n);return s>a?a:s}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}function u0(r){return r==="'"||r==='"'||r==="`"}class cy{static whitespaceVisibleColumn(e,t,n){const i=e.length;let s=0,o=-1,a=-1;for(let l=0;l<i;l++){if(l===t)return[o,a,s];switch(s%n==0&&(o=l,a=s),e.charCodeAt(l)){case 32:s+=1;break;case 9:s=Zr.nextRenderTabStop(s,n);break;default:return[-1,-1,-1]}}return t===i?[o,a,s]:[-1,-1,-1]}static atomicPosition(e,t,n,i){const s=e.length,[o,a,l]=cy.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let u;switch(i){case 0:u=!0;break;case 1:u=!1;break;case 2:if(l%n==0)return t;u=l%n<=n/2;break}if(u){if(o===-1)return-1;let N=a;for(let P=o;P<s;++P){if(N===a+n)return o;switch(e.charCodeAt(P)){case 32:N+=1;break;case 9:N=Zr.nextRenderTabStop(N,n);break;default:return-1}}return N===a+n?o:-1}const h=Zr.nextRenderTabStop(l,n);let v=l;for(let N=t;N<s;N++){if(v===h)return N;switch(e.charCodeAt(N)){case 32:v+=1;break;case 9:v=Zr.nextRenderTabStop(v,n);break;default:return-1}}return v===h?s:-1}}class mg{constructor(e=null){this.hitTarget=e,this.type=0}}class gx{constructor(e,t){this.position=e,this.spanNode=t,this.type=1}}var im;(function(r){function e(t,n,i){const s=t.getPositionFromDOMInfo(n,i);return s?new gx(s,n):new mg(n)}r.createFromDOMInfo=e})(im||(im={}));class nM{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class zc{constructor(e,t,n=0,i=null,s=null,o=null){this.element=e,this.type=t,this.mouseColumn=n,this.position=i,!s&&i&&(s=new Mt(i.lineNumber,i.column,i.lineNumber,i.column)),this.range=s,this.detail=o}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+e.detail}toString(){return zc.toString(this)}}class mc{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}class c0{constructor(e,t,n){this.model=e.model;const i=e.configuration.options;this.layoutInfo=i.get(128),this.viewDomNode=t.viewDomNode,this.lineHeight=i.get(56),this.stickyTabStops=i.get(102),this.typicalHalfwidthCharacterWidth=i.get(40).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return c0.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const i=n.verticalOffset+n.height/2,s=e.model.getLineCount();let o=null,a,l=null;return n.afterLineNumber!==s&&(l=new dn(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(o=new dn(n.afterLineNumber,e.model.getLineMaxColumn(n.afterLineNumber))),l===null?a=o:o===null?a=l:t<i?a=o:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:o,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const i=this._context.model.getLineCount(),s=this._context.model.getLineMaxColumn(i);return{range:new Mt(i,s,i,s),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.model.getLineMaxColumn(t);return{range:new Mt(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return c0._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class iM{constructor(e,t,n){this.editorPos=t,this.pos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+n.y-t.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+n.x-t.x-e.layoutInfo.contentLeft,this.isInMarginArea=n.x-t.x<e.layoutInfo.contentLeft&&n.x-t.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,da._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class CC extends iM{constructor(e,t,n,i){super(e,t,n);this._ctx=e,i?(this.target=i,this.targetPath=kh.collect(i,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}fulfill(e,t=null,n=null,i=null){let s=this.mouseColumn;return t&&t.column<this._ctx.model.getLineMaxColumn(t.lineNumber)&&(s=Zr.visibleColumnFromColumn(this._ctx.model.getLineContent(t.lineNumber),t.column,this._ctx.model.getTextModelOptions().tabSize)+1),new zc(this.target,e,s,t,n,i)}withTarget(e){return new CC(this._ctx,this.editorPos,this.pos,e)}}const px={isAfterLines:!0};function SC(r){return{isAfterLines:!1,horizontalDistanceToText:r}}class da{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=kh.collect(t,this._viewHelper.viewDomNode);return!!(mc.isChildOfContentWidgets(n)||mc.isChildOfOverflowingContentWidgets(n)||mc.isChildOfOverlayWidgets(n))}createMouseTarget(e,t,n,i){const s=new c0(this._context,this._viewHelper,e),o=new CC(s,t,n,i);try{return da._createMouseTarget(s,o,!1)}catch(a){return o.fulfill(0)}}static _createMouseTarget(e,t,n){if(t.target===null){if(n)return t.fulfill(0);const o=da._doHitTest(e,t);return o.type===1?da.createMouseTargetFromHitTestPosition(e,t,o.spanNode,o.position):this._createMouseTarget(e,t.withTarget(o.hitTarget),!0)}const i=t;let s=null;return s=s||da._hitTestContentWidget(e,i),s=s||da._hitTestOverlayWidget(e,i),s=s||da._hitTestMinimap(e,i),s=s||da._hitTestScrollbarSlider(e,i),s=s||da._hitTestViewZone(e,i),s=s||da._hitTestMargin(e,i),s=s||da._hitTestViewCursor(e,i),s=s||da._hitTestTextArea(e,i),s=s||da._hitTestViewLines(e,i,n),s=s||da._hitTestScrollbar(e,i),s||t.fulfill(0)}static _hitTestContentWidget(e,t){if(mc.isChildOfContentWidgets(t.targetPath)||mc.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(9,null,null,n):t.fulfill(0)}return null}static _hitTestOverlayWidget(e,t){if(mc.isChildOfOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(12,null,null,n):t.fulfill(0)}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const i of n)if(t.target===i.domNode)return t.fulfill(6,i.position,null,{mightBeForeignElement:!1})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,i=t.mouseContentHorizontalOffset,s=t.mouseVerticalOffset;for(const o of n){if(i<o.contentLeft||i>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=s&&s<=a+o.height)return t.fulfill(6,o.position,null,{mightBeForeignElement:!1})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const i=t.isInContentArea?8:5;return t.fulfill(i,n.position,null,n)}return null}static _hitTestTextArea(e,t){return mc.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfill(6,e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1}):t.fulfill(1,e.lastRenderData.lastTextareaPosition):null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),i=n.range.getStartPosition();let s=Math.abs(t.pos.x-t.editorPos.x);const o={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:s};return s-=e.layoutInfo.glyphMarginLeft,s<=e.layoutInfo.glyphMarginWidth?t.fulfill(2,i,n.range,o):(s-=e.layoutInfo.glyphMarginWidth,s<=e.layoutInfo.lineNumbersWidth?t.fulfill(3,i,n.range,o):(s-=e.layoutInfo.lineNumbersWidth,t.fulfill(4,i,n.range,o)))}return null}static _hitTestViewLines(e,t,n){if(!mc.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfill(7,new dn(1,1),null,px);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const s=e.model.getLineCount(),o=e.model.getLineMaxColumn(s);return t.fulfill(7,new dn(s,o),null,px)}if(n){if(mc.isStrictChildOfViewLines(t.targetPath)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.model.getLineLength(s)===0){const a=e.getLineWidth(s),l=SC(t.mouseContentHorizontalOffset-a);return t.fulfill(7,new dn(s,1),null,l)}const o=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>=o){const a=SC(t.mouseContentHorizontalOffset-o),l=new dn(s,e.model.getLineMaxColumn(s));return t.fulfill(7,l,null,a)}}return t.fulfill(0)}const i=da._doHitTest(e,t);return i.type===1?da.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position):this._createMouseTarget(e,t.withTarget(i.hitTarget),!0)}static _hitTestMinimap(e,t){if(mc.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.model.getLineMaxColumn(n);return t.fulfill(11,new dn(n,i))}return null}static _hitTestScrollbarSlider(e,t){if(mc.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.model.getLineMaxColumn(i);return t.fulfill(11,new dn(i,s))}}return null}static _hitTestScrollbar(e,t){if(mc.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.model.getLineMaxColumn(n);return t.fulfill(11,new dn(n,i))}return null}getMouseColumn(e,t){const n=this._context.configuration.options,i=n.get(128),s=this._context.viewLayout.getCurrentScrollLeft()+t.x-e.x-i.contentLeft;return da._getMouseColumn(s,n.get(40).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,i){const s=i.lineNumber,o=i.column,a=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>a){const ee=SC(t.mouseContentHorizontalOffset-a);return t.fulfill(7,i,null,ee)}const l=e.visibleRangeForPosition(s,o);if(!l)return t.fulfill(0,i);const u=l.left;if(t.mouseContentHorizontalOffset===u)return t.fulfill(6,i,null,{mightBeForeignElement:!1});const h=[];if(h.push({offset:l.left,column:o}),o>1){const ee=e.visibleRangeForPosition(s,o-1);ee&&h.push({offset:ee.left,column:o-1})}const v=e.model.getLineMaxColumn(s);if(o<v){const ee=e.visibleRangeForPosition(s,o+1);ee&&h.push({offset:ee.left,column:o+1})}h.sort((ee,Se)=>ee.offset-Se.offset);const N=t.pos.toClientCoordinates(),P=n.getBoundingClientRect(),K=P.left<=N.clientX&&N.clientX<=P.right;for(let ee=1;ee<h.length;ee++){const Se=h[ee-1],Le=h[ee];if(Se.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=Le.offset){const ce=new Mt(s,Se.column,s,Le.column);return t.fulfill(6,i,ce,{mightBeForeignElement:!K})}}return t.fulfill(6,i,null,{mightBeForeignElement:!K})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.getVerticalOffsetForLineNumber(n)+Math.floor(e.lineHeight/2);let o=t.pos.y+(s-t.mouseVerticalOffset);o<=t.editorPos.y&&(o=t.editorPos.y+1),o>=t.editorPos.y+e.layoutInfo.height&&(o=t.editorPos.y+e.layoutInfo.height-1);const a=new sC(t.pos.x,o),l=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return l.type===1?l:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=Ec(e.viewDomNode);let i;if(n?typeof n.caretRangeFromPoint=="undefined"?i=rM(n,t.clientX,t.clientY):i=n.caretRangeFromPoint(t.clientX,t.clientY):i=document.caretRangeFromPoint(t.clientX,t.clientY),!i||!i.startContainer)return new mg;const s=i.startContainer;if(s.nodeType===s.TEXT_NODE){const o=s.parentNode,a=o?o.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===Ah.CLASS_NAME?im.createFromDOMInfo(e,o,i.startOffset):new mg(s.parentNode)}else if(s.nodeType===s.ELEMENT_NODE){const o=s.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Ah.CLASS_NAME?im.createFromDOMInfo(e,s,s.textContent.length):new mg(s)}return new mg}static _doHitTestWithCaretPositionFromPoint(e,t){const n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const i=n.offsetNode.parentNode,s=i?i.parentNode:null,o=s?s.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===Ah.CLASS_NAME?im.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new mg(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const i=n.offsetNode.parentNode,s=i&&i.nodeType===i.ELEMENT_NODE?i.className:null,o=i?i.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(s===Ah.CLASS_NAME){const l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return im.createFromDOMInfo(e,l,0)}else if(a===Ah.CLASS_NAME)return im.createFromDOMInfo(e,n.offsetNode,0)}return new mg(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:i}=t.getTextModelOptions(),s=cy.atomicPosition(n,e.column-1,i,2);return s!==-1?new dn(e.lineNumber,s+1):e}static _doHitTest(e,t){let n=new mg;return typeof document.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1&&e.stickyTabStops&&(n=new gx(this._snapToSoftTabBoundary(n.position,e.model),n.spanNode)),n}}function rM(r,e,t){const n=document.createRange();let i=r.elementFromPoint(e,t);if(i!==null){for(;i&&i.firstChild&&i.firstChild.nodeType!==i.firstChild.TEXT_NODE&&i.lastChild&&i.lastChild.firstChild;)i=i.lastChild;const s=i.getBoundingClientRect(),o=window.getComputedStyle(i,null).getPropertyValue("font"),a=i.innerText;let l=s.left,u=0,h;if(e>s.left+s.width)u=a.length;else{const v=rm.getInstance();for(let N=0;N<a.length+1;N++){if(h=v.getCharWidth(a.charAt(N),o)/2,l+=h,e<l){u=N;break}l+=h}}n.setStart(i.firstChild,u),n.setEnd(i.firstChild,u)}return n}class rm{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return rm._INSTANCE||(rm._INSTANCE=new rm),rm._INSTANCE}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const i=this._canvas.getContext("2d");i.font=t;const o=i.measureText(e).width;return this._cache[n]=o,o}}rm._INSTANCE=null;function Jb(r){return function(e,t){let n=!1;return r&&(n=r.mouseTargetIsWidget(t)),n||t.preventDefault(),t}}class sm extends ny{constructor(e,t,n){super();this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new da(this._context,n),this._mouseDownOperation=this._register(new sM(this._context,this.viewController,this.viewHelper,(o,a)=>this._createMouseTarget(o,a),o=>this._getMouseColumn(o))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(128).height;const i=new zT(this.viewHelper.viewDomNode);this._register(i.onContextMenu(this.viewHelper.viewDomNode,o=>this._onContextMenu(o,!0))),this._register(i.onMouseMoveThrottled(this.viewHelper.viewDomNode,o=>this._onMouseMove(o),Jb(this.mouseTargetFactory),sm.MOUSE_MOVE_MINIMUM_TIME)),this._register(i.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(i.onMouseLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(i.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o)));const s=o=>{if(this.viewController.emitMouseWheel(o),!this._context.configuration.options.get(65))return;const a=new cs(o);if(ae?(o.metaKey||o.ctrlKey)&&!o.shiftKey&&!o.altKey:o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey){const u=gh.getZoomLevel(),h=a.deltaY>0?1:-1;gh.setZoomLevel(u+h),a.preventDefault(),a.stopPropagation()}};this._register(yn(this.viewHelper.viewDomNode,hi.MOUSE_WHEEL,s,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(128)){const t=this._context.configuration.options.get(128).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){const i=new PL(e,t).toPageCoordinates(),s=FL(this.viewHelper.viewDomNode);return i.y<s.y||i.y>s.y+s.height||i.x<s.x||i.x>s.x+s.width?null:this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),s,i,null)}_createMouseTarget(e,t){return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,t?e.target:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.editorPos,e.pos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){const t=this._createMouseTarget(e,!0),n=t.type===6||t.type===7,i=t.type===2||t.type===3||t.type===4,s=t.type===3,o=this._context.configuration.options.get(96),a=t.type===8||t.type===5,l=t.type===9;let u=e.leftButton||e.middleButton;ae&&e.leftButton&&e.ctrlKey&&(u=!1);const h=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(u&&(n||s&&o))h(),this._mouseDownOperation.start(t.type,e);else if(i)e.preventDefault();else if(a){const v=t.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(v.viewZoneId)&&(h(),this._mouseDownOperation.start(t.type,e),e.preventDefault())}else l&&this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)&&(h(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:t})}}sm.MOUSE_MOVE_MINIMUM_TIME=100;class sM extends Rn{constructor(e,t,n,i,s){super();this._context=e,this._viewController=t,this._viewHelper=n,this._createMouseTarget=i,this._getMouseColumn=s,this._mouseMoveMonitor=this._register(new jT(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new sa),this._mouseState=new ew,this._currentSelection=new oi(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!0);!t||(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;const i=this._context.configuration.options;if(!i.get(78)&&i.get(29)&&!i.get(16)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&n.type===6&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,Jb(null),s=>this._onMouseDownThenMove(s),s=>{const o=this._findMousePosition(this._lastMouseEvent,!0);s&&s instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:o?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,Jb(null),s=>this._onMouseDownThenMove(s),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){!this._isActive||this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);!e||this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0)},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.model,i=this._context.viewLayout,s=this._getMouseColumn(e);if(e.posy<t.y){const a=Math.max(i.getCurrentScrollTop()-(t.y-e.posy),0),l=c0.getZoneAtCoord(this._context,a);if(l){const h=this._helpPositionJumpOverViewZone(l);if(h)return new zc(null,13,s,h)}const u=i.getLineNumberAtVerticalOffset(a);return new zc(null,13,s,new dn(u,1))}if(e.posy>t.y+t.height){const a=i.getCurrentScrollTop()+(e.posy-t.y),l=c0.getZoneAtCoord(this._context,a);if(l){const h=this._helpPositionJumpOverViewZone(l);if(h)return new zc(null,13,s,h)}const u=i.getLineNumberAtVerticalOffset(a);return new zc(null,13,s,new dn(u,n.getLineMaxColumn(u)))}const o=i.getLineNumberAtVerticalOffset(i.getCurrentScrollTop()+(e.posy-t.y));return e.posx<t.x?new zc(null,13,s,new dn(o,1)):e.posx>t.x+t.width?new zc(null,13,s,new dn(o,n.getLineMaxColumn(o))):null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const i=this._createMouseTarget(e,t);if(!i.position)return null;if(i.type===8||i.type===5){const o=this._helpPositionJumpOverViewZone(i.detail);if(o)return new zc(i.element,i.type,i.mouseColumn,o,null,i.detail)}return i}_helpPositionJumpOverViewZone(e){const t=new dn(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,i=e.positionAfter;return n&&i?n.isBefore(t)?n:i:null}_dispatchMouse(e,t){!e.position||this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton})}}class ew{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>ew.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}ew.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var vc;(function(r){r.text="text/plain",r.binary="application/octet-stream",r.unknown="application/unknown",r.markdown="text/markdown"})(vc||(vc={}));let tw=[],mx=[],vx=[];function nw(r,e=!1){const t=oM(r);tw.push(t),t.userConfigured?vx.push(t):mx.push(t),e&&!t.userConfigured&&tw.forEach(n=>{n.mime===t.mime||n.userConfigured||(t.extension&&n.extension===t.extension&&console.warn(`Overwriting extension <<${t.extension}>> to now point to mime <<${t.mime}>>`),t.filename&&n.filename===t.filename&&console.warn(`Overwriting filename <<${t.filename}>> to now point to mime <<${t.mime}>>`),t.filepattern&&n.filepattern===t.filepattern&&console.warn(`Overwriting filepattern <<${t.filepattern}>> to now point to mime <<${t.mime}>>`),t.firstline&&n.firstline===t.firstline&&console.warn(`Overwriting firstline <<${t.firstline}>> to now point to mime <<${t.mime}>>`))})}function oM(r){return{id:r.id,mime:r.mime,filename:r.filename,extension:r.extension,filepattern:r.filepattern,firstline:r.firstline,userConfigured:r.userConfigured,filenameLowercase:r.filename?r.filename.toLowerCase():void 0,extensionLowercase:r.extension?r.extension.toLowerCase():void 0,filepatternLowercase:r.filepattern?r.filepattern.toLowerCase():void 0,filepatternOnPath:r.filepattern?r.filepattern.indexOf(Ve.sep)>=0:!1}}function aM(r,e){let t;if(r)switch(r.scheme){case Ar.file:t=r.fsPath;break;case Ar.data:t=hh.parseMetaData(r).get(hh.META_DATA_LABEL);break;default:t=r.path}if(!t)return[vc.unknown];t=t.toLowerCase();const n=Xt(t),i=_x(t,n,vx);if(i)return[i,vc.text];const s=_x(t,n,mx);if(s)return[s,vc.text];if(e){const o=lM(e);if(o)return[o,vc.text]}return[vc.unknown]}function _x(r,e,t){let n=null,i=null,s=null;for(let o=t.length-1;o>=0;o--){const a=t[o];if(e===a.filenameLowercase){n=a;break}if(a.filepattern&&(!i||a.filepattern.length>i.filepattern.length)){const l=a.filepatternOnPath?r:e;ov(a.filepatternLowercase,l)&&(i=a)}a.extension&&(!s||a.extension.length>s.extension.length)&&e.endsWith(a.extensionLowercase)&&(s=a)}return n?n.mime:i?i.mime:s?s.mime:null}function lM(r){if(Pa(r)&&(r=r.substr(1)),r.length>0)for(let e=tw.length-1;e>=0;e--){const t=tw[e];if(!t.firstline)continue;const n=r.match(t.firstline);if(n&&n.length>0)return t.mime}return null}const _c=!1;class So{constructor(e,t,n,i,s){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selectionStartPosition=i,this.selectionEndPosition=s}toString(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+"]"}static readFromTextArea(e){return new So(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new So(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,n){_c&&console.log("writeToTextArea "+e+": "+this.toString()),t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const i=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,i,-1)}if(e>=this.selectionEnd){const i=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,i,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);const n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,n,-1)}_finishDeduceEditorPosition(e,t,n){let i=0,s=-1;for(;(s=t.indexOf(`
`,s+1))!==-1;)i++;return[e,n*t.length,i]}static selectedText(e){return new So(e,0,e.length,null,null)}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};_c&&(console.log("------------------------deduceInput"),console.log("PREVIOUS STATE: "+e.toString()),console.log("CURRENT STATE: "+t.toString()));let i=e.value,s=e.selectionStart,o=e.selectionEnd,a=t.value,l=t.selectionStart,u=t.selectionEnd;const h=i.substring(o),v=a.substring(u),N=ih(h,v);a=a.substring(0,a.length-N),i=i.substring(0,i.length-N);const P=i.substring(0,s),K=a.substring(0,l),ee=$g(P,K);if(a=a.substring(ee),i=i.substring(ee),l-=ee,s-=ee,u-=ee,o-=ee,_c&&(console.log("AFTER DIFFING PREVIOUS STATE: <"+i+">, selectionStart: "+s+", selectionEnd: "+o),console.log("AFTER DIFFING CURRENT STATE: <"+a+">, selectionStart: "+l+", selectionEnd: "+u)),n&&l===u&&i.length>0){let Le=null;if(l===a.length?a.startsWith(i)&&(Le=a.substring(i.length)):a.endsWith(i)&&(Le=a.substring(0,a.length-i.length)),Le!==null&&Le.length>0&&(/\uFE0F/.test(Le)||Cr(Le)))return{text:Le,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0}}if(l===u){if(i===a&&s===0&&o===i.length&&l===a.length&&a.indexOf(`
`)===-1&&Gg(a))return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const Le=P.length-ee;return _c&&console.log("REMOVE PREVIOUS: "+(P.length-ee)+" chars"),{text:a,replacePrevCharCnt:Le,replaceNextCharCnt:0,positionDelta:0}}const Se=o-s;return{text:a,replacePrevCharCnt:Se,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(_c&&(console.log("------------------------deduceAndroidCompositionInput"),console.log("PREVIOUS STATE: "+e.toString()),console.log("CURRENT STATE: "+t.toString())),e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min($g(e.value,t.value),e.selectionEnd),i=Math.min(ih(e.value,t.value),e.value.length-e.selectionEnd),s=e.value.substring(n,e.value.length-i),o=t.value.substring(n,t.value.length-i),a=e.selectionStart-n,l=e.selectionEnd-n,u=t.selectionStart-n,h=t.selectionEnd-n;return _c&&(console.log("AFTER DIFFING PREVIOUS STATE: <"+s+">, selectionStart: "+a+", selectionEnd: "+l),console.log("AFTER DIFFING CURRENT STATE: <"+o+">, selectionStart: "+u+", selectionEnd: "+h)),{text:o,replacePrevCharCnt:l,replaceNextCharCnt:s.length-l,positionDelta:h-o.length}}}So.EMPTY=new So("",0,0,null,null);class h0{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,i=n+1,s=n+t;return new Mt(i,1,s+1,1)}static fromEditorSelection(e,t,n,i,s){const o=h0._getPageOfLine(n.startLineNumber,i),a=h0._getRangeForPage(o,i),l=h0._getPageOfLine(n.endLineNumber,i),u=h0._getRangeForPage(l,i),h=a.intersectRanges(new Mt(1,1,n.startLineNumber,n.startColumn));let v=t.getValueInRange(h,1);const N=t.getLineCount(),P=t.getLineMaxColumn(N),K=u.intersectRanges(new Mt(n.endLineNumber,n.endColumn,N,P));let ee=t.getValueInRange(K,1),Se;if(o===l||o+1===l)Se=t.getValueInRange(n,1);else{const Le=a.intersectRanges(n),ce=u.intersectRanges(n);Se=t.getValueInRange(Le,1)+String.fromCharCode(8230)+t.getValueInRange(ce,1)}if(s){const Le=500;v.length>Le&&(v=v.substring(v.length-Le,v.length)),ee.length>Le&&(ee=ee.substring(0,Le)),Se.length>2*Le&&(Se=Se.substring(0,Le)+String.fromCharCode(8230)+Se.substring(Se.length-Le,Se.length))}return new So(v+Se+ee,v.length,v.length+Se.length,new dn(n.startLineNumber,n.startColumn),new dn(n.endLineNumber,n.endColumn))}}var iw;(function(r){r.Tap="-monaco-textarea-synthetic-tap"})(iw||(iw={}));const uM={forceCopyWithSyntaxHighlighting:!1};class rw{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}rw.INSTANCE=new rw;class cM extends Rn{constructor(e,t){super();this.textArea=t,this._onFocus=this._register(new $t),this.onFocus=this._onFocus.event,this._onBlur=this._register(new $t),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new $t),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new $t),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new $t),this.onCut=this._onCut.event,this._onPaste=this._register(new $t),this.onPaste=this._onPaste.event,this._onType=this._register(new $t),this.onType=this._onType.event,this._onCompositionStart=this._register(new $t),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new $t),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new $t),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new $t),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._host=e,this._textArea=this._register(new hM(t)),this._asyncTriggerCut=this._register(new ys(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new ys(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=So.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._isDoingComposition=!1,this._nextCommand=0;let n=null;this._register(eo(t.domNode,"keydown",a=>{(a.keyCode===109||this._isDoingComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),n=a,this._onKeyDown.fire(a)})),this._register(eo(t.domNode,"keyup",a=>{this._onKeyUp.fire(a)})),this._register(yn(t.domNode,"compositionstart",a=>{if(_c&&console.log("[compositionstart]",a),!this._isDoingComposition){if(this._isDoingComposition=!0,ae&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===a.data&&(n&&n.equals(109)&&(n.code==="ArrowRight"||n.code==="ArrowLeft")||ri)){_c&&console.log("[compositionstart] Handling long press case on macOS + arrow key or Firefox",a),this._textAreaState=new So(this._textAreaState.value,this._textAreaState.selectionStart-1,this._textAreaState.selectionEnd,this._textAreaState.selectionStartPosition?new dn(this._textAreaState.selectionStartPosition.lineNumber,this._textAreaState.selectionStartPosition.column-1):null,this._textAreaState.selectionEndPosition),this._onCompositionStart.fire({revealDeltaColumns:-1});return}if(Dr){this._onCompositionStart.fire({revealDeltaColumns:-this._textAreaState.selectionStart});return}this._setAndWriteTextAreaState("compositionstart",So.EMPTY),this._onCompositionStart.fire({revealDeltaColumns:0})}}));const i=a=>{const l=this._textAreaState,u=So.readFromTextArea(this._textArea);return[u,So.deduceInput(l,u,a)]},s=()=>{const a=this._textAreaState,l=So.readFromTextArea(this._textArea);return[l,So.deduceAndroidCompositionInput(a,l)]},o=a=>{const l=this._textAreaState,u=So.selectedText(a),h={text:u.value,replacePrevCharCnt:l.selectionEnd-l.selectionStart,replaceNextCharCnt:0,positionDelta:0};return[u,h]};this._register(yn(t.domNode,"compositionupdate",a=>{if(_c&&console.log("[compositionupdate]",a),Dr){const[h,v]=s();this._textAreaState=h,this._onType.fire(v),this._onCompositionUpdate.fire(a);return}const[l,u]=o(a.data||"");this._textAreaState=l,this._onType.fire(u),this._onCompositionUpdate.fire(a)})),this._register(yn(t.domNode,"compositionend",a=>{if(_c&&console.log("[compositionend]",a),!this._isDoingComposition)return;if(this._isDoingComposition=!1,Dr){const[h,v]=s();this._textAreaState=h,this._onType.fire(v),this._onCompositionEnd.fire();return}const[l,u]=o(a.data||"");this._textAreaState=l,this._onType.fire(u),(Ui||ri)&&(this._textAreaState=So.readFromTextArea(this._textArea)),this._onCompositionEnd.fire()})),this._register(yn(t.domNode,"input",()=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._isDoingComposition)return;const[a,l]=i(ae);l.replacePrevCharCnt===0&&l.text.length===1&&Zs(l.text.charCodeAt(0))||(this._textAreaState=a,this._nextCommand===0?(l.text!==""||l.replacePrevCharCnt!==0)&&this._onType.fire(l):((l.text!==""||l.replacePrevCharCnt!==0)&&this._firePaste(l.text,null),this._nextCommand=0))})),this._register(yn(t.domNode,"cut",a=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(a),this._asyncTriggerCut.schedule()})),this._register(yn(t.domNode,"copy",a=>{this._ensureClipboardGetsEditorSelection(a)})),this._register(yn(t.domNode,"paste",a=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),hy.canUseTextData(a)){const[l,u]=hy.getTextData(a);l!==""&&this._firePaste(l,u)}else this._textArea.getSelectionStart()!==this._textArea.getSelectionEnd()&&this._setAndWriteTextAreaState("paste",So.EMPTY),this._nextCommand=1})),this._register(yn(t.domNode,"focus",()=>{const a=this._hasFocus;this._setHasFocus(!0),Oi&&!a&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(yn(t.domNode,"blur",()=>{this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(yn(t.domNode,iw.Tap,()=>{Dr&&this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return yn(document,"selectionchange",t=>{if(!this._hasFocus||this._isDoingComposition||!Ui)return;const n=Date.now(),i=n-e;if(e=n,i<5)return;const s=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const u=this._textAreaState.deduceEditorPosition(a),h=this._host.deduceModelPosition(u[0],u[1],u[2]),v=this._textAreaState.deduceEditorPosition(l),N=this._host.deduceModelPosition(v[0],v[1],v[2]),P=new oi(h.lineNumber,h.column,N.lineNumber,N.column);this._onSelectionChangeRequest.fire(P)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){const e=Ec(this.textArea.domNode);e?this._setHasFocus(e.activeElement===this.textArea.domNode):ju(this.textArea.domNode)?this._setHasFocus(document.activeElement===this.textArea.domNode):this._setHasFocus(!1)}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._isDoingComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(hy.canUseTextData(e)),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};if(rw.INSTANCE.set(ri?t.text.replace(/\r\n/g,`
`):t.text,n),!hy.canUseTextData(e)){this._setAndWriteTextAreaState("copy or cut",So.selectedText(t.text));return}hy.setTextData(e,t.text,t.html,n)}_firePaste(e,t){t||(t=rw.INSTANCE.get(e)),this._onPaste.fire({text:e,metadata:t})}}class hy{static canUseTextData(e){return!!(e.clipboardData||window.clipboardData)}static getTextData(e){if(e.clipboardData){e.preventDefault();const t=e.clipboardData.getData(vc.text);let n=null;const i=e.clipboardData.getData("vscode-editor-data");if(typeof i=="string")try{n=JSON.parse(i),n.version!==1&&(n=null)}catch(s){}return[t,n]}if(window.clipboardData)return e.preventDefault(),[window.clipboardData.getData("Text"),null];throw new Error("ClipboardEventUtils.getTextData: Cannot use text data!")}static setTextData(e,t,n,i){if(e.clipboardData){e.clipboardData.setData(vc.text,t),typeof n=="string"&&e.clipboardData.setData("text/html",n),e.clipboardData.setData("vscode-editor-data",JSON.stringify(i)),e.preventDefault();return}if(window.clipboardData){window.clipboardData.setData("Text",t),e.preventDefault();return}throw new Error("ClipboardEventUtils.setTextData: Cannot use text data!")}}class hM extends Rn{constructor(e){super();this._actual=e,this._ignoreSelectionChangeTime=0}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.domNode.value}setValue(e,t){const n=this._actual.domNode;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.domNode.selectionDirection==="backward"?this._actual.domNode.selectionEnd:this._actual.domNode.selectionStart}getSelectionEnd(){return this._actual.domNode.selectionDirection==="backward"?this._actual.domNode.selectionStart:this._actual.domNode.selectionEnd}setSelectionRange(e,t,n){const i=this._actual.domNode;let s=null;const o=Ec(i);o?s=o.activeElement:s=document.activeElement;const a=s===i,l=i.selectionStart,u=i.selectionEnd;if(a&&l===t&&u===n){ri&&window.parent!==window&&i.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),i.setSelectionRange(t,n),ri&&window.parent!==window&&i.focus();return}try{const h=zl(i);this.setIgnoreSelectionChangeTime("setSelectionRange"),i.focus(),i.setSelectionRange(t,n),sf(i,h)}catch(h){}}}class dM extends sm{constructor(e,t,n){super(e,t,n);this._register(es.addTarget(this.viewHelper.linesContentDomNode)),this._register(yn(this.viewHelper.linesContentDomNode,ms.Tap,s=>this.onTap(s))),this._register(yn(this.viewHelper.linesContentDomNode,ms.Change,s=>this.onChange(s))),this._register(yn(this.viewHelper.linesContentDomNode,ms.Contextmenu,s=>this._onContextMenu(new em(s,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(yn(this.viewHelper.linesContentDomNode,"pointerdown",s=>{const o=s.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const i=new UT(this.viewHelper.viewDomNode);this._register(i.onPointerMoveThrottled(this.viewHelper.viewDomNode,s=>this._onMouseMove(s),Jb(this.mouseTargetFactory),sm.MOUSE_MOVE_MINIMUM_TIME)),this._register(i.onPointerUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(i.onPointerLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s))),this._register(i.onPointerDown(this.viewHelper.viewDomNode,s=>this._onMouseDown(s)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new em(e,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1})}onChange(e){this._lastPointerType==="touch"&&this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e)}}class fM extends sm{constructor(e,t,n){super(e,t,n);this._register(es.addTarget(this.viewHelper.linesContentDomNode)),this._register(yn(this.viewHelper.linesContentDomNode,ms.Tap,i=>this.onTap(i))),this._register(yn(this.viewHelper.linesContentDomNode,ms.Change,i=>this.onChange(i))),this._register(yn(this.viewHelper.linesContentDomNode,ms.Contextmenu,i=>this._onContextMenu(new em(i,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new em(e,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(iw.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position)}}onChange(e){this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}}class gM extends Rn{constructor(e,t,n){super();te&&tt.pointerEvents?this.handler=this._register(new dM(e,t,n)):window.TouchEvent?this.handler=this._register(new fM(e,t,n)):this.handler=this._register(new sm(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class d0 extends ny{}const yx={ColorContribution:"base.contributions.colors"};class pM{constructor(){this._onDidChangeSchema=new $t,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,i=!1,s){let o={id:e,description:n,defaults:t,needsTransparency:i,deprecationMessage:s};this.colorsById[e]=o;let a={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return s&&(a.deprecationMessage=s),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n&&n.defaults){const i=n.defaults[t.type];return yg(i,t)}}getColorSchema(){return this.colorSchema}toString(){let e=(t,n)=>{let i=t.indexOf(".")===-1?0:1,s=n.indexOf(".")===-1?0:1;return i!==s?i-s:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const sw=new pM;k.add(yx.ColorContribution,sw);function _n(r,e,t,n,i){return sw.registerColor(r,e,t,n,i)}const om=_n("foreground",{dark:"#CCCCCC",light:"#616161",hc:"#FFFFFF"},w("foreground","Overall foreground color. This color is only used if not overridden by a component.")),GF=_n("errorForeground",{dark:"#F48771",light:"#A1260D",hc:"#F48771"},w("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),YF=_n("icon.foreground",{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},w("iconForeground","The default color for icons in the workbench.")),f0=_n("focusBorder",{dark:"#007FD4",light:"#0090F1",hc:"#F38518"},w("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Ma=_n("contrastBorder",{light:null,dark:null,hc:"#6FC3DF"},w("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Au=_n("contrastActiveBorder",{light:null,dark:null,hc:f0},w("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),ZF=_n("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},w("textLinkForeground","Foreground color for links in text.")),XF=_n("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},w("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),qF=_n("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hc:Tn.black},w("textCodeBlockBackground","Background color for code blocks in text.")),ow=_n("widget.shadow",{dark:fa(Tn.black,.36),light:fa(Tn.black,.16),hc:null},w("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),mM=_n("input.background",{dark:"#3C3C3C",light:Tn.white,hc:Tn.black},w("inputBoxBackground","Input box background.")),vM=_n("input.foreground",{dark:om,light:om,hc:om},w("inputBoxForeground","Input box foreground.")),_M=_n("input.border",{dark:null,light:null,hc:Ma},w("inputBoxBorder","Input box border.")),QF=_n("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hc:Ma},w("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),JF=_n("inputOption.activeBackground",{dark:fa(f0,.4),light:fa(f0,.2),hc:Tn.transparent},w("inputOption.activeBackground","Background color of activated options in input fields.")),eB=_n("inputOption.activeForeground",{dark:Tn.white,light:Tn.black,hc:null},w("inputOption.activeForeground","Foreground color of activated options in input fields.")),yM=_n("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hc:Tn.black},w("inputValidationInfoBackground","Input validation background color for information severity.")),bM=_n("inputValidation.infoForeground",{dark:null,light:null,hc:null},w("inputValidationInfoForeground","Input validation foreground color for information severity.")),wM=_n("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hc:Ma},w("inputValidationInfoBorder","Input validation border color for information severity.")),CM=_n("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hc:Tn.black},w("inputValidationWarningBackground","Input validation background color for warning severity.")),SM=_n("inputValidation.warningForeground",{dark:null,light:null,hc:null},w("inputValidationWarningForeground","Input validation foreground color for warning severity.")),EM=_n("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hc:Ma},w("inputValidationWarningBorder","Input validation border color for warning severity.")),LM=_n("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hc:Tn.black},w("inputValidationErrorBackground","Input validation background color for error severity.")),xM=_n("inputValidation.errorForeground",{dark:null,light:null,hc:null},w("inputValidationErrorForeground","Input validation foreground color for error severity.")),DM=_n("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hc:Ma},w("inputValidationErrorBorder","Input validation border color for error severity.")),EC=_n("dropdown.background",{dark:"#3C3C3C",light:Tn.white,hc:Tn.black},w("dropdownBackground","Dropdown background.")),bx=_n("dropdown.foreground",{dark:"#F0F0F0",light:null,hc:Tn.white},w("dropdownForeground","Dropdown foreground.")),IM=_n("button.foreground",{dark:Tn.white,light:Tn.white,hc:Tn.white},w("buttonForeground","Button foreground color.")),LC=_n("button.background",{dark:"#0E639C",light:"#007ACC",hc:null},w("buttonBackground","Button background color.")),NM=_n("button.hoverBackground",{dark:Ox(LC,.2),light:Mx(LC,.2),hc:null},w("buttonHoverBackground","Button background color when hovering.")),TM=_n("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hc:Tn.black},w("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),MM=_n("badge.foreground",{dark:Tn.white,light:"#333",hc:Tn.white},w("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),aw=_n("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hc:null},w("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),lw=_n("scrollbarSlider.background",{dark:Tn.fromHex("#797979").transparent(.4),light:Tn.fromHex("#646464").transparent(.4),hc:fa(Ma,.6)},w("scrollbarSliderBackground","Scrollbar slider background color.")),uw=_n("scrollbarSlider.hoverBackground",{dark:Tn.fromHex("#646464").transparent(.7),light:Tn.fromHex("#646464").transparent(.7),hc:fa(Ma,.8)},w("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),cw=_n("scrollbarSlider.activeBackground",{dark:Tn.fromHex("#BFBFBF").transparent(.4),light:Tn.fromHex("#000000").transparent(.6),hc:Ma},w("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),OM=_n("progressBar.background",{dark:Tn.fromHex("#0E70C0"),light:Tn.fromHex("#0E70C0"),hc:Ma},w("progressBarBackground","Background color of the progress bar that can show for long running operations.")),kM=_n("editorError.background",{dark:null,light:null,hc:null},w("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),hw=_n("editorError.foreground",{dark:"#F48771",light:"#E51400",hc:null},w("editorError.foreground","Foreground color of error squigglies in the editor.")),AM=_n("editorError.border",{dark:null,light:null,hc:Tn.fromHex("#E47777").transparent(.8)},w("errorBorder","Border color of error boxes in the editor.")),RM=_n("editorWarning.background",{dark:null,light:null,hc:null},w("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),vg=_n("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hc:null},w("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),xC=_n("editorWarning.border",{dark:null,light:null,hc:Tn.fromHex("#FFCC00").transparent(.8)},w("warningBorder","Border color of warning boxes in the editor.")),PM=_n("editorInfo.background",{dark:null,light:null,hc:null},w("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),g0=_n("editorInfo.foreground",{dark:"#75BEFF",light:"#75BEFF",hc:null},w("editorInfo.foreground","Foreground color of info squigglies in the editor.")),wx=_n("editorInfo.border",{dark:null,light:null,hc:Tn.fromHex("#75BEFF").transparent(.8)},w("infoBorder","Border color of info boxes in the editor.")),FM=_n("editorHint.foreground",{dark:Tn.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hc:null},w("editorHint.foreground","Foreground color of hint squigglies in the editor.")),BM=_n("editorHint.border",{dark:null,light:null,hc:Tn.fromHex("#eeeeee").transparent(.8)},w("hintBorder","Border color of hint boxes in the editor.")),jd=_n("editor.background",{light:"#fffffe",dark:"#1E1E1E",hc:Tn.black},w("editorBackground","Editor background color.")),dy=_n("editor.foreground",{light:"#333333",dark:"#BBBBBB",hc:Tn.white},w("editorForeground","Editor default foreground color.")),Ph=_n("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hc:"#0C141F"},w("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),$d=_n("editorWidget.foreground",{dark:om,light:om,hc:om},w("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),DC=_n("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hc:Ma},w("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),tB=_n("editorWidget.resizeBorder",{light:null,dark:null,hc:null},w("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),Cx=_n("quickInput.background",{dark:Ph,light:Ph,hc:Ph},w("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),WM=_n("quickInput.foreground",{dark:$d,light:$d,hc:$d},w("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),VM=_n("quickInputTitle.background",{dark:new Tn(new Tr(255,255,255,.105)),light:new Tn(new Tr(0,0,0,.06)),hc:"#000000"},w("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),HM=_n("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hc:Tn.white},w("pickerGroupForeground","Quick picker color for grouping labels.")),zM=_n("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hc:Tn.white},w("pickerGroupBorder","Quick picker color for grouping borders.")),UM=_n("keybindingLabel.background",{dark:new Tn(new Tr(128,128,128,.17)),light:new Tn(new Tr(221,221,221,.4)),hc:Tn.transparent},w("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),jM=_n("keybindingLabel.foreground",{dark:Tn.fromHex("#CCCCCC"),light:Tn.fromHex("#555555"),hc:Tn.white},w("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),$M=_n("keybindingLabel.border",{dark:new Tn(new Tr(51,51,51,.6)),light:new Tn(new Tr(204,204,204,.4)),hc:new Tn(new Tr(111,195,223))},w("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),KM=_n("keybindingLabel.bottomBorder",{dark:new Tn(new Tr(68,68,68,.6)),light:new Tn(new Tr(187,187,187,.4)),hc:new Tn(new Tr(111,195,223))},w("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),p0=_n("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},w("editorSelectionBackground","Color of the editor selection.")),GM=_n("editor.selectionForeground",{light:null,dark:null,hc:"#000000"},w("editorSelectionForeground","Color of the selected text for high contrast.")),IC=_n("editor.inactiveSelectionBackground",{light:fa(p0,.5),dark:fa(p0,.5),hc:fa(p0,.5)},w("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),Sx=_n("editor.selectionHighlightBackground",{light:Ax(p0,jd,.3,.6),dark:Ax(p0,jd,.3,.6),hc:null},w("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),nB=_n("editor.selectionHighlightBorder",{light:null,dark:null,hc:Au},w("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),iB=_n("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hc:null},w("editorFindMatch","Color of the current search match.")),Ex=_n("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hc:null},w("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),rB=_n("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hc:null},w("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),sB=_n("editor.findMatchBorder",{light:null,dark:null,hc:Au},w("editorFindMatchBorder","Border color of the current search match.")),oB=_n("editor.findMatchHighlightBorder",{light:null,dark:null,hc:Au},w("findMatchHighlightBorder","Border color of the other search matches.")),aB=_n("editor.findRangeHighlightBorder",{dark:null,light:null,hc:fa(Au,.4)},w("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),lB=_n("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hc:"#ADD6FF26"},w("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),Lx=_n("editorHoverWidget.background",{light:Ph,dark:Ph,hc:Ph},w("hoverBackground","Background color of the editor hover.")),uB=_n("editorHoverWidget.foreground",{light:$d,dark:$d,hc:$d},w("hoverForeground","Foreground color of the editor hover.")),cB=_n("editorHoverWidget.border",{light:DC,dark:DC,hc:DC},w("hoverBorder","Border color of the editor hover.")),hB=_n("editorHoverWidget.statusBarBackground",{dark:Ox(Lx,.2),light:Mx(Lx,.05),hc:Ph},w("statusBarBackground","Background color of the editor hover status bar.")),dB=_n("editorLink.activeForeground",{dark:"#4E94CE",light:Tn.blue,hc:Tn.cyan},w("activeLinkForeground","Color of active links.")),fB=_n("editorInlayHint.foreground",{dark:Ph,light:$d,hc:Ph},w("editorInlayHintForeground","Foreground color of inline hints")),gB=_n("editorInlayHint.background",{dark:$d,light:Ph,hc:$d},w("editorInlayHintBackground","Background color of inline hints")),pB=_n("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hc:"#FFCC00"},w("editorLightBulbForeground","The color used for the lightbulb actions icon.")),mB=_n("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},w("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),NC=new Tn(new Tr(155,185,85,.2)),TC=new Tn(new Tr(255,0,0,.2)),xx=_n("diffEditor.insertedTextBackground",{dark:NC,light:NC,hc:null},w("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Dx=_n("diffEditor.removedTextBackground",{dark:TC,light:TC,hc:null},w("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),YM=_n("diffEditor.insertedTextBorder",{dark:null,light:null,hc:"#33ff2eff"},w("diffEditorInsertedOutline","Outline color for the text that got inserted.")),ZM=_n("diffEditor.removedTextBorder",{dark:null,light:null,hc:"#FF008F"},w("diffEditorRemovedOutline","Outline color for text that got removed.")),XM=_n("diffEditor.border",{dark:null,light:null,hc:Ma},w("diffEditorBorder","Border color between the two text editors.")),qM=_n("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hc:null},w("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),QM=_n("list.focusBackground",{dark:null,light:null,hc:null},w("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),JM=_n("list.focusForeground",{dark:null,light:null,hc:null},w("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),eO=_n("list.focusOutline",{dark:f0,light:f0,hc:Au},w("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),am=_n("list.activeSelectionBackground",{dark:"#094771",light:"#0060C0",hc:null},w("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),_g=_n("list.activeSelectionForeground",{dark:Tn.white,light:Tn.white,hc:null},w("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),dw=_n("list.activeSelectionIconForeground",{dark:null,light:null,hc:null},w("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),tO=_n("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hc:null},w("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),nO=_n("list.inactiveSelectionForeground",{dark:null,light:null,hc:null},w("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),iO=_n("list.inactiveSelectionIconForeground",{dark:null,light:null,hc:null},w("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),rO=_n("list.inactiveFocusBackground",{dark:null,light:null,hc:null},w("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),sO=_n("list.inactiveFocusOutline",{dark:null,light:null,hc:null},w("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),oO=_n("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hc:null},w("listHoverBackground","List/Tree background when hovering over items using the mouse.")),aO=_n("list.hoverForeground",{dark:null,light:null,hc:null},w("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),lO=_n("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hc:null},w("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),MC=_n("list.highlightForeground",{dark:"#18A3FF",light:"#0066BF",hc:f0},w("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),uO=_n("list.focusHighlightForeground",{dark:MC,light:MC,hc:MC},w("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),cO=_n("listFilterWidget.background",{light:"#efc1ad",dark:"#653723",hc:Tn.black},w("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),hO=_n("listFilterWidget.outline",{dark:Tn.transparent,light:Tn.transparent,hc:"#f38518"},w("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),dO=_n("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hc:Ma},w("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),fO=_n("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hc:"#a9a9a9"},w("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),gO=_n("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hc:null},w("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),Ix=_n("quickInput.list.focusBackground",{dark:null,light:null,hc:null},"",void 0,w("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),pO=_n("quickInputList.focusForeground",{dark:_g,light:_g,hc:_g},w("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),mO=_n("quickInputList.focusIconForeground",{dark:dw,light:dw,hc:dw},w("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),vO=_n("quickInputList.focusBackground",{dark:kx(Ix,am,"#062F4A"),light:kx(Ix,am,"#D6EBFF"),hc:null},w("quickInput.listFocusBackground","Quick picker background color for the focused item.")),_O=_n("menu.border",{dark:null,light:null,hc:Ma},w("menuBorder","Border color of menus.")),yO=_n("menu.foreground",{dark:bx,light:om,hc:bx},w("menuForeground","Foreground color of menu items.")),bO=_n("menu.background",{dark:EC,light:EC,hc:EC},w("menuBackground","Background color of menu items.")),wO=_n("menu.selectionForeground",{dark:_g,light:_g,hc:_g},w("menuSelectionForeground","Foreground color of the selected menu item in menus.")),CO=_n("menu.selectionBackground",{dark:am,light:am,hc:am},w("menuSelectionBackground","Background color of the selected menu item in menus.")),SO=_n("menu.selectionBorder",{dark:null,light:null,hc:Au},w("menuSelectionBorder","Border color of the selected menu item in menus.")),EO=_n("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888",hc:Ma},w("menuSeparatorBackground","Color of a separator menu item in menus.")),vB=_n("editor.snippetTabstopHighlightBackground",{dark:new Tn(new Tr(124,124,124,.3)),light:new Tn(new Tr(10,50,100,.2)),hc:new Tn(new Tr(124,124,124,.3))},w("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),_B=_n("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hc:null},w("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),yB=_n("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hc:null},w("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),bB=_n("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new Tn(new Tr(10,50,100,.5)),hc:"#525252"},w("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),wB=_n("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},w("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),CB=_n("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},w("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),SB=_n("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},w("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),Nx=_n("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hc:"#ffffff"},w("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),LO=_n("minimap.errorHighlight",{dark:new Tn(new Tr(255,18,18,.7)),light:new Tn(new Tr(255,18,18,.7)),hc:new Tn(new Tr(255,50,50,1))},w("minimapError","Minimap marker color for errors.")),xO=_n("minimap.warningHighlight",{dark:vg,light:vg,hc:xC},w("overviewRuleWarning","Minimap marker color for warnings.")),Tx=_n("minimap.background",{dark:null,light:null,hc:null},w("minimapBackground","Minimap background color.")),DO=_n("minimapSlider.background",{light:fa(lw,.5),dark:fa(lw,.5),hc:fa(lw,.5)},w("minimapSliderBackground","Minimap slider background color.")),IO=_n("minimapSlider.hoverBackground",{light:fa(uw,.5),dark:fa(uw,.5),hc:fa(uw,.5)},w("minimapSliderHoverBackground","Minimap slider background color when hovering.")),NO=_n("minimapSlider.activeBackground",{light:fa(cw,.5),dark:fa(cw,.5),hc:fa(cw,.5)},w("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),EB=_n("problemsErrorIcon.foreground",{dark:hw,light:hw,hc:hw},w("problemsErrorIconForeground","The color used for the problems error icon.")),LB=_n("problemsWarningIcon.foreground",{dark:vg,light:vg,hc:vg},w("problemsWarningIconForeground","The color used for the problems warning icon.")),xB=_n("problemsInfoIcon.foreground",{dark:g0,light:g0,hc:g0},w("problemsInfoIconForeground","The color used for the problems info icon."));function TO(r,e){var t,n,i;switch(r.op){case 0:return(t=yg(r.value,e))===null||t===void 0?void 0:t.darken(r.factor);case 1:return(n=yg(r.value,e))===null||n===void 0?void 0:n.lighten(r.factor);case 2:return(i=yg(r.value,e))===null||i===void 0?void 0:i.transparent(r.factor);case 3:for(const a of r.values){const l=yg(a,e);if(l)return l}return;case 4:const s=yg(r.value,e);if(!s)return;const o=yg(r.background,e);return o?s.isDarkerThan(o)?Tn.getLighterColor(s,o,r.factor).transparent(r.transparency):Tn.getDarkerColor(s,o,r.factor).transparent(r.transparency):s.transparent(r.factor*r.transparency);default:throw Xi(r)}}function Mx(r,e){return{op:0,value:r,factor:e}}function Ox(r,e){return{op:1,value:r,factor:e}}function fa(r,e){return{op:2,value:r,factor:e}}function kx(...r){return{op:3,values:r}}function Ax(r,e,t,n){return{op:4,value:r,background:e,factor:t,transparency:n}}function yg(r,e){if(r!==null){if(typeof r=="string")return r[0]==="#"?Tn.fromHex(r):e.getColor(r);if(r instanceof Tn)return r;if(typeof r=="object")return TO(r,e)}}const Rx="vscode://schemas/workbench-colors";let Px=k.as(X.JSONContribution);Px.registerSchema(Rx,sw.getColorSchema());const Fx=new ys(()=>Px.notifySchemaChanged(Rx),200);sw.onDidChangeSchema(()=>{Fx.isScheduled()||Fx.schedule()});const MO=_n("editor.lineHighlightBackground",{dark:null,light:null,hc:null},w("lineHighlight","Background color for the highlight of line at the cursor position.")),Bx=_n("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hc:"#f38518"},w("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),OO=_n("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hc:null},w("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),kO=_n("editor.rangeHighlightBorder",{dark:null,light:null,hc:Au},w("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),AO=_n("editor.symbolHighlightBackground",{dark:Ex,light:Ex,hc:null},w("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),RO=_n("editor.symbolHighlightBorder",{dark:null,light:null,hc:Au},w("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),Wx=_n("editorCursor.foreground",{dark:"#AEAFAD",light:Tn.black,hc:Tn.white},w("caret","Color of the editor cursor.")),PO=_n("editorCursor.background",null,w("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),lm=_n("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hc:"#e3e4e229"},w("editorWhitespaces","Color of whitespace characters in the editor.")),fw=_n("editorIndentGuide.background",{dark:lm,light:lm,hc:lm},w("editorIndentGuides","Color of the editor indentation guides.")),gw=_n("editorIndentGuide.activeBackground",{dark:lm,light:lm,hc:lm},w("editorActiveIndentGuide","Color of the active editor indentation guides.")),Vx=_n("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hc:Tn.white},w("editorLineNumbers","Color of editor line numbers.")),OC=_n("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hc:Au},w("editorActiveLineNumber","Color of editor active line number"),!1,w("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),FO=_n("editorLineNumber.activeForeground",{dark:OC,light:OC,hc:OC},w("editorActiveLineNumber","Color of editor active line number")),BO=_n("editorRuler.foreground",{dark:"#5A5A5A",light:Tn.lightgrey,hc:Tn.white},w("editorRuler","Color of the editor rulers.")),DB=_n("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hc:"#999999"},w("editorCodeLensForeground","Foreground color of editor CodeLens")),IB=_n("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hc:"#0064001a"},w("editorBracketMatchBackground","Background color behind matching brackets")),NB=_n("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hc:Ma},w("editorBracketMatchBorder","Color for matching brackets boxes")),WO=_n("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hc:"#7f7f7f4d"},w("editorOverviewRulerBorder","Color of the overview ruler border.")),VO=_n("editorOverviewRuler.background",null,w("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),HO=_n("editorGutter.background",{dark:jd,light:jd,hc:jd},w("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),zO=_n("editorUnnecessaryCode.border",{dark:null,light:null,hc:Tn.fromHex("#fff").transparent(.8)},w("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),UO=_n("editorUnnecessaryCode.opacity",{dark:Tn.fromHex("#000a"),light:Tn.fromHex("#0007"),hc:null},w("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),TB=_n("editorGhostText.border",{dark:null,light:null,hc:Tn.fromHex("#fff").transparent(.8)},w("editorGhostTextBorder","Border color of ghost text in the editor.")),MB=_n("editorGhostText.foreground",{dark:Tn.fromHex("#ffffff56"),light:Tn.fromHex("#0007"),hc:null},w("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),kC=new Tn(new Tr(0,122,204,.6)),OB=_n("editorOverviewRuler.rangeHighlightForeground",{dark:kC,light:kC,hc:kC},w("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),jO=_n("editorOverviewRuler.errorForeground",{dark:new Tn(new Tr(255,18,18,.7)),light:new Tn(new Tr(255,18,18,.7)),hc:new Tn(new Tr(255,50,50,1))},w("overviewRuleError","Overview ruler marker color for errors.")),$O=_n("editorOverviewRuler.warningForeground",{dark:vg,light:vg,hc:xC},w("overviewRuleWarning","Overview ruler marker color for warnings.")),KO=_n("editorOverviewRuler.infoForeground",{dark:g0,light:g0,hc:wx},w("overviewRuleInfo","Overview ruler marker color for infos."));gc((r,e)=>{const t=r.getColor(jd);t&&e.addRule(`.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: ${t}; }`);const n=r.getColor(dy);n&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${n}; }`);const i=r.getColor(HO);i&&e.addRule(`.monaco-editor .margin { background-color: ${i}; }`);const s=r.getColor(OO);s&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${s}; }`);const o=r.getColor(kO);o&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${r.type==="hc"?"dotted":"solid"} ${o}; }`);const a=r.getColor(AO);a&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${a}; }`);const l=r.getColor(RO);l&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${r.type==="hc"?"dotted":"solid"} ${l}; }`);const u=r.getColor(lm);u&&(e.addRule(`.monaco-editor .mtkw { color: ${u} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${u} !important; }`))});class m0 extends d0{constructor(e){super();this._context=e,this._readConfig(),this._lastCursorModelPosition=new dn(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(56);const t=e.get(57);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(82);const n=e.get(128);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new dn(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){const i=Math.abs(this._lastCursorModelPosition.lineNumber-n);return i===0?'<span class="relative-current-line-number">'+n+"</span>":String(i)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10==0?String(n):"":String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Q?this._lineHeight%2==0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s='<div class="'+m0.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',o=this._context.model.getLineCount(),a=[];for(let l=n;l<=i;l++){const u=l-n;if(!this._renderFinalNewline&&l===o&&this._context.model.getLineLength(l)===0){a[u]="";continue}const h=this._getLineRenderLineNumber(l);h?l===this._activeLineNumber?a[u]='<div class="active-line-number '+m0.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+h+"</div>":a[u]=s+h+"</div>":a[u]=""}this._renderResult=a}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}m0.CLASS_NAME="line-numbers",gc((r,e)=>{const t=r.getColor(Vx);t&&e.addRule(`.monaco-editor .line-numbers { color: ${t}; }`);const n=r.getColor(FO);n&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${n}; }`)});class um extends Ou{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(128);this._canUseLayerHinting=!t.get(26),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=Sr(document.createElement("div")),this._domNode.setClassName(um.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Sr(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(um.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(128);return this._canUseLayerHinting=!t.get(26),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}um.CLASS_NAME="glyph-margin",um.OUTER_CLASS_NAME="margin";const cm="monaco-mouse-cursor-text";class AC{constructor(e,t,n){this._visibleTextAreaBrand=void 0,this.top=e,this.left=t,this.width=n}setWidth(e){return new AC(this.top,this.left,e)}}const fy=ri;class GO extends Ou{constructor(e,t,n){super(e);this._primaryCursorPosition=new dn(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._viewHelper=n,this._scrollLeft=0,this._scrollTop=0;const i=this._context.configuration.options,s=i.get(128);this._setAccessibilityOptions(i),this._contentLeft=s.contentLeft,this._contentWidth=s.contentWidth,this._contentHeight=s.height,this._fontInfo=i.get(40),this._lineHeight=i.get(56),this._emptySelectionClipboard=i.get(30),this._copyWithSyntaxHighlighting=i.get(19),this._visibleTextArea=null,this._selections=[new oi(1,1,1,1)],this._modelSelections=[new oi(1,1,1,1)],this._lastRenderPosition=null,this.textArea=Sr(document.createElement("textarea")),kh.write(this.textArea,6),this.textArea.setClassName(`inputarea ${cm}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(i)),this.textArea.setAttribute("tabindex",String(i.get(110))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",w("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),i.get(28)&&i.get(78)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=Sr(document.createElement("div")),this.textAreaCover.setPosition("absolute");const o={getLineCount:()=>this._context.model.getLineCount(),getLineMaxColumn:l=>this._context.model.getLineMaxColumn(l),getValueInRange:(l,u)=>this._context.model.getValueInRange(l,u)},a={getDataToCopy:l=>{const u=this._context.model.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,pe),h=this._context.model.getEOL(),v=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),N=Array.isArray(u)?u:null,P=Array.isArray(u)?u.join(h):u;let K,ee=null;if(l&&(uM.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&P.length<65536)){const Se=this._context.model.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);Se&&(K=Se.html,ee=Se.mode)}return{isFromEmptySelection:v,multicursorText:N,text:P,html:K,mode:ee}},getScreenReaderContent:l=>{if(this._accessibilitySupport===1){if(ae){const u=this._selections[0];if(u.isEmpty()){const h=u.getStartPosition();let v=this._getWordBeforePosition(h);if(v.length===0&&(v=this._getCharacterBeforePosition(h)),v.length>0)return new So(v,v.length,v.length,h,h)}}return So.EMPTY}if(Dr){const u=this._selections[0];if(u.isEmpty()){const h=u.getStartPosition(),[v,N]=this._getAndroidWordAtPosition(h);if(v.length>0)return new So(v,N,N,h,h)}return So.EMPTY}return h0.fromEditorSelection(l,o,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(l,u,h)=>this._context.model.deduceModelPositionRelativeToViewPosition(l,u,h)};this._textAreaInput=this._register(new cM(a,this.textArea)),this._register(this._textAreaInput.onKeyDown(l=>{this._viewController.emitKeyDown(l)})),this._register(this._textAreaInput.onKeyUp(l=>{this._viewController.emitKeyUp(l)})),this._register(this._textAreaInput.onPaste(l=>{let u=!1,h=null,v=null;l.metadata&&(u=this._emptySelectionClipboard&&!!l.metadata.isFromEmptySelection,h=typeof l.metadata.multicursorText!="undefined"?l.metadata.multicursorText:null,v=l.metadata.mode),this._viewController.paste(l.text,u,h,v)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(l=>{l.replacePrevCharCnt||l.replaceNextCharCnt||l.positionDelta?(_c&&console.log(` => compositionType: <<${l.text}>>, ${l.replacePrevCharCnt}, ${l.replaceNextCharCnt}, ${l.positionDelta}`),this._viewController.compositionType(l.text,l.replacePrevCharCnt,l.replaceNextCharCnt,l.positionDelta)):(_c&&console.log(` => type: <<${l.text}>>`),this._viewController.type(l.text))})),this._register(this._textAreaInput.onSelectionChangeRequest(l=>{this._viewController.setSelection(l)})),this._register(this._textAreaInput.onCompositionStart(l=>{const u=this._selections[0].startLineNumber,h=this._selections[0].startColumn+l.revealDeltaColumns;this._context.model.revealRange("keyboard",!0,new Mt(u,h,u,h),0,1);const v=this._viewHelper.visibleRangeForPositionRelativeToEditor(u,h);v&&(this._visibleTextArea=new AC(this._context.viewLayout.getVerticalOffsetForLineNumber(u),v.left,fy?0:1),this._render()),this.textArea.setClassName(`inputarea ${cm} ime-input`),this._viewController.compositionStart(),this._context.model.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(l=>{!this._visibleTextArea||(this._visibleTextArea=this._visibleTextArea.setWidth(YO(l.data,this._fontInfo)),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${cm}`),this._viewController.compositionEnd(),this._context.model.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.model.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.model.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.model.getLineContent(e.lineNumber),i=r0(t);let s=!0,o=e.column,a=!0,l=e.column,u=0;for(;u<50&&(s||a);){if(s&&o<=1&&(s=!1),s){const h=n.charCodeAt(o-2);i.get(h)!==0?s=!1:o--}if(a&&l>n.length&&(a=!1),a){const h=n.charCodeAt(l-1);i.get(h)!==0?a=!1:l++}u++}return[n.substring(o-1,l-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.model.getLineContent(e.lineNumber),n=r0(this._context.configuration.options.get(114));let i=e.column,s=0;for(;i>1;){const o=t.charCodeAt(i-2);if(n.get(o)!==0||s>50)return t.substring(i-1,e.column-1);s++,i--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.model.getLineContent(e.lineNumber).charAt(e.column-2);if(!Zs(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){return e.get(2)===1?w("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",Q?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===Zt.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(128);return this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(40),this._lineHeight=t.get(56),this._emptySelectionClipboard=t.get(30),this._copyWithSyntaxHighlighting=t.get(19),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(110))),(e.hasChanged(28)||e.hasChanged(78))&&(t.get(28)&&t.get(78)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){this._primaryCursorPosition=new dn(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){this._renderInsideEditor(null,this._visibleTextArea.top-this._scrollTop,this._contentLeft+this._visibleTextArea.left-this._scrollLeft,this._visibleTextArea.width,this._lineHeight);return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(ae){this._renderInsideEditor(this._primaryCursorPosition,t,e,fy?0:1,this._lineHeight);return}this._renderInsideEditor(this._primaryCursorPosition,t,e,fy?0:1,fy?0:1)}_renderInsideEditor(e,t,n,i,s){this._lastRenderPosition=e;const o=this.textArea,a=this.textAreaCover;ul.applyFontInfo(o,this._fontInfo),o.setTop(t),o.setLeft(n),o.setWidth(i),o.setHeight(s),a.setTop(0),a.setLeft(0),a.setWidth(0),a.setHeight(0)}_renderAtTopLeft(){this._lastRenderPosition=null;const e=this.textArea,t=this.textAreaCover;if(ul.applyFontInfo(e,this._fontInfo),e.setTop(0),e.setLeft(0),t.setTop(0),t.setLeft(0),fy){e.setWidth(0),e.setHeight(0),t.setWidth(0),t.setHeight(0);return}e.setWidth(1),e.setHeight(1),t.setWidth(1),t.setHeight(1);const n=this._context.configuration.options;n.get(46)?t.setClassName("monaco-editor-background textAreaCover "+um.OUTER_CLASS_NAME):n.get(57).renderType!==0?t.setClassName("monaco-editor-background textAreaCover "+m0.CLASS_NAME):t.setClassName("monaco-editor-background textAreaCover")}}function YO(r,e){const n=document.createElement("canvas").getContext("2d");n.font=ZO(e);const i=n.measureText(r);return ri?i.width+2:i.width}function ZO(r){return XO("normal",r.fontWeight,r.fontSize,r.lineHeight,r.fontFamily)}function XO(r,e,t,n,i){return`${r} normal ${e} ${t}px / ${n}px ${i}`}class hm{static columnSelect(e,t,n,i,s,o){let a=Math.abs(s-n)+1,l=n>s,u=i>o,h=i<o,v=[];for(let N=0;N<a;N++){let P=n+(l?-N:N),K=Zr.columnFromVisibleColumn2(e,t,P,i),ee=Zr.columnFromVisibleColumn2(e,t,P,o),Se=Zr.visibleColumnFromColumn2(e,t,new dn(P,K)),Le=Zr.visibleColumnFromColumn2(e,t,new dn(P,ee));h&&(Se>o||Le<i)||u&&(Le>i||Se<o)||v.push(new Qo(new Mt(P,K,P,K),0,new dn(P,ee),0))}if(v.length===0)for(let N=0;N<a;N++){const P=n+(l?-N:N),K=t.getLineMaxColumn(P);v.push(new Qo(new Mt(P,K,P,K),0,new dn(P,K),0))}return{viewStates:v,reversed:l,fromLineNumber:n,fromVisualColumn:i,toLineNumber:s,toVisualColumn:o}}static columnSelectLeft(e,t,n){let i=n.toViewVisualColumn;return i>0&&i--,hm.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,i)}static columnSelectRight(e,t,n){let i=0;const s=Math.min(n.fromViewLineNumber,n.toViewLineNumber),o=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=s;l<=o;l++){const u=t.getLineMaxColumn(l),h=Zr.visibleColumnFromColumn2(e,t,new dn(l,u));i=Math.max(i,h)}let a=n.toViewVisualColumn;return a<i&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,i){const s=i?e.pageSize:1,o=Math.max(1,n.toViewLineNumber-s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}static columnSelectDown(e,t,n,i){const s=i?e.pageSize:1,o=Math.min(t.getLineCount(),n.toViewLineNumber+s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}}class Al{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return new oi(i.endLineNumber,i.endColumn,i.endLineNumber,i.endColumn)}}class kB{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return new Selection(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)}}class pw{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return new oi(i.startLineNumber,i.startColumn,i.startLineNumber,i.startColumn)}}class mw{constructor(e,t,n,i,s=!1){this._range=e,this._text=t,this._columnDeltaOffset=i,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=s}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return new oi(i.endLineNumber+this._lineNumberDeltaOffset,i.endColumn+this._columnDeltaOffset,i.endLineNumber+this._lineNumberDeltaOffset,i.endColumn+this._columnDeltaOffset)}}class qO{constructor(e,t,n,i=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=i,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class vw{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class Pr{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-wr(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new dn(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const i=e.getLineMinColumn(t.lineNumber),s=e.getLineContent(t.lineNumber),o=cy.atomicPosition(s,t.column-1,n,0);if(o!==-1&&o+1>=i)return new dn(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,n){const i=e.stickyTabStops?Pr.leftPositionAtomicSoftTabs(t,n,e.tabSize):Pr.leftPosition(t,n);return new vw(i.lineNumber,i.column,0)}static moveLeft(e,t,n,i,s){let o,a;if(n.hasSelection()&&!i)o=n.selection.startLineNumber,a=n.selection.startColumn;else{const l=n.position.delta(void 0,-(s-1)),u=t.normalizePosition(Pr.clipPositionColumn(l,t),0),h=Pr.left(e,t,u);o=h.lineNumber,a=h.column}return n.move(i,o,a,0)}static clipPositionColumn(e,t){return new dn(e.lineNumber,Pr.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+rh(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new dn(t,n)}static rightPositionAtomicSoftTabs(e,t,n,i,s){if(n<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=cy.atomicPosition(o,n-1,i,1);if(a!==-1)return new dn(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const i=e.stickyTabStops?Pr.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):Pr.rightPosition(t,n.lineNumber,n.column);return new vw(i.lineNumber,i.column,0)}static moveRight(e,t,n,i,s){let o,a;if(n.hasSelection()&&!i)o=n.selection.endLineNumber,a=n.selection.endColumn;else{const l=n.position.delta(void 0,s-1),u=t.normalizePosition(Pr.clipPositionColumn(l,t),1),h=Pr.right(e,t,u);o=h.lineNumber,a=h.column}return n.move(i,o,a,0)}static down(e,t,n,i,s,o,a){const l=Zr.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize)+s,u=t.getLineCount(),h=n===u&&i===t.getLineMaxColumn(n);return n=n+o,n>u?(n=u,a?i=t.getLineMaxColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):i=Zr.columnFromVisibleColumn2(e,t,n,l),h?s=0:s=l-Zr.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize),new vw(n,i,s)}static moveDown(e,t,n,i,s){let o,a;n.hasSelection()&&!i?(o=n.selection.endLineNumber,a=n.selection.endColumn):(o=n.position.lineNumber,a=n.position.column);let l=Pr.down(e,t,o,a,n.leftoverVisibleColumns,s,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(e,t,n){let i=n.selection,s=Pr.down(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=Pr.down(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new Qo(new Mt(s.lineNumber,s.column,s.lineNumber,s.column),s.leftoverVisibleColumns,new dn(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,n,i,s,o,a){const l=Zr.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize)+s,u=n===1&&i===1;return n=n-o,n<1?(n=1,a?i=t.getLineMinColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):i=Zr.columnFromVisibleColumn2(e,t,n,l),u?s=0:s=l-Zr.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize),new vw(n,i,s)}static moveUp(e,t,n,i,s){let o,a;n.hasSelection()&&!i?(o=n.selection.startLineNumber,a=n.selection.startColumn):(o=n.position.lineNumber,a=n.position.column);let l=Pr.up(e,t,o,a,n.leftoverVisibleColumns,s,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){let i=n.selection,s=Pr.up(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=Pr.up(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new Qo(new Mt(s.lineNumber,s.column,s.lineNumber,s.column),s.leftoverVisibleColumns,new dn(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,i){let s=n.position.lineNumber;for(;s>1&&this._isBlankLine(t,s);)s--;for(;s>1&&!this._isBlankLine(t,s);)s--;return n.move(i,s,t.getLineMinColumn(s),0)}static moveToNextBlankLine(e,t,n,i){const s=t.getLineCount();let o=n.position.lineNumber;for(;o<s&&this._isBlankLine(t,o);)o++;for(;o<s&&!this._isBlankLine(t,o);)o++;return n.move(i,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,n,i){let s=n.position.lineNumber,o=t.getLineMinColumn(s),a=t.getLineFirstNonWhitespaceColumn(s)||o,l;return n.position.column===a?l=o:l=a,n.move(i,s,l,0)}static moveToEndOfLine(e,t,n,i,s){let o=n.position.lineNumber,a=t.getLineMaxColumn(o);return n.move(i,o,a,s?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,i){return n.move(i,1,1,0)}static moveToEndOfBuffer(e,t,n,i){let s=t.getLineCount(),o=t.getLineMaxColumn(s);return n.move(i,s,o,0)}}class dm{static deleteRight(e,t,n,i){let s=[],o=e!==3;for(let a=0,l=i.length;a<l;a++){const u=i[a];let h=u;if(h.isEmpty()){let v=u.getPosition(),N=Pr.right(t,n,v);h=new Mt(N.lineNumber,N.column,v.lineNumber,v.column)}if(h.isEmpty()){s[a]=null;continue}h.startLineNumber!==h.endLineNumber&&(o=!0),s[a]=new Al(h,"")}return[o,s]}static isAutoClosingPairDelete(e,t,n,i,s,o,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,u=o.length;l<u;l++){const h=o[l],v=h.getPosition();if(!h.isEmpty())return!1;const N=s.getLineContent(v.lineNumber);if(v.column<2||v.column>=N.length+1)return!1;const P=N.charAt(v.column-2),K=i.get(P);if(!K)return!1;if(u0(P)){if(n==="never")return!1}else if(t==="never")return!1;const ee=N.charAt(v.column-1);let Se=!1;for(const Le of K)Le.open===P&&Le.close===ee&&(Se=!0);if(!Se)return!1;if(e==="auto"){let Le=!1;for(let ce=0,Ee=a.length;ce<Ee;ce++){const ze=a[ce];if(v.lineNumber===ze.startLineNumber&&v.column===ze.startColumn){Le=!0;break}}if(!Le)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){let i=[];for(let s=0,o=n.length;s<o;s++){const a=n[s].getPosition(),l=new Mt(a.lineNumber,a.column-1,a.lineNumber,a.column+1);i[s]=new Al(l,"")}return[!0,i]}static deleteLeft(e,t,n,i,s){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,i,s))return this._runAutoClosingPairDelete(t,n,i);const o=[];let a=e!==2;for(let l=0,u=i.length;l<u;l++){let h=dm.getDeleteRange(i[l],n,t);if(h.isEmpty()){o[l]=null;continue}h.startLineNumber!==h.endLineNumber&&(a=!0),o[l]=new Al(h,"")}return[a,o]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const i=e.getPosition();if(n.useTabStops&&i.column>1){const s=t.getLineContent(i.lineNumber),o=ka(s),a=o===-1?s.length+1:o+1;if(i.column<=a){const l=Zr.visibleColumnFromColumn2(n,t,i),u=Zr.prevIndentTabStop(l,n.indentSize),h=Zr.columnFromVisibleColumn2(n,t,i.lineNumber,u);return new Mt(i.lineNumber,h,i.lineNumber,i.column)}}return Mt.fromPositions(dm.getPositionAfterDeleteLeft(i,t),i)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=_f(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new dn(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){let i=[];for(let s=0,o=n.length;s<o;s++){const a=n[s];if(a.isEmpty())if(e.emptySelectionClipboard){let l=a.getPosition(),u,h,v,N;l.lineNumber<t.getLineCount()?(u=l.lineNumber,h=1,v=l.lineNumber+1,N=1):l.lineNumber>1?(u=l.lineNumber-1,h=t.getLineMaxColumn(l.lineNumber-1),v=l.lineNumber,N=t.getLineMaxColumn(l.lineNumber)):(u=l.lineNumber,h=1,v=l.lineNumber,N=t.getLineMaxColumn(l.lineNumber));let P=new Mt(u,h,v,N);P.isEmpty()?i[s]=null:i[s]=new Al(P,"")}else i[s]=null;else i[s]=new Al(a,"")}return new kl(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class Fr{static _createWord(e,t,n,i,s){return{start:i,end:s,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){let i=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(i,e,n)}static _doFindPreviousWordOnLine(e,t,n){let i=0;for(let s=n.column-2;s>=0;s--){let o=e.charCodeAt(s),a=t.get(o);if(a===0){if(i===2)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1));i=1}else if(a===2){if(i===1)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1));i=2}else if(a===1&&i!==0)return this._createWord(e,i,a,s+1,this._findEndOfWord(e,t,i,s+1))}return i!==0?this._createWord(e,i,1,0,this._findEndOfWord(e,t,i,0)):null}static _findEndOfWord(e,t,n,i){let s=e.length;for(let o=i;o<s;o++){let a=e.charCodeAt(o),l=t.get(a);if(l===1||n===1&&l===2||n===2&&l===0)return o}return s}static _findNextWordOnLine(e,t,n){let i=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(i,e,n)}static _doFindNextWordOnLine(e,t,n){let i=0,s=e.length;for(let o=n.column-1;o<s;o++){let a=e.charCodeAt(o),l=t.get(a);if(l===0){if(i===2)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,o-1),o);i=1}else if(l===2){if(i===1)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,o-1),o);i=2}else if(l===1&&i!==0)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,o-1),o)}return i!==0?this._createWord(e,i,1,this._findStartOfWord(e,t,i,s-1),s):null}static _findStartOfWord(e,t,n,i){for(let s=i;s>=0;s--){let o=e.charCodeAt(s),a=t.get(o);if(a===1||n===1&&a===2||n===2&&a===0)return s+1}return 0}static moveWordLeft(e,t,n,i){let s=n.lineNumber,o=n.column;o===1&&s>1&&(s=s-1,o=t.getLineMaxColumn(s));let a=Fr._findPreviousWordOnLine(e,t,new dn(s,o));if(i===0)return new dn(s,a?a.start+1:1);if(i===1)return a&&a.wordType===2&&a.end-a.start==1&&a.nextCharClass===0&&(a=Fr._findPreviousWordOnLine(e,t,new dn(s,a.start+1))),new dn(s,a?a.start+1:1);if(i===3){for(;a&&a.wordType===2;)a=Fr._findPreviousWordOnLine(e,t,new dn(s,a.start+1));return new dn(s,a?a.start+1:1)}return a&&o<=a.end+1&&(a=Fr._findPreviousWordOnLine(e,t,new dn(s,a.start+1))),new dn(s,a?a.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===1)return n>1?new dn(n-1,e.getLineMaxColumn(n-1)):t;const s=e.getLineContent(n);for(let o=t.column-1;o>1;o--){const a=s.charCodeAt(o-2),l=s.charCodeAt(o-1);if(a===95&&l!==95)return new dn(n,o);if(yu(a)&&Qa(l))return new dn(n,o);if(Qa(a)&&Qa(l)&&o+1<i){const u=s.charCodeAt(o);if(yu(u))return new dn(n,o)}}return new dn(n,1)}static moveWordRight(e,t,n,i){let s=n.lineNumber,o=n.column,a=!1;o===t.getLineMaxColumn(s)&&s<t.getLineCount()&&(a=!0,s=s+1,o=1);let l=Fr._findNextWordOnLine(e,t,new dn(s,o));if(i===2)l&&l.wordType===2&&l.end-l.start==1&&l.nextCharClass===0&&(l=Fr._findNextWordOnLine(e,t,new dn(s,l.end+1))),l?o=l.end+1:o=t.getLineMaxColumn(s);else if(i===3){for(a&&(o=0);l&&(l.wordType===2||l.start+1<=o);)l=Fr._findNextWordOnLine(e,t,new dn(s,l.end+1));l?o=l.start+1:o=t.getLineMaxColumn(s)}else l&&!a&&o>=l.start+1&&(l=Fr._findNextWordOnLine(e,t,new dn(s,l.end+1))),l?o=l.start+1:o=t.getLineMaxColumn(s);return new dn(s,o)}static _moveWordPartRight(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===i)return n<e.getLineCount()?new dn(n+1,1):t;const s=e.getLineContent(n);for(let o=t.column+1;o<i;o++){const a=s.charCodeAt(o-2),l=s.charCodeAt(o-1);if(a!==95&&l===95)return new dn(n,o);if(yu(a)&&Qa(l))return new dn(n,o);if(Qa(a)&&Qa(l)&&o+1<i){const u=s.charCodeAt(o);if(yu(u))return new dn(n,o)}}return new dn(n,i)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-2,s=_u(n,i);return s+1<i?new Mt(t.lineNumber,s+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,i=e.model,s=e.selection,o=e.whitespaceHeuristics;if(!s.isEmpty())return s;if(dm.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const v=e.selection.getPosition();return new Mt(v.lineNumber,v.column-1,v.lineNumber,v.column+1)}const a=new dn(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,u=a.column;if(l===1&&u===1)return null;if(o){let v=this._deleteWordLeftWhitespace(i,a);if(v)return v}let h=Fr._findPreviousWordOnLine(n,i,a);return t===0?h?u=h.start+1:u>1?u=1:(l--,u=i.getLineMaxColumn(l)):(h&&u<=h.end+1&&(h=Fr._findPreviousWordOnLine(n,i,new dn(l,h.start+1))),h?u=h.end+1:u>1?u=1:(l--,u=i.getLineMaxColumn(l))),new Mt(l,u,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const i=new dn(n.positionLineNumber,n.positionColumn);let s=this._deleteInsideWordWhitespace(t,i);return s||this._deleteInsideWordDetermineDeleteRange(e,t,i)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=n.length;if(i===0)return null;let s=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,s))return null;let o=Math.min(t.column-1,i-1);if(!this._charAtIsWhitespace(n,o))return null;for(;s>0&&this._charAtIsWhitespace(n,s-1);)s--;for(;o+1<i&&this._charAtIsWhitespace(n,o+1);)o++;return new Mt(t.lineNumber,s+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const i=t.getLineContent(n.lineNumber),s=i.length;if(s===0)return n.lineNumber>1?new Mt(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new Mt(n.lineNumber,1,n.lineNumber+1,1):new Mt(n.lineNumber,1,n.lineNumber,1);const o=v=>v.start+1<=n.column&&n.column<=v.end+1,a=(v,N)=>(v=Math.min(v,n.column),N=Math.max(N,n.column),new Mt(n.lineNumber,v,n.lineNumber,N)),l=v=>{let N=v.start+1,P=v.end+1,K=!1;for(;P-1<s&&this._charAtIsWhitespace(i,P-1);)K=!0,P++;if(!K)for(;N>1&&this._charAtIsWhitespace(i,N-2);)N--;return a(N,P)},u=Fr._findPreviousWordOnLine(e,t,n);if(u&&o(u))return l(u);const h=Fr._findNextWordOnLine(e,t,n);return h&&o(h)?l(h):u&&h?a(u.end+1,h.start+1):u?a(u.start+1,u.end+1):h?a(h.start+1,h.end+1):a(1,s+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=Fr._moveWordPartLeft(e,n);return new Mt(n.lineNumber,n.column,i.lineNumber,i.column)}static _findFirstNonWhitespaceChar(e,t){let n=e.length;for(let i=t;i<n;i++){let s=e.charAt(i);if(s!==" "&&s!=="	")return i}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-1,s=this._findFirstNonWhitespaceChar(n,i);return i+1<s?new Mt(t.lineNumber,t.column,t.lineNumber,s+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,i=e.model,s=e.selection,o=e.whitespaceHeuristics;if(!s.isEmpty())return s;const a=new dn(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,u=a.column;const h=i.getLineCount(),v=i.getLineMaxColumn(l);if(l===h&&u===v)return null;if(o){let P=this._deleteWordRightWhitespace(i,a);if(P)return P}let N=Fr._findNextWordOnLine(n,i,a);return t===2?N?u=N.end+1:u<v||l===h?u=v:(l++,N=Fr._findNextWordOnLine(n,i,new dn(l,1)),N?u=N.start+1:u=i.getLineMaxColumn(l)):(N&&u>=N.start+1&&(N=Fr._findNextWordOnLine(n,i,new dn(l,N.end+1))),N?u=N.start+1:u<v||l===h?u=v:(l++,N=Fr._findNextWordOnLine(n,i,new dn(l,1)),N?u=N.start+1:u=i.getLineMaxColumn(l))),new Mt(l,u,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=Fr._moveWordPartRight(e,n);return new Mt(n.lineNumber,n.column,i.lineNumber,i.column)}static _createWordAtPosition(e,t,n){const i=new Mt(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(i),startColumn:i.startColumn,endColumn:i.endColumn}}static getWordAtPosition(e,t,n){const i=r0(t),s=Fr._findPreviousWordOnLine(i,e,n);if(s&&s.wordType===1&&s.start<=n.column-1&&n.column-1<=s.end)return Fr._createWordAtPosition(e,n.lineNumber,s);const o=Fr._findNextWordOnLine(i,e,n);return o&&o.wordType===1&&o.start<=n.column-1&&n.column-1<=o.end?Fr._createWordAtPosition(e,n.lineNumber,o):null}static word(e,t,n,i,s){const o=r0(e.wordSeparators);let a=Fr._findPreviousWordOnLine(o,t,s),l=Fr._findNextWordOnLine(o,t,s);if(!i){let P,K;return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?(P=a.start+1,K=a.end+1):l&&l.wordType===1&&l.start<=s.column-1&&s.column-1<=l.end?(P=l.start+1,K=l.end+1):(a?P=a.end+1:P=1,l?K=l.start+1:K=t.getLineMaxColumn(s.lineNumber)),new Qo(new Mt(s.lineNumber,P,s.lineNumber,K),0,new dn(s.lineNumber,K),0)}let u,h;a&&a.wordType===1&&a.start<s.column-1&&s.column-1<a.end?(u=a.start+1,h=a.end+1):l&&l.wordType===1&&l.start<s.column-1&&s.column-1<l.end?(u=l.start+1,h=l.end+1):(u=s.column,h=s.column);let v=s.lineNumber,N;if(n.selectionStart.containsPosition(s))N=n.selectionStart.endColumn;else if(s.isBeforeOrEqual(n.selectionStart.getStartPosition())){N=u;let P=new dn(v,N);n.selectionStart.containsPosition(P)&&(N=n.selectionStart.endColumn)}else{N=h;let P=new dn(v,N);n.selectionStart.containsPosition(P)&&(N=n.selectionStart.startColumn)}return n.move(!0,v,N,0)}}class AB extends null{static deleteWordPartLeft(e){const t=_w([Fr.deleteWordLeft(e,0),Fr.deleteWordLeft(e,2),Fr._deleteWordPartLeft(e.model,e.selection)]);return t.sort(Range.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=_w([Fr.deleteWordRight(e,0),Fr.deleteWordRight(e,2),Fr._deleteWordPartRight(e.model,e.selection)]);return t.sort(Range.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n){const i=_w([Fr.moveWordLeft(e,t,n,0),Fr.moveWordLeft(e,t,n,2),Fr._moveWordPartLeft(t,n)]);return i.sort(Position.compare),i[2]}static moveWordPartRight(e,t,n){const i=_w([Fr.moveWordRight(e,t,n,0),Fr.moveWordRight(e,t,n,2),Fr._moveWordPartRight(t,n)]);return i.sort(Position.compare),i[0]}}function _w(r){return r.filter(e=>Boolean(e))}class ga{static addCursorDown(e,t,n){let i=[],s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];i[s++]=new ar(l.modelState,l.viewState),n?i[s++]=ar.fromModelState(Pr.translateDown(e.cursorConfig,e.model,l.modelState)):i[s++]=ar.fromViewState(Pr.translateDown(e.cursorConfig,e,l.viewState))}return i}static addCursorUp(e,t,n){let i=[],s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];i[s++]=new ar(l.modelState,l.viewState),n?i[s++]=ar.fromModelState(Pr.translateUp(e.cursorConfig,e.model,l.modelState)):i[s++]=ar.fromViewState(Pr.translateUp(e.cursorConfig,e,l.viewState))}return i}static moveToBeginningOfLine(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];i[s]=this._moveToLineStart(e,a,n)}return i}static _moveToLineStart(e,t,n){const i=t.viewState.position.column,s=t.modelState.position.column,o=i===s,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(i===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return ar.fromViewState(Pr.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return ar.fromModelState(Pr.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,i){let s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=this._moveToLineEnd(e,l,n,i)}return s}static _moveToLineEnd(e,t,n,i){const s=t.viewState.position,o=e.getLineMaxColumn(s.lineNumber),a=s.column===o,l=t.modelState.position,u=e.model.getLineMaxColumn(l.lineNumber),h=o-s.column==u-l.column;return a||h?this._moveToLineEndByModel(e,t,n,i):this._moveToLineEndByView(e,t,n,i)}static _moveToLineEndByView(e,t,n,i){return ar.fromViewState(Pr.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,i))}static _moveToLineEndByModel(e,t,n,i){return ar.fromModelState(Pr.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,i))}static expandLineSelection(e,t){let n=[];for(let i=0,s=t.length;i<s;i++){const o=t[i],a=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let u=o.modelState.selection.endLineNumber,h;u===l?h=e.model.getLineMaxColumn(l):(u++,h=1),n[i]=ar.fromModelState(new Qo(new Mt(a,1,a,1),0,new dn(u,h),0))}return n}static moveToBeginningOfBuffer(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];i[s]=ar.fromModelState(Pr.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static moveToEndOfBuffer(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];i[s]=ar.fromModelState(Pr.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static selectAll(e,t){const n=e.model.getLineCount(),i=e.model.getLineMaxColumn(n);return ar.fromModelState(new Qo(new Mt(1,1,1,1),0,new dn(n,i),0))}static line(e,t,n,i,s){const o=e.model.validatePosition(i),a=s?e.coordinatesConverter.validateViewPosition(new dn(s.lineNumber,s.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!n||!t.modelState.hasSelection()){const u=e.model.getLineCount();let h=o.lineNumber+1,v=1;return h>u&&(h=u,v=e.model.getLineMaxColumn(h)),ar.fromModelState(new Qo(new Mt(o.lineNumber,1,h,v),0,new dn(h,v),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<l)return ar.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(o.lineNumber>l){const u=e.getLineCount();let h=a.lineNumber+1,v=1;return h>u&&(h=u,v=e.getLineMaxColumn(h)),ar.fromViewState(t.viewState.move(t.modelState.hasSelection(),h,v,0))}else{const u=t.modelState.selectionStart.getEndPosition();return ar.fromModelState(t.modelState.move(t.modelState.hasSelection(),u.lineNumber,u.column,0))}}static word(e,t,n,i){const s=e.model.validatePosition(i);return ar.fromModelState(Fr.word(e.cursorConfig,e.model,t.modelState,n,s))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new ar(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,i=t.viewState.position.column;return ar.fromViewState(new Qo(new Mt(n,i,n,i),0,new dn(n,i),0))}static moveTo(e,t,n,i,s){const o=e.model.validatePosition(i),a=s?e.coordinatesConverter.validateViewPosition(new dn(s.lineNumber,s.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return ar.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,i,s,o){switch(n){case 0:return o===4?this._moveHalfLineLeft(e,t,i):this._moveLeft(e,t,i,s);case 1:return o===4?this._moveHalfLineRight(e,t,i):this._moveRight(e,t,i,s);case 2:return o===2?this._moveUpByViewLines(e,t,i,s):this._moveUpByModelLines(e,t,i,s);case 3:return o===2?this._moveDownByViewLines(e,t,i,s):this._moveDownByModelLines(e,t,i,s);case 4:return o===2?t.map(a=>ar.fromViewState(Pr.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>ar.fromModelState(Pr.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 5:return o===2?t.map(a=>ar.fromViewState(Pr.moveToNextBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>ar.fromModelState(Pr.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 6:return this._moveToViewMinColumn(e,t,i);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,i);case 8:return this._moveToViewCenterColumn(e,t,i);case 9:return this._moveToViewMaxColumn(e,t,i);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,i);default:return null}}static viewportMove(e,t,n,i,s){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(n){case 11:{const l=this._firstLineNumberInRange(e.model,a,s),u=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,u)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,s),u=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,u)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),u=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,u)]}case 14:{let l=[];for(let u=0,h=t.length;u<h;u++){const v=t[u];l[u]=this.findPositionInViewportIfOutside(e,v,o,i)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,i){let s=t.viewState.position.lineNumber;if(n.startLineNumber<=s&&s<=n.endLineNumber-1)return new ar(t.modelState,t.viewState);{s>n.endLineNumber-1&&(s=n.endLineNumber-1),s<n.startLineNumber&&(s=n.startLineNumber);const o=e.getLineFirstNonWhitespaceColumn(s);return this._moveToViewPosition(e,t,i,s,o)}}static _firstLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.min(t.endLineNumber,i+n-1)}static _lastLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.max(i,t.endLineNumber-n+1)}static _moveLeft(e,t,n,i){return t.map(s=>ar.fromViewState(Pr.moveLeft(e.cursorConfig,e,s.viewState,n,i)))}static _moveHalfLineLeft(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,u=Math.round(e.getLineContent(l).length/2);i[s]=ar.fromViewState(Pr.moveLeft(e.cursorConfig,e,a.viewState,n,u))}return i}static _moveRight(e,t,n,i){return t.map(s=>ar.fromViewState(Pr.moveRight(e.cursorConfig,e,s.viewState,n,i)))}static _moveHalfLineRight(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,u=Math.round(e.getLineContent(l).length/2);i[s]=ar.fromViewState(Pr.moveRight(e.cursorConfig,e,a.viewState,n,u))}return i}static _moveDownByViewLines(e,t,n,i){let s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=ar.fromViewState(Pr.moveDown(e.cursorConfig,e,l.viewState,n,i))}return s}static _moveDownByModelLines(e,t,n,i){let s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=ar.fromModelState(Pr.moveDown(e.cursorConfig,e.model,l.modelState,n,i))}return s}static _moveUpByViewLines(e,t,n,i){let s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=ar.fromViewState(Pr.moveUp(e.cursorConfig,e,l.viewState,n,i))}return s}static _moveUpByModelLines(e,t,n,i){let s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=ar.fromModelState(Pr.moveUp(e.cursorConfig,e.model,l.modelState,n,i))}return s}static _moveToViewPosition(e,t,n,i,s){return ar.fromViewState(t.viewState.move(n,i,s,0))}static _moveToModelPosition(e,t,n,i,s){return ar.fromModelState(t.modelState.move(n,i,s,0))}static _moveToViewMinColumn(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,u=e.getLineMinColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,u)}return i}static _moveToViewFirstNonWhitespaceColumn(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,u=e.getLineFirstNonWhitespaceColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,u)}return i}static _moveToViewCenterColumn(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,u=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);i[s]=this._moveToViewPosition(e,a,n,l,u)}return i}static _moveToViewMaxColumn(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,u=e.getLineMaxColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,u)}return i}static _moveToViewLastNonWhitespaceColumn(e,t,n){let i=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,u=e.getLineLastNonWhitespaceColumn(l);i[s]=this._moveToViewPosition(e,a,n,l,u)}return i}}var yw;(function(r){const e=function(n){if(!oa(n))return!1;let i=n;return!(!El(i.to)||!ks(i.select)&&!ep(i.select)||!ks(i.by)&&!El(i.by)||!ks(i.value)&&!Fa(i.value))};r.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},r.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},r.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let i;switch(n.to){case r.RawDirection.Left:i=0;break;case r.RawDirection.Right:i=1;break;case r.RawDirection.Up:i=2;break;case r.RawDirection.Down:i=3;break;case r.RawDirection.PrevBlankLine:i=4;break;case r.RawDirection.NextBlankLine:i=5;break;case r.RawDirection.WrappedLineStart:i=6;break;case r.RawDirection.WrappedLineFirstNonWhitespaceCharacter:i=7;break;case r.RawDirection.WrappedLineColumnCenter:i=8;break;case r.RawDirection.WrappedLineEnd:i=9;break;case r.RawDirection.WrappedLineLastNonWhitespaceCharacter:i=10;break;case r.RawDirection.ViewPortTop:i=11;break;case r.RawDirection.ViewPortBottom:i=13;break;case r.RawDirection.ViewPortCenter:i=12;break;case r.RawDirection.ViewPortIfOutside:i=14;break;default:return null}let s=0;switch(n.by){case r.RawUnit.Line:s=1;break;case r.RawUnit.WrappedLine:s=2;break;case r.RawUnit.Character:s=3;break;case r.RawUnit.HalfLine:s=4;break}return{direction:i,unit:s,select:!!n.select,value:n.value||1}}r.parse=t})(yw||(yw={}));const RC=Object.create(null);function fm(r,e){if(e<=0)return"";RC[r]||(RC[r]=["",r]);const t=RC[r];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+r;return t[e]}class bg{constructor(e,t){this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,i,s){const o=Zr.visibleColumnFromColumn(e,t,n);if(s){const a=fm(" ",i),u=Zr.prevIndentTabStop(o,i)/i;return fm(a,u)}else{const a="	",u=Zr.prevRenderTabStop(o,n)/n;return fm(a,u)}}static shiftIndent(e,t,n,i,s){const o=Zr.visibleColumnFromColumn(e,t,n);if(s){const a=fm(" ",i),u=Zr.nextIndentTabStop(o,i)/i;return fm(a,u)}else{const a="	",u=Zr.nextRenderTabStop(o,n)/n;return fm(a,u)}}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let i=this._selection.endLineNumber;this._selection.endColumn===1&&n!==i&&(i=i-1);const{tabSize:s,indentSize:o,insertSpaces:a}=this._opts,l=n===i;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let u=0,h=0;for(let v=n;v<=i;v++,u=h){h=0;let N=e.getLineContent(v),P=ka(N);if(this._opts.isUnshift&&(N.length===0||P===0)||!l&&!this._opts.isUnshift&&N.length===0)continue;if(P===-1&&(P=N.length),v>1&&Zr.visibleColumnFromColumn(N,P+1,s)%o!=0&&e.isCheapToTokenize(v-1)){let Se=$r.getEnterAction(this._opts.autoIndent,e,new Mt(v-1,e.getLineMaxColumn(v-1),v-1,e.getLineMaxColumn(v-1)));if(Se){if(h=u,Se.appendText)for(let Le=0,ce=Se.appendText.length;Le<ce&&h<o&&Se.appendText.charCodeAt(Le)===32;Le++)h++;Se.removeText&&(h=Math.max(0,h-Se.removeText));for(let Le=0;Le<h&&!(P===0||N.charCodeAt(P-1)!==32);Le++)P--}}if(this._opts.isUnshift&&P===0)continue;let K;this._opts.isUnshift?K=bg.unshiftIndent(N,P+1,s,o,a):K=bg.shiftIndent(N,P+1,s,o,a),this._addEditOperation(t,new Mt(v,1,v,P+1),K),v===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=P+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const u=a?fm(" ",o):"	";for(let h=n;h<=i;h++){const v=e.getLineContent(h);let N=ka(v);if(!(this._opts.isUnshift&&(v.length===0||N===0))&&!(!l&&!this._opts.isUnshift&&v.length===0)&&(N===-1&&(N=v.length),!(this._opts.isUnshift&&N===0)))if(this._opts.isUnshift){N=Math.min(N,o);for(let P=0;P<N;P++)if(v.charCodeAt(P)===9){N=P+1;break}this._addEditOperation(t,new Mt(h,1,h,N+1),"")}else this._addEditOperation(t,new Mt(h,1,h,1),u),h===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let i=t.getInverseEditOperations()[0];return new oi(i.range.endLineNumber,i.range.endColumn,i.range.endLineNumber,i.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let i=this._selection.startColumn;return n.startColumn<=i?n:n.getDirection()===0?new oi(n.startLineNumber,i,n.endLineNumber,n.endColumn):new oi(n.endLineNumber,n.endColumn,n.startLineNumber,i)}return n}}class QO{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new Mt(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new Mt(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let n=t.getInverseEditOperations(),i=n[0].range,s=n[1].range;return new oi(i.endLineNumber,i.endColumn,s.endLineNumber,s.endColumn-this._charAfterSelection.length)}}class Ns{static indent(e,t,n){if(t===null||n===null)return[];let i=[];for(let s=0,o=n.length;s<o;s++)i[s]=new bg(n[s],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return i}static outdent(e,t,n){let i=[];for(let s=0,o=n.length;s<o;s++)i[s]=new bg(n[s],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return i}static shiftIndent(e,t,n){return n=n||1,bg.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,bg.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,i){let s=[];for(let o=0,a=n.length;o<a;o++)s[o]=new Al(n[o],i[o]);return new kl(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,i,s){let o=[];for(let a=0,l=n.length;a<l;a++){const u=n[a];let h=u.getPosition();if(s&&!u.isEmpty()&&(s=!1),s&&i.indexOf(`
`)!==i.length-1&&(s=!1),s){let v=new Mt(h.lineNumber,1,h.lineNumber,1);o[a]=new qO(v,i,u,!0)}else o[a]=new Al(u,i)}return new kl(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,i,s){if(i||t.length===1)return null;if(s&&s.length===t.length)return s;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));let o=Ku(n);if(o.length===t.length)return o}return null}static paste(e,t,n,i,s,o){const a=this._distributePasteToCursors(e,n,i,s,o);return a?(n=n.sort(Mt.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,i,s)}static _goodIndentForLine(e,t,n){let i=null,s="";const o=$r.getInheritIndentForLine(e.autoIndent,t,n,!1);if(o)i=o.action,s=o.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const h=t.getLineContent(a);if(_u(h)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),u=$r.getEnterAction(e.autoIndent,t,new Mt(a,l,a,l));u&&(s=u.indentation+u.appendText)}return i&&(i===Rs.Indent&&(s=Ns.shiftIndent(e,s)),i===Rs.Outdent&&(s=Ns.unshiftIndent(e,s)),s=e.normalizeIndentation(s)),s||null}static _replaceJumpToNextIndent(e,t,n,i){let s="",o=n.getStartPosition();if(e.insertSpaces){let a=Zr.visibleColumnFromColumn2(e,t,o),l=e.indentSize,u=l-a%l;for(let h=0;h<u;h++)s+=" "}else s="	";return new Al(n,s,i)}static tab(e,t,n){let i=[];for(let s=0,o=n.length;s<o;s++){const a=n[s];if(a.isEmpty()){let l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.isCheapToTokenize(a.startLineNumber)){let u=this._goodIndentForLine(e,t,a.startLineNumber);u=u||"	";let h=e.normalizeIndentation(u);if(!l.startsWith(h)){i[s]=new Al(new Mt(a.startLineNumber,1,a.startLineNumber,l.length+1),h,!0);continue}}i[s]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){let l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){i[s]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}i[s]=new bg(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent})}}return i}static compositionType(e,t,n,i,s,o,a,l){const u=i.map(h=>this._compositionType(n,h,s,o,a,l));return new kl(4,u,{shouldPushStackElementBefore:bw(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,i,s,o){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-i),u=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+s),h=new Mt(a.lineNumber,l,a.lineNumber,u);return e.getValueInRange(h)===n&&o===0?null:new mw(h,n,0,o)}static _typeCommand(e,t,n){return n?new pw(e,t,!0):new Al(e,t,!0)}static _enter(e,t,n,i){if(e.autoIndent===0)return Ns._typeCommand(i,`
`,n);if(!t.isCheapToTokenize(i.getStartPosition().lineNumber)||e.autoIndent===1){let l=t.getLineContent(i.startLineNumber),u=Oo(l).substring(0,i.startColumn-1);return Ns._typeCommand(i,`
`+e.normalizeIndentation(u),n)}const s=$r.getEnterAction(e.autoIndent,t,i);if(s){if(s.indentAction===Rs.None)return Ns._typeCommand(i,`
`+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===Rs.Indent)return Ns._typeCommand(i,`
`+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===Rs.IndentOutdent){const l=e.normalizeIndentation(s.indentation),u=e.normalizeIndentation(s.indentation+s.appendText),h=`
`+u+`
`+l;return n?new pw(i,h,!0):new mw(i,h,-1,u.length-l.length,!0)}else if(s.indentAction===Rs.Outdent){const l=Ns.unshiftIndent(e,s.indentation);return Ns._typeCommand(i,`
`+e.normalizeIndentation(l+s.appendText),n)}}const o=t.getLineContent(i.startLineNumber),a=Oo(o).substring(0,i.startColumn-1);if(e.autoIndent>=4){const l=$r.getIndentForEnter(e.autoIndent,t,i,{unshiftIndent:u=>Ns.unshiftIndent(e,u),shiftIndent:u=>Ns.shiftIndent(e,u),normalizeIndentation:u=>e.normalizeIndentation(u)});if(l){let u=Zr.visibleColumnFromColumn2(e,t,i.getEndPosition());const h=i.endColumn,v=t.getLineContent(i.endLineNumber),N=ka(v);if(N>=0?i=i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,N+1)):i=i.setEndPosition(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),n)return new pw(i,`
`+e.normalizeIndentation(l.afterEnter),!0);{let P=0;return h<=N+1&&(e.insertSpaces||(u=Math.ceil(u/e.indentSize)),P=Math.min(u+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new mw(i,`
`+e.normalizeIndentation(l.afterEnter),0,P,!0)}}}return Ns._typeCommand(i,`
`+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let i=0,s=n.length;i<s;i++)if(!t.isCheapToTokenize(n[i].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,i){const s=$r.getIndentationAtPosition(t,n.startLineNumber,n.startColumn),o=$r.getIndentActionForType(e.autoIndent,t,n,i,{shiftIndent:a=>Ns.shiftIndent(e,a),unshiftIndent:a=>Ns.unshiftIndent(e,a)});if(o===null)return null;if(o!==e.normalizeIndentation(s)){const a=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return a===0?Ns._typeCommand(new Mt(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(o)+i,!1):Ns._typeCommand(new Mt(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(o)+t.getLineContent(n.startLineNumber).substring(a-1,n.startColumn-1)+i,!1)}return null}static _isAutoClosingOvertype(e,t,n,i,s){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let o=0,a=n.length;o<a;o++){const l=n[o];if(!l.isEmpty())return!1;const u=l.getPosition(),h=t.getLineContent(u.lineNumber);if(h.charAt(u.column-1)!==s)return!1;const N=u0(s);if((u.column>2?h.charCodeAt(u.column-2):0)===92&&N)return!1;if(e.autoClosingOvertype==="auto"){let K=!1;for(let ee=0,Se=i.length;ee<Se;ee++){const Le=i[ee];if(u.lineNumber===Le.startLineNumber&&u.column===Le.startColumn){K=!0;break}}if(!K)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,i,s){let o=[];for(let a=0,l=i.length;a<l;a++){const h=i[a].getPosition(),v=new Mt(h.lineNumber,h.column,h.lineNumber,h.column+1);o[a]=new Al(v,s)}return new kl(4,o,{shouldPushStackElementBefore:bw(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),i=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],s=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],o=i.some(l=>t.startsWith(l.open)),a=s.some(l=>t.startsWith(l.close));return!o&&a}static _findAutoClosingPairOpen(e,t,n,i){const s=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(i);if(!s)return null;let o=null;for(const a of s)if(o===null||a.open.length>o.open.length){let l=!0;for(const u of n)if(t.getValueInRange(new Mt(u.lineNumber,u.column-a.open.length+1,u.lineNumber,u.column))+i!==a.open){l=!1;break}l&&(o=a)}return o}static _findSubAutoClosingPairClose(e,t){if(t.open.length<=1)return"";const n=t.close.charAt(t.close.length-1),i=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let s=null;for(const o of i)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!s||o.open.length>s.open.length)&&(s=o);return s?s.close:""}static _getAutoClosingPairClose(e,t,n,i,s){const o=u0(i),a=o?e.autoClosingQuotes:e.autoClosingBrackets;if(a==="never")return null;const l=this._findAutoClosingPairOpen(e,t,n.map(N=>N.getPosition()),i);if(!l)return null;const u=this._findSubAutoClosingPairClose(e,l);let h=!0;const v=o?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;for(let N=0,P=n.length;N<P;N++){const K=n[N];if(!K.isEmpty())return null;const ee=K.getPosition(),Se=t.getLineContent(ee.lineNumber),Le=Se.substring(ee.column-1);if(Le.startsWith(u)||(h=!1),Se.length>ee.column-1){const ze=Se.charAt(ee.column-1);if(!Ns._isBeforeClosingBrace(e,Le)&&!v(ze))return null}if(!t.isCheapToTokenize(ee.lineNumber))return null;if(l.open.length===1&&o&&a!=="always"){const ze=r0(e.wordSeparators);if(s&&ee.column>1&&ze.get(Se.charCodeAt(ee.column-2))===0||!s&&ee.column>2&&ze.get(Se.charCodeAt(ee.column-3))===0)return null}t.forceTokenization(ee.lineNumber);const ce=t.getLineTokens(ee.lineNumber);let Ee=!1;try{Ee=$r.shouldAutoClosePair(l,ce,s?ee.column:ee.column-1)}catch(ze){En(ze)}if(!Ee)return null}return h?l.close.substring(0,l.close.length-u.length):l.close}static _runAutoClosingOpenCharType(e,t,n,i,s,o,a){let l=[];for(let u=0,h=i.length;u<h;u++){const v=i[u];l[u]=new Hx(v,s,o,a)}return new kl(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return u0(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,n,i){if(!Ns._shouldSurroundChar(e,i)||!e.surroundingPairs.hasOwnProperty(i))return!1;const s=u0(i);for(let o=0,a=n.length;o<a;o++){const l=n[o];if(l.isEmpty())return!1;let u=!0;for(let h=l.startLineNumber;h<=l.endLineNumber;h++){const v=t.getLineContent(h),N=h===l.startLineNumber?l.startColumn-1:0,P=h===l.endLineNumber?l.endColumn-1:v.length,K=v.substring(N,P);if(/[^ \t]/.test(K)){u=!1;break}}if(u)return!1;if(s&&l.startLineNumber===l.endLineNumber&&l.startColumn+1===l.endColumn){const h=t.getValueInRange(l);if(u0(h))return!1}}return!0}static _runSurroundSelectionType(e,t,n,i,s){let o=[];for(let a=0,l=i.length;a<l;a++){const u=i[a],h=t.surroundingPairs[s];o[a]=new QO(u,s,h)}return new kl(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,i,s){if(!t.electricChars.hasOwnProperty(s)||!i.isEmpty())return null;let o=i.getPosition();n.forceTokenization(o.lineNumber);let a=n.getLineTokens(o.lineNumber),l;try{l=$r.onElectricCharacter(s,a,o.column)}catch(u){return En(u),null}if(!l)return null;if(l.matchOpenBracket){let u=(a.getLineContent()+s).lastIndexOf(l.matchOpenBracket)+1,h=n.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:o.lineNumber,column:u});if(h){if(h.startLineNumber===o.lineNumber)return null;let v=n.getLineContent(h.startLineNumber),N=Oo(v),P=t.normalizeIndentation(N),K=n.getLineContent(o.lineNumber),ee=n.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,Se=K.substring(ee-1,o.column-1),Le=P+Se+s,ce=new Mt(o.lineNumber,1,o.lineNumber,o.column);const Ee=new Al(ce,Le);return new kl(PC(Le,e),[Ee],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,i,s,o){if(!i||oi.selectionsArrEqual(i,s))return null;let a=null;for(const u of s){if(!u.isEmpty())return null;const h=u.getPosition(),v=n.getValueInRange(new Mt(h.lineNumber,h.column-1,h.lineNumber,h.column));if(a===null)a=v;else if(a!==v)return null}if(!a)return null;if(this._isAutoClosingOvertype(t,n,s,o,a)){const u=s.map(h=>new Al(new Mt(h.positionLineNumber,h.positionColumn,h.positionLineNumber,h.positionColumn+1),"",!1));return new kl(4,u,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const l=this._getAutoClosingPairClose(t,n,s,a,!1);return l!==null?this._runAutoClosingOpenCharType(e,t,n,s,a,!1,l):null}static typeWithInterceptors(e,t,n,i,s,o,a){if(!e&&a===`
`){let h=[];for(let v=0,N=s.length;v<N;v++)h[v]=Ns._enter(n,i,!1,s[v]);return new kl(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,i,s)){let h=[],v=!1;for(let N=0,P=s.length;N<P;N++)if(h[N]=this._runAutoIndentType(n,i,s[N],a),!h[N]){v=!0;break}if(!v)return new kl(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoClosingOvertype(n,i,s,o,a))return this._runAutoClosingOvertype(t,n,i,s,a);if(!e){const h=this._getAutoClosingPairClose(n,i,s,a,!0);if(h)return this._runAutoClosingOpenCharType(t,n,i,s,a,!0,h)}if(this._isSurroundSelectionType(n,i,s,a))return this._runSurroundSelectionType(t,n,i,s,a);if(!e&&this._isTypeInterceptorElectricChar(n,i,s)){const h=this._typeInterceptorElectricChar(t,n,i,s[0],a);if(h)return h}let l=[];for(let h=0,v=s.length;h<v;h++)l[h]=new Al(s[h],a);const u=PC(a,t);return new kl(u,l,{shouldPushStackElementBefore:bw(t,u),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,i,s){let o=[];for(let l=0,u=i.length;l<u;l++)o[l]=new Al(i[l],s);const a=PC(s,e);return new kl(a,o,{shouldPushStackElementBefore:bw(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];let i=[];for(let s=0,o=n.length;s<o;s++){let a=n[s].positionLineNumber;if(a===1)i[s]=new pw(new Mt(1,1,1,1),`
`);else{a--;let l=t.getLineMaxColumn(a);i[s]=this._enter(e,t,!1,new Mt(a,l,a,l))}}return i}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];let i=[];for(let s=0,o=n.length;s<o;s++){const a=n[s].positionLineNumber;let l=t.getLineMaxColumn(a);i[s]=this._enter(e,t,!1,new Mt(a,l,a,l))}return i}static lineBreakInsert(e,t,n){let i=[];for(let s=0,o=n.length;s<o;s++)i[s]=this._enter(e,t,!0,n[s]);return i}}class Hx extends mw{constructor(e,t,n,i){super(e,(n?t:"")+i,0,-i.length);this._openCharacter=t,this._closeCharacter=i,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new Mt(i.startLineNumber,i.endColumn-this._closeCharacter.length,i.endLineNumber,i.endColumn),this.enclosingRange=new Mt(i.startLineNumber,i.endColumn-this._openCharacter.length-this._closeCharacter.length,i.endLineNumber,i.endColumn),super.computeCursorState(e,t)}}function PC(r,e){return r===" "?e===5||e===6?6:5:4}function bw(r,e){return Ux(r)&&!Ux(e)?!0:r===5?!1:zx(r)!==zx(e)}function zx(r){return r===6||r===5?"space":r}function Ux(r){return r===4||r===5||r===6}var di;(function(r){r.editorSimpleInput=new nr("editorSimpleInput",!1,!0),r.editorTextFocus=new nr("editorTextFocus",!1,w("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),r.focus=new nr("editorFocus",!1,w("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),r.textInputFocus=new nr("textInputFocus",!1,w("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),r.readOnly=new nr("editorReadonly",!1,w("editorReadonly","Whether the editor is read only")),r.inDiffEditor=new nr("inDiffEditor",!1,w("inDiffEditor","Whether the context is a diff editor")),r.columnSelection=new nr("editorColumnSelection",!1,w("editorColumnSelection","Whether `editor.columnSelection` is enabled")),r.writable=r.readOnly.toNegated(),r.hasNonEmptySelection=new nr("editorHasSelection",!1,w("editorHasSelection","Whether the editor has text selected")),r.hasOnlyEmptySelection=r.hasNonEmptySelection.toNegated(),r.hasMultipleSelections=new nr("editorHasMultipleSelections",!1,w("editorHasMultipleSelections","Whether the editor has multiple selections")),r.hasSingleSelection=r.hasMultipleSelections.toNegated(),r.tabMovesFocus=new nr("editorTabMovesFocus",!1,w("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),r.tabDoesNotMoveFocus=r.tabMovesFocus.toNegated(),r.isInWalkThroughSnippet=new nr("isInEmbeddedEditor",!1,!0),r.canUndo=new nr("canUndo",!1,!0),r.canRedo=new nr("canRedo",!1,!0),r.hoverVisible=new nr("editorHoverVisible",!1,w("editorHoverVisible","Whether the editor hover is visible")),r.inCompositeEditor=new nr("inCompositeEditor",void 0,w("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),r.notInCompositeEditor=r.inCompositeEditor.toNegated(),r.languageId=new nr("editorLangId","",w("editorLangId","The language identifier of the editor")),r.hasCompletionItemProvider=new nr("editorHasCompletionItemProvider",!1,w("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),r.hasCodeActionsProvider=new nr("editorHasCodeActionsProvider",!1,w("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),r.hasCodeLensProvider=new nr("editorHasCodeLensProvider",!1,w("editorHasCodeLensProvider","Whether the editor has a code lens provider")),r.hasDefinitionProvider=new nr("editorHasDefinitionProvider",!1,w("editorHasDefinitionProvider","Whether the editor has a definition provider")),r.hasDeclarationProvider=new nr("editorHasDeclarationProvider",!1,w("editorHasDeclarationProvider","Whether the editor has a declaration provider")),r.hasImplementationProvider=new nr("editorHasImplementationProvider",!1,w("editorHasImplementationProvider","Whether the editor has an implementation provider")),r.hasTypeDefinitionProvider=new nr("editorHasTypeDefinitionProvider",!1,w("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),r.hasHoverProvider=new nr("editorHasHoverProvider",!1,w("editorHasHoverProvider","Whether the editor has a hover provider")),r.hasDocumentHighlightProvider=new nr("editorHasDocumentHighlightProvider",!1,w("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),r.hasDocumentSymbolProvider=new nr("editorHasDocumentSymbolProvider",!1,w("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),r.hasReferenceProvider=new nr("editorHasReferenceProvider",!1,w("editorHasReferenceProvider","Whether the editor has a reference provider")),r.hasRenameProvider=new nr("editorHasRenameProvider",!1,w("editorHasRenameProvider","Whether the editor has a rename provider")),r.hasSignatureHelpProvider=new nr("editorHasSignatureHelpProvider",!1,w("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),r.hasInlayHintsProvider=new nr("editorHasInlayHintsProvider",!1,w("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),r.hasDocumentFormattingProvider=new nr("editorHasDocumentFormattingProvider",!1,w("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),r.hasDocumentSelectionFormattingProvider=new nr("editorHasDocumentSelectionFormattingProvider",!1,w("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),r.hasMultipleDocumentFormattingProvider=new nr("editorHasMultipleDocumentFormattingProvider",!1,w("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),r.hasMultipleDocumentSelectionFormattingProvider=new nr("editorHasMultipleDocumentSelectionFormattingProvider",!1,w("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(di||(di={}));const Er=0;class Bs extends Jv{runEditorCommand(e,t,n){const i=t._getViewModel();!i||this.runCoreEditorCommand(i,n||{})}}var ww;(function(r){const e=function(n){if(!oa(n))return!1;const i=n;return!(!El(i.to)||!ks(i.by)&&!El(i.by)||!ks(i.value)&&!Fa(i.value)||!ks(i.revealCursor)&&!ep(i.revealCursor))};r.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},r.RawDirection={Up:"up",Down:"down"},r.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"};function t(n){let i;switch(n.to){case r.RawDirection.Up:i=1;break;case r.RawDirection.Down:i=2;break;default:return null}let s;switch(n.by){case r.RawUnit.Line:s=1;break;case r.RawUnit.WrappedLine:s=2;break;case r.RawUnit.Page:s=3;break;case r.RawUnit.HalfPage:s=4;break;default:s=2}const o=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:i,unit:s,value:o,revealCursor:a,select:!!n.select}}r.parse=t})(ww||(ww={}));var v0;(function(r){const e=function(t){if(!oa(t))return!1;const n=t;return!(!Fa(n.lineNumber)&&!El(n.lineNumber)||!ks(n.at)&&!El(n.at))};r.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},r.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(v0||(v0={}));class FC{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(ht).getFocusedCodeEditor();return i&&i.hasTextFocus()?this._runEditorCommand(t,i,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const i=document.activeElement;return i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const i=t.get(ht).getActiveCodeEditor();return i?(i.focus(),this._runEditorCommand(t,i,n)):!1})}_runEditorCommand(e,t,n){const i=this.runEditorCommand(e,t,n);return i||!0}}var Eo;(function(r){class e extends Bs{constructor(ce){super(ce);this._inSelectionMode=ce.inSelectionMode}runCoreEditorCommand(ce,Ee){ce.model.pushStackElement(),ce.setCursorStates(Ee.source,3,[ga.moveTo(ce,ce.getPrimaryCursorState(),this._inSelectionMode,Ee.position,Ee.viewPosition)]),ce.revealPrimaryCursor(Ee.source,!0)}}r.MoveTo=Yi(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),r.MoveToSelect=Yi(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends Bs{runCoreEditorCommand(ce,Ee){ce.model.pushStackElement();const ze=this._getColumnSelectResult(ce,ce.getPrimaryCursorState(),ce.getCursorColumnSelectData(),Ee);ce.setCursorStates(Ee.source,3,ze.viewStates.map(Qe=>ar.fromViewState(Qe))),ce.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:ze.fromLineNumber,fromViewVisualColumn:ze.fromVisualColumn,toViewLineNumber:ze.toLineNumber,toViewVisualColumn:ze.toVisualColumn}),ze.reversed?ce.revealTopMostCursor(Ee.source):ce.revealBottomMostCursor(Ee.source)}}r.ColumnSelect=Yi(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(Le,ce,Ee,ze){const Qe=Le.model.validatePosition(ze.position),at=Le.coordinatesConverter.validateViewPosition(new dn(ze.viewPosition.lineNumber,ze.viewPosition.column),Qe);let Ze=ze.doColumnSelect?Ee.fromViewLineNumber:at.lineNumber,rt=ze.doColumnSelect?Ee.fromViewVisualColumn:ze.mouseColumn-1;return hm.columnSelect(Le.cursorConfig,Le,Ze,rt,at.lineNumber,ze.mouseColumn-1)}}),r.CursorColumnSelectLeft=Yi(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:2048|1024|512|15,linux:{primary:0}}})}_getColumnSelectResult(Le,ce,Ee,ze){return hm.columnSelectLeft(Le.cursorConfig,Le,Ee)}}),r.CursorColumnSelectRight=Yi(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:2048|1024|512|17,linux:{primary:0}}})}_getColumnSelectResult(Le,ce,Ee,ze){return hm.columnSelectRight(Le.cursorConfig,Le,Ee)}});class n extends t{constructor(ce){super(ce);this._isPaged=ce.isPaged}_getColumnSelectResult(ce,Ee,ze,Qe){return hm.columnSelectUp(ce.cursorConfig,ce,ze,this._isPaged)}}r.CursorColumnSelectUp=Yi(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:2048|1024|512|16,linux:{primary:0}}})),r.CursorColumnSelectPageUp=Yi(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:2048|1024|512|11,linux:{primary:0}}}));class i extends t{constructor(ce){super(ce);this._isPaged=ce.isPaged}_getColumnSelectResult(ce,Ee,ze,Qe){return hm.columnSelectDown(ce.cursorConfig,ce,ze,this._isPaged)}}r.CursorColumnSelectDown=Yi(new i({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:2048|1024|512|18,linux:{primary:0}}})),r.CursorColumnSelectPageDown=Yi(new i({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:2048|1024|512|12,linux:{primary:0}}}));class s extends Bs{constructor(){super({id:"cursorMove",precondition:void 0,description:yw.description})}runCoreEditorCommand(ce,Ee){const ze=yw.parse(Ee);!ze||this._runCursorMove(ce,Ee.source,ze)}_runCursorMove(ce,Ee,ze){ce.model.pushStackElement(),ce.setCursorStates(Ee,3,s._move(ce,ce.getCursorStates(),ze)),ce.revealPrimaryCursor(Ee,!0)}static _move(ce,Ee,ze){const Qe=ze.select,at=ze.value;switch(ze.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return ga.simpleMove(ce,Ee,ze.direction,Qe,at,ze.unit);case 11:case 13:case 12:case 14:return ga.viewportMove(ce,Ee,ze.direction,Qe,at);default:return null}}}r.CursorMoveImpl=s,r.CursorMove=Yi(new s);class o extends Bs{constructor(ce){super(ce);this._staticArgs=ce.args}runCoreEditorCommand(ce,Ee){let ze=this._staticArgs;this._staticArgs.value===-1&&(ze={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:ce.cursorConfig.pageSize}),ce.model.pushStackElement(),ce.setCursorStates(Ee.source,3,ga.simpleMove(ce,ce.getCursorStates(),ze.direction,ze.select,ze.value,ze.unit)),ce.revealPrimaryCursor(Ee.source,!0)}}r.CursorLeft=Yi(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:15,mac:{primary:15,secondary:[256|32]}}})),r.CursorLeftSelect=Yi(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:1024|15}})),r.CursorRight=Yi(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:17,mac:{primary:17,secondary:[256|36]}}})),r.CursorRightSelect=Yi(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:1024|17}})),r.CursorUp=Yi(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:16,mac:{primary:16,secondary:[256|46]}}})),r.CursorUpSelect=Yi(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:1024|16,secondary:[2048|1024|16],mac:{primary:1024|16},linux:{primary:1024|16}}})),r.CursorPageUp=Yi(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:11}})),r.CursorPageUpSelect=Yi(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:1024|11}})),r.CursorDown=Yi(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:18,mac:{primary:18,secondary:[256|44]}}})),r.CursorDownSelect=Yi(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:1024|18,secondary:[2048|1024|18],mac:{primary:1024|18},linux:{primary:1024|18}}})),r.CursorPageDown=Yi(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:12}})),r.CursorPageDownSelect=Yi(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:1024|12}})),r.CreateCursor=Yi(new class extends Bs{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(Le,ce){let Ee;ce.wholeLine?Ee=ga.line(Le,Le.getPrimaryCursorState(),!1,ce.position,ce.viewPosition):Ee=ga.moveTo(Le,Le.getPrimaryCursorState(),!1,ce.position,ce.viewPosition);const ze=Le.getCursorStates();if(ze.length>1){const Qe=Ee.modelState?Ee.modelState.position:null,at=Ee.viewState?Ee.viewState.position:null;for(let Ze=0,rt=ze.length;Ze<rt;Ze++){const St=ze[Ze];if(!(Qe&&!St.modelState.selection.containsPosition(Qe))&&!(at&&!St.viewState.selection.containsPosition(at))){ze.splice(Ze,1),Le.model.pushStackElement(),Le.setCursorStates(ce.source,3,ze);return}}}ze.push(Ee),Le.model.pushStackElement(),Le.setCursorStates(ce.source,3,ze)}}),r.LastCursorMoveToSelect=Yi(new class extends Bs{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(Le,ce){const Ee=Le.getLastAddedCursorIndex(),ze=Le.getCursorStates(),Qe=ze.slice(0);Qe[Ee]=ga.moveTo(Le,ze[Ee],!0,ce.position,ce.viewPosition),Le.model.pushStackElement(),Le.setCursorStates(ce.source,3,Qe)}});class a extends Bs{constructor(ce){super(ce);this._inSelectionMode=ce.inSelectionMode}runCoreEditorCommand(ce,Ee){ce.model.pushStackElement(),ce.setCursorStates(Ee.source,3,ga.moveToBeginningOfLine(ce,ce.getCursorStates(),this._inSelectionMode)),ce.revealPrimaryCursor(Ee.source,!0)}}r.CursorHome=Yi(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:14,mac:{primary:14,secondary:[2048|15]}}})),r.CursorHomeSelect=Yi(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:1024|14,mac:{primary:1024|14,secondary:[2048|1024|15]}}}));class l extends Bs{constructor(ce){super(ce);this._inSelectionMode=ce.inSelectionMode}runCoreEditorCommand(ce,Ee){ce.model.pushStackElement(),ce.setCursorStates(Ee.source,3,this._exec(ce.getCursorStates())),ce.revealPrimaryCursor(Ee.source,!0)}_exec(ce){const Ee=[];for(let ze=0,Qe=ce.length;ze<Qe;ze++){const at=ce[ze],Ze=at.modelState.position.lineNumber;Ee[ze]=ar.fromModelState(at.modelState.move(this._inSelectionMode,Ze,1,0))}return Ee}}r.CursorLineStart=Yi(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:0,mac:{primary:256|31}}})),r.CursorLineStartSelect=Yi(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:0,mac:{primary:256|1024|31}}}));class u extends Bs{constructor(ce){super(ce);this._inSelectionMode=ce.inSelectionMode}runCoreEditorCommand(ce,Ee){ce.model.pushStackElement(),ce.setCursorStates(Ee.source,3,ga.moveToEndOfLine(ce,ce.getCursorStates(),this._inSelectionMode,Ee.sticky||!1)),ce.revealPrimaryCursor(Ee.source,!0)}}r.CursorEnd=Yi(new u({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Er,kbExpr:di.textInputFocus,primary:13,mac:{primary:13,secondary:[2048|17]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:w("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),r.CursorEndSelect=Yi(new u({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Er,kbExpr:di.textInputFocus,primary:1024|13,mac:{primary:1024|13,secondary:[2048|1024|17]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:w("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class h extends Bs{constructor(ce){super(ce);this._inSelectionMode=ce.inSelectionMode}runCoreEditorCommand(ce,Ee){ce.model.pushStackElement(),ce.setCursorStates(Ee.source,3,this._exec(ce,ce.getCursorStates())),ce.revealPrimaryCursor(Ee.source,!0)}_exec(ce,Ee){const ze=[];for(let Qe=0,at=Ee.length;Qe<at;Qe++){const Ze=Ee[Qe],rt=Ze.modelState.position.lineNumber,St=ce.model.getLineMaxColumn(rt);ze[Qe]=ar.fromModelState(Ze.modelState.move(this._inSelectionMode,rt,St,0))}return ze}}r.CursorLineEnd=Yi(new h({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:0,mac:{primary:256|35}}})),r.CursorLineEndSelect=Yi(new h({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:0,mac:{primary:256|1024|35}}}));class v extends Bs{constructor(ce){super(ce);this._inSelectionMode=ce.inSelectionMode}runCoreEditorCommand(ce,Ee){ce.model.pushStackElement(),ce.setCursorStates(Ee.source,3,ga.moveToBeginningOfBuffer(ce,ce.getCursorStates(),this._inSelectionMode)),ce.revealPrimaryCursor(Ee.source,!0)}}r.CursorTop=Yi(new v({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:2048|14,mac:{primary:2048|16}}})),r.CursorTopSelect=Yi(new v({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:2048|1024|14,mac:{primary:2048|1024|16}}}));class N extends Bs{constructor(ce){super(ce);this._inSelectionMode=ce.inSelectionMode}runCoreEditorCommand(ce,Ee){ce.model.pushStackElement(),ce.setCursorStates(Ee.source,3,ga.moveToEndOfBuffer(ce,ce.getCursorStates(),this._inSelectionMode)),ce.revealPrimaryCursor(Ee.source,!0)}}r.CursorBottom=Yi(new N({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:2048|13,mac:{primary:2048|18}}})),r.CursorBottomSelect=Yi(new N({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:2048|1024|13,mac:{primary:2048|1024|18}}}));class P extends Bs{constructor(){super({id:"editorScroll",precondition:void 0,description:ww.description})}runCoreEditorCommand(ce,Ee){const ze=ww.parse(Ee);!ze||this._runEditorScroll(ce,Ee.source,ze)}_runEditorScroll(ce,Ee,ze){const Qe=this._computeDesiredScrollTop(ce,ze);if(ze.revealCursor){const at=ce.getCompletelyVisibleViewRangeAtScrollTop(Qe);ce.setCursorStates(Ee,3,[ga.findPositionInViewportIfOutside(ce,ce.getPrimaryCursorState(),at,ze.select)])}ce.setScrollTop(Qe,0)}_computeDesiredScrollTop(ce,Ee){if(Ee.unit===1){const at=ce.getCompletelyVisibleViewRange(),Ze=ce.coordinatesConverter.convertViewRangeToModelRange(at);let rt;Ee.direction===1?rt=Math.max(1,Ze.startLineNumber-Ee.value):rt=Math.min(ce.model.getLineCount(),Ze.startLineNumber+Ee.value);const St=ce.coordinatesConverter.convertModelPositionToViewPosition(new dn(rt,1));return ce.getVerticalOffsetForLineNumber(St.lineNumber)}let ze;Ee.unit===3?ze=ce.cursorConfig.pageSize*Ee.value:Ee.unit===4?ze=Math.round(ce.cursorConfig.pageSize/2)*Ee.value:ze=Ee.value;const Qe=(Ee.direction===1?-1:1)*ze;return ce.getScrollTop()+Qe*ce.cursorConfig.lineHeight}}r.EditorScrollImpl=P,r.EditorScroll=Yi(new P),r.ScrollLineUp=Yi(new class extends Bs{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:2048|16,mac:{primary:256|11}}})}runCoreEditorCommand(Le,ce){r.EditorScroll._runEditorScroll(Le,ce.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),r.ScrollPageUp=Yi(new class extends Bs{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:2048|11,win:{primary:512|11},linux:{primary:512|11}}})}runCoreEditorCommand(Le,ce){r.EditorScroll._runEditorScroll(Le,ce.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),r.ScrollLineDown=Yi(new class extends Bs{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:2048|18,mac:{primary:256|12}}})}runCoreEditorCommand(Le,ce){r.EditorScroll._runEditorScroll(Le,ce.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),r.ScrollPageDown=Yi(new class extends Bs{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:2048|12,win:{primary:512|12},linux:{primary:512|12}}})}runCoreEditorCommand(Le,ce){r.EditorScroll._runEditorScroll(Le,ce.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class K extends Bs{constructor(ce){super(ce);this._inSelectionMode=ce.inSelectionMode}runCoreEditorCommand(ce,Ee){ce.model.pushStackElement(),ce.setCursorStates(Ee.source,3,[ga.word(ce,ce.getPrimaryCursorState(),this._inSelectionMode,Ee.position)]),ce.revealPrimaryCursor(Ee.source,!0)}}r.WordSelect=Yi(new K({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),r.WordSelectDrag=Yi(new K({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),r.LastCursorWordSelect=Yi(new class extends Bs{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(Le,ce){const Ee=Le.getLastAddedCursorIndex(),ze=Le.getCursorStates(),Qe=ze.slice(0),at=ze[Ee];Qe[Ee]=ga.word(Le,at,at.modelState.hasSelection(),ce.position),Le.model.pushStackElement(),Le.setCursorStates(ce.source,3,Qe)}});class ee extends Bs{constructor(ce){super(ce);this._inSelectionMode=ce.inSelectionMode}runCoreEditorCommand(ce,Ee){ce.model.pushStackElement(),ce.setCursorStates(Ee.source,3,[ga.line(ce,ce.getPrimaryCursorState(),this._inSelectionMode,Ee.position,Ee.viewPosition)]),ce.revealPrimaryCursor(Ee.source,!1)}}r.LineSelect=Yi(new ee({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),r.LineSelectDrag=Yi(new ee({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class Se extends Bs{constructor(ce){super(ce);this._inSelectionMode=ce.inSelectionMode}runCoreEditorCommand(ce,Ee){const ze=ce.getLastAddedCursorIndex(),Qe=ce.getCursorStates(),at=Qe.slice(0);at[ze]=ga.line(ce,Qe[ze],this._inSelectionMode,Ee.position,Ee.viewPosition),ce.model.pushStackElement(),ce.setCursorStates(Ee.source,3,at)}}r.LastCursorLineSelect=Yi(new Se({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),r.LastCursorLineSelectDrag=Yi(new Se({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),r.ExpandLineSelection=Yi(new class extends Bs{constructor(){super({id:"expandLineSelection",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:2048|42}})}runCoreEditorCommand(Le,ce){Le.model.pushStackElement(),Le.setCursorStates(ce.source,3,ga.expandLineSelection(Le,Le.getCursorStates())),Le.revealPrimaryCursor(ce.source,!0)}}),r.CancelSelection=Yi(new class extends Bs{constructor(){super({id:"cancelSelection",precondition:di.hasNonEmptySelection,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:9,secondary:[1024|9]}})}runCoreEditorCommand(Le,ce){Le.model.pushStackElement(),Le.setCursorStates(ce.source,3,[ga.cancelSelection(Le,Le.getPrimaryCursorState())]),Le.revealPrimaryCursor(ce.source,!0)}}),r.RemoveSecondaryCursors=Yi(new class extends Bs{constructor(){super({id:"removeSecondaryCursors",precondition:di.hasMultipleSelections,kbOpts:{weight:Er+1,kbExpr:di.textInputFocus,primary:9,secondary:[1024|9]}})}runCoreEditorCommand(Le,ce){Le.model.pushStackElement(),Le.setCursorStates(ce.source,3,[Le.getPrimaryCursorState()]),Le.revealPrimaryCursor(ce.source,!0),xT(w("removedCursor","Removed secondary cursors"))}}),r.RevealLine=Yi(new class extends Bs{constructor(){super({id:"revealLine",precondition:void 0,description:v0.description})}runCoreEditorCommand(Le,ce){const Ee=ce,ze=Ee.lineNumber||0;let Qe=typeof ze=="number"?ze+1:parseInt(ze)+1;Qe<1&&(Qe=1);const at=Le.model.getLineCount();Qe>at&&(Qe=at);const Ze=new Mt(Qe,1,Qe,Le.model.getLineMaxColumn(Qe));let rt=0;if(Ee.at)switch(Ee.at){case v0.RawAtArgument.Top:rt=3;break;case v0.RawAtArgument.Center:rt=1;break;case v0.RawAtArgument.Bottom:rt=4;break;default:break}const St=Le.coordinatesConverter.convertModelRangeToViewRange(Ze);Le.revealRange(ce.source,!1,St,rt,0)}}),r.SelectAll=new class extends FC{constructor(){super(AT)}runDOMCommand(){ri&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(Le,ce,Ee){const ze=ce._getViewModel();!ze||this.runCoreEditorCommand(ze,Ee)}runCoreEditorCommand(Le,ce){Le.model.pushStackElement(),Le.setCursorStates("keyboard",3,[ga.selectAll(Le,Le.getPrimaryCursorState())])}},r.SetSelection=Yi(new class extends Bs{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(Le,ce){Le.model.pushStackElement(),Le.setCursorStates(ce.source,3,[ar.fromModelSelection(ce.selection)])}})})(Eo||(Eo={}));const JO=ha.and(di.textInputFocus,di.columnSelection);function _0(r,e){bb.registerKeybindingRule({id:r,primary:e,when:JO,weight:Er+1})}_0(Eo.CursorColumnSelectLeft.id,1024|15),_0(Eo.CursorColumnSelectRight.id,1024|17),_0(Eo.CursorColumnSelectUp.id,1024|16),_0(Eo.CursorColumnSelectPageUp.id,1024|11),_0(Eo.CursorColumnSelectDown.id,1024|18),_0(Eo.CursorColumnSelectPageDown.id,1024|12);function jx(r){return r.register(),r}var $x;(function(r){class e extends Jv{runEditorCommand(n,i,s){const o=i._getViewModel();!o||this.runCoreEditingCommand(i,o,s||{})}}r.CoreEditingCommand=e,r.LineBreakInsert=Yi(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:di.writable,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:0,mac:{primary:256|45}}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,Ns.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection)))}}),r.Outdent=Yi(new class extends e{constructor(){super({id:"outdent",precondition:di.writable,kbOpts:{weight:Er,kbExpr:ha.and(di.editorTextFocus,di.tabDoesNotMoveFocus),primary:1024|2}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,Ns.outdent(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),r.Tab=Yi(new class extends e{constructor(){super({id:"tab",precondition:di.writable,kbOpts:{weight:Er,kbExpr:ha.and(di.editorTextFocus,di.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,Ns.tab(n.cursorConfig,n.model,n.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),r.DeleteLeft=Yi(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:1,secondary:[1024|1],mac:{primary:1,secondary:[1024|1,256|38,256|1]}}})}runCoreEditingCommand(t,n,i){const[s,o]=dm.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());s&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(2)}}),r.DeleteRight=Yi(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:Er,kbExpr:di.textInputFocus,primary:20,mac:{primary:20,secondary:[256|34,256|20]}}})}runCoreEditingCommand(t,n,i){const[s,o]=dm.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));s&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(3)}}),r.Undo=new class extends FC{constructor(){super(ML)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,n,i){if(!(!n.hasModel()||n.getOption(78)===!0))return n.getModel().undo()}},r.Redo=new class extends FC{constructor(){super(OL)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,n,i){if(!(!n.hasModel()||n.getOption(78)===!0))return n.getModel().redo()}}})($x||($x={}));class Kx extends Hb{constructor(e,t,n){super({id:e,precondition:void 0,description:n});this._handlerId=t}runCommand(e,t){const n=e.get(ht).getFocusedCodeEditor();!n||n.trigger("keyboard",this._handlerId,t)}}function gm(r,e){jx(new Kx("default:"+r,r)),jx(new Kx(r,r,e))}gm("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),gm("replacePreviousChar"),gm("compositionType"),gm("compositionStart"),gm("compositionEnd"),gm("paste"),gm("cut");class ek{constructor(e,t,n,i){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=i}paste(e,t,n,i){this.commandDelegate.paste(e,t,n,i)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,i){this.commandDelegate.compositionType(e,t,n,i)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Eo.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new dn(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(67)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(67)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=Q&&t.get(94),i=t.get(16);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):i?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){Eo.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){Eo.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,n){e=this._validateViewColumn(e),Eo.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),Eo.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){Eo.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){Eo.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){Eo.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){Eo.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){Eo.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){Eo.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){Eo.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){Eo.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){Eo.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class Cw{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return Cw.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){return new tk(e.element,e.type,e.mouseColumn,e.position?t.convertViewPositionToModelPosition(e.position):null,e.range?t.convertViewRangeToModelRange(e.range):null,e.detail)}}class tk{constructor(e,t,n,i,s,o){this.element=e,this.type=t,this.mouseColumn=n,this.position=i,this.range=s,this.detail=o}toString(){return zc.toString(this)}}var BC;class Gx{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),i=this.getEndLineNumber();if(t<n){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>i)return null;let s=0,o=0;for(let l=n;l<=i;l++){const u=l-this._rendLineNumberStart;e<=l&&l<=t&&(o===0?(s=u,o=1):o++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(s,o)}onLinesChanged(e,t){if(this.getCount()===0)return!1;const n=this.getStartLineNumber(),i=this.getEndLineNumber();let s=!1;for(let o=e;o<=t;o++)o>=n&&o<=i&&(this._lines[o-this._rendLineNumberStart].onContentChanged(),s=!0);return s}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,i=this.getStartLineNumber(),s=this.getEndLineNumber();if(e<=i)return this._rendLineNumberStart+=n,null;if(e>s)return null;if(n+e>s)return this._lines.splice(e-this._rendLineNumberStart,s-e+1);const o=[];for(let v=0;v<n;v++)o[v]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),u=this._lines.slice(a,this._lines.length-n),h=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(o).concat(u),h}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let i=!1;for(let s=0,o=e.length;s<o;s++){const a=e[s];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const l=Math.max(t,a.fromLineNumber),u=Math.min(n,a.toLineNumber);for(let h=l;h<=u;h++){const v=h-this._rendLineNumberStart;this._lines[v].onTokensChanged(),i=!0}}return i}}class Yx{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new Gx(()=>this._host.createVisibleLine())}_createDomNode(){const e=Sr(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(128)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const s=t[n].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const s=t[n].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new Kd(this.domNode.domNode,this._host,e),i={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},s=n.render(i,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(s.rendLineNumberStart,s.lines)}}class Kd{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,i){const s={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(s.rendLineNumberStart+s.linesLength-1<t||n<s.rendLineNumberStart){s.rendLineNumberStart=t,s.linesLength=n-t+1,s.lines=[];for(let o=t;o<=n;o++)s.lines[o-t]=this.host.createVisibleLine();return this._finishRendering(s,!0,i),s}if(this._renderUntouchedLines(s,Math.max(t-s.rendLineNumberStart,0),Math.min(n-s.rendLineNumberStart,s.linesLength-1),i,t),s.rendLineNumberStart>t){const o=t,a=Math.min(n,s.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(s,o,a,i,t),s.linesLength+=a-o+1)}else if(s.rendLineNumberStart<t){const o=Math.min(s.linesLength,t-s.rendLineNumberStart);o>0&&(this._removeLinesBefore(s,o),s.linesLength-=o)}if(s.rendLineNumberStart=t,s.rendLineNumberStart+s.linesLength-1<n){const o=s.rendLineNumberStart+s.linesLength,a=n;o<=a&&(this._insertLinesAfter(s,o,a,i,t),s.linesLength+=a-o+1)}else if(s.rendLineNumberStart+s.linesLength-1>n){const o=Math.max(0,n-s.rendLineNumberStart+1),l=s.linesLength-1-o+1;l>0&&(this._removeLinesAfter(s,l),s.linesLength-=l)}return this._finishRendering(s,!1,i),s}_renderUntouchedLines(e,t,n,i,s){const o=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){const u=o+l;a[l].layoutLine(u,i[u-s])}}_insertLinesBefore(e,t,n,i,s){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this.host.createVisibleLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const i=e.lines[n].getDomNode();i&&this.domNode.removeChild(i)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,i,s){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let i=0;i<t;i++){const s=e.lines[n+i].getDomNode();s&&this.domNode.removeChild(s)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,i){Kd._ttPolicy&&(n=Kd._ttPolicy.createHTML(n));const s=this.domNode.lastChild;t||!s?this.domNode.innerHTML=n:s.insertAdjacentHTML("afterend",n);let o=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];i[a]&&(l.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const i=document.createElement("div");Kd._ttPolicy&&(t=Kd._ttPolicy.createHTML(t)),i.innerHTML=t;for(let s=0;s<e.linesLength;s++){const o=e.lines[s];if(n[s]){const a=i.firstChild,l=o.getDomNode();l.parentNode.replaceChild(a,l),o.setDomNode(a)}}}_finishRendering(e,t,n){const i=Kd._sb,s=e.linesLength,o=e.lines,a=e.rendLineNumberStart,l=[];{i.reset();let u=!1;for(let h=0;h<s;h++){const v=o[h];l[h]=!1,!(v.getDomNode()||!v.renderLine(h+a,n[h],this.viewportData,i))&&(l[h]=!0,u=!0)}u&&this._finishRenderingNewLines(e,t,i.build(),l)}{i.reset();let u=!1;const h=[];for(let v=0;v<s;v++){const N=o[v];h[v]=!1,!(l[v]||!N.renderLine(v+a,n[v],this.viewportData,i))&&(h[v]=!0,u=!0)}u&&this._finishRenderingInvalidLines(e,i.build(),h)}}}Kd._ttPolicy=(BC=window.trustedTypes)===null||BC===void 0?void 0:BC.createPolicy("editorViewLayer",{createHTML:r=>r}),Kd._sb=_h(1e5);class Zx extends Ou{constructor(e){super(e);this._visibleLines=new Yx(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new nk(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,i=t.length;n<i;n++){const s=t[n];s.prepareRender(e),s.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class nk{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(56),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=Sr(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(56)}renderLine(e,t,n,i){let s="";for(let o=0,a=this._dynamicOverlays.length;o<a;o++)s+=this._dynamicOverlays[o].render(n.startLineNumber,e);return this._renderedContent===s?!1:(this._renderedContent=s,i.appendASCIIString('<div style="position:absolute;top:'),i.appendASCIIString(String(t)),i.appendASCIIString("px;width:100%;height:"),i.appendASCIIString(String(this._lineHeight)),i.appendASCIIString('px;">'),i.appendASCIIString(s),i.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class ik extends Zx{constructor(e){super(e);const n=this._context.configuration.options.get(128);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(128);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class rk extends Zx{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(128);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),ul.applyFontInfo(this.domNode,t.get(40))}onConfigurationChanged(e){const t=this._context.configuration.options;ul.applyFontInfo(this.domNode,t.get(40));const n=t.get(128);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class gy{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}}class sk extends Ou{constructor(e,t){super(e);this._viewDomNode=t,this._widgets={},this.domNode=Sr(document.createElement("div")),kh.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=Sr(document.createElement("div")),kh.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const t=new ok(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n){this._widgets[e.getId()].setPosition(t,n),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const i=n.domNode.domNode;i.parentNode.removeChild(i),i.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}class ok{constructor(e,t,n){this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=Sr(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const i=this._context.configuration.options,s=i.get(128);this._fixedOverflowWidgets=i.get(34),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=i.get(56),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(56),e.hasChanged(128)){const n=t.get(128);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range)}_setPosition(e){if(this._range=e,this._viewRange=null,this._range){const t=this._context.model.validateModelRange(this._range);(this._context.model.coordinatesConverter.modelPositionIsVisible(t.getStartPosition())||this._context.model.coordinatesConverter.modelPositionIsVisible(t.getEndPosition()))&&(this._viewRange=this._context.model.coordinatesConverter.convertModelRangeToViewRange(t))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:this._contentWidth}setPosition(e,t){this._setPosition(e),this._preference=t,this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1}_layoutBoxInViewport(e,t,n,i,s){const o=e.top,a=o,l=t.top+this._lineHeight,u=s.viewportHeight-l,h=o-i,v=a>=i,N=l,P=u>=i;let K=e.left,ee=t.left;return K+n>s.scrollLeft+s.viewportWidth&&(K=s.scrollLeft+s.viewportWidth-n),ee+n>s.scrollLeft+s.viewportWidth&&(ee=s.scrollLeft+s.viewportWidth-n),K<s.scrollLeft&&(K=s.scrollLeft),ee<s.scrollLeft&&(ee=s.scrollLeft),{fitsAbove:v,aboveTop:h,aboveLeft:K,fitsBelow:P,belowTop:N,belowLeft:ee}}_layoutHorizontalSegmentInPage(e,t,n,i){const s=Math.max(0,t.left-i),o=Math.min(t.left+t.width+i,e.width);let a=t.left+n-no.scrollX;if(a+i>o){const l=a-(o-i);a-=l,n-=l}if(a<s){const l=a-s;a-=l,n-=l}return[n,a]}_layoutBoxInPage(e,t,n,i,s){const o=e.top-i,a=t.top+this._lineHeight,l=vl(this._viewDomNode.domNode),u=l.top+o-no.scrollY,h=l.top+a-no.scrollY,v=Hm(document.body),[N,P]=this._layoutHorizontalSegmentInPage(v,l,e.left-s.scrollLeft+this._contentLeft,n),[K,ee]=this._layoutHorizontalSegmentInPage(v,l,t.left-s.scrollLeft+this._contentLeft,n),Se=22,Le=22,ce=u>=Se,Ee=h+i<=v.height-Le;return this._fixedOverflowWidgets?{fitsAbove:ce,aboveTop:Math.max(u,Se),aboveLeft:P,fitsBelow:Ee,belowTop:h,belowLeft:ee}:{fitsAbove:ce,aboveTop:o,aboveLeft:N,fitsBelow:Ee,belowTop:a,belowLeft:K}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new gy(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||t.length===0)return[null,null];let n=t[0],i=t[0];for(const v of t)v.lineNumber<n.lineNumber&&(n=v),v.lineNumber>i.lineNumber&&(i=v);let s=1073741824;for(const v of n.ranges)v.left<s&&(s=v.left);let o=1073741824;for(const v of i.ranges)v.left<o&&(o=v.left);const a=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.scrollTop,l=new gy(a,s),u=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.scrollTop,h=new gy(u,o);return[l,h]}_prepareRenderWidget(e){const[t,n]=this._getTopAndBottomLeft(e);if(!t||!n)return null;if(this._cachedDomNodeClientWidth===-1||this._cachedDomNodeClientHeight===-1){let s=null;if(typeof this._actual.beforeRender=="function"&&(s=WC(this._actual.beforeRender,this._actual)),s)this._cachedDomNodeClientWidth=s.width,this._cachedDomNodeClientHeight=s.height;else{const o=this.domNode.domNode;this._cachedDomNodeClientWidth=o.clientWidth,this._cachedDomNodeClientHeight=o.clientHeight}}let i;if(this.allowEditorOverflow?i=this._layoutBoxInPage(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e):i=this._layoutBoxInViewport(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e),this._preference)for(let s=1;s<=2;s++)for(const o of this._preference)if(o===1){if(!i)return null;if(s===2||i.fitsAbove)return{coordinate:new gy(i.aboveTop,i.aboveLeft),position:1}}else if(o===2){if(!i)return null;if(s===2||i.fitsBelow)return{coordinate:new gy(i.belowTop,i.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0}:{coordinate:t,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&WC(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&WC(this._actual.afterRender,this._actual,this._renderData.position)}}function WC(r,e,...t){try{return r.call(e,...t)}catch(n){return null}}let VC=!0;class Xx extends d0{constructor(e){super();this._context=e;const t=this._context.configuration.options,n=t.get(128);this._lineHeight=t.get(56),this._renderLineHighlight=t.get(83),this._renderLineHighlightOnlyWhenFocus=t.get(84),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new oi(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=VC?this._selections.slice(0,1):this._selections,n=t.map(s=>s.positionLineNumber);n.sort((s,o)=>s-o),Tl(this._cursorLineNumbers,n)||(this._cursorLineNumbers=n,e=!0);const i=t.every(s=>s.isEmpty());return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(128);return this._lineHeight=t.get(56),this._renderLineHighlight=t.get(83),this._renderLineHighlightOnlyWhenFocus=t.get(84),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._cursorLineNumbers.length;let o=0;const a=[];for(let l=n;l<=i;l++){const u=l-n;for(;o<s&&this._cursorLineNumbers[o]<l;)o++;o<s&&this._cursorLineNumbers[o]===l?a[u]=t:a[u]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}}class ak extends Xx{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderOther(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class lk extends Xx{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderThis(){return!0}_shouldRenderOther(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}gc((r,e)=>{VC=!1;const t=r.getColor(MO);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||r.defines(Bx)){const n=r.getColor(Bx);n&&(VC=!0,e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),r.type==="hc"&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class uk extends d0{constructor(e){super();this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(56),this._typicalHalfwidthCharacterWidth=t.get(40).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(56),this._typicalHalfwidthCharacterWidth=t.get(40).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let l=0,u=t.length;l<u;l++){const h=t[l];h.options.className&&(n[i++]=h)}n=n.sort((l,u)=>{if(l.options.zIndex<u.options.zIndex)return-1;if(l.options.zIndex>u.options.zIndex)return 1;const h=l.options.className,v=u.options.className;return h<v?-1:h>v?1:Mt.compareRangesUsingStarts(l.range,u.range)});const s=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let l=s;l<=o;l++){const u=l-s;a[u]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const i=String(this._lineHeight),s=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){const u=t[a];if(!u.options.isWholeLine)continue;const h='<div class="cdr '+u.options.className+'" style="left:0;width:100%;height:'+i+'px;"></div>',v=Math.max(u.range.startLineNumber,s),N=Math.min(u.range.endLineNumber,o);for(let P=v;P<=N;P++){const K=P-s;n[K]+=h}}}_renderNormalDecorations(e,t,n){const i=String(this._lineHeight),s=e.visibleRange.startLineNumber;let o=null,a=!1,l=null;for(let u=0,h=t.length;u<h;u++){const v=t[u];if(v.options.isWholeLine)continue;const N=v.options.className,P=Boolean(v.options.showIfCollapsed);let K=v.range;if(P&&K.endColumn===1&&K.endLineNumber!==K.startLineNumber&&(K=new Mt(K.startLineNumber,K.startColumn,K.endLineNumber-1,this._context.model.getLineMaxColumn(K.endLineNumber-1))),o===N&&a===P&&Mt.areIntersectingOrTouching(l,K)){l=Mt.plusRange(l,K);continue}o!==null&&this._renderNormalDecoration(e,l,o,a,i,s,n),o=N,a=P,l=K}o!==null&&this._renderNormalDecoration(e,l,o,a,i,s,n)}_renderNormalDecoration(e,t,n,i,s,o,a){const l=e.linesVisibleRangesForRange(t,n==="findMatch");if(!!l)for(let u=0,h=l.length;u<h;u++){const v=l[u];if(v.outsideRenderedLine)continue;const N=v.lineNumber-o;if(i&&v.ranges.length===1){const P=v.ranges[0];P.width===0&&(v.ranges[0]=new cg(P.left,this._typicalHalfwidthCharacterWidth))}for(let P=0,K=v.ranges.length;P<K;P++){const ee=v.ranges[P],Se='<div class="cdr '+n+'" style="left:'+String(ee.left)+"px;width:"+String(ee.width)+"px;height:"+s+'px;"></div>';a[N]+=Se}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class Sw extends Rn{onclick(e,t){this._register(yn(e,hi.CLICK,n=>t(new ra(n))))}onmousedown(e,t){this._register(yn(e,hi.MOUSE_DOWN,n=>t(new ra(n))))}onmouseover(e,t){this._register(yn(e,hi.MOUSE_OVER,n=>t(new ra(n))))}onnonbubblingmouseout(e,t){this._register(Bm(e,n=>t(new ra(n))))}onkeydown(e,t){this._register(yn(e,hi.KEY_DOWN,n=>t(new jr(n))))}onkeyup(e,t){this._register(yn(e,hi.KEY_UP,n=>t(new jr(n))))}oninput(e,t){this._register(yn(e,hi.INPUT,t))}onblur(e,t){this._register(yn(e,hi.BLUR,t))}onfocus(e,t){this._register(yn(e,hi.FOCUS,t))}ignoreGesture(e){es.ignoreTarget(e)}}const y0=11;class ck extends Sw{constructor(e){super();this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top!="undefined"&&(this.bgDomNode.style.top="0px"),typeof e.left!="undefined"&&(this.bgDomNode.style.left="0px"),typeof e.bottom!="undefined"&&(this.bgDomNode.style.bottom="0px"),typeof e.right!="undefined"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=y0+"px",this.domNode.style.height=y0+"px",typeof e.top!="undefined"&&(this.domNode.style.top=e.top+"px"),typeof e.left!="undefined"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom!="undefined"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right!="undefined"&&(this.domNode.style.right=e.right+"px"),this._mouseMoveMonitor=this._register(new Ub),this.onmousedown(this.bgDomNode,t=>this._arrowMouseDown(t)),this.onmousedown(this.domNode,t=>this._arrowMouseDown(t)),this._mousedownRepeatTimer=this._register(new qa),this._mousedownScheduleRepeatTimer=this._register(new sa)}_arrowMouseDown(e){const t=()=>{this._mousedownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24)};this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(t,200),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,rC,n=>{},()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class hk extends Rn{constructor(e,t,n){super();this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new sa)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode&&this._domNode.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),!!this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(e?" fade":"")))}}const dk=140;class qx extends Sw{constructor(e){super();this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new hk(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._mouseMoveMonitor=this._register(new Ub),this._shouldRender=!0,this.domNode=Sr(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this.onmousedown(this.domNode.domNode,t=>this._domNodeMouseDown(t))}_createArrow(e){const t=this._register(new ck(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,i){this.slider=Sr(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof i=="number"&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,s=>{s.leftButton&&(s.preventDefault(),this._sliderMouseDown(s,()=>{}))}),this.onclick(this.slider.domNode,s=>{s.leftButton&&s.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){!this._shouldRender||(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(e){e.target===this.domNode.domNode&&this._onMouseDown(e)}delegateMouseDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),i=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderMousePosition(e);n<=s&&s<=i?e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{})):this._onMouseDown(e)}_onMouseDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.browserEvent.offsetX=="number"&&typeof e.browserEvent.offsetY=="number")t=e.browserEvent.offsetX,n=e.browserEvent.offsetY;else{const s=vl(this.domNode.domNode);t=e.posx-s.left,n=e.posy-s.top}const i=this._mouseDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(i):this._scrollbarState.getDesiredScrollPositionFromOffset(i)),e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{}))}_sliderMouseDown(e,t){const n=this._sliderMousePosition(e),i=this._sliderOrthogonalMousePosition(e),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,rC,o=>{const a=this._sliderOrthogonalMousePosition(o),l=Math.abs(a-i);if(pe&&l>dk){this._setDesiredScrollPositionNow(s.getScrollPosition());return}const h=this._sliderMousePosition(o)-n;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(h))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd(),t()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const fk=20;class py{constructor(e,t,n,i,s,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=i,this._scrollSize=s,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new py(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,i,s){const o=Math.max(0,n-e),a=Math.max(0,o-2*t),l=i>0&&i>n;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const u=Math.round(Math.max(fk,Math.floor(n*a/i))),h=(a-u)/(i-n),v=s*h;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(u),computedSliderRatio:h,computedSliderPosition:Math.round(v)}}_refreshComputedValues(){const e=py._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}const gk=rl("scrollbar-button-left",us.triangleLeft),pk=rl("scrollbar-button-right",us.triangleRight);class mk extends qx{constructor(e,t,n){const i=e.getScrollDimensions(),s=e.getCurrentScrollPosition();super({lazyRender:t.lazyRender,host:n,scrollbarState:new py(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,i.width,i.scrollWidth,s.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage});if(t.horizontalHasArrows){const o=(t.arrowSize-y0)/2,a=(t.horizontalScrollbarSize-y0)/2;this._createArrow({className:"scra",icon:gk,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new cs(null,1,0))}),this._createArrow({className:"scra",icon:pk,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new cs(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return e}_sliderMousePosition(e){return e.posx}_sliderOrthogonalMousePosition(e){return e.posy}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}const vk=rl("scrollbar-button-up",us.triangleUp),_k=rl("scrollbar-button-down",us.triangleDown);class yk extends qx{constructor(e,t,n){const i=e.getScrollDimensions(),s=e.getCurrentScrollPosition();super({lazyRender:t.lazyRender,host:n,scrollbarState:new py(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,i.height,i.scrollHeight,s.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage});if(t.verticalHasArrows){const o=(t.arrowSize-y0)/2,a=(t.verticalScrollbarSize-y0)/2;this._createArrow({className:"scra",icon:vk,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new cs(null,0,1))}),this._createArrow({className:"scra",icon:_k,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new cs(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return t}_sliderMousePosition(e){return e.posy}_sliderOrthogonalMousePosition(e){return e.posx}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class Ew{constructor(e,t,n,i,s,o){this._scrollStateBrand=void 0,e=e|0,t=t|0,n=n|0,i=i|0,s=s|0,o=o|0,this.rawScrollLeft=n,this.rawScrollTop=o,e<0&&(e=0),n+e>t&&(n=t-e),n<0&&(n=0),i<0&&(i=0),o+i>s&&(o=s-i),o<0&&(o=0),this.width=e,this.scrollWidth=t,this.scrollLeft=n,this.height=i,this.scrollHeight=s,this.scrollTop=o}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new Ew(typeof e.width!="undefined"?e.width:this.width,typeof e.scrollWidth!="undefined"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height!="undefined"?e.height:this.height,typeof e.scrollHeight!="undefined"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new Ew(this.width,this.scrollWidth,typeof e.scrollLeft!="undefined"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop!="undefined"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,i=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:i,scrollLeftChanged:s,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class Lw extends Rn{constructor(e,t){super();this._scrollableBrand=void 0,this._onScroll=this._register(new $t),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e,this._scheduleAtNextAnimationFrame=t,this._state=new Ew(0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const n=this._state.withScrollDimensions(e,t);this._setState(n,Boolean(this._smoothScrolling)),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft=="undefined"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop=="undefined"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let i;t?i=new my(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):i=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=my.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{!this._smoothScrolling||(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{!this._smoothScrolling||(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class Qx{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function HC(r,e){const t=e-r;return function(n){return r+t*Ck(n)}}function bk(r,e,t){return function(n){return n<t?r(n/t):e((n-t)/(1-t))}}class my{constructor(e,t,n,i){this.from=e,this.to=t,this.duration=i,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let s,o;return e<t?(s=e+.75*n,o=t-.75*n):(s=e-.75*n,o=t+.75*n),bk(HC(e,s),HC(o,t),.33)}return HC(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),i=this.scrollTop(t);return new Qx(n,i,!1)}return new Qx(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return my.start(e,t,n)}static start(e,t,n){n=n+10;const i=Date.now()-10;return new my(e,t,i,n)}}function wk(r){return Math.pow(r,3)}function Ck(r){return 1-wk(1-r)}const Sk=500,Jx=50,eD=!0;class Ek{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}class zC{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,i=this._rear;do{const s=i===this._front?e:Math.pow(2,-n);if(e-=s,t+=this._memory[i].score*s,i===this._front)break;i=(this._capacity+i-1)%this._capacity,n++}while(!0);return t<=.5}accept(e,t,n){const i=new Ek(e,t,n);i.score=this._computeScore(i),this._front===-1&&this._rear===-1?(this._memory[0]=i,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=i)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;const n=this._front===-1&&this._rear===-1?null:this._memory[this._rear];return(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}zC.INSTANCE=new zC;class tD extends Sw{constructor(e,t,n){super();this._onScroll=this._register(new $t),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new $t),e.style.overflow="hidden",this._options=Lk(t),this._scrollable=n,this._register(this._scrollable.onScroll(s=>{this._onWillScroll.fire(s),this._onDidScroll(s),this._onScroll.fire(s)}));const i={onMouseWheel:s=>this._onMouseWheel(s),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new yk(this._scrollable,this._options,i)),this._horizontalScrollbar=this._register(new mk(this._scrollable,this._options,i)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Sr(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Sr(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Sr(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,s=>this._onMouseOver(s)),this.onnonbubblingmouseout(this._listenOnDomNode,s=>this._onMouseOut(s)),this._hideTimeout=this._register(new sa),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=Vi(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(e){this._verticalScrollbar.delegateMouseDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,ae&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel!="undefined"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity!="undefined"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity!="undefined"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis!="undefined"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal!="undefined"&&(this._options.horizontal=e.horizontal),typeof e.vertical!="undefined"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize!="undefined"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize!="undefined"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage!="undefined"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Vi(this._mouseWheelToDispose),e)){const n=i=>{this._onMouseWheel(new cs(i))};this._mouseWheelToDispose.push(yn(this._listenOnDomNode,hi.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){const t=zC.INSTANCE;if(eD){const s=window.devicePixelRatio/Vn();pe||Q?t.accept(Date.now(),e.deltaX/s,e.deltaY/s):t.accept(Date.now(),e.deltaX,e.deltaY)}let n=!1;if(e.deltaY||e.deltaX){let s=e.deltaY*this._options.mouseWheelScrollSensitivity,o=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(s)>=Math.abs(o)?o=0:s=0),this._options.flipAxes&&([s,o]=[o,s]);const a=!ae&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!o&&(o=s,s=0),e.browserEvent&&e.browserEvent.altKey&&(o=o*this._options.fastScrollSensitivity,s=s*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let u={};if(s){const h=l.scrollTop-Jx*s;this._verticalScrollbar.writeScrollPosition(u,h)}if(o){const h=l.scrollLeft-Jx*o;this._horizontalScrollbar.writeScrollPosition(u,h)}u=this._scrollable.validateScrollPosition(u),(l.scrollLeft!==u.scrollLeft||l.scrollTop!==u.scrollTop)&&(eD&&this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(u):this._scrollable.setScrollPositionNow(u),n=!0)}let i=n;!i&&this._options.alwaysConsumeMouseWheel&&(i=!0),!i&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(i=!0),i&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(!!this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,i=n?" left":"",s=t?" top":"",o=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${i}`),this._topShadowDomNode.setClassName(`shadow${s}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${s}${i}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),Sk)}}class nD extends tD{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new Lw(0,i=>Hl(i));super(e,t,n);this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class UC extends tD{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class iD extends nD{constructor(e,t){super(e,t);this._element=e,this.onScroll(n=>{n.scrollTopChanged&&(this._element.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this._element.scrollLeft=n.scrollLeft)}),this.scanDomNode()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function Lk(r){const e={lazyRender:typeof r.lazyRender!="undefined"?r.lazyRender:!1,className:typeof r.className!="undefined"?r.className:"",useShadows:typeof r.useShadows!="undefined"?r.useShadows:!0,handleMouseWheel:typeof r.handleMouseWheel!="undefined"?r.handleMouseWheel:!0,flipAxes:typeof r.flipAxes!="undefined"?r.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof r.consumeMouseWheelIfScrollbarIsNeeded!="undefined"?r.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof r.alwaysConsumeMouseWheel!="undefined"?r.alwaysConsumeMouseWheel:!1,scrollYToX:typeof r.scrollYToX!="undefined"?r.scrollYToX:!1,mouseWheelScrollSensitivity:typeof r.mouseWheelScrollSensitivity!="undefined"?r.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof r.fastScrollSensitivity!="undefined"?r.fastScrollSensitivity:5,scrollPredominantAxis:typeof r.scrollPredominantAxis!="undefined"?r.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof r.mouseWheelSmoothScroll!="undefined"?r.mouseWheelSmoothScroll:!0,arrowSize:typeof r.arrowSize!="undefined"?r.arrowSize:11,listenOnDomNode:typeof r.listenOnDomNode!="undefined"?r.listenOnDomNode:null,horizontal:typeof r.horizontal!="undefined"?r.horizontal:1,horizontalScrollbarSize:typeof r.horizontalScrollbarSize!="undefined"?r.horizontalScrollbarSize:10,horizontalSliderSize:typeof r.horizontalSliderSize!="undefined"?r.horizontalSliderSize:0,horizontalHasArrows:typeof r.horizontalHasArrows!="undefined"?r.horizontalHasArrows:!1,vertical:typeof r.vertical!="undefined"?r.vertical:1,verticalScrollbarSize:typeof r.verticalScrollbarSize!="undefined"?r.verticalScrollbarSize:10,verticalHasArrows:typeof r.verticalHasArrows!="undefined"?r.verticalHasArrows:!1,verticalSliderSize:typeof r.verticalSliderSize!="undefined"?r.verticalSliderSize:0,scrollByPage:typeof r.scrollByPage!="undefined"?r.scrollByPage:!1};return e.horizontalSliderSize=typeof r.horizontalSliderSize!="undefined"?r.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof r.verticalSliderSize!="undefined"?r.verticalSliderSize:e.verticalScrollbarSize,ae&&(e.className+=" mac"),e}class xk extends Ou{constructor(e,t,n,i){super(e);const s=this._context.configuration.options,o=s.get(90),a=s.get(64),l=s.get(32),u=s.get(93),h={listenOnDomNode:n.domNode,className:"editor-scrollable "+Wb(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:u,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new UC(t.domNode,h,this._context.viewLayout.getScrollable())),kh.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=Sr(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const v=(N,P,K)=>{const ee={};if(P){const Se=N.scrollTop;Se&&(ee.scrollTop=this._context.viewLayout.getCurrentScrollTop()+Se,N.scrollTop=0)}if(K){const Se=N.scrollLeft;Se&&(ee.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+Se,N.scrollLeft=0)}this._context.model.setScrollPosition(ee,1)};this._register(yn(n.domNode,"scroll",N=>v(n.domNode,!0,!0))),this._register(yn(t.domNode,"scroll",N=>v(t.domNode,!0,!1))),this._register(yn(i.domNode,"scroll",N=>v(i.domNode,!0,!1))),this._register(yn(this.scrollbarDomNode.domNode,"scroll",N=>v(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(128);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(62).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarMouseDown(e){this.scrollbar.delegateVerticalScrollbarMouseDown(e)}onConfigurationChanged(e){if(e.hasChanged(90)||e.hasChanged(64)||e.hasChanged(32)){const t=this._context.configuration.options,n=t.get(90),i=t.get(64),s=t.get(32),o=t.get(93),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:i,fastScrollSensitivity:s,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(128)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+Wb(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class xw{constructor(e,t,n){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n)}}class jC extends d0{_render(e,t,n){const i=[];for(let a=e;a<=t;a++){const l=a-e;i[l]=[]}if(n.length===0)return i;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let s=null,o=0;for(let a=0,l=n.length;a<l;a++){const u=n[a],h=u.className;let v=Math.max(u.startLineNumber,e)-e;const N=Math.min(u.endLineNumber,t)-e;s===h?(v=Math.max(o+1,v),o=Math.max(o,N)):(s=h,o=N);for(let P=v;P<=o;P++)i[P].push(s)}return i}}class Dk extends jC{constructor(e){super();this._context=e;const t=this._context.configuration.options,n=t.get(128);this._lineHeight=t.get(56),this._glyphMargin=t.get(46),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(128);return this._lineHeight=t.get(56),this._glyphMargin=t.get(46),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.options.glyphMarginClassName;l&&(n[i++]=new xw(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=this._lineHeight.toString(),o=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),l='" style="left:'+o+"px;width:"+a+"px;height:"+s+'px;"></div>',u=[];for(let h=t;h<=n;h++){const v=h-t,N=i[v];N.length===0?u[v]="":u[v]='<div class="cgmr codicon '+N.join(" ")+l}this._renderResult=u}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class Ik extends d0{constructor(e){super();this._context=e,this._primaryLineNumber=0;const t=this._context.configuration.options,n=t.get(129),i=t.get(40);this._lineHeight=t.get(56),this._spaceWidth=i.spaceWidth,this._enabled=t.get(81),this._activeIndentEnabled=t.get(49),this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(129),i=t.get(40);return this._lineHeight=t.get(56),this._spaceWidth=i.spaceWidth,this._enabled=t.get(81),this._activeIndentEnabled=t.get(49),this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){const t=e.selections[0],n=t.isEmpty()?t.positionLineNumber:0;return this._primaryLineNumber!==n?(this._primaryLineNumber=n,!0):!1}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){if(!this._enabled){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,{indentSize:i}=this._context.model.getTextModelOptions(),s=i*this._spaceWidth,o=e.scrollWidth,a=this._lineHeight,l=this._context.model.getLinesIndentGuides(t,n);let u=0,h=0,v=0;if(this._activeIndentEnabled&&this._primaryLineNumber){const P=this._context.model.getActiveIndentGuide(this._primaryLineNumber,t,n);u=P.startLineNumber,h=P.endLineNumber,v=P.indent}const N=[];for(let P=t;P<=n;P++){const K=u<=P&&P<=h,ee=P-t,Se=l[ee];let Le="";if(Se>=1){const ce=e.visibleRangeForPosition(new dn(P,1));let Ee=ce?ce.left:0;for(let ze=1;ze<=Se&&(Le+=`<div class="${K&&ze===v?"cigra":"cigr"}" style="left:${Ee}px;height:${a}px;width:${s}px"></div>`,Ee+=s,!(Ee>o||this._maxIndentLeft>0&&Ee>this._maxIndentLeft));ze++);}N[ee]=Le}this._renderResult=N}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}gc((r,e)=>{const t=r.getColor(fw);t&&e.addRule(`.monaco-editor .lines-content .cigr { box-shadow: 1px 0 0 0 ${t} inset; }`);const n=r.getColor(gw)||t;n&&e.addRule(`.monaco-editor .lines-content .cigra { box-shadow: 1px 0 0 0 ${n} inset; }`)});class Nk{constructor(){this._currentVisibleRange=new Mt(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class Tk{constructor(e,t,n,i,s,o){this.lineNumber=e,this.startColumn=t,this.endColumn=n,this.startScrollTop=i,this.stopScrollTop=s,this.scrollType=o,this.type="range",this.minLineNumber=e,this.maxLineNumber=e}}class Mk{constructor(e,t,n,i){this.selections=e,this.startScrollTop=t,this.stopScrollTop=n,this.scrollType=i,this.type="selections";let s=e[0].startLineNumber,o=e[0].endLineNumber;for(let a=1,l=e.length;a<l;a++){const u=e[a];s=Math.min(s,u.startLineNumber),o=Math.max(o,u.endLineNumber)}this.minLineNumber=s,this.maxLineNumber=o}}class Dw extends Ou{constructor(e,t){super(e);this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new Yx(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration,i=this._context.configuration.options,s=i.get(40),o=i.get(129);this._lineHeight=i.get(56),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=i.get(87),this._cursorSurroundingLines=i.get(23),this._cursorSurroundingLinesStyle=i.get(24),this._canUseLayerHinting=!i.get(26),this._viewLineOptions=new VL(n,this._context.theme.type),kh.write(this.domNode,7),this.domNode.setClassName(`view-lines ${cm}`),ul.applyFontInfo(this.domNode,s),this._maxLineWidth=0,this._asyncUpdateLineWidths=new ys(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new ys(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new Nk,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new Ah(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(129)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(40),i=t.get(129);return this._lineHeight=t.get(56),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=i.isViewportWrapping,this._revealHorizontalRightPadding=t.get(87),this._cursorSurroundingLines=t.get(23),this._cursorSurroundingLinesStyle=t.get(24),this._canUseLayerHinting=!t.get(26),ul.applyFontInfo(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(128)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new VL(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++)this._visibleLines.getVisibleLine(s).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=!1;for(let s=t;s<=n;s++)i=this._visibleLines.getVisibleLine(s).onSelectionChanged()||i;return i}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new Tk(e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new Mk(e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const s=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.model.setScrollPosition(n,s),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.model.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const i=this._getLineNumberFor(n);if(i===-1||i<1||i>this._context.model.getLineCount())return null;if(this._context.model.getLineMaxColumn(i)===1)return new dn(i,1);const s=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(i<s||i>o)return null;let a=this._visibleLines.getVisibleLine(i).getColumnOfNodeOffset(i,e,t);const l=this._context.model.getLineMinColumn(i);return a<l&&(a=l),new dn(i,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Ah.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++){const s=this._visibleLines.getVisibleLine(i);if(e===s.getDomNode())return i}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();return e<t||e>n?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,i=Mt.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!i)return null;let s=[],o=0;const a=new WL(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new dn(i.startLineNumber,1)).lineNumber);const u=this._visibleLines.getStartLineNumber(),h=this._visibleLines.getEndLineNumber();for(let v=i.startLineNumber;v<=i.endLineNumber;v++){if(v<u||v>h)continue;const N=v===i.startLineNumber?i.startColumn:1,P=v===i.endLineNumber?i.endColumn:this._context.model.getLineMaxColumn(v),K=this._visibleLines.getVisibleLine(v).getVisibleRangesForRange(N,P,a);if(!!K){if(t&&v<n){const ee=l;l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new dn(v+1,1)).lineNumber,ee!==l&&(K.ranges[K.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}s[o++]=new GT(K.outsideRenderedLine,v,K.ranges)}}return o===0?null:s}_visibleRangesForLineRange(e,t,n){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(t,n,new WL(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new YT(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=1,s=!0;for(let o=t;o<=n;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){s=!1;continue}i=Math.max(i,a.getWidth())}return s&&t===1&&n===this._context.model.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(i),s}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++){const o=this._visibleLines.getVisibleLine(s);if(o.needsMonospaceFontCheck()){const a=o.getWidth();a>t&&(t=a,e=s)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let s=n;s<=i;s++)this._visibleLines.getVisibleLine(s).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const i=this._computeScrollLeftToReveal(n);i&&(this._isViewportWrapping||this._ensureMaxLineWidth(i.maxHorizontalOffset),this._context.model.setScrollPosition({scrollLeft:i.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),Q&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++)if(this._visibleLines.getVisibleLine(s).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.model.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,i,s){const o=e.top,a=e.height,l=o+a;let u,h,v;if(i&&i.length>0){let K=i[0].startLineNumber,ee=i[0].endLineNumber;for(let Se=1,Le=i.length;Se<Le;Se++){const ce=i[Se];K=Math.min(K,ce.startLineNumber),ee=Math.max(ee,ce.endLineNumber)}u=!1,h=this._context.viewLayout.getVerticalOffsetForLineNumber(K),v=this._context.viewLayout.getVerticalOffsetForLineNumber(ee)+this._lineHeight}else if(n)u=!0,h=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),v=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight;else return-1;if(!(t==="mouse"&&this._cursorSurroundingLinesStyle==="default")){const K=Math.min(a/this._lineHeight/2,this._cursorSurroundingLines);h-=K*this._lineHeight,v+=Math.max(0,K-1)*this._lineHeight}(s===0||s===4)&&(v+=this._lineHeight);let P;if(v-h>a){if(!u)return-1;P=h}else if(s===5||s===6)if(s===6&&o<=h&&v<=l)P=o;else{const K=Math.max(5*this._lineHeight,a*.2),ee=h-K,Se=v-a;P=Math.max(Se,ee)}else if(s===1||s===2)if(s===2&&o<=h&&v<=l)P=o;else{const K=(h+v)/2;P=Math.max(0,K-a/2)}else P=this._computeMinimumScrolling(o,l,h,v,s===3,s===4);return P}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=t.left,i=n+t.width;let s=1073741824,o=0;if(e.type==="range"){const l=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!l)return null;for(const u of l.ranges)s=Math.min(s,u.left),o=Math.max(o,u.left+u.width)}else for(const l of e.selections){if(l.startLineNumber!==l.endLineNumber)return null;const u=this._visibleRangesForLineRange(l.startLineNumber,l.startColumn,l.endColumn);if(!u)return null;for(const h of u.ranges)s=Math.min(s,h.left),o=Math.max(o,h.left+h.width)}return s=Math.max(0,s-Dw.HORIZONTAL_EXTRA_PX),o+=this._revealHorizontalRightPadding,e.type==="selections"&&o-s>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,i,s,o),maxHorizontalOffset:o}}_computeMinimumScrolling(e,t,n,i,s,o){e=e|0,t=t|0,n=n|0,i=i|0,s=!!s,o=!!o;const a=t-e;if(i-n<a){if(s)return n;if(o)return Math.max(0,i-a);if(n<e)return n;if(i>t)return Math.max(0,i-a)}else return n;return e}}Dw.HORIZONTAL_EXTRA_PX=30;class Ok extends jC{constructor(e){super();this._context=e;const n=this._context.configuration.options.get(128);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(128);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.options.linesDecorationsClassName;l&&(n[i++]=new xw(a.range.startLineNumber,a.range.endLineNumber,l));const u=a.options.firstLineDecorationClassName;u&&(n[i++]=new xw(a.range.startLineNumber,a.range.startLineNumber,u))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+s+"px;width:"+o+'px;"></div>',l=[];for(let u=t;u<=n;u++){const h=u-t,v=i[h];let N="";for(let P=0,K=v.length;P<K;P++)N+='<div class="cldr '+v[P]+a;l[h]=N}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class kk extends jC{constructor(e){super();this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.options.marginClassName;l&&(n[i++]=new xw(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=[];for(let o=t;o<=n;o++){const a=o-t,l=i[a];let u="";for(let h=0,v=l.length;h<v;h++)u+='<div class="cmdr '+l[h]+'" style=""></div>';s[a]=u}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Uc{constructor(e,t,n,i){this._rgba8Brand=void 0,this.r=Uc._clamp(e),this.g=Uc._clamp(t),this.b=Uc._clamp(n),this.a=Uc._clamp(i)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}Uc.Empty=new Uc(0,0,0,0);class vy{constructor(){this._onDidChange=new $t,this.onDidChange=this._onDidChange.event,this._updateColorMap(),bs.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()})}static getInstance(){return this._INSTANCE||(this._INSTANCE=new vy),this._INSTANCE}_updateColorMap(){const e=bs.getColorMap();if(!e){this._colors=[Uc.Empty],this._backgroundIsLight=!0;return}this._colors=[Uc.Empty];for(let n=1;n<e.length;n++){const i=e[n].rgba;this._colors[n]=new Uc(i.r,i.g,i.b,Math.round(i.a*255))}let t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}vy._INSTANCE=null;const Ak=(()=>{const r=[];for(let e=32;e<=126;e++)r.push(e);return r.push(65533),r})(),Rk=(r,e)=>(r-=32,r<0||r>96?e<=2?(r+96)%96:96-1:r);class _y{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=_y.soften(e,12/15),this.charDataLight=_y.soften(e,50/60)}static soften(e,t){let n=new Uint8ClampedArray(e.length);for(let i=0,s=e.length;i<s;i++)n[i]=Eh(e[i]*t);return n}renderChar(e,t,n,i,s,o,a,l,u){const h=1*this.scale,v=2*this.scale,N=u?1:v;if(t+h>e.width||n+N>e.height){console.warn("bad render request outside image data");return}const P=l?this.charDataLight:this.charDataNormal,K=Rk(i,a),ee=e.width*4,Se=o.r,Le=o.g,ce=o.b,Ee=s.r-Se,ze=s.g-Le,Qe=s.b-ce,at=e.data;let Ze=K*h*v,rt=n*ee+t*4;for(let St=0;St<N;St++){let un=rt;for(let Kt=0;Kt<h;Kt++){const An=P[Ze++]/255;at[un++]=Se+Ee*An,at[un++]=Le+ze*An,at[un++]=ce+Qe*An,un++}rt+=ee}}blockRenderChar(e,t,n,i,s,o,a){const l=1*this.scale,u=2*this.scale,h=a?1:u;if(t+l>e.width||n+h>e.height){console.warn("bad render request outside image data");return}const v=e.width*4,N=.5,P=s.r,K=s.g,ee=s.b,Se=i.r-P,Le=i.g-K,ce=i.b-ee,Ee=P+Se*N,ze=K+Le*N,Qe=ee+ce*N,at=e.data;let Ze=n*v+t*4;for(let rt=0;rt<h;rt++){let St=Ze;for(let un=0;un<l;un++)at[St++]=Ee,at[St++]=ze,at[St++]=Qe,St++;Ze+=v}}}function b0(r){const e=this;let t=!1,n;return function(){return t||(t=!0,n=r.apply(e,arguments)),n}}const rD={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,A:10,B:11,C:12,D:13,E:14,F:15},sD=r=>{const e=new Uint8ClampedArray(r.length/2);for(let t=0;t<r.length;t+=2)e[t>>1]=rD[r[t]]<<4|rD[r[t+1]]&15;return e},oD={1:b0(()=>sD("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:b0(()=>sD("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class yy{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return oD[e]?n=new _y(oD[e](),e):n=yy.createFromSampleData(yy.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height=`${16}px`,t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold ${16}px ${e}`,n.textBaseline="middle";let i=0;for(const s of Ak)n.fillText(String.fromCharCode(s),i,16/2),i+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){const n=16*10*4*96;if(e.length!==n)throw new Error("Unexpected source in MinimapCharRenderer");let i=yy._downsample(e,t);return new _y(i,t)}static _downsampleChar(e,t,n,i,s){const o=1*s,a=2*s;let l=i,u=0;for(let h=0;h<a;h++){const v=h/a*16,N=(h+1)/a*16;for(let P=0;P<o;P++){const K=P/o*10,ee=(P+1)/o*10;let Se=0,Le=0;for(let Ee=v;Ee<N;Ee++){const ze=t+Math.floor(Ee)*3840,Qe=1-(Ee-Math.floor(Ee));for(let at=K;at<ee;at++){const Ze=1-(at-Math.floor(at)),rt=ze+Math.floor(at)*4,St=Ze*Qe;Le+=St,Se+=e[rt]*e[rt+3]/255*St}}const ce=Se/Le;u=Math.max(u,ce),n[l++]=Eh(ce)}}return u}static _downsample(e,t){const n=2*t*1*t,i=n*96,s=new Uint8ClampedArray(i);let o=0,a=0,l=0;for(let u=0;u<96;u++)l=Math.max(l,this._downsampleChar(e,a,s,o,t)),o+=n,a+=10*4;if(l>0){const u=255/l;for(let h=0;h<i;h++)s[h]*=u}return s}}const Pk=140,Fk=2;class Iw{constructor(e,t,n){const i=e.options,s=i.get(126),o=i.get(128),a=o.minimap,l=i.get(40),u=i.get(62);this.renderMinimap=a.renderMinimap,this.size=u.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=i.get(92),this.showSlider=u.showSlider,this.pixelRatio=s,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=i.get(56),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=b0(()=>yy.create(this.fontScale,l.fontFamily)),this.backgroundColor=Iw._getMinimapBackground(t,n)}static _getMinimapBackground(e,t){const n=e.getColor(Tx);return n?new Uc(n.rgba.r,n.rgba.g,n.rgba.b,n.rgba.a):t.getColor(2)}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)}}class by{constructor(e,t,n,i,s,o,a,l){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=i,this.sliderTop=s,this.sliderHeight=o,this.startLineNumber=a,this.endLineNumber=l}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,n,i,s,o,a,l,u,h,v){const N=e.pixelRatio,P=e.minimapLineHeight,K=Math.floor(e.canvasInnerHeight/P),ee=e.lineHeight;if(e.minimapHeightIsEditorHeight){const Qe=l*e.lineHeight+(e.scrollBeyondLastLine?s-e.lineHeight:0),at=Math.max(1,Math.floor(s*s/Qe)),Ze=Math.max(0,e.minimapHeight-at),rt=Ze/(h-s),St=u*rt,un=Ze>0,Kt=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new by(u,h,un,rt,St,at,1,Math.min(a,Kt))}let Se;if(o&&n!==a){const Qe=n-t+1;Se=Math.floor(Qe*P/N)}else{const Qe=s/ee;Se=Math.floor(Qe*P/N)}let Le;e.scrollBeyondLastLine?Le=(a-1)*P/N:Le=Math.max(0,a*P/N-Se),Le=Math.min(e.minimapHeight-Se,Le);const ce=Le/(h-s),Ee=u*ce;let ze=0;if(e.scrollBeyondLastLine&&(ze=s/ee-1),K>=a+ze){const Qe=1,at=a,Ze=Le>0;return new by(u,h,Ze,ce,Ee,Se,Qe,at)}else{let Qe=Math.max(1,Math.floor(t-Ee*N/P));v&&v.scrollHeight===h&&(v.scrollTop>u&&(Qe=Math.min(Qe,v.startLineNumber)),v.scrollTop<u&&(Qe=Math.max(Qe,v.startLineNumber)));const at=Math.min(a,Qe+K-1),Ze=(u-i)/ee,rt=(t-Qe+Ze)*P/N;return new by(u,h,!0,ce,rt,Se,Qe,at)}}}class Nw{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}Nw.INVALID=new Nw(-1);class aD{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new Gx(()=>Nw.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let i=0,s=n.length;i<s;i++)if(n[i].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class $C{constructor(e,t,n,i){this._backgroundFillData=$C._createBackgroundFillData(t,n,i),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const i=n.r,s=n.g,o=n.b,a=new Uint8ClampedArray(e*t*4);let l=0;for(let u=0;u<t;u++)for(let h=0;h<e;h++)a[l]=i,a[l+1]=s,a[l+2]=o,a[l+3]=255,l+=4;return a}}class wy{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const i=e.pixelRatio,s=e.lineHeight,o=e.scrollBeyondLastLine,{minimapLineCount:a}=Ut.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:o,height:e.editorHeight,lineHeight:s,pixelRatio:i}),l=t/a,u=l/2;if(!n||n.minimapLines.length===0){let Ee=[];if(Ee[0]=1,a>1){for(let ze=0,Qe=a-1;ze<Qe;ze++)Ee[ze]=Math.round(ze*l+u);Ee[a-1]=t}return[new wy(l,Ee),[]]}const h=n.minimapLines,v=h.length;let N=[],P=0,K=0,ee=1;const Se=10;let Le=[],ce=null;for(let Ee=0;Ee<a;Ee++){const ze=Math.max(ee,Math.round(Ee*l)),Qe=Math.max(ze,Math.round((Ee+1)*l));for(;P<v&&h[P]<ze;){if(Le.length<Se){const Ze=P+1+K;ce&&ce.type==="deleted"&&ce._oldIndex===P-1?ce.deleteToLineNumber++:(ce={type:"deleted",_oldIndex:P,deleteFromLineNumber:Ze,deleteToLineNumber:Ze},Le.push(ce)),K--}P++}let at;if(P<v&&h[P]<=Qe)at=h[P],P++;else if(Ee===0?at=1:Ee+1===a?at=t:at=Math.round(Ee*l+u),Le.length<Se){const Ze=P+1+K;ce&&ce.type==="inserted"&&ce._i===Ee-1?ce.insertToLineNumber++:(ce={type:"inserted",_i:Ee,insertFromLineNumber:Ze,insertToLineNumber:Ze},Le.push(ce)),K++}N[Ee]=at,ee=at}if(Le.length<Se)for(;P<v;){const Ee=P+1+K;ce&&ce.type==="deleted"&&ce._oldIndex===P-1?ce.deleteToLineNumber++:(ce={type:"deleted",_oldIndex:P,deleteFromLineNumber:Ee,deleteToLineNumber:Ee},Le.push(ce)),K--,P++}else Le=[{type:"flush"}];return[new wy(l,N),Le]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let i=this.modelLineToMinimapLine(t)-1;for(;i+1<this.minimapLines.length&&this.minimapLines[i+1]<=t;)i++;if(n===i){const s=this.minimapLines[n];if(s<e||s>t)return null}return[n+1,i+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),i=this.modelLineToMinimapLine(t);return e!==t&&i===n&&(i===this.minimapLines.length?n>1&&n--:i++),[n,i]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,i=0;for(let s=this.minimapLines.length-1;s>=0&&!(this.minimapLines[s]<e.fromLineNumber);s--)this.minimapLines[s]<=e.toLineNumber?(this.minimapLines[s]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,s),i=Math.max(i,s)):this.minimapLines[s]-=t;return[n,i]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}class Bk extends Ou{constructor(e){super(e);this.tokensColorTracker=vy.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new Iw(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=wy.compute(this.options,this._context.model.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new Tw(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new Iw(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return t?this._actual.onLinesChanged(t[0],t[1]):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._context.model.invalidateMinimapColorCache(),this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let t=[];for(const n of e.ranges){const i=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);i&&t.push({fromLineNumber:i[0],toLineNumber:i[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const i={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(i)}_recreateLineSampling(){this._minimapSelections=null;const e=Boolean(this._samplingState),[t,n]=wy.compute(this.options,this._context.model.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const i of n)switch(i.type){case"deleted":this._actual.onLinesDeleted(i.deleteFromLineNumber,i.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(i.insertFromLineNumber,i.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.model.getLineCount()}getRealLineCount(){return this._context.model.getLineCount()}getLineContent(e){return this._samplingState?this._context.model.getLineContent(this._samplingState.minimapLines[e-1]):this._context.model.getLineContent(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){let i=[];for(let s=0,o=t-e+1;s<o;s++)n[s]?i[s]=this._context.model.getViewLineData(this._samplingState.minimapLines[e+s-1]):i[s]=null;return i}return this._context.model.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new oi(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const s=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];n=new Mt(s,1,o,this._context.model.getLineMaxColumn(o))}else n=new Mt(e,1,t,this._context.model.getLineMaxColumn(t));const i=this._context.model.getDecorationsInViewport(n);if(this._samplingState){let s=[];for(const o of i){if(!o.options.minimap)continue;const a=o.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),u=this._samplingState.modelLineToMinimapLine(a.endLineNumber);s.push(new ua(new Mt(l,a.startColumn,u,a.endColumn),o.options))}return s}return i}getOptions(){return this._context.model.getTextModelOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.model.revealRange("mouse",!1,new Mt(e,1,e,1),1,0)}setScrollTop(e){this._context.model.setScrollPosition({scrollTop:e},1)}}class Tw extends Rn{constructor(e,t){super();this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(Nx),this._domNode=Sr(document.createElement("div")),kh.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Sr(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Sr(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Sr(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Sr(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Sr(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=eo(this._domNode.domNode,"mousedown",n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.leftButton&&this._lastRenderData){const u=vl(this._slider.domNode),h=u.top+u.height/2;this._startSliderDragging(n.buttons,n.posx,h,n.posy,this._lastRenderData.renderedLayout)}return}const s=this._model.options.minimapLineHeight,o=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.browserEvent.offsetY;let l=Math.floor(o/s)+this._lastRenderData.renderedLayout.startLineNumber;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderMouseMoveMonitor=new Ub,this._sliderMouseDownListener=eo(this._slider.domNode,"mousedown",n=>{n.preventDefault(),n.stopPropagation(),n.leftButton&&this._lastRenderData&&this._startSliderDragging(n.buttons,n.posx,n.posy,n.posy,this._lastRenderData.renderedLayout)}),this._gestureDisposable=es.addTarget(this._domNode.domNode),this._sliderTouchStartListener=yn(this._domNode.domNode,ms.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=yn(this._domNode.domNode,ms.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=eo(this._domNode.domNode,ms.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n,i,s){this._slider.toggleClassName("active",!0);const o=(a,l)=>{const u=Math.abs(l-t);if(pe&&u>Pk){this._model.setScrollTop(s.scrollTop);return}const h=a-n;this._model.setScrollTop(s.getDesiredScrollTopFromDelta(h))};i!==n&&o(i,t),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,rC,a=>o(a.posy,a.posx),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return this._model.options.showSlider==="always"?"minimap slider-always":"minimap slider-mouseover"}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new $C(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(Nx),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=by.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight);const i=e.scrollLeft/this._model.options.typicalHalfwidthCharacterWidth,s=Math.min(this._model.options.minimapWidth,Math.round(i*this._model.options.minimapCharWidth/this._model.options.pixelRatio));this._sliderHorizontal.setLeft(s),this._sliderHorizontal.setWidth(this._model.options.minimapWidth-s),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections(),n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber),{canvasInnerWidth:i,canvasInnerHeight:s}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,u=this._decorationsCanvas.domNode.getContext("2d");u.clearRect(0,0,i,s);const h=new Map;for(let v=0;v<t.length;v++){const N=t[v];for(let P=N.startLineNumber;P<=N.endLineNumber;P++)this.renderDecorationOnLine(u,h,N,this._selectionColor,e,P,o,o,l,a)}for(let v=0;v<n.length;v++){const N=n[v];if(!N.options.minimap)continue;const P=N.options.minimap.getColor(this._theme);for(let K=N.range.startLineNumber;K<=N.range.endLineNumber;K++)switch(N.options.minimap.position){case ql.Inline:this.renderDecorationOnLine(u,h,N.range,P,e,K,o,o,l,a);continue;case ql.Gutter:const ee=(K-e.startLineNumber)*o,Se=2;this.renderDecoration(u,P,Se,ee,Fk,o);continue}}}}renderDecorationOnLine(e,t,n,i,s,o,a,l,u,h){const v=(o-s.startLineNumber)*l;if(v+a<0||v>this._model.options.canvasInnerHeight)return;let N=t.get(o);const P=!N;if(!N){const ze=this._model.getLineContent(o);N=[Yt];for(let Qe=1;Qe<ze.length+1;Qe++){const at=ze.charCodeAt(Qe-1),Ze=at===9?u*h:Ja(at)?2*h:h;N[Qe]=N[Qe-1]+Ze}t.set(o,N)}const{startColumn:K,endColumn:ee,startLineNumber:Se,endLineNumber:Le}=n,ce=Se===o?N[K-1]:Yt,Ee=Le>o?N.length-1:ee-1;if(Ee>0){const ze=N[Ee]-ce||2;this.renderDecoration(e,i,ce,v,ze,a)}P&&this.renderLineHighlight(e,i,v,a)}renderLineHighlight(e,t,n,i){e.fillStyle=t&&t.transparent(.5).toString()||"",e.fillRect(Yt,n,e.canvas.width,i)}renderDecoration(e,t,n,i,s,o){e.fillStyle=t&&t.toString()||"",e.fillRect(n,i,s,o)}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,i=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const Kt=this._lastRenderData._get();return new aD(e,Kt.imageData,Kt.lines)}const s=this._getBuffer();if(!s)return null;let[o,a,l]=Tw._renderUntouchedLines(s,t,n,i,this._lastRenderData);const u=this._model.getMinimapLinesRenderingData(t,n,l),h=this._model.getOptions().tabSize,v=this._model.options.backgroundColor,N=this._model.tokensColorTracker,P=N.backgroundIsLight(),K=this._model.options.renderMinimap,ee=this._model.options.charRenderer(),Se=this._model.options.fontScale,Le=this._model.options.minimapCharWidth,Ee=(K===1?2:2+1)*Se,ze=i>Ee?Math.floor((i-Ee)/2):0;let Qe=0;const at=[];for(let Kt=0,An=n-t+1;Kt<An;Kt++)l[Kt]&&Tw._renderLine(s,v,P,K,Le,N,ee,Qe,ze,h,u[Kt],Se,i),at[Kt]=new Nw(Qe),Qe+=i;const Ze=o===-1?0:o,St=(a===-1?s.height:a)-Ze;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,Ze,s.width,St),new aD(e,s,at)}static _renderUntouchedLines(e,t,n,i,s){const o=[];if(!s){for(let rt=0,St=n-t+1;rt<St;rt++)o[rt]=!0;return[-1,-1,o]}const a=s._get(),l=a.imageData.data,u=a.rendLineNumberStart,h=a.lines,v=h.length,N=e.width,P=e.data,K=(n-t+1)*i*N*4;let ee=-1,Se=-1,Le=-1,ce=-1,Ee=-1,ze=-1,Qe=0;for(let rt=t;rt<=n;rt++){const St=rt-t,un=rt-u,Kt=un>=0&&un<v?h[un].dy:-1;if(Kt===-1){o[St]=!0,Qe+=i;continue}const An=Kt*N*4,Wn=(Kt+i)*N*4,$i=Qe*N*4,Fi=(Qe+i)*N*4;ce===An&&ze===$i?(ce=Wn,ze=Fi):(Le!==-1&&(P.set(l.subarray(Le,ce),Ee),ee===-1&&Le===0&&Le===Ee&&(ee=ce),Se===-1&&ce===K&&Le===Ee&&(Se=Le)),Le=An,ce=Wn,Ee=$i,ze=Fi),o[St]=!1,Qe+=i}Le!==-1&&(P.set(l.subarray(Le,ce),Ee),ee===-1&&Le===0&&Le===Ee&&(ee=ce),Se===-1&&ce===K&&Le===Ee&&(Se=Le));const at=ee===-1?-1:ee/(N*4),Ze=Se===-1?-1:Se/(N*4);return[at,Ze,o]}static _renderLine(e,t,n,i,s,o,a,l,u,h,v,N,P){const K=v.content,ee=v.tokens,Se=e.width-s,Le=P===1;let ce=Yt,Ee=0,ze=0;for(let Qe=0,at=ee.getCount();Qe<at;Qe++){const Ze=ee.getEndOffset(Qe),rt=ee.getForeground(Qe),St=o.getColor(rt);for(;Ee<Ze;Ee++){if(ce>Se)return;const un=K.charCodeAt(Ee);if(un===9){const Kt=h-(Ee+ze)%h;ze+=Kt-1,ce+=Kt*s}else if(un===32)ce+=s;else{const Kt=Ja(un)?2:1;for(let An=0;An<Kt;An++)if(i===2?a.blockRenderChar(e,ce,l+u,St,t,n,Le):a.renderChar(e,ce,l+u,un,St,t,N,n,Le),ce+=s,ce>Se)return}}}}}gc((r,e)=>{const t=r.getColor(Tx);t&&e.addRule(`.monaco-editor .minimap > canvas { opacity: ${t.rgba.a}; will-change: opacity; }`);const n=r.getColor(DO);n&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${n}; }`);const i=r.getColor(IO);i&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${i}; }`);const s=r.getColor(NO);s&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${s}; }`);const o=r.getColor(aw);o&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${o} -6px 0 6px -6px inset; }`)});class Wk extends Ou{constructor(e){super(e);const n=this._context.configuration.options.get(128);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._domNode=Sr(document.createElement("div")),kh.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(128);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=Sr(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference===t?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t].domNode.domNode;delete this._widgets[t],i.parentNode.removeChild(i),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.unsetTop();return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let n=0,i=t.length;n<i;n++){const s=t[n];this._renderWidget(this._widgets[s])}}}class Vk{constructor(e,t){const n=e.options;this.lineHeight=n.get(56),this.pixelRatio=n.get(126),this.overviewRulerLanes=n.get(71),this.renderBorder=n.get(70);const i=t.getColor(WO);this.borderColor=i?i.toString():null,this.hideCursor=n.get(48);const s=t.getColor(Wx);this.cursorColor=s?s.transparent(.7).toString():null,this.themeType=t.type;const o=n.get(62),a=o.enabled,l=o.side,u=a?t.getColor(VO)||bs.getDefaultBackground():null;u===null||l==="left"?this.backgroundColor=null:this.backgroundColor=Tn.Format.CSS.formatHex(u);const v=n.get(128).overviewRuler;this.top=v.top,this.right=v.right,this.domWidth=v.width,this.domHeight=v.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[N,P]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=N,this.w=P}_initLanes(e,t,n){const i=t-e;if(n>=3){const s=Math.floor(i/3),o=Math.floor(i/3),a=i-s-o,l=e,u=l+s,h=l+s+a;return[[0,l,u,l,h,l,u,l],[0,s,a,s+a,o,s+a+o,a+o,s+a+o]]}else if(n===2){const s=Math.floor(i/2),o=i-s,a=e,l=a+s;return[[0,a,a,a,l,a,a,a],[0,s,s,s,o,s+o,s+o,s+o]]}else{const s=e,o=i;return[[0,s,s,s,s,s,s,s],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class Hk extends Ou{constructor(e){super(e);this._domNode=Sr(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=bs.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new Vk(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(dn.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._context.model.invalidateOverviewRulerColorCache(),this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:"");return}const e=this._settings.canvasWidth,t=this._settings.canvasHeight,n=this._settings.lineHeight,i=this._context.viewLayout,s=this._context.viewLayout.getScrollHeight(),o=t/s,a=this._context.model.getAllOverviewRulerDecorations(this._context.theme),l=6*this._settings.pixelRatio|0,u=l/2|0,h=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?h.clearRect(0,0,e,t):(h.fillStyle=this._settings.backgroundColor,h.fillRect(0,0,e,t));const v=this._settings.x,N=this._settings.w,P=Object.keys(a);P.sort();for(let K=0,ee=P.length;K<ee;K++){const Se=P[K],Le=a[Se];h.fillStyle=Se;let ce=0,Ee=0,ze=0;for(let Qe=0,at=Le.length;Qe<at;Qe++){const Ze=Le[3*Qe],rt=Le[3*Qe+1],St=Le[3*Qe+2];let un=i.getVerticalOffsetForLineNumber(rt)*o|0,Kt=(i.getVerticalOffsetForLineNumber(St)+n)*o|0;if(Kt-un<l){let Wn=(un+Kt)/2|0;Wn<u?Wn=u:Wn+u>t&&(Wn=t-u),un=Wn-u,Kt=Wn+u}un>ze+1||Ze!==ce?(Qe!==0&&h.fillRect(v[ce],Ee,N[ce],ze-Ee),ce=Ze,Ee=un,ze=Kt):Kt>ze&&(ze=Kt)}h.fillRect(v[ce],Ee,N[ce],ze-Ee)}if(!this._settings.hideCursor&&this._settings.cursorColor){const K=2*this._settings.pixelRatio|0,ee=K/2|0,Se=this._settings.x[7],Le=this._settings.w[7];h.fillStyle=this._settings.cursorColor;let ce=-100,Ee=-100;for(let ze=0,Qe=this._cursorPositions.length;ze<Qe;ze++){const at=this._cursorPositions[ze];let Ze=i.getVerticalOffsetForLineNumber(at.lineNumber)*o|0;Ze<ee?Ze=ee:Ze+ee>t&&(Ze=t-ee);const rt=Ze-ee,St=rt+K;rt>Ee+1?(ze!==0&&h.fillRect(Se,ce,Le,Ee-ce),ce=rt,Ee=St):St>Ee&&(Ee=St)}h.fillRect(Se,ce,Le,Ee-ce)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,t),h.stroke(),h.moveTo(0,0),h.lineTo(e,0),h.stroke())}}class lD{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class Cy{constructor(e,t,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class zk{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(Cy.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),i=Math.floor(this._outerHeight),s=n/i,o=Math.floor(4*this._pixelRatio/2);let a=[];for(let l=0,u=this._zones.length;l<u;l++){const h=this._zones[l];if(!e){const ce=h.getColorZones();if(ce){a.push(ce);continue}}const v=Math.floor(s*this._getVerticalOffsetForLine(h.startLineNumber)),N=Math.floor(s*(this._getVerticalOffsetForLine(h.endLineNumber)+t));let P=Math.floor((v+N)/2),K=N-P;K<o&&(K=o),P-K<0&&(P=K),P+K>n&&(P=n-K);const ee=h.color;let Se=this._color2Id[ee];Se||(Se=++this._lastAssignedId,this._color2Id[ee]=Se,this._id2Color[Se]=ee);const Le=new lD(P-K,P+K,Se);h.setColorZone(Le),a.push(Le)}return this._colorZonesInvalid=!1,a.sort(lD.compare),a}}class Uk extends ny{constructor(e,t){super();this._context=e;const n=this._context.configuration.options;this._domNode=Sr(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new zk(i=>this._context.viewLayout.getVerticalOffsetForLineNumber(i)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(56)),this._zoneManager.setPixelRatio(n.get(126)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(56)&&(this._zoneManager.setLineHeight(t.get(56)),this._render()),e.hasChanged(126)&&(this._zoneManager.setPixelRatio(t.get(126)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),i=this._zoneManager.getId2Color(),s=this._domNode.domNode.getContext("2d");return s.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(s,n,i,e),!0}_renderOneLane(e,t,n,i){let s=0,o=0,a=0;for(const l of t){const u=l.colorId,h=l.from,v=l.to;u!==s?(e.fillRect(0,o,i,a-o),s=u,e.fillStyle=n[s],o=h,a=v):a>=h?a=Math.max(a,v):(e.fillRect(0,o,i,a-o),o=h,a=v)}e.fillRect(0,o,i,a-o)}}class jk extends Ou{constructor(e){super(e);this.domNode=Sr(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(40).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(40).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:i}=this._context.model.getTextModelOptions(),s=i;let o=t-e;for(;o>0;){const a=Sr(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(s),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let n=e-t;for(;n>0;){const i=this._renderedRulers.pop();this.domNode.removeChild(i),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const i=this._renderedRulers[t],s=this._rulers[t];i.setBoxShadow(s.color?`1px 0 0 0 ${s.color} inset`:""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(s.column*this._typicalHalfwidthCharacterWidth)}}}gc((r,e)=>{const t=r.getColor(BO);t&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${t} inset; }`)});class $k extends Ou{constructor(e){super(e);this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(90);this._useShadows=n.useShadows,this._domNode=Sr(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(128);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.minimap.minimapWidth-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(90);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}gc((r,e)=>{const t=r.getColor(aw);t&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${t} 0 6px 6px -6px inset; }`)});class Kk{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class Gk{constructor(e,t){this.lineNumber=e,this.ranges=t}}function Yk(r){return new Kk(r)}function Zk(r){return new Gk(r.lineNumber,r.ranges.map(Yk))}class Cs extends d0{constructor(e){super();this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(56),this._roundedSelection=t.get(88),this._typicalHalfwidthCharacterWidth=t.get(40).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(56),this._roundedSelection=t.get(88),this._typicalHalfwidthCharacterWidth=t.get(40).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const i=this._typicalHalfwidthCharacterWidth/4;let s=null,o=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let u=0;!s&&u<n.length;u++)n[u].lineNumber===a&&(s=n[u].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let u=n.length-1;!o&&u>=0;u--)n[u].lineNumber===l&&(o=n[u].ranges[0]);s&&!s.startStyle&&(s=null),o&&!o.startStyle&&(o=null)}for(let a=0,l=t.length;a<l;a++){const u=t[a].ranges[0],h=u.left,v=u.left+u.width,N={top:0,bottom:0},P={top:0,bottom:0};if(a>0){const K=t[a-1].ranges[0].left,ee=t[a-1].ranges[0].left+t[a-1].ranges[0].width;Mw(h-K)<i?N.top=2:h>K&&(N.top=1),Mw(v-ee)<i?P.top=2:K<v&&v<ee&&(P.top=1)}else s&&(N.top=s.startStyle.top,P.top=s.endStyle.top);if(a+1<l){const K=t[a+1].ranges[0].left,ee=t[a+1].ranges[0].left+t[a+1].ranges[0].width;Mw(h-K)<i?N.bottom=2:K<h&&h<ee&&(N.bottom=1),Mw(v-ee)<i?P.bottom=2:v<ee&&(P.bottom=1)}else o&&(N.bottom=o.startStyle.bottom,P.bottom=o.endStyle.bottom);u.startStyle=N,u.endStyle=P}}_getVisibleRangesWithStyle(e,t,n){const s=(t.linesVisibleRangesForRange(e,!0)||[]).map(Zk);return!this._visibleRangesHaveGaps(s)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,s,n),s}_createSelectionPiece(e,t,n,i,s){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+i.toString()+"px;width:"+s.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,i){if(i.length===0)return;const s=!!i[0].ranges[0].startStyle,o=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=i[0].lineNumber,u=i[i.length-1].lineNumber;for(let h=0,v=i.length;h<v;h++){const N=i[h],P=N.lineNumber,K=P-t,ee=n&&(P===u||P===l)?a:o,Se=n&&P===l?1:0;let Le="",ce="";for(let Ee=0,ze=N.ranges.length;Ee<ze;Ee++){const Qe=N.ranges[Ee];if(s){const Ze=Qe.startStyle,rt=Qe.endStyle;if(Ze.top===1||Ze.bottom===1){Le+=this._createSelectionPiece(Se,ee,Cs.SELECTION_CLASS_NAME,Qe.left-Cs.ROUNDED_PIECE_WIDTH,Cs.ROUNDED_PIECE_WIDTH);let St=Cs.EDITOR_BACKGROUND_CLASS_NAME;Ze.top===1&&(St+=" "+Cs.SELECTION_TOP_RIGHT),Ze.bottom===1&&(St+=" "+Cs.SELECTION_BOTTOM_RIGHT),Le+=this._createSelectionPiece(Se,ee,St,Qe.left-Cs.ROUNDED_PIECE_WIDTH,Cs.ROUNDED_PIECE_WIDTH)}if(rt.top===1||rt.bottom===1){Le+=this._createSelectionPiece(Se,ee,Cs.SELECTION_CLASS_NAME,Qe.left+Qe.width,Cs.ROUNDED_PIECE_WIDTH);let St=Cs.EDITOR_BACKGROUND_CLASS_NAME;rt.top===1&&(St+=" "+Cs.SELECTION_TOP_LEFT),rt.bottom===1&&(St+=" "+Cs.SELECTION_BOTTOM_LEFT),Le+=this._createSelectionPiece(Se,ee,St,Qe.left+Qe.width,Cs.ROUNDED_PIECE_WIDTH)}}let at=Cs.SELECTION_CLASS_NAME;if(s){const Ze=Qe.startStyle,rt=Qe.endStyle;Ze.top===0&&(at+=" "+Cs.SELECTION_TOP_LEFT),Ze.bottom===0&&(at+=" "+Cs.SELECTION_BOTTOM_LEFT),rt.top===0&&(at+=" "+Cs.SELECTION_TOP_RIGHT),rt.bottom===0&&(at+=" "+Cs.SELECTION_BOTTOM_RIGHT)}ce+=this._createSelectionPiece(Se,ee,at,Qe.left,Qe.width)}e[K][0]+=Le,e[K][1]+=ce}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;for(let o=n;o<=i;o++){const a=o-n;t[a]=["",""]}const s=[];for(let o=0,a=this._selections.length;o<a;o++){const l=this._selections[o];if(l.isEmpty()){s[o]=null;continue}const u=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[o]);s[o]=u,this._actualRenderOneSelection(t,n,this._selections.length>1,u)}this._previousFrameVisibleRangesWithStyle=s,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}Cs.SELECTION_CLASS_NAME="selected-text",Cs.SELECTION_TOP_LEFT="top-left-radius",Cs.SELECTION_BOTTOM_LEFT="bottom-left-radius",Cs.SELECTION_TOP_RIGHT="top-right-radius",Cs.SELECTION_BOTTOM_RIGHT="bottom-right-radius",Cs.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",Cs.ROUNDED_PIECE_WIDTH=10,gc((r,e)=>{const t=r.getColor(p0);t&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${t}; }`);const n=r.getColor(IC);n&&e.addRule(`.monaco-editor .selected-text { background-color: ${n}; }`);const i=r.getColor(GM);i&&!i.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${i}; }`)});function Mw(r){return r<0?-r:r}class uD{constructor(e,t,n,i,s,o){this.top=e,this.left=t,this.width=n,this.height=i,this.textContent=s,this.textContentClassName=o}}class cD{constructor(e){this._context=e;const t=this._context.configuration.options,n=t.get(40);this._cursorStyle=t.get(22),this._lineHeight=t.get(56),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(25),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Sr(document.createElement("div")),this._domNode.setClassName(`cursor ${cm}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),ul.applyFontInfo(this._domNode,n),this._domNode.setDisplay("none"),this._position=new dn(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(40);return this._cursorStyle=t.get(22),this._lineHeight=t.get(56),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(25),this._typicalHalfwidthCharacterWidth),ul.applyFontInfo(this._domNode,n),!0}onCursorPositionChanged(e){return this._position=e,!0}_prepareRender(e){let t="";if(this._cursorStyle===Ae.Line||this._cursorStyle===Ae.LineThin){const N=e.visibleRangeForPosition(this._position);if(!N||N.outsideRenderedLine)return null;let P;if(this._cursorStyle===Ae.Line){if(P=Qh(this._lineCursorWidth>0?this._lineCursorWidth:2),P>2){const Se=this._context.model.getLineContent(this._position.lineNumber),Le=rh(Se,this._position.column-1);t=Se.substr(this._position.column-1,Le)}}else P=Qh(1);let K=N.left;P>=2&&K>=1&&(K-=1);const ee=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta;return new uD(ee,K,P,this._lineHeight,t,"")}const n=this._context.model.getLineContent(this._position.lineNumber),i=rh(n,this._position.column-1),s=e.linesVisibleRangesForRange(new Mt(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column+i),!1);if(!s||s.length===0)return null;const o=s[0];if(o.outsideRenderedLine||o.ranges.length===0)return null;const a=o.ranges[0],l=a.width<1?this._typicalHalfwidthCharacterWidth:a.width;let u="";if(this._cursorStyle===Ae.Block){const N=this._context.model.getViewLineData(this._position.lineNumber);t=n.substr(this._position.column-1,i);const P=N.tokens.findTokenIndexAtOffset(this._position.column-1);u=N.tokens.getClassName(P)}let h=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta,v=this._lineHeight;return(this._cursorStyle===Ae.Underline||this._cursorStyle===Ae.UnderlineThin)&&(h+=this._lineHeight-2,v=2),new uD(h,a.left,l,v,t,u)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${cm} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class Sy extends Ou{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(78),this._cursorBlinking=t.get(20),this._cursorStyle=t.get(22),this._cursorSmoothCaretAnimation=t.get(21),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new cD(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=Sr(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new sa,this._cursorFlatBlinkInterval=new qa,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(78),this._cursorBlinking=t.get(20),this._cursorStyle=t.get(22),this._cursorSmoothCaretAnimation=t.get(21),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,i=this._secondaryCursors.length;n<i;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){const n=t.length-this._secondaryCursors.length;for(let i=0;i<n;i++){const s=new cD(this._context);this._domNode.domNode.insertBefore(s.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(s)}}else if(this._secondaryCursors.length>t.length){const n=this._secondaryCursors.length-t.length;for(let i=0;i<n;i++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let n=0;n<t.length;n++)this._secondaryCursors[n].onCursorPositionChanged(t[n])}onCursorStateChanged(e){const t=[];for(let i=0,s=e.selections.length;i<s;i++)t[i]=e.selections[i].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=n=>{for(let i=0,s=e.ranges.length;i<s;i++)if(e.ranges[i].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},Sy.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},Sy.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case Ae.Line:e+=" cursor-line-style";break;case Ae.Block:e+=" cursor-block-style";break;case Ae.Underline:e+=" cursor-underline-style";break;case Ae.LineThin:e+=" cursor-line-thin-style";break;case Ae.BlockOutline:e+=" cursor-block-outline-style";break;case Ae.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],n=0;const i=this._primaryCursor.render(e);i&&(t[n++]=i);for(let s=0,o=this._secondaryCursors.length;s<o;s++){const a=this._secondaryCursors[s].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}Sy.BLINK_INTERVAL=500,gc((r,e)=>{const t=r.getColor(Wx);if(t){let n=r.getColor(PO);n||(n=t.opposite()),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${n}; }`),r.type==="hc"&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});const KC=()=>{throw new Error("Invalid change accessor")};class Xk extends Ou{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(128);this._lineHeight=t.get(56),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=Sr(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Sr(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const i of e)t.set(i.id,i);let n=!1;return this._context.model.changeWhitespace(i=>{const s=Object.keys(this._zones);for(let o=0,a=s.length;o<a;o++){const l=s[o],u=this._zones[l],h=this._computeWhitespaceProps(u.delegate),v=t.get(l);v&&(v.afterLineNumber!==h.afterViewLineNumber||v.height!==h.heightInPx)&&(i.changeOneWhitespace(l,h.afterViewLineNumber,h.heightInPx),this._safeCallOnComputedHeight(u.delegate,h.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(128);return this._lineHeight=t.get(56),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(56)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn!="undefined"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn!="undefined")t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new dn(o,this._context.model.getModelLineMaxColumn(o))}let n;t.column===this._context.model.getModelLineMaxColumn(t.lineNumber)?n=this._context.model.validateModelPosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.model.validateModelPosition({lineNumber:t.lineNumber,column:t.column+1});const i=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(t),s=this._context.model.coordinatesConverter.modelPositionIsVisible(n);return{afterViewLineNumber:i.lineNumber,heightInPx:s?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.model.changeWhitespace(n=>{const i={addZone:s=>(t=!0,this._addZone(n,s)),removeZone:s=>{!s||(t=this._removeZone(n,s)||t)},layoutZone:s=>{!s||(t=this._layoutZone(n,s)||t)}};qk(e,i),i.addZone=KC,i.removeZone=KC,i.layoutZone=KC}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),s={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isVisible:!1,domNode:Sr(t.domNode),marginDomNode:t.marginDomNode?Sr(t.marginDomNode):null};return this._safeCallOnComputedHeight(s.delegate,n.heightInPx),s.domNode.setPosition("absolute"),s.domNode.domNode.style.width="100%",s.domNode.setDisplay("none"),s.domNode.setAttribute("monaco-view-zone",s.whitespaceId),this.domNode.appendChild(s.domNode),s.marginDomNode&&(s.marginDomNode.setPosition("absolute"),s.marginDomNode.domNode.style.width="100%",s.marginDomNode.setDisplay("none"),s.marginDomNode.setAttribute("monaco-view-zone",s.whitespaceId),this.marginDomNode.appendChild(s.marginDomNode)),this._zones[s.whitespaceId]=s,this.setShouldRender(),s.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],i=this._computeWhitespaceProps(n.delegate);return e.changeOneWhitespace(n.whitespaceId,i.afterViewLineNumber,i.heightInPx),this._safeCallOnComputedHeight(n.delegate,i.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){if(this._zones.hasOwnProperty(e)){const t=this._zones[e];return Boolean(t.delegate.suppressMouseDown)}return!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){En(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){En(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let i=!1;for(let o=0,a=t.length;o<a;o++)n[t[o].id]=t[o],i=!0;const s=Object.keys(this._zones);for(let o=0,a=s.length;o<a;o++){const l=s[o],u=this._zones[l];let h=0,v=0,N="none";n.hasOwnProperty(l)?(h=n[l].verticalOffset-e.bigNumbersDelta,v=n[l].height,N="block",u.isVisible||(u.domNode.setAttribute("monaco-visible-view-zone","true"),u.isVisible=!0),this._safeCallOnDomNodeTop(u.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(u.isVisible&&(u.domNode.removeAttribute("monaco-visible-view-zone"),u.isVisible=!1),this._safeCallOnDomNodeTop(u.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),u.domNode.setTop(h),u.domNode.setHeight(v),u.domNode.setDisplay(N),u.marginDomNode&&(u.marginDomNode.setTop(h),u.marginDomNode.setHeight(v),u.marginDomNode.setDisplay(N))}i&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function qk(r,e){try{return r(e)}catch(t){En(t)}}class Qk{constructor(e){this._theme=e}get type(){return this._theme.type}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class Jk{constructor(e,t,n){this.configuration=e,this.theme=new Qk(t),this.model=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.model.addViewEventHandler(e)}removeEventHandler(e){this.model.removeViewEventHandler(e)}}class eA{constructor(e,t,n,i){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=i,this.visibleRange=new Mt(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class tA extends ny{constructor(e,t,n,i,s,o){super();this._selections=[new oi(1,1,1,1)],this._renderAnimationFrame=null;const a=new ek(t,i,s,e);this._context=new Jk(t,n.getColorTheme(),i),this._configPixelRatio=this._context.configuration.options.get(126),this._context.addEventHandler(this),this._register(n.onDidColorThemeChange(ee=>{this._context.theme.update(ee),this._context.model.onDidColorThemeChange(),this.render(!0,!1)})),this._viewParts=[],this._textAreaHandler=new GO(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=Sr(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Sr(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=Sr(document.createElement("div")),kh.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new xk(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new Dw(this._context,this._linesContent),this._viewZones=new Xk(this._context),this._viewParts.push(this._viewZones);const l=new Hk(this._context);this._viewParts.push(l);const u=new $k(this._context);this._viewParts.push(u);const h=new ik(this._context);this._viewParts.push(h),h.addDynamicOverlay(new ak(this._context)),h.addDynamicOverlay(new Cs(this._context)),h.addDynamicOverlay(new Ik(this._context)),h.addDynamicOverlay(new uk(this._context));const v=new rk(this._context);this._viewParts.push(v),v.addDynamicOverlay(new lk(this._context)),v.addDynamicOverlay(new Dk(this._context)),v.addDynamicOverlay(new kk(this._context)),v.addDynamicOverlay(new Ok(this._context)),v.addDynamicOverlay(new m0(this._context));const N=new um(this._context);N.getDomNode().appendChild(this._viewZones.marginDomNode),N.getDomNode().appendChild(v.getDomNode()),this._viewParts.push(N),this._contentWidgets=new sk(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new Sy(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new Wk(this._context),this._viewParts.push(this._overlayWidgets);const P=new jk(this._context);this._viewParts.push(P);const K=new Bk(this._context);if(this._viewParts.push(K),l){const ee=this._scrollbar.getOverviewRulerLayoutInfo();ee.parent.insertBefore(l.getDomNode(),ee.insertBefore)}this._linesContent.appendChild(h.getDomNode()),this._linesContent.appendChild(P.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(N.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(u.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(K.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),o?o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new gM(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new nM(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new dn(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPositionRelativeToEditor:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new dn(e,t)))}}_applyLayout(){const t=this._context.configuration.options.get(128);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(125)+" "+Wb(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this._configPixelRatio=this._context.configuration.options.get(126),this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=Wm(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){nA(()=>this._actualRender())}_getViewPartsToRender(){let e=[],t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!ju(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new eA(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const i=new KT(this._context.viewLayout,n,this._viewLines);for(const s of e)s.prepareRender(i);for(const s of e)s.render(i),s.onDidRender();Math.abs(Zn()-this._configPixelRatio)>.001&&this._context.configuration.updatePixelRatio()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.model.setScrollPosition({scrollTop:e.scrollTop},1),this._context.model.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const n=this._context.model.validateModelPosition({lineNumber:e,column:t}),i=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const s=this._viewLines.visibleRangeForPosition(new dn(i.lineNumber,i.column));return s?s.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?Cw.convertViewToModelMouseTarget(n,this._context.model.coordinatesConverter):null}createOverviewRuler(e){return new Uk(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let t=e.position&&e.position.range||null;if(t===null){const i=e.position?e.position.position:null;i!==null&&(t=new Mt(i.lineNumber,i.column,i.lineNumber,i.column))}const n=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,n),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}function nA(r){try{return r()}catch(e){En(e)}}class hD{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new Qo(new Mt(1,1,1,1),0,new dn(1,1),0),new Qo(new Mt(1,1,1,1),0,new dn(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){!this._trackSelection||(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new ar(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.getDirection()===0?new oi(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new oi(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}_setState(e,t,n){if(t){const i=e.model.validateRange(t.selectionStart),s=t.selectionStart.equalsRange(i)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new Qo(i,s,o,a)}else{if(!n)return;const i=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),s=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new Qo(i,n.selectionStartLeftoverVisibleColumns,s,n.leftoverVisibleColumns)}if(n){const i=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),s=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new Qo(i,t.selectionStartLeftoverVisibleColumns,s,t.leftoverVisibleColumns)}else{const i=e.coordinatesConverter.convertModelPositionToViewPosition(new dn(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),s=e.coordinatesConverter.convertModelPositionToViewPosition(new dn(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new Mt(i.lineNumber,i.column,s.lineNumber,s.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new Qo(o,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class dD{constructor(e){this.context=e,this.primaryCursor=new hD(e),this.secondaryCursors=[],this.lastAddedCursorIndex=0}dispose(){this.primaryCursor.dispose(this.context),this.killSecondaryCursors()}startTrackingSelections(){this.primaryCursor.startTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].startTrackingSelection(this.context)}stopTrackingSelections(){this.primaryCursor.stopTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){this.primaryCursor.ensureValidState(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].ensureValidState(this.context)}readSelectionFromMarkers(){let e=[];e[0]=this.primaryCursor.readSelectionFromMarkers(this.context);for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].readSelectionFromMarkers(this.context);return e}getAll(){let e=[];e[0]=this.primaryCursor.asCursorState();for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].asCursorState();return e}getViewPositions(){let e=[];e[0]=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.position;return e}getTopMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const i=this.secondaryCursors[t].viewState.position;i.isBefore(e)&&(e=i)}return e}getBottomMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const i=this.secondaryCursors[t].viewState.position;e.isBeforeOrEqual(i)&&(e=i)}return e}getSelections(){let e=[];e[0]=this.primaryCursor.modelState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].modelState.selection;return e}getViewSelections(){let e=[];e[0]=this.primaryCursor.viewState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.selection;return e}setSelections(e){this.setStates(ar.fromModelSelections(e))}getPrimaryCursor(){return this.primaryCursor.asCursorState()}setStates(e){e!==null&&(this.primaryCursor.setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.secondaryCursors.length,n=e.length;if(t<n){let i=n-t;for(let s=0;s<i;s++)this._addSecondaryCursor()}else if(t>n){let i=t-n;for(let s=0;s<i;s++)this._removeSecondaryCursor(this.secondaryCursors.length-1)}for(let i=0;i<n;i++)this.secondaryCursors[i].setState(this.context,e[i].modelState,e[i].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.secondaryCursors.push(new hD(this.context)),this.lastAddedCursorIndex=this.secondaryCursors.length}getLastAddedCursorIndex(){return this.secondaryCursors.length===0||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.secondaryCursors[e].dispose(this.context),this.secondaryCursors.splice(e,1)}_getAll(){let e=[];e[0]=this.primaryCursor;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t];return e}normalize(){if(this.secondaryCursors.length===0)return;let e=this._getAll(),t=[];for(let n=0,i=e.length;n<i;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort((n,i)=>n.selection.startLineNumber===i.selection.startLineNumber?n.selection.startColumn-i.selection.startColumn:n.selection.startLineNumber-i.selection.startLineNumber);for(let n=0;n<t.length-1;n++){const i=t[n],s=t[n+1],o=i.selection,a=s.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||o.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):l=a.getStartPosition().isBefore(o.getEndPosition()),l){const u=i.index<s.index?n:n+1,h=i.index<s.index?n+1:n,v=t[h].index,N=t[u].index,P=t[h].selection,K=t[u].selection;if(!P.equalsSelection(K)){const ee=P.plusRange(K),Se=P.selectionStartLineNumber===P.startLineNumber&&P.selectionStartColumn===P.startColumn,Le=K.selectionStartLineNumber===K.startLineNumber&&K.selectionStartColumn===K.startColumn;let ce;v===this.lastAddedCursorIndex?(ce=Se,this.lastAddedCursorIndex=N):ce=Le;let Ee;ce?Ee=new oi(ee.startLineNumber,ee.startColumn,ee.endLineNumber,ee.endColumn):Ee=new oi(ee.endLineNumber,ee.endColumn,ee.startLineNumber,ee.startColumn),t[u].selection=Ee;const ze=ar.fromModelSelection(Ee);e[N].setState(this.context,ze.modelState,ze.viewState)}for(const ee of t)ee.index>v&&ee.index--;e.splice(v,1),t.splice(h,1),this._removeSecondaryCursor(v-1),n--}}}}class iA{constructor(){this.type=0}}class rA{constructor(){this.type=1}}class sA{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class oA{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}}class w0{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}class Ow{constructor(){this.type=5}}class aA{constructor(e){this.type=6,this.isFocused=e}}class lA{constructor(){this.type=7}}class kw{constructor(){this.type=8}}class fD{constructor(e,t){this.type=9,this.fromLineNumber=e,this.toLineNumber=t}}class GC{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class YC{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class Aw{constructor(e,t,n,i,s,o){this.type=12,this.source=e,this.range=t,this.selections=n,this.verticalType=i,this.revealHorizontal=s,this.scrollType=o}}class uA{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class cA{constructor(){this.type=14}}class hA{constructor(e){this.type=15,this.ranges=e}}class dA{constructor(){this.type=16}}class fA{constructor(){this.type=17}}class gA extends Rn{constructor(){super();this._onEvent=this._register(new $t),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOugoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++)if(this._outgoingEvents[t].kind===e.kind){this._outgoingEvents[t]=this._outgoingEvents[t].merge(e);return}this._outgoingEvents.push(e)}_emitOugoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new pA),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOugoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class pA{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class ZC{constructor(e,t,n,i){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=i,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}merge(e){return e.kind!==0?this:new ZC(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class XC{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}merge(e){return e.kind!==1?this:new XC(this.oldHasFocus,e.hasFocus)}}class qC{constructor(e,t,n,i,s,o,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=i,this.scrollWidth=s,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}merge(e){return e.kind!==2?this:new qC(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class mA{constructor(){this.kind=3}isNoOp(){return!1}merge(e){return this}}class Rw{constructor(e,t,n,i,s,o,a){this.kind=5,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=i,this.source=s,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,i=t.length;if(n!==i)return!1;for(let s=0;s<n;s++)if(!e[s].equalsSelection(t[s]))return!1;return!0}isNoOp(){return Rw._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}merge(e){return e.kind!==5?this:new Rw(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class vA{constructor(){this.kind=4}isNoOp(){return!1}merge(e){return this}}class QC{constructor(e,t){this.modelVersionId=e.getVersionId(),this.cursorState=t.getCursorStates()}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class gD{constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){let t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const i=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(i&&(t.push(i),i.startLineNumber!==i.endLineNumber))return!1}t.sort(Mt.compareRangesUsingStarts),e.sort(Mt.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}class C0 extends Rn{constructor(e,t,n,i){super();this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new fx(this._model,this._coordinatesConverter,i),this._cursors=new dD(this.context),this._hasFocus=!1,this._isHandling=!1,this._isDoingComposition=!1,this._selectionsWhenCompositionStarted=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=Vi(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new fx(this._model,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,i){let s=!1;i!==null&&i.length>C0.MAX_CURSOR_COUNT&&(i=i.slice(0,C0.MAX_CURSOR_COUNT),s=!0);const o=new QC(this._model,this);return this._cursors.setStates(i),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,o,s)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,i){const s=this._cursors.getViewPositions();if(s.length>1){this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),0,n,i);return}else{const o=s[0],a=new Mt(o.lineNumber,o.column,o.lineNumber,o.column);this._emitCursorRevealRange(e,t,a,null,0,n,i)}}_revealPrimaryCursor(e,t,n,i,s){const o=this._cursors.getViewPositions();if(o.length>1)this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),n,i,s);else{const a=o[0],l=new Mt(a.lineNumber,a.column,a.lineNumber,a.column);this._emitCursorRevealRange(e,t,l,null,n,i,s)}}_emitCursorRevealRange(e,t,n,i,s,o,a){e.emitViewEvent(new Aw(t,n,i,s,o,a))}saveState(){let e=[];const t=this._cursors.getSelections();for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push({inSelectionMode:!s.isEmpty(),selectionStart:{lineNumber:s.selectionStartLineNumber,column:s.selectionStartColumn},position:{lineNumber:s.positionLineNumber,column:s.positionColumn}})}return e}restoreState(e,t){let n=[];for(let i=0,s=t.length;i<s;i++){const o=t[i];let a=1,l=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(l=o.position.column);let u=a,h=l;o.selectionStart&&o.selectionStart.lineNumber&&(u=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(h=o.selectionStart.column),n.push({selectionStartLineNumber:u,selectionStartColumn:h,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,ar.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!0,1)}onModelContentChanged(e,t){if(this._knownModelVersionId=t.versionId,this._isHandling)return;const n=t.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new dD(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&t.resultingSelection&&t.resultingSelection.length>0){const i=ar.fromModelSelections(t.resultingSelection);this.setStates(e,"modelChange",t.isUndoing?5:t.isRedoing?6:2,i)&&this._revealPrimaryCursor(e,"modelChange",0,!0,0)}else{const i=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,ar.fromModelSelections(i))}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:Zr.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:Zr.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,i){this.setStates(e,t,i,ar.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let n=[],i=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),i.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const s=this._model.deltaDecorations([],n),o=this._model.deltaDecorations([],i);this._autoClosedActions.push(new gD(this._model,s,o))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=_A.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let n=[],i=[];for(let s=0;s<e.commands.length;s++){const o=e.commands[s];o instanceof Hx&&o.enclosingRange&&o.closeCharacterRange&&(n.push(o.closeCharacterRange),i.push(o.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,i),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,i,s){const o=new QC(this._model,this);if(o.equals(i))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new oA(l,a)),!i||i.cursorState.length!==o.cursorState.length||o.cursorState.some((u,h)=>!u.modelState.equals(i.cursorState[h].modelState))){const u=i?i.cursorState.map(v=>v.modelState.selection):null,h=i?i.modelVersionId:0;e.emitOutgoingEvent(new Rw(u,a,h,o.modelVersionId,t||"keyboard",n,s))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];if(!s.text||s.text.indexOf(`
`)>=0)return null;const o=s.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const u=l[0].open,h=s.text.length-o[2].length-1,v=s.text.lastIndexOf(u,h-1);if(v===-1)return null;t.push([v,h])}return t}executeEdits(e,t,n,i){let s=null;t==="snippet"&&(s=this._findAutoClosingPairs(n)),s&&(n[0]._isTracked=!0);let o=[],a=[];const l=this._model.pushEditOperations(this.getSelections(),n,u=>{if(s)for(let v=0,N=s.length;v<N;v++){const[P,K]=s[v],ee=u[v],Se=ee.range.startLineNumber,Le=ee.range.startColumn-1+P,ce=ee.range.startColumn-1+K;o.push(new Mt(Se,ce+1,Se,ce+2)),a.push(new Mt(Se,Le+1,Se,ce+2))}const h=i(u);return h&&(this._isHandling=!0),h});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),o.length>0&&this._pushAutoClosedAction(o,a)}_executeEdit(e,t,n,i=0){if(this.context.cursorConfig.readOnly)return;const s=new QC(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){En(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,i,s,!1)&&this._revealPrimaryCursor(t,n,0,!0,0)}setIsDoingComposition(e){this._isDoingComposition=e}getAutoClosedCharacters(){return gD.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._selectionsWhenCompositionStarted=this.getSelections().slice(0)}endComposition(e,t){this._executeEdit(()=>{t==="keyboard"&&(this._executeEditOperation(Ns.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this._selectionsWhenCompositionStarted,this.getSelections(),this.getAutoClosedCharacters())),this._selectionsWhenCompositionStarted=null)},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const i=t.length;let s=0;for(;s<i;){const o=rh(t,s),a=t.substr(s,o);this._executeEditOperation(Ns.typeWithInterceptors(this._isDoingComposition,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),s+=o}}else this._executeEditOperation(Ns.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,i,s,o){if(t.length===0&&n===0&&i===0){if(s!==0){const a=this.getSelections().map(l=>{const u=l.getPosition();return new oi(u.lineNumber,u.column+s,u.lineNumber,u.column+s)});this.setSelections(e,o,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(Ns.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,i,s))},e,o)}paste(e,t,n,i,s){this._executeEdit(()=>{this._executeEditOperation(Ns.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,i||[]))},e,s,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(dm.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new kl(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new kl(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}C0.MAX_CURSOR_COUNT=1e4;class _A{static executeCommands(e,t,n){const i={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},s=this._innerExecuteCommands(i,n);for(let o=0,a=i.trackedRanges.length;o<a;o++)i.model._setTrackedRange(i.trackedRanges[o],null,0);return s}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const i=n.operations,s=this._getLoserCursorMap(i);if(s.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let o=[];for(let u=0,h=i.length;u<h;u++)s.hasOwnProperty(i[u].identifier.major.toString())||o.push(i[u]);n.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,o,u=>{let h=[];for(let P=0;P<e.selectionsBefore.length;P++)h[P]=[];for(const P of u)!P.identifier||h[P.identifier.major].push(P);const v=(P,K)=>P.identifier.minor-K.identifier.minor;let N=[];for(let P=0;P<e.selectionsBefore.length;P++)h[P].length>0?(h[P].sort(v),N[P]=t[P].computeCursorState(e.model,{getInverseEditOperations:()=>h[P],getTrackedSelection:K=>{const ee=parseInt(K,10),Se=e.model._getTrackedRange(e.trackedRanges[ee]);return e.trackedRangesDirection[ee]===0?new oi(Se.startLineNumber,Se.startColumn,Se.endLineNumber,Se.endColumn):new oi(Se.endLineNumber,Se.endColumn,Se.startLineNumber,Se.startColumn)}})):N[P]=e.selectionsBefore[P];return N});a||(a=e.selectionsBefore);let l=[];for(let u in s)s.hasOwnProperty(u)&&l.push(parseInt(u,10));l.sort((u,h)=>h-u);for(const u of l)a.splice(u,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],i=!1;for(let s=0,o=t.length;s<o;s++){const a=t[s];if(a){const l=this._getEditOperationsFromCommand(e,s,a);n=n.concat(l.operations),i=i||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:i}}static _getEditOperationsFromCommand(e,t,n){let i=[],s=0;const o=(v,N,P=!1)=>{Mt.isEmpty(v)&&N===""||i.push({identifier:{major:t,minor:s++},range:v,text:N,forceMoveMarkers:P,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let a=!1;const h={addEditOperation:o,addTrackedEditOperation:(v,N,P)=>{a=!0,o(v,N,P)},trackSelection:(v,N)=>{const P=oi.liftSelection(v);let K;if(P.isEmpty())if(typeof N=="boolean")N?K=2:K=3;else{const Le=e.model.getLineMaxColumn(P.startLineNumber);P.startColumn===Le?K=2:K=3}else K=1;const ee=e.trackedRanges.length,Se=e.model._setTrackedRange(null,P,K);return e.trackedRanges[ee]=Se,e.trackedRangesDirection[ee]=P.getDirection(),ee.toString()}};try{n.getEditOperations(e.model,h)}catch(v){return En(v),{operations:[],hadTrackedEditOperation:!1}}return{operations:i,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,i)=>-Mt.compareRangesUsingEnds(n.range,i.range));let t={};for(let n=1;n<e.length;n++){const i=e[n-1],s=e[n];if(Mt.getStartPosition(i.range).isBefore(Mt.getEndPosition(s.range))){let o;i.identifier.major>s.identifier.major?o=i.identifier.major:o=s.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}class pD{constructor(e,t,n,i,s,o){this.id=e,this.label=t,this.alias=n,this._precondition=i,this._run=s,this._contextKeyService=o}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}const mD={getInitialState:()=>Ff,tokenize2:(r,e,t,n)=>_v(0,r,t,n)};function RB(r,e=mD){return bA(r,e||mD)}function yA(r,e,t,n,i,s,o){let a="<div>",l=n,u=0;for(let h=0,v=e.getCount();h<v;h++){const N=e.getEndOffset(h);if(N<=n)continue;let P="";for(;l<N&&l<i;l++){const K=r.charCodeAt(l);switch(K){case 9:let ee=s-(l+u)%s;for(u+=ee-1;ee>0;)P+=o?"&#160;":" ",ee--;break;case 60:P+="&lt;";break;case 62:P+="&gt;";break;case 38:P+="&amp;";break;case 0:P+="&#00;";break;case 65279:case 8232:case 8233:case 133:P+="\uFFFD";break;case 13:P+="&#8203";break;case 32:P+=o?"&#160;":" ";break;default:P+=String.fromCharCode(K)}}if(a+=`<span style="${e.getInlineStyle(h,t)}">${P}</span>`,N>i||l>=i)break}return a+="</div>",a}function bA(r,e){let t='<div class="monaco-tokenized-source">',n=strings.splitLines(r),i=e.getInitialState();for(let s=0,o=n.length;s<o;s++){let a=n[s];s>0&&(t+="<br/>");let l=e.tokenize2(a,!0,i,0);LineTokens.convertToEndOffset(l.tokens,a.length);let h=new LineTokens(l.tokens,a).inflate(),v=0;for(let N=0,P=h.getCount();N<P;N++){const K=h.getClassName(N),ee=h.getEndOffset(N);t+=`<span class="${K}">${strings.escape(a.substring(v,ee))}</span>`,v=ee}i=l.endState}return t+="</div>",t}class wA{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,i=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,i)}}class CA{constructor(e,t,n,i,s){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=i,this.minWidth=s,this.prefixSum=0}}class Ey{constructor(e,t,n,i){this._instanceId=mf(++Ey.INSTANCE_COUNT),this._pendingChanges=new wA,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=i}static findInsertionIndex(e,t,n){let i=0,s=e.length;for(;i<s;){const o=i+s>>>1;t===e[o].afterLineNumber?n<e[o].ordinal?s=o:i=o+1:t<e[o].afterLineNumber?s=o:i=o+1}return i}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(i,s,o,a)=>{t=!0,i=i|0,s=s|0,o=o|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new CA(l,i,s,o,a)),l},changeOneWhitespace:(i,s,o)=>{t=!0,s=s|0,o=o|0,this._pendingChanges.change({id:i,newAfterLineNumber:s,newHeight:o})},removeWhitespace:i=>{t=!0,this._pendingChanges.remove({id:i})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of n){const u=this._findWhitespaceIndex(l.id);u!==-1&&this._removeWhitespace(u)}return}const i=new Set;for(const l of n)i.add(l.id);const s=new Map;for(const l of t)s.set(l.id,l);const o=l=>{let u=[];for(const h of l)if(!i.has(h.id)){if(s.has(h.id)){const v=s.get(h.id);h.afterLineNumber=v.newAfterLineNumber,h.height=v.newHeight}u.push(h)}return u},a=o(this._arr).concat(o(e));a.sort((l,u)=>l.afterLineNumber===u.afterLineNumber?l.ordinal-u.ordinal:l.afterLineNumber-u.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=Ey.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,i=t.length;n<i;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const i=this._findWhitespaceIndex(e);if(i!==-1&&(this._arr[i].height!==n&&(this._arr[i].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)),this._arr[i].afterLineNumber!==t)){const s=this._arr[i];this._removeWhitespace(i),s.afterLineNumber=t,this._insertWhitespace(s)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const s=this._arr[n].afterLineNumber;e<=s&&s<=t?this._arr[n].afterLineNumber=e-1:s>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const s=this._arr[n].afterLineNumber;e<=s&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,i=t.length-1;for(;n<=i;){const o=(i-n|0)/2|0,a=n+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else i=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){this._checkPendingChanges(),e=e|0;let t;e>1?t=this._lineHeight*(e-1):t=0;const n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e);return t+n+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let i=1,s=t;for(;i<s;){const o=(i+s)/2|0,a=this.getVerticalOffsetForLineNumber(o)|0;if(e>=a+n)i=o+1;else{if(e>=a)return o;s=o}}return i>t?t:i}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,i=this.getLineNumberAtOrAfterVerticalOffset(e)|0,s=this.getVerticalOffsetForLineNumber(i)|0;let o=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(i)|0;const l=this.getWhitespacesCount()|0;let u,h;a===-1?(a=l,h=o+1,u=0):(h=this.getAfterLineNumberForWhitespaceIndex(a)|0,u=this.getHeightForWhitespaceIndex(a)|0);let v=s,N=v;const P=5e5;let K=0;s>=P&&(K=Math.floor(s/P)*P,K=Math.floor(K/n)*n,N-=K);const ee=[],Se=e+(t-e)/2;let Le=-1;for(let Qe=i;Qe<=o;Qe++){if(Le===-1){const at=v,Ze=v+n;(at<=Se&&Se<Ze||at>Se)&&(Le=Qe)}for(v+=n,ee[Qe-i]=N,N+=n;h===Qe;)N+=u,v+=u,a++,a>=l?h=o+1:(h=this.getAfterLineNumberForWhitespaceIndex(a)|0,u=this.getHeightForWhitespaceIndex(a)|0);if(v>=t){o=Qe;break}}Le===-1&&(Le=o);const ce=this.getVerticalOffsetForLineNumber(o)|0;let Ee=i,ze=o;return Ee<ze&&s<e&&Ee++,Ee<ze&&ce+n>t&&ze--,{bigNumbersDelta:K,startLineNumber:i,endLineNumber:o,relativeVerticalOffset:ee,centeredLineNumber:Le,completelyVisibleStartLineNumber:Ee,completelyVisibleEndLineNumber:ze}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let i;return e>0?i=this.getWhitespacesAccumulatedHeight(e-1):i=0,n+i+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const i=this.getVerticalOffsetForWhitespaceIndex(n),s=this.getHeightForWhitespaceIndex(n);if(e>=i+s)return-1;for(;t<n;){const o=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(e>=a+l)t=o+1;else{if(e>=a)return o;n=o}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const i=this.getHeightForWhitespaceIndex(t),s=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:s,afterLineNumber:o,verticalOffset:n,height:i}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),i=this.getWhitespacesCount()-1;if(n<0)return[];let s=[];for(let o=n;o<=i;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(a>=t)break;s.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:l})}return s}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}}Ey.INSTANCE_COUNT=0;const SA=125;class Ly{constructor(e,t,n,i){e=e|0,t=t|0,n=n|0,i=i|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),i<0&&(i=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=i,this.scrollHeight=Math.max(n,i)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class EA extends Rn{constructor(e,t){super();this._onDidContentSizeChange=this._register(new $t),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new Ly(0,0,0,0),this._scrollable=this._register(new Lw(e,t)),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,i=t.contentHeight!==e.contentHeight;(n||i)&&this._onDidContentSizeChange.fire(new ZC(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}class LA extends Rn{constructor(e,t,n){super();this._configuration=e;const i=this._configuration.options,s=i.get(128),o=i.get(72);this._linesLayout=new Ey(t,i.get(56),o.top,o.bottom),this._scrollable=this._register(new EA(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new Ly(s.contentWidth,0,s.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(101)?SA:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(56)&&this._linesLayout.setLineHeight(t.get(56)),e.hasChanged(72)){const n=t.get(72);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(128)){const n=t.get(128),i=n.contentWidth,s=n.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new Ly(i,o.contentWidth,s,this._getContentHeight(i,s,a)))}else this._updateHeight();e.hasChanged(101)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const i=this._configuration.options.get(90);return i.horizontal===2||e>=t?0:i.horizontalScrollbarSize}_getContentHeight(e,t,n){const i=this._configuration.options;let s=this._linesLayout.getLinesTotalHeight();return i.get(92)?s+=Math.max(0,t-i.get(56)-i.get(72).bottom):s+=this._getHorizontalScrollbarHeight(e,n),s}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,i=e.contentWidth;this._scrollable.setScrollDimensions(new Ly(t,e.contentWidth,n,this._getContentHeight(t,n,i)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new Kv(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new Kv(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){const t=this._configuration.options,n=t.get(129),i=t.get(40);if(n.isViewportWrapping){const s=t.get(128),o=t.get(62);return e>s.contentWidth+i.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?e+s.verticalScrollbarWidth:e}else{const s=t.get(91)*i.typicalHalfwidthCharacterWidth,o=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+s,o)}}setMaxLineWidth(e){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new Ly(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition();let t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),i=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-i,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){return this._linesLayout.getVerticalOffsetForLineNumber(e)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}class xA{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column)}convertModelRangeToViewRange(e){return this._lines.convertModelRangeToViewRange(e)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}}class DA{constructor(e){this._counts=e,this._isValid=!1,this._validEndIndex=-1,this._modelToView=[],this._viewToModel=[]}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._counts.length;e<t;e++){const n=this._counts[e],i=e>0?this._modelToView[e-1]:0;this._modelToView[e]=i+n;for(let s=0;s<n;s++)this._viewToModel[i+s]=e}this._modelToView.length=this._counts.length,this._viewToModel.length=this._modelToView[this._modelToView.length-1],this._isValid=!0,this._validEndIndex=this._counts.length-1}}changeValue(e,t){this._counts[e]!==t&&(this._counts[e]=t,this._invalidate(e))}removeValues(e,t){this._counts.splice(e,t),this._invalidate(e)}insertValues(e,t){this._counts=Ld(this._counts,e,t),this._invalidate(e)}getTotalValue(){return this._ensureValid(),this._viewToModel.length}getAccumulatedValue(e){return this._ensureValid(),this._modelToView[e]}getIndexOf(e){this._ensureValid();const t=this._viewToModel[e],n=t>0?this._modelToView[t-1]:0;return new Li(t,e-n)}}class IA{constructor(e,t,n,i,s,o,a,l,u){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=i,this.fontInfo=s,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=u,this._constructLines(!0,null)}dispose(){this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,[])}createCoordinatesConverter(){return new xA(this)}_constructLines(e,t){this.lines=[],e&&(this.hiddenAreasIds=[]);const n=this.model.getLinesContent(),i=this.model.getInjectedTextDecorations(this._editorId),s=zd.fromDecorations(i),o=n.length,a=this.createLineBreaksComputer(),l=s.length;let u=0,h=u<l?s[u].lineNumber:o+1;for(let ce=0;ce<o;ce++){let Ee=null;if(ce+1===h)for(Ee=[];ce+1===h&&u<l;)Ee.push(s[u]),u++,h=u<l?s[u].lineNumber:o+1;a.addRequest(n[ce],Ee,t?t[ce]:null)}const v=a.finalize();let N=[],P=this.hiddenAreasIds.map(ce=>this.model.getDecorationRange(ce)).sort(Mt.compareRangesUsingStarts),K=1,ee=0,Se=-1,Le=Se+1<P.length?ee+1:o+2;for(let ce=0;ce<o;ce++){let Ee=ce+1;Ee===Le&&(Se++,K=P[Se].startLineNumber,ee=P[Se].endLineNumber,Le=Se+1<P.length?ee+1:o+2);let ze=Ee>=K&&Ee<=ee,Qe=eS(v[ce],!ze);N[ce]=Qe.getViewLineCount(),this.lines[ce]=Qe}this._validModelVersionId=this.model.getVersionId(),this.prefixSumComputer=new DA(N)}getHiddenAreas(){return this.hiddenAreasIds.map(e=>this.model.getDecorationRange(e))}_reduceRanges(e){if(e.length===0)return[];let t=e.map(o=>this.model.validateRange(o)).sort(Mt.compareRangesUsingStarts),n=[],i=t[0].startLineNumber,s=t[0].endLineNumber;for(let o=1,a=t.length;o<a;o++){let l=t[o];l.startLineNumber>s+1?(n.push(new Mt(i,1,s,1)),i=l.startLineNumber,s=l.endLineNumber):l.endLineNumber>s&&(s=l.endLineNumber)}return n.push(new Mt(i,1,s,1)),n}setHiddenAreas(e){let t=this._reduceRanges(e),n=this.hiddenAreasIds.map(v=>this.model.getDecorationRange(v)).sort(Mt.compareRangesUsingStarts);if(t.length===n.length){let v=!1;for(let N=0;N<t.length;N++)if(!t[N].equalsRange(n[N])){v=!0;break}if(!v)return!1}let i=[];for(const v of t)i.push({range:v,options:Fo.EMPTY});this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,i);let s=t,o=1,a=0,l=-1,u=l+1<s.length?a+1:this.lines.length+2,h=!1;for(let v=0;v<this.lines.length;v++){let N=v+1;N===u&&(l++,o=s[l].startLineNumber,a=s[l].endLineNumber,u=l+1<s.length?a+1:this.lines.length+2);let P=!1;if(N>=o&&N<=a?this.lines[v].isVisible()&&(this.lines[v]=this.lines[v].setVisible(!1),P=!0):(h=!0,this.lines[v].isVisible()||(this.lines[v]=this.lines[v].setVisible(!0),P=!0)),P){let K=this.lines[v].getViewLineCount();this.prefixSumComputer.changeValue(v,K)}}return h||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.lines.length?!1:this.lines[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.lines.length?1:this.lines[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,i){const s=this.fontInfo.equals(e),o=this.wrappingStrategy===t,a=this.wrappingColumn===n,l=this.wrappingIndent===i;if(s&&o&&a&&l)return!1;const u=s&&o&&!a&&l;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=i;let h=null;if(u){h=[];for(let v=0,N=this.lines.length;v<N;v++)h[v]=this.lines[v].getLineBreakData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;let i=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,s=this.prefixSumComputer.getAccumulatedValue(n-1);return this.lines.splice(t-1,n-t+1),this.prefixSumComputer.removeValues(t-1,n-t+1),new GC(i,s)}onModelLinesInserted(e,t,n,i){if(!e||e<=this._validModelVersionId)return null;const s=t>2&&!this.lines[t-2].isVisible();let o=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,a=0,l=[],u=[];for(let h=0,v=i.length;h<v;h++){let N=eS(i[h],!s);l.push(N);let P=N.getViewLineCount();a+=P,u[h]=P}return this.lines=this.lines.slice(0,t-1).concat(l).concat(this.lines.slice(t-1)),this.prefixSumComputer.insertValues(t-1,u),new YC(o,o+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];let i=t-1,s=this.lines[i].getViewLineCount(),o=this.lines[i].isVisible(),a=eS(n,o);this.lines[i]=a;let l=this.lines[i].getViewLineCount(),u=!1,h=0,v=-1,N=0,P=-1,K=0,ee=-1;s>l?(h=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,v=h+l-1,K=v+1,ee=K+(s-l)-1,u=!0):s<l?(h=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,v=h+s-1,N=v+1,P=N+(l-s)-1,u=!0):(h=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,v=h+l-1),this.prefixSumComputer.changeValue(i,l);const Se=h<=v?new fD(h,v):null,Le=N<=P?new YC(N,P):null,ce=K<=ee?new GC(K,ee):null;return[u,Se,Le,ce]}acceptVersionId(e){this._validModelVersionId=e,this.lines.length===1&&!this.lines[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.prefixSumComputer.getTotalValue()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.getActiveIndentGuide(i.lineNumber,s.lineNumber,o.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),u=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:u.lineNumber,indent:a.indent}}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let s=[],o=[],a=[];const l=n.lineNumber-1,u=i.lineNumber-1;let h=null;for(let K=l;K<=u;K++){const ee=this.lines[K];if(ee.isVisible()){let Se=ee.getViewLineNumberOfModelPosition(0,K===l?n.column:1),Le=ee.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(K+1)),ce=Le-Se+1,Ee=0;ce>1&&ee.getViewLineMinColumn(this.model,K+1,Le)===1&&(Ee=Se===0?1:2),o.push(ce),a.push(Ee),h===null&&(h=new dn(K+1,0))}else h!==null&&(s=s.concat(this.model.getLinesIndentGuides(h.lineNumber,K)),h=null)}h!==null&&(s=s.concat(this.model.getLinesIndentGuides(h.lineNumber,i.lineNumber)),h=null);const v=t-e+1;let N=new Array(v),P=0;for(let K=0,ee=s.length;K<ee;K++){let Se=s[K],Le=Math.min(v-P,o[K]),ce=a[K],Ee;ce===2?Ee=0:ce===1?Ee=1:Ee=Le;for(let ze=0;ze<Le;ze++)ze===Ee&&(Se=0),N[P++]=Se}return N}getViewLineContent(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,i=t.remainder;return this.lines[n].getViewLineContent(this.model,n+1,i)}getViewLineLength(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,i=t.remainder;return this.lines[n].getViewLineLength(this.model,n+1,i)}getViewLineMinColumn(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,i=t.remainder;return this.lines[n].getViewLineMinColumn(this.model,n+1,i)}getViewLineMaxColumn(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,i=t.remainder;return this.lines[n].getViewLineMaxColumn(this.model,n+1,i)}getViewLineData(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,i=t.remainder;return this.lines[n].getViewLineData(this.model,n+1,i)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let i=this.prefixSumComputer.getIndexOf(e-1),s=e,o=i.index,a=i.remainder,l=[];for(let u=o,h=this.model.getLineCount();u<h;u++){let v=this.lines[u];if(!v.isVisible())continue;let N=u===o?a:0,P=v.getViewLineCount()-N,K=!1;s+P>t&&(K=!0,P=t-s+1);let ee=N+P;if(v.getViewLinesData(this.model,u+1,N,ee,s-e,n,l),s+=P,K)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);let i=this.prefixSumComputer.getIndexOf(e-1),s=i.index,o=i.remainder,a=this.lines[s],l=a.getViewLineMinColumn(this.model,s+1,o),u=a.getViewLineMaxColumn(this.model,s+1,o);t<l&&(t=l),t>u&&(t=u);let h=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new dn(s+1,h)).equals(n)?new dn(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),i=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new Mt(n.lineNumber,n.column,i.lineNumber,i.column)}convertViewPositionToModelPosition(e,t){e=this._toValidViewLineNumber(e);let n=this.prefixSumComputer.getIndexOf(e-1),i=n.index,s=n.remainder,o=this.lines[i].getModelColumnOfViewPosition(s,t);return this.model.validatePosition(new dn(i+1,o))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new Mt(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t){const n=this.model.validatePosition(new dn(e,t)),i=n.lineNumber,s=n.column;let o=i-1,a=!1;for(;o>0&&!this.lines[o].isVisible();)o--,a=!0;if(o===0&&!this.lines[o].isVisible())return new dn(1,1);const l=1+(o===0?0:this.prefixSumComputer.getAccumulatedValue(o-1));let u;return a?u=this.lines[o].getViewPositionOfModelPosition(l,this.model.getLineMaxColumn(o+1)):u=this.lines[i-1].getViewPositionOfModelPosition(l,s),u}convertModelRangeToViewRange(e){let t=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn),n=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn);return e.startLineNumber===e.endLineNumber&&t.lineNumber!==n.lineNumber&&n.column===this.getViewLineMinColumn(n.lineNumber)?new Mt(t.lineNumber,t.column,n.lineNumber-1,this.getViewLineMaxColumn(n.lineNumber-1)):new Mt(t.lineNumber,t.column,n.lineNumber,n.column)}_getViewLineNumberForModelPosition(e,t){let n=e-1;if(this.lines[n].isVisible()){const s=1+(n===0?0:this.prefixSumComputer.getAccumulatedValue(n-1));return this.lines[n].getViewLineNumberOfModelPosition(s,t)}for(;n>0&&!this.lines[n].isVisible();)n--;if(n===0&&!this.lines[n].isVisible())return 1;const i=1+(n===0?0:this.prefixSumComputer.getAccumulatedValue(n-1));return this.lines[n].getViewLineNumberOfModelPosition(i,this.model.getLineMaxColumn(n+1))}getAllOverviewRulerDecorations(e,t,n){const i=this.model.getOverviewRulerDecorations(e,t),s=new _D;for(const o of i){const a=o.options.overviewRuler,l=a?a.position:0;if(l===0)continue;const u=a.getColor(n),h=this._getViewLineNumberForModelPosition(o.range.startLineNumber,o.range.startColumn),v=this._getViewLineNumberForModelPosition(o.range.endLineNumber,o.range.endColumn);s.accept(u,h,v,l)}return s.result}getDecorationsInRange(e,t,n){const i=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),s=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(s.lineNumber-i.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new Mt(i.lineNumber,1,s.lineNumber,s.column),t,n);let o=[];const a=i.lineNumber-1,l=s.lineNumber-1;let u=null;for(let P=a;P<=l;P++)if(this.lines[P].isVisible())u===null&&(u=new dn(P+1,P===a?i.column:1));else if(u!==null){const ee=this.model.getLineMaxColumn(P);o=o.concat(this.model.getDecorationsInRange(new Mt(u.lineNumber,u.column,P,ee),t,n)),u=null}u!==null&&(o=o.concat(this.model.getDecorationsInRange(new Mt(u.lineNumber,u.column,s.lineNumber,s.column),t,n)),u=null),o.sort((P,K)=>{const ee=Mt.compareRangesUsingStarts(P.range,K.range);return ee===0?P.id<K.id?-1:P.id>K.id?1:0:ee});let h=[],v=0,N=null;for(const P of o){const K=P.id;N!==K&&(N=K,h[v++]=P)}return h}normalizePosition(e,t){const n=this._toValidViewLineNumber(e.lineNumber),i=this.prefixSumComputer.getIndexOf(n-1),s=i.index,o=i.remainder;return this.lines[s].normalizePosition(this.model,s+1,o,e,t)}getLineIndentColumn(e){const t=this._toValidViewLineNumber(e),n=this.prefixSumComputer.getIndexOf(t-1),i=n.index;return n.remainder===0?this.model.getLineIndentColumn(i+1):0}}class Pw{constructor(){}isVisible(){return!0}setVisible(e){return e?this:Fw.INSTANCE}getLineBreakData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){let i=e.getLineTokens(t),s=i.getLineContent();return new zp(s,!1,1,s.length+1,0,i.inflate())}getViewLinesData(e,t,n,i,s,o,a){if(!o[s]){a[s]=null;return}a[s]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new dn(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n,i,s){return i}}Pw.INSTANCE=new Pw;class Fw{constructor(){}isVisible(){return!1}setVisible(e){return e?Pw.INSTANCE:this}getLineBreakData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,i,s,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n,i,s){throw new Error("Not supported")}}Fw.INSTANCE=new Fw;class NA{constructor(e,t){this._lineBreakData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getLineBreakData(){return this._lineBreakData}getViewLineCount(){return this._isVisible?this._lineBreakData.breakOffsets.length:0}getInputStartOffsetOfOutputLineIndex(e){return this._lineBreakData.getInputOffsetOfOutputPosition(e,0)}getInputEndOffsetOfOutputLineIndex(e,t,n){return n+1===this._lineBreakData.breakOffsets.length?e.getLineMaxColumn(t)-1:this._lineBreakData.getInputOffsetOfOutputPosition(n+1,0)}getViewLineContent(e,t,n){if(!this._isVisible)throw new Error("Not supported");let i=this.getInputStartOffsetOfOutputLineIndex(n),s=this.getInputEndOffsetOfOutputLineIndex(e,t,n),o=e.getValueInRange({startLineNumber:t,startColumn:i+1,endLineNumber:t,endColumn:s+1});return n>0&&(o=vD(this._lineBreakData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,n){if(!this._isVisible)throw new Error("Not supported");const i=n>0?this._lineBreakData.breakOffsets[n-1]:0;let o=(n<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[n]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1])-i;return n>0&&(o=this._lineBreakData.wrappedTextIndentLength+o),o}getViewLineMinColumn(e,t,n){if(!this._isVisible)throw new Error("Not supported");return this._getViewLineMinColumn(n)}_getViewLineMinColumn(e){return e>0?this._lineBreakData.wrappedTextIndentLength+1:1}getViewLineMaxColumn(e,t,n){if(!this._isVisible)throw new Error("Not supported");return this.getViewLineLength(e,t,n)+1}getViewLineData(e,t,n){if(!this._isVisible)throw new Error("Not supported");const i=this._lineBreakData,s=n>0?i.wrappedTextIndentLength:0,o=i.injectionOffsets,a=i.injectionTexts;let l,u;if(o){const K=e.getLineTokens(t).withInserted(o.map((Le,ce)=>({offset:Le,text:a[ce],tokenMetadata:yo.defaultTokenMetadata}))),ee=n>0?i.breakOffsets[n-1]:0,Se=i.breakOffsets[n];l=K.getLineContent().substring(ee,Se),u=K.sliceAndInflate(ee,Se,s)}else{const K=this.getInputStartOffsetOfOutputLineIndex(n),ee=this.getInputEndOffsetOfOutputLineIndex(e,t,n),Se=e.getLineTokens(t);l=e.getValueInRange({startLineNumber:t,startColumn:K+1,endLineNumber:t,endColumn:ee+1}),u=Se.sliceAndInflate(K,ee,s)}n>0&&(l=vD(i.wrappedTextIndentLength)+l);const h=n>0?i.wrappedTextIndentLength+1:1,v=l.length+1,N=n+1<this.getViewLineCount(),P=n===0?0:i.breakOffsetsVisibleColumn[n-1];return new zp(l,N,h,v,P,u)}getViewLinesData(e,t,n,i,s,o,a){if(!this._isVisible)throw new Error("Not supported");for(let l=n;l<i;l++){let u=s+l-n;if(!o[u]){a[u]=null;continue}a[u]=this.getViewLineData(e,t,l)}}getModelColumnOfViewPosition(e,t){if(!this._isVisible)throw new Error("Not supported");let n=t-1;return e>0&&(n<this._lineBreakData.wrappedTextIndentLength?n=0:n-=this._lineBreakData.wrappedTextIndentLength),this._lineBreakData.getInputOffsetOfOutputPosition(e,n)+1}getViewPositionOfModelPosition(e,t){if(!this._isVisible)throw new Error("Not supported");let n=this._lineBreakData.getOutputPositionOfInputOffset(t-1),i=n.outputLineIndex,s=n.outputOffset+1;return i>0&&(s+=this._lineBreakData.wrappedTextIndentLength),new dn(e+i,s)}getViewLineNumberOfModelPosition(e,t){if(!this._isVisible)throw new Error("Not supported");const n=this._lineBreakData.getOutputPositionOfInputOffset(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n,i,s){if(s===0){if(n>0&&i.column===this._getViewLineMinColumn(n))return new dn(i.lineNumber-1,this.getViewLineMaxColumn(e,t,n-1))}else if(s===1){const o=this.getViewLineCount()-1;if(n<o&&i.column===this.getViewLineMaxColumn(e,t,n))return new dn(i.lineNumber+1,this._getViewLineMinColumn(n+1))}return i}}let JC=[""];function vD(r){if(r>=JC.length)for(let e=1;e<=r;e++)JC[e]=TA(e);return JC[r]}function TA(r){return new Array(r+1).join(" ")}function eS(r,e){return r===null?e?Pw.INSTANCE:Fw.INSTANCE:new NA(r,e)}class MA{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}}class OA{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new MA(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,i){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(t,n,i)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new GC(t,n)}onModelLinesInserted(e,t,n,i){return new YC(t,n)}onModelLineChanged(e,t,n){return[!1,new fD(t,t),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesIndentGuides(e,t){const n=t-e+1;let i=new Array(n);for(let s=0;s<n;s++)i[s]=0;return i}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let t=this.model.getLineTokens(e),n=t.getLineContent();return new zp(n,!1,1,n.length+1,0,t.inflate())}getViewLinesData(e,t,n){const i=this.model.getLineCount();e=Math.min(Math.max(1,e),i),t=Math.min(Math.max(1,t),i);let s=[];for(let o=e;o<=t;o++){let a=o-e;n[a]||(s[a]=null),s[a]=this.getViewLineData(o)}return s}getAllOverviewRulerDecorations(e,t,n){const i=this.model.getOverviewRulerDecorations(e,t),s=new _D;for(const o of i){const a=o.options.overviewRuler,l=a?a.position:0;if(l===0)continue;const u=a.getColor(n),h=o.range.startLineNumber,v=o.range.endLineNumber;s.accept(u,h,v,l)}return s.result}getDecorationsInRange(e,t,n){return this.model.getDecorationsInRange(e,t,n)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}}class _D{constructor(){this.result=Object.create(null)}accept(e,t,n,i){let s=this.result[e];if(s){const o=s[s.length-3],a=s[s.length-1];if(o===i&&a+1>=t){n>a&&(s[s.length-1]=n);return}s.push(i,t,n)}else this.result[e]=[i,t,n]}}class kA{constructor(e,t,n,i,s){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=i,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const i=e.range,s=e.options;let o;if(s.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new dn(i.startLineNumber,1)),l=this._coordinatesConverter.convertModelPositionToViewPosition(new dn(i.endLineNumber,this.model.getLineMaxColumn(i.endLineNumber)));o=new Mt(a.lineNumber,a.column,l.lineNumber,l.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(i);n=new ua(o,s),this._decorationsCache[t]=n}return n}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}_getDecorationsViewportData(e){const t=this._linesCollection.getDecorationsInRange(e,this.editorId,nn(this.configuration.options)),n=e.startLineNumber,i=e.endLineNumber;let s=[],o=0,a=[];for(let l=n;l<=i;l++)a[l-n]=[];for(let l=0,u=t.length;l<u;l++){let h=t[l],v=h.options,N=this._getOrCreateViewModelDecoration(h),P=N.range;if(s[o++]=N,v.inlineClassName){let K=new ig(P,v.inlineClassName,v.inlineClassNameAffectsLetterSpacing?3:0),ee=Math.max(n,P.startLineNumber),Se=Math.min(i,P.endLineNumber);for(let Le=ee;Le<=Se;Le++)a[Le-n].push(K)}if(v.beforeContentClassName&&n<=P.startLineNumber&&P.startLineNumber<=i){let K=new ig(new Mt(P.startLineNumber,P.startColumn,P.startLineNumber,P.startColumn),v.beforeContentClassName,1);a[P.startLineNumber-n].push(K)}if(v.afterContentClassName&&n<=P.endLineNumber&&P.endLineNumber<=i){let K=new ig(new Mt(P.endLineNumber,P.endColumn,P.endLineNumber,P.endColumn),v.afterContentClassName,2);a[P.endLineNumber-n].push(K)}}return{decorations:s,inlineDecorations:a}}}const AA=!0;class RA extends Rn{constructor(e,t,n,i,s,o){super();if(this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new gA,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new pc(this.model.getLanguageIdentifier(),this.model.getOptions(),this._configuration),this._tokenizeViewportSoon=this._register(new ys(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new ys(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStartLine=-1,this._viewportStartLineTrackedRange=null,this._viewportStartLineDelta=0,AA&&this.model.isTooLargeForTokenization())this._lines=new OA(this.model);else{const a=this._configuration.options,l=a.get(40),u=a.get(122),h=a.get(129),v=a.get(121);this._lines=new IA(this._editorId,this.model,i,s,l,this.model.getOptions().tabSize,u,h.wrappingColumn,v)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new C0(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new LA(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll(a=>{a.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitSingleViewEvent(new uA(a)),this._eventDispatcher.emitOutgoingEvent(new qC(a.oldScrollWidth,a.oldScrollLeft,a.oldScrollHeight,a.oldScrollTop,a.scrollWidth,a.scrollLeft,a.scrollHeight,a.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(a=>{this._eventDispatcher.emitOutgoingEvent(a)})),this._decorations=new kA(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(a=>{try{const l=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(l,a)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(vy.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new dA)})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this.invalidateMinimapColorCache(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),t=this.coordinatesConverter.convertViewPositionToModelPosition(new dn(e.startLineNumber,1)),n=this.coordinatesConverter.convertViewPositionToModelPosition(new dn(e.endLineNumber,1));this.model.tokenizeViewport(t.lineNumber,n.lineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new aA(e)),this._eventDispatcher.emitOutgoingEvent(new XC(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new iA)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new rA)}onDidColorThemeChange(){this._eventDispatcher.emitSingleViewEvent(new cA)}_onConfigurationChanged(e,t){let n=null;if(this._viewportStartLine!==-1){let h=new dn(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));n=this.coordinatesConverter.convertViewPositionToModelPosition(h)}let i=!1;const s=this._configuration.options,o=s.get(40),a=s.get(122),l=s.get(129),u=s.get(121);if(this._lines.setWrappingSettings(o,a,l.wrappingColumn,u)&&(e.emitViewEvent(new Ow),e.emitViewEvent(new kw),e.emitViewEvent(new w0(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(i=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(78)&&(this._decorations.reset(),e.emitViewEvent(new w0(null))),e.emitViewEvent(new sA(t)),this.viewLayout.onConfigurationChanged(t),i&&n){const h=this.coordinatesConverter.convertModelPositionToViewPosition(n),v=this.viewLayout.getVerticalOffsetForLineNumber(h.lineNumber);this.viewLayout.setScrollPosition({scrollTop:v+this._viewportStartLineDelta},1)}pc.shouldRecreate(t)&&(this.cursorConfig=new pc(this.model.getLanguageIdentifier(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();let n=!1,i=!1;const s=e.changes,o=e instanceof fg?e.versionId:null,a=this._lines.createLineBreaksComputer();for(const h of s)switch(h.changeType){case 4:{for(let v=0;v<h.detail.length;v++){const N=h.detail[v];let P=h.injectedTexts[v];P&&(P=P.filter(K=>!K.ownerId||K.ownerId===this._editorId)),a.addRequest(N,P,null)}break}case 2:{let v=null;h.injectedText&&(v=h.injectedText.filter(N=>!N.ownerId||N.ownerId===this._editorId)),a.addRequest(h.detail,v,null);break}}const l=a.finalize();let u=0;for(const h of s)switch(h.changeType){case 1:{this._lines.onModelFlushed(),t.emitViewEvent(new Ow),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break}case 3:{const v=this._lines.onModelLinesDeleted(o,h.fromLineNumber,h.toLineNumber);v!==null&&(t.emitViewEvent(v),this.viewLayout.onLinesDeleted(v.fromLineNumber,v.toLineNumber)),n=!0;break}case 4:{const v=l.slice(u,u+h.detail.length);u+=h.detail.length;const N=this._lines.onModelLinesInserted(o,h.fromLineNumber,h.toLineNumber,v);N!==null&&(t.emitViewEvent(N),this.viewLayout.onLinesInserted(N.fromLineNumber,N.toLineNumber)),n=!0;break}case 2:{const v=l[u];u++;const[N,P,K,ee]=this._lines.onModelLineChanged(o,h.lineNumber,v);i=N,P&&t.emitViewEvent(P),K&&(t.emitViewEvent(K),this.viewLayout.onLinesInserted(K.fromLineNumber,K.toLineNumber)),ee&&(t.emitViewEvent(ee),this.viewLayout.onLinesDeleted(ee.fromLineNumber,ee.toLineNumber));break}case 5:break}o!==null&&this._lines.acceptVersionId(o),this.viewLayout.onHeightMaybeChanged(),!n&&i&&(t.emitViewEvent(new kw),t.emitViewEvent(new w0(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}if(this._viewportStartLine=-1,this._configuration.setMaxLineNumber(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&this._viewportStartLineTrackedRange){const t=this.model._getTrackedRange(this._viewportStartLineTrackedRange);if(t){const n=this.coordinatesConverter.convertModelPositionToViewPosition(t.getStartPosition()),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber);this.viewLayout.setScrollPosition({scrollTop:i+this._viewportStartLineDelta},1)}}if(e instanceof fg)try{const t=this._eventDispatcher.beginEmitViewEvents();this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(this.model.onDidChangeTokens(e=>{let t=[];for(let n=0,i=e.ranges.length;n<i;n++){const s=e.ranges[n],o=this.coordinatesConverter.convertModelPositionToViewPosition(new dn(s.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new dn(s.toLineNumber,this.model.getLineMaxColumn(s.toLineNumber))).lineNumber;t[n]={fromLineNumber:o,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new hA(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new lA),this.cursorConfig=new pc(this.model.getLanguageIdentifier(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new pc(this.model.getLanguageIdentifier(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new Ow),t.emitViewEvent(new kw),t.emitViewEvent(new w0(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new pc(this.model.getLanguageIdentifier(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new w0(e))}))}setHiddenAreas(e){try{const t=this._eventDispatcher.beginEmitViewEvents();this._lines.setHiddenAreas(e)&&(t.emitViewEvent(new Ow),t.emitViewEvent(new kw),t.emitViewEvent(new w0(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(128),t=this._configuration.options.get(56),n=Math.max(20,Math.round(e.height/t)),i=this.viewLayout.getLinesViewportData(),s=Math.max(1,i.completelyVisibleStartLineNumber-n),o=Math.min(this.getLineCount(),i.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new Mt(s,this.getLineMinColumn(s),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];let i=[],s=0,o=t.startLineNumber,a=t.startColumn,l=t.endLineNumber,u=t.endColumn;for(let h=0,v=n.length;h<v;h++){const N=n[h].startLineNumber,P=n[h].endLineNumber;P<o||N>l||(o<N&&(i[s++]=new Mt(o,a,N-1,this.model.getLineMaxColumn(N-1))),o=P+1,a=1)}return(o<l||o===l&&a<u)&&(i[s++]=new Mt(o,a,l,u)),i}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new Mt(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new Mt(n,this.getLineMinColumn(n),i,this.getLineMaxColumn(i))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),i=this.coordinatesConverter.convertViewPositionToModelPosition(new dn(n,this.getLineMinColumn(n))),s=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:i,firstPositionDeltaTop:s}}reduceRestoreState(e){if(typeof e.firstPosition=="undefined")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:i}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getTextModelOptions(){return this.model.getOptions()}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStartLine=e;let i=this.coordinatesConverter.convertViewPositionToModelPosition(new dn(e,this.getLineMinColumn(e)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new Mt(i.lineNumber,i.column,i.lineNumber,i.column),1);const s=this.viewLayout.getVerticalOffsetForLineNumber(e),o=this.viewLayout.getCurrentScrollTop();this._viewportStartLineDelta=o-s}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=ka(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=_u(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getViewLineRenderingData(e,t){let n=this.model.mightContainRTL(),i=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),o=this._lines.getViewLineData(t),l=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return new Ta(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,n,i,o.tokens,l,s,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){let i=this._lines.getViewLinesData(e,t,n);return new Dd(this.getTabSize(),i)}getAllOverviewRulerDecorations(e){return this._lines.getAllOverviewRulerDecorations(this._editorId,nn(this._configuration.options),e)}invalidateOverviewRulerColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n&&n.invalidateCachedColor()}}invalidateMinimapColorCache(){const e=this.model.getAllDecorations();for(const t of e){const n=t.options.minimap;n&&n.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getModelLineMaxColumn(e){return this.model.getLineMaxColumn(e)}validateModelPosition(e){return this.model.validatePosition(e)}validateModelRange(e){return this.model.validateRange(e)}deduceModelPositionRelativeToViewPosition(e,t,n){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const o=this.model.getOffsetAt(i)+t;return this.model.getPositionAt(o)}getEOL(){return this.model.getEOL()}getPlainTextToCopy(e,t,n){const i=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(Mt.compareRangesUsingStarts);let s=!1,o=!1;for(const l of e)l.isEmpty()?s=!0:o=!0;if(!o){if(!t)return"";const l=e.map(h=>h.startLineNumber);let u="";for(let h=0;h<l.length;h++)h>0&&l[h-1]===l[h]||(u+=this.model.getLineContent(l[h])+i);return u}if(s&&t){let l=[],u=0;for(const h of e){const v=h.startLineNumber;h.isEmpty()?v!==u&&l.push(this.model.getLineContent(v)):l.push(this.model.getValueInRange(h,n?2:0)),u=v}return l.length===1?l[0]:l}let a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageIdentifier();if(n.id===1||e.length!==1)return null;let i=e[0];if(i.isEmpty()){if(!t)return null;const h=i.startLineNumber;i=new Mt(h,this.model.getLineMinColumn(h),h,this.model.getLineMaxColumn(h))}const s=this._configuration.options.get(40),o=this._getColorMap(),l=/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===dt.fontFamily;let u;return l?u=dt.fontFamily:(u=s.fontFamily,u=u.replace(/"/g,"'"),/[,']/.test(u)||/[+ ]/.test(u)&&(u=`'${u}'`),u=`${u}, ${dt.fontFamily}`),{mode:n.language,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${u};font-weight: ${s.fontWeight};font-size: ${s.fontSize}px;line-height: ${s.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(i,o)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let l="";for(let u=n;u<=s;u++){const h=this.model.getLineTokens(u),v=h.getLineContent(),N=u===n?i-1:0,P=u===s?o-1:v.length;v===""?l+="<br>":l+=yA(v,h.inflate(),t,N,P,a,pe)}return l}_getColorMap(){let e=bs.getColorMap(),t=["#000000"];if(e)for(let n=1,i=e.length;n<i;n++)t[n]=Tn.Format.CSS.formatHex(e[n]);return t}pushStackElement(){this.model.pushStackElement()}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){this._withViewEventsCollector(i=>this._cursor.setStates(i,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(i=>this._cursor.setSelections(i,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new vA);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(i=>this._cursor.executeEdits(i,e,t,n))}startComposition(){this._cursor.setIsDoingComposition(!0),this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._cursor.setIsDoingComposition(!1),this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,i,s){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,n,i,s))}paste(e,t,n,i){this._executeCursorEdit(s=>this._cursor.paste(s,e,t,n,i))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t){this._withViewEventsCollector(n=>this._cursor.revealPrimary(n,e,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new Mt(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new Aw(e,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new Mt(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new Aw(e,n,null,0,!0,0)))}revealRange(e,t,n,i,s){this._withViewEventsCollector(o=>o.emitViewEvent(new Aw(e,n,null,i,t,s)))}getVerticalOffsetForLineNumber(e){return this.viewLayout.getVerticalOffsetForLineNumber(e)}getScrollTop(){return this.viewLayout.getCurrentScrollTop()}setScrollTop(e,t){this.viewLayout.setScrollPosition({scrollTop:e},t)}setScrollPosition(e,t){this.viewLayout.setScrollPosition(e,t)}deltaScrollNow(e,t){this.viewLayout.deltaScrollNow(e,t)}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new fA),this._eventDispatcher.emitOutgoingEvent(new mA))}setMaxLineWidth(e){this.viewLayout.setMaxLineWidth(e)}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class xy{constructor(...e){this._entries=new Map;for(let[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}const Ru=Te("accessibilityService"),PA=new nr("accessibilityModeEnabled",!1);class FA extends tu{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let tS=[],nS=[];class iS{constructor(e,t){this.classifier=new FA(e,t)}static create(e){return new iS(e.get(117),e.get(116))}createLineBreaksComputer(e,t,n,i){t=t|0,n=+n;const s=[],o=[],a=[];return{addRequest:(l,u,h)=>{s.push(l),o.push(u),a.push(h)},finalize:()=>{const l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth;let u=[];for(let h=0,v=s.length;h<v;h++){const N=o[h],P=a[h];P&&!P.injectionTexts&&!N?u[h]=BA(this.classifier,P,s[h],t,n,l,i):u[h]=WA(this.classifier,s[h],N,t,n,l,i)}return tS.length=0,nS.length=0,u}}}}function BA(r,e,t,n,i,s,o){if(i===-1)return null;const a=t.length;if(a<=1)return null;const l=e.breakOffsets,u=e.breakOffsetsVisibleColumn,h=bD(t,n,i,s,o),v=i-h;let N=tS,P=nS,K=0,ee=0,Se=0,Le=i;const ce=l.length;let Ee=0;if(Ee>=0){let ze=Math.abs(u[Ee]-Le);for(;Ee+1<ce;){const Qe=Math.abs(u[Ee+1]-Le);if(Qe>=ze)break;ze=Qe,Ee++}}for(;Ee<ce;){let ze=Ee<0?0:l[Ee],Qe=Ee<0?0:u[Ee];ee>ze&&(ze=ee,Qe=Se);let at=0,Ze=0,rt=0,St=0;if(Qe<=Le){let Kt=Qe,An=ze===0?0:t.charCodeAt(ze-1),Wn=ze===0?0:r.get(An),$i=!0;for(let Fi=ze;Fi<a;Fi++){const tr=Fi,yr=t.charCodeAt(Fi);let gr,Mr;if(Zs(yr)?(Fi++,gr=0,Mr=2):(gr=r.get(yr),Mr=Dy(yr,Kt,n,s)),tr>ee&&rS(An,Wn,yr,gr)&&(at=tr,Ze=Kt),Kt+=Mr,Kt>Le){tr>ee?(rt=tr,St=Kt-Mr):(rt=Fi+1,St=Kt),Kt-Ze>v&&(at=0),$i=!1;break}An=yr,Wn=gr}if($i){K>0&&(N[K]=l[l.length-1],P[K]=u[l.length-1],K++);break}}if(at===0){let Kt=Qe,An=t.charCodeAt(ze),Wn=r.get(An),$i=!1;for(let Fi=ze-1;Fi>=ee;Fi--){const tr=Fi+1,yr=t.charCodeAt(Fi);if(yr===9){$i=!0;break}let gr,Mr;if(Gu(yr)?(Fi--,gr=0,Mr=2):(gr=r.get(yr),Mr=Ja(yr)?s:1),Kt<=Le){if(rt===0&&(rt=tr,St=Kt),Kt<=Le-v)break;if(rS(yr,gr,An,Wn)){at=tr,Ze=Kt;break}}Kt-=Mr,An=yr,Wn=gr}if(at!==0){const Fi=v-(St-Ze);if(Fi<=n){const tr=t.charCodeAt(rt);let yr;Zs(tr)?yr=2:yr=Dy(tr,St,n,s),Fi-yr<0&&(at=0)}}if($i){Ee--;continue}}if(at===0&&(at=rt,Ze=St),at<=ee){const Kt=t.charCodeAt(ee);Zs(Kt)?(at=ee+2,Ze=Se+2):(at=ee+1,Ze=Se+Dy(Kt,Se,n,s))}for(ee=at,N[K]=at,Se=Ze,P[K]=Ze,K++,Le=Ze+v;Ee<0||Ee<ce&&u[Ee]<Ze;)Ee++;let un=Math.abs(u[Ee]-Le);for(;Ee+1<ce;){const Kt=Math.abs(u[Ee+1]-Le);if(Kt>=un)break;un=Kt,Ee++}}return K===0?null:(N.length=K,P.length=K,tS=e.breakOffsets,nS=e.breakOffsetsVisibleColumn,e.breakOffsets=N,e.breakOffsetsVisibleColumn=P,e.wrappedTextIndentLength=h,e)}function WA(r,e,t,n,i,s,o){const a=zd.applyInjectedText(e,t);let l,u;if(t&&t.length>0?(l=t.map(Ze=>Ze.text),u=t.map(Ze=>Ze.column-1)):(l=null,u=null),i===-1)return l?new wo([a.length],[],0,l,u):null;const h=a.length;if(h<=1)return l?new wo([a.length],[],0,l,u):null;const v=bD(a,n,i,s,o),N=i-v;let P=[],K=[],ee=0,Se=0,Le=0,ce=i,Ee=a.charCodeAt(0),ze=r.get(Ee),Qe=Dy(Ee,0,n,s),at=1;Zs(Ee)&&(Qe+=1,Ee=a.charCodeAt(1),ze=r.get(Ee),at++);for(let Ze=at;Ze<h;Ze++){const rt=Ze,St=a.charCodeAt(Ze);let un,Kt;Zs(St)?(Ze++,un=0,Kt=2):(un=r.get(St),Kt=Dy(St,Qe,n,s)),rS(Ee,ze,St,un)&&(Se=rt,Le=Qe),Qe+=Kt,Qe>ce&&((Se===0||Qe-Le>N)&&(Se=rt,Le=Qe-Kt),P[ee]=Se,K[ee]=Le,ee++,ce=Le+N,Se=0),Ee=St,ze=un}return ee===0&&(!t||t.length===0)?null:(P[ee]=h,K[ee]=Qe,new wo(P,K,v,l,u))}function Dy(r,e,t,n){return r===9?t-e%t:Ja(r)||r<32?n:1}function yD(r,e){return e-r%e}function rS(r,e,t,n){return t!==32&&(e===2||e===3&&n!==2||n===1||n===3&&e!==1)}function bD(r,e,t,n,i){let s=0;if(i!==0){const o=ka(r);if(o!==-1){for(let l=0;l<o;l++)s+=r.charCodeAt(l)===9?yD(s,e):1;const a=i===3?2:i===2?1:0;for(let l=0;l<a;l++)s+=yD(s,e);s+n>t&&(s=0)}}return s}var sS;const oS=(sS=window.trustedTypes)===null||sS===void 0?void 0:sS.createPolicy("domLineBreaksComputer",{createHTML:r=>r});class aS{static create(){return new aS}constructor(){}createLineBreaksComputer(e,t,n,i){t=t|0,n=+n;let s=[],o=[];return{addRequest:(a,l,u)=>{s.push(a),o.push(l)},finalize:()=>VA(s,e,t,n,i,o)}}}function VA(r,e,t,n,i,s){var o;function a(Qe){const at=s[Qe];if(at){const Ze=zd.applyInjectedText(r[Qe],at),rt=at.map(un=>un.text),St=at.map(un=>un.column-1);return new wo([Ze.length],[],0,rt,St)}else return null}if(n===-1){const Qe=[];for(let at=0,Ze=r.length;at<Ze;at++)Qe[at]=a(at);return Qe}const l=Math.round(n*e.typicalHalfwidthCharacterWidth);(i===2||i===3)&&(i=1);const u=document.createElement("div");ul.applyFontInfoSlow(u,e);const h=_h(1e4),v=[],N=[],P=[],K=[],ee=[];for(let Qe=0;Qe<r.length;Qe++){const at=zd.applyInjectedText(r[Qe],s[Qe]);let Ze=0,rt=0,St=l;if(i!==0)if(Ze=ka(at),Ze===-1)Ze=0;else{for(let Wn=0;Wn<Ze;Wn++)rt+=at.charCodeAt(Wn)===9?t-rt%t:1;const An=Math.ceil(e.spaceWidth*rt);An+e.typicalFullwidthCharacterWidth>l?(Ze=0,rt=0):St=l-An}const un=at.substr(Ze),Kt=HA(un,rt,t,St,h);v[Qe]=Ze,N[Qe]=rt,P[Qe]=un,K[Qe]=Kt[0],ee[Qe]=Kt[1]}const Se=h.build(),Le=(o=oS==null?void 0:oS.createHTML(Se))!==null&&o!==void 0?o:Se;u.innerHTML=Le,u.style.position="absolute",u.style.top="10000",u.style.wordWrap="break-word",document.body.appendChild(u);let ce=document.createRange();const Ee=Array.prototype.slice.call(u.children,0);let ze=[];for(let Qe=0;Qe<r.length;Qe++){const at=Ee[Qe],Ze=zA(ce,at,P[Qe],K[Qe]);if(Ze===null){ze[Qe]=a(Qe);continue}const rt=v[Qe],St=N[Qe],un=ee[Qe],Kt=[];for(let Fi=0,tr=Ze.length;Fi<tr;Fi++)Kt[Fi]=un[Ze[Fi]];if(rt!==0)for(let Fi=0,tr=Ze.length;Fi<tr;Fi++)Ze[Fi]+=rt;let An,Wn;const $i=s[Qe];$i?(An=$i.map(Fi=>Fi.text),Wn=$i.map(Fi=>Fi.column-1)):(An=null,Wn=null),ze[Qe]=new wo(Ze,Kt,St,An,Wn)}return document.body.removeChild(u),ze}function HA(r,e,t,n,i){i.appendASCIIString('<div style="width:'),i.appendASCIIString(String(n)),i.appendASCIIString('px;">');const s=r.length;let o=e,a=0,l=[],u=[],h=0<s?r.charCodeAt(0):0;i.appendASCIIString("<span>");for(let v=0;v<s;v++){v!==0&&v%16384==0&&i.appendASCIIString("</span><span>"),l[v]=a,u[v]=o;const N=h;h=v+1<s?r.charCodeAt(v+1):0;let P=1,K=1;switch(N){case 9:P=t-o%t,K=P;for(let ee=1;ee<=P;ee++)ee<P?i.write1(160):i.appendASCII(32);break;case 32:h===32?i.write1(160):i.appendASCII(32);break;case 60:i.appendASCIIString("&lt;");break;case 62:i.appendASCIIString("&gt;");break;case 38:i.appendASCIIString("&amp;");break;case 0:i.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:i.write1(65533);break;default:Ja(N)&&K++,N<32?i.write1(9216+N):i.write1(N)}a+=P,o+=K}return i.appendASCIIString("</span>"),l[r.length]=a,u[r.length]=o,i.appendASCIIString("</div>"),[l,u]}function zA(r,e,t,n){if(t.length<=1)return null;const i=Array.prototype.slice.call(e.children,0),s=[];try{lS(r,i,n,0,null,t.length-1,null,s)}catch(o){return console.log(o),null}return s.length===0?null:(s.push(t.length),s)}function lS(r,e,t,n,i,s,o,a){if(n===s||(i=i||uS(r,e,t[n],t[n+1]),o=o||uS(r,e,t[s],t[s+1]),Math.abs(i[0].top-o[0].top)<=.1))return;if(n+1===s){a.push(s);return}const l=n+(s-n)/2|0,u=uS(r,e,t[l],t[l+1]);lS(r,e,t,n,i,l,u,a),lS(r,e,t,l,u,s,o,a)}function uS(r,e,t,n){return r.setStart(e[t/16384|0].firstChild,t%16384),r.setEnd(e[n/16384|0].firstChild,n%16384),r.getClientRects()}var UA=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},pm=function(r,e){return function(t,n){e(t,n,r)}};let jA=0;class $A{constructor(e,t,n,i,s){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=i,this.listenersToRemove=s}dispose(){Vi(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}let Bw=class z1 extends Rn{constructor(e,t,n,i,s,o,a,l,u,h){super();this._onDidDispose=this._register(new $t),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new $t),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new $t),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new $t),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new $t),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new $t),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new $t),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new $t),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new $t),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new $t),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new $t),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new $t),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new wD),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new wD),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new $t),this.onWillType=this._onWillType.event,this._onDidType=this._register(new $t),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new $t),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new $t),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new $t),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new $t),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new $t),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new $t),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new $t),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new $t),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new $t),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new $t),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new $t),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new $t),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new $t),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new $t),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new $t),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new $t),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new $t),this.onDidChangeViewZones=this._onDidChangeViewZones.event;const v=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=v.overflowWidgetsDomNode,delete v.overflowWidgetsDomNode,this._id=++jA,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this.isSimpleWidget=n.isSimpleWidget||!1,this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(v,h)),this._register(this._configuration.onDidChange(P=>{this._onDidChangeConfiguration.fire(P);const K=this._configuration.options;if(P.hasChanged(128)){const ee=K.get(128);this._onDidLayoutChange.fire(ee)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=u,this._codeEditorService=s,this._commandService=o,this._themeService=l,this._register(new KA(this,this._contextKeyService)),this._register(new GA(this,this._contextKeyService)),this._instantiationService=i.createChild(new xy([ps,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new YA(e),this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())}),this._contentWidgets={},this._overlayWidgets={};let N;Array.isArray(n.contributions)?N=n.contributions:N=e0.getEditorContributions();for(const P of N){if(this._contributions[P.id]){En(new Error(`Cannot have two contributions with the same id ${P.id}`));continue}try{const K=this._instantiationService.createInstance(P.ctor,this);this._contributions[P.id]=K}catch(K){En(K)}}e0.getEditorActions().forEach(P=>{if(this._actions[P.id]){En(new Error(`Cannot have two actions with the same id ${P.id}`));return}const K=new pD(P.id,P.label,P.alias,xl(P.precondition),()=>this._instantiationService.invokeFunction(ee=>Promise.resolve(P.runEditorCommand(ee,this,null))),this._contextKeyService);this._actions[K.id]=K}),this._codeEditorService.addCodeEditor(this)}_createConfiguration(e,t){return new ul(this.isSimpleWidget,e,this._domElement,t)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return gd.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,n=e.length;t<n;t++){const i=e[t];this._contributions[i].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e)}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?Fr.getWordAtPosition(this._modelData.model,this._configuration.options.get(114),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){!this._modelData||this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const n=this.hasTextFocus(),i=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();const s={oldModelUrl:i?i.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(s),this._postDetachModelCleanup(i)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(let n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,t,n){const i=e.model.validatePosition({lineNumber:t,column:n}),s=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber)}getTopForLineNumber(e){return this._modelData?z1._getVerticalOffsetForPosition(this._modelData,e,1):-1}getTopForPosition(e,t){return this._modelData?z1._getVerticalOffsetForPosition(this._modelData,e,t):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map(t=>Mt.lift(t)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return Zr.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){if(!!this._modelData){if(!dn.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,i){if(!this._modelData)return;if(!Mt.isIRange(e))throw new Error("Invalid arguments");const s=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.viewModel.revealRange("api",n,o,t,i)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Mt(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,i){if(!dn.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new Mt(e.lineNumber,e.column,e.lineNumber,e.column),t,n,i)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){const t=oi.isISelection(e),n=Mt.isIRange(e);if(!t&&!n)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e);else if(n){const i={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(i)}}_setSelectionImpl(e){if(!this._modelData)return;const t=new oi(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections("api",[t])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,i){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Mt(e,1,t,1),n,!1,i)}revealRange(e,t=0,n=!1,i=!0){this._revealRange(e,n?1:0,i,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,i){if(!Mt.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(Mt.lift(e),t,n,i)}setSelections(e,t="api",n=0){if(!!this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let i=0,s=e.length;i<s;i++)if(!oi.isISelection(e[i]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(!!this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(!!this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){!this._modelData||this._modelData.viewModel.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const s of t){const o=this._contributions[s];typeof o.saveViewState=="function"&&(e[s]=o.saveViewState())}const n=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:n,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]);const i=t.contributionsState||{},s=Object.keys(this._contributions);for(let a=0,l=s.length;a<l;a++){const u=s[a],h=this._contributions[u];typeof h.restoreViewState=="function"&&h.restoreViewState(i[u])}const o=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(o)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push(this._actions[s])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const s=n;this._type(e,s.text||"");return}case"replacePreviousChar":{const s=n;this._compositionType(e,s.text||"",s.replaceCharCnt||0,0,0);return}case"compositionType":{const s=n;this._compositionType(e,s.text||"",s.replacePrevCharCnt||0,s.replaceNextCharCnt||0,s.positionDelta||0);return}case"paste":{const s=n;this._paste(e,s.text||"",s.pasteOnNewLine||!1,s.multicursorText||null,s.mode||null);return}case"cut":this._cut(e);return}const i=this.getAction(t);if(i){Promise.resolve(i.run()).then(void 0,En);return}!this._modelData||this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n)}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){!this._modelData||(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){!this._modelData||(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,i,s){!this._modelData||this._modelData.viewModel.compositionType(t,n,i,s,e)}_paste(e,t,n,i,s){if(!this._modelData||t.length===0)return;const o=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(t,n,i,e);const a=this._modelData.viewModel.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new Mt(o.lineNumber,o.column,a.lineNumber,a.column),mode:s})}_cut(e){!this._modelData||this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const i=e0.getEditorCommand(t);return i?(n=n||{},n.source=e,this._instantiationService.invokeFunction(s=>{Promise.resolve(i.runEditorCommand(s,this,n)).then(void 0,En)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(78)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(78)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(78))return!1;let i;return n?Array.isArray(n)?i=()=>n:i=n:i=()=>null,this._modelData.viewModel.executeEdits(e,t,i),!0}executeCommand(e,t){!this._modelData||this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){!this._modelData||this._modelData.viewModel.executeCommands(t,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,nn(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(128)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarMouseDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeReferenceElement(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,i=n.get(128),s=z1._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+i.glyphMarginWidth+i.lineNumbersWidth+i.decorationsWidth-this.getScrollLeft();return{top:s,left:o,height:n.get(56)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){ul.applyFontInfoSlow(e,this._configuration.options.get(40))}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageIdentifier().language),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setMaxLineNumber(e.getLineCount()),e.onBeforeAttached();const n=new RA(this._id,this._configuration,e,aS.create(),iS.create(this._configuration.options),o=>Hl(o));t.push(e.onDidChangeDecorations(o=>this._onDidChangeModelDecorations.fire(o))),t.push(e.onDidChangeLanguage(o=>{this._domElement.setAttribute("data-mode-id",e.getLanguageIdentifier().language),this._onDidChangeModelLanguage.fire(o)})),t.push(e.onDidChangeLanguageConfiguration(o=>this._onDidChangeModelLanguageConfiguration.fire(o))),t.push(e.onDidChangeContent(o=>this._onDidChangeModelContent.fire(o))),t.push(e.onDidChangeOptions(o=>this._onDidChangeModelOptions.fire(o))),t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(o=>{switch(o.kind){case 0:this._onDidContentSizeChange.fire(o);break;case 1:this._editorTextFocus.setValue(o.hasFocus);break;case 2:this._onDidScrollChange.fire(o);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidAttemptReadOnlyEdit.fire();break;case 5:{o.reachedMaxCursorCount&&this._notificationService.warn(w("cursors.maximum","The number of cursors has been limited to {0}.",C0.MAX_CURSOR_COUNT));const a=[];for(let h=0,v=o.selections.length;h<v;h++)a[h]=o.selections[h].getPosition();const l={position:a[0],secondaryPositions:a.slice(1),reason:o.reason,source:o.source};this._onDidChangeCursorPosition.fire(l);const u={selection:o.selections[0],secondarySelections:o.selections.slice(1),modelVersionId:o.modelVersionId,oldSelections:o.oldSelections,oldModelVersionId:o.oldModelVersionId,source:o.source,reason:o.reason};this._onDidChangeCursorSelection.fire(u);break}}}));const[i,s]=this._createView(n);if(s){this._domElement.appendChild(i.domNode.domNode);let o=Object.keys(this._contentWidgets);for(let a=0,l=o.length;a<l;a++){const u=o[a];i.addContentWidget(this._contentWidgets[u])}o=Object.keys(this._overlayWidgets);for(let a=0,l=o.length;a<l;a++){const u=o[a];i.addOverlayWidget(this._overlayWidgets[u])}i.render(!1,!0),i.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new $A(e,n,i,s,t)}_createView(e){let t;this.isSimpleWidget?t={paste:(s,o,a,l)=>{this._paste("keyboard",s,o,a,l)},type:s=>{this._type("keyboard",s)},compositionType:(s,o,a,l)=>{this._compositionType("keyboard",s,o,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(s,o,a,l)=>{const u={text:s,pasteOnNewLine:o,multicursorText:a,mode:l};this._commandService.executeCommand("paste",u)},type:s=>{const o={text:s};this._commandService.executeCommand("type",o)},compositionType:(s,o,a,l)=>{if(a||l){const u={text:s,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",u)}else{const u={text:s,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",u)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new Cw(e.coordinatesConverter);return n.onKeyDown=s=>this._onKeyDown.fire(s),n.onKeyUp=s=>this._onKeyUp.fire(s),n.onContextMenu=s=>this._onContextMenu.fire(s),n.onMouseMove=s=>this._onMouseMove.fire(s),n.onMouseLeave=s=>this._onMouseLeave.fire(s),n.onMouseDown=s=>this._onMouseDown.fire(s),n.onMouseUp=s=>this._onMouseUp.fire(s),n.onMouseDrag=s=>this._onMouseDrag.fire(s),n.onMouseDrop=s=>this._onMouseDrop.fire(s),n.onMouseDropCanceled=s=>this._onMouseDropCanceled.fire(s),n.onMouseWheel=s=>this._onMouseWheel.fire(s),[new tA(t,this._configuration,this._themeService,e,n,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}};Bw=UA([pm(3,Dn),pm(4,ht),pm(5,po),pm(6,ps),pm(7,Zo),pm(8,Vc),pm(9,Ru)],Bw);class wD extends Rn{constructor(){super();this._onDidChangeToTrue=this._register(new $t),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new $t),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class KA extends Rn{constructor(e,t){super();this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=di.editorSimpleInput.bindTo(t),this._editorFocus=di.focus.bindTo(t),this._textInputFocus=di.textInputFocus.bindTo(t),this._editorTextFocus=di.editorTextFocus.bindTo(t),this._editorTabMovesFocus=di.tabMovesFocus.bindTo(t),this._editorReadonly=di.readOnly.bindTo(t),this._inDiffEditor=di.inDiffEditor.bindTo(t),this._editorColumnSelection=di.columnSelection.bindTo(t),this._hasMultipleSelections=di.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=di.hasNonEmptySelection.bindTo(t),this._canUndo=di.canUndo.bindTo(t),this._canRedo=di.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(127)),this._editorReadonly.set(e.get(78)),this._inDiffEditor.set(e.get(51)),this._editorColumnSelection.set(e.get(16))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}class GA extends Rn{constructor(e,t){super();this._editor=e,this._contextKeyService=t,this._langId=di.languageId.bindTo(t),this._hasCompletionItemProvider=di.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=di.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=di.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=di.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=di.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=di.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=di.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=di.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=di.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=di.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=di.hasReferenceProvider.bindTo(t),this._hasRenameProvider=di.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=di.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=di.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=di.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=di.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=di.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=di.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=di.isInWalkThroughSnippet.bindTo(t);const n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(Pf.onDidChange(n)),this._register(wp.onDidChange(n)),this._register(yp.onDidChange(n)),this._register(pp.onDidChange(n)),this._register(mp.onDidChange(n)),this._register(vp.onDidChange(n)),this._register(_p.onDidChange(n)),this._register(mh.onDidChange(n)),this._register(gp.onDidChange(n)),this._register(fp.onDidChange(n)),this._register(ph.onDidChange(n)),this._register(hp.onDidChange(n)),this._register(_d.onDidChange(n)),this._register(Lu.onDidChange(n)),this._register(dp.onDidChange(n)),this._register(bp.onDidChange(n)),n()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageIdentifier().language),this._hasCompletionItemProvider.set(Pf.has(e)),this._hasCodeActionsProvider.set(wp.has(e)),this._hasCodeLensProvider.set(yp.has(e)),this._hasDefinitionProvider.set(pp.has(e)),this._hasDeclarationProvider.set(mp.has(e)),this._hasImplementationProvider.set(vp.has(e)),this._hasTypeDefinitionProvider.set(_p.has(e)),this._hasHoverProvider.set(mh.has(e)),this._hasDocumentHighlightProvider.set(gp.has(e)),this._hasDocumentSymbolProvider.set(fp.has(e)),this._hasReferenceProvider.set(ph.has(e)),this._hasRenameProvider.set(hp.has(e)),this._hasSignatureHelpProvider.set(dp.has(e)),this._hasInlayHintsProvider.set(bp.has(e)),this._hasDocumentFormattingProvider.set(_d.has(e)||Lu.has(e)),this._hasDocumentSelectionFormattingProvider.set(Lu.has(e)),this._hasMultipleDocumentFormattingProvider.set(_d.all(e).length+Lu.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(Lu.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===Ar.walkThroughSnippet)})}}class YA extends Rn{constructor(e){super();this._onChange=this._register(new $t),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(Os(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}const ZA=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),XA=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function cS(r){return ZA+encodeURIComponent(r.toString())+XA}const qA=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),QA=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function JA(r){return qA+encodeURIComponent(r.toString())+QA}gc((r,e)=>{const t=r.getColor(AM);t&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);const n=r.getColor(hw);n&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${cS(n)}") repeat-x bottom left; }`);const i=r.getColor(kM);i&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${i}; }`);const s=r.getColor(xC);s&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${s}; }`);const o=r.getColor(vg);o&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${cS(o)}") repeat-x bottom left; }`);const a=r.getColor(RM);a&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const l=r.getColor(wx);l&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${l}; }`);const u=r.getColor(g0);u&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${cS(u)}") repeat-x bottom left; }`);const h=r.getColor(PM);h&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${h}; }`);const v=r.getColor(BM);v&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${v}; }`);const N=r.getColor(FM);N&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${JA(N)}") no-repeat bottom left; }`);const P=r.getColor(UO);P&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${P.rgba.a}; }`);const K=r.getColor(zO);K&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${K}; }`);const ee=r.getColor(dy)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${ee}}`)});class ss{constructor(e,t,n){const i=s=>this.emitter.fire(s);this.emitter=new $t({onFirstListenerAdd:()=>e.addEventListener(t,i,n),onLastListenerRemove:()=>e.removeEventListener(t,i,n)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}function CD(r){return r.preventDefault(),r.stopPropagation(),r}var S0=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};let eR=!1;var SD;(function(r){r.North="north",r.South="south",r.East="east",r.West="west"})(SD||(SD={}));let tR=4;const nR=new $t;let iR=300;const rR=new $t;class hS{constructor(){this.disposables=new gi}get onPointerMove(){return this.disposables.add(new ss(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new ss(window,"mouseup")).event}dispose(){this.disposables.dispose()}}S0([Xs],hS.prototype,"onPointerMove",null),S0([Xs],hS.prototype,"onPointerUp",null);class dS{constructor(e){this.el=e,this.disposables=new gi}get onPointerMove(){return this.disposables.add(new ss(this.el,ms.Change)).event}get onPointerUp(){return this.disposables.add(new ss(this.el,ms.End)).event}dispose(){this.disposables.dispose()}}S0([Xs],dS.prototype,"onPointerMove",null),S0([Xs],dS.prototype,"onPointerUp",null);class Ww{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}S0([Xs],Ww.prototype,"onPointerMove",null),S0([Xs],Ww.prototype,"onPointerUp",null);class Pu extends Rn{constructor(e,t,n){super();this.hoverDelay=iR,this.hoverDelayer=this._register(new Ys(this.hoverDelay)),this._state=3,this._onDidEnablementChange=this._register(new $t),this.onDidEnablementChange=this._onDidEnablementChange.event,this._onDidStart=this._register(new $t),this.onDidStart=this._onDidStart.event,this._onDidChange=this._register(new $t),this.onDidChange=this._onDidChange.event,this._onDidReset=this._register(new $t),this.onDidReset=this._onDidReset.event,this._onDidEnd=this._register(new $t),this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.orthogonalStartSashDisposables=this._register(new gi),this.orthogonalStartDragHandleDisposables=this._register(new gi),this.orthogonalEndSashDisposables=this._register(new gi),this.orthogonalEndDragHandleDisposables=this._register(new gi),this.el=mi(e,vi(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),ae&&this.el.classList.add("mac");const i=this._register(new ss(this.el,"mousedown")).event;this._register(i(v=>this.onPointerStart(v,new hS),this));const s=this._register(new ss(this.el,"dblclick")).event;this._register(s(this.onPointerDoublePress,this));const o=this._register(new ss(this.el,"mouseenter")).event;this._register(o(()=>Pu.onMouseEnter(this)));const a=this._register(new ss(this.el,"mouseleave")).event;this._register(a(()=>Pu.onMouseLeave(this))),this._register(es.addTarget(this.el));const l=ei.map(this._register(new ss(this.el,ms.Start)).event,v=>{var N;return Object.assign(Object.assign({},v),{target:(N=v.initialTarget)!==null&&N!==void 0?N:null})});this._register(l(v=>this.onPointerStart(v,new dS(this.el)),this));const u=this._register(new ss(this.el,ms.Tap)).event,h=ei.map(ei.filter(ei.debounce(u,(v,N)=>{var P;return{event:N,count:((P=v==null?void 0:v.count)!==null&&P!==void 0?P:0)+1}},250),({count:v})=>v===2),({event:v})=>{var N;return Object.assign(Object.assign({},v),{target:(N=v.initialTarget)!==null&&N!==void 0?N:null})});this._register(h(this.onPointerDoublePress,this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=tR,this._register(nR.event(v=>{this.size=v,this.layout()}))),this._register(rR.event(v=>this.hoverDelay=v)),this.hidden=!1,this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",eR),this.layout()}get state(){return this._state}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this._onDidEnablementChange.fire(e))}get orthogonalStartSash(){return this._orthogonalStartSash}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=mi(this.el,vi(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Qi(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new ss(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Pu.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new ss(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Pu.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange(t,this)),t(e.state)}this._orthogonalStartSash=e}get orthogonalEndSash(){return this._orthogonalEndSash}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=mi(this.el,vi(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Qi(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new ss(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Pu.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new ss(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Pu.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){Gr.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const K=this.getOrthogonalSash(e);K&&(n=!0,e.__orthogonalSashEvent=!0,K.onPointerStart(e,new Ww(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new Ww(t))),!this.state)return;const i=[...bl("iframe"),...bl("webview")];for(const K of i)K.style.pointerEvents="none";const s=e.pageX,o=e.pageY,a=e.altKey,l={startX:s,currentX:s,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const u=Mo(this.el),h=()=>{let K="";n?K="all-scroll":this.orientation===1?this.state===1?K="s-resize":this.state===2?K="n-resize":K=ae?"row-resize":"ns-resize":this.state===1?K="e-resize":this.state===2?K="w-resize":K=ae?"col-resize":"ew-resize",u.textContent=`* { cursor: ${K} !important; }`},v=new gi;h(),n||this.onDidEnablementChange(h,null,v);const N=K=>{Gr.stop(K,!1);const ee={startX:s,currentX:K.pageX,startY:o,currentY:K.pageY,altKey:a};this._onDidChange.fire(ee)},P=K=>{Gr.stop(K,!1),this.el.removeChild(u),this.el.classList.remove("active"),this._onDidEnd.fire(),v.dispose();for(const ee of i)ee.style.pointerEvents="auto"};t.onPointerMove(N,null,v),t.onPointerUp(P,null,v),v.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Pu.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Pu.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Pu.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}hide(){this.hidden=!0,this.el.style.display="none",this.el.setAttribute("aria-hidden","true")}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}class wg{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}const ED=[];function LD(r,e,t){e instanceof wg||(e=new wg(e,[],t)),ED.push([r,e])}function sR(){return ED}const fS=Te("IEditorCancelService"),xD=new nr("cancellableOperation",!1,w("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));LD(fS,class{constructor(){this._tokens=new WeakMap}add(r,e){let t=this._tokens.get(r);t||(t=r.invokeWithinContext(i=>{const s=xD.bindTo(i.get(ps)),o=new Lr;return{key:s,tokens:o}}),this._tokens.set(r,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(r){const e=this._tokens.get(r);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);class PB extends null{constructor(e,t){super(t);this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(fS).add(e,this))}dispose(){this._unregister(),super.dispose()}}Yi(new class extends Jv{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:xD})}runEditorCommand(r,e){r.get(fS).cancel(e)}});class gS{constructor(e,t){if(this.flags=t,(this.flags&1)!=0){const n=e.getModel();this.modelVersionId=n?strings.format("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;(this.flags&4)!=0?this.position=e.getPosition():this.position=null,(this.flags&2)!=0?this.selection=e.getSelection():this.selection=null,(this.flags&8)!=0?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof gS))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new gS(e,this.flags))}}class FB extends null{constructor(e,t,n,i){super(e,i);this._listener=new DisposableStore,t&4&&this._listener.add(e.onDidChangeCursorPosition(s=>{(!n||!Range.containsPosition(n,s.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(s=>{(!n||!Range.containsRange(n,s.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(s=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(s=>this.cancel())),this._listener.add(e.onDidChangeModelContent(s=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class BB extends null{constructor(e,t){super(t);this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}class pS{constructor(e,t,n){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=n}static capture(e){let t=null,n=0;if(e.getScrollTop()!==0){const i=e.getVisibleRanges();if(i.length>0){t=i[0].getStartPosition();const s=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-s}}return new pS(t,n,e.getPosition())}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}}const DD={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:vc.text,TERMINALS:"Terminals"};class oR{constructor(e){this.data=e}update(){}getData(){return this.data}}const Gd={CurrentDragAndDropData:void 0};class Iy extends Rn{constructor(e,t,n={}){super();this.options=n,this._context=e||this,this._action=t,t instanceof Mh&&this._register(t.onDidChange(i=>{!this.element||this.handleActionChangeEvent(i)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new X1)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(es.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,ri&&this._register(yn(e,hi.DRAG_START,i=>{var s;return(s=i.dataTransfer)===null||s===void 0?void 0:s.setData(DD.TEXT,this._action.label)}))),this._register(yn(t,ms.Tap,i=>this.onClick(i,!0))),this._register(yn(t,hi.MOUSE_DOWN,i=>{n||Gr.stop(i,!0),this._action.enabled&&i.button===0&&t.classList.add("active")})),ae&&this._register(yn(t,hi.CONTEXT_MENU,i=>{i.button===0&&i.ctrlKey===!0&&this.onClick(i)})),this._register(yn(t,hi.CLICK,i=>{Gr.stop(i,!0),this.options&&this.options.isMenu||De(()=>this.onClick(i))})),this._register(yn(t,hi.DBLCLICK,i=>{Gr.stop(i,!0)})),[hi.MOUSE_UP,hi.MOUSE_OUT].forEach(i=>{this._register(yn(t,i,s=>{Gr.stop(s),t.classList.remove("active")}))})}onClick(e,t=!1){var n;Gr.stop(e,!0);const i=Ca(this._context)?((n=this.options)===null||n===void 0?void 0:n.useEventAsContext)?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}class ID extends Iy{constructor(e,t,n={}){super(e,t,n);this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=mi(this.element,vi("a.action-label"))),this.label&&(this._action.id===Zp.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(mi(this.element,vi("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=w({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.label&&(this.label.title=e)}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label&&this.label.classList.remove("codicon")}updateEnabled(){this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element&&this.element.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element&&this.element.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}var aR=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class E0 extends Rn{constructor(e,t={}){var n,i,s,o,a,l;super();this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new $t),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new $t({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new $t),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new $t),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=(n=t.context)!==null&&n!==void 0?n:null,this._orientation=(i=this.options.orientation)!==null&&i!==void 0?i:0,this._triggerKeys={keyDown:(o=(s=this.options.triggerKeys)===null||s===void 0?void 0:s.keyDown)!==null&&o!==void 0?o:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new X1,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(v=>this._onDidRun.fire(v))),this._register(this._actionRunner.onBeforeRun(v=>this._onBeforeRun.fire(v))),this._actionIds=[],this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let u,h;switch(this._orientation){case 0:u=[15],h=[17];break;case 1:u=[16],h=[18],this.domNode.className+=" vertical";break}this._register(yn(this.domNode,hi.KEY_DOWN,v=>{const N=new jr(v);let P=!0;const K=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;u&&(N.equals(u[0])||N.equals(u[1]))?P=this.focusPrevious():h&&(N.equals(h[0])||N.equals(h[1]))?P=this.focusNext():N.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():N.equals(14)?P=this.focusFirst():N.equals(13)?P=this.focusLast():N.equals(2)&&K instanceof Iy&&K.trapsArrowNavigation?P=this.focusNext():this.isTriggerKeyEvent(N)?this._triggerKeys.keyDown?this.doTrigger(N):this.triggerKeyDown=!0:P=!1,P&&(N.preventDefault(),N.stopPropagation())})),this._register(yn(this.domNode,hi.KEY_UP,v=>{const N=new jr(v);this.isTriggerKeyEvent(N)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(N)),N.preventDefault(),N.stopPropagation()):(N.equals(2)||N.equals(1024|2))&&this.updateFocusedItem()})),this.focusTracker=this._register(Os(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(_l()===this.domNode||!io(_l(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(io(_l(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){const n=Array.isArray(e)?e:[e];let i=Fa(t.index)?t.index:null;n.forEach(s=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation"),this.options.allowContextMenu||this._register(yn(o,hi.CONTEXT_MENU,l=>{Gr.stop(l,!0)}));let a;this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(s)),a||(a=new ID(this.context,s,t)),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof Iy&&this.viewItems.length===0&&a.setFocusable(!0),i===null||i<0||i>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a),this._actionIds.push(s.id)):(this.actionsList.insertBefore(o,this.actionsList.children[i]),this.viewItems.splice(i,0,a),this._actionIds.splice(i,0,s.id),i++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem)}clear(){Vi(this.viewItems),this.viewItems=[],this._actionIds=[],co(this.actionsList)}length(){return this.viewItems.length}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem=="undefined"){const i=this.viewItems.findIndex(s=>s.isEnabled());this.focusedItem=i===-1?void 0:i,this.updateFocus()}else n!==void 0&&(this.focusedItem=n),this.updateFocus()}focusFirst(){return this.focusedItem=this.length()>1?1:0,this.focusPrevious()}focusLast(){return this.focusedItem=this.length()<2?0:this.length()-2,this.focusNext()}focusNext(){if(typeof this.focusedItem=="undefined")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const e=this.focusedItem;let t;do{if(this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=e,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,t=this.viewItems[this.focusedItem]}while(this.focusedItem!==e&&this.options.focusOnlyEnabledItems&&!t.isEnabled());return this.updateFocus(),!0}focusPrevious(){if(typeof this.focusedItem=="undefined")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const e=this.focusedItem;let t;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(this.options.preventLoopNavigation)return this.focusedItem=e,!1;this.focusedItem=this.viewItems.length-1}t=this.viewItems[this.focusedItem]}while(this.focusedItem!==e&&this.options.focusOnlyEnabledItems&&!t.isEnabled());return this.updateFocus(!0),!0}updateFocus(e,t){typeof this.focusedItem=="undefined"&&this.actionsList.focus({preventScroll:t});for(let n=0;n<this.viewItems.length;n++){const i=this.viewItems[n],s=i;if(n===this.focusedItem){let o=!0;Xu(s.focus)||(o=!1),this.options.focusOnlyEnabledItems&&Xu(i.isEnabled)&&!i.isEnabled()&&(o=!1),o?s.focus(e):this.actionsList.focus({preventScroll:t})}else Xu(s.blur)&&s.blur()}}doTrigger(e){if(typeof this.focusedItem=="undefined")return;const t=this.viewItems[this.focusedItem];if(t instanceof Iy){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return aR(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){Vi(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}const lR={IconContribution:"base.contributions.icons"};class uR{constructor(){this._onDidChange=new $t,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:w("iconDefintion.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:w("iconDefintion.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Ko.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,i){const s=this.iconsById[e];if(s){if(n&&!s.description){s.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return s}let o={id:e,description:n,defaults:t,deprecationMessage:i};this.iconsById[e]=o;let a={$ref:"#/definitions/icons"};return i&&(a.deprecationMessage=i),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconFont(e){return this.iconFontsById[e]}toString(){const e=(s,o)=>s.id.localeCompare(o.id),t=s=>{for(;fc.isThemeIcon(s.defaults);)s=this.iconsById[s.defaults.id];return`codicon codicon-${s?s.id:""}`};let n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const i=Object.keys(this.iconsById).map(s=>this.iconsById[s]);for(const s of i.filter(o=>!!o.description).sort(e))n.push(`|<i class="${t(s)}"></i>|${s.id}|${fc.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const s of i.filter(o=>!fc.isThemeIcon(o.defaults)).sort(e))n.push(`|<i class="${t(s)}"></i>|${s.id}|`);return n.join(`
`)}}const mm=new uR;k.add(lR.IconContribution,mm);function L0(r,e,t,n){return mm.registerIcon(r,e,t,n)}function cR(){return mm}function hR(){for(const r of kf.all)mm.registerIcon(r.id,r.definition,r.description);kf.onDidRegister(r=>mm.registerIcon(r.id,r.definition,r.description))}hR();const ND="vscode://schemas/icons";let TD=k.as(X.JSONContribution);TD.registerSchema(ND,mm.getIconSchema());const MD=new ys(()=>TD.notifySchemaChanged(ND),200);mm.onDidChange(()=>{MD.isScheduled()||MD.schedule()});const WB=L0("widget-close",us.close,w("widgetClose","Icon for the close action in widgets."));var dR=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},mS;const Vw=3;class Ny{constructor(e,t,n,i){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=i}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}class vS{constructor(e){this.entries=e}}const fR=L0("diff-review-insert",us.add,w("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),gR=L0("diff-review-remove",us.remove,w("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),pR=L0("diff-review-close",us.close,w("diffReviewCloseIcon","Icon for 'Close' in diff review."));class Yd extends Rn{constructor(e){super();this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=Sr(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=Sr(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new E0(this.actionBarContainer.domNode)),this._actionBar.push(new Mh("diffreview.close",w("label.close","Close"),"close-diff-review "+fc.asClassName(pR),!0,()=>dR(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=Sr(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=Sr(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new iD(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{!this._isVisible||(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{!this._isVisible||this._render()})),this._register(eo(this.domNode.domNode,"click",t=>{t.preventDefault();let n=Ag(t.target,"diff-review-row");n&&this._goToRow(n)})),this._register(eo(this.domNode.domNode,"keydown",t=>{(t.equals(18)||t.equals(2048|18)||t.equals(512|18))&&(t.preventDefault(),this._goToRow(this._getNextRow())),(t.equals(16)||t.equals(2048|16)||t.equals(512|16))&&(t.preventDefault(),this._goToRow(this._getPrevRow())),(t.equals(9)||t.equals(2048|9)||t.equals(512|9)||t.equals(1024|9))&&(t.preventDefault(),this.hide()),(t.equals(10)||t.equals(3))&&(t.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let i=0,s=this._diffs.length;i<s;i++)if(this._diffs[i]===this._currentDiff){n=i;break}e=this._diffs.length+n-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new dn(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let i=0,s=this._diffs.length;i<s;i++)if(this._diffs[i]===this._currentDiff){n=i;break}e=n+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new dn(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1,t=this._getCurrentFocusedRow();if(t){let n=parseInt(t.getAttribute("data-line"),10);isNaN(n)||(e=n)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new dn(e,1)),this._diffEditor.revealPosition(new dn(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){let e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){let e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){let t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,n){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(n),this._content.setHeight(n),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return!t||!n?[]:Yd._mergeAdjacent(e,t.getLineCount(),n.getLineCount())}static _mergeAdjacent(e,t,n){if(!e||e.length===0)return[];let i=[],s=0;for(let u=0,h=e.length;u<h;u++){const v=e[u],N=v.originalStartLineNumber,P=v.originalEndLineNumber,K=v.modifiedStartLineNumber,ee=v.modifiedEndLineNumber;let Se=[],Le=0;{const ce=P===0?N:N-1,Ee=ee===0?K:K-1;let ze=1,Qe=1;if(u>0){const rt=e[u-1];rt.originalEndLineNumber===0?ze=rt.originalStartLineNumber+1:ze=rt.originalEndLineNumber+1,rt.modifiedEndLineNumber===0?Qe=rt.modifiedStartLineNumber+1:Qe=rt.modifiedEndLineNumber+1}let at=ce-Vw+1,Ze=Ee-Vw+1;if(at<ze){const rt=ze-at;at=at+rt,Ze=Ze+rt}if(Ze<Qe){const rt=Qe-Ze;at=at+rt,Ze=Ze+rt}Se[Le++]=new Ny(at,ce,Ze,Ee)}P!==0&&(Se[Le++]=new Ny(N,P,0,0)),ee!==0&&(Se[Le++]=new Ny(0,0,K,ee));{const ce=P===0?N+1:P+1,Ee=ee===0?K+1:ee+1;let ze=t,Qe=n;if(u+1<h){const rt=e[u+1];rt.originalEndLineNumber===0?ze=rt.originalStartLineNumber:ze=rt.originalStartLineNumber-1,rt.modifiedEndLineNumber===0?Qe=rt.modifiedStartLineNumber:Qe=rt.modifiedStartLineNumber-1}let at=ce+Vw-1,Ze=Ee+Vw-1;if(at>ze){const rt=ze-at;at=at+rt,Ze=Ze+rt}if(Ze>Qe){const rt=Qe-Ze;at=at+rt,Ze=Ze+rt}Se[Le++]=new Ny(ce,at,Ee,Ze)}i[s++]=new vS(Se)}let o=i[0].entries,a=[],l=0;for(let u=1,h=i.length;u<h;u++){const v=i[u].entries,N=o[o.length-1],P=v[0];if(N.getType()===0&&P.getType()===0&&P.originalLineStart<=N.originalLineEnd){o[o.length-1]=new Ny(N.originalLineStart,P.originalLineEnd,N.modifiedLineStart,P.modifiedLineEnd),o=o.concat(v.slice(1));continue}a[l++]=new vS(o),o=v}return a[l++]=new vS(o),a}_findDiffIndex(e){const t=e.lineNumber;for(let n=0,i=this._diffs.length;n<i;n++){const s=this._diffs[n].entries,o=s[s.length-1].modifiedLineEnd;if(t<=o)return n}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),i=this._diffEditor.getModifiedEditor().getModel(),s=n.getOptions(),o=i.getOptions();if(!this._isVisible||!n||!i){co(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const l=this._diffs[a].entries;let u=document.createElement("div");u.className="diff-review-table",u.setAttribute("role","list"),u.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),ul.applyFontInfoSlow(u,t.get(40));let h=0,v=0,N=0,P=0;for(let Ze=0,rt=l.length;Ze<rt;Ze++){const St=l[Ze],un=St.originalLineStart,Kt=St.originalLineEnd,An=St.modifiedLineStart,Wn=St.modifiedLineEnd;un!==0&&(h===0||un<h)&&(h=un),Kt!==0&&(v===0||Kt>v)&&(v=Kt),An!==0&&(N===0||An<N)&&(N=An),Wn!==0&&(P===0||Wn>P)&&(P=Wn)}let K=document.createElement("div");K.className="diff-review-row";let ee=document.createElement("div");ee.className="diff-review-cell diff-review-summary";const Se=v-h+1,Le=P-N+1;ee.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${h},${Se} +${N},${Le} @@`)),K.setAttribute("data-line",String(N));const ce=Ze=>Ze===0?w("no_lines_changed","no lines changed"):Ze===1?w("one_line_changed","1 line changed"):w("more_lines_changed","{0} lines changed",Ze),Ee=ce(Se),ze=ce(Le);K.setAttribute("aria-label",w({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,h,Ee,N,ze)),K.appendChild(ee),K.setAttribute("role","listitem"),u.appendChild(K);const Qe=t.get(56);let at=N;for(let Ze=0,rt=l.length;Ze<rt;Ze++){const St=l[Ze];Yd._renderSection(u,St,at,Qe,this._width,e,n,s,t,i,o),St.modifiedLineStart!==0&&(at=St.modifiedLineEnd)}co(this._content.domNode),this._content.domNode.appendChild(u),this.scrollbar.scanDomNode()}static _renderSection(e,t,n,i,s,o,a,l,u,h,v){const N=t.getType();let P="diff-review-row",K="";const ee="diff-review-spacer";let Se=null;switch(N){case 1:P="diff-review-row line-insert",K=" char-insert",Se=fR;break;case 2:P="diff-review-row line-delete",K=" char-delete",Se=gR;break}const Le=t.originalLineStart,ce=t.originalLineEnd,Ee=t.modifiedLineStart,ze=t.modifiedLineEnd,Qe=Math.max(ze-Ee,ce-Le),at=o.get(128),Ze=at.glyphMarginWidth+at.lineNumbersWidth,rt=u.get(128),St=10+rt.glyphMarginWidth+rt.lineNumbersWidth;for(let un=0;un<=Qe;un++){const Kt=Le===0?0:Le+un,An=Ee===0?0:Ee+un,Wn=document.createElement("div");Wn.style.minWidth=s+"px",Wn.className=P,Wn.setAttribute("role","listitem"),An!==0&&(n=An),Wn.setAttribute("data-line",String(n));let $i=document.createElement("div");$i.className="diff-review-cell",$i.style.height=`${i}px`,Wn.appendChild($i);const Fi=document.createElement("span");Fi.style.width=Ze+"px",Fi.style.minWidth=Ze+"px",Fi.className="diff-review-line-number"+K,Kt!==0?Fi.appendChild(document.createTextNode(String(Kt))):Fi.innerText="\xA0",$i.appendChild(Fi);const tr=document.createElement("span");tr.style.width=St+"px",tr.style.minWidth=St+"px",tr.style.paddingRight="10px",tr.className="diff-review-line-number"+K,An!==0?tr.appendChild(document.createTextNode(String(An))):tr.innerText="\xA0",$i.appendChild(tr);const yr=document.createElement("span");if(yr.className=ee,Se){const hs=document.createElement("span");hs.className=fc.asClassName(Se),hs.innerText="\xA0\xA0",yr.appendChild(hs)}else yr.innerText="\xA0\xA0";$i.appendChild(yr);let gr;if(An!==0){let hs=this._renderLine(h,u,v.tabSize,An);Yd._ttPolicy&&(hs=Yd._ttPolicy.createHTML(hs)),$i.insertAdjacentHTML("beforeend",hs),gr=h.getLineContent(An)}else{let hs=this._renderLine(a,o,l.tabSize,Kt);Yd._ttPolicy&&(hs=Yd._ttPolicy.createHTML(hs)),$i.insertAdjacentHTML("beforeend",hs),gr=a.getLineContent(Kt)}gr.length===0&&(gr=w("blankLine","blank"));let Mr="";switch(N){case 0:Kt===An?Mr=w({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",gr,Kt):Mr=w("equalLine","{0} original line {1} modified line {2}",gr,Kt,An);break;case 1:Mr=w("insertLine","+ {0} modified line {1}",gr,An);break;case 2:Mr=w("deleteLine","- {0} original line {1}",gr,Kt);break}Wn.setAttribute("aria-label",Mr),e.appendChild(Wn)}}static _renderLine(e,t,n,i){const s=e.getLineContent(i),o=t.get(40),a=yo.createEmpty(s),l=Ta.isBasicASCII(s,e.mightContainNonBasicASCII()),u=Ta.containsRTL(s,l,e.mightContainRTL());return Ih(new Dh(o.isMonospace&&!t.get(27),o.canUseHalfwidthRightwardsArrow,s,!1,l,u,0,a,[],n,0,o.spaceWidth,o.middotWidth,o.wsmiddotWidth,t.get(103),t.get(86),t.get(80),t.get(41)!==Ce.OFF,null)).html}}Yd._ttPolicy=(mS=window.trustedTypes)===null||mS===void 0?void 0:mS.createPolicy("diffReview",{createHTML:r=>r}),gc((r,e)=>{const t=r.getColor(Vx);t&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);const n=r.getColor(aw);n&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${n} 0 -6px 6px -6px inset; }`)});class mR extends zb{constructor(){super({id:"editor.action.diffReview.next",label:w("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:ha.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const n=OD(e);n&&n.diffReviewNext()}}class vR extends zb{constructor(){super({id:"editor.action.diffReview.prev",label:w("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:ha.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1024|65,weight:100}})}run(e,t){const n=OD(e);n&&n.diffReviewPrev()}}function OD(r){const e=r.get(ht),t=e.listDiffEditors(),n=e.getActiveCodeEditor();if(!n)return null;for(let i=0,s=t.length;i<s;i++){const o=t[i];if(o.getModifiedEditor().getId()===n.getId()||o.getOriginalEditor().getId()===n.getId())return o}return null}NL(mR),NL(vR);const x0=Te("contextViewService"),Hw=Te("contextMenuService");var _S=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class _R extends Rn{constructor(e,t,n,i,s,o){super();this._viewZoneId=e,this._marginDomNode=t,this.editor=n,this.diff=i,this._contextMenuService=s,this._clipboardService=o,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=us.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=n.getOption(56),l=n.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const u=[];u.push(new Mh("diff.clipboard.copyDeletedContent",i.originalEndLineNumber>i.modifiedStartLineNumber?w("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):w("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"),void 0,!0,()=>_S(this,void 0,void 0,function*(){const K=new Mt(i.originalStartLineNumber,1,i.originalEndLineNumber+1,1),ee=i.originalModel.getValueInRange(K);yield this._clipboardService.writeText(ee)})));let h=0,v;i.originalEndLineNumber>i.modifiedStartLineNumber&&(v=new Mh("diff.clipboard.copyDeletedLineContent",w("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalStartLineNumber),void 0,!0,()=>_S(this,void 0,void 0,function*(){const K=i.originalModel.getLineContent(i.originalStartLineNumber+h);yield this._clipboardService.writeText(K)})),u.push(v)),n.getOption(78)||u.push(new Mh("diff.inline.revertChange",w("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>_S(this,void 0,void 0,function*(){const K=new Mt(i.originalStartLineNumber,1,i.originalEndLineNumber,i.originalModel.getLineMaxColumn(i.originalEndLineNumber)),ee=i.originalModel.getValueInRange(K);if(i.modifiedEndLineNumber===0){const Se=n.getModel().getLineMaxColumn(i.modifiedStartLineNumber);n.executeEdits("diffEditor",[{range:new Mt(i.modifiedStartLineNumber,Se,i.modifiedStartLineNumber,Se),text:l+ee}])}else{const Se=n.getModel().getLineMaxColumn(i.modifiedEndLineNumber);n.executeEdits("diffEditor",[{range:new Mt(i.modifiedStartLineNumber,1,i.modifiedEndLineNumber,Se),text:ee}])}})));const P=(K,ee)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:K,y:ee}),getActions:()=>(v&&(v.label=w("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalStartLineNumber+h)),u),autoSelectFirstItem:!0})};this._register(eo(this._diffActions,"mousedown",K=>{const{top:ee,height:Se}=vl(this._diffActions);let Le=Math.floor(a/3);K.preventDefault(),P(K.posx,ee+Se+Le)})),this._register(n.onMouseMove(K=>{K.target.type===8||K.target.type===5?K.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,h=this._updateLightBulbPosition(this._marginDomNode,K.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(n.onMouseDown(K=>{!K.event.rightButton||(K.target.type===8||K.target.type===5)&&K.target.detail.viewZoneId===this._viewZoneId&&(K.event.preventDefault(),h=this._updateLightBulbPosition(this._marginDomNode,K.event.browserEvent.y,a),P(K.event.posx,K.event.posy+a))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,t,n){const{top:i}=vl(e),s=t-i,o=Math.floor(s/n),a=o*n;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let l=0;for(let u=0;u<this.diff.viewLineCounts.length;u++)if(l+=this.diff.viewLineCounts[u],o<l)return u}return o}}const zw=Te("clipboardService");class yR{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}yR.None=Object.freeze({report(){}});const Uw=Te("editorProgressService");var bR=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Zd=function(r,e){return function(t,n){e(t,n,r)}},yS;class kD{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const n of this._zones)t.removeZone(n)}),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,t,n,i){const s=i?pS.capture(e):null;e.changeViewZones(o=>{for(const a of this._zones)o.removeZone(a);for(const a of this._inlineDiffMargins)a.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let a=0,l=n.zones.length;a<l;a++){const u=n.zones[a];u.suppressMouseDown=!0;const h=o.addZone(u);this._zones.push(h),this._zonesMap[String(h)]=!0,n.zones[a].diff&&u.marginDomNode&&(u.suppressMouseDown=!1,this._inlineDiffMargins.push(new _R(h,u.marginDomNode,e,n.zones[a].diff,this._contextMenuService,this._clipboardService)))}}),s&&s.restore(e),this._decorations=e.deltaDecorations(this._decorations,n.decorations),t&&t.setZones(n.overviewZones)}}let wR=0;const CR=L0("diff-insert",us.add,w("diffInsertIcon","Line decoration for inserts in the diff editor.")),AD=L0("diff-remove",us.remove,w("diffRemoveIcon","Line decoration for removals in the diff editor.")),RD=(yS=window.trustedTypes)===null||yS===void 0?void 0:yS.createPolicy("diffEditorWidget",{createHTML:r=>r});let Cg=class ma extends Rn{constructor(e,t,n,i,s,o,a,l,u,h,v,N){super();this._editorProgressService=N,this._onDidDispose=this._register(new $t),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new $t),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new $t),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=s,this._codeEditorService=l,this._contextKeyService=this._register(o.createScoped(e)),this._instantiationService=a.createChild(new xy([ps,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=u,this._notificationService=h,this._id=++wR,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._renderSideBySide=!0,typeof t.renderSideBySide!="undefined"&&(this._renderSideBySide=t.renderSideBySide),this._maxComputationTime=5e3,typeof t.maxComputationTime!="undefined"&&(this._maxComputationTime=t.maxComputationTime),this._ignoreTrimWhitespace=!0,typeof t.ignoreTrimWhitespace!="undefined"&&(this._ignoreTrimWhitespace=t.ignoreTrimWhitespace),this._renderIndicators=!0,typeof t.renderIndicators!="undefined"&&(this._renderIndicators=t.renderIndicators),this._originalIsEditable=en(t.originalEditable,!1),this._diffCodeLens=en(t.diffCodeLens,!1),this._diffWordWrap=WD(t.diffWordWrap,"inherit"),typeof t.isInEmbeddedEditor!="undefined"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._renderOverviewRuler=!0,typeof t.renderOverviewRuler!="undefined"&&(this._renderOverviewRuler=Boolean(t.renderOverviewRuler)),this._updateDecorationsRunner=this._register(new ys(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=ma._getClassName(this._themeService.getColorTheme(),this._renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=Sr(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(eo(this._overviewDomElement,"mousedown",K=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(K)})),this._renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new kD(v,i),this._modifiedEditorState=new kD(v,i),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new kL(this._containerDomElement,t.dimension,()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,n.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,n.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=new Yd(this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._enableSplitViewResizing=!0,typeof t.enableSplitViewResizing!="undefined"&&(this._enableSplitViewResizing=t.enableSplitViewResizing),this._renderSideBySide?this._setStrategy(new qd(this._createDataSource(),this._enableSplitViewResizing)):this._setStrategy(new BD(this._createDataSource(),this._enableSplitViewResizing)),this._register(u.onDidColorThemeChange(K=>{this._strategy&&this._strategy.applyColors(K)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=ma._getClassName(this._themeService.getColorTheme(),this._renderSideBySide)}));const P=e0.getDiffEditorContributions();for(const K of P)try{this._register(a.createInstance(K.ctor,this))}catch(ee){En(ee)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=Wb(e.type),n}_recreateOverviewRulers(){!this._renderOverviewRuler||(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(n.onDidScrollChange(s=>{this._isHandlingScrollEvent||!s.scrollTopChanged&&!s.scrollLeftChanged&&!s.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(s=>{!n.getModel()||(s.hasChanged(40)&&this._updateDecorationsRunner.schedule(),s.hasChanged(129)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const i=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>i.set(!0))),this._register(n.onDidBlurEditorWidget(()=>i.set(!1))),this._register(n.onDidContentSizeChange(s=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+ma.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:o,contentHeightChanged:s.contentHeightChanged,contentWidthChanged:s.contentWidthChanged})})),n}_createRightHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(n.onDidScrollChange(s=>{this._isHandlingScrollEvent||!s.scrollTopChanged&&!s.scrollLeftChanged&&!s.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(s=>{!n.getModel()||(s.hasChanged(40)&&this._updateDecorationsRunner.schedule(),s.hasChanged(129)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(n.onDidChangeModelOptions(s=>{s.tabSize&&this._updateDecorationsRunner.schedule()}));const i=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>i.set(!0))),this._register(n.onDidBlurEditorWidget(()=>i.set(!1))),this._register(n.onDidContentSizeChange(s=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+ma.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:o,contentHeightChanged:s.contentHeightChanged,contentWidthChanged:s.contentWidthChanged})})),n}_createInnerEditor(e,t,n,i){return e.createInstance(Bw,t,n,i)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return gd.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){let t=!1;typeof e.renderSideBySide!="undefined"&&this._renderSideBySide!==e.renderSideBySide&&(this._renderSideBySide=e.renderSideBySide,t=!0),typeof e.maxComputationTime!="undefined"&&(this._maxComputationTime=e.maxComputationTime,this._isVisible&&this._beginUpdateDecorationsSoon());let n=!1;typeof e.ignoreTrimWhitespace!="undefined"&&this._ignoreTrimWhitespace!==e.ignoreTrimWhitespace&&(this._ignoreTrimWhitespace=e.ignoreTrimWhitespace,n=!0),typeof e.renderIndicators!="undefined"&&this._renderIndicators!==e.renderIndicators&&(this._renderIndicators=e.renderIndicators,n=!0),n&&this._beginUpdateDecorations(),this._originalIsEditable=en(e.originalEditable,this._originalIsEditable),this._diffCodeLens=en(e.diffCodeLens,this._diffCodeLens),this._diffWordWrap=WD(e.diffWordWrap,this._diffWordWrap),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),typeof e.enableSplitViewResizing!="undefined"&&(this._enableSplitViewResizing=e.enableSplitViewResizing),this._strategy.setEnableSplitViewResizing(this._enableSplitViewResizing),t&&(this._renderSideBySide?this._setStrategy(new qd(this._createDataSource(),this._enableSplitViewResizing)):this._setStrategy(new BD(this._createDataSource(),this._enableSplitViewResizing)),this._containerDomElement.className=ma._getClassName(this._themeService.getColorTheme(),this._renderSideBySide)),typeof e.renderOverviewRuler!="undefined"&&this._renderOverviewRuler!==e.renderOverviewRuler&&(this._renderOverviewRuler=e.renderOverviewRuler,this._renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e){this._modifiedEditor.setPosition(e)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e){this._modifiedEditor.setSelection(e)}setSelections(e){this._modifiedEditor.setSelections(e)}revealLines(e,t,n=0){this._modifiedEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._modifiedEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._modifiedEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,i=!0){this._modifiedEditor.revealRange(e,t,n,i)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,n){this._modifiedEditor.trigger(e,t,n)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),n=ma.ENTIRE_DIFF_OVERVIEW_WIDTH-2*ma.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:ma.ONE_OVERVIEW_WIDTH,right:n+ma.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:ma.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),ma.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const n=this._diffComputationToken;if(this._setState(1),!this._editorWorkerService.canComputeDiff(e.uri,t.uri)){(!ma._equals(e.uri,this._lastOriginalWarning)||!ma._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(w("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._editorWorkerService.computeDiff(e.uri,t.uri,this._ignoreTrimWhitespace,this._maxComputationTime).then(i=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=i,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},i=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),i=this._strategy.getEditorsDiffDecorations(e,this._ignoreTrimWhitespace,this._renderIndicators,t,n);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,i.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,i.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._renderSideBySide?t.wordWrapOverride1=this._diffWordWrap:t.wordWrapOverride1="off",e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._originalIsEditable,t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.wordWrapOverride1=this._diffWordWrap,t.revealHorizontalRightPadding=Zt.revealHorizontalRightPadding.defaultValue+ma.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),i=this._strategy.layout();this._originalDomNode.style.width=i+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-i+"px",this._modifiedDomNode.style.left=i+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-n+"px",this._overviewDomElement.style.width=ma.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-ma.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(ma.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:i,height:t-n}),this._modifiedEditor.layout({width:e-i-(this._renderOverviewRuler?ma.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-n,e,n),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),n=this._modifiedEditor.getScrollHeight(),i=Math.max(0,e.height),s=Math.max(0,i-2*0),o=n>0?s/n:0,a=Math.max(0,Math.floor(e.height*o)),l=Math.floor(t*o);return{height:a,top:l}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const n=this._diffComputationResult?this._diffComputationResult.changes:[];if(n.length===0||e<t(n[0]))return null;let i=0,s=n.length-1;for(;i<s;){const o=Math.floor((i+s)/2),a=t(n[o]),l=o+1<=s?t(n[o+1]):1073741824;e<a?s=o-1:e>=l?i=o+1:(i=o,s=o)}return n[i]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.originalStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),s=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-n;return a<=s?i+Math.min(a,o):i+o-s+a}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.modifiedStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),s=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-i;return a<=o?n+Math.min(a,s):n+s-o+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};Cg.ONE_OVERVIEW_WIDTH=15,Cg.ENTIRE_DIFF_OVERVIEW_WIDTH=30,Cg.UPDATE_DIFF_DECORATIONS_DELAY=200,Cg=bR([Zd(3,zw),Zd(4,Ac),Zd(5,ps),Zd(6,Dn),Zd(7,ht),Zd(8,Zo),Zd(9,Vc),Zd(10,Hw),Zd(11,Uw)],Cg);class PD extends Rn{constructor(e){super();this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=(e.getColor(xx)||NC).transparent(2),n=(e.getColor(Dx)||TC).transparent(2),i=!t.equals(this._insertColor)||!n.equals(this._removeColor);return this._insertColor=t,this._removeColor=n,i}getEditorsDiffDecorations(e,t,n,i,s){s=s.sort((u,h)=>u.afterLineNumber-h.afterLineNumber),i=i.sort((u,h)=>u.afterLineNumber-h.afterLineNumber);const o=this._getViewZones(e,i,s,n),a=this._getOriginalEditorDecorations(e,t,n),l=this._getModifiedEditorDecorations(e,t,n);return{original:{decorations:a.decorations,overviewZones:a.overviewZones,zones:o.original},modified:{decorations:l.decorations,overviewZones:l.overviewZones,zones:o.modified}}}}class FD{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class vm{constructor(e,t,n,i,s){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=i,this._modifiedEditor=s}static _getViewLineCount(e,t,n){const i=e.getModel(),s=e._getViewModel();if(i&&s){const o=Ty(i,s,t,n);return o.endLineNumber-o.startLineNumber+1}return n-t+1}getViewZones(){const e=this._originalEditor.getOption(56),t=this._modifiedEditor.getOption(56),n=this._originalEditor.getOption(129).wrappingColumn!==-1,i=this._modifiedEditor.getOption(129).wrappingColumn!==-1,s=n||i,o=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,l=this._modifiedEditor._getViewModel().coordinatesConverter,u={original:[],modified:[]};let h=0,v=0,N=0,P=0,K=0,ee=0;const Se=(at,Ze)=>at.afterLineNumber-Ze.afterLineNumber,Le=(at,Ze)=>{if(Ze.domNode===null&&at.length>0){const rt=at[at.length-1];if(rt.afterLineNumber===Ze.afterLineNumber&&rt.domNode===null){rt.heightInLines+=Ze.heightInLines;return}}at.push(Ze)},ce=new FD(this._modifiedForeignVZ),Ee=new FD(this._originalForeignVZ);let ze=1,Qe=1;for(let at=0,Ze=this._lineChanges.length;at<=Ze;at++){const rt=at<Ze?this._lineChanges[at]:null;rt!==null?(N=rt.originalStartLineNumber+(rt.originalEndLineNumber>0?-1:0),P=rt.modifiedStartLineNumber+(rt.modifiedEndLineNumber>0?-1:0),v=rt.originalEndLineNumber>0?vm._getViewLineCount(this._originalEditor,rt.originalStartLineNumber,rt.originalEndLineNumber):0,h=rt.modifiedEndLineNumber>0?vm._getViewLineCount(this._modifiedEditor,rt.modifiedStartLineNumber,rt.modifiedEndLineNumber):0,K=Math.max(rt.originalStartLineNumber,rt.originalEndLineNumber),ee=Math.max(rt.modifiedStartLineNumber,rt.modifiedEndLineNumber)):(N+=1e7+v,P+=1e7+h,K=N,ee=P);let St=[],un=[];if(s){let Wn;rt?rt.originalEndLineNumber>0?Wn=rt.originalStartLineNumber-ze:Wn=rt.modifiedStartLineNumber-Qe:Wn=o.getLineCount()-ze;for(let $i=0;$i<Wn;$i++){const Fi=ze+$i,tr=Qe+$i,yr=a.getModelLineViewLineCount(Fi),gr=l.getModelLineViewLineCount(tr);yr<gr?St.push({afterLineNumber:Fi,heightInLines:gr-yr,domNode:null,marginDomNode:null}):yr>gr&&un.push({afterLineNumber:tr,heightInLines:yr-gr,domNode:null,marginDomNode:null})}rt&&(ze=(rt.originalEndLineNumber>0?rt.originalEndLineNumber:rt.originalStartLineNumber)+1,Qe=(rt.modifiedEndLineNumber>0?rt.modifiedEndLineNumber:rt.modifiedStartLineNumber)+1)}for(;ce.current&&ce.current.afterLineNumber<=ee;){let Wn;ce.current.afterLineNumber<=P?Wn=N-P+ce.current.afterLineNumber:Wn=K;let $i=null;rt&&rt.modifiedStartLineNumber<=ce.current.afterLineNumber&&ce.current.afterLineNumber<=rt.modifiedEndLineNumber&&($i=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),St.push({afterLineNumber:Wn,heightInLines:ce.current.height/t,domNode:null,marginDomNode:$i}),ce.advance()}for(;Ee.current&&Ee.current.afterLineNumber<=K;){let Wn;Ee.current.afterLineNumber<=N?Wn=P-N+Ee.current.afterLineNumber:Wn=ee,un.push({afterLineNumber:Wn,heightInLines:Ee.current.height/e,domNode:null}),Ee.advance()}if(rt!==null&&D0(rt)){const Wn=this._produceOriginalFromDiff(rt,v,h);Wn&&St.push(Wn)}if(rt!==null&&I0(rt)){const Wn=this._produceModifiedFromDiff(rt,v,h);Wn&&un.push(Wn)}let Kt=0,An=0;for(St=St.sort(Se),un=un.sort(Se);Kt<St.length&&An<un.length;){const Wn=St[Kt],$i=un[An],Fi=Wn.afterLineNumber-N,tr=$i.afterLineNumber-P;Fi<tr?(Le(u.original,Wn),Kt++):tr<Fi?(Le(u.modified,$i),An++):Wn.shouldNotShrink?(Le(u.original,Wn),Kt++):$i.shouldNotShrink?(Le(u.modified,$i),An++):Wn.heightInLines>=$i.heightInLines?(Wn.heightInLines-=$i.heightInLines,An++):($i.heightInLines-=Wn.heightInLines,Kt++)}for(;Kt<St.length;)Le(u.original,St[Kt]),Kt++;for(;An<un.length;)Le(u.modified,un[An]),An++}return{original:vm._ensureDomNodes(u.original),modified:vm._ensureDomNodes(u.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=VD()),t))}}function Xd(r,e,t,n,i){return{range:new Mt(r,e,t,n),options:i}}const dl={charDelete:Fo.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:Fo.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:Fo.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:Fo.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:Fo.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:Fo.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+fc.asClassName(CR),marginClassName:"line-insert",isWholeLine:!0}),lineDelete:Fo.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:Fo.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+fc.asClassName(AD),marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:Fo.register({description:"diff-editor-line-delete-margin",marginClassName:"line-delete"})};class qd extends PD{constructor(e,t){super(e);this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new Pu(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(n=>this._onSashDrag(n)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Cg.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let i=Math.floor((e||.5)*n);const s=Math.floor(.5*n);return i=this._disableSash?s:i||s,n>qd.MINIMUM_EDITOR_WIDTH*2?(i<qd.MINIMUM_EDITOR_WIDTH&&(i=qd.MINIMUM_EDITOR_WIDTH),i>n-qd.MINIMUM_EDITOR_WIDTH&&(i=n-qd.MINIMUM_EDITOR_WIDTH)):i=s,this._sashPosition!==i&&(this._sashPosition=i,this._sash.layout()),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Cg.ENTIRE_DIFF_OVERVIEW_WIDTH:0),i=this.layout((this._startSashPosition+(e.currentX-e.startX))/n);this._sashRatio=i/n,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,n){const i=this._dataSource.getOriginalEditor(),s=this._dataSource.getModifiedEditor();return new SR(e,t,n,i,s).getViewZones()}_getOriginalEditorDecorations(e,t,n){const i=this._dataSource.getOriginalEditor(),s=String(this._removeColor),o={decorations:[],overviewZones:[]},a=i.getModel(),l=i._getViewModel();for(const u of e)if(I0(u)){o.decorations.push({range:new Mt(u.originalStartLineNumber,1,u.originalEndLineNumber,1073741824),options:n?dl.lineDeleteWithSign:dl.lineDelete}),(!D0(u)||!u.charChanges)&&o.decorations.push(Xd(u.originalStartLineNumber,1,u.originalEndLineNumber,1073741824,dl.charDeleteWholeLine));const h=Ty(a,l,u.originalStartLineNumber,u.originalEndLineNumber);if(o.overviewZones.push(new Cy(h.startLineNumber,h.endLineNumber,s)),u.charChanges){for(const v of u.charChanges)if(I0(v))if(t)for(let N=v.originalStartLineNumber;N<=v.originalEndLineNumber;N++){let P,K;N===v.originalStartLineNumber?P=v.originalStartColumn:P=a.getLineFirstNonWhitespaceColumn(N),N===v.originalEndLineNumber?K=v.originalEndColumn:K=a.getLineLastNonWhitespaceColumn(N),o.decorations.push(Xd(N,P,N,K,dl.charDelete))}else o.decorations.push(Xd(v.originalStartLineNumber,v.originalStartColumn,v.originalEndLineNumber,v.originalEndColumn,dl.charDelete))}}return o}_getModifiedEditorDecorations(e,t,n){const i=this._dataSource.getModifiedEditor(),s=String(this._insertColor),o={decorations:[],overviewZones:[]},a=i.getModel(),l=i._getViewModel();for(const u of e)if(D0(u)){o.decorations.push({range:new Mt(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824),options:n?dl.lineInsertWithSign:dl.lineInsert}),(!I0(u)||!u.charChanges)&&o.decorations.push(Xd(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824,dl.charInsertWholeLine));const h=Ty(a,l,u.modifiedStartLineNumber,u.modifiedEndLineNumber);if(o.overviewZones.push(new Cy(h.startLineNumber,h.endLineNumber,s)),u.charChanges){for(const v of u.charChanges)if(D0(v))if(t)for(let N=v.modifiedStartLineNumber;N<=v.modifiedEndLineNumber;N++){let P,K;N===v.modifiedStartLineNumber?P=v.modifiedStartColumn:P=a.getLineFirstNonWhitespaceColumn(N),N===v.modifiedEndLineNumber?K=v.modifiedEndColumn:K=a.getLineLastNonWhitespaceColumn(N),o.decorations.push(Xd(N,P,N,K,dl.charInsert))}else o.decorations.push(Xd(v.modifiedStartLineNumber,v.modifiedStartColumn,v.modifiedEndLineNumber,v.modifiedEndColumn,dl.charInsert))}}return o}}qd.MINIMUM_EDITOR_WIDTH=100;class SR extends vm{constructor(e,t,n,i,s){super(e,t,n,i,s)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null}_produceModifiedFromDiff(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null}}class BD extends PD{constructor(e,t){super(e);this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(n=>{this._decorationsLeft!==n.decorationsLeft&&(this._decorationsLeft=n.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,n,i){const s=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new ER(e,t,n,s,o,i).getViewZones()}_getOriginalEditorDecorations(e,t,n){const i=String(this._removeColor),s={decorations:[],overviewZones:[]},o=this._dataSource.getOriginalEditor(),a=o.getModel(),l=o._getViewModel();for(const u of e)if(I0(u)){s.decorations.push({range:new Mt(u.originalStartLineNumber,1,u.originalEndLineNumber,1073741824),options:dl.lineDeleteMargin});const h=Ty(a,l,u.originalStartLineNumber,u.originalEndLineNumber);s.overviewZones.push(new Cy(h.startLineNumber,h.endLineNumber,i))}return s}_getModifiedEditorDecorations(e,t,n){const i=this._dataSource.getModifiedEditor(),s=String(this._insertColor),o={decorations:[],overviewZones:[]},a=i.getModel(),l=i._getViewModel();for(const u of e)if(D0(u)){o.decorations.push({range:new Mt(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824),options:n?dl.lineInsertWithSign:dl.lineInsert});const h=Ty(a,l,u.modifiedStartLineNumber,u.modifiedEndLineNumber);if(o.overviewZones.push(new Cy(h.startLineNumber,h.endLineNumber,s)),u.charChanges){for(const v of u.charChanges)if(D0(v))if(t)for(let N=v.modifiedStartLineNumber;N<=v.modifiedEndLineNumber;N++){let P,K;N===v.modifiedStartLineNumber?P=v.modifiedStartColumn:P=a.getLineFirstNonWhitespaceColumn(N),N===v.modifiedEndLineNumber?K=v.modifiedEndColumn:K=a.getLineLastNonWhitespaceColumn(N),o.decorations.push(Xd(N,P,N,K,dl.charInsert))}else o.decorations.push(Xd(v.modifiedStartLineNumber,v.modifiedStartColumn,v.modifiedEndLineNumber,v.modifiedEndColumn,dl.charInsert))}else o.decorations.push(Xd(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824,dl.charInsertWholeLine))}return o}layout(){return Math.max(5,this._decorationsLeft)}}class ER extends vm{constructor(e,t,n,i,s,o){super(e,t,n,i,s);this._originalModel=i.getModel(),this._renderIndicators=o,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,n){const i=document.createElement("div");return i.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div"),marginDomNode:i}}_produceModifiedFromDiff(e,t,n){const i=document.createElement("div");i.className=`view-lines line-delete ${cm}`;const s=document.createElement("div");s.className="inline-deleted-margin-view-zone";const o={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:i,marginDomNode:s,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(o),o}_finalize(e){const t=this._modifiedEditor.getOptions(),n=this._modifiedEditor.getModel().getOptions().tabSize,i=t.get(40),s=t.get(27),o=i.typicalHalfwidthCharacterWidth,a=t.get(91),l=this._originalModel.mightContainNonBasicASCII(),u=this._originalModel.mightContainRTL(),h=t.get(56),N=t.get(128).decorationsWidth,P=t.get(103),K=t.get(86),ee=t.get(80),Se=t.get(41),Le=this._lineBreaksComputer.finalize();let ce=0;for(let Ee=0;Ee<this._pendingLineChange.length;Ee++){const ze=this._pendingLineChange[Ee],Qe=this._pendingViewZones[Ee],at=Qe.domNode;ul.applyFontInfoSlow(at,i);const Ze=Qe.marginDomNode;ul.applyFontInfoSlow(Ze,i);const rt=[];if(ze.charChanges)for(const tr of ze.charChanges)I0(tr)&&rt.push(new ig(new Mt(tr.originalStartLineNumber,tr.originalStartColumn,tr.originalEndLineNumber,tr.originalEndColumn),"char-delete",0));const St=rt.length>0,un=_h(1e4);let Kt=0,An=0,Wn=null;for(let tr=ze.originalStartLineNumber;tr<=ze.originalEndLineNumber;tr++){const yr=tr-ze.originalStartLineNumber,gr=this._originalModel.getLineTokens(tr),Mr=gr.getLineContent(),hs=Le[ce++],Vu=al.filter(rt,tr,1,Mr.length+1);if(hs){let Zc=0;for(const $a of hs.breakOffsets){const nf=gr.sliceAndInflate(Zc,$a,0),H1=Mr.substring(Zc,$a);Kt=Math.max(Kt,this._renderOriginalLine(An++,H1,nf,al.extractWrapped(Vu,Zc,$a),St,l,u,i,s,h,N,P,K,ee,Se,n,un,Ze)),Zc=$a}for(Wn||(Wn=[]);Wn.length<yr;)Wn[Wn.length]=1;Wn[yr]=hs.breakOffsets.length,Qe.heightInLines+=hs.breakOffsets.length-1;const yc=document.createElement("div");yc.className="line-delete",e.original.push({afterLineNumber:tr,afterColumn:0,heightInLines:hs.breakOffsets.length-1,domNode:VD(),marginDomNode:yc})}else Kt=Math.max(Kt,this._renderOriginalLine(An++,Mr,gr,Vu,St,l,u,i,s,h,N,P,K,ee,Se,n,un,Ze))}Kt+=a;const $i=un.build(),Fi=RD?RD.createHTML($i):$i;if(at.innerHTML=Fi,Qe.minWidthInPx=Kt*o,Wn){const tr=ze.originalEndLineNumber-ze.originalStartLineNumber;for(;Wn.length<=tr;)Wn[Wn.length]=1}Qe.diff.viewLineCounts=Wn}e.original.sort((Ee,ze)=>Ee.afterLineNumber-ze.afterLineNumber)}_renderOriginalLine(e,t,n,i,s,o,a,l,u,h,v,N,P,K,ee,Se,Le,ce){Le.appendASCIIString('<div class="view-line'),s||Le.appendASCIIString(" char-delete"),Le.appendASCIIString('" style="top:'),Le.appendASCIIString(String(e*h)),Le.appendASCIIString('px;width:1000000px;">');const Ee=Ta.isBasicASCII(t,o),ze=Ta.containsRTL(t,Ee,a),Qe=Vp(new Dh(l.isMonospace&&!u,l.canUseHalfwidthRightwardsArrow,t,!1,Ee,ze,0,n,i,Se,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,N,P,K,ee!==Ce.OFF,null),Le);if(Le.appendASCIIString("</div>"),this._renderIndicators){const at=document.createElement("div");at.className=`delete-sign ${fc.asClassName(AD)}`,at.setAttribute("style",`position:absolute;top:${e*h}px;width:${v}px;height:${h}px;right:0;`),ce.appendChild(at)}return Qe.characterMapping.getAbsoluteOffset(Qe.characterMapping.length)}}function WD(r,e){return wi(r,e,["off","on","inherit"])}function D0(r){return r.modifiedEndLineNumber>0}function I0(r){return r.originalEndLineNumber>0}function VD(){const r=document.createElement("div");return r.className="diagonal-fill",r}function Ty(r,e,t,n){const i=r.getLineCount();return t=Math.min(i,Math.max(1,t)),n=Math.min(i,Math.max(1,n)),e.coordinatesConverter.convertModelRangeToViewRange(new Mt(t,r.getLineMinColumn(t),n,r.getLineMaxColumn(n)))}gc((r,e)=>{const t=r.getColor(xx);t&&(e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${t}; }`));const n=r.getColor(Dx);n&&(e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${n}; }`));const i=r.getColor(YM);i&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${r.type==="hc"?"dashed":"solid"} ${i}; }`);const s=r.getColor(ZM);s&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${r.type==="hc"?"dashed":"solid"} ${s}; }`);const o=r.getColor(aw);o&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${o}; }`);const a=r.getColor(XM);a&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${a}; }`);const l=r.getColor(lw);l&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${l};
			}
		`);const u=r.getColor(uw);u&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${u};
			}
		`);const h=r.getColor(cw);h&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${h};
			}
		`);const v=r.getColor(qM);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${v} 12.5%,
			#0000 12.5%, #0000 50%,
			${v} 50%, ${v} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});const My=Te("themeService"),Rl=Te("keybindingService");class LR extends Rn{constructor(){super();this._onCodeEditorAdd=this._register(new $t),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new $t),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new $t),this._onDiffEditorRemove=this._register(new $t),this._onDecorationTypeRegistered=this._register(new $t),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null)}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}setModelProperty(e,t,n){const i=e.toString();let s;this._modelProperties.has(i)?s=this._modelProperties.get(i):(s=new Map,this._modelProperties.set(i,s)),s.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}}var xR=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},DR=function(r,e){return function(t,n){e(t,n,r)}};class IR{constructor(e,t,n){this._parent=e,this._editorId=t,this._styleSheet=n,this._refCount=0}ref(){this._refCount++}unref(){var e;this._refCount--,this._refCount===0&&((e=this._styleSheet.parentNode)===null||e===void 0||e.removeChild(this._styleSheet),this._parent._removeEditorStyleSheets(this._editorId))}insertRule(e,t){this._styleSheet.sheet.insertRule(e,t)}removeRulesContainingSelector(e){Lc(e,this._styleSheet)}}class NR{constructor(e){this._styleSheet=e}ref(){}unref(){}insertRule(e,t){this._styleSheet.sheet.insertRule(e,t)}removeRulesContainingSelector(e){Lc(e,this._styleSheet)}}let bS=class extends LR{constructor(e,t){super();this._decorationOptionProviders=new Map,this._editorStyleSheets=new Map,this._globalStyleSheet=e||null,this._themeService=t}_getOrCreateGlobalStyleSheet(){return this._globalStyleSheet||(this._globalStyleSheet=new NR(Mo())),this._globalStyleSheet}_getOrCreateStyleSheet(e){if(!e)return this._getOrCreateGlobalStyleSheet();const t=e.getContainerDomNode();if(!Pg(t))return this._getOrCreateGlobalStyleSheet();const n=e.getId();if(!this._editorStyleSheets.has(n)){const i=new IR(this,n,Mo(t));this._editorStyleSheets.set(n,i)}return this._editorStyleSheets.get(n)}_removeEditorStyleSheets(e){this._editorStyleSheets.delete(e)}registerDecorationType(e,t,n,i,s){let o=this._decorationOptionProviders.get(t);if(!o){const a=this._getOrCreateStyleSheet(s),l={styleSheet:a,key:t,parentTypeKey:i,options:n||Object.create(null)};i?o=new TR(this._themeService,a,l):o=new MR(e,this._themeService,a,l),this._decorationOptionProviders.set(t,o),this._onDecorationTypeRegistered.fire(t)}o.refCount++}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorations(e))))}resolveDecorationOptions(e,t){const n=this._decorationOptionProviders.get(e);if(!n)throw new Error("Unknown decoration type key: "+e);return n.getOptions(this,t)}};bS=xR([DR(1,Zo)],bS);class TR{constructor(e,t,n){this._styleSheet=t,this._styleSheet.ref(),this._parentTypeKey=n.parentTypeKey,this.refCount=0,this._beforeContentRules=new jw(3,n,e),this._afterContentRules=new jw(4,n,e)}getOptions(e,t){const n=e.resolveDecorationOptions(this._parentTypeKey,!0);return this._beforeContentRules&&(n.beforeContentClassName=this._beforeContentRules.className),this._afterContentRules&&(n.afterContentClassName=this._afterContentRules.className),n}dispose(){this._beforeContentRules&&(this._beforeContentRules.dispose(),this._beforeContentRules=null),this._afterContentRules&&(this._afterContentRules.dispose(),this._afterContentRules=null),this._styleSheet.unref()}}class MR{constructor(e,t,n,i){this._disposables=new gi,this.description=e,this._styleSheet=n,this._styleSheet.ref(),this.refCount=0;const s=v=>{const N=new jw(v,i,t);if(this._disposables.add(N),N.hasContent)return N.className},o=v=>{const N=new jw(v,i,t);return this._disposables.add(N),N.hasContent?{className:N.className,hasLetterSpacing:N.hasLetterSpacing}:null};this.className=s(0);const a=o(1);a&&(this.inlineClassName=a.className,this.inlineClassNameAffectsLetterSpacing=a.hasLetterSpacing),this.beforeContentClassName=s(3),this.afterContentClassName=s(4),this.glyphMarginClassName=s(2);const l=i.options;this.isWholeLine=Boolean(l.isWholeLine),this.stickiness=l.rangeBehavior;const u=l.light&&l.light.overviewRulerColor||l.overviewRulerColor,h=l.dark&&l.dark.overviewRulerColor||l.overviewRulerColor;(typeof u!="undefined"||typeof h!="undefined")&&(this.overviewRuler={color:u||h,darkColor:h||u,position:l.overviewRulerLane||ec.Center})}getOptions(e,t){return t?{description:this.description,inlineClassName:this.inlineClassName,beforeContentClassName:this.beforeContentClassName,afterContentClassName:this.afterContentClassName,className:this.className,glyphMarginClassName:this.glyphMarginClassName,isWholeLine:this.isWholeLine,overviewRuler:this.overviewRuler,stickiness:this.stickiness}:this}dispose(){this._disposables.dispose(),this._styleSheet.unref()}}const Oy={color:"color:{0} !important;",opacity:"opacity:{0};",backgroundColor:"background-color:{0};",outline:"outline:{0};",outlineColor:"outline-color:{0};",outlineStyle:"outline-style:{0};",outlineWidth:"outline-width:{0};",border:"border:{0};",borderColor:"border-color:{0};",borderRadius:"border-radius:{0};",borderSpacing:"border-spacing:{0};",borderStyle:"border-style:{0};",borderWidth:"border-width:{0};",fontStyle:"font-style:{0};",fontWeight:"font-weight:{0};",fontSize:"font-size:{0};",fontFamily:"font-family:{0};",textDecoration:"text-decoration:{0};",cursor:"cursor:{0};",letterSpacing:"letter-spacing:{0};",gutterIconPath:"background:{0} center center no-repeat;",gutterIconSize:"background-size:{0};",contentText:"content:'{0}';",contentIconPath:"content:{0};",margin:"margin:{0};",padding:"padding:{0};",width:"width:{0};",height:"height:{0};"};class jw{constructor(e,t,n){this._theme=n.getColorTheme(),this._ruleType=e,this._providerArgs=t,this._usesThemeColors=!1,this._hasContent=!1,this._hasLetterSpacing=!1;let i=wS.getClassName(this._providerArgs.key,e);this._providerArgs.parentTypeKey&&(i=i+" "+wS.getClassName(this._providerArgs.parentTypeKey,e)),this._className=i,this._unThemedSelector=wS.getSelector(this._providerArgs.key,this._providerArgs.parentTypeKey,e),this._buildCSS(),this._usesThemeColors?this._themeListener=n.onDidColorThemeChange(s=>{this._theme=n.getColorTheme(),this._removeCSS(),this._buildCSS()}):this._themeListener=null}dispose(){this._hasContent&&(this._removeCSS(),this._hasContent=!1),this._themeListener&&(this._themeListener.dispose(),this._themeListener=null)}get hasContent(){return this._hasContent}get hasLetterSpacing(){return this._hasLetterSpacing}get className(){return this._className}_buildCSS(){const e=this._providerArgs.options;let t,n,i;switch(this._ruleType){case 0:t=this.getCSSTextForModelDecorationClassName(e),n=this.getCSSTextForModelDecorationClassName(e.light),i=this.getCSSTextForModelDecorationClassName(e.dark);break;case 1:t=this.getCSSTextForModelDecorationInlineClassName(e),n=this.getCSSTextForModelDecorationInlineClassName(e.light),i=this.getCSSTextForModelDecorationInlineClassName(e.dark);break;case 2:t=this.getCSSTextForModelDecorationGlyphMarginClassName(e),n=this.getCSSTextForModelDecorationGlyphMarginClassName(e.light),i=this.getCSSTextForModelDecorationGlyphMarginClassName(e.dark);break;case 3:t=this.getCSSTextForModelDecorationContentClassName(e.before),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.before),i=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.before);break;case 4:t=this.getCSSTextForModelDecorationContentClassName(e.after),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.after),i=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.after);break;default:throw new Error("Unknown rule type: "+this._ruleType)}const s=this._providerArgs.styleSheet;let o=!1;t.length>0&&(s.insertRule(`${this._unThemedSelector} {${t}}`,0),o=!0),n.length>0&&(s.insertRule(`.vs${this._unThemedSelector} {${n}}`,0),o=!0),i.length>0&&(s.insertRule(`.vs-dark${this._unThemedSelector}, .hc-black${this._unThemedSelector} {${i}}`,0),o=!0),this._hasContent=o}_removeCSS(){this._providerArgs.styleSheet.removeRulesContainingSelector(this._unThemedSelector)}getCSSTextForModelDecorationClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["backgroundColor"],t),this.collectCSSText(e,["outline","outlineColor","outlineStyle","outlineWidth"],t),this.collectBorderSettingsCSSText(e,t),t.join("")}getCSSTextForModelDecorationInlineClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["fontStyle","fontWeight","textDecoration","cursor","color","opacity","letterSpacing"],t),e.letterSpacing&&(this._hasLetterSpacing=!0),t.join("")}getCSSTextForModelDecorationContentClassName(e){if(!e)return"";const t=[];if(typeof e!="undefined"){if(this.collectBorderSettingsCSSText(e,t),typeof e.contentIconPath!="undefined"&&t.push(fs(Oy.contentIconPath,xc(ci.revive(e.contentIconPath)))),typeof e.contentText=="string"){const i=e.contentText.match(/^.*$/m)[0].replace(/['\\]/g,"\\$&");t.push(fs(Oy.contentText,i))}this.collectCSSText(e,["fontStyle","fontWeight","fontSize","fontFamily","textDecoration","color","opacity","backgroundColor","margin","padding"],t),this.collectCSSText(e,["width","height"],t)&&t.push("display:inline-block;")}return t.join("")}getCSSTextForModelDecorationGlyphMarginClassName(e){if(!e)return"";const t=[];return typeof e.gutterIconPath!="undefined"&&(t.push(fs(Oy.gutterIconPath,xc(ci.revive(e.gutterIconPath)))),typeof e.gutterIconSize!="undefined"&&t.push(fs(Oy.gutterIconSize,e.gutterIconSize))),t.join("")}collectBorderSettingsCSSText(e,t){return this.collectCSSText(e,["border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth"],t)?(t.push(fs("box-sizing: border-box;")),!0):!1}collectCSSText(e,t,n){const i=n.length;for(let s of t){const o=this.resolveValue(e[s]);typeof o=="string"&&n.push(fs(Oy[s],o))}return n.length!==i}resolveValue(e){if(Lf(e)){this._usesThemeColors=!0;const t=this._theme.getColor(e.id);return t?t.toString():"transparent"}return e}}class wS{static getClassName(e,t){return"ced-"+e+"-"+t}static getSelector(e,t,n){let i=".monaco-editor ."+this.getClassName(e,n);return t&&(i=i+"."+this.getClassName(t,n)),n===3?i+="::before":n===4&&(i+="::after"),i}}var OR=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},HD=function(r,e){return function(t,n){e(t,n,r)}};let $w=class extends bS{constructor(e,t,n){super(e,n);this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=t.createKey("editorIsOpen",!1),this._activeCodeEditor=null}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(e,t,n){return t?Promise.resolve(this.doOpenEditor(t,e)):Promise.resolve(null)}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const s=t.resource.scheme;if(s===Ar.http||s===Ar.https)return zs(t.resource.toString()),e}return null}const i=t.options?t.options.selection:null;if(i)if(typeof i.endLineNumber=="number"&&typeof i.endColumn=="number")e.setSelection(i),e.revealRangeInCenter(i,1);else{const s={lineNumber:i.startLineNumber,column:i.startColumn};e.setPosition(s),e.revealPositionInCenter(s,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};$w=OR([HD(1,ps),HD(2,Zo)],$w);var CS=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},os=function(r,e){return function(t,n){e(t,n,r)}};let kR=0,zD=!1;function AR(){zD||(zD=!0,LT(document.body))}let Kw=class extends Bw{constructor(e,t,n,i,s,o,a,l,u,h){const v=Object.assign({},t);v.ariaLabel=v.ariaLabel||Cb.editorViewAccessibleLabel,v.ariaLabel=v.ariaLabel+";"+Cb.accessibilityHelpMessage,super(e,v,{},n,i,s,o,l,u,h),a instanceof vL?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,AR()}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;let i="DYNAMIC_"+ ++kR,s=ha.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(i,e,t,s),i}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Rn.None;const t=e.id,n=e.label,i=ha.and(ha.equals("editorId",this.getId()),ha.deserialize(e.precondition)),s=e.keybindings,o=ha.and(i,ha.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,u=(P,...K)=>Promise.resolve(e.run(this,...K)),h=new gi,v=this.getId()+":"+t;if(h.add(Rr.registerCommand(v,u)),a){let P={command:{id:v,title:n},when:i,group:a,order:l};h.add(J_.appendMenuItem(Jr.EditorContext,P))}if(Array.isArray(s))for(const P of s)h.add(this._standaloneKeybindingService.addDynamicKeybinding(v,P,u,o));let N=new pD(v,n,n,i,u,this._contextKeyService);return this._actions[t]=N,h.add(Qi(()=>{delete this._actions[t]})),h}_triggerCommand(e,t){if(this._codeEditorService instanceof $w)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};Kw=CS([os(2,Dn),os(3,ht),os(4,po),os(5,ps),os(6,Rl),os(7,Zo),os(8,Vc),os(9,Ru)],Kw);let SS=class extends Kw{constructor(e,t,n,i,s,o,a,l,u,h,v,N,P,K,ee){const Se=Object.assign({},t);xb(N,Se,!1);const Le=h.registerEditorContainer(e);typeof Se.theme=="string"&&h.setTheme(Se.theme),typeof Se.autoDetectHighContrast!="undefined"&&h.setAutoDetectHighContrast(Boolean(Se.autoDetectHighContrast));let ce=Se.model;delete Se.model,super(e,Se,i,s,o,a,l,h,v,P),this._contextViewService=u,this._configurationService=N,this._standaloneThemeService=h,this._register(n),this._register(Le);let Ee;if(typeof ce=="undefined"?(Ee=UD(K,ee,Se.value||"",Se.language||vc.text,void 0),this._ownsModel=!0):(Ee=ce,this._ownsModel=!1),this._attachModel(Ee),Ee){let ze={oldModelUrl:null,newModelUrl:Ee.uri};this._onDidChangeModel.fire(ze)}}dispose(){super.dispose()}updateOptions(e){xb(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast!="undefined"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_attachModel(e){super._attachModel(e),this._modelData&&this._contextViewService.setContainer(this._modelData.view.domNode.domNode)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};SS=CS([os(3,Dn),os(4,ht),os(5,po),os(6,ps),os(7,Rl),os(8,x0),os(9,My),os(10,Vc),os(11,ca),os(12,Ru),os(13,La),os(14,Sp)],SS);let ES=class extends Cg{constructor(e,t,n,i,s,o,a,l,u,h,v,N,P,K,ee){const Se=Object.assign({},t);xb(N,Se,!0);const Le=h.registerEditorContainer(e);typeof Se.theme=="string"&&h.setTheme(Se.theme),typeof Se.autoDetectHighContrast!="undefined"&&h.setAutoDetectHighContrast(Boolean(Se.autoDetectHighContrast)),super(e,Se,{},ee,l,s,i,u,h,v,P,K),this._contextViewService=a,this._configurationService=N,this._standaloneThemeService=h,this._register(n),this._register(Le),this._contextViewService.setContainer(this._containerDomElement)}dispose(){super.dispose()}updateOptions(e){xb(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast!="undefined"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(Kw,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};ES=CS([os(3,Dn),os(4,ps),os(5,Rl),os(6,x0),os(7,Ac),os(8,ht),os(9,My),os(10,Vc),os(11,ca),os(12,Hw),os(13,Uw),os(14,zw)],ES);function UD(r,e,t,n,i){if(t=t||"",!n){const s=t.indexOf(`
`);let o=t;return s!==-1&&(o=t.substring(0,s)),jD(r,t,e.createByFilepathOrFirstLine(i||null,o),i)}return jD(r,t,e.create(n),i)}function jD(r,e,t,n){return r.createModel(e,t,n)}class RR{constructor(e){this._languageIdentifier=e}getId(){return this._languageIdentifier.language}}const PR={ModesRegistry:"editor.modesRegistry"};class FR{constructor(){this._onDidChangeLanguages=new $t,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[],this._dynamicLanguages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return[].concat(this._languages).concat(this._dynamicLanguages)}}const _m=new FR;k.add(PR.ModesRegistry,_m);const $D="plaintext",BR=".txt",KD=new Af($D,1);_m.registerLanguage({id:$D,extensions:[BR],aliases:[w("plainText.alias","Plain Text"),"text"],mimetypes:[vc.text]}),$r.register(KD,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],folding:{offSide:!0}},0);const ym=Object.prototype.hasOwnProperty;class WR extends Rn{constructor(e=!0,t=!1){super();this._onDidChange=this._register(new $t),this.onDidChange=this._onDidChange.event,this._warnOnOverwrite=t,this._nextLanguageId2=1,this._languageIdToLanguage=[],this._languageToLanguageId=Object.create(null),this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(_m.onDidChangeLanguages(n=>this._initializeFromRegistry())))}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={};const e=_m.getLanguages();this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{let n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(i=>{this._lowercaseNameMap[i.toLowerCase()]=n.identifier}),n.mimetypes.forEach(i=>{this._mimeTypesMap[i]=n.identifier})}),k.as(pt.Configuration).registerOverrideIdentifiers(_m.getLanguages().map(t=>t.id)),this._onDidChange.fire()}_getLanguageId(e){if(this._languageToLanguageId[e])return this._languageToLanguageId[e];const t=this._nextLanguageId2++;return this._languageIdToLanguage[t]=e,this._languageToLanguageId[e]=t,t}_registerLanguage(e){const t=e.id;let n;if(ym.call(this._languages,t))n=this._languages[t];else{const i=this._getLanguageId(t);n={identifier:new Af(t,i),name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[]},this._languages[t]=n}this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let i=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),i=t.mimetypes[0]),i||(i=`text/x-${n}`,e.mimetypes.push(i)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let a of t.extensions)nw({id:n,mime:i,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let a of t.filenames)nw({id:n,mime:i,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(let a of t.filenamePatterns)nw({id:n,mime:i,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{let l=new RegExp(a);Ug(l)||nw({id:n,mime:i,firstline:l},this._warnOnOverwrite)}catch(l){En(l)}}e.aliases.push(n);let s=null;if(typeof t.aliases!="undefined"&&Array.isArray(t.aliases)&&(t.aliases.length===0?s=[null]:s=t.aliases),s!==null)for(const a of s)!a||a.length===0||e.aliases.push(a);let o=s!==null&&s.length>0;if(!(o&&s[0]===null)){let a=(o?s[0]:null)||n;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration)}isRegisteredMode(e){return ym.call(this._mimeTypesMap,e)?!0:ym.call(this._languages,e)}getModeIdForLanguageNameLowercase(e){return ym.call(this._lowercaseNameMap,e)?this._lowercaseNameMap[e].language:null}extractModeIds(e){return e?e.split(",").map(t=>t.trim()).map(t=>ym.call(this._mimeTypesMap,t)?this._mimeTypesMap[t].language:t).filter(t=>ym.call(this._languages,t)):[]}getLanguageIdentifier(e){if(e===vh||e===0)return Bf;let t;if(typeof e=="string")t=e;else if(t=this._languageIdToLanguage[e],!t)return null;return ym.call(this._languages,t)?this._languages[t].identifier:null}getModeIdsFromFilepathOrFirstLine(e,t){if(!e&&!t)return[];let n=aM(e,t);return this.extractModeIds(n.join(","))}}class GD{constructor(e,t){this._selector=t,this.languageIdentifier=this._selector();let n;this._onDidChange=new $t({onFirstListenerAdd:()=>{n=e(()=>this._evaluate())},onLastListenerRemove:()=>{n.dispose()}}),this.onDidChange=this._onDidChange.event}_evaluate(){let e=this._selector();e.id!==this.languageIdentifier.id&&(this.languageIdentifier=e,this._onDidChange.fire(this.languageIdentifier))}}class VR extends Rn{constructor(e=!1){super();this._onDidCreateMode=this._register(new $t),this.onDidCreateMode=this._onDidCreateMode.event,this._onLanguagesMaybeChanged=this._register(new $t({leakWarningThreshold:200})),this.onLanguagesMaybeChanged=this._onLanguagesMaybeChanged.event,this._instantiatedModes={},this._registry=this._register(new WR(!0,e)),this._register(this._registry.onDidChange(()=>this._onLanguagesMaybeChanged.fire()))}isRegisteredMode(e){return this._registry.isRegisteredMode(e)}getModeIdForLanguageName(e){return this._registry.getModeIdForLanguageNameLowercase(e)}getModeIdByFilepathOrFirstLine(e,t){const n=this._registry.getModeIdsFromFilepathOrFirstLine(e,t);return Jf(n,null)}getModeId(e){const t=this._registry.extractModeIds(e);return Jf(t,null)}getLanguageIdentifier(e){return this._registry.getLanguageIdentifier(e)}create(e){return new GD(this.onLanguagesMaybeChanged,()=>{const t=this.getModeId(e);return this._createModeAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new GD(this.onLanguagesMaybeChanged,()=>{const n=this.getModeIdByFilepathOrFirstLine(e,t);return this._createModeAndGetLanguageIdentifier(n)})}_createModeAndGetLanguageIdentifier(e){const t=this.getLanguageIdentifier(e||"plaintext")||Bf;return this._getOrCreateMode(t.language),t}triggerMode(e){const t=this.getModeId(e);this._getOrCreateMode(t||"plaintext")}_getOrCreateMode(e){if(!this._instantiatedModes.hasOwnProperty(e)){let t=this.getLanguageIdentifier(e)||Bf;this._instantiatedModes[e]=new RR(t),this._onDidCreateMode.fire(this._instantiatedModes[e])}return this._instantiatedModes[e]}}const LS=Te("undoRedoService");class YD{constructor(e,t){this.resource=e,this.elements=t}}class N0{constructor(){this.id=N0._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}N0._ID=0,N0.None=new N0;class Fh{constructor(){this.id=Fh._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}Fh._ID=0,Fh.None=new Fh;class HR{constructor(e,t,n){this._legend=e,this._themeService=t,this._logService=n,this._hashTable=new Qd,this._hasWarnedOverlappingTokens=!1}getMetadata(e,t,n){const i=this._hashTable.get(e,t,n.id);let s;if(i)s=i.metadata,this._logService.getLevel()===ol.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${sl.getForeground(s)}, fontStyle ${sl.getFontStyle(s).toString(2)}`);else{let o=this._legend.tokenTypes[e];const a=[];if(o){let l=t;for(let h=0;l>0&&h<this._legend.tokenModifiers.length;h++)l&1&&a.push(this._legend.tokenModifiers[h]),l=l>>1;l>0&&this._logService.getLevel()===ol.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),a.push("not-in-legend"));const u=this._themeService.getColorTheme().getTokenStyleMetadata(o,a,n.language);typeof u=="undefined"?s=2147483647:(s=0,typeof u.italic!="undefined"&&(s|=(u.italic?1:0)<<11|1),typeof u.bold!="undefined"&&(s|=(u.bold?2:0)<<11|2),typeof u.underline!="undefined"&&(s|=(u.underline?4:0)<<11|4),u.foreground&&(s|=u.foreground<<14|8),s===0&&(s=2147483647))}else this._logService.getLevel()===ol.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),s=2147483647,o="not-in-legend";this._hashTable.add(e,t,n.id,s),this._logService.getLevel()===ol.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${o}) / ${t} (${a.join(" ")}): foreground ${sl.getForeground(s)}, fontStyle ${sl.getFontStyle(s).toString(2)}`)}return s}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}}function zR(r,e,t){const n=r.data,i=r.data.length/5|0,s=Math.max(Math.ceil(i/1024),400),o=[];let a=0,l=1,u=0;for(;a<i;){const h=a;let v=Math.min(h+s,i);if(v<i){let Ee=v;for(;Ee-1>h&&n[5*Ee]===0;)Ee--;if(Ee-1===h){let ze=v;for(;ze+1<i&&n[5*ze]===0;)ze++;v=ze}else v=Ee}let N=new Uint32Array((v-h)*4),P=0,K=0,ee=0,Se=0,Le=0;for(;a<v;){const Ee=5*a,ze=n[Ee],Qe=n[Ee+1],at=l+ze,Ze=ze===0?u+Qe:Qe,rt=n[Ee+2],St=n[Ee+3],un=n[Ee+4],Kt=e.getMetadata(St,un,t);Kt!==2147483647&&(K===0&&(K=at),ee===at&&Le>Ze&&(e.warnOverlappingSemanticTokens(at,Ze+1),Se<Ze?N[P-4+2]=Ze:P-=4),N[P]=at-K,N[P+1]=Ze,N[P+2]=Ze+rt,N[P+3]=Kt,P+=4,ee=at,Se=Ze,Le=Ze+rt),l=at,u=Ze,a++}P!==N.length&&(N=N.subarray(0,P));const ce=new Zb(K,new Yb(N));o.push(ce)}return o}class UR{constructor(e,t,n,i){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=i,this.next=null}}class Qd{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Qd._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Qd._SIZES.length?2/3*this._currentLength:0),this._elements=[],Qd._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const i=this._hashFunc(e,t,n);let s=this._elements[i];for(;s;){if(s.tokenTypeIndex===e&&s.tokenModifierSet===t&&s.languageId===n)return s;s=s.next}return null}add(e,t,n,i){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const s=this._elements;this._currentLengthIndex++,this._currentLength=Qd._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Qd._SIZES.length?2/3*this._currentLength:0),this._elements=[],Qd._nullOutEntries(this._elements,this._currentLength);for(const o of s){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new UR(e,t,n,i))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}Qd._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function jR(r){for(let e=0,t=r.length;e<t;e+=4){const n=r[e+0],i=r[e+1],s=r[e+2],o=r[e+3];r[e+0]=o,r[e+1]=s,r[e+2]=i,r[e+3]=n}}function $R(r){const e=new Uint8Array(r.buffer,r.byteOffset,r.length*4);return $e()||jR(e),sd.wrap(e)}function ZD(r){const e=new Uint32Array(KR(r));let t=0;if(e[t++]=r.id,r.type==="full")e[t++]=1,e[t++]=r.data.length,e.set(r.data,t),t+=r.data.length;else{e[t++]=2,e[t++]=r.deltas.length;for(const n of r.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return $R(e)}function KR(r){let e=0;if(e+=1+1,r.type==="full")e+=1+r.data.length;else{e+=1,e+=(1+1+1)*r.deltas.length;for(const t of r.deltas)t.data&&(e+=t.data.length)}return e}var Gw=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function xS(r){return r&&!!r.data}function GR(r){return r&&Array.isArray(r.edits)}function XD(r,e,t){const n=qD(r);return n?{provider:n,request:Promise.resolve(n.provideDocumentSemanticTokens(r,e,t))}:null}function qD(r){const e=nc.ordered(r);return e.length>0?e[0]:null}function QD(r){const e=vv.ordered(r);return e.length>0?e[0]:null}Rr.registerCommand("_provideDocumentSemanticTokensLegend",(r,...e)=>Gw(void 0,void 0,void 0,function*(){const[t]=e;Sa(t instanceof ci);const n=r.get(La).getModel(t);if(!n)return;const i=qD(n);return i?i.getLegend():r.get(po).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)})),Rr.registerCommand("_provideDocumentSemanticTokens",(r,...e)=>Gw(void 0,void 0,void 0,function*(){const[t]=e;Sa(t instanceof ci);const n=r.get(La).getModel(t);if(!n)return;const i=XD(n,null,Ls.None);if(!i)return r.get(po).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());const{provider:s,request:o}=i;let a;try{a=yield o}catch(u){qn(u);return}if(!a||!xS(a))return;const l=ZD({id:0,type:"full",data:a.data});return a.resultId&&s.releaseDocumentSemanticTokens(a.resultId),l})),Rr.registerCommand("_provideDocumentRangeSemanticTokensLegend",(r,...e)=>Gw(void 0,void 0,void 0,function*(){const[t]=e;Sa(t instanceof ci);const n=r.get(La).getModel(t);if(!n)return;const i=QD(n);if(!!i)return i.getLegend()})),Rr.registerCommand("_provideDocumentRangeSemanticTokens",(r,...e)=>Gw(void 0,void 0,void 0,function*(){const[t,n]=e;Sa(t instanceof ci),Sa(Mt.isIRange(n));const i=r.get(La).getModel(t);if(!i)return;const s=QD(i);if(!s)return;let o;try{o=yield s.provideDocumentRangeSemanticTokens(i,Mt.lift(n),Ls.None)}catch(a){qn(a);return}if(!(!o||!xS(o)))return ZD({id:0,type:"full",data:o.data})}));var YR=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ky=function(r,e){return function(t,n){e(t,n,r)}};function Sg(r){return r.toString()}function JD(r){const e=new If,t=r.createSnapshot();let n;for(;n=t.read();)e.update(n);return e.digest()}class ZR{constructor(e,t,n){this._modelEventListeners=new gi,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(i=>n(e,i)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageIdentifier)),this.model.setMode(e.languageIdentifier)}}const XR=Q||ae?1:2;class qR{constructor(e,t,n,i,s,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=i,this.heapSize=s,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}function QR(r){return r.scheme===Ar.file||r.scheme===Ar.vscodeRemote||r.scheme===Ar.userData||r.scheme==="fake-fs"}let Yw=class tb extends Rn{constructor(e,t,n,i,s){super();this._configurationService=e,this._resourcePropertiesService=t,this._themeService=n,this._logService=i,this._undoRedoService=s,this._onModelAdded=this._register(new $t),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new $t),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new $t),this.onModelModeChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new eP(this._themeService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new JR(this,this._themeService,this._configurationService,this._semanticStyling))}static _readModelOptions(e,t){let n=Et.tabSize;if(e.editor&&typeof e.editor.tabSize!="undefined"){const v=parseInt(e.editor.tabSize,10);isNaN(v)||(n=v),n<1&&(n=1)}let i=n;if(e.editor&&typeof e.editor.indentSize!="undefined"&&e.editor.indentSize!=="tabSize"){const v=parseInt(e.editor.indentSize,10);isNaN(v)||(i=v),i<1&&(i=1)}let s=Et.insertSpaces;e.editor&&typeof e.editor.insertSpaces!="undefined"&&(s=e.editor.insertSpaces==="false"?!1:Boolean(e.editor.insertSpaces));let o=XR;const a=e.eol;a===`\r
`?o=2:a===`
`&&(o=1);let l=Et.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace!="undefined"&&(l=e.editor.trimAutoWhitespace==="false"?!1:Boolean(e.editor.trimAutoWhitespace));let u=Et.detectIndentation;e.editor&&typeof e.editor.detectIndentation!="undefined"&&(u=e.editor.detectIndentation==="false"?!1:Boolean(e.editor.detectIndentation));let h=Et.largeFileOptimizations;return e.editor&&typeof e.editor.largeFileOptimizations!="undefined"&&(h=e.editor.largeFileOptimizations==="false"?!1:Boolean(e.editor.largeFileOptimizations)),{isForSimpleWidget:t,tabSize:n,indentSize:i,insertSpaces:s,detectIndentation:u,defaultEOL:o,trimAutoWhitespace:l,largeFileOptimizations:h}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&n!=="auto"?n:ve===3||ve===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){let i=this._modelCreationOptionsByLanguageAndResource[e+t];if(!i){const s=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:t}),o=this._getEOL(t,e);i=tb._readModelOptions({editor:s,eol:o},n),this._modelCreationOptionsByLanguageAndResource[e+t]=i}return i}_updateModelOptions(){const e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){const s=t[n],o=this._models[s],a=o.model.getLanguageIdentifier().language,l=o.model.uri,u=e[a+l],h=this.getCreationOptions(a,l,o.model.isForSimpleWidget);tb._setModelOptionsForModel(o.model,h,u)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace)&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace}))}_insertDisposedModel(e){this._disposedModels.set(Sg(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(Sg(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(Sg(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,i)=>n.time-i.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,i){const s=this.getCreationOptions(t.language,n,i),o=new hl(e,s,t,n,this._undoRedoService);if(n&&this._disposedModels.has(Sg(n))){const u=this._removeDisposedModel(n),h=this._undoRedoService.getElements(n),v=JD(o)===u.sha1;if(v||u.sharesUndoRedoStack){for(const N of h.past)Pd(N)&&N.matchesResource(n)&&N.setModel(o);for(const N of h.future)Pd(N)&&N.matchesResource(n)&&N.setModel(o);this._undoRedoService.setElementsValidFlag(n,!0,N=>Pd(N)&&N.matchesResource(n)),v&&(o._overwriteVersionId(u.versionId),o._overwriteAlternativeVersionId(u.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(u.initialUndoRedoSnapshot))}else u.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(u.initialUndoRedoSnapshot)}const a=Sg(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new ZR(o,u=>this._onWillDispose(u),(u,h)=>this._onDidChangeLanguage(u,h));return this._models[a]=l,l}createModel(e,t,n,i=!1){let s;return t?(s=this._createModelData(e,t.languageIdentifier,n,i),this.setMode(s.model,t)):s=this._createModelData(e,KD,n,i),this._onModelAdded.fire(s.model),s.model}setMode(e,t){if(!t)return;const n=this._models[Sg(e.uri)];!n||n.setLanguage(t)}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push(this._models[s].model)}return e}getModel(e){const t=Sg(e),n=this._models[t];return n?n.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_onWillDispose(e){const t=Sg(e.uri),n=this._models[t],i=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let s=!1,o=0;if(i||this._shouldRestoreUndoStack()&&QR(e.uri)){const l=this._undoRedoService.getElements(e.uri);if(l.past.length>0||l.future.length>0){for(const u of l.past)Pd(u)&&u.matchesResource(e.uri)&&(s=!0,o+=u.heapSize(e.uri),u.setModel(e.uri));for(const u of l.future)Pd(u)&&u.matchesResource(e.uri)&&(s=!0,o+=u.heapSize(e.uri),u.setModel(e.uri))}}const a=tb.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(s)if(!i&&o>a){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,l=>Pd(l)&&l.matchesResource(e.uri)),this._insertDisposedModel(new qR(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),i,o,JD(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!i){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageIdentifier().language+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,i=e.getLanguageIdentifier().language,s=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(i,e.uri,e.isForSimpleWidget);tb._setModelOptionsForModel(e,o,s),this._onModelModeChanged.fire({model:e,oldModeId:n})}};Yw.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024,Yw=YR([ky(0,ca),ky(1,Qf),ky(2,Zo),ky(3,xd),ky(4,LS)],Yw);const eI="editor.semanticHighlighting";function tI(r,e,t){var n;const i=(n=t.getValue(eI,{overrideIdentifier:r.getLanguageIdentifier().language,resource:r.uri}))===null||n===void 0?void 0:n.enabled;return typeof i=="boolean"?i:e.getColorTheme().semanticHighlighting}class JR extends Rn{constructor(e,t,n,i){super();this._watchers=Object.create(null),this._semanticStyling=i;const s=l=>{this._watchers[l.uri.toString()]=new bm(l,t,this._semanticStyling)},o=(l,u)=>{u.dispose(),delete this._watchers[l.uri.toString()]},a=()=>{for(let l of e.getModels()){const u=this._watchers[l.uri.toString()];tI(l,t,n)?u||s(l):u&&o(l,u)}};this._register(e.onModelAdded(l=>{tI(l,t,n)&&s(l)})),this._register(e.onModelRemoved(l=>{const u=this._watchers[l.uri.toString()];u&&o(l,u)})),this._register(n.onDidChangeConfiguration(l=>{l.affectsConfiguration(eI)&&a()})),this._register(t.onDidColorThemeChange(a))}}class eP extends Rn{constructor(e,t){super();this._themeService=e,this._logService=t,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new HR(e.getLegend(),this._themeService,this._logService)),this._caches.get(e)}}class tP{constructor(e,t,n){this._provider=e,this.resultId=t,this.data=n}dispose(){this._provider.releaseDocumentSemanticTokens(this.resultId)}}class bm extends Rn{constructor(e,t,n){super();this._isDisposed=!1,this._model=e,this._semanticStyling=n,this._fetchDocumentSemanticTokens=this._register(new ys(()=>this._fetchDocumentSemanticTokensNow(),bm.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule()})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const i=()=>{Vi(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const s of nc.all(e))typeof s.onDidChange=="function"&&this._documentProvidersChangeListeners.push(s.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};i(),this._register(nc.onDidChange(()=>{i(),this._fetchDocumentSemanticTokens.schedule()})),this._register(t.onDidColorThemeChange(s=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule()})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;const e=new ya,t=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,n=XD(this._model,t,e.token);if(!n){this._currentDocumentResponse&&this._model.setSemanticTokens(null,!1);return}const{provider:i,request:s}=n;this._currentDocumentRequestCancellationTokenSource=e;const o=[],a=this._model.onDidChangeContent(u=>{o.push(u)}),l=this._semanticStyling.get(i);s.then(u=>{this._currentDocumentRequestCancellationTokenSource=null,a.dispose(),this._setDocumentSemanticTokens(i,u||null,l,o)},u=>{u&&(or(u)||typeof u.message=="string"&&u.message.indexOf("busy")!==-1)||En(u),this._currentDocumentRequestCancellationTokenSource=null,a.dispose(),o.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule())})}static _copy(e,t,n,i,s){for(let o=0;o<s;o++)n[i+o]=e[t+o]}_setDocumentSemanticTokens(e,t,n,i){const s=this._currentDocumentResponse,o=()=>{i.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule()};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.setSemanticTokens(null,!1);return}if(!t){this._model.setSemanticTokens(null,!0),o();return}if(GR(t)){if(!s){this._model.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:s.data};else{let a=0;for(const N of t.edits)a+=(N.data?N.data.length:0)-N.deleteCount;const l=s.data,u=new Uint32Array(l.length+a);let h=l.length,v=u.length;for(let N=t.edits.length-1;N>=0;N--){const P=t.edits[N],K=h-(P.start+P.deleteCount);K>0&&(bm._copy(l,h-K,u,v-K,K),v-=K),P.data&&(bm._copy(P.data,0,u,v-P.data.length,P.data.length),v-=P.data.length),h=P.start}h>0&&bm._copy(l,0,u,0,h),t={resultId:t.resultId,data:u}}}if(xS(t)){this._currentDocumentResponse=new tP(e,t.resultId,t.data);const a=zR(t,n,this._model.getLanguageIdentifier());if(i.length>0)for(const l of i)for(const u of a)for(const h of l.changes)u.applyEdit(h.range,h.text);this._model.setSemanticTokens(a,!0)}else this._model.setSemanticTokens(null,!0);o()}}bm.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY=300;class nP{constructor(e,t,n,i,s){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=i,this.background=s}}function iP(r){if(!r||!Array.isArray(r))return[];let e=[],t=0;for(let n=0,i=r.length;n<i;n++){let s=r[n],o=-1;if(typeof s.fontStyle=="string"){o=0;let u=s.fontStyle.split(" ");for(let h=0,v=u.length;h<v;h++)switch(u[h]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break}}let a=null;typeof s.foreground=="string"&&(a=s.foreground);let l=null;typeof s.background=="string"&&(l=s.background),e[t++]=new nP(s.token||"",n,o,a,l)}return e}function rP(r,e){r.sort((h,v)=>{let N=uP(h.token,v.token);return N!==0?N:h.index-v.index});let t=0,n="000000",i="ffffff";for(;r.length>=1&&r[0].token==="";){let h=r.shift();h.fontStyle!==-1&&(t=h.fontStyle),h.foreground!==null&&(n=h.foreground),h.background!==null&&(i=h.background)}let s=new oP;for(let h of e)s.getId(h);let o=s.getId(n),a=s.getId(i),l=new DS(t,o,a),u=new IS(l);for(let h=0,v=r.length;h<v;h++){let N=r[h];u.insert(N.token,N.fontStyle,s.getId(N.foreground),s.getId(N.background))}return new nI(s,u)}const sP=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class oP{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(sP);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=Tn.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}class nI{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(iP(e),t)}static createFromParsedTokenTheme(e,t){return rP(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n=="undefined"){let i=this._match(t),s=lP(t);n=(i.metadata|s<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}const aP=/\b(comment|string|regex|regexp)\b/;function lP(r){let e=r.match(aP);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"regexp":return 4}throw new Error("Unexpected match for standard token type!")}function uP(r,e){return r<e?-1:r>e?1:0}class DS{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}clone(){return new DS(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}}class IS{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;let t=e.indexOf("."),n,i;t===-1?(n=e,i=""):(n=e.substring(0,t),i=e.substring(t+1));let s=this._children.get(n);return typeof s!="undefined"?s.match(i):this._mainRule}insert(e,t,n,i){if(e===""){this._mainRule.acceptOverwrite(t,n,i);return}let s=e.indexOf("."),o,a;s===-1?(o=e,a=""):(o=e.substring(0,s),a=e.substring(s+1));let l=this._children.get(o);typeof l=="undefined"&&(l=new IS(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,n,i)}}function cP(r){let e=[];for(let t=1,n=r.length;t<n;t++){let i=r[t];e[t]=`.mtk${t} { color: ${i}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.join(`
`)}const hP={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[jd]:"#FFFFFE",[dy]:"#000000",[IC]:"#E5EBF1",[fw]:"#D3D3D3",[gw]:"#939393",[Sx]:"#ADD6FF4D",[uO]:"#9DDDFF"}},dP={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[jd]:"#1E1E1E",[dy]:"#D4D4D4",[IC]:"#3A3D41",[fw]:"#404040",[gw]:"#707070",[Sx]:"#ADD6FF26"}},fP={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[jd]:"#000000",[dy]:"#FFFFFF",[fw]:"#FFFFFF",[gw]:"#FFFFFF"}};function gP(){const r=new $t,e=cR();return e.onDidChange(()=>r.fire()),{onDidChange:r.event,getCSS(){const t={},n=s=>{let o=s.defaults;for(;fc.isThemeIcon(o);){const l=e.getIcon(o.id);if(!l)return;o=l.defaults}const a=o.fontId;if(a){const l=e.getIconFont(a);if(l)return t[a]=l,`.codicon-${s.id}:before { content: '${o.fontCharacter}'; font-family: ${ds(a)}; }`}return`.codicon-${s.id}:before { content: '${o.fontCharacter}'; }`},i=[];for(let s of e.getIcons()){const o=n(s);o&&i.push(o)}for(let s in t){const a=t[s].definition.src.map(l=>`${xc(l.location)} format('${l.format}')`).join(", ");i.push(`@font-face { src: ${a}; font-family: ${ds(s)}; }`)}return i.join(`
`)}}}const wm="vs",Zw="vs-dark",T0="hc-black",pP=k.as(yx.ColorContribution),mP=k.as(EL.ThemingContribution);class iI{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let n=t.base;e.length>0?(Xw(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(let t in this.themeData.colors)e.set(t,Tn.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=NS(this.themeData.base);for(let n in t.colors)e.has(n)||e.set(n,Tn.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=pP.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case wm:return Oh.LIGHT;case T0:return Oh.HIGH_CONTRAST;default:return Oh.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let n=NS(this.themeData.base);e=n.rules,n.encodedTokensColors&&(t=n.encodedTokensColors)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=nI.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const s=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=sl.getForeground(s),a=sl.getFontStyle(s);return{foreground:o,italic:Boolean(a&1),bold:Boolean(a&2),underline:Boolean(a&4)}}}function Xw(r){return r===wm||r===Zw||r===T0}function NS(r){switch(r){case wm:return hP;case Zw:return dP;case T0:return fP}}function TS(r){let e=NS(r);return new iI(r,e)}class vP extends Rn{constructor(){super();this._onColorThemeChange=this._register(new $t),this.onDidColorThemeChange=this._onColorThemeChange.event,this._environment=Object.create(null),this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(wm,TS(wm)),this._knownThemes.set(Zw,TS(Zw)),this._knownThemes.set(T0,TS(T0));const e=gP();this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(wm),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),af("(forced-colors: active)",()=>{this._updateActualTheme()})}registerEditorContainer(e){return Pg(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Mo(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),Rn.None}_registerShadowDomContainer(e){const t=Mo(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!Xw(t.base)&&!Xw(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new iI(e,t)),Xw(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(wm),this._desiredTheme=t,this._updateActualTheme()}_updateActualTheme(){const e=this._autoDetectHighContrast&&window.matchMedia("(forced-colors: active)").matches?this._knownThemes.get(T0):this._desiredTheme;this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._updateActualTheme()}_updateThemeOrColorMap(){let e=[],t={},n={addRule:s=>{t[s]||(e.push(s),t[s]=!0)}};mP.getThemingParticipants().forEach(s=>s(this._theme,n,this._environment));const i=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(cP(i)),this._themeCSS=e.join(`
`),this._updateCSS(),bs.setColorMap(i),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}}var _P=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},yP=function(r,e){return function(t,n){e(t,n,r)}};const Ay="data-keybinding-context";class MS{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t=="undefined"&&this._parent?this._parent.getValue(e):t}}class M0 extends MS{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}M0.INSTANCE=new M0;class Ry extends MS{constructor(e,t,n){super(e,null);this._configurationService=t,this._values=Mc.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(i=>{if(i.source===6){const s=Array.from(ti.map(this._values,([o])=>o));this._values.clear(),n.fire(new sI(s))}else{const s=[];for(const o of i.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(s.push(...ti.map(l,([u])=>u)),this._values.deleteSuperstr(a)),this._values.has(a)&&(s.push(a),this._values.delete(a))}n.fire(new sI(s))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(Ry._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(Ry._keyPrefix.length),n=this._configurationService.getValue(t);let i;switch(typeof n){case"number":case"boolean":case"string":i=n;break;default:Array.isArray(n)?i=JSON.stringify(n):i=n}return this._values.set(e,i),i}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}Ry._keyPrefix="config.";class bP{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue=="undefined"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class rI{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class sI{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}}class wP{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}}class oI{constructor(e){this._onDidChangeContext=new Lo({merge:t=>new wP(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new bP(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new CP(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return qv.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);!n||n.setValue(e,t)&&this._onDidChangeContext.fire(new rI(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new rI(e))}getContext(e){return this._isDisposed?M0.INSTANCE:this.getContextValuesContainer(SP(e))}}let OS=class extends oI{constructor(e){super(0);this._contexts=new Map,this._toDispose=new gi,this._lastContextId=0;const t=new Ry(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?M0.INSTANCE:this._contexts.get(e)||M0.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let t=++this._lastContextId;return this._contexts.set(t,new MS(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};OS=_P([yP(0,ca)],OS);class CP extends oI{constructor(e,t){super(e.createChildContext());if(this._parentChangeListener=new vs,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(Ay)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(Ay,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(Ay),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?M0.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function SP(r){for(;r;){if(r.hasAttribute(Ay)){const e=r.getAttribute(Ay);return e?parseInt(e,10):NaN}r=r.parentElement}return 0}Rr.registerCommand(IT,function(r,e,t){r.get(ps).createKey(String(e),t)}),Rr.registerCommand({id:"getContextKeyInfo",handler(){return[...nr.all()].sort((r,e)=>r.key.localeCompare(e.key))},description:{description:w("getContextKeyInfo","A command that returns information about context keys"),args:[]}}),Rr.registerCommand("_generateContextKeyInfo",function(){const r=[],e=new Set;for(let t of nr.all())e.has(t.key)||(e.add(t.key),r.push(t));r.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(r,void 0,2))});var pa;(function(r){function e(s,o){if(s.start>=o.end||o.start>=s.end)return{start:0,end:0};const a=Math.max(s.start,o.start),l=Math.min(s.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}r.intersect=e;function t(s){return s.end-s.start<=0}r.isEmpty=t;function n(s,o){return!t(e(s,o))}r.intersects=n;function i(s,o){const a=[],l={start:s.start,end:Math.min(o.start,s.end)},u={start:Math.max(o.end,s.start),end:s.end};return t(l)||a.push(l),t(u)||a.push(u),a}r.relativeComplement=i})(pa||(pa={}));var Eg;(function(r){r[r.AVOID=0]="AVOID",r[r.ALIGN=1]="ALIGN"})(Eg||(Eg={}));function O0(r,e,t){const n=t.mode===Eg.ALIGN?t.offset:t.offset+t.size,i=t.mode===Eg.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=r-n?n:e<=i?i-e:Math.max(r-e,0):e<=i?i-e:e<=r-n?n:0}class k0 extends Rn{constructor(e,t){super();this.container=null,this.delegate=null,this.toDisposeOnClean=Rn.None,this.toDisposeOnSetContainer=Rn.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=vi(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,th(this.view),this.setContainer(e,t),this._register(Qi(()=>this.setContainer(null,1)))}setContainer(e,t){var n;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(n=this.shadowRootHostElement)===null||n===void 0||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=vi(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const s=document.createElement("style");s.textContent=EP,this.shadowRoot.appendChild(s),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(vi("slot"))}else this.container.appendChild(this.view);const i=new gi;k0.BUBBLE_UP_EVENTS.forEach(s=>{i.add(eo(this.container,s,o=>{this.onDOMEvent(o,!1)}))}),k0.BUBBLE_DOWN_EVENTS.forEach(s=>{i.add(eo(this.container,s,o=>{this.onDOMEvent(o,!0)},!0))}),this.toDisposeOnSetContainer=i}}show(e){this.isVisible()&&this.hide(),co(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2500",this.view.style.position=this.useFixedPosition?"fixed":"absolute",of(this.view),this.toDisposeOnClean=e.render(this.view)||Rn.None,this.delegate=e,this.doLayout(),this.delegate.focus&&this.delegate.focus()}getViewElement(){return this.view}layout(){if(!!this.isVisible()){if(this.delegate.canRelayout===!1&&!(te&&tt.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let e=this.delegate.getAnchor(),t;if($u(e)){let v=vl(e);t={top:v.top,left:v.left,width:v.width,height:v.height}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};const n=Og(this.view),i=kg(this.view),s=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,u;if(a===0){const v={offset:t.top-window.pageYOffset,size:t.height,position:s===0?0:1},N={offset:t.left,size:t.width,position:o===0?0:1,mode:Eg.ALIGN};l=O0(window.innerHeight,i,v)+window.pageYOffset,pa.intersects({start:l,end:l+i},{start:v.offset,end:v.offset+v.size})&&(N.mode=Eg.AVOID),u=O0(window.innerWidth,n,N)}else{const v={offset:t.left,size:t.width,position:o===0?0:1},N={offset:t.top,size:t.height,position:s===0?0:1,mode:Eg.ALIGN};u=O0(window.innerWidth,n,v),pa.intersects({start:u,end:u+n},{start:v.offset,end:v.offset+v.size})&&(N.mode=Eg.AVOID),l=O0(window.innerHeight,i,N)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(s===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const h=vl(this.container);this.view.style.top=`${l-(this.useFixedPosition?vl(this.view).top:h.top)}px`,this.view.style.left=`${u-(this.useFixedPosition?vl(this.view).left:h.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,(t==null?void 0:t.onHide)&&t.onHide(e),this.toDisposeOnClean.dispose(),th(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!io(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}k0.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],k0.BUBBLE_DOWN_EVENTS=["click"];let EP=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;function aI(r){let e=r.definition;for(;e instanceof us;)e=e.definition;return`.codicon-${r.id}:before { content: '${e.fontCharacter}'; }`}function lI(...r){return function(e,t){for(let n=0,i=r.length;n<i;n++){const s=r[n](e,t);if(s)return s}return null}}const kS=LP.bind(void 0,!0);function LP(r,e,t){if(!t||t.length<e.length)return null;let n;return r?n=td(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function xP(r,e){const t=e.toLowerCase().indexOf(r.toLowerCase());return t===-1?null:[{start:t,end:t+r.length}]}function DP(r,e){return AS(r.toLowerCase(),e.toLowerCase(),0,0)}function AS(r,e,t,n){if(t===r.length)return[];if(n===e.length)return null;if(r[t]===e[n]){let i=null;return(i=AS(r,e,t+1,n+1))?FS({start:n,end:n+1},i):null}return AS(r,e,t,n+1)}function RS(r){return 97<=r&&r<=122}function qw(r){return 65<=r&&r<=90}function PS(r){return 48<=r&&r<=57}function uI(r){return r===32||r===9||r===10||r===13}const cI=new Set;"`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?".split("").forEach(r=>cI.add(r.charCodeAt(0)));function Qw(r){return uI(r)||cI.has(r)}function IP(r,e){return r===e||Qw(r)&&Qw(e)}function hI(r){return RS(r)||qw(r)||PS(r)}function FS(r,e){return e.length===0?e=[r]:r.end===e[0].start?e[0].start=r.start:e.unshift(r),e}function dI(r,e){for(let t=e;t<r.length;t++){const n=r.charCodeAt(t);if(qw(n)||PS(n)||t>0&&!hI(r.charCodeAt(t-1)))return t}return r.length}function BS(r,e,t,n){if(t===r.length)return[];if(n===e.length)return null;if(r[t]!==e[n].toLowerCase())return null;{let i=null,s=n+1;for(i=BS(r,e,t+1,n+1);!i&&(s=dI(e,s))<e.length;)i=BS(r,e,t+1,s),s++;return i===null?null:FS({start:n,end:n+1},i)}}function NP(r){let e=0,t=0,n=0,i=0,s=0;for(let h=0;h<r.length;h++)s=r.charCodeAt(h),qw(s)&&e++,RS(s)&&t++,hI(s)&&n++,PS(s)&&i++;const o=e/r.length,a=t/r.length,l=n/r.length,u=i/r.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:u}}function TP(r){const{upperPercent:e,lowerPercent:t}=r;return t===0&&e>.6}function MP(r){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:i}=r;return t>.2&&e<.8&&n>.6&&i<.2}function OP(r){let e=0,t=0,n=0,i=0;for(let s=0;s<r.length;s++)n=r.charCodeAt(s),qw(n)&&e++,RS(n)&&t++,uI(n)&&i++;return(e===0||t===0)&&i===0?r.length<=30:e<=5}function fI(r,e){if(!e||(e=e.trim(),e.length===0)||!OP(r)||e.length>60)return null;const t=NP(e);if(!MP(t)){if(!TP(t))return null;e=e.toLowerCase()}let n=null,i=0;for(r=r.toLowerCase();i<e.length&&(n=BS(r,e,0,i))===null;)i=dI(e,i+1);return n}function VB(r,e,t=!1){if(!e||e.length===0)return null;let n=null,i=0;for(r=r.toLowerCase(),e=e.toLowerCase();i<e.length&&(n=WS(r,e,0,i,t))===null;)i=gI(e,i+1);return n}function WS(r,e,t,n,i){if(t===r.length)return[];if(n===e.length)return null;if(IP(r.charCodeAt(t),e.charCodeAt(n))){let s=null,o=n+1;if(s=WS(r,e,t+1,n+1,i),!i)for(;!s&&(o=gI(e,o))<e.length;)s=WS(r,e,t+1,o,i),o++;return s===null?null:FS({start:n,end:n+1},s)}else return null}function gI(r,e){for(let t=e;t<r.length;t++)if(Qw(r.charCodeAt(t))||t>0&&Qw(r.charCodeAt(t-1)))return t;return r.length}const kP=lI(kS,fI,xP),AP=lI(kS,fI,DP),pI=new Zg(1e4);function mI(r,e,t=!1){if(typeof r!="string"||typeof e!="string")return null;let n=pI.get(r);n||(n=new RegExp(Jh(r),"i"),pI.set(r,n));const i=n.exec(e);return i?[{start:i.index,end:i.index+i[0].length}]:t?AP(r,e):kP(r,e)}function HB(r,e,t,n,i,s){const o=Math.min(13,r.length);for(;t<o;t++){const a=t1(r,e,t,n,i,s,!1);if(a)return a}return[0,s]}function zB(r){if(typeof r=="undefined")return[];const e=[],t=r[1];for(let n=r.length-1;n>1;n--){const i=r[n]+t,s=e[e.length-1];s&&s.end===i?s.end=i+1:e.push({start:i,end:i+1})}return e}const Lg=128;function VS(){const r=[],e=[];for(let t=0;t<=Lg;t++)e[t]=0;for(let t=0;t<=Lg;t++)r.push(e.slice(0));return r}function vI(r){const e=[];for(let t=0;t<=r;t++)e[t]=0;return e}const _I=vI(2*Lg),HS=vI(2*Lg),Bh=VS(),xg=VS(),Py=VS(),RP=!1;function zS(r,e,t,n,i){function s(a,l,u=" "){for(;a.length<l;)a=u+a;return a}let o=` |   |${n.split("").map(a=>s(a,3)).join("|")}
`;for(let a=0;a<=t;a++)a===0?o+=" |":o+=`${e[a-1]}|`,o+=r[a].slice(0,i+1).map(l=>s(l.toString(),3)).join("|")+`
`;return o}function PP(r,e,t,n){r=r.substr(e),t=t.substr(n),console.log(zS(xg,r,r.length,t,t.length)),console.log(zS(Py,r,r.length,t,t.length)),console.log(zS(Bh,r,r.length,t,t.length))}function Jw(r,e){if(e<0||e>=r.length)return!1;const t=r.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!ko(t)}}function yI(r,e){if(e<0||e>=r.length)return!1;switch(r.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function e1(r,e,t){return e[r]!==t[r]}function FP(r,e,t,n,i,s,o=!1){for(;e<t&&i<s;)r[e]===n[i]&&(o&&(_I[e]=i),e+=1),i+=1;return e===t}var Cm;(function(r){r.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}r.isDefault=e})(Cm||(Cm={}));function t1(r,e,t,n,i,s,o){const a=r.length>Lg?Lg:r.length,l=n.length>Lg?Lg:n.length;if(t>=a||s>=l||a-t>l-s||!FP(e,t,a,i,s,l,!0))return;BP(a,l,t,s,e,i);let u=1,h=1,v=t,N=s;const P=[!1];for(u=1,v=t;v<a;u++,v++){const ce=_I[v],Ee=HS[v],ze=v+1<a?HS[v+1]:l;for(h=ce-s+1,N=ce;N<ze;h++,N++){let Qe=Number.MIN_SAFE_INTEGER,at=!1;N<=Ee&&(Qe=WP(r,e,v,t,n,i,N,l,s,Bh[u-1][h-1]===0,P));let Ze=0;Qe!==Number.MAX_SAFE_INTEGER&&(at=!0,Ze=Qe+xg[u-1][h-1]);const rt=N>ce,St=rt?xg[u][h-1]+(Bh[u][h-1]>0?-5:0):0,un=N>ce+1&&Bh[u][h-1]>0,Kt=un?xg[u][h-2]+(Bh[u][h-2]>0?-5:0):0;if(un&&(!rt||Kt>=St)&&(!at||Kt>=Ze))xg[u][h]=Kt,Py[u][h]=3,Bh[u][h]=0;else if(rt&&(!at||St>=Ze))xg[u][h]=St,Py[u][h]=2,Bh[u][h]=0;else if(at)xg[u][h]=Ze,Py[u][h]=1,Bh[u][h]=Bh[u-1][h-1]+1;else throw new Error("not possible")}}if(RP&&PP(r,t,n,s),!P[0]&&!o)return;u--,h--;const K=[xg[u][h],s];let ee=0,Se=0;for(;u>=1;){let ce=h;do{const Ee=Py[u][ce];if(Ee===3)ce=ce-2;else if(Ee===2)ce=ce-1;else break}while(ce>=1);ee>1&&e[t+u-1]===i[s+h-1]&&!e1(ce+s-1,n,i)&&ee+1>Bh[u][ce]&&(ce=h),ce===h?ee++:ee=1,Se||(Se=ce),u--,h=ce-1,K.push(h)}l===a&&(K[0]+=2);const Le=Se-a;return K[0]-=Le,K}function BP(r,e,t,n,i,s){let o=r-1,a=e-1;for(;o>=t&&a>=n;)i[o]===s[a]&&(HS[o]=a,o--),a--}function WP(r,e,t,n,i,s,o,a,l,u,h){if(e[t]!==s[o])return Number.MIN_SAFE_INTEGER;let v=1,N=!1;return o===t-n?v=r[t]===i[o]?7:5:e1(o,i,s)&&(o===0||!e1(o-1,i,s))?(v=r[t]===i[o]?7:5,N=!0):Jw(s,o)&&(o===0||!Jw(s,o-1))?v=5:(Jw(s,o-1)||yI(s,o-1))&&(v=5,N=!0),v>1&&t===n&&(h[0]=!0),N||(N=e1(o,i,s)||Jw(s,o-1)||yI(s,o-1)),t===n?o>l&&(v-=N?3:5):u?v+=N?2:0:v+=N?0:1,o+1===a&&(v-=N?3:5),v}function UB(r,e,t,n,i,s,o){return VP(r,e,t,n,i,s,!0,o)}function VP(r,e,t,n,i,s,o,a){let l=t1(r,e,t,n,i,s,a);if(l&&!o)return l;if(r.length>=3){const u=Math.min(7,r.length-1);for(let h=t+1;h<u;h++){const v=HP(r,h);if(v){const N=t1(v,v.toLowerCase(),t,n,i,s,a);N&&(N[0]-=3,(!l||N[0]>l[0])&&(l=N))}}}return l}function HP(r,e){if(e+1>=r.length)return;const t=r[e],n=r[e+1];if(t!==n)return r.slice(0,e)+n+t+r.slice(e+2)}const Fy="$(",US=new RegExp(`\\$\\(${Ko.iconNameExpression}(?:${Ko.iconModifierExpression})?\\)`,"g"),zP=new RegExp(`(\\\\)?${US.source}`,"g");function jB(r){return r.replace(zP,(e,t)=>t?e:`\\${e}`)}const UP=new RegExp(`\\\\${US.source}`,"g");function $B(r){return r.replace(UP,e=>`\\${e}`)}const jP=new RegExp(`(\\s)?(\\\\)?${US.source}(\\s)?`,"g");function $P(r){return r.indexOf(Fy)===-1?r:r.replace(jP,(e,t,n,i)=>n?e:t||i||"")}function n1(r){const e=r.indexOf(Fy);return e===-1?{text:r}:KP(r,e)}function KP(r,e){const t=[];let n="";function i(N){if(N){n+=N;for(const P of N)t.push(a)}}let s=-1,o="",a=0,l,u,h=e;const v=r.length;for(i(r.substr(0,e));h<v;)l=r[h],u=r[h+1],l===Fy[0]&&u===Fy[1]?(s=h,i(o),o=Fy,h++):l===")"&&s!==-1?(a+=h-s+1,s=-1,o=""):s!==-1?/^[a-z0-9\-]$/i.test(l)?o+=l:(i(o),s=-1,o=""):i(l),h++;return i(o),{text:n,iconOffsets:t}}function i1(r,e,t=!1){const{text:n,iconOffsets:i}=e;if(!i||i.length===0)return mI(r,n,t);const s=Hg(n," "),o=n.length-s.length,a=mI(r,s,t);if(a)for(const l of a){const u=i[l.start+o]+o;l.start+=u,l.end+=u}return a}const jS=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,$S=/(&amp;)?(&amp;)([^\s&])/g,bI=rl("menu-selection",us.check),wI=rl("menu-submenu",us.chevronRight);var r1;(function(r){r[r.Right=0]="Right",r[r.Left=1]="Left"})(r1||(r1={}));class Sm extends E0{constructor(e,t,n={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const i=document.createElement("div");i.classList.add("monaco-menu"),i.setAttribute("role","presentation"),super(i,{orientation:1,actionViewItemProvider:a=>this.doGetActionViewItem(a,n,s),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...ae||Q?[10]:[]],keyDown:!0}}),this.menuElement=i,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new gi),this.initializeStyleSheet(e),yn(i,hi.KEY_DOWN,a=>{new jr(a).equals(2)&&a.preventDefault()}),n.enableMnemonics&&this.menuDisposables.add(yn(i,hi.KEY_DOWN,a=>{const l=a.key.toLocaleLowerCase();if(this.mnemonics.has(l)){Gr.stop(a,!0);const u=this.mnemonics.get(l);if(u.length===1&&(u[0]instanceof CI&&u[0].container&&this.focusItemByElement(u[0].container),u[0].onClick(a)),u.length>1){const h=u.shift();h&&h.container&&(this.focusItemByElement(h.container),u.push(h)),this.mnemonics.set(l,u)}}})),Q&&this._register(yn(i,hi.KEY_DOWN,a=>{const l=new jr(a);l.equals(14)||l.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Gr.stop(a,!0)):(l.equals(13)||l.equals(12))&&(this.focusedItem=0,this.focusPrevious(),Gr.stop(a,!0))})),this._register(yn(this.domNode,hi.MOUSE_OUT,a=>{let l=a.relatedTarget;io(l,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),a.stopPropagation())})),this._register(yn(this.actionsList,hi.MOUSE_OVER,a=>{let l=a.target;if(!(!l||!io(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(l),u!==this.focusedItem&&this.updateFocus()}}}));let s={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new iD(i,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const o=this.scrollableElement.getDomNode();o.style.position="",this._register(yn(o,hi.MOUSE_UP,a=>{a.preventDefault()})),i.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(a=>{var l;return((l=n.submenuIds)===null||l===void 0?void 0:l.has(a.id))?(console.warn(`Found submenu cycle: ${a.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(a=>!(a instanceof GS)).forEach((a,l,u)=>{a.updatePositionInSet(l+1,u.length)})}initializeStyleSheet(e){Pg(e)?(this.styleSheet=Mo(e),this.styleSheet.textContent=SI):(Sm.globalStyleSheet||(Sm.globalStyleSheet=Mo(),Sm.globalStyleSheet.textContent=SI),this.styleSheet=Sm.globalStyleSheet)}style(e){const t=this.getContainer(),n=e.foregroundColor?`${e.foregroundColor}`:"",i=e.backgroundColor?`${e.backgroundColor}`:"",s=e.borderColor?`1px solid ${e.borderColor}`:"",o=e.shadowColor?`0 2px 4px ${e.shadowColor}`:"";t.style.border=s,this.domNode.style.color=n,this.domNode.style.backgroundColor=i,t.style.boxShadow=o,this.viewItems&&this.viewItems.forEach(a=>{(a instanceof KS||a instanceof GS)&&a.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){let n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0),typeof this.focusedItem!="undefined"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof Zp)return new GS(t.context,e,{icon:!0});if(e instanceof CL){const i=new CI(e,e.actions,n,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){const s=i.getMnemonic();if(s&&i.isEnabled()){let o=[];this.mnemonics.has(s)&&(o=this.mnemonics.get(s)),o.push(i),this.mnemonics.set(s,o)}}return i}else{const i={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(i.keybinding=a)}}const s=new KS(t.context,e,i);if(t.enableMnemonics){const o=s.getMnemonic();if(o&&s.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(s),this.mnemonics.set(o,a)}}return s}}}class KS extends Iy{constructor(e,t,n={}){if(n.isMenu=!0,super(t,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){let i=this.getAction().label;if(i){let s=jS.exec(i);s&&(this.mnemonic=(s[1]?s[1]:s[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new ys(()=>{!this.element||(this._register(yn(this.element,hi.MOUSE_UP,i=>{if(Gr.stop(i,!0),ri){if(new ra(i).rightButton)return;this.onClick(i)}else setTimeout(()=>{this.onClick(i)},0)})),this._register(yn(this.element,hi.CONTEXT_MENU,i=>{Gr.stop(i,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),!!this.element&&(this.container=e,this.item=mi(this.element,vi("a.action-menu-item")),this._action.id===Zp.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=mi(this.item,vi("span.menu-item-check"+bI.cssSelector)),this.check.setAttribute("role","none"),this.label=mi(this.item,vi("span.action-label")),this.options.label&&this.options.keybinding&&(mi(this.item,vi("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(!!this.label&&this.options.label){co(this.label);let e=$P(this.getAction().label);if(e){const t=GP(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const n=jS.exec(e);if(n){e=Vg(e),$S.lastIndex=0;let i=$S.exec(e);for(;i&&i[1];)i=$S.exec(e);const s=o=>o.replace(/&amp;&amp;/g,"&amp;");i?this.label.append(Hg(s(e.substr(0,i.index))," "),vi("u",{"aria-hidden":"true"},i[3]),lf(s(e.substr(i.index+i[0].length))," ")):this.label.innerText=s(e).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=w({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.item&&(this.item.title=e)}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){!this.item||(this.getAction().checked?(this.item.classList.add("checked"),this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked","true")):(this.item.classList.remove("checked"),this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked","false")))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,i=e&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=n?n.toString():""),this.check&&(this.check.style.color=t?t.toString():""),this.container&&(this.container.style.border=i)}style(e){this.menuStyle=e,this.applyStyle()}}class CI extends KS{constructor(e,t,n,i){super(e,e,i);this.submenuActions=t,this.parentData=n,this.submenuOptions=i,this.mysubmenu=null,this.submenuDisposables=this._register(new gi),this.mouseOver=!1,this.expandDirection=i&&i.expandDirection!==void 0?i.expandDirection:r1.Right,this.showScheduler=new ys(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new ys(()=>{this.element&&!io(_l(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),!!this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=mi(this.item,vi("span.submenu-indicator"+wI.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(yn(this.element,hi.KEY_UP,t=>{let n=new jr(t);(n.equals(17)||n.equals(3))&&(Gr.stop(t,!0),this.createSubmenu(!0))})),this._register(yn(this.element,hi.KEY_DOWN,t=>{let n=new jr(t);_l()===this.item&&(n.equals(17)||n.equals(3))&&Gr.stop(t,!0)})),this._register(yn(this.element,hi.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(yn(this.element,hi.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(yn(this.element,hi.FOCUS_OUT,t=>{this.element&&!io(_l(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)})))}updateEnabled(){}onClick(e){Gr.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch(t){}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,i){const s={top:0,left:0};return s.left=O0(e.width,t.width,{position:i===r1.Right?0:1,offset:n.left,size:n.width}),s.left>=n.left&&s.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(s.left=n.left+10),n.top+=10,n.height=0),s.top=O0(e.height,t.height,{position:0,offset:n.top,size:0}),s.top+t.height===n.top&&s.top+n.height+t.height<=e.height&&(s.top+=n.height),s}createSubmenu(e=!0){if(!!this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=mi(this.element,vi("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new Sm(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new Mb],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const i=this.element.getBoundingClientRect(),s={top:i.top-n,left:i.left,height:i.height+2*n,width:i.width},o=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new to(window.innerWidth,window.innerHeight),to.lift(o),s,this.expandDirection);this.submenuContainer.style.left=`${l}px`,this.submenuContainer.style.top=`${a}px`,this.submenuDisposables.add(yn(this.submenuContainer,hi.KEY_UP,u=>{new jr(u).equals(15)&&(Gr.stop(u,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(yn(this.submenuContainer,hi.KEY_DOWN,u=>{new jr(u).equals(15)&&Gr.stop(u,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t?`${t}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class GS extends ID{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}function GP(r){const e=jS,t=e.exec(r);if(!t)return r;const n=!t[1];return r.replace(e,n?"$2$3":"").trim()}let SI=`
.monaco-menu {
	font-size: 13px;

}

${aI(bI)}
${aI(wI)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = \u221A\u03C6 */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	opacity: 0.4;
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid #bbb;
	padding-top: 1px;
	margin-left: .8em;
	margin-right: .8em;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	padding: 0.5em 0 0 0;
	margin-bottom: 0.5em;
	width: 100%;
	height: 0px !important;
	margin-left: .8em !important;
	margin-right: .8em !important;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	border: thin solid transparent; /* prevents jumping behaviour on hover or focus */
}


/* High Contrast Theming */
:host-context(.hc-black) .context-view.monaco-menu-container {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .5em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 1.8em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	padding: 0.2em 0 0 0;
	margin-bottom: 0.2em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}

/* Arrows */
.monaco-scrollable-element > .scrollbar > .scra {
	cursor: pointer;
	font-size: 11px !important;
}

.monaco-scrollable-element > .visible {
	opacity: 1;

	/* Background rule added for IE9 - to allow clicks on dom node */
	background:rgba(0,0,0,0);

	transition: opacity 100ms linear;
}
.monaco-scrollable-element > .invisible {
	opacity: 0;
	pointer-events: none;
}
.monaco-scrollable-element > .invisible.fade {
	transition: opacity 800ms linear;
}

/* Scrollable Content Inset Shadow */
.monaco-scrollable-element > .shadow {
	position: absolute;
	display: none;
}
.monaco-scrollable-element > .shadow.top {
	display: block;
	top: 0;
	left: 3px;
	height: 3px;
	width: 100%;
	box-shadow: #DDD 0 6px 6px -6px inset;
}
.monaco-scrollable-element > .shadow.left {
	display: block;
	top: 3px;
	left: 0;
	height: 100%;
	width: 3px;
	box-shadow: #DDD 6px 0 6px -6px inset;
}
.monaco-scrollable-element > .shadow.top-left-corner {
	display: block;
	top: 0;
	left: 0;
	height: 3px;
	width: 3px;
}
.monaco-scrollable-element > .shadow.top.left {
	box-shadow: #DDD 6px 6px 6px -6px inset;
}

/* ---------- Default Style ---------- */

:host-context(.vs) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(100, 100, 100, .4);
}
:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(121, 121, 121, .4);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(111, 195, 223, .6);
}

.monaco-scrollable-element > .scrollbar > .slider:hover {
	background: rgba(100, 100, 100, .7);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider:hover {
	background: rgba(111, 195, 223, .8);
}

.monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(0, 0, 0, .6);
}
:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(191, 191, 191, .4);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(111, 195, 223, 1);
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.top {
	box-shadow: none;
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.left {
	box-shadow: #000 6px 0 6px -6px inset;
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.top.left {
	box-shadow: #000 6px 6px 6px -6px inset;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.top {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.left {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.top.left {
	box-shadow: none;
}
`;function jc(r,e){const t=Object.create(null);for(let n in e){const i=e[n];i&&(t[n]=yg(i,r))}return t}function YS(r,e,t){function n(){const i=jc(r.getColorTheme(),e);typeof t=="function"?t(i):t.style(i)}return n(),r.onDidColorThemeChange(n)}function KB(r,e,t){return YS(e,{badgeBackground:(t==null?void 0:t.badgeBackground)||badgeBackground,badgeForeground:(t==null?void 0:t.badgeForeground)||badgeForeground,badgeBorder:contrastBorder},r)}function A0(r,e,t){return YS(e,Object.assign(Object.assign({},s1),t||{}),r)}const s1={listFocusBackground:QM,listFocusForeground:JM,listFocusOutline:eO,listActiveSelectionBackground:am,listActiveSelectionForeground:_g,listActiveSelectionIconForeground:dw,listFocusAndSelectionBackground:am,listFocusAndSelectionForeground:_g,listInactiveSelectionBackground:tO,listInactiveSelectionIconForeground:iO,listInactiveSelectionForeground:nO,listInactiveFocusBackground:rO,listInactiveFocusOutline:sO,listHoverBackground:oO,listHoverForeground:aO,listDropBackground:lO,listSelectionOutline:Au,listHoverOutline:Au,listFilterWidgetBackground:cO,listFilterWidgetOutline:hO,listFilterWidgetNoMatchesOutline:dO,listMatchesShadow:ow,treeIndentGuidesStroke:fO,tableColumnsBorder:gO},YP={shadowColor:ow,borderColor:_O,foregroundColor:yO,backgroundColor:bO,selectionForegroundColor:wO,selectionBackgroundColor:CO,selectionBorderColor:SO,separatorColor:EO};function ZP(r,e,t){return YS(e,Object.assign(Object.assign({},YP),t),r)}class XP{constructor(e,t,n,i,s){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=i,this.themeService=s,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n,i=$u(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:s=>{let o=e.getMenuClassName?e.getMenuClassName():"";o&&(s.className+=" "+o),this.options.blockMouse&&(this.block=s.appendChild(vi(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",yn(this.block,hi.MOUSE_DOWN,u=>u.stopPropagation()));const a=new gi,l=e.actionRunner||new X1;return l.onBeforeRun(this.onActionRun,this,a),l.onDidRun(this.onDidActionRun,this,a),n=new Sm(s,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:u=>this.keybindingService.lookupKeybinding(u.id)}),a.add(ZP(n,this.themeService)),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(yn(window,hi.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(yn(window,hi.MOUSE_DOWN,u=>{if(u.defaultPrevented)return;let h=new ra(u),v=h.target;if(!h.rightButton){for(;v;){if(v===s)return;v=v.parentElement}this.contextViewService.hideContextView(!0)}})),lr(a,n)},focus:()=>{n&&n.focus(!!e.autoSelectFirstItem)},onHide:s=>{e.onHide&&e.onHide(!!s),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},i,!!i)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!or(e.error)&&this.notificationService.error(e.error)}}var qP=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},By=function(r,e){return function(t,n){e(t,n,r)}};let ZS=class extends Rn{constructor(e,t,n,i,s){super();this.contextMenuHandler=new XP(n,e,t,i,s)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(e),jl.getInstance().resetKeyStatus()}};ZS=qP([By(0,Vb),By(1,Vc),By(2,x0),By(3,Rl),By(4,Zo)],ZS);const o1=Te("layoutService");var QP=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},JP=function(r,e){return function(t,n){e(t,n,r)}};let XS=class extends Rn{constructor(e){super();this.layoutService=e,this.currentViewDisposable=Rn.None,this.container=e.container,this.contextView=this._register(new k0(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,n){t?t!==this.container&&(this.container=t,this.setContainer(t,n?3:2)):this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.contextView.show(e);const i=Qi(()=>{this.currentViewDisposable===i&&this.hideContextView()});return this.currentViewDisposable=i,i}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};XS=QP([JP(0,o1)],XS);const EI=Te("dialogService");class e4{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}}class t4{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(let t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),i),i.incoming.set(this._hashFn(e),n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(let n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new e4(e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(let[e,t]of this._nodes){const n=new Set([e]),i=this._findCycle(t,n);if(i)return i}}_findCycle(e,t){for(let[n,i]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const s=this._findCycle(i,t);if(s)return s;t.delete(n)}}}const LI=!1;class xI extends Error{constructor(e){var t;super("cyclic dependency between services");this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class a1{constructor(e=new xy,t=!1,n){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=n,this._services.set(Dn,this)}createChild(e){return new a1(e,this._strict,this)}invokeFunction(e,...t){let n=su.traceInvocation(e),i=!1;try{return e({get:(o,a)=>{if(i)throw Ii("service accessor is only valid during the invocation of its target method");const l=this._getOrCreateServiceInstance(o,n);if(!l&&a!==Ye)throw new Error(`[invokeFunction] unknown service '${o}'`);return l}},...t)}finally{i=!0,n.stop()}}createInstance(e,...t){let n,i;return e instanceof wg?(n=su.traceCreation(e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=su.traceCreation(e),i=this._createInstance(e,t,n)),n.stop(),i}_createInstance(e,t=[],n){let i=xt.getServiceDependencies(e).sort((a,l)=>a.index-l.index),s=[];for(const a of i){let l=this._getOrCreateServiceInstance(a.id,n);if(!l&&this._strict&&!a.optional)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`);s.push(l)}let o=i.length>0?i[0].index:t.length;if(t.length!==o){console.warn(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);let a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return new e(...[...t,...s])}_setServiceInstance(e,t){if(this._services.get(e)instanceof wg)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let n=this._getServiceInstanceOrDescriptor(e);return n instanceof wg?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const i=new t4(a=>a.id.toString());let s=0;const o=[{id:e,desc:t,_trace:n}];for(;o.length;){const a=o.pop();if(i.lookupOrInsertNode(a),s++>1e3)throw new xI(i);for(let l of xt.getServiceDependencies(a.desc.ctor)){let u=this._getServiceInstanceOrDescriptor(l.id);if(!u&&!l.optional&&console.warn(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`),u instanceof wg){const h={id:l.id,desc:u,_trace:a._trace.branch(l.id,!0)};i.insertEdge(a,h),o.push(h)}}}for(;;){const a=i.roots();if(a.length===0){if(!i.isEmpty())throw new xI(i);break}for(const{data:l}of a){if(this._getServiceInstanceOrDescriptor(l.id)instanceof wg){const h=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,h)}i.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],i,s){if(this._services.get(e)instanceof wg)return this._createServiceInstance(t,n,i,s);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,i,s);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,i){if(n){const s=new Qc(()=>this._createInstance(e,t,i));return new Proxy(Object.create(null),{get(o,a){if(a in o)return o[a];let l=s.value,u=l[a];return typeof u!="function"||(u=u.bind(l),o[a]=u),u},set(o,a,l){return s.value[a]=l,!0}})}else return this._createInstance(e,t,i)}}class su{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return LI?new su(1,e.name||e.toString().substring(0,42).replace(/\n/g,"")):su._None}static traceCreation(e){return LI?new su(0,e.name):su._None}branch(e,t){let n=new su(2,e.toString());return this._dep.push([e,t,n]),n}stop(){let e=Date.now()-this._start;su._totals+=e;let t=!1;function n(s,o){let a=[],l=new Array(s+1).join("	");for(const[u,h,v]of o._dep)if(h&&v){t=!0,a.push(`${l}CREATES -> ${u}`);let N=n(s+1,v);N&&a.push(N)}else a.push(`${l}uses -> ${u}`);return a.join(`
`)}let i=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${su._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(i.join(`
`))}}su._None=new class extends su{constructor(){super(-1,null)}stop(){}branch(){return this}},su._totals=0;const n4=Te("labelService");class Em extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function DI(r,e){const t=[];for(let n of e){if(r.start>=n.range.end)continue;if(r.end<n.range.start)break;const i=pa.intersect(r,n.range);pa.isEmpty(i)||t.push({range:i,size:n.size})}return t}function qS({start:r,end:e},t){return{start:r+t,end:e+t}}function i4(r){const e=[];let t=null;for(let n of r){const i=n.range.start,s=n.range.end,o=n.size;if(t&&o===t.size){t.range.end=s;continue}t={range:{start:i,end:s},size:o},e.push(t)}return e}function r4(...r){return i4(r.reduce((e,t)=>e.concat(t),[]))}class II{constructor(){this.groups=[],this._size=0}splice(e,t,n=[]){const i=n.length-t,s=DI({start:0,end:e},this.groups),o=DI({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:qS(l.range,i),size:l.size})),a=n.map((l,u)=>({range:{start:e+u,end:e+u+1},size:l.size}));this.groups=r4(s,a,o),this._size=this.groups.reduce((l,u)=>l+u.size*(u.range.end-u.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,n=0;for(let i of this.groups){const s=i.range.end-i.range.start,o=n+s*i.size;if(e<o)return t+Math.floor((e-n)/i.size);t+=s,n=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let i of this.groups){const s=i.range.end-i.range.start,o=n+s;if(e<o)return t+(e-n)*i.size;t+=s*i.size,n=o}return-1}}function s4(r){try{r.parentElement&&r.parentElement.removeChild(r)}catch(e){}}class o4{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const n=vi(".monaco-list-row"),s=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:s}}return t}release(e){!e||this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(t.classList.remove("scrolling"),s4(t)),this.getTemplateCache(n).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var Lm=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};const Wh={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(r){return[r]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class Wy{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class a4{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class l4{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}function u4(r,e){return Array.isArray(r)&&Array.isArray(e)?Tl(r,e):r===e}class c4{constructor(e){(e==null?void 0:e.getSetSize)?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,i)=>i,(e==null?void 0:e.getPosInSet)?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,(e==null?void 0:e.getRole)?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",(e==null?void 0:e.isChecked)?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class $c{constructor(e,t,n,i=Wh){if(this.virtualDelegate=t,this.domId=`list_id_${++$c.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Ys(50),this.splicing=!1,this.dragOverAnimationStopDisposable=Rn.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=Rn.None,this.onDragLeaveTimeout=Rn.None,this.disposables=new gi,this._onDidChangeContentHeight=new $t,this._horizontalScrolling=!1,i.horizontalScrolling&&i.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new II;for(const o of n)this.renderers.set(o.templateId,o);this.cache=this.disposables.add(new o4(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof i.mouseSupport=="boolean"?i.mouseSupport:!0),this._horizontalScrolling=Xl(i,o=>o.horizontalScrolling,Wh.horizontalScrolling),this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof i.additionalScrollHeight=="undefined"?0:i.additionalScrollHeight,this.accessibilityProvider=new c4(i.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",Xl(i,o=>o.transformOptimization,Wh.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(es.addTarget(this.rowsContainer)),this.scrollable=new Lw(Xl(i,o=>o.smoothScrolling,!1)?125:0,o=>Hl(o)),this.scrollableElement=this.disposables.add(new UC(this.rowsContainer,{alwaysConsumeMouseWheel:Xl(i,o=>o.alwaysConsumeMouseWheel,Wh.alwaysConsumeMouseWheel),horizontal:1,vertical:Xl(i,o=>o.verticalScrollMode,Wh.verticalScrollMode),useShadows:Xl(i,o=>o.useShadows,Wh.useShadows)},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(yn(this.rowsContainer,ms.Change,o=>this.onTouchChange(o))),this.disposables.add(yn(this.scrollableElement.getDomNode(),"scroll",o=>o.target.scrollTop=0)),this.disposables.add(yn(this.domNode,"dragover",o=>this.onDragOver(this.toDragEvent(o)))),this.disposables.add(yn(this.domNode,"drop",o=>this.onDrop(this.toDragEvent(o)))),this.disposables.add(yn(this.domNode,"dragleave",o=>this.onDragLeave(this.toDragEvent(o)))),this.disposables.add(yn(this.domNode,"dragend",o=>this.onDragEnd(o))),this.setRowLineHeight=Xl(i,o=>o.setRowLineHeight,Wh.setRowLineHeight),this.setRowHeight=Xl(i,o=>o.setRowHeight,Wh.setRowHeight),this.supportDynamicHeights=Xl(i,o=>o.supportDynamicHeights,Wh.supportDynamicHeights),this.dnd=Xl(i,o=>o.dnd,Wh.dnd),this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:pu(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling)}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},o=pa.intersect(i,s),a=new Map;for(let at=o.start;at<o.end;at++){const Ze=this.items[at];if(Ze.dragStartDisposable.dispose(),Ze.row){let rt=a.get(Ze.templateId);rt||(rt=[],a.set(Ze.templateId,rt));const St=this.renderers.get(Ze.templateId);St&&St.disposeElement&&St.disposeElement(Ze.element,at,Ze.row.templateData,Ze.size),rt.push(Ze.row)}Ze.row=null}const l={start:e+t,end:this.items.length},u=pa.intersect(l,i),h=pa.relativeComplement(l,i),v=n.map(at=>({id:String(this.itemId++),element:at,templateId:this.virtualDelegate.getTemplateId(at),size:this.virtualDelegate.getHeight(at),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(at),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:Rn.None}));let N;e===0&&t>=this.items.length?(this.rangeMap=new II,this.rangeMap.splice(0,0,v),N=this.items,this.items=v):(this.rangeMap.splice(e,t,v),N=this.items.splice(e,t,...v));const P=n.length-t,K=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),ee=qS(u,P),Se=pa.intersect(K,ee);for(let at=Se.start;at<Se.end;at++)this.updateItemInDOM(this.items[at],at);const Le=pa.relativeComplement(ee,K);for(const at of Le)for(let Ze=at.start;Ze<at.end;Ze++)this.removeItemFromDOM(Ze);const ce=h.map(at=>qS(at,P)),ze=[{start:e,end:e+n.length},...ce].map(at=>pa.intersect(K,at)),Qe=this.getNextToLastElement(ze);for(const at of ze)for(let Ze=at.start;Ze<at.end;Ze++){const rt=this.items[Ze],St=a.get(rt.templateId),un=St==null?void 0:St.pop();this.insertItemInDOM(Ze,Qe,un)}for(const at of a.values())for(const Ze of at)this.cache.release(Ze);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),N.map(at=>at.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=Hl(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width!="undefined"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(!!this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e=="number"?e:$0(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t!="undefined"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:pu(this.domNode)})}render(e,t,n,i,s,o=!1){const a=this.getRenderRange(t,n),l=pa.relativeComplement(a,e),u=pa.relativeComplement(e,a),h=this.getNextToLastElement(l);if(o){const v=pa.intersect(e,a);for(let N=v.start;N<v.end;N++)this.updateItemInDOM(this.items[N],N)}for(const v of l)for(let N=v.start;N<v.end;N++)this.insertItemInDOM(N,h);for(const v of u)for(let N=v.start;N<v.end;N++)this.removeItemFromDOM(N);i!==void 0&&(this.rowsContainer.style.left=`-${i}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&s!==void 0&&(this.rowsContainer.style.width=`${Math.max(s,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){const i=this.items[e];i.row||(i.row=n!=null?n:this.cache.alloc(i.templateId));const s=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",s);const o=this.accessibilityProvider.isChecked(i.element);typeof o!="undefined"&&i.row.domNode.setAttribute("aria-checked",String(!!o)),i.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(i.row.domNode,t):this.rowsContainer.appendChild(i.row.domNode)),this.updateItemInDOM(i,e);const a=this.renderers.get(i.templateId);if(!a)throw new Error(`No renderer found for template id ${i.templateId}`);a&&a.renderElement(i.element,e,i.row.templateData,i.size);const l=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!l,l&&(i.dragStartDisposable=yn(i.row.domNode,"dragstart",u=>this.onDragStart(i.element,l,u))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=ri?"-moz-fit-content":"fit-content",e.width=pu(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return ei.map(this.disposables.add(new ss(this.domNode,"click")).event,e=>this.toMouseEvent(e))}get onMouseDblClick(){return ei.map(this.disposables.add(new ss(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e))}get onMouseMiddleClick(){return ei.filter(ei.map(this.disposables.add(new ss(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e)),e=>e.browserEvent.button===1)}get onMouseDown(){return ei.map(this.disposables.add(new ss(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e))}get onContextMenu(){return ei.any(ei.map(this.disposables.add(new ss(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e)),ei.map(this.disposables.add(new ss(this.domNode,ms.Contextmenu)).event,e=>this.toGestureEvent(e)))}get onTouchStart(){return ei.map(this.disposables.add(new ss(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e))}get onTap(){return ei.map(this.disposables.add(new ss(this.rowsContainer,ms.Tap)).event,e=>this.toGestureEvent(e))}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t=="undefined"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t=="undefined"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t=="undefined"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t=="undefined"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;const i=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(DD.TEXT,t),n.dataTransfer.setDragImage){let s;this.dnd.getDragLabel&&(s=this.dnd.getDragLabel(i,n)),typeof s=="undefined"&&(s=String(i.length));const o=vi(".monaco-drag-image");o.textContent=s,document.body.appendChild(o),n.dataTransfer.setDragImage(o,-10,-10),setTimeout(()=>document.body.removeChild(o),0)}this.currentDragData=new Wy(i),Gd.CurrentDragAndDropData=new a4(i),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Gd.CurrentDragAndDropData&&Gd.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Gd.CurrentDragAndDropData)this.currentDragData=Gd.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new l4}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect===0?"copy":"move";let n;if(typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index=="undefined"?n=[-1]:n=[e.index],n=Av(n).filter(i=>i>=-1&&i<this.length).sort((i,s)=>i-s),n=n[0]===-1?[-1]:n,u4(this.currentDragFeedback,n))return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=Qi(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const i of n){const s=this.items[i];s.dropTarget=!0,s.row&&s.row.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=Qi(()=>{for(const i of n){const s=this.items[i];s.dropTarget=!1,s.row&&s.row.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=cu(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((n=(t=this.dnd).onDragLeave)===null||n===void 0||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,Gd.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,Gd.CurrentDragAndDropData=void 0,this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=Rn.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=Sc(this.domNode).top;this.dragOverAnimationDisposable=vu(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=cu(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){const i=n.getAttribute("data-index");if(i){const s=Number(i);if(!isNaN(s))return s}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const i=this.getRenderRange(e,t);let s,o;e===this.elementTop(i.start)?(s=i.start,o=0):i.end-i.start>1&&(s=i.start+1,o=this.elementTop(s)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let u=!1;for(let h=l.start;h<l.end;h++){const v=this.probeDynamicHeight(h);v!==0&&this.rangeMap.splice(h,1,[this.items[h]]),a+=v,u=u||v!==0}if(!u){a!==0&&this.eventuallyUpdateScrollDimensions();const h=pa.relativeComplement(i,l);for(const N of h)for(let P=N.start;P<N.end;P++)this.items[P].row&&this.removeItemFromDOM(P);const v=pa.relativeComplement(l,i);for(const N of v)for(let P=N.start;P<N.end;P++){const K=P+1,ee=K<this.items.length?this.items[K].row:null,Se=ee?ee.domNode:null;this.insertItemInDOM(P,Se)}for(let N=l.start;N<l.end;N++)this.items[N].row&&this.updateItemInDOM(this.items[N],N);if(typeof s=="number"){const N=this.scrollable.getFutureScrollPosition().scrollTop-e,P=this.elementTop(s)-o+N;this.setScrollTop(P,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||!!this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const n=t.size;if(!this.setRowHeight&&t.row){let o=t.row.domNode.offsetHeight;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-n}const i=this.cache.alloc(t.templateId);i.domNode.style.height="",this.rowsContainer.appendChild(i.domNode);const s=this.renderers.get(t.templateId);return s&&(s.renderElement(t.element,e,i.templateData,void 0),s.disposeElement&&s.disposeElement(t.element,e,i.templateData,void 0)),t.size=i.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(i.domNode),this.cache.release(i),t.size-n}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){if(this.items){for(const e of this.items)if(e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement&&t.disposeElement(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),Vi(this.disposables)}}$c.InstanceCount=0,Lm([Xs],$c.prototype,"onMouseClick",null),Lm([Xs],$c.prototype,"onMouseDblClick",null),Lm([Xs],$c.prototype,"onMouseMiddleClick",null),Lm([Xs],$c.prototype,"onMouseDown",null),Lm([Xs],$c.prototype,"onContextMenu",null),Lm([Xs],$c.prototype,"onTouchStart",null),Lm([Xs],$c.prototype,"onTap",null);class h4{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(i=>i.splice(e,t,n))}}function Kc(r,e,t){return Math.min(Math.max(r,e),t)}class GB{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this}get value(){return this._val}}var xm=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},NI=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class d4{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.trait}`}renderTemplate(e){return e}renderElement(e,t,n){const i=this.renderedElements.findIndex(s=>s.templateData===n);if(i>=0){const s=this.renderedElements[i];this.trait.unrender(n),s.index=t}else{const s={index:t,templateData:n};this.renderedElements.push(s)}this.trait.renderIndex(t,n)}splice(e,t,n){const i=[];for(const s of this.renderedElements)s.index<e?i.push(s):s.index>=e+t&&i.push({index:s.index+n-t,templateData:s.templateData});this.renderedElements=i}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}class l1{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new $t,this.onChange=this._onChange.event}get trait(){return this._trait}get renderer(){return new d4(this)}splice(e,t,n){var i;t=Math.max(0,Math.min(t,this.length-e));const s=n.length-t,o=e+t,a=[...this.sortedIndexes.filter(u=>u<e),...n.map((u,h)=>u?h+e:-1).filter(u=>u!==-1),...this.sortedIndexes.filter(u=>u>=o).map(u=>u+s)],l=this.length+s;if(this.sortedIndexes.length>0&&a.length===0&&l>0){const u=(i=this.sortedIndexes.find(h=>h>=e))!==null&&i!==void 0?i:l-1;a.push(Math.min(u,l-1))}this.renderer.splice(e,t,n.length),this._set(a,a),this.length=l}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(FI),t)}_set(e,t,n){const i=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=JS(s,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:n}),i}get(){return this.indexes}contains(e){return _o(this.sortedIndexes,e,FI)>=0}dispose(){Vi(this._onChange)}}xm([Xs],l1.prototype,"renderer",null);class f4 extends l1{constructor(e){super("selected");this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class QS{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,n.map(()=>!1));const i=this.trait.get().map(o=>this.identityProvider.getId(this.view.element(o)).toString()),s=n.map(o=>i.indexOf(this.identityProvider.getId(o).toString())>-1);this.trait.splice(e,t,s)}}function Dg(r){return r.tagName==="INPUT"||r.tagName==="TEXTAREA"}function R0(r){return r.classList.contains("monaco-editor")?!0:r.classList.contains("monaco-list")||!r.parentElement?!1:R0(r.parentElement)}class TI{constructor(e,t,n){this.list=e,this.view=t,this.disposables=new gi,this.multipleSelectionDisposables=new gi,this.onKeyDown.filter(i=>i.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport&&this.onKeyDown.filter(i=>(ae?i.metaKey:i.ctrlKey)&&i.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return ei.chain(this.disposables.add(new ss(this.view.domNode,"keydown")).event).filter(e=>!Dg(e.target)).map(e=>new jr(e))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(ae?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent),this.list.reveal(this.list.getFocus()[0]),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent),this.list.reveal(this.list.getFocus()[0]),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent),this.list.reveal(this.list.getFocus()[0]),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent),this.list.reveal(this.list.getFocus()[0]),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(Po(this.list.length),e.browserEvent),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}xm([Xs],TI.prototype,"onKeyDown",null);var P0;(function(r){r[r.Idle=0]="Idle",r[r.Typing=1]="Typing"})(P0||(P0={}));const MI=new class{mightProducePrintableCharacter(r){return r.ctrlKey||r.metaKey||r.altKey?!1:r.keyCode>=31&&r.keyCode<=56||r.keyCode>=21&&r.keyCode<=30||r.keyCode>=93&&r.keyCode<=102||r.keyCode>=80&&r.keyCode<=90}};class g4{constructor(e,t,n,i){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.delegate=i,this.enabled=!1,this.state=P0.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new gi,this.disposables=new gi,this.updateOptions(e.options)}updateOptions(e){(typeof e.enableKeyboardNavigation=="undefined"?!0:!!e.enableKeyboardNavigation)?this.enable():this.disable(),typeof e.automaticKeyboardNavigation!="undefined"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation)}enable(){if(this.enabled)return;const e=ei.chain(this.enabledDisposables.add(new ss(this.view.domNode,"keydown")).event).filter(i=>!Dg(i.target)).filter(()=>this.automaticKeyboardNavigation||this.triggered).map(i=>new jr(i)).filter(i=>this.delegate.mightProducePrintableCharacter(i)).forEach(i=>{i.stopPropagation(),i.preventDefault()}).map(i=>i.browserEvent.key).event,t=ei.debounce(e,()=>null,800);ei.reduce(ei.any(e,t),(i,s)=>s===null?null:(i||"")+s)(this.onInput,this,this.enabledDisposables),t(this.onClear,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){!this.enabled||(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const n=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));n&&Z1(n)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=P0.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,i=this.state===P0.Idle?1:0;this.state=P0.Typing;for(let s=0;s<this.list.length;s++){const o=(n+s+i)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(typeof l=="undefined"||kS(e,l)){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class p4{constructor(e,t){this.list=e,this.view=t,this.disposables=new gi,ei.chain(this.disposables.add(new ss(t.domNode,"keydown")).event).filter(i=>!Dg(i.target)).map(i=>new jr(i)).filter(i=>i.keyCode===2&&!i.ctrlKey&&!i.metaKey&&!i.shiftKey&&!i.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const i=n.querySelector("[tabIndex]");if(!i||!(i instanceof HTMLElement)||i.tabIndex===-1)return;const s=window.getComputedStyle(i);s.visibility==="hidden"||s.display==="none"||(e.preventDefault(),e.stopPropagation(),i.focus())}dispose(){this.disposables.dispose()}}function OI(r){return ae?r.browserEvent.metaKey:r.browserEvent.ctrlKey}function kI(r){return r.browserEvent.shiftKey}function m4(r){return r instanceof MouseEvent&&r.button===2}const AI={isSelectionSingleChangeEvent:OI,isSelectionRangeChangeEvent:kI};class RI{constructor(e){this.list=e,this.disposables=new gi,this._onPointer=new $t,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||AI),this.mouseSupport=typeof e.options.mouseSupport=="undefined"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(es.addTarget(e.getHTMLElement()))),ei.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||AI))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){R0(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(R0(e.browserEvent.target))return;const t=typeof e.index=="undefined"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Dg(e.browserEvent.target)||R0(e.browserEvent.target))return;const t=e.index;if(typeof t=="undefined"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),m4(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Dg(e.browserEvent.target)||R0(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof n=="undefined"){const h=this.list.getFocus()[0];n=h!=null?h:t,this.list.setAnchor(n)}const i=Math.min(n,t),s=Math.max(n,t),o=Po(i,s+1),a=this.list.getSelection(),l=y4(JS(a,[n]),n);if(l.length===0)return;const u=JS(o,b4(a,l));this.list.setSelection(u,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const i=this.list.getSelection(),s=i.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),i.length===s.length?this.list.setSelection([...s,t],e.browserEvent):this.list.setSelection(s,e.browserEvent)}}dispose(){this.disposables.dispose()}}class PI{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&(e.listBackground.isOpaque()?n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):ae||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.listFilterWidgetBackground&&n.push(`.monaco-list-type-filter { background-color: ${e.listFilterWidgetBackground} }`),e.listFilterWidgetOutline&&n.push(`.monaco-list-type-filter { border: 1px solid ${e.listFilterWidgetOutline}; }`),e.listFilterWidgetNoMatchesOutline&&n.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${e.listFilterWidgetNoMatchesOutline}; }`),e.listMatchesShadow&&n.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${e.listMatchesShadow}; }`),e.tableColumnsBorder&&n.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),this.styleElement.textContent=n.join(`
`)}}const v4={listFocusBackground:Tn.fromHex("#7FB0D0"),listActiveSelectionBackground:Tn.fromHex("#0E639C"),listActiveSelectionForeground:Tn.fromHex("#FFFFFF"),listActiveSelectionIconForeground:Tn.fromHex("#FFFFFF"),listFocusAndSelectionBackground:Tn.fromHex("#094771"),listFocusAndSelectionForeground:Tn.fromHex("#FFFFFF"),listInactiveSelectionBackground:Tn.fromHex("#3F3F46"),listInactiveSelectionIconForeground:Tn.fromHex("#FFFFFF"),listHoverBackground:Tn.fromHex("#2A2D2E"),listDropBackground:Tn.fromHex("#383B3D"),treeIndentGuidesStroke:Tn.fromHex("#a9a9a9"),tableColumnsBorder:Tn.fromHex("#cccccc").transparent(.2)},_4={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function y4(r,e){const t=r.indexOf(e);if(t===-1)return[];const n=[];let i=t-1;for(;i>=0&&r[i]===e-(t-i);)n.push(r[i--]);for(n.reverse(),i=t;i<r.length&&r[i]===e+(i-t);)n.push(r[i++]);return n}function JS(r,e){const t=[];let n=0,i=0;for(;n<r.length||i<e.length;)if(n>=r.length)t.push(e[i++]);else if(i>=e.length)t.push(r[n++]);else if(r[n]===e[i]){t.push(r[n]),n++,i++;continue}else r[n]<e[i]?t.push(r[n++]):t.push(e[i++]);return t}function b4(r,e){const t=[];let n=0,i=0;for(;n<r.length||i<e.length;)if(n>=r.length)t.push(e[i++]);else if(i>=e.length)t.push(r[n++]);else if(r[n]===e[i]){n++,i++;continue}else r[n]<e[i]?t.push(r[n++]):i++;return t}const FI=(r,e)=>r-e;class w4{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,i){let s=0;for(const o of this.renderers)o.renderElement(e,t,n[s++],i)}disposeElement(e,t,n,i){let s=0;for(const o of this.renderers)o.disposeElement&&o.disposeElement(e,t,n[s],i),s+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class C4{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const i=this.accessibilityProvider.getAriaLabel(e);i?n.setAttribute("aria-label",i):n.removeAttribute("aria-label");const s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof s=="number"?n.setAttribute("aria-level",`${s}`):n.removeAttribute("aria-level")}disposeTemplate(e){}}class S4{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(e,t)}onDragOver(e,t,n,i){return this.dnd.onDragOver(e,t,n,i)}onDragLeave(e,t,n,i){var s,o;(o=(s=this.dnd).onDragLeave)===null||o===void 0||o.call(s,e,t,n,i)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}drop(e,t,n,i){this.dnd.drop(e,t,n,i)}}class Jd{constructor(e,t,n,i,s=_4){var o;this.user=e,this._options=s,this.focus=new l1("focused"),this.anchor=new l1("anchor"),this.eventBufferer=new ea,this._ariaLabel="",this.disposables=new gi,this._onDidDispose=new $t,this.onDidDispose=this._onDidDispose.event;const a=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(o=this._options.accessibilityProvider)===null||o===void 0?void 0:o.getWidgetRole():"list";this.selection=new f4(a!=="listbox"),Il(s,v4,!1);const l=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=s.accessibilityProvider,this.accessibilityProvider&&(l.push(new C4(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant&&this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant,this,this.disposables)),i=i.map(h=>new w4(h.templateId,[...l,h]));const u=Object.assign(Object.assign({},s),{dnd:s.dnd&&new S4(this,s.dnd)});if(this.view=new $c(t,n,i,u),this.view.domNode.setAttribute("role",a),s.styleController)this.styleController=s.styleController(this.view.domId);else{const h=Mo(this.view.domNode);this.styleController=new PI(h,this.view.domId)}if(this.spliceable=new h4([new QS(this.focus,this.view,s.identityProvider),new QS(this.selection,this.view,s.identityProvider),new QS(this.anchor,this.view,s.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new p4(this,this.view)),(typeof s.keyboardSupport!="boolean"||s.keyboardSupport)&&(this.keyboardController=new TI(this,this.view,s),this.disposables.add(this.keyboardController)),s.keyboardNavigationLabelProvider){const h=s.keyboardNavigationDelegate||MI;this.typeLabelController=new g4(this,this.view,s.keyboardNavigationLabelProvider,h),this.disposables.add(this.typeLabelController)}this.mouseController=this.createMouseController(s),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return ei.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e))}get onDidChangeSelection(){return ei.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e))}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=ei.chain(this.disposables.add(new ss(this.view.domNode,"keydown")).event).map(s=>new jr(s)).filter(s=>e=s.keyCode===58||s.shiftKey&&s.keyCode===68).map(CD).filter(()=>!1).event,n=ei.chain(this.disposables.add(new ss(this.view.domNode,"keyup")).event).forEach(()=>e=!1).map(s=>new jr(s)).filter(s=>s.keyCode===58||s.shiftKey&&s.keyCode===68).map(CD).map(({browserEvent:s})=>{const o=this.getFocus(),a=o.length?o[0]:void 0,l=typeof a!="undefined"?this.view.element(a):void 0,u=typeof a!="undefined"?this.view.domElement(a):this.view.domNode;return{index:a,element:l,anchor:u,browserEvent:s}}).event,i=ei.chain(this.view.onContextMenu).filter(s=>!e).map(({element:s,index:o,browserEvent:a})=>({element:s,index:o,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return ei.any(t,n,i)}get onKeyDown(){return this.disposables.add(new ss(this.view.domNode,"keydown")).event}get onDidFocus(){return ei.signal(this.disposables.add(new ss(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new RI(this)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e),this.typeLabelController&&this.typeLabelController.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(t=this.keyboardController)===null||t===void 0||t.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new Em(this.user,`Invalid start index: ${e}`);if(t<0)throw new Em(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new Em(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e=="undefined"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new Em(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return Jf(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e=="undefined"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new Em(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,i){if(this.length===0)return;const s=this.focus.get(),o=this.findNextIndex(s.length>0?s[0]+e:0,t,i);o>-1&&this.setFocus([o],n)}focusPrevious(e=1,t=!1,n,i){if(this.length===0)return;const s=this.focus.get(),o=this.findPreviousIndex(s.length>0?s[0]-e:0,t,i);o>-1&&this.setFocus([o],n)}focusNextPage(e,t){return NI(this,void 0,void 0,function*(){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const i=this.view.element(n),s=this.getFocusedElements()[0];if(s!==i){const o=this.findPreviousIndex(n,!1,t);o>-1&&s!==this.view.element(o)?this.setFocus([o],e):this.setFocus([n],e)}else{const o=this.view.getScrollTop();this.view.setScrollTop(o+this.view.renderHeight-this.view.elementHeight(n)),this.view.getScrollTop()!==o&&(this.setFocus([]),yield wc(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return NI(this,void 0,void 0,function*(){let n;const i=this.view.getScrollTop();i===0?n=this.view.indexAt(i):n=this.view.indexAfter(i-1);const s=this.view.element(n),o=this.getFocusedElements()[0];if(o!==s){const a=this.findNextIndex(n,!1,t);a>-1&&o!==this.view.element(a)?this.setFocus([a],e):this.setFocus([n],e)}else{const a=i;this.view.setScrollTop(i-this.view.renderHeight),this.view.getScrollTop()!==a&&(this.setFocus([]),yield wc(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const i=this.findNextIndex(e,!1,n);i>-1&&this.setFocus([i],t)}findNextIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new Em(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),i=this.view.elementTop(e),s=this.view.elementHeight(e);if(Fa(t)){const o=s-this.view.renderHeight;this.view.setScrollTop(o*Kc(t,0,1)+i)}else{const o=i+s,a=n+this.view.renderHeight;i<n&&o>=a||(i<n||o>=a&&s>=this.view.renderHeight?this.view.setScrollTop(i):o>=a&&this.view.setScrollTop(o-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new Em(this.user,`Invalid index ${e}`);const t=this.view.getScrollTop(),n=this.view.elementTop(e),i=this.view.elementHeight(e);if(n<t||n+i>t+this.view.renderHeight)return null;const s=i-this.view.renderHeight;return Math.abs((t-n)/s)}getHTMLElement(){return this.view.domNode}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let n;((e=this.accessibilityProvider)===null||e===void 0?void 0:e.getActiveDescendantId)&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}xm([Xs],Jd.prototype,"onDidChangeFocus",null),xm([Xs],Jd.prototype,"onDidChangeSelection",null),xm([Xs],Jd.prototype,"onContextMenu",null),xm([Xs],Jd.prototype,"onKeyDown",null),xm([Xs],Jd.prototype,"onDidFocus",null);class E4{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:Rn.None}}renderElement(e,t,n,i){if(n.disposable&&n.disposable.dispose(),!n.data)return;const s=this.modelProvider();if(s.isResolved(e))return this.renderer.renderElement(s.get(e),e,n.data,i);const o=new ya,a=s.resolve(e,o.token);n.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(l=>this.renderer.renderElement(l,e,n.data,i))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class L4{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function x4(r,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new L4(r,e.accessibilityProvider)})}class D4{constructor(e,t,n,i,s={}){const o=()=>this.model,a=i.map(l=>new E4(l,o));this.list=new Jd(e,t,n,a,x4(o,s))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return ei.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return ei.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return ei.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(i=>this._model.get(i)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,Po(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}const YB=new nr("isWindows",pe,w("isWindows","Whether the operating system is Windows")),I4="inputFocus";var Vy;(function(r){r[r.Unknown=0]="Unknown",r[r.Twistie=1]="Twistie",r[r.Element=2]="Element"})(Vy||(Vy={}));class Fu extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class eE{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function tE(r){return typeof r=="object"&&"visibility"in r&&"data"in r}function Hy(r){switch(r){case!0:return 1;case!1:return 0;default:return r}}function nE(r){return typeof r.collapsible=="boolean"}class N4{constructor(e,t,n,i={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new ea,this._onDidChangeCollapseState=new $t,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new $t,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new $t,this.onDidSplice=this._onDidSplice.event,this.collapseByDefault=typeof i.collapseByDefault=="undefined"?!1:i.collapseByDefault,this.filter=i.filter,this.autoExpandSingleChildren=typeof i.autoExpandSingleChildren=="undefined"?!1:i.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=ti.empty(),i={}){if(e.length===0)throw new Fu(this.user,"Invalid tree location");i.diffIdentityProvider?this.spliceSmart(i.diffIdentityProvider,e,t,n,i):this.spliceSimple(e,t,n,i)}spliceSmart(e,t,n,i,s,o){var a;i===void 0&&(i=ti.empty()),o===void 0&&(o=(a=s.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t),u=[...i],h=t[t.length-1],v=new gs({getElements:()=>l.children.map(Se=>e.getId(Se.element).toString())},{getElements:()=>[...l.children.slice(0,h),...u,...l.children.slice(h+n)].map(Se=>e.getId(Se.element).toString())}).ComputeDiff(!1);if(v.quitEarly)return this.spliceSimple(t,n,u,s);const N=t.slice(0,-1),P=(Se,Le,ce)=>{if(o>0)for(let Ee=0;Ee<ce;Ee++)Se--,Le--,this.spliceSmart(e,[...N,Se,0],Number.MAX_SAFE_INTEGER,u[Le].children,s,o-1)};let K=Math.min(l.children.length,h+n),ee=u.length;for(const Se of v.changes.sort((Le,ce)=>ce.originalStart-Le.originalStart))P(K,ee,K-(Se.originalStart+Se.originalLength)),K=Se.originalStart,ee=Se.modifiedStart-h,this.spliceSimple([...N,K],Se.originalLength,ti.slice(u,ee,ee+Se.modifiedLength),s);P(K,ee,K)}spliceSimple(e,t,n=ti.empty(),{onDidCreateNode:i,onDidDeleteNode:s}){const{parentNode:o,listIndex:a,revealed:l,visible:u}=this.getParentNodeWithListIndex(e),h=[],v=ti.map(n,at=>this.createTreeNode(at,o,o.visible?1:0,l,h,i)),N=e[e.length-1],P=o.children.length>0;let K=0;for(let at=N;at>=0&&at<o.children.length;at--){const Ze=o.children[at];if(Ze.visible){K=Ze.visibleChildIndex;break}}const ee=[];let Se=0,Le=0;for(const at of v)ee.push(at),Le+=at.renderNodeCount,at.visible&&(at.visibleChildIndex=K+Se++);const ce=o.children.splice(N,t,...ee);let Ee=0;for(const at of ce)at.visible&&Ee++;if(Ee!==0)for(let at=N+ee.length;at<o.children.length;at++){const Ze=o.children[at];Ze.visible&&(Ze.visibleChildIndex-=Ee)}if(o.visibleChildrenCount+=Se-Ee,l&&u){const at=ce.reduce((Ze,rt)=>Ze+(rt.visible?rt.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(o,Le-at),this.list.splice(a,at,h)}if(ce.length>0&&s){const at=Ze=>{s(Ze),Ze.children.forEach(at)};ce.forEach(at)}const ze=o.children.length>0;P!==ze&&this.setCollapsible(e.slice(0,-1),ze),this._onDidSplice.fire({insertedNodes:ee,deletedNodes:ce});let Qe=o;for(;Qe;){if(Qe.visibility===2){this.refilter();break}Qe=Qe.parent}}rerender(e){if(e.length===0)throw new Fu(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:i}=this.getTreeNodeWithListIndex(e);t.visible&&i&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:i}=this.getTreeNodeWithListIndex(e);return n&&i?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t=="undefined"&&(t=!n.collapsible);const i={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,i))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const i=this.getTreeNode(e);typeof t=="undefined"&&(t=!i.collapsed);const s={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}_setCollapseState(e,t){const{node:n,listIndex:i,revealed:s}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(n,i,s,t);if(n!==this.root&&this.autoExpandSingleChildren&&o&&!nE(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,n,i){const s=this._setNodeCollapseState(e,i,!1);if(!n||!e.visible||!s)return s;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),s}_setNodeCollapseState(e,t,n){let i;if(e===this.root?i=!1:(nE(t)?(i=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(i=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):i=!1,i&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!nE(t)&&t.recursive)for(const s of e.children)i=this._setNodeCollapseState(s,t,!0)||i;return i}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t)}createTreeNode(e,t,n,i,s,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed!="undefined",collapsed:typeof e.collapsed=="undefined"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,i&&s.push(a);const u=e.children||ti.empty(),h=i&&l!==0&&!a.collapsed,v=ti.map(u,K=>this.createTreeNode(K,a,l,h,s,o));let N=0,P=1;for(const K of v)a.children.push(K),P+=K.renderNodeCount,K.visible&&(K.visibleChildIndex=N++);return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=N,a.visible=l===2?N>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=P):(a.renderNodeCount=0,i&&s.pop()),o&&o(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,i=!0){let s;if(e!==this.root){if(s=this._filterNode(e,t),s===0)return e.visible=!1,e.renderNodeCount=0,!1;i&&n.push(e)}const o=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||s!==0){let l=0;for(const u of e.children)a=this._updateNodeAfterFilterChange(u,s,n,i&&!e.collapsed)||a,u.visible&&(u.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=s===2?a:s===1),e.visible?e.collapsed||(e.renderNodeCount+=n.length-o):(e.renderNodeCount=0,i&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):tE(n)?(e.filterData=n.data,Hy(n.visibility)):(e.filterData=void 0,Hy(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...i]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(i,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...i]=e;if(n<0||n>t.children.length)throw new Fu(this.user,"Invalid tree location");return this.getTreeNode(i,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:i,visible:s}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new Fu(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:n,revealed:i,visible:s&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,i=!0,s=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new Fu(this.user,"Invalid tree location");for(let l=0;l<o;l++)n+=t.children[l].renderNodeCount;return i=i&&!t.collapsed,s=s&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:i,visible:s}:this.getParentNodeWithListIndex(a,t.children[o],n+1,i,s)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:D_(e)[0]}}const BI=rl("tree-item-expanded",us.chevronDown),WI=rl("tree-filter-on-type-on",us.listFilter),VI=rl("tree-filter-on-type-off",us.listSelection),T4=rl("tree-filter-clear",us.close),u1=rl("tree-item-loading",us.loading);class M4 extends Wy{constructor(e){super(e.elements.map(t=>t.element));this.data=e}}function iE(r){return r instanceof Wy?new M4(r):r}class O4{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=Rn.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(iE(e),t)}onDragOver(e,t,n,i,s=!0){const o=this.dnd.onDragOver(iE(e),t&&t.element,n,i),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t=="undefined")return o;if(a&&typeof o!="boolean"&&o.autoExpand&&(this.autoExpandDisposable=cu(()=>{const N=this.modelProvider(),P=N.getNodeLocation(t);N.isCollapsed(P)&&N.setCollapsed(P,!1),this.autoExpandNode=void 0},500)),typeof o=="boolean"||!o.accept||typeof o.bubble=="undefined"||o.feedback){if(!s){const N=typeof o=="boolean"?o:o.accept,P=typeof o=="boolean"?void 0:o.effect;return{accept:N,effect:P,feedback:[n]}}return o}if(o.bubble===1){const N=this.modelProvider(),P=N.getNodeLocation(t),K=N.getParentNodeLocation(P),ee=N.getNode(K),Se=K&&N.getListIndex(K);return this.onDragOver(e,ee,Se,i,!1)}const l=this.modelProvider(),u=l.getNodeLocation(t),h=l.getListIndex(u),v=l.getListRenderCount(u);return Object.assign(Object.assign({},o),{feedback:Po(h,h+v)})}drop(e,t,n,i){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(iE(e),t&&t.element,n,i)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function k4(r,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new O4(r,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const n=r(),i=n.getNodeLocation(t),s=n.getParentNodeLocation(i);return n.getNode(s).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),enableKeyboardNavigation:e.simpleKeyboardNavigation})}class rE{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(e.element,t)}}var zy;(function(r){r.None="none",r.OnHover="onHover",r.Always="always"})(zy||(zy={}));class A4{constructor(e,t=[]){this._elements=t,this.onDidChange=ei.forEach(e,n=>this._elements=n)}get elements(){return this._elements}}class Uy{constructor(e,t,n,i,s={}){this.renderer=e,this.modelProvider=t,this.activeNodes=i,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=Uy.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new gb,this.activeIndentNodes=new Set,this.indentGuidesDisposable=Rn.None,this.disposables=new gi,this.templateId=e.templateId,this.updateOptions(s),ei.map(n,o=>o.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState&&e.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent!="undefined"&&(this.indent=Kc(e.indent,0,40)),typeof e.renderIndentGuides!="undefined"){const t=e.renderIndentGuides!==zy.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const n=new gi;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements!="undefined"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=mi(e,vi(".monaco-tl-row")),n=mi(t,vi(".monaco-tl-indent")),i=mi(t,vi(".monaco-tl-twistie")),s=mi(t,vi(".monaco-tl-contents")),o=this.renderer.renderTemplate(s);return{container:e,indent:n,twistie:i,indentGuidesDisposable:Rn.None,templateData:o}}renderElement(e,t,n,i){typeof i=="number"&&(this.renderedNodes.set(e,{templateData:n,height:i}),this.renderedElements.set(e.element,e));const s=Uy.DefaultIndent+(e.depth-1)*this.indent;n.twistie.style.paddingLeft=`${s}px`,n.indent.style.width=`${s+this.indent-16}px`,this.renderTwistie(e,n),typeof i=="number"&&this.renderIndentGuides(e,n),this.renderer.renderElement(e,t,n.templateData,i)}disposeElement(e,t,n,i){n.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.templateData,i),typeof i=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);!t||this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);!t||(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(...BI.classNamesArray);let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...BI.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if(co(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new gi,i=this.modelProvider();let s=e;for(;;){const o=i.getNodeLocation(s),a=i.getParentNodeLocation(o);if(!a)break;const l=i.getNode(a),u=vi(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(l)&&u.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(u):t.indent.insertBefore(u,t.indent.firstElementChild),this.renderedIndentGuides.add(l,u),n.add(Qi(()=>this.renderedIndentGuides.delete(l,u))),s=l}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(i=>{const s=n.getNodeLocation(i);try{const o=n.getParentNodeLocation(s);i.collapsible&&i.children.length>0&&!i.collapsed?t.add(i):o&&t.add(n.getNode(o))}catch(o){}}),this.activeIndentNodes.forEach(i=>{t.has(i)||this.renderedIndentGuides.forEach(i,s=>s.classList.remove("active"))}),t.forEach(i=>{this.activeIndentNodes.has(i)||this.renderedIndentGuides.forEach(i,s=>s.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),Vi(this.disposables)}}Uy.DefaultIndent=8;class R4{constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new gi,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){if(this._filter){const s=this._filter.filter(e,t);if(this.tree.options.simpleKeyboardNavigation)return s;let o;if(typeof s=="boolean"?o=s?1:0:tE(s)?o=Hy(s.visibility):o=s,o===0)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:Cm.Default,visibility:!0};const n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),i=Array.isArray(n)?n:[n];for(const s of i){const o=s&&s.toString();if(typeof o=="undefined")return{data:Cm.Default,visibility:!0};const a=t1(this._pattern,this._lowercasePattern,0,o,o.toLowerCase(),0,!0);if(a)return this._matchCount++,i.length===1?{data:a,visibility:!0}:{data:{label:o,score:a},visibility:!0}}return this.tree.options.filterOnType?2:{data:Cm.Default,visibility:!0}}reset(){this._totalCount=0,this._matchCount=0}dispose(){Vi(this.disposables)}}class P4{constructor(e,t,n,i,s){this.tree=e,this.view=n,this.filter=i,this.keyboardNavigationDelegate=s,this._enabled=!1,this._pattern="",this._empty=!1,this._onDidChangeEmptyState=new $t,this.positionClassName="ne",this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new $t,this.enabledDisposables=new gi,this.disposables=new gi,this.domNode=vi(`.monaco-list-type-filter.${this.positionClassName}`),this.domNode.draggable=!0,this.disposables.add(yn(this.domNode,"dragstart",()=>this.onDragStart())),this.messageDomNode=mi(n.getHTMLElement(),vi(".monaco-list-type-filter-message")),this.labelDomNode=mi(this.domNode,vi("span.label"));const o=mi(this.domNode,vi(".controls"));this._filterOnType=!!e.options.filterOnType,this.filterOnTypeDomNode=mi(o,vi("input.filter")),this.filterOnTypeDomNode.type="checkbox",this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitleAndIcon(),this.disposables.add(yn(this.filterOnTypeDomNode,"input",()=>this.onDidChangeFilterOnType())),this.clearDomNode=mi(o,vi("button.clear"+T4.cssSelector)),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=w("clear","Clear"),this.keyboardNavigationEventFilter=e.options.keyboardNavigationEventFilter,t.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(e.options)}get enabled(){return this._enabled}get pattern(){return this._pattern}get filterOnType(){return this._filterOnType}updateOptions(e){e.simpleKeyboardNavigation?this.disable():this.enable(),typeof e.filterOnType!="undefined"&&(this._filterOnType=!!e.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType,this.updateFilterOnTypeTitleAndIcon()),typeof e.automaticKeyboardNavigation!="undefined"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput("")}enable(){if(this._enabled)return;const e=this.enabledDisposables.add(new ss(this.view.getHTMLElement(),"keydown")),t=ei.chain(e.event).filter(i=>!Dg(i.target)||i.target===this.filterOnTypeDomNode).filter(i=>i.key!=="Dead"&&!/^Media/.test(i.key)).map(i=>new jr(i)).filter(this.keyboardNavigationEventFilter||(()=>!0)).filter(()=>this.automaticKeyboardNavigation||this.triggered).filter(i=>this.keyboardNavigationDelegate.mightProducePrintableCharacter(i)&&!(i.keyCode===18||i.keyCode===16||i.keyCode===15||i.keyCode===17)||(this.pattern.length>0||this.triggered)&&(i.keyCode===9||i.keyCode===1)&&!i.altKey&&!i.ctrlKey&&!i.metaKey||i.keyCode===1&&(ae?i.altKey&&!i.metaKey:i.ctrlKey)&&!i.shiftKey).forEach(i=>{i.stopPropagation(),i.preventDefault()}).event,n=this.enabledDisposables.add(new ss(this.clearDomNode,"click"));ei.chain(ei.any(t,n.event)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern="",this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}disable(){!this._enabled||(this.domNode.remove(),this.enabledDisposables.clear(),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)}onEventOrInput(e){typeof e=="string"?this.onInput(e):e instanceof MouseEvent||e.keyCode===9||e.keyCode===1&&(ae?e.altKey:e.ctrlKey)?this.onInput(""):e.keyCode===1?this.onInput(this.pattern.length===0?"":this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+e.browserEvent.key)}onInput(e){const t=this.view.getHTMLElement();e&&!this.domNode.parentElement?t.append(this.domNode):!e&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,i=>!Cm.isDefault(i.filterData));const n=this.tree.getFocus();if(n.length>0){const i=n[0];this.tree.getRelativeTop(i)===null&&this.tree.reveal(i,.5)}this.render(),e||(this.triggered=!1)}onDragStart(){const e=this.view.getHTMLElement(),{left:t}=vl(e),n=e.clientWidth,i=n/2,s=this.domNode.clientWidth,o=new gi;let a=this.positionClassName;const l=()=>{switch(a){case"nw":this.domNode.style.top="4px",this.domNode.style.left="4px";break;case"ne":this.domNode.style.top="4px",this.domNode.style.left=`${n-s-6}px`;break}},u=v=>{v.preventDefault();const N=v.clientX-t;v.dataTransfer&&(v.dataTransfer.dropEffect="none"),N<i?a="nw":a="ne",l()},h=()=>{this.positionClassName=a,this.domNode.className=`monaco-list-type-filter ${this.positionClassName}`,this.domNode.style.top="",this.domNode.style.left="",Vi(o)};l(),this.domNode.classList.remove(a),this.domNode.classList.add("dragging"),o.add(Qi(()=>this.domNode.classList.remove("dragging"))),o.add(yn(document,"dragover",v=>u(v))),o.add(yn(this.domNode,"dragend",()=>h())),Gd.CurrentDragAndDropData=new oR("vscode-ui"),o.add(Qi(()=>Gd.CurrentDragAndDropData=void 0))}onDidSpliceModel(){!this._enabled||this.pattern.length===0||(this.tree.refilter(),this.render())}onDidChangeFilterOnType(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitleAndIcon()}updateFilterOnTypeTitleAndIcon(){this.filterOnType?(this.filterOnTypeDomNode.classList.remove(...VI.classNamesArray),this.filterOnTypeDomNode.classList.add(...WI.classNamesArray),this.filterOnTypeDomNode.title=w("disable filter on type","Disable Filter on Type")):(this.filterOnTypeDomNode.classList.remove(...WI.classNamesArray),this.filterOnTypeDomNode.classList.add(...VI.classNamesArray),this.filterOnTypeDomNode.title=w("enable filter on type","Enable Filter on Type"))}render(){const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&this.tree.options.filterOnType&&e?(this.messageDomNode.textContent=w("empty","No elements found"),this._empty=!0):(this.messageDomNode.innerText="",this._empty=!1),this.domNode.classList.toggle("no-matches",e),this.domNode.title=w("found","Matched {0} out of {1} elements",this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?"\u2026"+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)}shouldAllowFocus(e){return!this.enabled||!this.pattern||this.filterOnType||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Cm.isDefault(e.filterData)}dispose(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.dispose(),this._enabled=!1,this.triggered=!1),this._onDidChangePattern.dispose(),Vi(this.disposables)}}function HI(r){let e=Vy.Unknown;return Rg(r.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=Vy.Twistie:Rg(r.browserEvent.target,"monaco-tl-contents","monaco-tl-row")&&(e=Vy.Element),{browserEvent:r.browserEvent,element:r.element?r.element.element:null,target:e}}function c1(r,e){e(r),r.children.forEach(t=>c1(t,e))}class sE{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new $t,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){var n;!((n=t)===null||n===void 0?void 0:n.__forceEvent)&&Tl(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const i=this;this._onDidChange.fire({get elements(){return i.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),u=h=>l.delete(h);t.forEach(h=>c1(h,u)),this.set([...l.values()]);return}const n=new Set,i=l=>n.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>c1(l,i));const s=new Map,o=l=>s.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>c1(l,o));const a=[];for(const l of this.nodes){const u=this.identityProvider.getId(l.element).toString();if(!n.has(u))a.push(l);else{const v=s.get(u);v&&a.push(v)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class F4 extends RI{constructor(e,t){super(e);this.tree=t}onViewPointer(e){if(Dg(e.browserEvent.target)||R0(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,i=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let s=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?s=this.tree.expandOnlyOnTwistieClick(t.element):s=!!this.tree.expandOnlyOnTwistieClick,s&&!i&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const o=this.tree.model,a=o.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),o.setCollapsed(a,void 0,l),s&&i)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}}class B4 extends Jd{constructor(e,t,n,i,s,o,a,l){super(e,t,n,i,l);this.focusTrait=s,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new F4(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const i=[],s=[];let o;n.forEach((a,l)=>{this.focusTrait.has(a)&&i.push(e+l),this.selectionTrait.has(a)&&s.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),i.length>0&&super.setFocus(Rv([...super.getFocus(),...i])),s.length>0&&super.setSelection(Rv([...super.getSelection(),...s])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(i=>this.element(i)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(i=>this.element(i)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e=="undefined"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class zI{constructor(e,t,n,i,s={}){this._options=s,this.eventBufferer=new ea,this.disposables=new gi,this._onWillRefilter=new $t,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new $t;const o=new rE(n),a=new ao,l=new ao,u=new A4(l.event);this.renderers=i.map(N=>new Uy(N,()=>this.model,a.event,u,s));for(let N of this.renderers)this.disposables.add(N);let h;s.keyboardNavigationLabelProvider&&(h=new R4(this,s.keyboardNavigationLabelProvider,s.filter),s=Object.assign(Object.assign({},s),{filter:h}),this.disposables.add(h)),this.focus=new sE(()=>this.view.getFocusedElements()[0],s.identityProvider),this.selection=new sE(()=>this.view.getSelectedElements()[0],s.identityProvider),this.anchor=new sE(()=>this.view.getAnchorElement(),s.identityProvider),this.view=new B4(e,t,o,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},k4(()=>this.model,s)),{tree:this})),this.model=this.createModel(e,this.view,s),a.input=this.model.onDidChangeCollapseState;const v=ei.forEach(this.model.onDidSplice,N=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(N),this.selection.onDidModelSplice(N)})});if(v(()=>null,null,this.disposables),l.input=ei.chain(ei.any(v,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const N=new Set;for(const P of this.focus.getNodes())N.add(P);for(const P of this.selection.getNodes())N.add(P);return[...N.values()]}).event,s.keyboardSupport!==!1){const N=ei.chain(this.view.onKeyDown).filter(P=>!Dg(P.target)).map(P=>new jr(P));N.filter(P=>P.keyCode===15).on(this.onLeftArrow,this,this.disposables),N.filter(P=>P.keyCode===17).on(this.onRightArrow,this,this.disposables),N.filter(P=>P.keyCode===10).on(this.onSpace,this,this.disposables)}if(s.keyboardNavigationLabelProvider){const N=s.keyboardNavigationDelegate||MI;this.typeFilterController=new P4(this,this.model,this.view,h,N),this.focusNavigationFilter=P=>this.typeFilterController.shouldAllowFocus(P),this.disposables.add(this.typeFilterController)}this.styleElement=Mo(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===zy.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return ei.map(this.view.onMouseDblClick,HI)}get onPointer(){return ei.map(this.view.onPointer,HI)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick=="undefined"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick=="undefined"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(Object.assign(Object.assign({},this._options),{enableKeyboardNavigation:this._options.simpleKeyboardNavigation})),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===zy.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){this.view.layout(e,t)}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const n=e.map(s=>this.model.getNode(s));this.selection.set(n,t);const i=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setSelection(i,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const n=e.map(s=>this.model.getNode(s));this.focus.set(n,t);const i=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setFocus(i,t,!0)}focusNext(e=1,t=!1,n,i=this.focusNavigationFilter){this.view.focusNext(e,t,n,i)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}getRelativeTop(e){const t=this.model.getListIndex(e);return t===-1?null:this.view.getRelativeTop(t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!0)){const o=this.model.getParentNodeLocation(i);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!1)){if(!n.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n),s=e.browserEvent.altKey;this.model.setCollapsed(i,void 0,s)}dispose(){Vi(this.disposables),this.view.dispose()}}class oE{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new N4(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(i,s){return n.sorter.compare(i.element,s.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=ti.empty(),n={}){const i=this.getElementLocation(e);this._setChildren(i,this.preserveCollapseState(t),n)}_setChildren(e,t=ti.empty(),n){const i=new Set,s=new Set,o=l=>{var u;if(l.element===null)return;const h=l;if(i.add(h.element),this.nodes.set(h.element,h),this.identityProvider){const v=this.identityProvider.getId(h.element).toString();s.add(v),this.nodesByIdentity.set(v,h)}(u=n.onDidCreateNode)===null||u===void 0||u.call(n,h)},a=l=>{var u;if(l.element===null)return;const h=l;if(i.has(h.element)||this.nodes.delete(h.element),this.identityProvider){const v=this.identityProvider.getId(h.element).toString();s.has(v)||this.nodesByIdentity.delete(v)}(u=n.onDidDeleteNode)===null||u===void 0||u.call(n,h)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:o,onDidDeleteNode:a}))}preserveCollapseState(e=ti.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),ti.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(o)}if(!n)return Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children)});const i=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible,s=typeof t.collapsed!="undefined"?t.collapsed:n.collapsed;return Object.assign(Object.assign({},t),{collapsible:i,collapsed:s,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getElementLocation(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Fu(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Fu(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Fu(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),i=this.model.getParentNodeLocation(n);return this.model.getNode(i).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Fu(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function h1(r){const e=[r.element],t=r.incompressible||!1;return{element:{elements:e,incompressible:t},children:ti.map(ti.from(r.children),h1),collapsible:r.collapsible,collapsed:r.collapsed}}function d1(r){const e=[r.element],t=r.incompressible||!1;let n,i;for(;[i,n]=ti.consume(ti.from(r.children),2),!(i.length!==1||i[0].incompressible);)r=i[0],e.push(r.element);return{element:{elements:e,incompressible:t},children:ti.map(ti.concat(i,n),d1),collapsible:r.collapsible,collapsed:r.collapsed}}function aE(r,e=0){let t;return e<r.element.elements.length-1?t=[aE(r,e+1)]:t=ti.map(ti.from(r.children),n=>aE(n,0)),e===0&&r.element.incompressible?{element:r.element.elements[e],children:t,incompressible:!0,collapsible:r.collapsible,collapsed:r.collapsed}:{element:r.element.elements[e],children:t,collapsible:r.collapsible,collapsed:r.collapsed}}function UI(r){return aE(r,0)}function jI(r,e,t){return r.element===e?Object.assign(Object.assign({},r),{children:t}):Object.assign(Object.assign({},r),{children:ti.map(ti.from(r.children),n=>jI(n,e,t))})}const W4=r=>({getId(e){return e.elements.map(t=>r.getId(t).toString()).join("\0")}});class V4{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new oE(e,t,n),this.enabled=typeof n.compressionEnabled=="undefined"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=ti.empty(),n){const i=n.diffIdentityProvider&&W4(n.diffIdentityProvider);if(e===null){const P=ti.map(t,this.enabled?d1:h1);this._setChildren(null,P,{diffIdentityProvider:i,diffDepth:Infinity});return}const s=this.nodes.get(e);if(!s)throw new Error("Unknown compressed tree node");const o=this.model.getNode(s),a=this.model.getParentNodeLocation(s),l=this.model.getNode(a),u=UI(o),h=jI(u,e,t),v=(this.enabled?d1:h1)(h),N=l.children.map(P=>P===o?v:P);this._setChildren(l.element,N,{diffIdentityProvider:i,diffDepth:o.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,i=ti.map(n,UI),s=ti.map(i,e?d1:h1);this._setChildren(null,s,{diffIdentityProvider:this.identityProvider,diffDepth:Infinity})}_setChildren(e,t,n){const i=new Set,s=a=>{for(const l of a.element.elements)i.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)i.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:s,onDidDeleteNode:o}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e=="undefined")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getCompressedNode(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Fu(this.user,`Tree element not found: ${e}`);return t}}const H4=r=>r[r.length-1];class lE{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new lE(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}function z4(r,e){return{splice(t,n,i){e.splice(t,n,i.map(s=>r.map(s)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}function U4(r,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(r(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(r(t),n)}}})}class j4{constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||H4;const i=s=>this.elementMapper(s.elements);this.nodeMapper=new eE(s=>new lE(i,s)),this.model=new V4(e,z4(this.nodeMapper,t),U4(i,n))}get onDidSplice(){return ei.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return ei.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return ei.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=ti.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var $4=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class uE extends zI{constructor(e,t,n,i,s={}){super(e,t,n,i,s)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=ti.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new oE(e,t,n)}}class $I{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){const t=this.renderer.renderTemplate(e);return{compressedTreeNode:void 0,data:t}}renderElement(e,t,n,i){const s=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);s.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,i)):(n.compressedTreeNode=s,this.renderer.renderCompressedElements(s,t,n.data,i))}disposeElement(e,t,n,i){n.compressedTreeNode?this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(n.compressedTreeNode,t,n.data,i):this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.data,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}$4([Xs],$I.prototype,"compressedTreeNodeProvider",null);function K4(r,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=r().getCompressedTreeNode(t)}catch(i){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}class KI extends uE{constructor(e,t,n,i,s={}){const o=()=>this,a=i.map(l=>new $I(o,l));super(e,t,n,a,K4(o,s))}setChildren(e,t=ti.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new j4(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled!="undefined"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var Ig=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function cE(r){return Object.assign(Object.assign({},r),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function hE(r,e){return e.parent?e.parent===r?!0:hE(r,e.parent):!1}function G4(r,e){return r===e||hE(r,e)||hE(e,r)}class dE{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new dE(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class Y4{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...u1.classNamesArray),!0):(t.classList.remove(...u1.classNamesArray),!1)}disposeElement(e,t,n,i){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function GI(r){return{browserEvent:r.browserEvent,elements:r.elements.map(e=>e.element)}}function YI(r){return{browserEvent:r.browserEvent,element:r.element&&r.element.element,target:r.target}}class Z4 extends Wy{constructor(e){super(e.elements.map(t=>t.element));this.data=e}}function fE(r){return r instanceof Wy?new Z4(r):r}class X4{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(fE(e),t)}onDragOver(e,t,n,i,s=!0){return this.dnd.onDragOver(fE(e),t&&t.element,n,i)}drop(e,t,n,i){this.dnd.drop(fE(e),t&&t.element,n,i)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function ZI(r){return r&&Object.assign(Object.assign({},r),{collapseByDefault:!0,identityProvider:r.identityProvider&&{getId(e){return r.identityProvider.getId(e.element)}},dnd:r.dnd&&new X4(r.dnd),multipleSelectionController:r.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return r.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return r.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:r.accessibilityProvider&&Object.assign(Object.assign({},r.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:r.accessibilityProvider.getRole?e=>r.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:r.accessibilityProvider.isChecked?e=>{var t;return!!((t=r.accessibilityProvider)===null||t===void 0?void 0:t.isChecked(e.element))}:void 0,getAriaLabel(e){return r.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return r.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:r.accessibilityProvider.getWidgetRole?()=>r.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:r.accessibilityProvider.getAriaLevel&&(e=>r.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:r.accessibilityProvider.getActiveDescendantId&&(e=>r.accessibilityProvider.getActiveDescendantId(e.element))}),filter:r.filter&&{filter(e,t){return r.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:r.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},r.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return r.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof r.expandOnlyOnTwistieClick=="undefined"?void 0:typeof r.expandOnlyOnTwistieClick!="function"?r.expandOnlyOnTwistieClick:e=>r.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:r.additionalScrollHeight})}function gE(r,e){e(r),r.children.forEach(t=>gE(t,e))}class XI{constructor(e,t,n,i,s,o={}){this.user=e,this.dataSource=s,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new $t,this._onDidChangeNodeSlowState=new $t,this.nodeMapper=new eE(a=>new dE(a)),this.disposables=new gi,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren=="undefined"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.collapseByDefault=o.collapseByDefault,this.tree=this.createTree(e,t,n,i,o),this.root=cE({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return ei.map(this.tree.onDidChangeFocus,GI)}get onDidChangeSelection(){return ei.map(this.tree.onDidChangeSelection,GI)}get onMouseDblClick(){return ei.map(this.tree.onMouseDblClick,YI)}get onPointer(){return ei.map(this.tree.onPointer,YI)}get onDidFocus(){return this.tree.onDidFocus}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,i,s){const o=new rE(n),a=i.map(u=>new Y4(u,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=ZI(s)||{};return new uE(e,t,o,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return Ig(this,void 0,void 0,function*(){this.refreshPromises.forEach(i=>i.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,i,s){return Ig(this,void 0,void 0,function*(){if(typeof this.root.element=="undefined")throw new Fu(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield ei.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(yield this.refreshAndRenderNode(o,t,i,s),n)try{this.tree.rerender(o)}catch(a){}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return Ig(this,void 0,void 0,function*(){if(typeof this.root.element=="undefined")throw new Fu(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield ei.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield ei.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const i=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield ei.toPromise(this._onDidRender.event)),i})}setSelection(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Fu(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,i){return Ig(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,i)})}refreshNode(e,t,n){return Ig(this,void 0,void 0,function*(){let i;return this.subTreeRefreshPromises.forEach((s,o)=>{!i&&G4(o,e)&&(i=s.then(()=>this.refreshNode(e,t,n)))}),i||this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return Ig(this,void 0,void 0,function*(){let i;e.refreshPromise=new Promise(s=>i=s),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const s=yield this.doRefreshNode(e,t,n);e.stale=!1,yield Cc.settled(s.map(o=>this.doRefreshSubTree(o,t,n)))}finally{i()}})}doRefreshNode(e,t,n){return Ig(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let i;if(!e.hasChildren)i=Promise.resolve(ti.empty());else{const s=wc(800);s.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},o=>null),i=this.doGetChildren(e).finally(()=>s.cancel())}try{const s=yield i;return this.setChildren(e,s,t,n)}catch(s){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),or(s))return[];throw s}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);return t||(t=Pm(()=>Ig(this,void 0,void 0,function*(){const n=yield this.dataSource.getChildren(e.element);return this.processChildren(n)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(En))}setChildren(e,t,n,i){const s=[...t];if(e.children.length===0&&s.length===0)return[];const o=new Map,a=new Map;for(const h of e.children)if(o.set(h.element,h),this.identityProvider){const v=this.tree.isCollapsed(h);a.set(h.id,{node:h,collapsed:v})}const l=[],u=s.map(h=>{const v=!!this.dataSource.hasChildren(h);if(!this.identityProvider){const ee=cE({element:h,parent:e,hasChildren:v});return v&&this.collapseByDefault&&!this.collapseByDefault(h)&&(ee.collapsedByDefault=!1,l.push(ee)),ee}const N=this.identityProvider.getId(h).toString(),P=a.get(N);if(P){const ee=P.node;return o.delete(ee.element),this.nodes.delete(ee.element),this.nodes.set(h,ee),ee.element=h,ee.hasChildren=v,n?P.collapsed?(ee.children.forEach(Se=>gE(Se,Le=>this.nodes.delete(Le.element))),ee.children.splice(0,ee.children.length),ee.stale=!0):l.push(ee):v&&this.collapseByDefault&&!this.collapseByDefault(h)&&(ee.collapsedByDefault=!1,l.push(ee)),ee}const K=cE({element:h,parent:e,id:N,hasChildren:v});return i&&i.viewState.focus&&i.viewState.focus.indexOf(N)>-1&&i.focus.push(K),i&&i.viewState.selection&&i.viewState.selection.indexOf(N)>-1&&i.selection.push(K),i&&i.viewState.expanded&&i.viewState.expanded.indexOf(N)>-1?l.push(K):v&&this.collapseByDefault&&!this.collapseByDefault(h)&&(K.collapsedByDefault=!1,l.push(K)),K});for(const h of o.values())gE(h,v=>this.nodes.delete(v.element));for(const h of u)this.nodes.set(h.element,h);return e.children.splice(0,e.children.length,...u),e!==this.root&&this.autoExpandSingleChildren&&u.length===1&&l.length===0&&(u[0].collapsedByDefault=!1,l.push(u[0])),l}render(e,t,n){const i=e.children.map(o=>this.asTreeElement(o,t)),s=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(o){return n.diffIdentityProvider.getId(o.element)}}});this.tree.setChildren(e===this.root?null:e,i,s),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:n=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?ti.map(e.children,i=>this.asTreeElement(i,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class pE{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new pE(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class q4{constructor(e,t,n,i){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderCompressedElements(e,t,n,i){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...u1.classNamesArray),!0):(t.classList.remove(...u1.classNamesArray),!1)}disposeElement(e,t,n,i){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,i)}disposeCompressedElements(e,t,n,i){this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=Vi(this.disposables)}}function Q4(r){const e=r&&ZI(r);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return r.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}})})}class J4 extends XI{constructor(e,t,n,i,s,o,a={}){super(e,t,n,s,o,a);this.compressionDelegate=i,this.compressibleNodeMapper=new eE(l=>new pE(l)),this.filter=a.filter}createTree(e,t,n,i,s){const o=new rE(n),a=i.map(u=>new q4(u,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=Q4(s)||{};return new KI(e,t,o,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const n=N=>this.identityProvider.getId(N).toString(),i=N=>{const P=new Set;for(const K of N){const ee=this.tree.getCompressedTreeNode(K===this.root?null:K);if(!!ee.element)for(const Se of ee.element.elements)P.add(n(Se.element))}return P},s=i(this.tree.getSelection()),o=i(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let l=!1;const u=this.getFocus();let h=!1;const v=N=>{const P=N.element;if(P)for(let K=0;K<P.elements.length;K++){const ee=n(P.elements[K].element),Se=P.elements[P.elements.length-1].element;s.has(ee)&&a.indexOf(Se)===-1&&(a.push(Se),l=!0),o.has(ee)&&u.indexOf(Se)===-1&&(u.push(Se),h=!0)}N.children.forEach(v)};v(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),h&&this.setFocus(u)}processChildren(e){return this.filter&&(e=ti.filter(e,t=>{const n=this.filter.filter(t,1),i=e3(n);if(i===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return i===1})),super.processChildren(e)}}function e3(r){return typeof r=="boolean"?r?1:0:tE(r)?Hy(r.visibility):Hy(r)}class t3 extends zI{constructor(e,t,n,i,s,o={}){super(e,t,n,i,o);this.user=e,this.dataSource=s,this.identityProvider=o.identityProvider}createModel(e,t,n){return new oE(e,t,n)}}const n3={separatorBorder:Tn.transparent};class qI{constructor(e,t,n,i){this.container=e,this.view=t,this.disposable=i,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize=="undefined"}setVisible(e,t){e!==this.visible&&(e?(this.size=Kc(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}}class i3 extends qI{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class r3 extends qI{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var ef;(function(r){r[r.Idle=0]="Idle",r[r.Busy=1]="Busy"})(ef||(ef={}));var QI;(function(r){r.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}r.Split=e;function t(n){return{type:"invisible",cachedVisibleSize:n}}r.Invisible=t})(QI||(QI={}));class s3 extends Rn{constructor(e,t={}){var n,i;super();this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=ef.Idle,this._onDidSashChange=this._register(new $t),this.onDidSashChange=this._onDidSashChange.event,this._onDidSashReset=this._register(new $t),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.orientation=ks(t.orientation)?0:t.orientation,this.inverseAltBehavior=!!t.inverseAltBehavior,this.proportionalLayout=ks(t.proportionalLayout)?!0:!!t.proportionalLayout,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=mi(this.el,vi(".sash-container")),this.viewContainer=vi(".split-view-container"),this.scrollable=new Lw(125,Hl),this.scrollableElement=this._register(new UC(this.viewContainer,{vertical:this.orientation===0?(n=t.scrollbarVisibility)!==null&&n!==void 0?n:1:2,horizontal:this.orientation===1?(i=t.scrollbarVisibility)!==null&&i!==void 0?i:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(s=>{this.viewContainer.scrollTop=s.scrollTop,this.viewContainer.scrollLeft=s.scrollLeft})),mi(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||n3),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((s,o)=>{const a=ks(s.visible)||s.visible?s.size:{type:"invisible",cachedVisibleSize:s.size},l=s.view;this.doAddView(l,a,o,!0)}),this.contentSize=this.viewItems.reduce((s,o)=>s+o.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}get orthogonalEndSash(){return this._orthogonalEndSash}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,i){this.doAddView(e,t,n,i)}layout(e,t){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let i=0;i<this.viewItems.length;i++){const s=this.viewItems[i];s.size=Kc(Math.round(this.proportions[i]*e),s.minimumSize,s.maximumSize)}else{const i=Po(this.viewItems.length),s=i.filter(a=>this.viewItems[a].priority===1),o=i.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,s,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const i=this.sashItems.findIndex(a=>a.sash===e),s=lr(yn(document.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),yn(document.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const u=this.viewItems.map(K=>K.size);let h=Number.NEGATIVE_INFINITY,v=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(i===this.sashItems.length-1){const ee=this.viewItems[i];h=(ee.minimumSize-ee.size)/2,v=(ee.maximumSize-ee.size)/2}else{const ee=this.viewItems[i+1];h=(ee.size-ee.maximumSize)/2,v=(ee.size-ee.minimumSize)/2}let N,P;if(!l){const K=Po(i,-1),ee=Po(i+1,this.viewItems.length),Se=K.reduce((rt,St)=>rt+(this.viewItems[St].minimumSize-u[St]),0),Le=K.reduce((rt,St)=>rt+(this.viewItems[St].viewMaximumSize-u[St]),0),ce=ee.length===0?Number.POSITIVE_INFINITY:ee.reduce((rt,St)=>rt+(u[St]-this.viewItems[St].minimumSize),0),Ee=ee.length===0?Number.NEGATIVE_INFINITY:ee.reduce((rt,St)=>rt+(u[St]-this.viewItems[St].viewMaximumSize),0),ze=Math.max(Se,Ee),Qe=Math.min(ce,Le),at=this.findFirstSnapIndex(K),Ze=this.findFirstSnapIndex(ee);if(typeof at=="number"){const rt=this.viewItems[at],St=Math.floor(rt.viewMinimumSize/2);N={index:at,limitDelta:rt.visible?ze-St:ze+St,size:rt.size}}if(typeof Ze=="number"){const rt=this.viewItems[Ze],St=Math.floor(rt.viewMinimumSize/2);P={index:Ze,limitDelta:rt.visible?Qe+St:Qe-St,size:rt.size}}}this.sashDragState={start:a,current:a,index:i,sizes:u,minDelta:h,maxDelta:v,alt:l,snapBefore:N,snapAfter:P,disposable:s}};o(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:i,alt:s,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:u}=this.sashDragState;this.sashDragState.current=e;const h=e-n,v=this.resize(t,h,i,void 0,void 0,o,a,l,u);if(s){const N=t===this.sashItems.length-1,P=this.viewItems.map(Ee=>Ee.size),K=N?t:t+1,ee=this.viewItems[K],Se=ee.size-ee.maximumSize,Le=ee.size-ee.minimumSize,ce=N?t-1:t+1;this.resize(ce,-v,P,void 0,void 0,Se,Le)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=Kc(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==ef.Idle)throw new Error("Cant modify splitview");if(this.state=ef.Busy,e<0||e>=this.viewItems.length)return;const n=Po(this.viewItems.length).filter(a=>a!==e),i=[...n.filter(a=>this.viewItems[a].priority===1),e],s=n.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=Kc(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(i,s),this.state=ef.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=Kc(n,a.minimumSize,a.maximumSize);const i=Po(this.viewItems.length),s=i.filter(a=>this.viewItems[a].priority===1),o=i.filter(a=>this.viewItems[a].priority===2);this.relayout(s,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,i){if(this.state!==ef.Idle)throw new Error("Cant modify splitview");this.state=ef.Busy;const s=vi(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(n));const o=e.onDidChange(N=>this.onViewChange(h,N)),a=Qi(()=>this.viewContainer.removeChild(s)),l=lr(o,a);let u;typeof t=="number"?u=t:t.type==="split"?u=this.getViewSize(t.index)/2:t.type==="invisible"?u={cachedVisibleSize:t.cachedVisibleSize}:u=e.minimumSize;const h=this.orientation===0?new i3(s,e,u,l):new r3(s,e,u,l);if(this.viewItems.splice(n,0,h),this.viewItems.length>1){let N={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash};const P=this.orientation===0?new Pu(this.sashContainer,{getHorizontalSashTop:rt=>this.getSashPosition(rt),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},N),{orientation:1})):new Pu(this.sashContainer,{getVerticalSashLeft:rt=>this.getSashPosition(rt),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},N),{orientation:0})),K=this.orientation===0?rt=>({sash:P,start:rt.startY,current:rt.currentY,alt:rt.altKey}):rt=>({sash:P,start:rt.startX,current:rt.currentX,alt:rt.altKey}),Se=ei.map(P.onDidStart,K)(this.onSashStart,this),ce=ei.map(P.onDidChange,K)(this.onSashChange,this),ze=ei.map(P.onDidEnd,()=>this.sashItems.findIndex(rt=>rt.sash===P))(this.onSashEnd,this),Qe=P.onDidReset(()=>{const rt=this.sashItems.findIndex(Wn=>Wn.sash===P),St=Po(rt,-1),un=Po(rt+1,this.viewItems.length),Kt=this.findFirstSnapIndex(St),An=this.findFirstSnapIndex(un);typeof Kt=="number"&&!this.viewItems[Kt].visible||typeof An=="number"&&!this.viewItems[An].visible||this._onDidSashReset.fire(rt)}),at=lr(Se,ce,ze,Qe,P),Ze={sash:P,disposable:at};this.sashItems.splice(n-1,0,Ze)}s.appendChild(e.element);let v;typeof t!="number"&&t.type==="split"&&(v=[t.index]),i||this.relayout([n],v),this.state=ef.Idle,!i&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const n=this.viewItems.reduce((i,s)=>i+s.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(h=>h.size),i,s,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,u){if(e<0||e>=this.viewItems.length)return 0;const h=Po(e,-1),v=Po(e+1,this.viewItems.length);if(s)for(const Ze of s)eg(h,Ze),eg(v,Ze);if(i)for(const Ze of i)xh(h,Ze),xh(v,Ze);const N=h.map(Ze=>this.viewItems[Ze]),P=h.map(Ze=>n[Ze]),K=v.map(Ze=>this.viewItems[Ze]),ee=v.map(Ze=>n[Ze]),Se=h.reduce((Ze,rt)=>Ze+(this.viewItems[rt].minimumSize-n[rt]),0),Le=h.reduce((Ze,rt)=>Ze+(this.viewItems[rt].maximumSize-n[rt]),0),ce=v.length===0?Number.POSITIVE_INFINITY:v.reduce((Ze,rt)=>Ze+(n[rt]-this.viewItems[rt].minimumSize),0),Ee=v.length===0?Number.NEGATIVE_INFINITY:v.reduce((Ze,rt)=>Ze+(n[rt]-this.viewItems[rt].maximumSize),0),ze=Math.max(Se,Ee,o),Qe=Math.min(ce,Le,a);let at=!1;if(l){const Ze=this.viewItems[l.index],rt=t>=l.limitDelta;at=rt!==Ze.visible,Ze.setVisible(rt,l.size)}if(!at&&u){const Ze=this.viewItems[u.index],rt=t<u.limitDelta;at=rt!==Ze.visible,Ze.setVisible(rt,u.size)}if(at)return this.resize(e,t,n,i,s,o,a);t=Kc(t,ze,Qe);for(let Ze=0,rt=t;Ze<N.length;Ze++){const St=N[Ze],un=Kc(P[Ze]+rt,St.minimumSize,St.maximumSize);rt-=un-P[Ze],St.size=un}for(let Ze=0,rt=t;Ze<K.length;Ze++){const St=K[Ze],un=Kc(ee[Ze]-rt,St.minimumSize,St.maximumSize);rt+=un-ee[Ze],St.size=un}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const i=Po(this.viewItems.length-1,-1),s=i.filter(a=>this.viewItems[a].priority===1),o=i.filter(a=>this.viewItems[a].priority===2);for(const a of o)eg(i,a);for(const a of s)xh(i,a);typeof e=="number"&&xh(i,e);for(let a=0;n!==0&&a<i.length;a++){const l=this.viewItems[i[a]],u=Kc(l.size+n,l.minimumSize,l.maximumSize);n-=u-l.size,l.size=u}}layoutViews(){this.contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),i=[...this.viewItems].reverse();e=!1;const s=i.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=i.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:u}=this.sashItems[l];a+=this.viewItems[l].size;const v=!(t[l]&&o[l+1]),N=!(n[l]&&s[l+1]);if(v&&N){const P=Po(l,-1),K=Po(l+1,this.viewItems.length),ee=this.findFirstSnapIndex(P),Se=this.findFirstSnapIndex(K),Le=typeof ee=="number"&&!this.viewItems[ee].visible,ce=typeof Se=="number"&&!this.viewItems[Se].visible;Le&&s[l]&&(a>0||this.startSnappingEnabled)?u.state=1:ce&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?u.state=2:u.state=0}else v&&!N?u.state=1:!v&&N?u.state=2:u.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(!!n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}dispose(){super.dispose(),this.viewItems.forEach(e=>e.dispose()),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}}class jy{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=jy.TemplateId,this.renderedTemplates=new Set;const i=new Map(t.map(s=>[s.templateId,s]));this.renderers=[];for(const s of e){const o=i.get(s.templateId);if(!o)throw new Error(`Table cell renderer for template id ${s.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=mi(e,vi(".monaco-table-tr")),n=[],i=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=mi(t,vi(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,n.push(l),i.push(a.renderTemplate(l))}const s={container:e,cellContainers:n,cellTemplateData:i};return this.renderedTemplates.add(s),s}renderElement(e,t,n,i){for(let s=0;s<this.columns.length;s++){const a=this.columns[s].project(e);this.renderers[s].renderElement(a,t,n.cellTemplateData[s],i)}}disposeElement(e,t,n,i){for(let s=0;s<this.columns.length;s++){const o=this.renderers[s];if(o.disposeElement){const l=this.columns[s].project(e);o.disposeElement(l,t,n.cellTemplateData[s],i)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);co(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}}jy.TemplateId="row";function o3(r){return{getHeight(e){return r.getHeight(e)},getTemplateId(){return jy.TemplateId}}}class a3{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new $t,this.onDidLayout=this._onDidLayout.event,this.element=vi(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:ei.None}layout(e){this._onDidLayout.fire([this.index,e])}}class f1{constructor(e,t,n,i,s,o){this.virtualDelegate=n,this.domId=`table_id_${++f1.InstanceCount}`,this.cachedHeight=0,this.domNode=mi(t,vi(`.monaco-table.${this.domId}`));const a=i.map((h,v)=>new a3(h,v)),l={size:a.reduce((h,v)=>h+v.column.weight,0),views:a.map(h=>({size:h.column.weight,view:h}))};this.splitview=new s3(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l}),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const u=new jy(i,s,h=>this.splitview.getViewSize(h));this.list=new Jd(e,this.domNode,o3(n),[u],o),this.columnLayoutDisposable=ei.any(...a.map(h=>h.onDidLayout))(([h,v])=>u.layoutColumn(h,v)),this.styleElement=Mo(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.splitview.dispose(),this.list.dispose(),this.columnLayoutDisposable.dispose()}}f1.InstanceCount=0;var Vh=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},sr=function(r,e){return function(t,n){e(t,n,r)}};const Hh=Te("listService");let mE=class{constructor(e){this._themeService=e,this.disposables=new gi,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const i=new PI(Mo(),"");this.disposables.add(A0(i,this._themeService))}if(this.lists.some(i=>i.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),e.getHTMLElement()===document.activeElement&&(this._lastFocusedWidget=e),lr(e.onDidFocus(()=>this._lastFocusedWidget=e),Qi(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(i=>i!==n),this._lastFocusedWidget===e&&(this._lastFocusedWidget=void 0)}))}dispose(){this.disposables.dispose()}};mE=Vh([sr(0,Zo)],mE);const JI=new nr("listFocus",!0),g1=new nr("listSupportsMultiselect",!0),ZB=ha.and(JI,ha.not(I4)),vE=new nr("listHasSelectionOrFocus",!1),_E=new nr("listDoubleSelection",!1),yE=new nr("listMultiSelection",!1),p1=new nr("listSelectionNavigation",!1),l3=new nr("listSupportsKeyboardNavigation",!0),bE="listAutomaticKeyboardNavigation",u3=new nr(bE,!0);let eN=!1;function m1(r,e){const t=r.createScoped(e.getHTMLElement());return JI.bindTo(t),t}const Dm="workbench.list.multiSelectModifier",wE="workbench.list.openMode",Bu="workbench.list.horizontalScrolling",v1="workbench.list.keyboardNavigation",CE="workbench.list.automaticKeyboardNavigation",_1="workbench.tree.indent",b1="workbench.tree.renderIndentGuides",Gc="workbench.list.smoothScrolling",w1="workbench.tree.expandMode";function zh(r){return r.getValue(Dm)==="alt"}class c3 extends Rn{constructor(e){super();this.configurationService=e,this.useAltAsMultipleSelectionModifier=zh(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(Dm)&&(this.useAltAsMultipleSelectionModifier=zh(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:OI(e)}isSelectionRangeChangeEvent(e){return kI(e)}}function C1(r,e,t){const n=new gi,i=Object.assign({},r);if(!r.multipleSelectionController){const s=new c3(e);i.multipleSelectionController=s,n.add(s)}return i.keyboardNavigationDelegate={mightProducePrintableCharacter(s){return t.mightProducePrintableCharacter(s)}},i.smoothScrolling=Boolean(e.getValue(Gc)),[i,n]}let SE=class extends Jd{constructor(e,t,n,i,s,o,a,l,u,h){const v=typeof s.horizontalScrolling!="undefined"?s.horizontalScrolling:Boolean(u.getValue(Bu)),[N,P]=C1(s,u,h);super(e,t,n,i,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},jc(l.getColorTheme(),s1)),N),{horizontalScrolling:v}));this.disposables.add(P),this.contextKeyService=m1(o,this),this.themeService=l,this.listSupportsMultiSelect=g1.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!!s.multipleSelectionSupport),p1.bindTo(this.contextKeyService).set(Boolean(s.selectionNavigation)),this.listHasSelectionOrFocus=vE.bindTo(this.contextKeyService),this.listDoubleSelection=_E.bindTo(this.contextKeyService),this.listMultiSelection=yE.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=zh(u),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),s.overrideStyles&&this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const ee=this.getSelection(),Se=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(ee.length>0||Se.length>0),this.listMultiSelection.set(ee.length>1),this.listDoubleSelection.set(ee.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const ee=this.getSelection(),Se=this.getFocus();this.listHasSelectionOrFocus.set(ee.length>0||Se.length>0)})),this.disposables.add(u.onDidChangeConfiguration(ee=>{ee.affectsConfiguration(Dm)&&(this._useAltAsMultipleSelectionModifier=zh(u));let Se={};if(ee.affectsConfiguration(Bu)&&this.horizontalScrolling===void 0){const Le=Boolean(u.getValue(Bu));Se=Object.assign(Object.assign({},Se),{horizontalScrolling:Le})}if(ee.affectsConfiguration(Gc)){const Le=Boolean(u.getValue(Gc));Se=Object.assign(Object.assign({},Se),{smoothScrolling:Le})}Object.keys(Se).length>0&&this.updateOptions(Se)})),this.navigator=new iN(this,Object.assign({configurationService:u},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=A0(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),super.dispose()}};SE=Vh([sr(5,ps),sr(6,Hh),sr(7,Zo),sr(8,ca),sr(9,Rl)],SE);let tN=class extends D4{constructor(e,t,n,i,s,o,a,l,u,h){const v=typeof s.horizontalScrolling!="undefined"?s.horizontalScrolling:Boolean(u.getValue(Bu)),[N,P]=C1(s,u,h);super(e,t,n,i,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},jc(l.getColorTheme(),s1)),N),{horizontalScrolling:v}));this.disposables=new gi,this.disposables.add(P),this.contextKeyService=m1(o,this),this.themeService=l,this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=g1.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!!s.multipleSelectionSupport),p1.bindTo(this.contextKeyService).set(Boolean(s.selectionNavigation)),this._useAltAsMultipleSelectionModifier=zh(u),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),s.overrideStyles&&this.updateStyles(s.overrideStyles),s.overrideStyles&&this.disposables.add(A0(this,l,s.overrideStyles)),this.disposables.add(u.onDidChangeConfiguration(ee=>{ee.affectsConfiguration(Dm)&&(this._useAltAsMultipleSelectionModifier=zh(u));let Se={};if(ee.affectsConfiguration(Bu)&&this.horizontalScrolling===void 0){const Le=Boolean(u.getValue(Bu));Se=Object.assign(Object.assign({},Se),{horizontalScrolling:Le})}if(ee.affectsConfiguration(Gc)){const Le=Boolean(u.getValue(Gc));Se=Object.assign(Object.assign({},Se),{smoothScrolling:Le})}Object.keys(Se).length>0&&this.updateOptions(Se)})),this.navigator=new iN(this,Object.assign({configurationService:u},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=A0(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};tN=Vh([sr(5,ps),sr(6,Hh),sr(7,Zo),sr(8,ca),sr(9,Rl)],tN);let nN=class extends f1{constructor(e,t,n,i,s,o,a,l,u,h,v){const N=typeof o.horizontalScrolling!="undefined"?o.horizontalScrolling:Boolean(h.getValue(Bu)),[P,K]=C1(o,h,v);super(e,t,n,i,s,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},jc(u.getColorTheme(),s1)),P),{horizontalScrolling:N}));this.disposables=new gi,this.disposables.add(K),this.contextKeyService=m1(a,this),this.themeService=u,this.listSupportsMultiSelect=g1.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!!o.multipleSelectionSupport),p1.bindTo(this.contextKeyService).set(Boolean(o.selectionNavigation)),this.listHasSelectionOrFocus=vE.bindTo(this.contextKeyService),this.listDoubleSelection=_E.bindTo(this.contextKeyService),this.listMultiSelection=yE.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=zh(h),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const Se=this.getSelection(),Le=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(Se.length>0||Le.length>0),this.listMultiSelection.set(Se.length>1),this.listDoubleSelection.set(Se.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const Se=this.getSelection(),Le=this.getFocus();this.listHasSelectionOrFocus.set(Se.length>0||Le.length>0)})),this.disposables.add(h.onDidChangeConfiguration(Se=>{Se.affectsConfiguration(Dm)&&(this._useAltAsMultipleSelectionModifier=zh(h));let Le={};if(Se.affectsConfiguration(Bu)&&this.horizontalScrolling===void 0){const ce=Boolean(h.getValue(Bu));Le=Object.assign(Object.assign({},Le),{horizontalScrolling:ce})}if(Se.affectsConfiguration(Gc)){const ce=Boolean(h.getValue(Gc));Le=Object.assign(Object.assign({},Le),{smoothScrolling:ce})}Object.keys(Le).length>0&&this.updateOptions(Le)})),this.navigator=new h3(this,Object.assign({configurationService:h},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=A0(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};nN=Vh([sr(6,ps),sr(7,Hh),sr(8,Zo),sr(9,ca),sr(10,Rl)],nN);class EE extends Rn{constructor(e,t){var n;super();this.widget=e,this._onDidOpen=this._register(new $t),this.onDidOpen=this._onDidOpen.event,this._register(ei.filter(this.widget.onDidChangeSelection,i=>i.browserEvent instanceof KeyboardEvent)(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t==null?void 0:t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(wE))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(wE))!=="doubleClick"}))):this.openOnSingleClick=(n=t==null?void 0:t.openOnSingleClick)!==null&&n!==void 0?n:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,i=typeof t.pinned=="boolean"?t.pinned:!n,s=!1;this._open(this.getSelectedElement(),n,i,s,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const i=t.button===1,s=!0,o=i,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,o,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const s=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,o,a,t)}_open(e,t,n,i,s){!e||this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:i,element:e,browserEvent:s})}}class iN extends EE{constructor(e,t){super(e,t);this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class h3 extends EE{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class d3 extends EE{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function f3(r,e){let t=!1;return n=>{if(t)return t=!1,!1;const i=e.softDispatch(n,r);return i&&i.enterChord?(t=!0,!1):(t=!1,!0)}}let rN=class extends uE{constructor(e,t,n,i,s,o,a,l,u,h,v){const{options:N,getAutomaticKeyboardNavigation:P,disposable:K}=$y(t,s,o,u,h,v);super(e,t,n,i,N);this.disposables.add(K),this.internals=new Im(this,s,P,s.overrideStyles,o,a,l,u,v),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};rN=Vh([sr(5,ps),sr(6,Hh),sr(7,Zo),sr(8,ca),sr(9,Rl),sr(10,Ru)],rN);let sN=class extends KI{constructor(e,t,n,i,s,o,a,l,u,h,v){const{options:N,getAutomaticKeyboardNavigation:P,disposable:K}=$y(t,s,o,u,h,v);super(e,t,n,i,N);this.disposables.add(K),this.internals=new Im(this,s,P,s.overrideStyles,o,a,l,u,v),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};sN=Vh([sr(5,ps),sr(6,Hh),sr(7,Zo),sr(8,ca),sr(9,Rl),sr(10,Ru)],sN);let oN=class extends t3{constructor(e,t,n,i,s,o,a,l,u,h,v,N){const{options:P,getAutomaticKeyboardNavigation:K,disposable:ee}=$y(t,o,a,h,v,N);super(e,t,n,i,s,P);this.disposables.add(ee),this.internals=new Im(this,o,K,o.overrideStyles,a,l,u,h,N),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};oN=Vh([sr(6,ps),sr(7,Hh),sr(8,Zo),sr(9,ca),sr(10,Rl),sr(11,Ru)],oN);let aN=class extends XI{constructor(e,t,n,i,s,o,a,l,u,h,v,N){const{options:P,getAutomaticKeyboardNavigation:K,disposable:ee}=$y(t,o,a,h,v,N);super(e,t,n,i,s,P);this.disposables.add(ee),this.internals=new Im(this,o,K,o.overrideStyles,a,l,u,h,N),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};aN=Vh([sr(6,ps),sr(7,Hh),sr(8,Zo),sr(9,ca),sr(10,Rl),sr(11,Ru)],aN);let lN=class extends J4{constructor(e,t,n,i,s,o,a,l,u,h,v,N,P){const{options:K,getAutomaticKeyboardNavigation:ee,disposable:Se}=$y(t,a,l,v,N,P);super(e,t,n,i,s,o,K);this.disposables.add(Se),this.internals=new Im(this,a,ee,a.overrideStyles,l,u,h,v,P),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};lN=Vh([sr(7,ps),sr(8,Hh),sr(9,Zo),sr(10,ca),sr(11,Rl),sr(12,Ru)],lN);function $y(r,e,t,n,i,s){var o;l3.bindTo(t),eN||(u3.bindTo(t),eN=!0);const a=()=>{let K=Boolean(t.getContextKeyValue(bE));return K&&(K=Boolean(n.getValue(CE))),K},l=s.isScreenReaderOptimized(),u=e.simpleKeyboardNavigation||l?"simple":n.getValue(v1),h=e.horizontalScrolling!==void 0?e.horizontalScrolling:Boolean(n.getValue(Bu)),[v,N]=C1(e,n,i),P=e.additionalScrollHeight;return{getAutomaticKeyboardNavigation:a,disposable:N,options:Object.assign(Object.assign({keyboardSupport:!1},v),{indent:n.getValue(_1),renderIndentGuides:n.getValue(b1),smoothScrolling:Boolean(n.getValue(Gc)),automaticKeyboardNavigation:a(),simpleKeyboardNavigation:u==="simple",filterOnType:u==="filter",horizontalScrolling:h,keyboardNavigationEventFilter:f3(r,i),additionalScrollHeight:P,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(o=e.expandOnlyOnTwistieClick)!==null&&o!==void 0?o:n.getValue(w1)==="doubleClick"})}}let Im=class{constructor(e,t,n,i,s,o,a,l,u){this.tree=e,this.themeService=a,this.disposables=[],this.contextKeyService=m1(s,e),this.listSupportsMultiSelect=g1.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!!t.multipleSelectionSupport),p1.bindTo(this.contextKeyService).set(Boolean(t.selectionNavigation)),this.hasSelectionOrFocus=vE.bindTo(this.contextKeyService),this.hasDoubleSelection=_E.bindTo(this.contextKeyService),this.hasMultiSelection=yE.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=zh(l);const v=new Set;v.add(bE);const N=()=>{const K=u.isScreenReaderOptimized()?"simple":l.getValue(v1);e.updateOptions({simpleKeyboardNavigation:K==="simple",filterOnType:K==="filter"})};this.updateStyleOverrides(i),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const P=e.getSelection(),K=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(P.length>0||K.length>0),this.hasMultiSelection.set(P.length>1),this.hasDoubleSelection.set(P.length===2)})}),e.onDidChangeFocus(()=>{const P=e.getSelection(),K=e.getFocus();this.hasSelectionOrFocus.set(P.length>0||K.length>0)}),l.onDidChangeConfiguration(P=>{let K={};if(P.affectsConfiguration(Dm)&&(this._useAltAsMultipleSelectionModifier=zh(l)),P.affectsConfiguration(_1)){const ee=l.getValue(_1);K=Object.assign(Object.assign({},K),{indent:ee})}if(P.affectsConfiguration(b1)){const ee=l.getValue(b1);K=Object.assign(Object.assign({},K),{renderIndentGuides:ee})}if(P.affectsConfiguration(Gc)){const ee=Boolean(l.getValue(Gc));K=Object.assign(Object.assign({},K),{smoothScrolling:ee})}if(P.affectsConfiguration(v1)&&N(),P.affectsConfiguration(CE)&&(K=Object.assign(Object.assign({},K),{automaticKeyboardNavigation:n()})),P.affectsConfiguration(Bu)&&t.horizontalScrolling===void 0){const ee=Boolean(l.getValue(Bu));K=Object.assign(Object.assign({},K),{horizontalScrolling:ee})}P.affectsConfiguration(w1)&&t.expandOnlyOnTwistieClick===void 0&&(K=Object.assign(Object.assign({},K),{expandOnlyOnTwistieClick:l.getValue(w1)==="doubleClick"})),Object.keys(K).length>0&&e.updateOptions(K)}),this.contextKeyService.onDidChangeContext(P=>{P.affectsSome(v)&&e.updateOptions({automaticKeyboardNavigation:n()})}),u.onDidChangeScreenReaderOptimized(()=>N())),this.navigator=new d3(e,Object.assign({configurationService:l},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){Vi(this.styler),this.styler=e?A0(this.tree,this.themeService,e):Rn.None}dispose(){this.disposables=Vi(this.disposables),Vi(this.styler),this.styler=void 0}};Im=Vh([sr(4,ps),sr(5,Hh),sr(6,Zo),sr(7,ca),sr(8,Ru)],Im),k.as(pt.Configuration).registerConfiguration({id:"workbench",order:7,title:w("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[Dm]:{type:"string",enum:["ctrlCmd","alt"],enumDescriptions:[w("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),w("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:w({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[wE]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:w({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Bu]:{type:"boolean",default:!1,description:w("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[_1]:{type:"number",default:8,minimum:0,maximum:40,description:w("tree indent setting","Controls tree indentation in pixels.")},[b1]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:w("render tree indent guides","Controls whether the tree should render indent guides.")},[Gc]:{type:"boolean",default:!1,description:w("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[v1]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[w("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),w("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),w("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:w("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.")},[CE]:{type:"boolean",default:!0,markdownDescription:w("automatic keyboard navigation setting","Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},[w1]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:w("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var Wu;(function(r){r[r.Hint=1]="Hint",r[r.Info=2]="Info",r[r.Warning=4]="Warning",r[r.Error=8]="Error"})(Wu||(Wu={})),function(r){function e(o,a){return a-o}r.compare=e;const t=Object.create(null);t[r.Error]=w("sev.error","Error"),t[r.Warning]=w("sev.warning","Warning"),t[r.Info]=w("sev.info","Info");function n(o){return t[o]||""}r.toString=n;function i(o){switch(o){case Is.Error:return r.Error;case Is.Warning:return r.Warning;case Is.Info:return r.Info;case Is.Ignore:return r.Hint}}r.fromSeverity=i;function s(o){switch(o){case r.Error:return Is.Error;case r.Warning:return Is.Warning;case r.Info:return Is.Info;case r.Hint:return Is.Ignore}}r.toSeverity=s}(Wu||(Wu={}));var uN;(function(r){const e="";function t(i){return n(i,!0)}r.makeKey=t;function n(i,s){let o=[e];return i.source?o.push(i.source.replace("\xA6","\\\xA6")):o.push(e),i.code?typeof i.code=="string"?o.push(i.code.replace("\xA6","\\\xA6")):o.push(i.code.value.replace("\xA6","\\\xA6")):o.push(e),i.severity!==void 0&&i.severity!==null?o.push(Wu.toString(i.severity)):o.push(e),i.message&&s?o.push(i.message.replace("\xA6","\\\xA6")):o.push(e),i.startLineNumber!==void 0&&i.startLineNumber!==null?o.push(i.startLineNumber.toString()):o.push(e),i.startColumn!==void 0&&i.startColumn!==null?o.push(i.startColumn.toString()):o.push(e),i.endLineNumber!==void 0&&i.endLineNumber!==null?o.push(i.endLineNumber.toString()):o.push(e),i.endColumn!==void 0&&i.endColumn!==null?o.push(i.endColumn.toString()):o.push(e),o.push(e),o.join("\xA6")}r.makeKeyOptionalMessage=n})(uN||(uN={}));const cN=Te("markerService");class g3{constructor(){this._byResource=new go,this._byOwner=new Map}set(e,t,n){let i=this._byResource.get(e);i||(i=new Map,this._byResource.set(e,i)),i.set(t,n);let s=this._byOwner.get(t);s||(s=new go,this._byOwner.set(t,s)),s.set(e,n)}get(e,t){let n=this._byResource.get(e);return n==null?void 0:n.get(t)}delete(e,t){let n=!1,i=!1,s=this._byResource.get(e);s&&(n=s.delete(t));let o=this._byOwner.get(t);if(o&&(i=o.delete(e)),n!==i)throw new Error("illegal state");return n&&i}values(e){var t,n,i,s;return typeof e=="string"?(n=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&n!==void 0?n:ti.empty():ci.isUri(e)?(s=(i=this._byResource.get(e))===null||i===void 0?void 0:i.values())!==null&&s!==void 0?s:ti.empty():ti.map(ti.concat(...this._byOwner.values()),o=>o[1])}}class p3{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new go,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const i=this._resourceStats(t);this._add(i),this._data.set(t,i)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===Ar.inMemory||e.scheme===Ar.walkThrough||e.scheme===Ar.walkThroughSnippet)return t;for(const{severity:n}of this._service.read({resource:e}))n===Wu.Error?t.errors+=1:n===Wu.Warning?t.warnings+=1:n===Wu.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class Nm{constructor(){this._onMarkerChanged=new Oa({delay:0,merge:Nm._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new g3,this._stats=new p3(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(so(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const i=[];for(const s of n){const o=Nm._toMarker(e,t,s);o&&i.push(o)}this._data.set(t,e,i),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:i,severity:s,message:o,source:a,startLineNumber:l,startColumn:u,endLineNumber:h,endColumn:v,relatedInformation:N,tags:P}=n;if(!!o)return l=l>0?l:1,u=u>0?u:1,h=h>=l?h:l,v=v>0?v:u,{resource:t,owner:e,code:i,severity:s,message:o,source:a,startLineNumber:l,startColumn:u,endLineNumber:h,endColumn:v,relatedInformation:N,tags:P}}read(e=Object.create(null)){let{owner:t,resource:n,severities:i,take:s}=e;if((!s||s<0)&&(s=-1),t&&n){const o=this._data.get(n,t);if(o){const a=[];for(const l of o)if(Nm._accept(l,i)){const u=a.push(l);if(s>0&&u===s)break}return a}else return[]}else if(!t&&!n){const o=[];for(let a of this._data.values())for(let l of a)if(Nm._accept(l,i)){const u=o.push(l);if(s>0&&u===s)return o}return o}else{const o=this._data.values(n!=null?n:t),a=[];for(const l of o)for(const u of l)if(Nm._accept(u,i)){const h=a.push(u);if(s>0&&h===s)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new go;for(let n of e)for(let i of n)t.set(i,!0);return Array.from(t.keys())}}var S1=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},F0;(function(r){r[r.None=0]="None",r[r.Initialized=1]="Initialized",r[r.Closed=2]="Closed"})(F0||(F0={}));class Ky extends Rn{constructor(e,t=Object.create(null)){super();this.database=e,this.options=t,this._onDidChangeStorage=this._register(new $t),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=F0.None,this.cache=new Map,this.flushDelayer=new Gh(Ky.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;(t=e.changed)===null||t===void 0||t.forEach((i,s)=>this.accept(s,i)),(n=e.deleted)===null||n===void 0||n.forEach(i=>this.accept(i,void 0))}accept(e,t){if(this.state===F0.Closed)return;let n=!1;Ca(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire(e)}get(e,t){const n=this.cache.get(e);return Ca(n)?t:n}getBoolean(e,t){const n=this.get(e);return Ca(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return Ca(n)?t:parseInt(n,10)}set(e,t){return S1(this,void 0,void 0,function*(){if(this.state===F0.Closed)return;if(Ca(t))return this.delete(e);const n=String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())})}delete(e){return S1(this,void 0,void 0,function*(){if(!(this.state===F0.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return S1(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}dispose(){this.flushDelayer.dispose(),super.dispose()}}Ky.DEFAULT_FLUSH_DELAY=100;class hN{constructor(){this.onDidChangeItemsExternal=ei.None,this.items=new Map}updateItems(e){return S1(this,void 0,void 0,function*(){e.insert&&e.insert.forEach((t,n)=>this.items.set(n,t)),e.delete&&e.delete.forEach(t=>this.items.delete(t))})}}const E1="__$__targetStorageMarker",m3=Te("storageService");var dN;(function(r){r[r.NONE=0]="NONE",r[r.SHUTDOWN=1]="SHUTDOWN"})(dN||(dN={}));class L1 extends Rn{constructor(e={flushInterval:L1.DEFAULT_FLUSH_INTERVAL}){super();this.options=e,this._onDidChangeValue=this._register(new Lo),this._onDidChangeTarget=this._register(new Lo),this._onWillSaveState=this._register(new $t),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._globalKeyTargets=void 0}emitDidChangeValue(e,t){t===E1?(e===0?this._globalKeyTargets=void 0:e===1&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:e})):this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.get(e,n)}getBoolean(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.getBoolean(e,n)}getNumber(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.getNumber(e,n)}store(e,t,n,i){if(Ca(t)){this.remove(e,n);return}this.withPausedEmitters(()=>{var s;this.updateKeyTarget(e,n,i),(s=this.getStorage(n))===null||s===void 0||s.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))===null||n===void 0||n.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n){var i,s;const o=this.getKeyTargets(t);typeof n=="number"?o[e]!==n&&(o[e]=n,(i=this.getStorage(t))===null||i===void 0||i.set(E1,JSON.stringify(o))):typeof o[e]=="number"&&(delete o[e],(s=this.getStorage(t))===null||s===void 0||s.set(E1,JSON.stringify(o)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(e){return e===0?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(e){const t=this.get(E1,e);if(t)try{return JSON.parse(t)}catch(n){}return Object.create(null)}}L1.DEFAULT_FLUSH_INTERVAL=60*1e3;class v3 extends L1{constructor(){super();this.globalStorage=this._register(new Ky(new hN)),this.workspaceStorage=this._register(new Ky(new hN)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.globalStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e)))}getStorage(e){return e===0?this.globalStorage:this.workspaceStorage}}var fN=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},D1=function(r,e){return function(t,n){e(t,n,r)}};let LE=class{constructor(e){this._commandService=e}createMenu(e,t,n=!1){return new xE(e,n,this._commandService,t,this)}};LE=fN([D1(0,po)],LE);let xE=class H0{constructor(e,t,n,i,s){this._id=e,this._fireEventsForSubmenuChanges=t,this._commandService=n,this._contextKeyService=i,this._menuService=s,this._disposables=new gi,this._menuGroups=[],this._contextKeys=new Set,this._build();const o=new ys(()=>{this._build(),this._onDidChange.fire(this)},50);this._disposables.add(o),this._disposables.add(J_.onDidChangeMenu(u=>{u.has(e)&&o.schedule()}));const a=this._disposables.add(new gi),l=()=>{const u=new ys(()=>this._onDidChange.fire(this),50);a.add(u),a.add(i.onDidChangeContext(h=>{h.affectsSome(this._contextKeys)&&u.schedule()}))};this._onDidChange=new $t({onFirstListenerAdd:l,onLastListenerRemove:a.clear.bind(a)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const e=J_.getMenuItems(this._id);let t;e.sort(H0._compareMenuItems);for(const n of e){const i=n.group||"";(!t||t[0]!==i)&&(t=[i,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(H0._fillInKbExprKeys(e.when,this._contextKeys),Q_(e)){if(e.command.precondition&&H0._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;H0._fillInKbExprKeys(t,this._contextKeys)}}else this._fireEventsForSubmenuChanges&&J_.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){const t=[];for(let n of this._menuGroups){const[i,s]=n,o=[];for(const a of s)if(this._contextKeyService.contextMatchesRules(a.when)){const l=Q_(a)?new tC(a.command,a.alt,e,this._contextKeyService,this._commandService):new OT(a,this._menuService,this._contextKeyService,e);o.push(l)}o.length>0&&t.push([i,o])}return t}static _fillInKbExprKeys(e,t){if(e)for(let n of e.keys())t.add(n)}static _compareMenuItems(e,t){let n=e.group,i=t.group;if(n!==i){if(n){if(!i)return-1}else return 1;if(n==="navigation")return-1;if(i==="navigation")return 1;let a=n.localeCompare(i);if(a!==0)return a}let s=e.order||0,o=t.order||0;return s<o?-1:s>o?1:H0._compareTitles(Q_(e)?e.command.title:e.title,Q_(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,i=typeof t=="string"?t:t.original;return n.localeCompare(i)}};xE=fN([D1(2,po),D1(3,ps),D1(4,DL)],xE);var _3=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},gN=function(r,e){return function(t,n){e(t,n,r)}};function Gy(r){return r.toString()}class y3 extends Rn{constructor(e){super();this.model=e,this._markersData=new Map,this._register(Qi(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const n=[...this._markersData.keys()];this._markersData.clear();const i=this.model.deltaDecorations(n,t);for(let s=0;s<i.length;s++)this._markersData.set(i[s],e[s]);return n.length!==0||i.length!==0}getMarker(e){return this._markersData.get(e.id)}}let DE=class extends Rn{constructor(e,t){super();this._markerService=t,this._onDidChangeMarker=this._register(new $t),this._markerDecorations=new Map,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(Gy(e));return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(Gy(t));n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new y3(e);this._markerDecorations.set(Gy(e.uri),t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(Gy(e.uri));t&&(t.dispose(),this._markerDecorations.delete(Gy(e.uri))),(e.uri.scheme===Ar.inMemory||e.uri.scheme===Ar.internal||e.uri.scheme===Ar.vscode)&&this._markerService&&this._markerService.read({resource:e.uri}).map(n=>n.owner).forEach(n=>this._markerService.remove(n,[e.uri]))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});let n=t.map(i=>({range:this._createDecorationRange(e.model,i),options:this._createDecorationOption(i)}));e.update(t,n)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let n=Mt.lift(t);if(t.severity===Wu.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),n=e.validateRange(n),n.isEmpty()){let i=e.getWordAtPosition(n.getStartPosition());if(i)n=new Mt(n.startLineNumber,i.startColumn,n.endLineNumber,i.endColumn);else{let s=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);s===1||(n.endColumn>=s?n=new Mt(n.startLineNumber,s-1,n.endLineNumber,s):n=new Mt(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn+1))}}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&n.startLineNumber===n.endLineNumber){let i=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);i<n.endColumn&&(n=new Mt(n.startLineNumber,i,n.endLineNumber,n.endColumn),t.startColumn=i)}return n}_createDecorationOption(e){let t,n,i,s,o;switch(e.severity){case Wu.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",i=0;break;case Wu.Warning:t="squiggly-warning",n=q_($O),i=20,o={color:q_(xO),position:ql.Inline};break;case Wu.Info:t="squiggly-info",n=q_(KO),i=10;break;case Wu.Error:default:t="squiggly-error",n=q_(jO),i=30,o={color:q_(LO),position:ql.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(s="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(s="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:ec.Right},minimap:o,zIndex:i,inlineClassName:s}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}};DE=_3([gN(0,La),gN(1,cN)],DE);var b3=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},pN=function(r,e){return function(t,n){e(t,n,r)}};let IE=class extends Rn{constructor(e,t){super();this._contextKeyService=e,this._configurationService=t,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new $t,this._accessibilityModeEnabledContext=PA.bindTo(this._contextKeyService);const n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire())})),n(),this.onDidChangeScreenReaderOptimized(()=>n())}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}getAccessibilitySupport(){return this._accessibilitySupport}};IE=b3([pN(0,ps),pN(1,ca)],IE);var I1=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class w3{constructor(){this.mapTextToType=new Map,this.findText=""}writeText(e,t){return I1(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}try{return yield navigator.clipboard.writeText(e)}catch(s){console.error(s)}const n=document.activeElement,i=document.body.appendChild(vi("textarea",{"aria-hidden":!0}));i.style.height="1px",i.style.width="1px",i.style.position="absolute",i.value=e,i.focus(),i.select(),document.execCommand("copy"),n instanceof HTMLElement&&n.focus(),document.body.removeChild(i)})}readText(e){return I1(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return I1(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return I1(this,void 0,void 0,function*(){this.findText=e})}}var C3=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},mN=function(r,e){return function(t,n){e(t,n,r)}},N1=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const B0=!1;function T1(r){return r.scheme===Ar.file?r.fsPath:r.path}let vN=0;class M1{constructor(e,t,n,i,s,o,a){this.id=++vN,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=i,this.groupOrder=s,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class _N{constructor(e,t){this.resourceLabel=e,this.reason=t}}class yN{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,i]of this.elements)(i.reason===0?e:t).push(i.resourceLabel);let n=[];return e.length>0&&n.push(w({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(w({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class S3{constructor(e,t,n,i,s,o,a){this.id=++vN,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=i,this.groupOrder=s,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new yN),this.removedResources.has(t)||this.removedResources.set(t,new _N(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new yN),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new _N(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class bN{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,i=this._past.length;n<i;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new YD(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,i=0,s=-1;for(let a=0,l=this._past.length;a<l;a++,i++){const u=this._past[a];n&&(i>=t||u.id!==e.elements[i])&&(n=!1,s=0),!n&&u.type===1&&u.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,i++){const l=this._future[a];n&&(i>=t||l.id!==e.elements[i])&&(n=!1,o=a),!n&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}s!==-1&&(this._past=this._past.slice(0,s)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class NE{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const wN=new bN("","");wN.locked=!0;let O1=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);let t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=N0.None,n=Fh.None){if(e.type===0){const i=T1(e.resource),s=this.getUriComparisonKey(e.resource);this._pushElement(new M1(e,i,s,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const i=new Set,s=[],o=[];for(const a of e.resources){const l=T1(a),u=this.getUriComparisonKey(a);i.has(u)||(i.add(u),s.push(l),o.push(u))}s.length===1?this._pushElement(new M1(e,s[0],o[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new S3(e,s,o,t.id,t.nextOrder(),n.id,n.nextOrder()))}B0&&this._print("pushElement")}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const i=e.resourceLabels[t],s=e.strResources[t];let o;this._editStacks.has(s)?o=this._editStacks.get(s):(o=new bN(i,s),this._editStacks.set(s,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const i=n.getClosestPastElement();return i?i.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const s of n){const o=T1(s.resource),a=this.getUriComparisonKey(s.resource),l=new M1(s,o,a,0,0,0,0);i.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitPastWorkspaceElement(e,i)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const s of n){const o=T1(s.resource),a=this.getUriComparisonKey(s.resource),l=new M1(s,o,a,0,0,0,0);i.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitFutureWorkspaceElement(e,i)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t)),B0&&this._print("removeElements")}setElementsValidFlag(e,t,n){const i=this.getUriComparisonKey(e);this._editStacks.has(i)&&this._editStacks.get(i).setElementsValidFlag(t,n),B0&&this._print("setElementsValidFlag")}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new YD(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}B0&&this._print("restoreSnapshot")}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const o=s.getClosestPastElement();!o||o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,n=i)}return[t,n]}canUndo(e){if(e instanceof Fh){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){En(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,i,s){const o=this._acquireLocks(n);let a;try{a=t()}catch(l){return o(),i.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),i.dispose(),s()),l=>(o(),i.dispose(),this._onError(l,e))):(o(),i.dispose(),s())}_invokeWorkspacePrepare(e){return N1(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo=="undefined")return Rn.None;const t=e.actual.prepareUndoRedo();return typeof t=="undefined"?Rn.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo=="undefined")return t(Rn.None);const n=e.actual.prepareUndoRedo();return n?br(n)?t(n):n.then(i=>t(i)):t(Rn.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||wN);return new NE(t)}_tryToSplitAndUndo(e,t,n,i){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(i),new k1(this._undo(e,0,!0));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(i),new k1}_checkWorkspaceUndo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,w({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,w({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndUndo(e,t,null,w({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,w({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,w({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const i=this._getAffectedEditStacks(t),s=this._checkWorkspaceUndo(e,t,i,!1);return s?s.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,i,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(!!n){if(n===e){const i=t.getSecondClosestPastElement();if(i&&i.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,n,i){return N1(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){const a=yield this._dialogService.show(Is.Info,w("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),[w({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",n.editStacks.length),w("nok","Undo this File"),w("cancel","Cancel")],{cancelId:2});if(a.choice===2)return;if(a.choice===1)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const l=this._checkWorkspaceUndo(e,t,n,!1);if(l)return l.returnValue;i=!0}let s;try{s=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,n,!0);if(o)return s.dispose(),o.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,s,()=>this._continueUndoInGroup(t.groupId,i))})}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=w({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new NE([e]),i,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const o=s.getClosestPastElement();!o||o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,n=i)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof Fh){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const i=this._editStacks.get(e),s=i.getClosestPastElement();if(!s)return;if(s.groupId){const[a,l]=this._findClosestUndoElementInGroup(s.groupId);if(s!==a&&l)return this._undo(l,t,n)}if((s.sourceId!==t||s.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,s);try{return s.type===1?this._workspaceUndo(e,s,n):this._resourceUndo(i,s,n)}finally{B0&&this._print("undo")}}_confirmAndContinueUndo(e,t,n){return N1(this,void 0,void 0,function*(){if((yield this._dialogService.show(Is.Info,w("confirmDifferentSource","Would you like to undo '{0}'?",n.label),[w("confirmDifferentSource.yes","Yes"),w("cancel","Cancel")],{cancelId:1})).choice!==1)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const o=s.getClosestFutureElement();!o||o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,n=i)}return[t,n]}canRedo(e){if(e instanceof Fh){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,i){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(i),new k1(this._redo(e));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(i),new k1}_checkWorkspaceRedo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,w({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,w({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndRedo(e,t,null,w({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,w({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,w({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),i=this._checkWorkspaceRedo(e,t,n,!1);return i?i.returnValue:this._executeWorkspaceRedo(e,t,n)}_executeWorkspaceRedo(e,t,n){return N1(this,void 0,void 0,function*(){let i;try{i=yield this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const s=this._checkWorkspaceRedo(e,t,n,!0);if(s)return i.dispose(),s.returnValue;for(const o of n.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,i,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=w({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new NE([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const o=s.getClosestFutureElement();!o||o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,n=i)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof Fh){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(!!n){if(n.groupId){const[i,s]=this._findClosestRedoElementInGroup(n.groupId);if(n!==i&&s)return this._redo(s)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{B0&&this._print("redo")}}}};O1=C3([mN(0,EI),mN(1,Vc)],O1);class k1{constructor(e){this.returnValue=e}}LD(LS,O1);const E3={ctrlCmd:!1,alt:!1};var Yy;(function(r){r[r.Blur=1]="Blur",r[r.Gesture=2]="Gesture",r[r.Other=3]="Other"})(Yy||(Yy={}));var Yc;(function(r){r[r.NONE=0]="NONE",r[r.FIRST=1]="FIRST",r[r.SECOND=2]="SECOND",r[r.LAST=3]="LAST"})(Yc||(Yc={}));const CN=new Qc(()=>{const r=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:r,collatorIsNumeric:r.resolvedOptions().numeric}});function L3(r,e,t=!1){const n=r||"",i=e||"",s=CN.value.collator.compare(n,i);return CN.value.collatorIsNumeric&&s===0&&n!==i?n<i?-1:1:s}function x3(r,e,t){const n=r.toLowerCase(),i=e.toLowerCase(),s=D3(r,e,t);if(s)return s;const o=n.endsWith(t),a=i.endsWith(t);if(o!==a)return o?-1:1;const l=L3(n,i);return l!==0?l:n.localeCompare(i)}function D3(r,e,t){const n=r.toLowerCase(),i=e.toLowerCase(),s=n.startsWith(t),o=i.startsWith(t);if(s!==o)return s?-1:1;if(s&&o){if(n.length<i.length)return-1;if(n.length>i.length)return 1}return 0}const I3=new RegExp(`(\\\\)?\\$\\((${Ko.iconNameExpression}(?:${Ko.iconModifierExpression})?)\\)`,"g");function Zy(r){const e=new Array;let t,n=0,i=0;for(;(t=I3.exec(r))!==null;){i=t.index||0,e.push(r.substring(n,i)),n=(t.index||0)+t[0].length;const[,s,o]=t;e.push(s?`$(${o})`:N3({id:o}))}return n<r.length&&e.push(r.substring(n)),e}function N3(r){const e=vi("span");return e.classList.add(...Ko.asClassNameArray(r)),e}class Tm{constructor(e,t){this.supportIcons=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.domNode=document.createElement("span"),this.domNode.className="monaco-highlighted-label",e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t=[],n="",i){e||(e=""),i&&(e=Tm.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&Su(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const o=this.text.substring(t,n.start);e.push(vi("span",void 0,...this.supportIcons?Zy(o):[o])),t=n.end}const i=this.text.substring(n.start,n.end),s=vi("span.highlight",void 0,...this.supportIcons?Zy(i):[i]);n.extraClasses&&s.classList.add(n.extraClasses),e.push(s),t=n.end}if(t<this.text.length){const n=this.text.substring(t);e.push(vi("span",void 0,...this.supportIcons?Zy(n):[n]))}Xh(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,i=0;return e.replace(/\r\n|\r|\n/g,(s,o)=>{i=s===`\r
`?-1:0,o+=n;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=i),a.end>=o&&(a.end+=i));return n+=i,"\u23CE"})}}var TE=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function T3(r,e){El(e)?r.title=e:(e==null?void 0:e.markdownNotSupportedFallback)?r.title=e.markdownNotSupportedFallback:r.removeAttribute("title")}function M3(r,e,t){if(!t)return;const n=O3(t);let i,s;const o=l=>{if(i)return;const u=new ya,h=Le=>{const ce=Le.type===hi.MOUSE_DOWN;ce&&(s==null||s.dispose(),s=void 0),(ce||Le.fromElement===e)&&(i==null||i.dispose(),i=void 0)},v=yn(e,hi.MOUSE_LEAVE,h,!0),N=yn(e,hi.MOUSE_DOWN,h,!0),P={targetElements:[e],dispose:()=>{}};let K;if(r.placement===void 0||r.placement==="mouse"){const Le=ce=>P.x=ce.x+10;K=yn(e,hi.MOUSE_MOVE,Le,!0)}const ee=()=>TE(this,void 0,void 0,function*(){var Le;if(i){const ce={text:w("iconLabel.loading","Loading..."),target:P,hoverPosition:2};s==null||s.dispose(),s=r.showHover(ce);const Ee=(Le=yield n(u.token))!==null&&Le!==void 0?Le:El(t)?void 0:t.markdownNotSupportedFallback;if(s==null||s.dispose(),s=void 0,Ee&&i){const ze={text:Ee,target:P,showPointer:r.placement==="element",hoverPosition:2};s=r.showHover(ze)}}K==null||K.dispose()}),Se=new ys(ee,r.delay);Se.schedule(),i=Qi(()=>{Se.dispose(),K==null||K.dispose(),N.dispose(),v.dispose(),u.dispose(!0)})},a=yn(e,hi.MOUSE_OVER,o,!0);return Qi(()=>{a.dispose(),i==null||i.dispose(),s==null||s.dispose()})}function O3(r){if(El(r))return()=>TE(this,void 0,void 0,function*(){return r});if(Xu(r.markdown))return r.markdown;{const e=r.markdown;return()=>TE(this,void 0,void 0,function*(){return e})}}class ME{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class k3 extends Rn{constructor(e,t){super();this.customHovers=new Map,this.domNode=this._register(new ME(mi(e,vi(".monaco-icon-label")))),this.labelContainer=mi(this.domNode.element,vi(".monaco-icon-label-container"));const n=mi(this.labelContainer,vi("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new ME(mi(this.labelContainer,vi("span.monaco-icon-description-container")))),(t==null?void 0:t.supportHighlights)||(t==null?void 0:t.supportIcons)?this.nameNode=new P3(n,!!t.supportIcons):this.nameNode=new A3(n),(t==null?void 0:t.supportDescriptionHighlights)?this.descriptionNodeFactory=()=>new Tm(mi(this.descriptionContainer.element,vi("span.label-description")),!!t.supportIcons):this.descriptionNodeFactory=()=>this._register(new ME(mi(this.descriptionContainer.element,vi("span.label-description")))),this.hoverDelegate=t==null?void 0:t.hoverDelegate}setLabel(e,t,n){const i=["monaco-icon-label"];n&&(n.extraClasses&&i.push(...n.extraClasses),n.italic&&i.push("italic"),n.strikethrough&&i.push("strikethrough")),this.domNode.className=i.join(" "),this.setupHover(this.labelContainer,n==null?void 0:n.title),this.nameNode.setLabel(e,n),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof Tm?(this.descriptionNode.set(t||"",n?n.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,n==null?void 0:n.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,(n==null?void 0:n.descriptionTitle)||""),this.descriptionNode.empty=!t))}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)T3(e,t);else{const i=M3(this.hoverDelegate,e,t);i&&this.customHovers.set(e,i)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}class A3{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Su(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=mi(this.container,vi("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const i=e[n],s=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${n}`;mi(this.container,vi("a.label-name",{id:s,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},i)),n<e.length-1&&mi(this.container,vi("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function R3(r,e,t){if(!t)return;let n=0;return r.map(i=>{const s={start:n,end:n+i.length},o=t.map(a=>pa.intersect(s,a)).filter(a=>!pa.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=s.end+e.length,o})}class P3{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Su(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new Tm(mi(this.container,vi("a.label-name",{id:t==null?void 0:t.domId})),this.supportIcons)),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=(t==null?void 0:t.separator)||"/",i=R3(e,n,t==null?void 0:t.matches);for(let s=0;s<e.length;s++){const o=e[s],a=i?i[s]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${s}`,u=vi("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"});new Tm(mi(this.container,u),this.supportIcons).set(o,a,void 0,t==null?void 0:t.labelEscapeNewLines),s<e.length-1&&mi(u,vi("span.label-separator",void 0,n))}}}}class SN{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const qB=new SN("id#"),OE={},F3=new SN("quick-input-button-icon-");function kE(r){if(!r)return;let e;const t=r.dark.toString();return OE[t]?e=OE[t]:(e=F3.nextId(),wa(`.${e}`,`background-image: ${xc(r.light||r.dark)}`),wa(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${xc(r.dark)}`),OE[t]=e),e}const A1=vi;class AE{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=mi(e,A1(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&AE.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){let[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(mi(this.domNode,A1("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){co(this.domNode),this.keyElements.clear()}renderPart(e,t,n){const i=oL.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,i.ctrlKey,Boolean(n==null?void 0:n.ctrlKey),i.separator),t.shiftKey&&this.renderKey(e,i.shiftKey,Boolean(n==null?void 0:n.shiftKey),i.separator),t.altKey&&this.renderKey(e,i.altKey,Boolean(n==null?void 0:n.altKey),i.separator),t.metaKey&&this.renderKey(e,i.metaKey,Boolean(n==null?void 0:n.metaKey),i.separator);const s=t.keyLabel;s&&this.renderKey(e,s,Boolean(n==null?void 0:n.keyCode),"")}renderKey(e,t,n,i){mi(e,this.createKeyElement(t,n?".highlight":"")),i&&mi(e,A1("span.monaco-keybinding-key-separator",void 0,i))}renderUnbound(e){mi(e,this.createKeyElement(w("unbound","Unbound")))}createKeyElement(e,t=""){const n=A1("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),n}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&Su(e.firstPart,t.firstPart)&&Su(e.chordPart,t.chordPart)}}var EN=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},B3=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Uh=vi;class W3{constructor(e){this.hidden=!1,this._onChecked=new $t,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}class Xy{get templateId(){return Xy.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=mi(e,Uh(".quick-input-list-entry"));const n=mi(t.entry,Uh("label.quick-input-list-label"));t.toDisposeTemplate.push(eo(n,hi.CLICK,u=>{t.checkbox.offsetParent||u.preventDefault()})),t.checkbox=mi(n,Uh("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(eo(t.checkbox,hi.CHANGE,u=>{t.element.checked=t.checkbox.checked}));const i=mi(n,Uh(".quick-input-list-rows")),s=mi(i,Uh(".quick-input-list-row")),o=mi(i,Uh(".quick-input-list-row"));t.label=new k3(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const a=mi(s,Uh(".quick-input-list-entry-keybinding"));t.keybinding=new AE(a,ve);const l=mi(o,Uh(".quick-input-list-label-meta"));return t.detail=new Tm(l,!0),t.separator=mi(t.entry,Uh(".quick-input-list-separator")),t.actionBar=new E0(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){n.toDisposeElement=Vi(n.toDisposeElement),n.element=e,n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(u=>n.checkbox.checked=u));const{labelHighlights:i,descriptionHighlights:s,detailHighlights:o}=e,a=Object.create(null);a.matches=i||[],a.descriptionTitle=e.saneDescription,a.descriptionMatches=s||[],a.extraClasses=e.item.iconClasses,a.italic=e.item.italic,a.strikethrough=e.item.strikethrough,n.label.setLabel(e.saneLabel,e.saneDescription,a),n.keybinding.set(e.item.keybinding),n.detail.set(e.saneDetail,o),e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),n.actionBar.clear();const l=e.item.buttons;l&&l.length?(n.actionBar.push(l.map((u,h)=>{let v=u.iconClass||(u.iconPath?kE(u.iconPath):void 0);u.alwaysVisible&&(v=v?`${v} always-visible`:"always-visible");const N=new Mh(`id-${h}`,"",v,!0,()=>B3(this,void 0,void 0,function*(){e.fireButtonTriggered({button:u,item:e.item})}));return N.tooltip=u.tooltip||"",N}),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=Vi(n.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=Vi(e.toDisposeElement),e.toDisposeTemplate=Vi(e.toDisposeTemplate)}}Xy.ID="listelement";class V3{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return Xy.ID}}var Ws;(function(r){r[r.First=1]="First",r[r.Second=2]="Second",r[r.Last=3]="Last",r[r.Next=4]="Next",r[r.Previous=5]="Previous",r[r.NextPage=6]="NextPage",r[r.PreviousPage=7]="PreviousPage"})(Ws||(Ws={}));class RE{constructor(e,t,n){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new $t,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new $t,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new $t,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new $t,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new $t,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new $t,this.onKeyDown=this._onKeyDown.event,this._onLeave=new $t,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=mi(this.parent,Uh(".quick-input-list"));const i=new V3,s=new z3;this.list=n.createList("QuickInput",this.container,i,[new Xy],{identityProvider:{getId:o=>o.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:s}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(o=>{const a=new jr(o);switch(a.keyCode){case 10:this.toggleCheckbox();break;case 31:(ae?o.metaKey:o.ctrlKey)&&this.list.setFocus(Po(this.list.length));break;case 16:const l=this.list.getFocus();l.length===1&&l[0]===0&&this._onLeave.fire();break;case 18:const u=this.list.getFocus();u.length===1&&u[0]===this.list.length-1&&this._onLeave.fire();break}this._onKeyDown.fire(a)})),this.disposables.push(this.list.onMouseDown(o=>{o.browserEvent.button!==2&&o.browserEvent.preventDefault()})),this.disposables.push(yn(this.container,hi.CLICK,o=>{(o.x||o.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(o=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(o=>{typeof o.index=="number"&&(o.browserEvent.preventDefault(),this.list.setSelection([o.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return ei.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return ei.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,i=e.length;n<i;n++){const s=e[n];if(!s.hidden)if(s.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=Vi(this.elementDisposables);const t=n=>this.fireButtonTriggered(n);this.inputElements=e,this.elements=e.reduce((n,i,s)=>{var o,a,l;if(i.type!=="separator"){const u=s&&e[s-1],h=i.label&&i.label.replace(/\r?\n/g," "),v=i.meta&&i.meta.replace(/\r?\n/g," "),N=i.description&&i.description.replace(/\r?\n/g," "),P=i.detail&&i.detail.replace(/\r?\n/g," "),K=i.ariaLabel||[h,N,P].map(ee=>f_(ee)).filter(ee=>!!ee).join(", ");n.push(new W3({index:s,item:i,saneLabel:h,saneMeta:v,saneAriaLabel:K,saneDescription:N,saneDetail:P,labelHighlights:(o=i.highlights)===null||o===void 0?void 0:o.label,descriptionHighlights:(a=i.highlights)===null||a===void 0?void 0:a.description,detailHighlights:(l=i.highlights)===null||l===void 0?void 0:l.detail,checked:!1,separator:u&&u.type==="separator"?u:void 0,fireButtonTriggered:t}))}return n},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(n=>n.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((n,i,s)=>(n.set(i.item,s),n),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const n of e)t.add(n);for(const n of this.elements)n.checked=t.has(n.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===Ws.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=Ws.First),e===Ws.Previous&&this.list.getFocus()[0]===0&&(e=Ws.Last),e===Ws.Second&&this.list.length<2&&(e=Ws.First),e){case Ws.First:this.list.focusFirst();break;case Ws.Second:this.list.focusNth(1);break;case Ws.Last:this.list.focusLast();break;case Ws.Next:this.list.focusNext();break;case Ws.Previous:this.list.focusPrevious();break;case Ws.NextPage:this.list.focusNextPage();break;case Ws.PreviousPage:this.list.focusPreviousPage();break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(n=>{n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!1;const i=n.index&&this.inputElements[n.index-1];n.separator=i&&i.type==="separator"?i:void 0});else{let n;this.elements.forEach(i=>{const s=this.matchOnLabel?xl(i1(e,n1(i.saneLabel))):void 0,o=this.matchOnDescription?xl(i1(e,n1(i.saneDescription||""))):void 0,a=this.matchOnDetail?xl(i1(e,n1(i.saneDetail||""))):void 0,l=this.matchOnMeta?xl(i1(e,n1(i.saneMeta||""))):void 0;if(s||o||a||l?(i.labelHighlights=s,i.descriptionHighlights=o,i.detailHighlights=a,i.hidden=!1):(i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!i.item.alwaysShow),i.separator=void 0,!this.sortByLabel){const u=i.index&&this.inputElements[i.index-1];n=u&&u.type==="separator"?u:n,n&&!i.hidden&&(i.separator=n,n=void 0)}})}const t=this.elements.filter(n=>!n.hidden);if(this.sortByLabel&&e){const n=e.toLowerCase();t.sort((i,s)=>H3(i,s,n))}return this.elementsToIndexes=t.reduce((n,i,s)=>(n.set(i.item,s),n),new Map),this.list.splice(0,this.list.length,t),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(t.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=Vi(this.elementDisposables),this.disposables=Vi(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}EN([Xs],RE.prototype,"onDidChangeFocus",null),EN([Xs],RE.prototype,"onDidChangeSelection",null);function H3(r,e,t){const n=r.labelHighlights||[],i=e.labelHighlights||[];return n.length&&!i.length?-1:!n.length&&i.length?1:n.length===0&&i.length===0?0:x3(r.saneLabel,e.saneLabel,t)}class z3{getWidgetAriaLabel(){return w("quickInput","Quick Input")}getAriaLabel(e){return e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(){return"option"}}function U3(r,e={}){const t=LN(e);return t.textContent=r,t}function j3(r,e={}){const t=LN(e);return xN(t,K3(r,!!e.renderCodeSegements),e.actionHandler,e.renderCodeSegements),t}function LN(r){const e=r.inline?"span":"div",t=document.createElement(e);return r.className&&(t.className=r.className),t}class $3{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function xN(r,e,t,n){let i;if(e.type===2)i=document.createTextNode(e.content||"");else if(e.type===3)i=document.createElement("b");else if(e.type===4)i=document.createElement("i");else if(e.type===7&&n)i=document.createElement("code");else if(e.type===5&&t){const s=document.createElement("a");s.href="#",t.disposeables.add(eo(s,"click",o=>{t.callback(String(e.index),o)})),i=s}else e.type===8?i=document.createElement("br"):e.type===1&&(i=r);i&&r!==i&&r.appendChild(i),i&&Array.isArray(e.children)&&e.children.forEach(s=>{xN(i,s,t,n)})}function K3(r,e){const t={type:1,children:[]};let n=0,i=t;const s=[],o=new $3(r);for(;!o.eos();){let a=o.next();const l=a==="\\"&&PE(o.peek(),e)!==0;if(l&&(a=o.next()),!l&&G3(a,e)&&a===o.peek()){o.advance(),i.type===2&&(i=s.pop());const u=PE(a,e);if(i.type===u||i.type===5&&u===6)i=s.pop();else{const h={type:u,children:[]};u===5&&(h.index=n,n++),i.children.push(h),s.push(i),i=h}}else if(a===`
`)i.type===2&&(i=s.pop()),i.children.push({type:8});else if(i.type!==2){const u={type:2,content:a};i.children.push(u),s.push(i),i=u}else i.content+=a}return i.type===2&&(i=s.pop()),s.length,t}function G3(r,e){return PE(r,e)!==0}function PE(r,e){switch(r){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}const qy=vi,Y3={inputBackground:Tn.fromHex("#3C3C3C"),inputForeground:Tn.fromHex("#CCCCCC"),inputValidationInfoBorder:Tn.fromHex("#55AAFF"),inputValidationInfoBackground:Tn.fromHex("#063B49"),inputValidationWarningBorder:Tn.fromHex("#B89500"),inputValidationWarningBackground:Tn.fromHex("#352A05"),inputValidationErrorBorder:Tn.fromHex("#BE1100"),inputValidationErrorBackground:Tn.fromHex("#5A1D1D")};class Z3 extends Sw{constructor(e,t,n){var i;super();this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new $t),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new $t),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n||Object.create(null),Il(this.options,Y3,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(i=this.options.tooltip)!==null&&i!==void 0?i:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=mi(e,qy(".monaco-inputbox.idle"));let s=this.options.flexibleHeight?"textarea":"input",o=mi(this.element,qy(".ibwrapper"));if(this.input=mi(o,qy(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=mi(o,qy("div.mirror")),this.mirror.innerText="\xA0",this.scrollableElement=new nD(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),mi(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(u=>this.input.scrollTop=u.scrollTop));const a=this._register(new ss(document,"selectionchange")),l=ei.filter(a.event,()=>{const u=document.getSelection();return(u==null?void 0:u.anchorNode)===o});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new E0(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:kg(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return Og(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){const n=parseFloat(this.mirror.style.paddingLeft||"")||0,i=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+i}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.options.flexibleHeight&&this.options.flexibleWidth?this.input.style.width=`calc(100% - ${e}px)`:this.input.style.paddingRight=e+"px",this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=n.border?`1px solid ${n.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=()=>e.style.width=Og(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:i=>{if(!this.message)return null;e=mi(i,qy(".monaco-inputbox-container")),t();const s={inline:!0,className:"monaco-inputbox-message"},o=this.message.formatContent?j3(this.message.content,s):U3(this.message.content,s);o.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return o.style.backgroundColor=a.background?a.background.toString():"",o.style.color=a.foreground?a.foreground.toString():"",o.style.border=a.border?`1px solid ${a.border}`:"",mi(e,o),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=w("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=w("alertWarningMessage","Warning: {0}",this.message.content):n=w("alertInfoMessage","Info: {0}",this.message.content),Z1(n),this.state="open"}_hideMessage(){!this.contextViewProvider||(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";e+n?this.mirror.textContent=e+n:this.mirror.innerText="\xA0",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",n=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=kg(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,i=t.selectionEnd,s=t.value;n!==null&&i!==null&&(this.value=s.substr(0,n)+e+s.substr(i),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}class QB extends null{constructor(e,t,n){super(e,t,n);this.history=new HistoryNavigator(n.history,100)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,aria.status(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,aria.status(this.value))}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}const X3=vi;class q3 extends Rn{constructor(e){super();this.parent=e,this.onKeyDown=t=>yn(this.inputBox.inputElement,hi.KEY_DOWN,n=>{t(new jr(n))}),this.onMouseDown=t=>yn(this.inputBox.inputElement,hi.MOUSE_DOWN,n=>{t(new ra(n))}),this.onDidChange=t=>this.inputBox.onDidChange(t),this.container=mi(this.parent,X3(".quick-input-box")),this.inputBox=this._register(new Z3(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===Is.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===Is.Info?1:e===Is.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===Is.Info?1:e===Is.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}const Q3={badgeBackground:Tn.fromHex("#4D4D4D"),badgeForeground:Tn.fromHex("#FFFFFF")};class DN{constructor(e,t){this.count=0,this.options=t||Object.create(null),Il(this.options,Q3,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=mi(e,vi(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=fs(this.countFormat,this.count),this.element.title=fs(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",n=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}}}const IN="done",NN="active",FE="infinite",TN="discrete",J3={progressBarBackground:Tn.fromHex("#0E70C0")};class e5 extends Rn{constructor(e,t){super();this.options=t||Object.create(null),Il(this.options,J3,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this._register(this.showDelayedScheduler=new ys(()=>of(this.element),0)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(NN,FE,TN),this.workedVal=0,this.totalWork=void 0}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(IN),this.element.classList.contains(FE)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(TN,IN),this.element.classList.add(NN,FE),this}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}const t5={buttonBackground:Tn.fromHex("#0E639C"),buttonHoverBackground:Tn.fromHex("#006BB3"),buttonForeground:Tn.white};class MN extends Rn{constructor(e,t){super();this._onDidClick=this._register(new $t),this.options=t||Object.create(null),Il(this.options,t5,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(es.addTarget(this._element)),[hi.CLICK,ms.Tap].forEach(n=>{this._register(yn(this._element,n,i=>{if(!this.enabled){Gr.stop(i);return}this._onDidClick.fire(i)}))}),this._register(yn(this._element,hi.KEY_DOWN,n=>{const i=new jr(n);let s=!1;this.enabled&&(i.equals(3)||i.equals(10))?(this._onDidClick.fire(n),s=!0):i.equals(9)&&(this._element.blur(),s=!0),s&&Gr.stop(i,!0)})),this._register(yn(this._element,hi.MOUSE_OVER,n=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(yn(this._element,hi.MOUSE_OUT,n=>{this.applyStyles()})),this.focusTracker=this._register(Os(this._element)),this._register(this.focusTracker.onDidFocus(()=>this.setHoverBackground())),this._register(this.focusTracker.onDidBlur(()=>this.applyStyles())),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const n=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=n?"1px":"",this._element.style.borderStyle=n?"solid":"",this._element.style.borderColor=n}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?Xh(this._element,...Zy(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}var ON=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const ou=vi,BE={iconClass:rl("quick-input-back",us.arrowLeft).classNames,tooltip:w("quickInput.back","Back"),handle:-1};class R1 extends Rn{constructor(e){super();this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=R1.noPromptMessage,this._severity=Is.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new $t),this.onDidHideEmitter=this._register(new $t),this.onDisposeEmitter=this._register(new $t),this.visibleDisposables=this._register(new gi),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!te;this._ignoreFocusOut=e&&!te,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this.update())}hide(){!this.visible||this.ui.hide()}didHide(e=Yy.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="\xA0;");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new sa,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const i=this.buttons.filter(o=>o===BE);this.ui.leftActionBar.push(i.map((o,a)=>{const l=new Mh(`id-${a}`,"",o.iconClass||kE(o.iconPath),!0,()=>ON(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(o)}));return l.tooltip=o.tooltip||"",l}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const s=this.buttons.filter(o=>o!==BE);this.ui.rightActionBar.push(s.map((o,a)=>{const l=new Mh(`id-${a}`,"",o.iconClass||kE(o.iconPath),!0,()=>ON(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(o)}));return l.tooltip=o.tooltip||"",l}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,Xh(this.ui.message,...Zy(n))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?w("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Is.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.paddingBottom="4px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.paddingBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}R1.noPromptMessage=w("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class Qy extends R1{constructor(){super(...arguments);this._value="",this.onDidChangeValueEmitter=this._register(new $t),this.onWillAcceptEmitter=this._register(new $t),this.onDidAcceptEmitter=this._register(new $t),this.onDidCustomEmitter=this._register(new $t),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._sortByLabel=!0,this._autoFocusOnList=!0,this._itemActivation=this.ui.isScreenReaderOptimized()?Yc.NONE:Yc.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new $t),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new $t),this.onDidTriggerItemButtonEmitter=this._register(new $t),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e||"",this.update(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?E3:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(Ws.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{if(e===this.value)return;this._value=e,this.ui.list.filter(this.filterValue(this.ui.inputBox.value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(e)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(Ws.Next),this.canSelectMany&&this.ui.list.domFocus(),Gr.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(Ws.Previous):this.ui.list.focus(Ws.Last),this.canSelectMany&&this.ui.list.domFocus(),Gr.stop(e,!0);break;case 12:this.ui.list.focus(Ws.NextPage),this.canSelectMany&&this.ui.list.domFocus(),Gr.stop(e,!0);break;case 11:this.ui.list.focus(Ws.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),Gr.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(Ws.First),Gr.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(Ws.Last),Gr.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{!this.canSelectMany&&this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&Tl(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&Tl(e,this._selectedItems,(n,i)=>n===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||this.selectedItemsToConfirm!==this._selectedItems&&Tl(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return yn(this.ui.container,hi.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new jr(e),n=t.keyCode;this._quickNavigate.keybindings.some(o=>{const[a,l]=o.getParts();return l?!1:a.shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a.altKey&&n===6||a.ctrlKey&&n===5||a.metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",e&&!this.description);const t={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!e,progressBar:!e,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(t),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");const n=this.ariaLabel||this.placeholder||Qy.DEFAULT_ARIA_LABEL;if(this.ui.inputBox.ariaLabel!==n&&(this.ui.inputBox.ariaLabel=n),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case Yc.NONE:this._itemActivation=Yc.FIRST;break;case Yc.SECOND:this.ui.list.focus(Ws.Second),this._itemActivation=Yc.FIRST;break;case Yc.LAST:this.ui.list.focus(Ws.Last),this._itemActivation=Yc.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),t.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(Ws.First))}}Qy.DEFAULT_ARIA_LABEL=w("quickInputBox.ariaLabel","Type to narrow down results.");class P1 extends Rn{constructor(e){super();this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new $t),this.onDidCustomEmitter=this._register(new $t),this.onDidTriggerButtonEmitter=this._register(new $t),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new $t),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new $t),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(yn(window,hi.KEY_DOWN,e,!0)),this._register(yn(window,hi.KEY_UP,e,!0)),this._register(yn(window,hi.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=mi(this.parentElement,ou(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=Mo(e),n=mi(e,ou(".quick-input-titlebar")),i=this._register(new E0(n));i.domNode.classList.add("quick-input-left-action-bar");const s=mi(n,ou(".quick-input-title")),o=this._register(new E0(n));o.domNode.classList.add("quick-input-right-action-bar");const a=mi(e,ou(".quick-input-description")),l=mi(e,ou(".quick-input-header")),u=mi(l,ou("input.quick-input-check-all"));u.type="checkbox",this._register(eo(u,hi.CHANGE,un=>{const Kt=u.checked;Ze.setAllVisibleChecked(Kt)})),this._register(yn(u,hi.CLICK,un=>{(un.x||un.y)&&P.setFocus()}));const h=mi(l,ou(".quick-input-description")),v=mi(l,ou(".quick-input-and-message")),N=mi(v,ou(".quick-input-filter")),P=this._register(new q3(N));P.setAttribute("aria-describedby",`${this.idPrefix}message`);const K=mi(N,ou(".quick-input-visible-count"));K.setAttribute("aria-live","polite"),K.setAttribute("aria-atomic","true");const ee=new DN(K,{countFormat:w({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),Se=mi(N,ou(".quick-input-count"));Se.setAttribute("aria-live","polite");const Le=new DN(Se,{countFormat:w({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),ce=mi(l,ou(".quick-input-action")),Ee=new MN(ce);Ee.label=w("ok","OK"),this._register(Ee.onDidClick(un=>{this.onDidAcceptEmitter.fire()}));const ze=mi(l,ou(".quick-input-action")),Qe=new MN(ze);Qe.label=w("custom","Custom"),this._register(Qe.onDidClick(un=>{this.onDidCustomEmitter.fire()}));const at=mi(v,ou(`#${this.idPrefix}message.quick-input-message`)),Ze=this._register(new RE(e,this.idPrefix+"list",this.options));this._register(Ze.onChangedAllVisibleChecked(un=>{u.checked=un})),this._register(Ze.onChangedVisibleCount(un=>{ee.setCount(un)})),this._register(Ze.onChangedCheckedCount(un=>{Le.setCount(un)})),this._register(Ze.onLeave(()=>{setTimeout(()=>{P.setFocus(),this.controller instanceof Qy&&this.controller.canSelectMany&&Ze.clearFocus()},0)})),this._register(Ze.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));const rt=new e5(e);rt.getContainer().classList.add("quick-input-progress");const St=Os(e);return this._register(St),this._register(yn(e,hi.FOCUS,un=>{this.previousFocusElement=un.relatedTarget instanceof HTMLElement?un.relatedTarget:void 0},!0)),this._register(St.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(Yy.Blur),this.previousFocusElement=void 0})),this._register(yn(e,hi.FOCUS,un=>{P.setFocus()})),this._register(yn(e,hi.KEY_DOWN,un=>{const Kt=new jr(un);switch(Kt.keyCode){case 3:Gr.stop(un,!0),this.onDidAcceptEmitter.fire();break;case 9:Gr.stop(un,!0),this.hide(Yy.Gesture);break;case 2:if(!Kt.altKey&&!Kt.ctrlKey&&!Kt.metaKey){const An=[".action-label.codicon"];e.classList.contains("show-checkboxes")?An.push("input"):An.push("input[type=text]"),this.getUI().list.isDisplayed()&&An.push(".monaco-list");const Wn=e.querySelectorAll(An.join(", "));Kt.shiftKey&&Kt.target===Wn[0]?(Gr.stop(un,!0),Wn[Wn.length-1].focus()):!Kt.shiftKey&&Kt.target===Wn[Wn.length-1]&&(Gr.stop(un,!0),Wn[0].focus())}break}})),this.ui={container:e,styleSheet:t,leftActionBar:i,titleBar:n,title:s,description1:a,description2:h,rightActionBar:o,checkAll:u,filterContainer:N,inputBox:P,visibleCountContainer:K,visibleCount:ee,countContainer:Se,count:Le,okContainer:ce,ok:Ee,message:at,customButtonContainer:ze,customButton:Qe,list:Ze,progressBar:rt,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:un=>this.show(un),hide:()=>this.hide(),setVisibilities:un=>this.setVisibilities(un),setComboboxAccessibility:un=>this.setComboboxAccessibility(un),setEnabled:un=>this.setEnabled(un),setContextKey:un=>this.options.setContextKey(un)},this.updateStyles(),this.ui}pick(e,t={},n=Ls.None){return new Promise((i,s)=>{let o=h=>{o=i,t.onKeyMods&&t.onKeyMods(a.keyMods),i(h)};if(n.isCancellationRequested){o(void 0);return}const a=this.createQuickPick();let l;const u=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const h=a.activeItems[0];h&&(o(h),a.hide())}}),a.onDidChangeActive(h=>{const v=h[0];v&&t.onDidFocus&&t.onDidFocus(v)}),a.onDidChangeSelection(h=>{if(!a.canSelectMany){const v=h[0];v&&(o(v),a.hide())}}),a.onDidTriggerItemButton(h=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},h),{removeItem:()=>{const v=a.items.indexOf(h.item);if(v!==-1){const N=a.items.slice(),P=N.splice(v,1),K=a.activeItems.filter(ee=>ee!==P[0]);a.items=N,K&&(a.activeItems=K)}}}))),a.onDidChangeValue(h=>{l&&!h&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{Vi(u),o(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([h,v])=>{l=v,a.busy=!1,a.items=h,a.canSelectMany&&(a.selectedItems=h.filter(N=>N.type!=="separator"&&N.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,h=>{s(h),a.hide()})})}createQuickPick(){const e=this.getUI();return new Qy(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const n=this.controller;this.controller=e,n&&n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Is.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),Xh(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";const i=this.options.backKeybindingLabel();BE.tooltip=i?w("quickInput.backWithKeybinding","Back ({0})",i):w("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;const n=this.controller;if(n){const i=!((t=this.ui)===null||t===void 0?void 0:t.container.contains(document.activeElement));this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",i||(this.previousFocusElement&&this.previousFocusElement.offsetParent?(this.previousFocusElement.focus(),this.previousFocusElement=void 0):this.options.returnFocus()),n.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,P1.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,contrastBorder:i,widgetShadow:s}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=n?n.toString():"",this.ui.container.style.border=i?`1px solid ${i}`:"",this.ui.container.style.boxShadow=s?`0 0 8px 2px ${s}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const o=[];this.styles.list.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}}P1.MAX_WIDTH=600;const kN=Te("quickInputService");var WE;(function(r){r[r.PRESERVE=0]="PRESERVE",r[r.LAST=1]="LAST"})(WE||(WE={}));const AN={Quickaccess:"workbench.contributions.quickaccess"};class n5{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),Qi(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return I_([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}}k.add(AN.Quickaccess,new n5);var i5=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},RN=function(r,e){return function(t,n){e(t,n,r)}};let VE=class extends Rn{constructor(e,t){super();this.quickInputService=e,this.instantiationService=t,this.registry=k.as(AN.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var i;const[s,o]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,l=a==null?void 0:a.descriptor;if(a&&o&&l===o){e!==o.prefix&&!(n==null?void 0:n.preserveValue)&&(a.picker.value=e),this.adjustValueSelection(a.picker,o,n);return}if(o&&!(n==null?void 0:n.preserveValue)){let K;if(a&&l&&l!==o){const ee=a.value.substr(l.prefix.length);ee&&(K=`${o.prefix}${ee}`)}if(!K){const ee=s==null?void 0:s.defaultFilterValue;ee===WE.LAST?K=this.lastAcceptedPickerValues.get(o):typeof ee=="string"&&(K=`${o.prefix}${ee}`)}typeof K=="string"&&(e=K)}const u=new gi,h=u.add(this.quickInputService.createQuickPick());h.value=e,this.adjustValueSelection(h,o,n),h.placeholder=o==null?void 0:o.placeholder,h.quickNavigate=n==null?void 0:n.quickNavigateConfiguration,h.hideInput=!!h.quickNavigate&&!a,(typeof(n==null?void 0:n.itemActivation)=="number"||(n==null?void 0:n.quickNavigateConfiguration))&&(h.itemActivation=(i=n==null?void 0:n.itemActivation)!==null&&i!==void 0?i:Yc.SECOND),h.contextKey=o==null?void 0:o.contextKey,h.filterValue=K=>K.substring(o?o.prefix.length:0),(o==null?void 0:o.placeholder)&&(h.ariaLabel=o==null?void 0:o.placeholder);let v,N;t&&(v=new Promise(K=>N=K),u.add(b0(h.onWillAccept)(K=>{K.veto(),h.hide()}))),u.add(this.registerPickerListeners(h,s,o,e));const P=u.add(new ya);if(s&&u.add(s.provide(h,P.token)),b0(h.onDidHide)(()=>{h.selectedItems.length===0&&P.cancel(),u.dispose(),N==null||N(h.selectedItems)}),h.show(),t)return v}adjustValueSelection(e,t,n){var i;let s;(n==null?void 0:n.preserveValue)?s=[e.value.length,e.value.length]:s=[(i=t==null?void 0:t.prefix.length)!==null&&i!==void 0?i:0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,n,i){const s=new gi,o=this.visibleQuickAccess={picker:e,descriptor:n,value:i};return s.add(Qi(()=>{o===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),s.add(e.onDidChangeValue(a=>{const[l]=this.getOrInstantiateProvider(a);l!==t?this.show(a,{preserveValue:!0}):o.value=a})),n&&s.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),s}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}};VE=i5([RN(0,kN),RN(1,Dn)],VE);var r5=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Jy=function(r,e){return function(t,n){e(t,n,r)}};let HE=class extends TT{constructor(e,t,n,i,s){super(n);this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=i,this.layoutService=s,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(VE))),this._quickAccess}createController(e=this.layoutService,t){var n,i;const s={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:a=>this.setContextKey(a),returnFocus:()=>e.focus(),createList:(a,l,u,h,v)=>this.instantiationService.createInstance(SE,a,l,u,h,v),styles:this.computeStyles()},o=this._register(new P1(Object.assign(Object.assign({},s),t)));return o.layout(e.dimension,(i=(n=e.offset)===null||n===void 0?void 0:n.top)!==null&&i!==void 0?i:0),this._register(e.onDidLayout(a=>{var l,u;return o.layout(a,(u=(l=e.offset)===null||l===void 0?void 0:l.top)!==null&&u!==void 0?u:0)})),this._register(o.onShow(()=>this.resetContextKeys())),this._register(o.onHide(()=>this.resetContextKeys())),o}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new nr(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t&&t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},n=Ls.None){return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},jc(this.theme,{quickInputBackground:Cx,quickInputForeground:WM,quickInputTitleBackground:VM,contrastBorder:Ma,widgetShadow:ow})),inputBox:jc(this.theme,{inputForeground:vM,inputBackground:mM,inputBorder:_M,inputValidationInfoBackground:yM,inputValidationInfoForeground:bM,inputValidationInfoBorder:wM,inputValidationWarningBackground:CM,inputValidationWarningForeground:SM,inputValidationWarningBorder:EM,inputValidationErrorBackground:LM,inputValidationErrorForeground:xM,inputValidationErrorBorder:DM}),countBadge:jc(this.theme,{badgeBackground:TM,badgeForeground:MM,badgeBorder:Ma}),button:jc(this.theme,{buttonForeground:IM,buttonBackground:LC,buttonHoverBackground:NM,buttonBorder:Ma}),progressBar:jc(this.theme,{progressBarBackground:OM}),keybindingLabel:jc(this.theme,{keybindingLabelBackground:UM,keybindingLabelForeground:jM,keybindingLabelBorder:$M,keybindingLabelBottomBorder:KM,keybindingLabelShadow:ow}),list:jc(this.theme,{listBackground:Cx,listInactiveFocusForeground:pO,listInactiveSelectionIconForeground:mO,listInactiveFocusBackground:vO,listFocusOutline:Au,listInactiveFocusOutline:Au,pickerGroupBorder:zM,pickerGroupForeground:HM})}}};HE=r5([Jy(0,Dn),Jy(1,ps),Jy(2,Zo),Jy(3,Ru),Jy(4,o1)],HE);var PN=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Mm=function(r,e){return function(t,n){e(t,n,r)}};let zE=class extends HE{constructor(e,t,n,i,s,o){super(t,n,i,s,o);this.host=void 0;const a=W0.get(e);this.host={_serviceBrand:void 0,get container(){return a.widget.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus()}}createController(){return super.createController(this.host)}};zE=PN([Mm(1,Dn),Mm(2,ps),Mm(3,Zo),Mm(4,Ru),Mm(5,o1)],zE);let UE=class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(zE,e);this.mapEditorToService.set(e,t),b0(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},n=Ls.None){return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}};UE=PN([Mm(0,Dn),Mm(1,ht)],UE);class W0{constructor(e){this.editor=e,this.widget=new F1(this.editor)}static get(e){return e.getContribution(W0.ID)}dispose(){this.widget.dispose()}}W0.ID="editor.controller.quickInput";class F1{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return F1.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}F1.ID="editor.contrib.quickInputWidget",TL(W0.ID,W0);var Br;(function(r){const e=new xy;class t{constructor(l,u){this._serviceId=l,this._factory=u,this._value=null}get id(){return this._serviceId}get(l){if(!this._value){if(l&&(this._value=l[this._serviceId.toString()]),this._value||(this._value=this._factory(l)),!this._value)throw new Error("Service "+this._serviceId+" is missing!");e.set(this._serviceId,this._value)}return this._value}}r.LazyStaticService=t;let n=[];function i(a,l){let u=new t(a,l);return n.push(u),u}function s(a){let l=new xy;for(const[h,v]of sR())l.set(h,v);for(let h in a)a.hasOwnProperty(h)&&l.set(Te(h),a[h]);n.forEach(h=>l.set(h.id,h.get(a)));let u=new a1(l,!0);return l.set(Dn,u),[l,u]}r.init=s,r.instantiationService=i(Dn,()=>new a1(e,!0));const o=new yL;r.configurationService=i(ca,()=>o),r.resourceConfigurationService=i(Ov,()=>new bT(o)),r.resourcePropertiesService=i(Qf,()=>new K1(o)),r.contextService=i(gT,()=>new Lb),r.labelService=i(n4,()=>new ST),r.telemetryService=i(Vb,()=>new wT),r.dialogService=i(EI,()=>new _T),r.notificationService=i(Vc,()=>new Eb),r.markerService=i(cN,()=>new Nm),r.modeService=i(Sp,a=>new VR),r.standaloneThemeService=i(My,()=>new vP),r.logService=i(xd,()=>new O_(new M_)),r.undoRedoService=i(LS,a=>new O1(r.dialogService.get(a),r.notificationService.get(a))),r.modelService=i(La,a=>new Yw(r.configurationService.get(a),r.resourcePropertiesService.get(a),r.standaloneThemeService.get(a),r.logService.get(a),r.undoRedoService.get(a))),r.markerDecorationsService=i(wL,a=>new DE(r.modelService.get(a),r.markerService.get(a))),r.contextKeyService=i(ps,a=>new OS(r.configurationService.get(a))),r.codeEditorService=i(ht,a=>new $w(null,r.contextKeyService.get(a),r.standaloneThemeService.get(a))),r.editorProgressService=i(Uw,()=>new Sb),r.storageService=i(m3,()=>new v3),r.editorWorkerService=i(Ac,a=>new Rp(r.modelService.get(a),r.resourceConfigurationService.get(a),r.logService.get(a)))})(Br||(Br={}));class s5 extends Rn{constructor(e,t){super();const[n,i]=Br.init(t);this._serviceCollection=n,this._instantiationService=i;const s=this.get(ca),o=this.get(Vc),a=this.get(Vb),l=this.get(Zo),u=this.get(xd),h=this.get(ps);let v=(Se,Le)=>{let ce=null;return t&&(ce=t[Se.toString()]),ce||(ce=Le()),this._serviceCollection.set(Se,ce),ce};v(Ru,()=>new IE(h,s)),v(Hh,()=>new mE(l));let N=v(po,()=>new yT(this._instantiationService)),P=v(Rl,()=>this._register(new vL(h,N,a,o,u,e))),K=v(o1,()=>new ET(Br.codeEditorService.get(ht),e));v(kN,()=>new UE(i,Br.codeEditorService.get(ht)));let ee=v(x0,()=>this._register(new XS(K)));v(zw,()=>new w3),v(Hw,()=>{const Se=new ZS(a,o,ee,P,l);return Se.configure({blockMouse:!1}),this._register(Se)}),v(DL,()=>new LE(N)),v(d,()=>new CT(Br.modelService.get(La)))}get(e){let t=this._serviceCollection.get(e);if(!t)throw new Error("Missing service "+e);return t}set(e,t){this._serviceCollection.set(e,t)}has(e){return this._serviceCollection.has(e)}}function FN(r,e,t){let n=new s5(r,e),i=null;n.has(yd)||(i=new $1(Br.modelService.get()),n.set(yd,i)),n.has(hd)||n.set(hd,new dd(n.get(ht),n.get(po)));let s=t(n);return i&&i.setEditor(s),s}function o5(r,e,t){return FN(r,t||{},n=>new SS(r,e,n,n.get(Dn),n.get(ht),n.get(po),n.get(ps),n.get(Rl),n.get(x0),n.get(My),n.get(Vc),n.get(ca),n.get(Ru),n.get(La),n.get(Sp)))}function a5(r){return Br.codeEditorService.get().onCodeEditorAdd(e=>{r(e)})}function l5(r,e,t){return FN(r,t||{},n=>new ES(r,e,n,n.get(Dn),n.get(ps),n.get(Rl),n.get(x0),n.get(Ac),n.get(ht),n.get(My),n.get(Vc),n.get(ca),n.get(Hw),n.get(Uw),n.get(zw)))}function u5(r,e){return new qm(r,e)}function c5(r,e,t){return UD(Br.modelService.get(),Br.modeService.get(),r,e,t)}function h5(r,e){Br.modelService.get().setMode(r,Br.modeService.get().create(e))}function d5(r,e,t){r&&Br.markerService.get().changeOne(e,r.uri,t)}function f5(r){return Br.markerService.get().read(r)}function g5(r){return Br.markerService.get().onMarkerChanged(r)}function p5(r){return Br.modelService.get().getModel(r)}function m5(){return Br.modelService.get().getModels()}function v5(r){return Br.modelService.get().onModelAdded(r)}function _5(r){return Br.modelService.get().onModelRemoved(r)}function y5(r){return Br.modelService.get().onModelModeChanged(e=>{r({model:e.model,oldLanguage:e.oldModeId})})}function b5(r){return R_(Br.modelService.get(),r)}function w5(r,e){const t=Br.standaloneThemeService.get();return t.registerEditorContainer(r),Kp.colorizeElement(t,Br.modeService.get(),r,e)}function C5(r,e,t){return Br.standaloneThemeService.get().registerEditorContainer(document.body),Kp.colorize(Br.modeService.get(),r,e,t)}function S5(r,e,t=4){return Br.standaloneThemeService.get().registerEditorContainer(document.body),Kp.colorizeModelLine(r,e,t)}function E5(r){let e=bs.get(r);return e||{getInitialState:()=>Ff,tokenize:(t,n,i,s)=>__(r,t,i,s)}}function L5(r,e){Br.modeService.get().triggerMode(e);let n=E5(e),i=Ku(r),s=[],o=n.getInitialState();for(let a=0,l=i.length;a<l;a++){let u=i[a],h=n.tokenize(u,!0,o,0);s[a]=h.tokens,o=h.endState}return s}function x5(r,e){Br.standaloneThemeService.get().defineTheme(r,e)}function D5(r){Br.standaloneThemeService.get().setTheme(r)}function I5(){WT()}function N5(r,e){return Rr.registerCommand({id:r,handler:e})}function T5(){return{create:o5,onDidCreateEditor:a5,createDiffEditor:l5,createDiffNavigator:u5,createModel:c5,setModelLanguage:h5,setModelMarkers:d5,getModelMarkers:f5,onDidChangeMarkers:g5,getModels:m5,getModel:p5,onDidCreateModel:v5,onWillDisposeModel:_5,onDidChangeModelLanguage:y5,createWebWorker:b5,colorizeElement:w5,colorize:C5,colorizeModelLine:S5,tokenize:L5,defineTheme:x5,setTheme:D5,remeasureFonts:I5,registerCommand:N5,AccessibilitySupport:au,ContentWidgetPositionPreference:zu,CursorChangeReason:Bo,DefaultEndOfLine:Fl,EditorAutoIndentStrategy:Io,EditorOption:Wo,EndOfLinePreference:_s,EndOfLineSequence:pl,MinimapPosition:uu,MouseTargetType:Hr,OverlayWidgetPositionPreference:ia,OverviewRulerLane:as,RenderLineNumbersType:Qs,RenderMinimap:uo,ScrollbarVisibility:Pn,ScrollType:Qt,TextEditorCursorBlinkingStyle:bn,TextEditorCursorStyle:sn,TrackedRangeStickiness:fi,WrappingIndent:Ji,ConfigurationChangedEvent:pn,BareFontInfo:Qu,FontInfo:Ju,TextModelResolvedOptions:Eu,FindMatch:$o,EditorType:gd,EditorOptions:Zt}}function M5(r,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!r(t))return!1;return!0}function B1(r,e){return typeof r=="boolean"?r:e}function BN(r,e){return typeof r=="string"?r:e}function O5(r){const e={};for(const t of r)e[t]=!0;return e}function WN(r,e=!1){e&&(r=r.map(function(n){return n.toLowerCase()}));const t=O5(r);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}function jE(r,e){e=e.replace(/@@/g,"");let t=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(s,o){n=!0;let a="";if(typeof r[o]=="string")a=r[o];else if(r[o]&&r[o]instanceof RegExp)a=r[o].source;else throw r[o]===void 0?Ur(r,"language definition does not contain attribute '"+o+"', used at: "+e):Ur(r,"attribute reference '"+o+"' must be a string, used at: "+e);return Nh(a)?"":"(?:"+a+")"}),t++;while(n&&t<5);e=e.replace(/\x01/g,"@");let i=(r.ignoreCase?"i":"")+(r.unicode?"u":"");return new RegExp(e,i)}function k5(r,e,t,n){if(n<0)return r;if(n<e.length)return e[n];if(n>=100){n=n-100;let i=t.split(".");if(i.unshift(t),n<i.length)return i[n]}return null}function A5(r,e,t,n){let i=-1,s=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(i=parseInt(o[3]),o[2]&&(i=i+100)),s=o[4]);let a="~",l=s;!s||s.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(o=s.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],l=o[2]));let u;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){let h=WN(l.split("|"),r.ignoreCase);u=function(v){return a==="~"?h(v):!h(v)}}else if(a==="@"||a==="!@"){let h=r[l];if(!h)throw Ur(r,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!M5(function(N){return typeof N=="string"},h))throw Ur(r,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);let v=WN(h,r.ignoreCase);u=function(N){return a==="@"?v(N):!v(N)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){let h=jE(r,"^"+l+"$");u=function(v){return a==="~"?h.test(v):!h.test(v)}}else u=function(h,v,N,P){return jE(r,"^"+dc(r,l,v,N,P)+"$").test(h)};else if(l.indexOf("$")<0){let h=iu(r,l);u=function(v){return a==="=="?v===h:v!==h}}else{let h=iu(r,l);u=function(v,N,P,K,ee){let Se=dc(r,h,N,P,K);return a==="=="?v===Se:v!==Se}}return i===-1?{name:t,value:n,test:function(h,v,N,P){return u(h,h,v,N,P)}}:{name:t,value:n,test:function(h,v,N,P){let K=k5(h,v,N,i);return u(K||"",h,v,N,P)}}}function $E(r,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw Ur(r,"a 'token' attribute must be of type string, in rule: "+e);{let n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw Ur(r,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw Ur(r,"the next state must be a string value in rule: "+e);{let i=t.next;if(!/^(@pop|@push|@popall)$/.test(i)&&(i[0]==="@"&&(i=i.substr(1)),i.indexOf("$")<0&&!Up(r,dc(r,i,"",[],""))))throw Ur(r,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=i}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,r.usesEmbedded=!0),n}}else if(Array.isArray(t)){let n=[];for(let i=0,s=t.length;i<s;i++)n[i]=$E(r,e,t[i]);return{group:n}}else if(t.cases){let n=[];for(let s in t.cases)if(t.cases.hasOwnProperty(s)){const o=$E(r,e,t.cases[s]);s==="@default"||s==="@"||s===""?n.push({test:void 0,value:o,name:s}):s==="@eos"?n.push({test:function(a,l,u,h){return h},value:o,name:s}):n.push(A5(r,e,s,o))}const i=r.defaultToken;return{test:function(s,o,a,l){for(const u of n)if(!u.test||u.test(s,o,a,l))return u.value;return i}}}else throw Ur(r,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class R5{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw Ur(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=jE(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=$E(e,this.name,t)}}function P5(r,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");let t={};t.languageId=r,t.includeLF=B1(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=B1(e.ignoreCase,!1),t.unicode=B1(e.unicode,!1),t.tokenPostfix=BN(e.tokenPostfix,"."+t.languageId),t.defaultToken=BN(e.defaultToken,"source"),t.usesEmbedded=!1;let n=e;n.languageId=r,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function i(o,a,l){for(const u of l){let h=u.include;if(h){if(typeof h!="string")throw Ur(t,"an 'include' attribute must be a string at: "+o);if(h[0]==="@"&&(h=h.substr(1)),!e.tokenizer[h])throw Ur(t,"include target '"+h+"' is not defined at: "+o);i(o+"."+h,a,e.tokenizer[h])}else{const v=new R5(o);if(Array.isArray(u)&&u.length>=1&&u.length<=3)if(v.setRegex(n,u[0]),u.length>=3)if(typeof u[1]=="string")v.setAction(n,{token:u[1],next:u[2]});else if(typeof u[1]=="object"){const N=u[1];N.next=u[2],v.setAction(n,N)}else throw Ur(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else v.setAction(n,u[1]);else{if(!u.regex)throw Ur(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);u.name&&typeof u.name=="string"&&(v.name=u.name),u.matchOnlyAtStart&&(v.matchOnlyAtLineStart=B1(u.matchOnlyAtLineStart,!1)),v.setRegex(n,u.regex),v.setAction(n,u.action)}a.push(v)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw Ur(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(let o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,i("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw Ur(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];let s=[];for(let o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw Ur(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")s.push({token:a.token+t.tokenPostfix,open:iu(t,a.open),close:iu(t,a.close)});else throw Ur(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=s,t.noThrow=!0,t}function F5(r){_m.registerLanguage(r)}function B5(){let r=[];return r=r.concat(_m.getLanguages()),r}function W5(r){let e=Br.modeService.get().getLanguageIdentifier(r);return e?e.id:0}function V5(r,e){let t=Br.modeService.get().onDidCreateMode(n=>{n.getId()===r&&(t.dispose(),e())});return t}function H5(r,e){let t=Br.modeService.get().getLanguageIdentifier(r);if(!t)throw new Error(`Cannot set configuration for unknown language ${r}`);return $r.register(t,e,100)}class z5{constructor(e,t){this._languageIdentifier=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n,i){if(typeof this._actual.tokenize=="function")return eb.adaptTokenize(this._languageIdentifier.language,this._actual,e,n,i);throw new Error("Not supported!")}tokenize2(e,t,n){let i=this._actual.tokenizeEncoded(e,n);return new gl(i.tokens,i.endState)}}class eb{constructor(e,t,n){this._standaloneThemeService=e,this._languageIdentifier=t,this._actual=n}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t,n){let i=[],s=0;for(let o=0,a=e.length;o<a;o++){const l=e[o];let u=l.startIndex;o===0?u=0:u<s&&(u=s),i[o]=new lo(u+n,l.scopes,t),s=u}return i}static adaptTokenize(e,t,n,i,s){let o=t.tokenize(n,i),a=eb._toClassicTokens(o.tokens,e,s),l;return o.endState.equals(i)?l=i:l=o.endState,new na(a,l)}tokenize(e,t,n,i){return eb.adaptTokenize(this._languageIdentifier.language,this._actual,e,n,i)}_toBinaryTokens(e,t){const n=this._languageIdentifier.id,i=this._standaloneThemeService.getColorTheme().tokenTheme;let s=[],o=0,a=0;for(let u=0,h=e.length;u<h;u++){const v=e[u],N=i.match(n,v.scopes);if(o>0&&s[o-1]===N)continue;let P=v.startIndex;u===0?P=0:P<a&&(P=a),s[o++]=P+t,s[o++]=N,a=P}let l=new Uint32Array(o);for(let u=0;u<o;u++)l[u]=s[u];return l}tokenize2(e,t,n,i){let s=this._actual.tokenize(e,n),o=this._toBinaryTokens(s.tokens,i),a;return s.endState.equals(n)?a=n:a=s.endState,new gl(o,a)}}function U5(r){return"tokenizeEncoded"in r}function VN(r){return r&&typeof r.then=="function"}function j5(r){if(r){const e=[null];for(let t=1,n=r.length;t<n;t++)e[t]=Tn.fromHex(r[t]);Br.standaloneThemeService.get().setColorMapOverride(e)}else Br.standaloneThemeService.get().setColorMapOverride(null)}function $5(r,e){let t=Br.modeService.get().getLanguageIdentifier(r);if(!t)throw new Error(`Cannot set tokens provider for unknown language ${r}`);const n=i=>U5(i)?new z5(t,i):new eb(Br.standaloneThemeService.get(),t,i);return VN(e)?bs.registerPromise(r,e.then(i=>n(i))):bs.register(r,n(e))}function K5(r,e){const t=n=>K_(Br.modeService.get(),Br.standaloneThemeService.get(),r,P5(r,n));return VN(e)?bs.registerPromise(r,e.then(n=>t(n))):bs.register(r,t(e))}function G5(r,e){return ph.register(r,e)}function Y5(r,e){return hp.register(r,e)}function Z5(r,e){return dp.register(r,e)}function X5(r,e){return mh.register(r,{provideHover:(t,n,i)=>{let s=t.getWordAtPosition(n);return Promise.resolve(e.provideHover(t,n,i)).then(o=>{if(!!o)return!o.range&&s&&(o.range=new Mt(n.lineNumber,s.startColumn,n.lineNumber,s.endColumn)),o.range||(o.range=new Mt(n.lineNumber,n.column,n.lineNumber,n.column)),o})}})}function q5(r,e){return fp.register(r,e)}function Q5(r,e){return gp.register(r,e)}function J5(r,e){return g_.register(r,e)}function eF(r,e){return pp.register(r,e)}function tF(r,e){return vp.register(r,e)}function nF(r,e){return _p.register(r,e)}function iF(r,e){return yp.register(r,e)}function rF(r,e){return wp.register(r,{provideCodeActions:(t,n,i,s)=>{let o=Br.markerService.get().read({resource:t.uri}).filter(a=>Mt.areIntersectingOrTouching(a,n));return e.provideCodeActions(t,n,{markers:o,only:i.only},s)}})}function sF(r,e){return _d.register(r,e)}function oF(r,e){return Lu.register(r,e)}function aF(r,e){return Cp.register(r,e)}function lF(r,e){return pv.register(r,e)}function uF(r,e){return Pf.register(r,e)}function cF(r,e){return p_.register(r,e)}function hF(r,e){return mv.register(r,e)}function dF(r,e){return mp.register(r,e)}function fF(r,e){return m_.register(r,e)}function gF(r,e){return nc.register(r,e)}function pF(r,e){return vv.register(r,e)}function mF(r,e){return gv.register(r,e)}function vF(r,e){return bp.register(r,e)}function _F(){return{register:F5,getLanguages:B5,onLanguage:V5,getEncodedLanguageId:W5,setLanguageConfiguration:H5,setColorMap:j5,setTokensProvider:$5,setMonarchTokensProvider:K5,registerReferenceProvider:G5,registerRenameProvider:Y5,registerCompletionItemProvider:uF,registerSignatureHelpProvider:Z5,registerHoverProvider:X5,registerDocumentSymbolProvider:q5,registerDocumentHighlightProvider:Q5,registerLinkedEditingRangeProvider:J5,registerDefinitionProvider:eF,registerImplementationProvider:tF,registerTypeDefinitionProvider:nF,registerCodeLensProvider:iF,registerCodeActionProvider:rF,registerDocumentFormattingEditProvider:sF,registerDocumentRangeFormattingEditProvider:oF,registerOnTypeFormattingEditProvider:aF,registerLinkProvider:lF,registerColorProvider:cF,registerFoldingRangeProvider:hF,registerDeclarationProvider:dF,registerSelectionRangeProvider:fF,registerDocumentSemanticTokensProvider:gF,registerDocumentRangeSemanticTokensProvider:pF,registerInlineCompletionsProvider:mF,registerInlayHintsProvider:vF,DocumentHighlightKind:lu,CompletionItemKind:Za,CompletionItemTag:Xa,CompletionItemInsertTextRule:Ms,SymbolKind:Wi,SymbolTag:At,IndentAction:Bl,CompletionTriggerKind:Hu,SignatureHelpTriggerKind:pi,InlayHintKind:No,InlineCompletionTriggerKind:_r,FoldingRangeKind:tc}}class KE{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}var Ng=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(v){o(v)}}function l(h){try{u(n.throw(h))}catch(v){o(v)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function HN(r){if(r=r.filter(i=>i.range),!r.length)return;let{range:e}=r[0];for(let i=1;i<r.length;i++)e=Range.plusRange(e,r[i].range);const{startLineNumber:t,endLineNumber:n}=e;t===n?r.length===1?alert(nls.localize("hint11","Made 1 formatting edit on line {0}",t)):alert(nls.localize("hintn1","Made {0} formatting edits on line {1}",r.length,t)):r.length===1?alert(nls.localize("hint1n","Made 1 formatting edit between lines {0} and {1}",t,n)):alert(nls.localize("hintnn","Made {0} formatting edits between lines {1} and {2}",r.length,t,n))}function zN(r){const e=[],t=new Set,n=_d.ordered(r);for(const s of n)e.push(s),s.extensionId&&t.add(KE.toKey(s.extensionId));const i=Lu.ordered(r);for(const s of i){if(s.extensionId){if(t.has(KE.toKey(s.extensionId)))continue;t.add(KE.toKey(s.extensionId))}e.push({displayName:s.displayName,extensionId:s.extensionId,provideDocumentFormattingEdits(o,a,l){return s.provideDocumentRangeFormattingEdits(o,o.getFullModelRange(),a,l)}})}return e}class Om{static setFormatterSelector(e){return{dispose:Om._selectors.unshift(e)}}static select(e,t,n){return Ng(this,void 0,void 0,function*(){if(e.length===0)return;const i=ti.first(Om._selectors);if(i)return yield i(e,t,n)})}}Om._selectors=new Lr;function e6(r,e,t,n,i,s){return Ng(this,void 0,void 0,function*(){const o=r.get(IInstantiationService),a=isCodeEditor(e)?e.getModel():e,l=DocumentRangeFormattingEditProviderRegistry.ordered(a),u=yield Om.select(l,a,n);u&&(i.report(u),yield o.invokeFunction(yF,u,e,t,s))})}function yF(r,e,t,n,i){return Ng(this,void 0,void 0,function*(){const s=r.get(IEditorWorkerService);let o,a;isCodeEditor(t)?(o=t.getModel(),a=new EditorStateCancellationTokenSource(t,1|4,void 0,i)):(o=t,a=new TextModelCancellationTokenSource(t,i));let l=[],u=0;for(let K of asArray(n).sort(Range.compareRangesUsingStarts))u>0&&Range.areIntersectingOrTouching(l[u-1],K)?l[u-1]=Range.fromPositions(l[u-1].getStartPosition(),K.getEndPosition()):u=l.push(K);const h=K=>Ng(this,void 0,void 0,function*(){return(yield e.provideDocumentRangeFormattingEdits(o,K,o.getFormattingOptions(),a.token))||[]}),v=(K,ee)=>{if(!K.length||!ee.length)return!1;const Se=K.reduce((Le,ce)=>Range.plusRange(Le,ce.range),K[0].range);if(!ee.some(Le=>Range.intersectRanges(Se,Le.range)))return!1;for(let Le of K)for(let ce of ee)if(Range.intersectRanges(Le.range,ce.range))return!0;return!1},N=[],P=[];try{for(let K of l){if(a.token.isCancellationRequested)return!0;P.push(yield h(K))}for(let K=0;K<l.length;++K)for(let ee=K+1;ee<l.length;++ee){if(a.token.isCancellationRequested)return!0;if(v(P[K],P[ee])){const Se=Range.plusRange(l[K],l[ee]),Le=yield h(Se);l.splice(ee,1),l.splice(K,1),l.push(Se),P.splice(ee,1),P.splice(K,1),P.push(Le),K=0,ee=0}}for(let K of P){if(a.token.isCancellationRequested)return!0;const ee=yield s.computeMoreMinimalEdits(o.uri,K);ee&&N.push(...ee)}}finally{a.dispose()}if(N.length===0)return!1;if(isCodeEditor(t))FormattingEdit.execute(t,N,!0),HN(N),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:K}]=N,ee=new Selection(K.startLineNumber,K.startColumn,K.endLineNumber,K.endColumn);o.pushEditOperations([ee],N.map(Se=>({text:Se.text,range:Range.lift(Se.range),forceMoveMarkers:!0})),Se=>{for(const{range:Le}of Se)if(Range.areIntersectingOrTouching(Le,ee))return[new Selection(Le.startLineNumber,Le.startColumn,Le.endLineNumber,Le.endColumn)];return null})}return!0})}function t6(r,e,t,n,i){return Ng(this,void 0,void 0,function*(){const s=r.get(IInstantiationService),o=isCodeEditor(e)?e.getModel():e,a=zN(o),l=yield Om.select(a,o,t);l&&(n.report(l),yield s.invokeFunction(bF,l,e,t,i))})}function bF(r,e,t,n,i){return Ng(this,void 0,void 0,function*(){const s=r.get(IEditorWorkerService);let o,a;isCodeEditor(t)?(o=t.getModel(),a=new EditorStateCancellationTokenSource(t,1|4,void 0,i)):(o=t,a=new TextModelCancellationTokenSource(t,i));let l;try{const u=yield e.provideDocumentFormattingEdits(o,o.getFormattingOptions(),a.token);if(l=yield s.computeMoreMinimalEdits(o.uri,u),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!l||l.length===0)return!1;if(isCodeEditor(t))FormattingEdit.execute(t,l,n!==2),n!==2&&(HN(l),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1));else{const[{range:u}]=l,h=new Selection(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn);o.pushEditOperations([h],l.map(v=>({text:v.text,range:Range.lift(v.range),forceMoveMarkers:!0})),v=>{for(const{range:N}of v)if(Range.areIntersectingOrTouching(N,h))return[new Selection(N.startLineNumber,N.startColumn,N.endLineNumber,N.endColumn)];return null})}return!0})}function wF(r,e,t,n,i){return Ng(this,void 0,void 0,function*(){const s=Lu.ordered(e);for(const o of s){let a=yield Promise.resolve(o.provideDocumentRangeFormattingEdits(e,t,n,i)).catch(qn);if(Go(a))return yield r.computeMoreMinimalEdits(e.uri,a)}})}function CF(r,e,t,n){return Ng(this,void 0,void 0,function*(){const i=zN(e);for(const s of i){let o=yield Promise.resolve(s.provideDocumentFormattingEdits(e,t,n)).catch(qn);if(Go(o))return yield r.computeMoreMinimalEdits(e.uri,o)}})}function SF(r,e,t,n,i){const s=Cp.ordered(e);return s.length===0||s[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(s[0].provideOnTypeFormattingEdits(e,t,n,i,Ls.None)).catch(qn).then(o=>r.computeMoreMinimalEdits(e.uri,o))}Rr.registerCommand("_executeFormatRangeProvider",function(r,...e){const[t,n,i]=e;Sa(ci.isUri(t)),Sa(Mt.isIRange(n));const s=r.get(La).getModel(t);if(!s)throw Jn("resource");return wF(r.get(Ac),s,Mt.lift(n),i,Ls.None)}),Rr.registerCommand("_executeFormatDocumentProvider",function(r,...e){const[t,n]=e;Sa(ci.isUri(t));const i=r.get(La).getModel(t);if(!i)throw Jn("resource");return CF(r.get(Ac),i,n,Ls.None)}),Rr.registerCommand("_executeFormatOnTypeProvider",function(r,...e){const[t,n,i,s]=e;Sa(ci.isUri(t)),Sa(dn.isIPosition(n)),Sa(typeof i=="string");const o=r.get(La).getModel(t);if(!o)throw Jn("resource");return SF(r.get(Ac),o,dn.lift(n),i,s)});var GE;Zt.wrappingIndent.defaultValue=0,Zt.glyphMargin.defaultValue=!1,Zt.autoIndent.defaultValue=3,Zt.overviewRulerLanes.defaultValue=2,Om.setFormatterSelector((r,e,t)=>Promise.resolve(r[0]));const ja=bt();ja.editor=T5(),ja.languages=_F();const EF=ja.CancellationTokenSource,LF=ja.Emitter,xF=ja.KeyCode,DF=ja.KeyMod,IF=ja.Position,NF=ja.Range,TF=ja.Selection,MF=ja.SelectionDirection,OF=ja.MarkerSeverity,kF=ja.MarkerTag,AF=ja.Uri,RF=ja.Token,jh=ja.editor,PF=ja.languages;(((GE=ie.MonacoEnvironment)===null||GE===void 0?void 0:GE.globalAPI)||typeof define=="function"&&fn.amdO)&&(self.monaco=ja),typeof self.require!="undefined"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});var ts=fn(68712),W1=fn(59301);function V1(r){return/^\d+$/.test(r)?r+"px":r}function V0(){}var FF=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),km=function(){return km=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},km.apply(this,arguments)},n6=function(r){FF(e,r);function e(t){var n=r.call(this,t)||this;return n.assignRef=function(i){n.containerElement=i},n.containerElement=void 0,n}return e.prototype.componentDidMount=function(){this.initMonaco()},e.prototype.componentDidUpdate=function(t){var n=this.props,i=n.language,s=n.theme,o=n.height,a=n.options,l=n.width,u=n.className,h=this.editor.getModel(),v=h.original,N=h.modified;this.props.original!==v.getValue()&&v.setValue(this.props.original),this.props.value!=null&&this.props.value!==N.getValue()&&(this.__prevent_trigger_change_event=!0,this.editor.getModifiedEditor().pushUndoStop(),N.pushEditOperations([],[{range:N.getFullModelRange(),text:this.props.value}]),this.editor.getModifiedEditor().pushUndoStop(),this.__prevent_trigger_change_event=!1),t.language!==i&&(jh.setModelLanguage(v,i),jh.setModelLanguage(N,i)),t.theme!==s&&jh.setTheme(s),this.editor&&(l!==t.width||o!==t.height)&&this.editor.layout(),t.options!==a&&this.editor.updateOptions(km(km({},u?{extraEditorClassName:u}:{}),a))},e.prototype.componentWillUnmount=function(){this.destroyMonaco()},e.prototype.editorWillMount=function(){var t=this.props.editorWillMount,n=t(In);return n||{}},e.prototype.editorDidMount=function(t){var n=this;this.props.editorDidMount(t,In);var i=t.getModel().modified;this._subscription=i.onDidChangeContent(function(s){n.__prevent_trigger_change_event||n.props.onChange(i.getValue(),s)})},e.prototype.initModels=function(t,n){var i=this.props.language,s=jh.createModel(n,i),o=jh.createModel(t,i);this.editor.setModel({original:s,modified:o})},e.prototype.initMonaco=function(){var t=this.props.value!=null?this.props.value:this.props.defaultValue,n=this.props,i=n.original,s=n.theme,o=n.options,a=n.overrideServices,l=n.className;this.containerElement&&(this.editorWillMount(),this.editor=jh.createDiffEditor(this.containerElement,km(km(km({},l?{extraEditorClassName:l}:{}),o),s?{theme:s}:{}),a),this.initModels(t,i),this.editorDidMount(this.editor))},e.prototype.destroyMonaco=function(){if(this.editor){this.editor.dispose();var t=this.editor.getModel(),n=t.original,i=t.modified;n&&n.dispose(),i&&i.dispose()}this._subscription&&this._subscription.dispose()},e.prototype.render=function(){var t=this.props,n=t.width,i=t.height,s=V1(n),o=V1(i),a={width:s,height:o};return W1.createElement("div",{ref:this.assignRef,style:a,className:"react-monaco-editor-container"})},e.propTypes={width:ts.oneOfType([ts.string,ts.number]),height:ts.oneOfType([ts.string,ts.number]),original:ts.string,value:ts.string,defaultValue:ts.string,language:ts.string,theme:ts.string,options:ts.object,overrideServices:ts.object,editorDidMount:ts.func,editorWillMount:ts.func,onChange:ts.func,className:ts.string},e.defaultProps={width:"100%",height:"100%",original:null,value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorDidMount:V0,editorWillMount:V0,onChange:V0,className:null},e}(W1.Component),i6=null,BF=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),tf=function(){return tf=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},tf.apply(this,arguments)},WF=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t},r6=function(r){BF(e,r);function e(t){var n=r.call(this,t)||this;return n.assignRef=function(i){n.containerElement=i},n.containerElement=void 0,n}return e.prototype.componentDidMount=function(){this.initMonaco()},e.prototype.componentDidUpdate=function(t){var n=this.props,i=n.value,s=n.language,o=n.theme,a=n.height,l=n.options,u=n.width,h=n.className,v=this.editor,N=v.getModel();if(this.props.value!=null&&this.props.value!==N.getValue()&&(this.__prevent_trigger_change_event=!0,this.editor.pushUndoStop(),N.pushEditOperations([],[{range:N.getFullModelRange(),text:i}]),this.editor.pushUndoStop(),this.__prevent_trigger_change_event=!1),t.language!==s&&jh.setModelLanguage(N,s),t.theme!==o&&jh.setTheme(o),v&&(u!==t.width||a!==t.height)&&v.layout(),t.options!==l){var P=l.model,K=WF(l,["model"]);v.updateOptions(tf(tf({},h?{extraEditorClassName:h}:{}),K))}},e.prototype.componentWillUnmount=function(){this.destroyMonaco()},e.prototype.destroyMonaco=function(){if(this.editor){this.editor.dispose();var t=this.editor.getModel();t&&t.dispose()}this._subscription&&this._subscription.dispose()},e.prototype.initMonaco=function(){var t=this.props.value!=null?this.props.value:this.props.defaultValue,n=this.props,i=n.language,s=n.theme,o=n.overrideServices,a=n.className;if(this.containerElement){var l=tf(tf({},this.props.options),this.editorWillMount());this.editor=jh.create(this.containerElement,tf(tf(tf({value:t,language:i},a?{extraEditorClassName:a}:{}),l),s?{theme:s}:{}),o),this.editorDidMount(this.editor)}},e.prototype.editorWillMount=function(){var t=this.props.editorWillMount,n=t(In);return n||{}},e.prototype.editorDidMount=function(t){var n=this;this.props.editorDidMount(t,In),this._subscription=t.onDidChangeModelContent(function(i){n.__prevent_trigger_change_event||n.props.onChange(t.getValue(),i)})},e.prototype.render=function(){var t=this.props,n=t.width,i=t.height,s=V1(n),o=V1(i),a={width:s,height:o};return W1.createElement("div",{ref:this.assignRef,style:a,className:"react-monaco-editor-container"})},e.propTypes={width:ts.oneOfType([ts.string,ts.number]),height:ts.oneOfType([ts.string,ts.number]),value:ts.string,defaultValue:ts.string,language:ts.string,theme:ts.string,options:ts.object,overrideServices:ts.object,editorDidMount:ts.func,editorWillMount:ts.func,onChange:ts.func,className:ts.string},e.defaultProps={width:"100%",height:"100%",value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorDidMount:V0,editorWillMount:V0,onChange:V0,className:null},e}(W1.Component),s6=null}}]);
