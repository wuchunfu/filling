(self.webpackChunkfilling_web=self.webpackChunkfilling_web||[]).push([[366],{88102:function(Q,A,t){"use strict";t.r(A),t.d(A,{default:function(){return s}});var y=t(47945),v=t(27e3),I=t(79030),l=t(97231),d=t(83405),O=t(44710),F=t(88038),j=t(30513),w=t(90122),x=t.n(w),f=t(59301),D=t(41760),S=t(82027),J=t(8371),Z=t(40927),G=t(52645),a=t(37712),L=function(c){return _jsxs(StepsForm,{stepsProps:{size:"small"},stepsFormRender:function(b,T){return _jsx(_Modal,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",visible:c.updateModalVisible,footer:T,onCancel:function(){c.onCancel()},children:b})},onFinish:c.onSubmit,children:[_jsxs(StepsForm.StepForm,{initialValues:{name:c.values.name,desc:c.values.desc},title:"\u57FA\u672C\u4FE1\u606F",children:[_jsx(ProFormText,{name:"name",label:"\u89C4\u5219\u540D\u79F0",width:"md",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]}),_jsx(ProFormTextArea,{name:"desc",width:"md",label:"\u89C4\u5219\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01",min:5}]})]}),_jsxs(StepsForm.StepForm,{initialValues:{target:"0",template:"0"},title:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027",children:[_jsx(ProFormSelect,{name:"target",width:"md",label:"\u76D1\u63A7\u5BF9\u8C61",valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),_jsx(ProFormSelect,{name:"template",width:"md",label:"\u89C4\u5219\u6A21\u677F",valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),_jsx(ProFormRadio.Group,{name:"type",label:"\u89C4\u5219\u7C7B\u578B",options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),_jsxs(StepsForm.StepForm,{initialValues:{type:"1",frequency:"month"},title:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F",children:[_jsx(ProFormDateTimePicker,{name:"time",width:"md",label:"\u5F00\u59CB\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"}]}),_jsx(ProFormSelect,{name:"frequency",label:"\u76D1\u63A7\u5BF9\u8C61",width:"md",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},P=null,B=t(58243),E=t(80444),n=null,r=null,o=function(){var R=(0,j.Z)(x().mark(function c(m){var b;return x().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(b=F.default.loading("\u6B63\u5728\u5220\u9664"),m){u.next=3;break}return u.abrupt("return",!0);case 3:return u.prev=3,console.log(m),u.next=7,(0,B.pn)(m.id);case 7:return b(),F.default.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),u.abrupt("return",!0);case 12:return u.prev=12,u.t0=u.catch(3),console.log(u.t0),b(),F.default.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),u.abrupt("return",!1);case 18:case"end":return u.stop()}},c,null,[[3,12]])}));return function(m){return R.apply(this,arguments)}}(),e=function(){var c=(0,f.useState)(!1),m=(0,d.Z)(c,2),b=m[0],T=m[1],u=(0,f.useState)(!1),V=(0,d.Z)(u,2),re=V[0],X=V[1],Y=(0,f.useState)(!1),W=(0,d.Z)(Y,2),q=W[0],ee=W[1],U=(0,f.useRef)(),te=(0,f.useState)(),K=(0,d.Z)(te,2),h=K[0],z=K[1],ne=(0,f.useState)([]),k=(0,d.Z)(ne,2),C=k[0],$=k[1],N=[{title:"\u4EFB\u52A1\u540D\u79F0",dataIndex:"name",tip:"\u4E5F\u662Fflink\u7684\u4EFB\u52A1\u540D\u79F0",render:function(p,i){return(0,a.jsx)(E.rU,{to:"/butterfly-dag/"+i.id,children:p})}},{title:"\u4EFB\u52A1\u7C7B\u578B",dataIndex:"type"},{title:"\u72B6\u6001",dataIndex:"status",hideInForm:!0,valueEnum:{1:{text:"\u672A\u8FD0\u884C",status:"Created"},2:{text:"\u8FD0\u884C\u4E2D",status:"Processing"},3:{text:"\u5B8C\u6210",status:"Success"},4:{text:"\u5931\u8D25",status:"Error"},5:{text:"\u505C\u6B62",status:"normal"},6:{text:"\u5931\u8D25",status:"Error"},7:{text:"\u53D6\u6D88\u4E2D",status:"Canceling"},8:{text:"\u91CD\u542F\u4E2D",status:"Restarting"}}},{title:"\u6700\u540E\u4FEE\u6539\u65F6\u95F4",dataIndex:"updatetime",valueType:"dataTime"},{title:"description",sorter:!0,dataIndex:"description",valueType:"textarea"},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(p,i){return[(0,a.jsx)("a",{onClick:function(){X(!0),z(i)},children:"\u4FEE\u6539"},"id"),(0,a.jsx)("a",{onClick:function(){var _,M;o(i),$([]),(_=U.current)===null||_===void 0||(M=_.reloadAndRest)===null||M===void 0||M.call(_)},children:"\u5220\u9664"},"id")]}}];return(0,a.jsxs)(D.ZP,{children:[(0,a.jsx)(J.ZP,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:U,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,a.jsx)(E.rU,{to:"/butterfly-dag/",children:"\u65B0\u5EFA\u4EFB\u52A1"})]},request:B.N1,columns:N,rowSelection:{onChange:function(p,i){$(i)}}}),(C==null?void 0:C.length)>0&&(0,a.jsxs)(S.Z,{extra:(0,a.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,a.jsx)("a",{style:{fontWeight:600},children:C.length})," ","\u9879 \xA0\xA0",(0,a.jsxs)("span",{children:["\u670D\u52A1\u8C03\u7528\u6B21\u6570\u603B\u8BA1 ",C.reduce(function(g,p){return g+p.callNo},0)," \u4E07"]})]}),children:[(0,a.jsx)(l.Z,{onClick:(0,j.Z)(x().mark(function g(){var p,i;return x().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,o(C);case 2:$([]),(p=U.current)===null||p===void 0||(i=p.reloadAndRest)===null||i===void 0||i.call(p);case 4:case"end":return _.stop()}},g)})),children:"\u6279\u91CF\u5220\u9664"}),(0,a.jsx)(l.Z,{type:"primary",children:"\u6279\u91CF\u5BA1\u6279"})]}),(0,a.jsx)(v.Z,{width:600,visible:q,onClose:function(){z(void 0),ee(!1)},closable:!1,children:(h==null?void 0:h.name)&&(0,a.jsx)(Z.Z,{column:2,title:h==null?void 0:h.name,request:(0,j.Z)(x().mark(function g(){return x().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",{data:h||{}});case 1:case"end":return i.stop()}},g)})),params:{id:h==null?void 0:h.name},columns:N})})]})},s=e},58243:function(Q,A,t){"use strict";t.d(A,{cn:function(){return O},N1:function(){return j},MM:function(){return D},pn:function(){return J},E3:function(){return G},Dj:function(){return L},lQ:function(){return B}});var y=t(906),v=t(30513),I=t(90122),l=t.n(I),d=t(1319);function O(n,r){return F.apply(this,arguments)}function F(){return F=(0,v.Z)(l().mark(function n(r,o){return l().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.Z)("/api/filling-jobs/"+r,(0,y.Z)({method:"GET"},o||{})));case 1:case"end":return s.stop()}},n)})),F.apply(this,arguments)}function j(n,r){return w.apply(this,arguments)}function w(){return w=(0,v.Z)(l().mark(function n(r,o){return l().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.Z)("/api/filling-jobs",(0,y.Z)({method:"GET",params:(0,y.Z)({},r)},o||{})));case 1:case"end":return s.stop()}},n)})),w.apply(this,arguments)}function x(n){return f.apply(this,arguments)}function f(){return f=_asyncToGenerator(_regeneratorRuntime.mark(function n(r){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/filling-jobs",_objectSpread({method:"PUT"},r||{})));case 1:case"end":return e.stop()}},n)})),f.apply(this,arguments)}function D(n){return S.apply(this,arguments)}function S(){return S=(0,v.Z)(l().mark(function n(r){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.Z)("/api/filling-jobs",(0,y.Z)({method:"POST"},r||{})));case 1:case"end":return e.stop()}},n)})),S.apply(this,arguments)}function J(n){return Z.apply(this,arguments)}function Z(){return Z=(0,v.Z)(l().mark(function n(r){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r),e.abrupt("return",(0,d.Z)("/api/filling-jobs/"+r,{method:"DELETE"}));case 2:case"end":return e.stop()}},n)})),Z.apply(this,arguments)}function G(n,r){return a.apply(this,arguments)}function a(){return a=(0,v.Z)(l().mark(function n(r,o){return l().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return o.data.id=r,s.abrupt("return",(0,d.Z)("/api/filling-jobs/"+r,(0,y.Z)({method:"PATCH"},o||{})));case 2:case"end":return s.stop()}},n)})),a.apply(this,arguments)}function L(n){return P.apply(this,arguments)}function P(){return P=(0,v.Z)(l().mark(function n(r){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.Z)("/api/filling-jobs/"+r+"/start",{method:"GET"}));case 1:case"end":return e.stop()}},n)})),P.apply(this,arguments)}function B(n){return E.apply(this,arguments)}function E(){return E=(0,v.Z)(l().mark(function n(r){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.Z)("/api/filling-jobs/"+r+"/stop",{method:"GET"}));case 1:case"end":return e.stop()}},n)})),E.apply(this,arguments)}}}]);
